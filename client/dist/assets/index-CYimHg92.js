function FJ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var nvt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nD(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var OT={exports:{}},pv={};var t7;function Rpe(){if(t7)return pv;t7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:i}}return pv.Fragment=e,pv.jsx=n,pv.jsxs=n,pv}var n7;function Ope(){return n7||(n7=1,OT.exports=Rpe()),OT.exports}var o=Ope(),FT={exports:{}},ar={};var r7;function Fpe(){if(r7)return ar;r7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),A=Symbol.iterator;function m(H){return H===null||typeof H!="object"?null:(H=A&&H[A]||H["@@iterator"],typeof H=="function"?H:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(H,Q,X){this.props=H,this.context=Q,this.refs=x,this.updater=X||g}v.prototype.isReactComponent={},v.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},v.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=v.prototype;function B(H,Q,X){this.props=H,this.context=Q,this.refs=x,this.updater=X||g}var k=B.prototype=new w;k.constructor=B,y(k,v.prototype),k.isPureReactComponent=!0;var j=Array.isArray;function I(){}var O={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function D(H,Q,X){var re=X.ref;return{$$typeof:t,type:H,key:Q,ref:re!==void 0?re:null,props:X}}function T(H,Q){return D(H.type,Q,H.props)}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function P(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(X){return Q[X]})}var z=/\/+/g;function U(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?P(""+H.key):Q.toString(36)}function ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(I,I):(H.status="pending",H.then(function(Q){H.status==="pending"&&(H.status="fulfilled",H.value=Q)},function(Q){H.status==="pending"&&(H.status="rejected",H.reason=Q)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function q(H,Q,X,re,le){var Ae=typeof H;(Ae==="undefined"||Ae==="boolean")&&(H=null);var xe=!1;if(H===null)xe=!0;else switch(Ae){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(H.$$typeof){case t:case e:xe=!0;break;case d:return xe=H._init,q(xe(H._payload),Q,X,re,le)}}if(xe)return le=le(H),xe=re===""?"."+U(H,0):re,j(le)?(X="",xe!=null&&(X=xe.replace(z,"$&/")+"/"),q(le,Q,X,"",function(ve){return ve})):le!=null&&(N(le)&&(le=T(le,X+(le.key==null||H&&H.key===le.key?"":(""+le.key).replace(z,"$&/")+"/")+xe)),Q.push(le)),1;xe=0;var Be=re===""?".":re+":";if(j(H))for(var me=0;me<H.length;me++)re=H[me],Ae=Be+U(re,me),xe+=q(re,Q,X,Ae,le);else if(me=m(H),typeof me=="function")for(H=me.call(H),me=0;!(re=H.next()).done;)re=re.value,Ae=Be+U(re,me++),xe+=q(re,Q,X,Ae,le);else if(Ae==="object"){if(typeof H.then=="function")return q(ee(H),Q,X,re,le);throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function Z(H,Q,X){if(H==null)return H;var re=[],le=0;return q(H,re,"","",function(Ae){return Q.call(X,Ae,le++)}),re}function G(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(X){(H._status===0||H._status===-1)&&(H._status=1,H._result=X)},function(X){(H._status===0||H._status===-1)&&(H._status=2,H._result=X)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var ne=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},K={map:Z,forEach:function(H,Q,X){Z(H,function(){Q.apply(this,arguments)},X)},count:function(H){var Q=0;return Z(H,function(){Q++}),Q},toArray:function(H){return Z(H,function(Q){return Q})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ar.Activity=f,ar.Children=K,ar.Component=v,ar.Fragment=n,ar.Profiler=s,ar.PureComponent=B,ar.StrictMode=r,ar.Suspense=c,ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ar.__COMPILER_RUNTIME={__proto__:null,c:function(H){return O.H.useMemoCache(H)}},ar.cache=function(H){return function(){return H.apply(null,arguments)}},ar.cacheSignal=function(){return null},ar.cloneElement=function(H,Q,X){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var re=y({},H.props),le=H.key;if(Q!=null)for(Ae in Q.key!==void 0&&(le=""+Q.key),Q)!F.call(Q,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Q.ref===void 0||(re[Ae]=Q[Ae]);var Ae=arguments.length-2;if(Ae===1)re.children=X;else if(1<Ae){for(var xe=Array(Ae),Be=0;Be<Ae;Be++)xe[Be]=arguments[Be+2];re.children=xe}return D(H.type,le,re)},ar.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},ar.createElement=function(H,Q,X){var re,le={},Ae=null;if(Q!=null)for(re in Q.key!==void 0&&(Ae=""+Q.key),Q)F.call(Q,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(le[re]=Q[re]);var xe=arguments.length-2;if(xe===1)le.children=X;else if(1<xe){for(var Be=Array(xe),me=0;me<xe;me++)Be[me]=arguments[me+2];le.children=Be}if(H&&H.defaultProps)for(re in xe=H.defaultProps,xe)le[re]===void 0&&(le[re]=xe[re]);return D(H,Ae,le)},ar.createRef=function(){return{current:null}},ar.forwardRef=function(H){return{$$typeof:l,render:H}},ar.isValidElement=N,ar.lazy=function(H){return{$$typeof:d,_payload:{_status:-1,_result:H},_init:G}},ar.memo=function(H,Q){return{$$typeof:u,type:H,compare:Q===void 0?null:Q}},ar.startTransition=function(H){var Q=O.T,X={};O.T=X;try{var re=H(),le=O.S;le!==null&&le(X,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(I,ne)}catch(Ae){ne(Ae)}finally{Q!==null&&X.types!==null&&(Q.types=X.types),O.T=Q}},ar.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ar.use=function(H){return O.H.use(H)},ar.useActionState=function(H,Q,X){return O.H.useActionState(H,Q,X)},ar.useCallback=function(H,Q){return O.H.useCallback(H,Q)},ar.useContext=function(H){return O.H.useContext(H)},ar.useDebugValue=function(){},ar.useDeferredValue=function(H,Q){return O.H.useDeferredValue(H,Q)},ar.useEffect=function(H,Q){return O.H.useEffect(H,Q)},ar.useEffectEvent=function(H){return O.H.useEffectEvent(H)},ar.useId=function(){return O.H.useId()},ar.useImperativeHandle=function(H,Q,X){return O.H.useImperativeHandle(H,Q,X)},ar.useInsertionEffect=function(H,Q){return O.H.useInsertionEffect(H,Q)},ar.useLayoutEffect=function(H,Q){return O.H.useLayoutEffect(H,Q)},ar.useMemo=function(H,Q){return O.H.useMemo(H,Q)},ar.useOptimistic=function(H,Q){return O.H.useOptimistic(H,Q)},ar.useReducer=function(H,Q,X){return O.H.useReducer(H,Q,X)},ar.useRef=function(H){return O.H.useRef(H)},ar.useState=function(H){return O.H.useState(H)},ar.useSyncExternalStore=function(H,Q,X){return O.H.useSyncExternalStore(H,Q,X)},ar.useTransition=function(){return O.H.useTransition()},ar.version="19.2.4",ar}var s7;function X1(){return s7||(s7=1,FT.exports=Fpe()),FT.exports}var C=X1();const xA=oc(C),Dpe=FJ({__proto__:null,default:xA},[C]);var DT={exports:{}},mv={},LT={exports:{}},$T={};var i7;function Lpe(){return i7||(i7=1,(function(t){function e(q,Z){var G=q.length;q.push(Z);e:for(;0<G;){var ne=G-1>>>1,K=q[ne];if(0<s(K,Z))q[ne]=Z,q[G]=K,G=ne;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],G=q.pop();if(G!==Z){q[0]=G;e:for(var ne=0,K=q.length,H=K>>>1;ne<H;){var Q=2*(ne+1)-1,X=q[Q],re=Q+1,le=q[re];if(0>s(X,G))re<K&&0>s(le,X)?(q[ne]=le,q[re]=G,ne=re):(q[ne]=X,q[Q]=G,ne=Q);else if(re<K&&0>s(le,G))q[ne]=le,q[re]=G,ne=re;else break e}}return Z}function s(q,Z){var G=q.sortIndex-Z.sortIndex;return G!==0?G:q.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,A=3,m=!1,g=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function k(q){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=q)r(u),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(u)}}function j(q){if(y=!1,k(q),!g)if(n(c)!==null)g=!0,I||(I=!0,P());else{var Z=n(u);Z!==null&&ee(j,Z.startTime-q)}}var I=!1,O=-1,F=5,D=-1;function T(){return x?!0:!(t.unstable_now()-D<F)}function N(){if(x=!1,I){var q=t.unstable_now();D=q;var Z=!0;try{e:{g=!1,y&&(y=!1,w(O),O=-1),m=!0;var G=A;try{t:{for(k(q),f=n(c);f!==null&&!(f.expirationTime>q&&T());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,A=f.priorityLevel;var K=ne(f.expirationTime<=q);if(q=t.unstable_now(),typeof K=="function"){f.callback=K,k(q),Z=!0;break t}f===n(c)&&r(c),k(q)}else r(c);f=n(c)}if(f!==null)Z=!0;else{var H=n(u);H!==null&&ee(j,H.startTime-q),Z=!1}}break e}finally{f=null,A=G,m=!1}Z=void 0}}finally{Z?P():I=!1}}}var P;if(typeof B=="function")P=function(){B(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,U=z.port2;z.port1.onmessage=N,P=function(){U.postMessage(null)}}else P=function(){v(N,0)};function ee(q,Z){O=v(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(q){switch(A){case 1:case 2:case 3:var Z=3;break;default:Z=A}var G=A;A=Z;try{return q()}finally{A=G}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=A;A=q;try{return Z()}finally{A=G}},t.unstable_scheduleCallback=function(q,Z,G){var ne=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,q={id:d++,callback:Z,priorityLevel:q,startTime:G,expirationTime:K,sortIndex:-1},G>ne?(q.sortIndex=G,e(u,q),n(c)===null&&q===n(u)&&(y?(w(O),O=-1):y=!0,ee(j,G-ne))):(q.sortIndex=K,e(c,q),g||m||(g=!0,I||(I=!0,P()))),q},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(q){var Z=A;return function(){var G=A;A=Z;try{return q.apply(this,arguments)}finally{A=G}}}})($T)),$T}var a7;function $pe(){return a7||(a7=1,LT.exports=Lpe()),LT.exports}var PT={exports:{}},gl={};var o7;function Ppe(){if(o7)return gl;o7=1;var t=X1();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return gl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gl.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return i(c,u,null,d)},gl.flushSync=function(c){var u=a.T,d=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=u,r.p=d,r.d.f()}},gl.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},gl.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},gl.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),A=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:A,fetchPriority:m}):d==="script"&&r.d.X(c,{crossOrigin:f,integrity:A,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},gl.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},gl.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);r.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},gl.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},gl.requestFormReset=function(c){r.d.r(c)},gl.unstable_batchedUpdates=function(c,u){return c(u)},gl.useFormState=function(c,u,d){return a.H.useFormState(c,u,d)},gl.useFormStatus=function(){return a.H.useHostTransitionStatus()},gl.version="19.2.4",gl}var l7;function DJ(){if(l7)return PT.exports;l7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),PT.exports=Ppe(),PT.exports}var c7;function zpe(){if(c7)return mv;c7=1;var t=$pe(),e=X1(),n=DJ();function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function i(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function a(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function l(h){if(h.tag===31){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function c(h){if(i(h)!==h)throw Error(r(188))}function u(h){var p=h.alternate;if(!p){if(p=i(h),p===null)throw Error(r(188));return p!==h?null:h}for(var b=h,S=p;;){var _=b.return;if(_===null)break;var $=_.alternate;if($===null){if(S=_.return,S!==null){b=S;continue}break}if(_.child===$.child){for($=_.child;$;){if($===b)return c(_),h;if($===S)return c(_),p;$=$.sibling}throw Error(r(188))}if(b.return!==S.return)b=_,S=$;else{for(var te=!1,he=_.child;he;){if(he===b){te=!0,b=_,S=$;break}if(he===S){te=!0,S=_,b=$;break}he=he.sibling}if(!te){for(he=$.child;he;){if(he===b){te=!0,b=$,S=_;break}if(he===S){te=!0,S=$,b=_;break}he=he.sibling}if(!te)throw Error(r(189))}}if(b.alternate!==S)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:p}function d(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=d(h),p!==null)return p;h=h.sibling}return null}var f=Object.assign,A=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(h){return h===null||typeof h!="object"?null:(h=N&&h[N]||h["@@iterator"],typeof h=="function"?h:null)}var z=Symbol.for("react.client.reference");function U(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===z?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case y:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case D:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case g:return"Portal";case B:return h.displayName||"Context";case w:return(h._context.displayName||"Context")+".Consumer";case k:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case O:return p=h.displayName||null,p!==null?p:U(h.type)||"Memo";case F:p=h._payload,h=h._init;try{return U(h(p))}catch{}}return null}var ee=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ne=[],K=-1;function H(h){return{current:h}}function Q(h){0>K||(h.current=ne[K],ne[K]=null,K--)}function X(h,p){K++,ne[K]=h.current,h.current=p}var re=H(null),le=H(null),Ae=H(null),xe=H(null);function Be(h,p){switch(X(Ae,p),X(le,h),X(re,null),p.nodeType){case 9:case 11:h=(h=p.documentElement)&&(h=h.namespaceURI)?C9(h):0;break;default:if(h=p.tagName,p=p.namespaceURI)p=C9(p),h=k9(p,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}Q(re),X(re,h)}function me(){Q(re),Q(le),Q(Ae)}function ve(h){h.memoizedState!==null&&X(xe,h);var p=re.current,b=k9(p,h.type);p!==b&&(X(le,h),X(re,b))}function je(h){le.current===h&&(Q(re),Q(le)),xe.current===h&&(Q(xe),dv._currentValue=G)}var ye,ze;function at(h){if(ye===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ye=p&&p[1]||"",ze=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+h+ze}var ie=!1;function Le(h,p){if(!h||ie)return"";ie=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(p){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(ct){var rt=ct}Reflect.construct(h,[],jt)}else{try{jt.call()}catch(ct){rt=ct}h.call(jt.prototype)}}else{try{throw Error()}catch(ct){rt=ct}(jt=h())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(ct){if(ct&&rt&&typeof ct.stack=="string")return[ct.stack,rt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=S.DetermineComponentFrameRoot(),te=$[0],he=$[1];if(te&&he){var Te=te.split(`
`),tt=he.split(`
`);for(_=S=0;S<Te.length&&!Te[S].includes("DetermineComponentFrameRoot");)S++;for(;_<tt.length&&!tt[_].includes("DetermineComponentFrameRoot");)_++;if(S===Te.length||_===tt.length)for(S=Te.length-1,_=tt.length-1;1<=S&&0<=_&&Te[S]!==tt[_];)_--;for(;1<=S&&0<=_;S--,_--)if(Te[S]!==tt[_]){if(S!==1||_!==1)do if(S--,_--,0>_||Te[S]!==tt[_]){var xt=`
`+Te[S].replace(" at new "," at ");return h.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",h.displayName)),xt}while(1<=S&&0<=_);break}}}finally{ie=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?at(b):""}function nt(h,p){switch(h.tag){case 26:case 27:case 5:return at(h.type);case 16:return at("Lazy");case 13:return h.child!==p&&p!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Le(h.type,!1);case 11:return Le(h.type.render,!1);case 1:return Le(h.type,!0);case 31:return at("Activity");default:return""}}function Et(h){try{var p="",b=null;do p+=nt(h,b),b=h,h=h.return;while(h);return p}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var _e=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,ot=t.unstable_cancelCallback,$t=t.unstable_shouldYield,kt=t.unstable_requestPaint,Ht=t.unstable_now,Sn=t.unstable_getCurrentPriorityLevel,Ut=t.unstable_ImmediatePriority,en=t.unstable_UserBlockingPriority,fn=t.unstable_NormalPriority,Qt=t.unstable_LowPriority,rn=t.unstable_IdlePriority,Yt=t.log,sn=t.unstable_setDisableYieldValue,Fn=null,Ft=null;function xn(h){if(typeof Yt=="function"&&sn(h),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Fn,h)}catch{}}var ke=Math.clz32?Math.clz32:Ct,$e=Math.log,yt=Math.LN2;function Ct(h){return h>>>=0,h===0?32:31-($e(h)/yt|0)|0}var _t=256,Lt=262144,zt=4194304;function Jt(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function dt(h,p,b){var S=h.pendingLanes;if(S===0)return 0;var _=0,$=h.suspendedLanes,te=h.pingedLanes;h=h.warmLanes;var he=S&134217727;return he!==0?(S=he&~$,S!==0?_=Jt(S):(te&=he,te!==0?_=Jt(te):b||(b=he&~h,b!==0&&(_=Jt(b))))):(he=S&~$,he!==0?_=Jt(he):te!==0?_=Jt(te):b||(b=S&~h,b!==0&&(_=Jt(b)))),_===0?0:p!==0&&p!==_&&(p&$)===0&&($=_&-_,b=p&-p,$>=b||$===32&&(b&4194048)!==0)?p:_}function pr(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function Kr(h,p){switch(h){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var h=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),h}function Ls(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function cn(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Ji(h,p,b,S,_,$){var te=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var he=h.entanglements,Te=h.expirationTimes,tt=h.hiddenUpdates;for(b=te&~b;0<b;){var xt=31-ke(b),jt=1<<xt;he[xt]=0,Te[xt]=-1;var rt=tt[xt];if(rt!==null)for(tt[xt]=null,xt=0;xt<rt.length;xt++){var ct=rt[xt];ct!==null&&(ct.lane&=-536870913)}b&=~jt}S!==0&&Bs(h,S,0),$!==0&&_===0&&h.tag!==0&&(h.suspendedLanes|=$&~(te&~p))}function Bs(h,p,b){h.pendingLanes|=p,h.suspendedLanes&=~p;var S=31-ke(p);h.entangledLanes|=p,h.entanglements[S]=h.entanglements[S]|1073741824|b&261930}function $s(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var S=31-ke(b),_=1<<S;_&p|h[S]&p&&(h[S]|=p),b&=~_}}function wr(h,p){var b=p&-p;return b=(b&42)!==0?1:ts(b),(b&(h.suspendedLanes|p))!==0?0:b}function ts(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Er(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Bt(){var h=Z.p;return h!==0?h:(h=window.event,h===void 0?32:G9(h.type))}function Bi(h,p){var b=Z.p;try{return Z.p=h,p()}finally{Z.p=b}}var ys=Math.random().toString(36).slice(2),Jn="__reactFiber$"+ys,ns="__reactProps$"+ys,ji="__reactContainer$"+ys,ft="__reactEvents$"+ys,Cn="__reactListeners$"+ys,Wn="__reactHandles$"+ys,Xn="__reactResources$"+ys,sr="__reactMarker$"+ys;function da(h){delete h[Jn],delete h[ns],delete h[ft],delete h[Cn],delete h[Wn]}function Hr(h){var p=h[Jn];if(p)return p;for(var b=h.parentNode;b;){if(p=b[ji]||b[Jn]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(h=_9(h);h!==null;){if(b=h[Jn])return b;h=_9(h)}return p}h=b,b=h.parentNode}return null}function cs(h){if(h=h[Jn]||h[ji]){var p=h.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return h}return null}function zr(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h.stateNode;throw Error(r(33))}function Zi(h){var p=h[Xn];return p||(p=h[Xn]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ir(h){h[sr]=!0}var si=new Set,rs={};function st(h,p){gt(h,p),gt(h+"Capture",p)}function gt(h,p){for(rs[h]=p,h=0;h<p.length;h++)si.add(p[h])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gt={},Tn={};function mr(h){return _e.call(Tn,h)?!0:_e.call(Gt,h)?!1:Pt.test(h)?Tn[h]=!0:(Gt[h]=!0,!1)}function ci(h,p,b){if(mr(p))if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(p);return;case"boolean":var S=p.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){h.removeAttribute(p);return}}h.setAttribute(p,""+b)}}function Co(h,p,b){if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(p);return}h.setAttribute(p,""+b)}}function Ei(h,p,b,S){if(S===null)h.removeAttribute(b);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(p,b,""+S)}}function jn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ko(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function ui(h,p,b){var S=Object.getOwnPropertyDescriptor(h.constructor.prototype,p);if(!h.hasOwnProperty(p)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var _=S.get,$=S.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return _.call(this)},set:function(te){b=""+te,$.call(this,te)}}),Object.defineProperty(h,p,{enumerable:S.enumerable}),{getValue:function(){return b},setValue:function(te){b=""+te},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function ea(h){if(!h._valueTracker){var p=ko(h)?"checked":"value";h._valueTracker=ui(h,p,""+h[p])}}function ju(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var b=p.getValue(),S="";return h&&(S=ko(h)?h.checked?"true":"false":h.value),h=S,h!==b?(p.setValue(h),!0):!1}function ja(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var ta=/[\n"\\]/g;function Ii(h){return h.replace(ta,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function cc(h,p,b,S,_,$,te,he){h.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?h.type=te:h.removeAttribute("type"),p!=null?te==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+jn(p)):h.value!==""+jn(p)&&(h.value=""+jn(p)):te!=="submit"&&te!=="reset"||h.removeAttribute("value"),p!=null?Fh(h,te,jn(p)):b!=null?Fh(h,te,jn(b)):S!=null&&h.removeAttribute("value"),_==null&&$!=null&&(h.defaultChecked=!!$),_!=null&&(h.checked=_&&typeof _!="function"&&typeof _!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?h.name=""+jn(he):h.removeAttribute("name")}function Oh(h,p,b,S,_,$,te,he){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(h.type=$),p!=null||b!=null){if(!($!=="submit"&&$!=="reset"||p!=null)){ea(h);return}b=b!=null?""+jn(b):"",p=p!=null?""+jn(p):b,he||p===h.value||(h.value=p),h.defaultValue=p}S=S??_,S=typeof S!="function"&&typeof S!="symbol"&&!!S,h.checked=he?h.checked:!!S,h.defaultChecked=!!S,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(h.name=te),ea(h)}function Fh(h,p,b){p==="number"&&ja(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Ea(h,p,b,S){if(h=h.options,p){p={};for(var _=0;_<b.length;_++)p["$"+b[_]]=!0;for(b=0;b<h.length;b++)_=p.hasOwnProperty("$"+h[b].value),h[b].selected!==_&&(h[b].selected=_),_&&S&&(h[b].defaultSelected=!0)}else{for(b=""+jn(b),p=null,_=0;_<h.length;_++){if(h[_].value===b){h[_].selected=!0,S&&(h[_].defaultSelected=!0);return}p!==null||h[_].disabled||(p=h[_])}p!==null&&(p.selected=!0)}}function If(h,p,b){if(p!=null&&(p=""+jn(p),p!==h.value&&(h.value=p),b==null)){h.defaultValue!==p&&(h.defaultValue=p);return}h.defaultValue=b!=null?""+jn(b):""}function bd(h,p,b,S){if(p==null){if(S!=null){if(b!=null)throw Error(r(92));if(ee(S)){if(1<S.length)throw Error(r(93));S=S[0]}b=S}b==null&&(b=""),p=b}b=jn(p),h.defaultValue=b,S=h.textContent,S===b&&S!==""&&S!==null&&(h.value=S),ea(h)}function el(h,p){if(p){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=p;return}}h.textContent=p}var vd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wd(h,p,b){var S=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?S?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="":S?h.setProperty(p,b):typeof b!="number"||b===0||vd.has(p)?p==="float"?h.cssFloat=b:h[p]=(""+b).trim():h[p]=b+"px"}function Sd(h,p,b){if(p!=null&&typeof p!="object")throw Error(r(62));if(h=h.style,b!=null){for(var S in b)!b.hasOwnProperty(S)||p!=null&&p.hasOwnProperty(S)||(S.indexOf("--")===0?h.setProperty(S,""):S==="float"?h.cssFloat="":h[S]="");for(var _ in p)S=p[_],p.hasOwnProperty(_)&&b[_]!==S&&wd(h,_,S)}else for(var $ in p)p.hasOwnProperty($)&&wd(h,$,p[$])}function Ll(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function di(h){return hl.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function no(){}var Vc=null;function mn(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var uc=null,Ln=null;function Dh(h){var p=cs(h);if(p&&(h=p.stateNode)){var b=h[ns]||null;e:switch(h=p.stateNode,p.type){case"input":if(cc(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Ii(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var S=b[p];if(S!==h&&S.form===h.form){var _=S[ns]||null;if(!_)throw Error(r(90));cc(S,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(p=0;p<b.length;p++)S=b[p],S.form===h.form&&ju(S)}break e;case"textarea":If(h,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Ea(h,!!b.multiple,p,!1)}}}var Nf=!1;function Eu(h,p,b){if(Nf)return h(p,b);Nf=!0;try{var S=h(p);return S}finally{if(Nf=!1,(uc!==null||Ln!==null)&&(cC(),uc&&(p=uc,h=Ln,Ln=uc=null,Dh(p),h)))for(p=0;p<h.length;p++)Dh(h[p])}}function Ni(h,p){var b=h.stateNode;if(b===null)return null;var S=b[ns]||null;if(S===null)return null;b=S[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(h=h.type,S=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!S;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kd=!1;if(fi)try{var L={};Object.defineProperty(L,"passive",{get:function(){kd=!0}}),window.addEventListener("test",L,L),window.removeEventListener("test",L,L)}catch{kd=!1}var V=null,se=null,pe=null;function Re(){if(pe)return pe;var h,p=se,b=p.length,S,_="value"in V?V.value:V.textContent,$=_.length;for(h=0;h<b&&p[h]===_[h];h++);var te=b-h;for(S=1;S<=te&&p[b-S]===_[$-S];S++);return pe=_.slice(h,1<S?1-S:void 0)}function Ge(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function At(){return!0}function kn(){return!1}function _n(h){function p(b,S,_,$,te){this._reactName=b,this._targetInst=_,this.type=S,this.nativeEvent=$,this.target=te,this.currentTarget=null;for(var he in h)h.hasOwnProperty(he)&&(b=h[he],this[he]=b?b($):$[he]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?At:kn,this.isPropagationStopped=kn,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=At)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=At)},persist:function(){},isPersistent:At}),p}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nr=_n(Qn),ii=f({},Qn,{view:0,detail:0}),Bd=_n(ii),jd,dc,qc,Iu=f({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vn,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==qc&&(qc&&h.type==="mousemove"?(jd=h.screenX-qc.screenX,dc=h.screenY-qc.screenY):dc=jd=0,qc=h),jd)},movementY:function(h){return"movementY"in h?h.movementY:dc}}),Lh=_n(Iu),Gc=f({},Iu,{dataTransfer:0}),Kc=_n(Gc),lp=f({},ii,{relatedTarget:0}),Xc=_n(lp),cp=f({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),M=_n(cp),ae=f({},Qn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Se=_n(ae),Oe=f({},Qn,{data:0}),Qe=_n(Oe),bt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=dn[h])?!!p[h]:!1}function Vn(){return Bn}var er=f({},ii,{key:function(h){if(h.key){var p=bt[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=Ge(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Tt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vn,charCode:function(h){return h.type==="keypress"?Ge(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ge(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Tr=_n(er),Ks=f({},Iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hi=_n(Ks),xs=f({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vn}),na=_n(xs),Ti=f({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fa=_n(Ti),Yc=f({},Iu,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),$l=_n(Yc),Jc=f({},Qn,{newState:0,oldState:0}),Nu=_n(Jc),Ed=[9,13,27,32],Pl=fi&&"CompositionEvent"in window,Al=null;fi&&"documentMode"in document&&(Al=document.documentMode);var qe=fi&&"TextEvent"in window&&!Al,St=fi&&(!Pl||Al&&8<Al&&11>=Al),Vt=" ",En=!1;function Mn(h,p){switch(h){case"keyup":return Ed.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sr(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var _i=!1;function bs(h,p){switch(h){case"compositionend":return Sr(p);case"keypress":return p.which!==32?null:(En=!0,Vt);case"textInput":return h=p.data,h===Vt&&En?null:h;default:return null}}function Ai(h,p){if(_i)return h==="compositionend"||!Pl&&Mn(h,p)?(h=Re(),pe=se=V=null,_i=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return St&&p.locale!=="ko"?null:p.data;default:return null}}var za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!za[h.type]:p==="textarea"}function ra(h,p,b,S){uc?Ln?Ln.push(S):Ln=[S]:uc=S,p=mC(p,"onChange"),0<p.length&&(b=new Nr("onChange","change",null,b,S),h.push({event:b,listeners:p}))}var zl=null,Nd=null;function qm(h){y9(h,0)}function Zc(h){var p=zr(h);if(ju(p))return h}function Tf(h,p){if(h==="change")return p}var pl=!1;if(fi){var tl;if(fi){var Tu="oninput"in document;if(!Tu){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),Tu=typeof _u.oninput=="function"}tl=Tu}else tl=!1;pl=tl&&(!document.documentMode||9<document.documentMode)}function Td(){zl&&(zl.detachEvent("onpropertychange",up),Nd=zl=null)}function up(h){if(h.propertyName==="value"&&Zc(Nd)){var p=[];ra(p,Nd,h,mn(h)),Eu(qm,p)}}function dp(h,p,b){h==="focusin"?(Td(),zl=p,Nd=b,zl.attachEvent("onpropertychange",up)):h==="focusout"&&Td()}function sa(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Zc(Nd)}function Y0(h,p){if(h==="click")return Zc(p)}function Ru(h,p){if(h==="input"||h==="change")return Zc(p)}function Ou(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var ro=typeof Object.is=="function"?Object.is:Ou;function _d(h,p){if(ro(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),S=Object.keys(p);if(b.length!==S.length)return!1;for(S=0;S<b.length;S++){var _=b[S];if(!_e.call(p,_)||!ro(h[_],p[_]))return!1}return!0}function fp(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function hp(h,p){var b=fp(h);h=0;for(var S;b;){if(b.nodeType===3){if(S=h+b.textContent.length,h<=p&&S>=p)return{node:b,offset:p-h};h=S}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=fp(b)}}function Rd(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?Rd(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function Od(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var p=ja(h.document);p instanceof h.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)h=p.contentWindow;else break;p=ja(h.document)}return p}function Fu(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}var $h=fi&&"documentMode"in document&&11>=document.documentMode,Ul=null,Fd=null,Bo=null,fc=!1;function ss(h,p,b){var S=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;fc||Ul==null||Ul!==ja(S)||(S=Ul,"selectionStart"in S&&Fu(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Bo&&_d(Bo,S)||(Bo=S,S=mC(Fd,"onSelect"),0<S.length&&(p=new Nr("onSelect","select",null,p,b),h.push({event:p,listeners:S}),p.target=Ul)))}function Wr(h,p){var b={};return b[h.toLowerCase()]=p.toLowerCase(),b["Webkit"+h]="webkit"+p,b["Moz"+h]="moz"+p,b}var Ps={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},ia={},Du={};fi&&(Du=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function eu(h){if(ia[h])return ia[h];if(!Ps[h])return h;var p=Ps[h],b;for(b in p)if(p.hasOwnProperty(b)&&b in Du)return ia[h]=p[b];return h}var Ph=eu("animationend"),Gm=eu("animationiteration"),Ob=eu("animationstart"),PS=eu("transitionrun"),zS=eu("transitionstart"),US=eu("transitioncancel"),Fb=eu("transitionend"),Db=new Map,zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zh.push("scrollEnd");function hc(h,p){Db.set(h,p),st(p,[h])}var Km=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},Ml=[],Uh=0,J0=0;function Xm(){for(var h=Uh,p=J0=Uh=0;p<h;){var b=Ml[p];Ml[p++]=null;var S=Ml[p];Ml[p++]=null;var _=Ml[p];Ml[p++]=null;var $=Ml[p];if(Ml[p++]=null,S!==null&&_!==null){var te=S.pending;te===null?_.next=_:(_.next=te.next,te.next=_),S.pending=_}$!==0&&Jm(b,_,$)}}function Ym(h,p,b,S){Ml[Uh++]=h,Ml[Uh++]=p,Ml[Uh++]=b,Ml[Uh++]=S,J0|=S,h.lanes|=S,h=h.alternate,h!==null&&(h.lanes|=S)}function Z0(h,p,b,S){return Ym(h,p,b,S),jo(h)}function Dd(h,p){return Ym(h,null,null,p),jo(h)}function Jm(h,p,b){h.lanes|=b;var S=h.alternate;S!==null&&(S.lanes|=b);for(var _=!1,$=h.return;$!==null;)$.childLanes|=b,S=$.alternate,S!==null&&(S.childLanes|=b),$.tag===22&&(h=$.stateNode,h===null||h._visibility&1||(_=!0)),h=$,$=$.return;return h.tag===3?($=h.stateNode,_&&p!==null&&(_=31-ke(b),h=$.hiddenUpdates,S=h[_],S===null?h[_]=[p]:S.push(p),p.lane=b|536870912),$):null}function jo(h){if(50<sv)throw sv=0,sT=null,Error(r(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}var so={};function ey(h,p,b,S){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(h,p,b,S){return new ey(h,p,b,S)}function ty(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ac(h,p){var b=h.alternate;return b===null?(b=Eo(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Zm(h,p){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,p=b.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function Ap(h,p,b,S,_,$){var te=0;if(S=h,typeof h=="function")ty(h)&&(te=1);else if(typeof h=="string")te=vpe(h,b,re.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case D:return h=Eo(31,b,p,_),h.elementType=D,h.lanes=$,h;case y:return _f(b.children,_,$,p);case x:te=8,_|=24;break;case v:return h=Eo(12,b,p,_|2),h.elementType=v,h.lanes=$,h;case j:return h=Eo(13,b,p,_),h.elementType=j,h.lanes=$,h;case I:return h=Eo(19,b,p,_),h.elementType=I,h.lanes=$,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:te=10;break e;case w:te=9;break e;case k:te=11;break e;case O:te=14;break e;case F:te=16,S=null;break e}te=29,b=Error(r(130,h===null?"null":typeof h,"")),S=null}return p=Eo(te,b,p,_),p.elementType=h,p.type=S,p.lanes=$,p}function _f(h,p,b,S){return h=Eo(7,h,S,p),h.lanes=b,h}function eg(h,p,b){return h=Eo(6,h,null,p),h.lanes=b,h}function ny(h){var p=Eo(18,null,null,0);return p.stateNode=h,p}function pp(h,p,b){return p=Eo(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}var ry=new WeakMap;function pc(h,p){if(typeof h=="object"&&h!==null){var b=ry.get(h);return b!==void 0?b:(p={value:h,source:p,stack:Et(p)},ry.set(h,p),p)}return{value:h,source:p,stack:Et(p)}}var mp=[],Mh=0,sy=null,tg=0,mc=[],gc=0,Rf=null,yc=1,xc="";function Ql(h,p){mp[Mh++]=tg,mp[Mh++]=sy,sy=h,tg=p}function MS(h,p,b){mc[gc++]=yc,mc[gc++]=xc,mc[gc++]=Rf,Rf=h;var S=yc;h=xc;var _=32-ke(S)-1;S&=~(1<<_),b+=1;var $=32-ke(p)+_;if(30<$){var te=_-_%5;$=(S&(1<<te)-1).toString(32),S>>=te,_-=te,yc=1<<32-ke(p)+_|b<<_|S,xc=$+h}else yc=1<<$|b<<_|S,xc=h}function Lb(h){h.return!==null&&(Ql(h,1),MS(h,1,0))}function iy(h){for(;h===sy;)sy=mp[--Mh],mp[Mh]=null,tg=mp[--Mh],mp[Mh]=null;for(;h===Rf;)Rf=mc[--gc],mc[gc]=null,xc=mc[--gc],mc[gc]=null,yc=mc[--gc],mc[gc]=null}function QS(h,p){mc[gc++]=yc,mc[gc++]=xc,mc[gc++]=Rf,yc=p.id,xc=p.overflow,Rf=h}var io=null,Xs=null,_r=!1,nl=null,Ri=!1,tu=Error(r(519));function Of(h){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gp(pc(p,h)),tu}function $b(h){var p=h.stateNode,b=h.type,S=h.memoizedProps;switch(p[Jn]=h,p[ns]=S,b){case"dialog":Or("cancel",p),Or("close",p);break;case"iframe":case"object":case"embed":Or("load",p);break;case"video":case"audio":for(b=0;b<av.length;b++)Or(av[b],p);break;case"source":Or("error",p);break;case"img":case"image":case"link":Or("error",p),Or("load",p);break;case"details":Or("toggle",p);break;case"input":Or("invalid",p),Oh(p,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Or("invalid",p);break;case"textarea":Or("invalid",p),bd(p,S.value,S.defaultValue,S.children)}b=S.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||S.suppressHydrationWarning===!0||w9(p.textContent,b)?(S.popover!=null&&(Or("beforetoggle",p),Or("toggle",p)),S.onScroll!=null&&Or("scroll",p),S.onScrollEnd!=null&&Or("scrollend",p),S.onClick!=null&&(p.onclick=no),p=!0):p=!1,p||Of(h,!0)}function Ld(h){for(io=h.return;io;)switch(io.tag){case 5:case 31:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:io=io.return}}function ao(h){if(h!==io)return!1;if(!_r)return Ld(h),_r=!0,!1;var p=h.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||xT(h.type,h.memoizedProps)),b=!b),b&&Xs&&Of(h),Ld(h),p===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));Xs=T9(h)}else if(p===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));Xs=T9(h)}else p===27?(p=Xs,Tp(h.type)?(h=CT,CT=null,Xs=h):Xs=p):Xs=io?zu(h.stateNode.nextSibling):null;return!0}function Qh(){Xs=io=null,_r=!1}function Pb(){var h=nl;return h!==null&&(kc===null?kc=h:kc.push.apply(kc,h),nl=null),h}function gp(h){nl===null?nl=[h]:nl.push(h)}var ay=H(null),Ff=null,Lu=null;function Df(h,p,b){X(ay,p._currentValue),p._currentValue=b}function bc(h){h._currentValue=ay.current,Q(ay)}function yp(h,p,b){for(;h!==null;){var S=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,S!==null&&(S.childLanes|=p)):S!==null&&(S.childLanes&p)!==p&&(S.childLanes|=p),h===b)break;h=h.return}}function Hh(h,p,b,S){var _=h.child;for(_!==null&&(_.return=h);_!==null;){var $=_.dependencies;if($!==null){var te=_.child;$=$.firstContext;e:for(;$!==null;){var he=$;$=_;for(var Te=0;Te<p.length;Te++)if(he.context===p[Te]){$.lanes|=b,he=$.alternate,he!==null&&(he.lanes|=b),yp($.return,b,h),S||(te=null);break e}$=he.next}}else if(_.tag===18){if(te=_.return,te===null)throw Error(r(341));te.lanes|=b,$=te.alternate,$!==null&&($.lanes|=b),yp(te,b,h),te=null}else te=_.child;if(te!==null)te.return=_;else for(te=_;te!==null;){if(te===h){te=null;break}if(_=te.sibling,_!==null){_.return=te.return,te=_;break}te=te.return}_=te}}function Lf(h,p,b,S){h=null;for(var _=p,$=!1;_!==null;){if(!$){if((_.flags&524288)!==0)$=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var te=_.alternate;if(te===null)throw Error(r(387));if(te=te.memoizedProps,te!==null){var he=_.type;ro(_.pendingProps.value,te.value)||(h!==null?h.push(he):h=[he])}}else if(_===xe.current){if(te=_.alternate,te===null)throw Error(r(387));te.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(h!==null?h.push(dv):h=[dv])}_=_.return}h!==null&&Hh(p,h,b,S),p.flags|=262144}function oy(h){for(h=h.firstContext;h!==null;){if(!ro(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function $f(h){Ff=h,Lu=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function oo(h){return HS(Ff,h)}function ly(h,p){return Ff===null&&$f(h),HS(h,p)}function HS(h,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},Lu===null){if(h===null)throw Error(r(308));Lu=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else Lu=Lu.next=p;return b}var SN=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(b,S){h.push(S)}};this.abort=function(){p.aborted=!0,h.forEach(function(b){return b()})}},CN=t.unstable_scheduleCallback,kN=t.unstable_NormalPriority,aa={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xp(){return{controller:new SN,data:new Map,refCount:0}}function ng(h){h.refCount--,h.refCount===0&&CN(kN,function(){h.controller.abort()})}var rg=null,cy=0,E=0,R=null;function W(h,p){if(rg===null){var b=rg=[];cy=0,E=uT(),R={status:"pending",value:void 0,then:function(S){b.push(S)}}}return cy++,p.then(J,J),p}function J(){if(--cy===0&&rg!==null){R!==null&&(R.status="fulfilled");var h=rg;rg=null,E=0,R=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function oe(h,p){var b=[],S={status:"pending",value:null,reason:null,then:function(_){b.push(_)}};return h.then(function(){S.status="fulfilled",S.value=p;for(var _=0;_<b.length;_++)(0,b[_])(p)},function(_){for(S.status="rejected",S.reason=_,_=0;_<b.length;_++)(0,b[_])(void 0)}),S}var ue=q.S;q.S=function(h,p){VM=Ht(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&W(h,p),ue!==null&&ue(h,p)};var de=H(null);function ge(){var h=de.current;return h!==null?h:Js.pooledCache}function be(h,p){p===null?X(de,de.current):X(de,p.pool)}function Ce(){var h=ge();return h===null?null:{parent:aa._currentValue,pool:h}}var De=Error(r(460)),Ze=Error(r(474)),we=Error(r(542)),Me={then:function(){}};function Ke(h){return h=h.status,h==="fulfilled"||h==="rejected"}function mt(h,p,b){switch(b=h[b],b===void 0?h.push(p):b!==p&&(p.then(no,no),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Dt(h),h;default:if(typeof p.status=="string")p.then(no,no);else{if(h=Js,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=p,h.status="pending",h.then(function(S){if(p.status==="pending"){var _=p;_.status="fulfilled",_.value=S}},function(S){if(p.status==="pending"){var _=p;_.status="rejected",_.reason=S}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,Dt(h),h}throw pt=p,De}}function Je(h){try{var p=h._init;return p(h._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(pt=b,De):b}}var pt=null;function vt(){if(pt===null)throw Error(r(459));var h=pt;return pt=null,h}function Dt(h){if(h===De||h===we)throw Error(r(483))}var It=null,bn=0;function an(h){var p=bn;return bn+=1,It===null&&(It=[]),mt(It,h,p)}function tr(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function hn(h,p){throw p.$$typeof===A?Error(r(525)):(h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function Cr(h){function p(We,Ue){if(h){var et=We.deletions;et===null?(We.deletions=[Ue],We.flags|=16):et.push(Ue)}}function b(We,Ue){if(!h)return null;for(;Ue!==null;)p(We,Ue),Ue=Ue.sibling;return null}function S(We){for(var Ue=new Map;We!==null;)We.key!==null?Ue.set(We.key,We):Ue.set(We.index,We),We=We.sibling;return Ue}function _(We,Ue){return We=Ac(We,Ue),We.index=0,We.sibling=null,We}function $(We,Ue,et){return We.index=et,h?(et=We.alternate,et!==null?(et=et.index,et<Ue?(We.flags|=67108866,Ue):et):(We.flags|=67108866,Ue)):(We.flags|=1048576,Ue)}function te(We){return h&&We.alternate===null&&(We.flags|=67108866),We}function he(We,Ue,et,wt){return Ue===null||Ue.tag!==6?(Ue=eg(et,We.mode,wt),Ue.return=We,Ue):(Ue=_(Ue,et),Ue.return=We,Ue)}function Te(We,Ue,et,wt){var Un=et.type;return Un===y?xt(We,Ue,et.props.children,wt,et.key):Ue!==null&&(Ue.elementType===Un||typeof Un=="object"&&Un!==null&&Un.$$typeof===F&&Je(Un)===Ue.type)?(Ue=_(Ue,et.props),tr(Ue,et),Ue.return=We,Ue):(Ue=Ap(et.type,et.key,et.props,null,We.mode,wt),tr(Ue,et),Ue.return=We,Ue)}function tt(We,Ue,et,wt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==et.containerInfo||Ue.stateNode.implementation!==et.implementation?(Ue=pp(et,We.mode,wt),Ue.return=We,Ue):(Ue=_(Ue,et.children||[]),Ue.return=We,Ue)}function xt(We,Ue,et,wt,Un){return Ue===null||Ue.tag!==7?(Ue=_f(et,We.mode,wt,Un),Ue.return=We,Ue):(Ue=_(Ue,et),Ue.return=We,Ue)}function jt(We,Ue,et){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ue=eg(""+Ue,We.mode,et),Ue.return=We,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case m:return et=Ap(Ue.type,Ue.key,Ue.props,null,We.mode,et),tr(et,Ue),et.return=We,et;case g:return Ue=pp(Ue,We.mode,et),Ue.return=We,Ue;case F:return Ue=Je(Ue),jt(We,Ue,et)}if(ee(Ue)||P(Ue))return Ue=_f(Ue,We.mode,et,null),Ue.return=We,Ue;if(typeof Ue.then=="function")return jt(We,an(Ue),et);if(Ue.$$typeof===B)return jt(We,ly(We,Ue),et);hn(We,Ue)}return null}function rt(We,Ue,et,wt){var Un=Ue!==null?Ue.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Un!==null?null:he(We,Ue,""+et,wt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case m:return et.key===Un?Te(We,Ue,et,wt):null;case g:return et.key===Un?tt(We,Ue,et,wt):null;case F:return et=Je(et),rt(We,Ue,et,wt)}if(ee(et)||P(et))return Un!==null?null:xt(We,Ue,et,wt,null);if(typeof et.then=="function")return rt(We,Ue,an(et),wt);if(et.$$typeof===B)return rt(We,Ue,ly(We,et),wt);hn(We,et)}return null}function ct(We,Ue,et,wt,Un){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return We=We.get(et)||null,he(Ue,We,""+wt,Un);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case m:return We=We.get(wt.key===null?et:wt.key)||null,Te(Ue,We,wt,Un);case g:return We=We.get(wt.key===null?et:wt.key)||null,tt(Ue,We,wt,Un);case F:return wt=Je(wt),ct(We,Ue,et,wt,Un)}if(ee(wt)||P(wt))return We=We.get(et)||null,xt(Ue,We,wt,Un,null);if(typeof wt.then=="function")return ct(We,Ue,et,an(wt),Un);if(wt.$$typeof===B)return ct(We,Ue,et,ly(Ue,wt),Un);hn(Ue,wt)}return null}function gn(We,Ue,et,wt){for(var Un=null,us=null,In=Ue,dr=Ue=0,Mr=null;In!==null&&dr<et.length;dr++){In.index>dr?(Mr=In,In=null):Mr=In.sibling;var ds=rt(We,In,et[dr],wt);if(ds===null){In===null&&(In=Mr);break}h&&In&&ds.alternate===null&&p(We,In),Ue=$(ds,Ue,dr),us===null?Un=ds:us.sibling=ds,us=ds,In=Mr}if(dr===et.length)return b(We,In),_r&&Ql(We,dr),Un;if(In===null){for(;dr<et.length;dr++)In=jt(We,et[dr],wt),In!==null&&(Ue=$(In,Ue,dr),us===null?Un=In:us.sibling=In,us=In);return _r&&Ql(We,dr),Un}for(In=S(In);dr<et.length;dr++)Mr=ct(In,We,dr,et[dr],wt),Mr!==null&&(h&&Mr.alternate!==null&&In.delete(Mr.key===null?dr:Mr.key),Ue=$(Mr,Ue,dr),us===null?Un=Mr:us.sibling=Mr,us=Mr);return h&&In.forEach(function(Dp){return p(We,Dp)}),_r&&Ql(We,dr),Un}function Kn(We,Ue,et,wt){if(et==null)throw Error(r(151));for(var Un=null,us=null,In=Ue,dr=Ue=0,Mr=null,ds=et.next();In!==null&&!ds.done;dr++,ds=et.next()){In.index>dr?(Mr=In,In=null):Mr=In.sibling;var Dp=rt(We,In,ds.value,wt);if(Dp===null){In===null&&(In=Mr);break}h&&In&&Dp.alternate===null&&p(We,In),Ue=$(Dp,Ue,dr),us===null?Un=Dp:us.sibling=Dp,us=Dp,In=Mr}if(ds.done)return b(We,In),_r&&Ql(We,dr),Un;if(In===null){for(;!ds.done;dr++,ds=et.next())ds=jt(We,ds.value,wt),ds!==null&&(Ue=$(ds,Ue,dr),us===null?Un=ds:us.sibling=ds,us=ds);return _r&&Ql(We,dr),Un}for(In=S(In);!ds.done;dr++,ds=et.next())ds=ct(In,We,dr,ds.value,wt),ds!==null&&(h&&ds.alternate!==null&&In.delete(ds.key===null?dr:ds.key),Ue=$(ds,Ue,dr),us===null?Un=ds:us.sibling=ds,us=ds);return h&&In.forEach(function(_pe){return p(We,_pe)}),_r&&Ql(We,dr),Un}function Qs(We,Ue,et,wt){if(typeof et=="object"&&et!==null&&et.type===y&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case m:e:{for(var Un=et.key;Ue!==null;){if(Ue.key===Un){if(Un=et.type,Un===y){if(Ue.tag===7){b(We,Ue.sibling),wt=_(Ue,et.props.children),wt.return=We,We=wt;break e}}else if(Ue.elementType===Un||typeof Un=="object"&&Un!==null&&Un.$$typeof===F&&Je(Un)===Ue.type){b(We,Ue.sibling),wt=_(Ue,et.props),tr(wt,et),wt.return=We,We=wt;break e}b(We,Ue);break}else p(We,Ue);Ue=Ue.sibling}et.type===y?(wt=_f(et.props.children,We.mode,wt,et.key),wt.return=We,We=wt):(wt=Ap(et.type,et.key,et.props,null,We.mode,wt),tr(wt,et),wt.return=We,We=wt)}return te(We);case g:e:{for(Un=et.key;Ue!==null;){if(Ue.key===Un)if(Ue.tag===4&&Ue.stateNode.containerInfo===et.containerInfo&&Ue.stateNode.implementation===et.implementation){b(We,Ue.sibling),wt=_(Ue,et.children||[]),wt.return=We,We=wt;break e}else{b(We,Ue);break}else p(We,Ue);Ue=Ue.sibling}wt=pp(et,We.mode,wt),wt.return=We,We=wt}return te(We);case F:return et=Je(et),Qs(We,Ue,et,wt)}if(ee(et))return gn(We,Ue,et,wt);if(P(et)){if(Un=P(et),typeof Un!="function")throw Error(r(150));return et=Un.call(et),Kn(We,Ue,et,wt)}if(typeof et.then=="function")return Qs(We,Ue,an(et),wt);if(et.$$typeof===B)return Qs(We,Ue,ly(We,et),wt);hn(We,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Ue!==null&&Ue.tag===6?(b(We,Ue.sibling),wt=_(Ue,et),wt.return=We,We=wt):(b(We,Ue),wt=eg(et,We.mode,wt),wt.return=We,We=wt),te(We)):b(We,Ue)}return function(We,Ue,et,wt){try{bn=0;var Un=Qs(We,Ue,et,wt);return It=null,Un}catch(In){if(In===De||In===we)throw In;var us=Eo(29,In,null,We.mode);return us.lanes=wt,us.return=We,us}}}var Ys=Cr(!0),ir=Cr(!1),on=!1;function Wt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pi(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function qn(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function lr(h,p,b){var S=h.updateQueue;if(S===null)return null;if(S=S.shared,(ps&2)!==0){var _=S.pending;return _===null?p.next=p:(p.next=_.next,_.next=p),S.pending=p,p=jo(h),Jm(h,null,b),p}return Ym(h,S,p,b),jo(h)}function hs(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var S=p.lanes;S&=h.pendingLanes,b|=S,p.lanes=b,$s(h,b)}}function Ia(h,p){var b=h.updateQueue,S=h.alternate;if(S!==null&&(S=S.updateQueue,b===S)){var _=null,$=null;if(b=b.firstBaseUpdate,b!==null){do{var te={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};$===null?_=$=te:$=$.next=te,b=b.next}while(b!==null);$===null?_=$=p:$=$.next=p}else _=$=p;b={baseState:S.baseState,firstBaseUpdate:_,lastBaseUpdate:$,shared:S.shared,callbacks:S.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}var lo=!1;function zs(){if(lo){var h=R;if(h!==null)throw h}}function ha(h,p,b,S){lo=!1;var _=h.updateQueue;on=!1;var $=_.firstBaseUpdate,te=_.lastBaseUpdate,he=_.shared.pending;if(he!==null){_.shared.pending=null;var Te=he,tt=Te.next;Te.next=null,te===null?$=tt:te.next=tt,te=Te;var xt=h.alternate;xt!==null&&(xt=xt.updateQueue,he=xt.lastBaseUpdate,he!==te&&(he===null?xt.firstBaseUpdate=tt:he.next=tt,xt.lastBaseUpdate=Te))}if($!==null){var jt=_.baseState;te=0,xt=tt=Te=null,he=$;do{var rt=he.lane&-536870913,ct=rt!==he.lane;if(ct?(Ur&rt)===rt:(S&rt)===rt){rt!==0&&rt===E&&(lo=!0),xt!==null&&(xt=xt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var gn=h,Kn=he;rt=p;var Qs=b;switch(Kn.tag){case 1:if(gn=Kn.payload,typeof gn=="function"){jt=gn.call(Qs,jt,rt);break e}jt=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=Kn.payload,rt=typeof gn=="function"?gn.call(Qs,jt,rt):gn,rt==null)break e;jt=f({},jt,rt);break e;case 2:on=!0}}rt=he.callback,rt!==null&&(h.flags|=64,ct&&(h.flags|=8192),ct=_.callbacks,ct===null?_.callbacks=[rt]:ct.push(rt))}else ct={lane:rt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},xt===null?(tt=xt=ct,Te=jt):xt=xt.next=ct,te|=rt;if(he=he.next,he===null){if(he=_.shared.pending,he===null)break;ct=he,he=ct.next,ct.next=null,_.lastBaseUpdate=ct,_.shared.pending=null}}while(!0);xt===null&&(Te=jt),_.baseState=Te,_.firstBaseUpdate=tt,_.lastBaseUpdate=xt,$===null&&(_.shared.lanes=0),Bp|=te,h.lanes=te,h.memoizedState=jt}}function Io(h,p){if(typeof h!="function")throw Error(r(191,h));h.call(p)}function Aa(h,p){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)Io(b[h],p)}var gr=H(null),Xr=H(0);function mi(h,p){h=eA,X(Xr,h),X(gr,p),eA=h|p.baseLanes}function is(){X(Xr,eA),X(gr,gr.current)}function Na(){eA=Xr.current,Q(gr),Q(Xr)}var gi=H(null),Yr=null;function oa(h){var p=h.alternate;X(Vr,Vr.current&1),X(gi,h),Yr===null&&(p===null||gr.current!==null||p.memoizedState!==null)&&(Yr=h)}function As(h){X(Vr,Vr.current),X(gi,h),Yr===null&&(Yr=h)}function pa(h){h.tag===22?(X(Vr,Vr.current),X(gi,h),Yr===null&&(Yr=h)):ma()}function ma(){X(Vr,Vr.current),X(gi,gi.current)}function js(h){Q(gi),Yr===h&&(Yr=null),Q(Vr)}var Vr=H(0);function No(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||wT(b)||ST(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Oi=0,$n=null,zn=null,Jr=null,ml=!1,vc=!1,rl=!1,ga=0,Pf=0,zf=null,uy=0;function Us(){throw Error(r(321))}function zb(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!ro(h[b],p[b]))return!1;return!0}function Ub(h,p,b,S,_,$){return Oi=$,$n=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,q.H=h===null||h.memoizedState===null?rM:RN,rl=!1,$=b(S,_),rl=!1,vc&&($=$d(p,b,S,_)),dy(h),$}function dy(h){q.H=Kb;var p=zn!==null&&zn.next!==null;if(Oi=0,Jr=zn=$n=null,ml=!1,Pf=0,zf=null,p)throw Error(r(300));h===null||Ma||(h=h.dependencies,h!==null&&oy(h)&&(Ma=!0))}function $d(h,p,b,S){$n=h;var _=0;do{if(vc&&(zf=null),Pf=0,vc=!1,25<=_)throw Error(r(301));if(_+=1,Jr=zn=null,h.updateQueue!=null){var $=h.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}q.H=sM,$=p(b,S)}while(vc);return $}function BN(){var h=q.H,p=h.useState()[0];return p=typeof p.then=="function"?Uf(p):p,h=h.useState()[0],(zn!==null?zn.memoizedState:null)!==h&&($n.flags|=1024),p}function Mb(){var h=ga!==0;return ga=0,h}function Qb(h,p,b){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~b}function fy(h){if(ml){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ml=!1}Oi=0,Jr=zn=$n=null,vc=!1,Pf=ga=0,zf=null}function Ua(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?$n.memoizedState=Jr=h:Jr=Jr.next=h,Jr}function Fi(){if(zn===null){var h=$n.alternate;h=h!==null?h.memoizedState:null}else h=zn.next;var p=Jr===null?$n.memoizedState:Jr.next;if(p!==null)Jr=p,zn=h;else{if(h===null)throw $n.alternate===null?Error(r(467)):Error(r(310));zn=h,h={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Jr===null?$n.memoizedState=Jr=h:Jr=Jr.next=h}return Jr}function sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uf(h){var p=Pf;return Pf+=1,zf===null&&(zf=[]),h=mt(zf,h,p),p=$n,(Jr===null?p.memoizedState:Jr.next)===null&&(p=p.alternate,q.H=p===null||p.memoizedState===null?rM:RN),h}function bp(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Uf(h);if(h.$$typeof===B)return oo(h)}throw Error(r(438,String(h)))}function Wh(h){var p=null,b=$n.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var S=$n.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(p={data:S.data.map(function(_){return _.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=sg(),$n.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(h),S=0;S<h;S++)b[S]=T;return p.index++,b}function $u(h,p){return typeof p=="function"?p(h):p}function hy(h){var p=Fi();return vp(p,zn,h)}function vp(h,p,b){var S=h.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=b;var _=h.baseQueue,$=S.pending;if($!==null){if(_!==null){var te=_.next;_.next=$.next,$.next=te}p.baseQueue=_=$,S.pending=null}if($=h.baseState,_===null)h.memoizedState=$;else{p=_.next;var he=te=null,Te=null,tt=p,xt=!1;do{var jt=tt.lane&-536870913;if(jt!==tt.lane?(Ur&jt)===jt:(Oi&jt)===jt){var rt=tt.revertLane;if(rt===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),jt===E&&(xt=!0);else if((Oi&rt)===rt){tt=tt.next,rt===E&&(xt=!0);continue}else jt={lane:0,revertLane:tt.revertLane,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Te===null?(he=Te=jt,te=$):Te=Te.next=jt,$n.lanes|=rt,Bp|=rt;jt=tt.action,rl&&b($,jt),$=tt.hasEagerState?tt.eagerState:b($,jt)}else rt={lane:jt,revertLane:tt.revertLane,gesture:tt.gesture,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Te===null?(he=Te=rt,te=$):Te=Te.next=rt,$n.lanes|=jt,Bp|=jt;tt=tt.next}while(tt!==null&&tt!==p);if(Te===null?te=$:Te.next=he,!ro($,h.memoizedState)&&(Ma=!0,xt&&(b=R,b!==null)))throw b;h.memoizedState=$,h.baseState=te,h.baseQueue=Te,S.lastRenderedState=$}return _===null&&(S.lanes=0),[h.memoizedState,S.dispatch]}function Ay(h){var p=Fi(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var S=b.dispatch,_=b.pending,$=p.memoizedState;if(_!==null){b.pending=null;var te=_=_.next;do $=h($,te.action),te=te.next;while(te!==_);ro($,p.memoizedState)||(Ma=!0),p.memoizedState=$,p.baseQueue===null&&(p.baseState=$),b.lastRenderedState=$}return[$,S]}function py(h,p,b){var S=$n,_=Fi(),$=_r;if($){if(b===void 0)throw Error(r(407));b=b()}else b=p();var te=!ro((zn||_).memoizedState,b);if(te&&(_.memoizedState=b,Ma=!0),_=_.queue,jN(Wb.bind(null,S,_,h),[h]),_.getSnapshot!==p||te||Jr!==null&&Jr.memoizedState.tag&1){if(S.flags|=2048,qh(9,{destroy:void 0},Hb.bind(null,S,_,b,p),null),Js===null)throw Error(r(349));$||(Oi&127)!==0||Pd(S,p,b)}return b}function Pd(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=$n.updateQueue,p===null?(p=sg(),$n.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function Hb(h,p,b,S){p.value=b,p.getSnapshot=S,WS(p)&&Vb(h)}function Wb(h,p,b){return b(function(){WS(p)&&Vb(h)})}function WS(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!ro(h,b)}catch{return!0}}function Vb(h){var p=Dd(h,2);p!==null&&Bc(p,h,2)}function Mf(h){var p=Ua();if(typeof h=="function"){var b=h;if(h=b(),rl){xn(!0);try{b()}finally{xn(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:h},p}function VS(h,p,b,S){return h.baseState=b,vp(h,zn,typeof S=="function"?S:$u)}function qS(h,p,b,S,_){if(YS(h))throw Error(r(485));if(h=p.action,h!==null){var $={payload:_,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){$.listeners.push(te)}};q.T!==null?b(!0):$.isTransition=!1,S($),b=p.pending,b===null?($.next=p.pending=$,GS(p,$)):($.next=b.next,p.pending=b.next=$)}}function GS(h,p){var b=p.action,S=p.payload,_=h.state;if(p.isTransition){var $=q.T,te={};q.T=te;try{var he=b(_,S),Te=q.S;Te!==null&&Te(te,he),qb(h,p,he)}catch(tt){Vh(h,p,tt)}finally{$!==null&&te.types!==null&&($.types=te.types),q.T=$}}else try{$=b(_,S),qb(h,p,$)}catch(tt){Vh(h,p,tt)}}function qb(h,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(S){KS(h,p,S)},function(S){return Vh(h,p,S)}):KS(h,p,b)}function KS(h,p,b){p.status="fulfilled",p.value=b,my(p),h.state=b,p=h.pending,p!==null&&(b=p.next,b===p?h.pending=null:(b=b.next,p.next=b,GS(h,b)))}function Vh(h,p,b){var S=h.pending;if(h.pending=null,S!==null){S=S.next;do p.status="rejected",p.reason=b,my(p),p=p.next;while(p!==S)}h.action=null}function my(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function ig(h,p){return p}function Pu(h,p){if(_r){var b=Js.formState;if(b!==null){e:{var S=$n;if(_r){if(Xs){t:{for(var _=Xs,$=Ri;_.nodeType!==8;){if(!$){_=null;break t}if(_=zu(_.nextSibling),_===null){_=null;break t}}$=_.data,_=$==="F!"||$==="F"?_:null}if(_){Xs=zu(_.nextSibling),S=_.data==="F!";break e}}Of(S)}S=!1}S&&(p=b[0])}}return b=Ua(),b.memoizedState=b.baseState=p,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:p},b.queue=S,b=eM.bind(null,$n,S),S.dispatch=b,S=Mf(!1),$=_N.bind(null,$n,!1,S.queue),S=Ua(),_={state:p,dispatch:null,action:h,pending:null},S.queue=_,b=qS.bind(null,$n,_,$,b),_.dispatch=b,S.memoizedState=h,[p,b,!1]}function zd(h){var p=Fi();return Ud(p,zn,h)}function Ud(h,p,b){if(p=vp(h,p,ig)[0],h=hy($u)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var S=Uf(p)}catch(te){throw te===De?we:te}else S=p;p=Fi();var _=p.queue,$=_.dispatch;return b!==p.memoizedState&&($n.flags|=2048,qh(9,{destroy:void 0},gy.bind(null,_,b),null)),[S,$,h]}function gy(h,p){h.action=p}function yy(h){var p=Fi(),b=zn;if(b!==null)return Ud(p,b,h);Fi(),p=p.memoizedState,b=Fi();var S=b.queue.dispatch;return b.memoizedState=h,[p,S,!1]}function qh(h,p,b,S){return h={tag:h,create:b,deps:S,inst:p,next:null},p=$n.updateQueue,p===null&&(p=sg(),$n.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=h.next=h:(S=b.next,b.next=h,h.next=S,p.lastEffect=h),h}function XS(){return Fi().memoizedState}function wp(h,p,b,S){var _=Ua();$n.flags|=h,_.memoizedState=qh(1|p,{destroy:void 0},b,S===void 0?null:S)}function Sp(h,p,b,S){var _=Fi();S=S===void 0?null:S;var $=_.memoizedState.inst;zn!==null&&S!==null&&zb(S,zn.memoizedState.deps)?_.memoizedState=qh(p,$,b,S):($n.flags|=h,_.memoizedState=qh(1|p,$,b,S))}function zU(h,p){wp(8390656,8,h,p)}function jN(h,p){Sp(2048,8,h,p)}function BAe(h){$n.flags|=4;var p=$n.updateQueue;if(p===null)p=sg(),$n.updateQueue=p,p.events=[h];else{var b=p.events;b===null?p.events=[h]:b.push(h)}}function UU(h){var p=Fi().memoizedState;return BAe({ref:p,nextImpl:h}),function(){if((ps&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function MU(h,p){return Sp(4,2,h,p)}function QU(h,p){return Sp(4,4,h,p)}function HU(h,p){if(typeof p=="function"){h=h();var b=p(h);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function WU(h,p,b){b=b!=null?b.concat([h]):null,Sp(4,4,HU.bind(null,p,h),b)}function EN(){}function VU(h,p){var b=Fi();p=p===void 0?null:p;var S=b.memoizedState;return p!==null&&zb(p,S[1])?S[0]:(b.memoizedState=[h,p],h)}function qU(h,p){var b=Fi();p=p===void 0?null:p;var S=b.memoizedState;if(p!==null&&zb(p,S[1]))return S[0];if(S=h(),rl){xn(!0);try{h()}finally{xn(!1)}}return b.memoizedState=[S,p],S}function IN(h,p,b){return b===void 0||(Oi&1073741824)!==0&&(Ur&261930)===0?h.memoizedState=p:(h.memoizedState=b,h=GM(),$n.lanes|=h,Bp|=h,b)}function GU(h,p,b,S){return ro(b,p)?b:gr.current!==null?(h=IN(h,b,S),ro(h,p)||(Ma=!0),h):(Oi&42)===0||(Oi&1073741824)!==0&&(Ur&261930)===0?(Ma=!0,h.memoizedState=b):(h=GM(),$n.lanes|=h,Bp|=h,p)}function KU(h,p,b,S,_){var $=Z.p;Z.p=$!==0&&8>$?$:8;var te=q.T,he={};q.T=he,_N(h,!1,p,b);try{var Te=_(),tt=q.S;if(tt!==null&&tt(he,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var xt=oe(Te,S);Gb(h,p,xt,su(h))}else Gb(h,p,S,su(h))}catch(jt){Gb(h,p,{then:function(){},status:"rejected",reason:jt},su())}finally{Z.p=$,te!==null&&he.types!==null&&(te.types=he.types),q.T=te}}function jAe(){}function NN(h,p,b,S){if(h.tag!==5)throw Error(r(476));var _=XU(h).queue;KU(h,_,p,G,b===null?jAe:function(){return YU(h),b(S)})}function XU(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:G},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:b},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function YU(h){var p=XU(h);p.next===null&&(p=h.alternate.memoizedState),Gb(h,p.next.queue,{},su())}function TN(){return oo(dv)}function JU(){return Fi().memoizedState}function ZU(){return Fi().memoizedState}function EAe(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var b=su();h=qn(b);var S=lr(p,h,b);S!==null&&(Bc(S,p,b),hs(S,p,b)),p={cache:xp()},h.payload=p;return}p=p.return}}function IAe(h,p,b){var S=su();b={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},YS(h)?tM(p,b):(b=Z0(h,p,b,S),b!==null&&(Bc(b,h,S),nM(b,p,S)))}function eM(h,p,b){var S=su();Gb(h,p,b,S)}function Gb(h,p,b,S){var _={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(YS(h))tM(p,_);else{var $=h.alternate;if(h.lanes===0&&($===null||$.lanes===0)&&($=p.lastRenderedReducer,$!==null))try{var te=p.lastRenderedState,he=$(te,b);if(_.hasEagerState=!0,_.eagerState=he,ro(he,te))return Ym(h,p,_,0),Js===null&&Xm(),!1}catch{}if(b=Z0(h,p,_,S),b!==null)return Bc(b,h,S),nM(b,p,S),!0}return!1}function _N(h,p,b,S){if(S={lane:2,revertLane:uT(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},YS(h)){if(p)throw Error(r(479))}else p=Z0(h,b,S,2),p!==null&&Bc(p,h,2)}function YS(h){var p=h.alternate;return h===$n||p!==null&&p===$n}function tM(h,p){vc=ml=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function nM(h,p,b){if((b&4194048)!==0){var S=p.lanes;S&=h.pendingLanes,b|=S,p.lanes=b,$s(h,b)}}var Kb={readContext:oo,use:bp,useCallback:Us,useContext:Us,useEffect:Us,useImperativeHandle:Us,useLayoutEffect:Us,useInsertionEffect:Us,useMemo:Us,useReducer:Us,useRef:Us,useState:Us,useDebugValue:Us,useDeferredValue:Us,useTransition:Us,useSyncExternalStore:Us,useId:Us,useHostTransitionStatus:Us,useFormState:Us,useActionState:Us,useOptimistic:Us,useMemoCache:Us,useCacheRefresh:Us};Kb.useEffectEvent=Us;var rM={readContext:oo,use:bp,useCallback:function(h,p){return Ua().memoizedState=[h,p===void 0?null:p],h},useContext:oo,useEffect:zU,useImperativeHandle:function(h,p,b){b=b!=null?b.concat([h]):null,wp(4194308,4,HU.bind(null,p,h),b)},useLayoutEffect:function(h,p){return wp(4194308,4,h,p)},useInsertionEffect:function(h,p){wp(4,2,h,p)},useMemo:function(h,p){var b=Ua();p=p===void 0?null:p;var S=h();if(rl){xn(!0);try{h()}finally{xn(!1)}}return b.memoizedState=[S,p],S},useReducer:function(h,p,b){var S=Ua();if(b!==void 0){var _=b(p);if(rl){xn(!0);try{b(p)}finally{xn(!1)}}}else _=p;return S.memoizedState=S.baseState=_,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:_},S.queue=h,h=h.dispatch=IAe.bind(null,$n,h),[S.memoizedState,h]},useRef:function(h){var p=Ua();return h={current:h},p.memoizedState=h},useState:function(h){h=Mf(h);var p=h.queue,b=eM.bind(null,$n,p);return p.dispatch=b,[h.memoizedState,b]},useDebugValue:EN,useDeferredValue:function(h,p){var b=Ua();return IN(b,h,p)},useTransition:function(){var h=Mf(!1);return h=KU.bind(null,$n,h.queue,!0,!1),Ua().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,b){var S=$n,_=Ua();if(_r){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),Js===null)throw Error(r(349));(Ur&127)!==0||Pd(S,p,b)}_.memoizedState=b;var $={value:b,getSnapshot:p};return _.queue=$,zU(Wb.bind(null,S,$,h),[h]),S.flags|=2048,qh(9,{destroy:void 0},Hb.bind(null,S,$,b,p),null),b},useId:function(){var h=Ua(),p=Js.identifierPrefix;if(_r){var b=xc,S=yc;b=(S&~(1<<32-ke(S)-1)).toString(32)+b,p="_"+p+"R_"+b,b=ga++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=uy++,p="_"+p+"r_"+b.toString(32)+"_";return h.memoizedState=p},useHostTransitionStatus:TN,useFormState:Pu,useActionState:Pu,useOptimistic:function(h){var p=Ua();p.memoizedState=p.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=_N.bind(null,$n,!0,b),b.dispatch=p,[h,p]},useMemoCache:Wh,useCacheRefresh:function(){return Ua().memoizedState=EAe.bind(null,$n)},useEffectEvent:function(h){var p=Ua(),b={impl:h};return p.memoizedState=b,function(){if((ps&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},RN={readContext:oo,use:bp,useCallback:VU,useContext:oo,useEffect:jN,useImperativeHandle:WU,useInsertionEffect:MU,useLayoutEffect:QU,useMemo:qU,useReducer:hy,useRef:XS,useState:function(){return hy($u)},useDebugValue:EN,useDeferredValue:function(h,p){var b=Fi();return GU(b,zn.memoizedState,h,p)},useTransition:function(){var h=hy($u)[0],p=Fi().memoizedState;return[typeof h=="boolean"?h:Uf(h),p]},useSyncExternalStore:py,useId:JU,useHostTransitionStatus:TN,useFormState:zd,useActionState:zd,useOptimistic:function(h,p){var b=Fi();return VS(b,zn,h,p)},useMemoCache:Wh,useCacheRefresh:ZU};RN.useEffectEvent=UU;var sM={readContext:oo,use:bp,useCallback:VU,useContext:oo,useEffect:jN,useImperativeHandle:WU,useInsertionEffect:MU,useLayoutEffect:QU,useMemo:qU,useReducer:Ay,useRef:XS,useState:function(){return Ay($u)},useDebugValue:EN,useDeferredValue:function(h,p){var b=Fi();return zn===null?IN(b,h,p):GU(b,zn.memoizedState,h,p)},useTransition:function(){var h=Ay($u)[0],p=Fi().memoizedState;return[typeof h=="boolean"?h:Uf(h),p]},useSyncExternalStore:py,useId:JU,useHostTransitionStatus:TN,useFormState:yy,useActionState:yy,useOptimistic:function(h,p){var b=Fi();return zn!==null?VS(b,zn,h,p):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:ZU};sM.useEffectEvent=UU;function ON(h,p,b,S){p=h.memoizedState,b=b(S,p),b=b==null?p:f({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var FN={enqueueSetState:function(h,p,b){h=h._reactInternals;var S=su(),_=qn(S);_.payload=p,b!=null&&(_.callback=b),p=lr(h,_,S),p!==null&&(Bc(p,h,S),hs(p,h,S))},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var S=su(),_=qn(S);_.tag=1,_.payload=p,b!=null&&(_.callback=b),p=lr(h,_,S),p!==null&&(Bc(p,h,S),hs(p,h,S))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=su(),S=qn(b);S.tag=2,p!=null&&(S.callback=p),p=lr(h,S,b),p!==null&&(Bc(p,h,b),hs(p,h,b))}};function iM(h,p,b,S,_,$,te){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(S,$,te):p.prototype&&p.prototype.isPureReactComponent?!_d(b,S)||!_d(_,$):!0}function aM(h,p,b,S){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,S),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,S),p.state!==h&&FN.enqueueReplaceState(p,p.state,null)}function ag(h,p){var b=p;if("ref"in p){b={};for(var S in p)S!=="ref"&&(b[S]=p[S])}if(h=h.defaultProps){b===p&&(b=f({},b));for(var _ in h)b[_]===void 0&&(b[_]=h[_])}return b}function oM(h){Km(h)}function lM(h){console.error(h)}function cM(h){Km(h)}function JS(h,p){try{var b=h.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(S){setTimeout(function(){throw S})}}function uM(h,p,b){try{var S=h.onCaughtError;S(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function DN(h,p,b){return b=qn(b),b.tag=3,b.payload={element:null},b.callback=function(){JS(h,p)},b}function dM(h){return h=qn(h),h.tag=3,h}function fM(h,p,b,S){var _=b.type.getDerivedStateFromError;if(typeof _=="function"){var $=S.value;h.payload=function(){return _($)},h.callback=function(){uM(p,b,S)}}var te=b.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(h.callback=function(){uM(p,b,S),typeof _!="function"&&(jp===null?jp=new Set([this]):jp.add(this));var he=S.stack;this.componentDidCatch(S.value,{componentStack:he!==null?he:""})})}function NAe(h,p,b,S,_){if(b.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(p=b.alternate,p!==null&&Lf(p,b,_,!0),b=gi.current,b!==null){switch(b.tag){case 31:case 13:return Yr===null?uC():b.alternate===null&&ya===0&&(ya=3),b.flags&=-257,b.flags|=65536,b.lanes=_,S===Me?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([S]):p.add(S),oT(h,S,_)),!1;case 22:return b.flags|=65536,S===Me?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([S])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([S]):b.add(S)),oT(h,S,_)),!1}throw Error(r(435,b.tag))}return oT(h,S,_),uC(),!1}if(_r)return p=gi.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=_,S!==tu&&(h=Error(r(422),{cause:S}),gp(pc(h,b)))):(S!==tu&&(p=Error(r(423),{cause:S}),gp(pc(p,b))),h=h.current.alternate,h.flags|=65536,_&=-_,h.lanes|=_,S=pc(S,b),_=DN(h.stateNode,S,_),Ia(h,_),ya!==4&&(ya=2)),!1;var $=Error(r(520),{cause:S});if($=pc($,b),rv===null?rv=[$]:rv.push($),ya!==4&&(ya=2),p===null)return!0;S=pc(S,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,h=_&-_,b.lanes|=h,h=DN(b.stateNode,S,h),Ia(b,h),!1;case 1:if(p=b.type,$=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(jp===null||!jp.has($))))return b.flags|=65536,_&=-_,b.lanes|=_,_=dM(_),fM(_,h,b,S),Ia(b,_),!1}b=b.return}while(b!==null);return!1}var LN=Error(r(461)),Ma=!1;function sl(h,p,b,S){p.child=h===null?ir(p,null,b,S):Ys(p,h.child,b,S)}function hM(h,p,b,S,_){b=b.render;var $=p.ref;if("ref"in S){var te={};for(var he in S)he!=="ref"&&(te[he]=S[he])}else te=S;return $f(p),S=Ub(h,p,b,te,$,_),he=Mb(),h!==null&&!Ma?(Qb(h,p,_),Gh(h,p,_)):(_r&&he&&Lb(p),p.flags|=1,sl(h,p,S,_),p.child)}function AM(h,p,b,S,_){if(h===null){var $=b.type;return typeof $=="function"&&!ty($)&&$.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=$,pM(h,p,$,S,_)):(h=Ap(b.type,null,S,p,p.mode,_),h.ref=p.ref,h.return=p,p.child=h)}if($=h.child,!WN(h,_)){var te=$.memoizedProps;if(b=b.compare,b=b!==null?b:_d,b(te,S)&&h.ref===p.ref)return Gh(h,p,_)}return p.flags|=1,h=Ac($,S),h.ref=p.ref,h.return=p,p.child=h}function pM(h,p,b,S,_){if(h!==null){var $=h.memoizedProps;if(_d($,S)&&h.ref===p.ref)if(Ma=!1,p.pendingProps=S=$,WN(h,_))(h.flags&131072)!==0&&(Ma=!0);else return p.lanes=h.lanes,Gh(h,p,_)}return $N(h,p,b,S,_)}function mM(h,p,b,S){var _=S.children,$=h!==null?h.memoizedState:null;if(h===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((p.flags&128)!==0){if($=$!==null?$.baseLanes|b:b,h!==null){for(S=p.child=h.child,_=0;S!==null;)_=_|S.lanes|S.childLanes,S=S.sibling;S=_&~$}else S=0,p.child=null;return gM(h,p,$,b,S)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&be(p,$!==null?$.cachePool:null),$!==null?mi(p,$):is(),pa(p);else return S=p.lanes=536870912,gM(h,p,$!==null?$.baseLanes|b:b,b,S)}else $!==null?(be(p,$.cachePool),mi(p,$),ma(),p.memoizedState=null):(h!==null&&be(p,null),is(),ma());return sl(h,p,_,b),p.child}function Xb(h,p){return h!==null&&h.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function gM(h,p,b,S,_){var $=ge();return $=$===null?null:{parent:aa._currentValue,pool:$},p.memoizedState={baseLanes:b,cachePool:$},h!==null&&be(p,null),is(),pa(p),h!==null&&Lf(h,p,S,!0),p.childLanes=_,null}function ZS(h,p){return p=tC({mode:p.mode,children:p.children},h.mode),p.ref=h.ref,h.child=p,p.return=h,p}function yM(h,p,b){return Ys(p,h.child,null,b),h=ZS(p,p.pendingProps),h.flags|=2,js(p),p.memoizedState=null,h}function TAe(h,p,b){var S=p.pendingProps,_=(p.flags&128)!==0;if(p.flags&=-129,h===null){if(_r){if(S.mode==="hidden")return h=ZS(p,S),p.lanes=536870912,Xb(null,h);if(As(p),(h=Xs)?(h=N9(h,Ri),h=h!==null&&h.data==="&"?h:null,h!==null&&(p.memoizedState={dehydrated:h,treeContext:Rf!==null?{id:yc,overflow:xc}:null,retryLane:536870912,hydrationErrors:null},b=ny(h),b.return=p,p.child=b,io=p,Xs=null)):h=null,h===null)throw Of(p);return p.lanes=536870912,null}return ZS(p,S)}var $=h.memoizedState;if($!==null){var te=$.dehydrated;if(As(p),_)if(p.flags&256)p.flags&=-257,p=yM(h,p,b);else if(p.memoizedState!==null)p.child=h.child,p.flags|=128,p=null;else throw Error(r(558));else if(Ma||Lf(h,p,b,!1),_=(b&h.childLanes)!==0,Ma||_){if(S=Js,S!==null&&(te=wr(S,b),te!==0&&te!==$.retryLane))throw $.retryLane=te,Dd(h,te),Bc(S,h,te),LN;uC(),p=yM(h,p,b)}else h=$.treeContext,Xs=zu(te.nextSibling),io=p,_r=!0,nl=null,Ri=!1,h!==null&&QS(p,h),p=ZS(p,S),p.flags|=4096;return p}return h=Ac(h.child,{mode:S.mode,children:S.children}),h.ref=p.ref,p.child=h,h.return=p,h}function eC(h,p){var b=p.ref;if(b===null)h!==null&&h.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(p.flags|=4194816)}}function $N(h,p,b,S,_){return $f(p),b=Ub(h,p,b,S,void 0,_),S=Mb(),h!==null&&!Ma?(Qb(h,p,_),Gh(h,p,_)):(_r&&S&&Lb(p),p.flags|=1,sl(h,p,b,_),p.child)}function xM(h,p,b,S,_,$){return $f(p),p.updateQueue=null,b=$d(p,S,b,_),dy(h),S=Mb(),h!==null&&!Ma?(Qb(h,p,$),Gh(h,p,$)):(_r&&S&&Lb(p),p.flags|=1,sl(h,p,b,$),p.child)}function bM(h,p,b,S,_){if($f(p),p.stateNode===null){var $=so,te=b.contextType;typeof te=="object"&&te!==null&&($=oo(te)),$=new b(S,$),p.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=FN,p.stateNode=$,$._reactInternals=p,$=p.stateNode,$.props=S,$.state=p.memoizedState,$.refs={},Wt(p),te=b.contextType,$.context=typeof te=="object"&&te!==null?oo(te):so,$.state=p.memoizedState,te=b.getDerivedStateFromProps,typeof te=="function"&&(ON(p,b,te,S),$.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(te=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),te!==$.state&&FN.enqueueReplaceState($,$.state,null),ha(p,S,$,_),zs(),$.state=p.memoizedState),typeof $.componentDidMount=="function"&&(p.flags|=4194308),S=!0}else if(h===null){$=p.stateNode;var he=p.memoizedProps,Te=ag(b,he);$.props=Te;var tt=$.context,xt=b.contextType;te=so,typeof xt=="object"&&xt!==null&&(te=oo(xt));var jt=b.getDerivedStateFromProps;xt=typeof jt=="function"||typeof $.getSnapshotBeforeUpdate=="function",he=p.pendingProps!==he,xt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(he||tt!==te)&&aM(p,$,S,te),on=!1;var rt=p.memoizedState;$.state=rt,ha(p,S,$,_),zs(),tt=p.memoizedState,he||rt!==tt||on?(typeof jt=="function"&&(ON(p,b,jt,S),tt=p.memoizedState),(Te=on||iM(p,b,Te,S,rt,tt,te))?(xt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(p.flags|=4194308)):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=S,p.memoizedState=tt),$.props=S,$.state=tt,$.context=te,S=Te):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),S=!1)}else{$=p.stateNode,pi(h,p),te=p.memoizedProps,xt=ag(b,te),$.props=xt,jt=p.pendingProps,rt=$.context,tt=b.contextType,Te=so,typeof tt=="object"&&tt!==null&&(Te=oo(tt)),he=b.getDerivedStateFromProps,(tt=typeof he=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==jt||rt!==Te)&&aM(p,$,S,Te),on=!1,rt=p.memoizedState,$.state=rt,ha(p,S,$,_),zs();var ct=p.memoizedState;te!==jt||rt!==ct||on||h!==null&&h.dependencies!==null&&oy(h.dependencies)?(typeof he=="function"&&(ON(p,b,he,S),ct=p.memoizedState),(xt=on||iM(p,b,xt,S,rt,ct,Te)||h!==null&&h.dependencies!==null&&oy(h.dependencies))?(tt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(S,ct,Te),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(S,ct,Te)),typeof $.componentDidUpdate=="function"&&(p.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof $.componentDidUpdate!="function"||te===h.memoizedProps&&rt===h.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===h.memoizedProps&&rt===h.memoizedState||(p.flags|=1024),p.memoizedProps=S,p.memoizedState=ct),$.props=S,$.state=ct,$.context=Te,S=xt):(typeof $.componentDidUpdate!="function"||te===h.memoizedProps&&rt===h.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===h.memoizedProps&&rt===h.memoizedState||(p.flags|=1024),S=!1)}return $=S,eC(h,p),S=(p.flags&128)!==0,$||S?($=p.stateNode,b=S&&typeof b.getDerivedStateFromError!="function"?null:$.render(),p.flags|=1,h!==null&&S?(p.child=Ys(p,h.child,null,_),p.child=Ys(p,null,b,_)):sl(h,p,b,_),p.memoizedState=$.state,h=p.child):h=Gh(h,p,_),h}function vM(h,p,b,S){return Qh(),p.flags|=256,sl(h,p,b,S),p.child}var PN={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zN(h){return{baseLanes:h,cachePool:Ce()}}function UN(h,p,b){return h=h!==null?h.childLanes&~b:0,p&&(h|=ru),h}function wM(h,p,b){var S=p.pendingProps,_=!1,$=(p.flags&128)!==0,te;if((te=$)||(te=h!==null&&h.memoizedState===null?!1:(Vr.current&2)!==0),te&&(_=!0,p.flags&=-129),te=(p.flags&32)!==0,p.flags&=-33,h===null){if(_r){if(_?oa(p):ma(),(h=Xs)?(h=N9(h,Ri),h=h!==null&&h.data!=="&"?h:null,h!==null&&(p.memoizedState={dehydrated:h,treeContext:Rf!==null?{id:yc,overflow:xc}:null,retryLane:536870912,hydrationErrors:null},b=ny(h),b.return=p,p.child=b,io=p,Xs=null)):h=null,h===null)throw Of(p);return ST(h)?p.lanes=32:p.lanes=536870912,null}var he=S.children;return S=S.fallback,_?(ma(),_=p.mode,he=tC({mode:"hidden",children:he},_),S=_f(S,_,b,null),he.return=p,S.return=p,he.sibling=S,p.child=he,S=p.child,S.memoizedState=zN(b),S.childLanes=UN(h,te,b),p.memoizedState=PN,Xb(null,S)):(oa(p),MN(p,he))}var Te=h.memoizedState;if(Te!==null&&(he=Te.dehydrated,he!==null)){if($)p.flags&256?(oa(p),p.flags&=-257,p=QN(h,p,b)):p.memoizedState!==null?(ma(),p.child=h.child,p.flags|=128,p=null):(ma(),he=S.fallback,_=p.mode,S=tC({mode:"visible",children:S.children},_),he=_f(he,_,b,null),he.flags|=2,S.return=p,he.return=p,S.sibling=he,p.child=S,Ys(p,h.child,null,b),S=p.child,S.memoizedState=zN(b),S.childLanes=UN(h,te,b),p.memoizedState=PN,p=Xb(null,S));else if(oa(p),ST(he)){if(te=he.nextSibling&&he.nextSibling.dataset,te)var tt=te.dgst;te=tt,S=Error(r(419)),S.stack="",S.digest=te,gp({value:S,source:null,stack:null}),p=QN(h,p,b)}else if(Ma||Lf(h,p,b,!1),te=(b&h.childLanes)!==0,Ma||te){if(te=Js,te!==null&&(S=wr(te,b),S!==0&&S!==Te.retryLane))throw Te.retryLane=S,Dd(h,S),Bc(te,h,S),LN;wT(he)||uC(),p=QN(h,p,b)}else wT(he)?(p.flags|=192,p.child=h.child,p=null):(h=Te.treeContext,Xs=zu(he.nextSibling),io=p,_r=!0,nl=null,Ri=!1,h!==null&&QS(p,h),p=MN(p,S.children),p.flags|=4096);return p}return _?(ma(),he=S.fallback,_=p.mode,Te=h.child,tt=Te.sibling,S=Ac(Te,{mode:"hidden",children:S.children}),S.subtreeFlags=Te.subtreeFlags&65011712,tt!==null?he=Ac(tt,he):(he=_f(he,_,b,null),he.flags|=2),he.return=p,S.return=p,S.sibling=he,p.child=S,Xb(null,S),S=p.child,he=h.child.memoizedState,he===null?he=zN(b):(_=he.cachePool,_!==null?(Te=aa._currentValue,_=_.parent!==Te?{parent:Te,pool:Te}:_):_=Ce(),he={baseLanes:he.baseLanes|b,cachePool:_}),S.memoizedState=he,S.childLanes=UN(h,te,b),p.memoizedState=PN,Xb(h.child,S)):(oa(p),b=h.child,h=b.sibling,b=Ac(b,{mode:"visible",children:S.children}),b.return=p,b.sibling=null,h!==null&&(te=p.deletions,te===null?(p.deletions=[h],p.flags|=16):te.push(h)),p.child=b,p.memoizedState=null,b)}function MN(h,p){return p=tC({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function tC(h,p){return h=Eo(22,h,null,p),h.lanes=0,h}function QN(h,p,b){return Ys(p,h.child,null,b),h=MN(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function SM(h,p,b){h.lanes|=p;var S=h.alternate;S!==null&&(S.lanes|=p),yp(h.return,p,b)}function HN(h,p,b,S,_,$){var te=h.memoizedState;te===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:S,tail:b,tailMode:_,treeForkCount:$}:(te.isBackwards=p,te.rendering=null,te.renderingStartTime=0,te.last=S,te.tail=b,te.tailMode=_,te.treeForkCount=$)}function CM(h,p,b){var S=p.pendingProps,_=S.revealOrder,$=S.tail;S=S.children;var te=Vr.current,he=(te&2)!==0;if(he?(te=te&1|2,p.flags|=128):te&=1,X(Vr,te),sl(h,p,S,b),S=_r?tg:0,!he&&h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&SM(h,b,p);else if(h.tag===19)SM(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(_){case"forwards":for(b=p.child,_=null;b!==null;)h=b.alternate,h!==null&&No(h)===null&&(_=b),b=b.sibling;b=_,b===null?(_=p.child,p.child=null):(_=b.sibling,b.sibling=null),HN(p,!1,_,b,$,S);break;case"backwards":case"unstable_legacy-backwards":for(b=null,_=p.child,p.child=null;_!==null;){if(h=_.alternate,h!==null&&No(h)===null){p.child=_;break}h=_.sibling,_.sibling=b,b=_,_=h}HN(p,!0,b,null,$,S);break;case"together":HN(p,!1,null,null,void 0,S);break;default:p.memoizedState=null}return p.child}function Gh(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),Bp|=p.lanes,(b&p.childLanes)===0)if(h!==null){if(Lf(h,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,b=Ac(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=Ac(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function WN(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&oy(h)))}function _Ae(h,p,b){switch(p.tag){case 3:Be(p,p.stateNode.containerInfo),Df(p,aa,h.memoizedState.cache),Qh();break;case 27:case 5:ve(p);break;case 4:Be(p,p.stateNode.containerInfo);break;case 10:Df(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,As(p),null;break;case 13:var S=p.memoizedState;if(S!==null)return S.dehydrated!==null?(oa(p),p.flags|=128,null):(b&p.child.childLanes)!==0?wM(h,p,b):(oa(p),h=Gh(h,p,b),h!==null?h.sibling:null);oa(p);break;case 19:var _=(h.flags&128)!==0;if(S=(b&p.childLanes)!==0,S||(Lf(h,p,b,!1),S=(b&p.childLanes)!==0),_){if(S)return CM(h,p,b);p.flags|=128}if(_=p.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),X(Vr,Vr.current),S)break;return null;case 22:return p.lanes=0,mM(h,p,b,p.pendingProps);case 24:Df(p,aa,h.memoizedState.cache)}return Gh(h,p,b)}function kM(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps)Ma=!0;else{if(!WN(h,b)&&(p.flags&128)===0)return Ma=!1,_Ae(h,p,b);Ma=(h.flags&131072)!==0}else Ma=!1,_r&&(p.flags&1048576)!==0&&MS(p,tg,p.index);switch(p.lanes=0,p.tag){case 16:e:{var S=p.pendingProps;if(h=Je(p.elementType),p.type=h,typeof h=="function")ty(h)?(S=ag(h,S),p.tag=1,p=bM(null,p,h,S,b)):(p.tag=0,p=$N(null,p,h,S,b));else{if(h!=null){var _=h.$$typeof;if(_===k){p.tag=11,p=hM(null,p,h,S,b);break e}else if(_===O){p.tag=14,p=AM(null,p,h,S,b);break e}}throw p=U(h)||h,Error(r(306,p,""))}}return p;case 0:return $N(h,p,p.type,p.pendingProps,b);case 1:return S=p.type,_=ag(S,p.pendingProps),bM(h,p,S,_,b);case 3:e:{if(Be(p,p.stateNode.containerInfo),h===null)throw Error(r(387));S=p.pendingProps;var $=p.memoizedState;_=$.element,pi(h,p),ha(p,S,null,b);var te=p.memoizedState;if(S=te.cache,Df(p,aa,S),S!==$.cache&&Hh(p,[aa],b,!0),zs(),S=te.element,$.isDehydrated)if($={element:S,isDehydrated:!1,cache:te.cache},p.updateQueue.baseState=$,p.memoizedState=$,p.flags&256){p=vM(h,p,S,b);break e}else if(S!==_){_=pc(Error(r(424)),p),gp(_),p=vM(h,p,S,b);break e}else for(h=p.stateNode.containerInfo,h.nodeType===9?h=h.body:h=h.nodeName==="HTML"?h.ownerDocument.body:h,Xs=zu(h.firstChild),io=p,_r=!0,nl=null,Ri=!0,b=ir(p,null,S,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Qh(),S===_){p=Gh(h,p,b);break e}sl(h,p,S,b)}p=p.child}return p;case 26:return eC(h,p),h===null?(b=D9(p.type,null,p.pendingProps,null))?p.memoizedState=b:_r||(b=p.type,h=p.pendingProps,S=gC(Ae.current).createElement(b),S[Jn]=p,S[ns]=h,il(S,b,h),Ir(S),p.stateNode=S):p.memoizedState=D9(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:return ve(p),h===null&&_r&&(S=p.stateNode=R9(p.type,p.pendingProps,Ae.current),io=p,Ri=!0,_=Xs,Tp(p.type)?(CT=_,Xs=zu(S.firstChild)):Xs=_),sl(h,p,p.pendingProps.children,b),eC(h,p),h===null&&(p.flags|=4194304),p.child;case 5:return h===null&&_r&&((_=S=Xs)&&(S=lpe(S,p.type,p.pendingProps,Ri),S!==null?(p.stateNode=S,io=p,Xs=zu(S.firstChild),Ri=!1,_=!0):_=!1),_||Of(p)),ve(p),_=p.type,$=p.pendingProps,te=h!==null?h.memoizedProps:null,S=$.children,xT(_,$)?S=null:te!==null&&xT(_,te)&&(p.flags|=32),p.memoizedState!==null&&(_=Ub(h,p,BN,null,null,b),dv._currentValue=_),eC(h,p),sl(h,p,S,b),p.child;case 6:return h===null&&_r&&((h=b=Xs)&&(b=cpe(b,p.pendingProps,Ri),b!==null?(p.stateNode=b,io=p,Xs=null,h=!0):h=!1),h||Of(p)),null;case 13:return wM(h,p,b);case 4:return Be(p,p.stateNode.containerInfo),S=p.pendingProps,h===null?p.child=Ys(p,null,S,b):sl(h,p,S,b),p.child;case 11:return hM(h,p,p.type,p.pendingProps,b);case 7:return sl(h,p,p.pendingProps,b),p.child;case 8:return sl(h,p,p.pendingProps.children,b),p.child;case 12:return sl(h,p,p.pendingProps.children,b),p.child;case 10:return S=p.pendingProps,Df(p,p.type,S.value),sl(h,p,S.children,b),p.child;case 9:return _=p.type._context,S=p.pendingProps.children,$f(p),_=oo(_),S=S(_),p.flags|=1,sl(h,p,S,b),p.child;case 14:return AM(h,p,p.type,p.pendingProps,b);case 15:return pM(h,p,p.type,p.pendingProps,b);case 19:return CM(h,p,b);case 31:return TAe(h,p,b);case 22:return mM(h,p,b,p.pendingProps);case 24:return $f(p),S=oo(aa),h===null?(_=ge(),_===null&&(_=Js,$=xp(),_.pooledCache=$,$.refCount++,$!==null&&(_.pooledCacheLanes|=b),_=$),p.memoizedState={parent:S,cache:_},Wt(p),Df(p,aa,_)):((h.lanes&b)!==0&&(pi(h,p),ha(p,null,null,b),zs()),_=h.memoizedState,$=p.memoizedState,_.parent!==S?(_={parent:S,cache:S},p.memoizedState=_,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=_),Df(p,aa,S)):(S=$.cache,Df(p,aa,S),S!==_.cache&&Hh(p,[aa],b,!0))),sl(h,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Kh(h){h.flags|=4}function VN(h,p,b,S,_){if((p=(h.mode&32)!==0)&&(p=!1),p){if(h.flags|=16777216,(_&335544128)===_)if(h.stateNode.complete)h.flags|=8192;else if(JM())h.flags|=8192;else throw pt=Me,Ze}else h.flags&=-16777217}function BM(h,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!U9(p))if(JM())h.flags|=8192;else throw pt=Me,Ze}function nC(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?Hn():536870912,h.lanes|=p,wy|=p)}function Yb(h,p){if(!_r)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var S=null;b!==null;)b.alternate!==null&&(S=b),b=b.sibling;S===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:S.sibling=null}}function yi(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,S=0;if(p)for(var _=h.child;_!==null;)b|=_.lanes|_.childLanes,S|=_.subtreeFlags&65011712,S|=_.flags&65011712,_.return=h,_=_.sibling;else for(_=h.child;_!==null;)b|=_.lanes|_.childLanes,S|=_.subtreeFlags,S|=_.flags,_.return=h,_=_.sibling;return h.subtreeFlags|=S,h.childLanes=b,p}function RAe(h,p,b){var S=p.pendingProps;switch(iy(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(p),null;case 1:return yi(p),null;case 3:return b=p.stateNode,S=null,h!==null&&(S=h.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),bc(aa),me(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(ao(p)?Kh(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Pb())),yi(p),null;case 26:var _=p.type,$=p.memoizedState;return h===null?(Kh(p),$!==null?(yi(p),BM(p,$)):(yi(p),VN(p,_,null,S,b))):$?$!==h.memoizedState?(Kh(p),yi(p),BM(p,$)):(yi(p),p.flags&=-16777217):(h=h.memoizedProps,h!==S&&Kh(p),yi(p),VN(p,_,h,S,b)),null;case 27:if(je(p),b=Ae.current,_=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==S&&Kh(p);else{if(!S){if(p.stateNode===null)throw Error(r(166));return yi(p),null}h=re.current,ao(p)?$b(p):(h=R9(_,S,b),p.stateNode=h,Kh(p))}return yi(p),null;case 5:if(je(p),_=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==S&&Kh(p);else{if(!S){if(p.stateNode===null)throw Error(r(166));return yi(p),null}if($=re.current,ao(p))$b(p);else{var te=gC(Ae.current);switch($){case 1:$=te.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:$=te.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":$=te.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":$=te.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":$=te.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof S.is=="string"?te.createElement("select",{is:S.is}):te.createElement("select"),S.multiple?$.multiple=!0:S.size&&($.size=S.size);break;default:$=typeof S.is=="string"?te.createElement(_,{is:S.is}):te.createElement(_)}}$[Jn]=p,$[ns]=S;e:for(te=p.child;te!==null;){if(te.tag===5||te.tag===6)$.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===p)break e;for(;te.sibling===null;){if(te.return===null||te.return===p)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}p.stateNode=$;e:switch(il($,_,S),_){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&Kh(p)}}return yi(p),VN(p,p.type,h===null?null:h.memoizedProps,p.pendingProps,b),null;case 6:if(h&&p.stateNode!=null)h.memoizedProps!==S&&Kh(p);else{if(typeof S!="string"&&p.stateNode===null)throw Error(r(166));if(h=Ae.current,ao(p)){if(h=p.stateNode,b=p.memoizedProps,S=null,_=io,_!==null)switch(_.tag){case 27:case 5:S=_.memoizedProps}h[Jn]=p,h=!!(h.nodeValue===b||S!==null&&S.suppressHydrationWarning===!0||w9(h.nodeValue,b)),h||Of(p,!0)}else h=gC(h).createTextNode(S),h[Jn]=p,p.stateNode=h}return yi(p),null;case 31:if(b=p.memoizedState,h===null||h.memoizedState!==null){if(S=ao(p),b!==null){if(h===null){if(!S)throw Error(r(318));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(557));h[Jn]=p}else Qh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;yi(p),h=!1}else b=Pb(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=b),h=!0;if(!h)return p.flags&256?(js(p),p):(js(p),null);if((p.flags&128)!==0)throw Error(r(558))}return yi(p),null;case 13:if(S=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(_=ao(p),S!==null&&S.dehydrated!==null){if(h===null){if(!_)throw Error(r(318));if(_=p.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Jn]=p}else Qh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;yi(p),_=!1}else _=Pb(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=_),_=!0;if(!_)return p.flags&256?(js(p),p):(js(p),null)}return js(p),(p.flags&128)!==0?(p.lanes=b,p):(b=S!==null,h=h!==null&&h.memoizedState!==null,b&&(S=p.child,_=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(_=S.alternate.memoizedState.cachePool.pool),$=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&($=S.memoizedState.cachePool.pool),$!==_&&(S.flags|=2048)),b!==h&&b&&(p.child.flags|=8192),nC(p,p.updateQueue),yi(p),null);case 4:return me(),h===null&&AT(p.stateNode.containerInfo),yi(p),null;case 10:return bc(p.type),yi(p),null;case 19:if(Q(Vr),S=p.memoizedState,S===null)return yi(p),null;if(_=(p.flags&128)!==0,$=S.rendering,$===null)if(_)Yb(S,!1);else{if(ya!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if($=No(h),$!==null){for(p.flags|=128,Yb(S,!1),h=$.updateQueue,p.updateQueue=h,nC(p,h),p.subtreeFlags=0,h=b,b=p.child;b!==null;)Zm(b,h),b=b.sibling;return X(Vr,Vr.current&1|2),_r&&Ql(p,S.treeForkCount),p.child}h=h.sibling}S.tail!==null&&Ht()>oC&&(p.flags|=128,_=!0,Yb(S,!1),p.lanes=4194304)}else{if(!_)if(h=No($),h!==null){if(p.flags|=128,_=!0,h=h.updateQueue,p.updateQueue=h,nC(p,h),Yb(S,!0),S.tail===null&&S.tailMode==="hidden"&&!$.alternate&&!_r)return yi(p),null}else 2*Ht()-S.renderingStartTime>oC&&b!==536870912&&(p.flags|=128,_=!0,Yb(S,!1),p.lanes=4194304);S.isBackwards?($.sibling=p.child,p.child=$):(h=S.last,h!==null?h.sibling=$:p.child=$,S.last=$)}return S.tail!==null?(h=S.tail,S.rendering=h,S.tail=h.sibling,S.renderingStartTime=Ht(),h.sibling=null,b=Vr.current,X(Vr,_?b&1|2:b&1),_r&&Ql(p,S.treeForkCount),h):(yi(p),null);case 22:case 23:return js(p),Na(),S=p.memoizedState!==null,h!==null?h.memoizedState!==null!==S&&(p.flags|=8192):S&&(p.flags|=8192),S?(b&536870912)!==0&&(p.flags&128)===0&&(yi(p),p.subtreeFlags&6&&(p.flags|=8192)):yi(p),b=p.updateQueue,b!==null&&nC(p,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==b&&(p.flags|=2048),h!==null&&Q(de),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),bc(aa),yi(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function OAe(h,p){switch(iy(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return bc(aa),me(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return je(p),null;case 31:if(p.memoizedState!==null){if(js(p),p.alternate===null)throw Error(r(340));Qh()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 13:if(js(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Qh()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Q(Vr),null;case 4:return me(),null;case 10:return bc(p.type),null;case 22:case 23:return js(p),Na(),h!==null&&Q(de),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return bc(aa),null;case 25:return null;default:return null}}function jM(h,p){switch(iy(p),p.tag){case 3:bc(aa),me();break;case 26:case 27:case 5:je(p);break;case 4:me();break;case 31:p.memoizedState!==null&&js(p);break;case 13:js(p);break;case 19:Q(Vr);break;case 10:bc(p.type);break;case 22:case 23:js(p),Na(),h!==null&&Q(de);break;case 24:bc(aa)}}function Jb(h,p){try{var b=p.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var _=S.next;b=_;do{if((b.tag&h)===h){S=void 0;var $=b.create,te=b.inst;S=$(),te.destroy=S}b=b.next}while(b!==_)}}catch(he){Is(p,p.return,he)}}function Cp(h,p,b){try{var S=p.updateQueue,_=S!==null?S.lastEffect:null;if(_!==null){var $=_.next;S=$;do{if((S.tag&h)===h){var te=S.inst,he=te.destroy;if(he!==void 0){te.destroy=void 0,_=p;var Te=b,tt=he;try{tt()}catch(xt){Is(_,Te,xt)}}}S=S.next}while(S!==$)}}catch(xt){Is(p,p.return,xt)}}function EM(h){var p=h.updateQueue;if(p!==null){var b=h.stateNode;try{Aa(p,b)}catch(S){Is(h,h.return,S)}}}function IM(h,p,b){b.props=ag(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(S){Is(h,p,S)}}function Zb(h,p){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var S=h.stateNode;break;case 30:S=h.stateNode;break;default:S=h.stateNode}typeof b=="function"?h.refCleanup=b(S):b.current=S}}catch(_){Is(h,p,_)}}function Qf(h,p){var b=h.ref,S=h.refCleanup;if(b!==null)if(typeof S=="function")try{S()}catch(_){Is(h,p,_)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(_){Is(h,p,_)}else b.current=null}function NM(h){var p=h.type,b=h.memoizedProps,S=h.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&S.focus();break e;case"img":b.src?S.src=b.src:b.srcSet&&(S.srcset=b.srcSet)}}catch(_){Is(h,h.return,_)}}function qN(h,p,b){try{var S=h.stateNode;npe(S,h.type,b,p),S[ns]=p}catch(_){Is(h,h.return,_)}}function TM(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Tp(h.type)||h.tag===4}function GN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||TM(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Tp(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function KN(h,p,b){var S=h.tag;if(S===5||S===6)h=h.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(h),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=no));else if(S!==4&&(S===27&&Tp(h.type)&&(b=h.stateNode,p=null),h=h.child,h!==null))for(KN(h,p,b),h=h.sibling;h!==null;)KN(h,p,b),h=h.sibling}function rC(h,p,b){var S=h.tag;if(S===5||S===6)h=h.stateNode,p?b.insertBefore(h,p):b.appendChild(h);else if(S!==4&&(S===27&&Tp(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(rC(h,p,b),h=h.sibling;h!==null;)rC(h,p,b),h=h.sibling}function _M(h){var p=h.stateNode,b=h.memoizedProps;try{for(var S=h.type,_=p.attributes;_.length;)p.removeAttributeNode(_[0]);il(p,S,b),p[Jn]=h,p[ns]=b}catch($){Is(h,h.return,$)}}var Xh=!1,Qa=!1,XN=!1,RM=typeof WeakSet=="function"?WeakSet:Set,To=null;function FAe(h,p){if(h=h.containerInfo,gT=CC,h=Od(h),Fu(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var S=b.getSelection&&b.getSelection();if(S&&S.rangeCount!==0){b=S.anchorNode;var _=S.anchorOffset,$=S.focusNode;S=S.focusOffset;try{b.nodeType,$.nodeType}catch{b=null;break e}var te=0,he=-1,Te=-1,tt=0,xt=0,jt=h,rt=null;t:for(;;){for(var ct;jt!==b||_!==0&&jt.nodeType!==3||(he=te+_),jt!==$||S!==0&&jt.nodeType!==3||(Te=te+S),jt.nodeType===3&&(te+=jt.nodeValue.length),(ct=jt.firstChild)!==null;)rt=jt,jt=ct;for(;;){if(jt===h)break t;if(rt===b&&++tt===_&&(he=te),rt===$&&++xt===S&&(Te=te),(ct=jt.nextSibling)!==null)break;jt=rt,rt=jt.parentNode}jt=ct}b=he===-1||Te===-1?null:{start:he,end:Te}}else b=null}b=b||{start:0,end:0}}else b=null;for(yT={focusedElem:h,selectionRange:b},CC=!1,To=p;To!==null;)if(p=To,h=p.child,(p.subtreeFlags&1028)!==0&&h!==null)h.return=p,To=h;else for(;To!==null;){switch(p=To,$=p.alternate,h=p.flags,p.tag){case 0:if((h&4)!==0&&(h=p.updateQueue,h=h!==null?h.events:null,h!==null))for(b=0;b<h.length;b++)_=h[b],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&$!==null){h=void 0,b=p,_=$.memoizedProps,$=$.memoizedState,S=b.stateNode;try{var gn=ag(b.type,_);h=S.getSnapshotBeforeUpdate(gn,$),S.__reactInternalSnapshotBeforeUpdate=h}catch(Kn){Is(b,b.return,Kn)}}break;case 3:if((h&1024)!==0){if(h=p.stateNode.containerInfo,b=h.nodeType,b===9)vT(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":vT(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=p.sibling,h!==null){h.return=p.return,To=h;break}To=p.return}}function OM(h,p,b){var S=b.flags;switch(b.tag){case 0:case 11:case 15:Jh(h,b),S&4&&Jb(5,b);break;case 1:if(Jh(h,b),S&4)if(h=b.stateNode,p===null)try{h.componentDidMount()}catch(te){Is(b,b.return,te)}else{var _=ag(b.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(_,p,h.__reactInternalSnapshotBeforeUpdate)}catch(te){Is(b,b.return,te)}}S&64&&EM(b),S&512&&Zb(b,b.return);break;case 3:if(Jh(h,b),S&64&&(h=b.updateQueue,h!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Aa(h,p)}catch(te){Is(b,b.return,te)}}break;case 27:p===null&&S&4&&_M(b);case 26:case 5:Jh(h,b),p===null&&S&4&&NM(b),S&512&&Zb(b,b.return);break;case 12:Jh(h,b);break;case 31:Jh(h,b),S&4&&LM(h,b);break;case 13:Jh(h,b),S&4&&$M(h,b),S&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=HAe.bind(null,b),upe(h,b))));break;case 22:if(S=b.memoizedState!==null||Xh,!S){p=p!==null&&p.memoizedState!==null||Qa,_=Xh;var $=Qa;Xh=S,(Qa=p)&&!$?Zh(h,b,(b.subtreeFlags&8772)!==0):Jh(h,b),Xh=_,Qa=$}break;case 30:break;default:Jh(h,b)}}function FM(h){var p=h.alternate;p!==null&&(h.alternate=null,FM(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&da(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Di=null,wc=!1;function Yh(h,p,b){for(b=b.child;b!==null;)DM(h,p,b),b=b.sibling}function DM(h,p,b){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Fn,b)}catch{}switch(b.tag){case 26:Qa||Qf(b,p),Yh(h,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Qa||Qf(b,p);var S=Di,_=wc;Tp(b.type)&&(Di=b.stateNode,wc=!1),Yh(h,p,b),lv(b.stateNode),Di=S,wc=_;break;case 5:Qa||Qf(b,p);case 6:if(S=Di,_=wc,Di=null,Yh(h,p,b),Di=S,wc=_,Di!==null)if(wc)try{(Di.nodeType===9?Di.body:Di.nodeName==="HTML"?Di.ownerDocument.body:Di).removeChild(b.stateNode)}catch($){Is(b,p,$)}else try{Di.removeChild(b.stateNode)}catch($){Is(b,p,$)}break;case 18:Di!==null&&(wc?(h=Di,E9(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),Ny(h)):E9(Di,b.stateNode));break;case 4:S=Di,_=wc,Di=b.stateNode.containerInfo,wc=!0,Yh(h,p,b),Di=S,wc=_;break;case 0:case 11:case 14:case 15:Cp(2,b,p),Qa||Cp(4,b,p),Yh(h,p,b);break;case 1:Qa||(Qf(b,p),S=b.stateNode,typeof S.componentWillUnmount=="function"&&IM(b,p,S)),Yh(h,p,b);break;case 21:Yh(h,p,b);break;case 22:Qa=(S=Qa)||b.memoizedState!==null,Yh(h,p,b),Qa=S;break;default:Yh(h,p,b)}}function LM(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{Ny(h)}catch(b){Is(p,p.return,b)}}}function $M(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Ny(h)}catch(b){Is(p,p.return,b)}}function DAe(h){switch(h.tag){case 31:case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new RM),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new RM),p;default:throw Error(r(435,h.tag))}}function sC(h,p){var b=DAe(h);p.forEach(function(S){if(!b.has(S)){b.add(S);var _=WAe.bind(null,h,S);S.then(_,_)}})}function Sc(h,p){var b=p.deletions;if(b!==null)for(var S=0;S<b.length;S++){var _=b[S],$=h,te=p,he=te;e:for(;he!==null;){switch(he.tag){case 27:if(Tp(he.type)){Di=he.stateNode,wc=!1;break e}break;case 5:Di=he.stateNode,wc=!1;break e;case 3:case 4:Di=he.stateNode.containerInfo,wc=!0;break e}he=he.return}if(Di===null)throw Error(r(160));DM($,te,_),Di=null,wc=!1,$=_.alternate,$!==null&&($.return=null),_.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)PM(p,h),p=p.sibling}var Md=null;function PM(h,p){var b=h.alternate,S=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Sc(p,h),Cc(h),S&4&&(Cp(3,h,h.return),Jb(3,h),Cp(5,h,h.return));break;case 1:Sc(p,h),Cc(h),S&512&&(Qa||b===null||Qf(b,b.return)),S&64&&Xh&&(h=h.updateQueue,h!==null&&(S=h.callbacks,S!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?S:b.concat(S))));break;case 26:var _=Md;if(Sc(p,h),Cc(h),S&512&&(Qa||b===null||Qf(b,b.return)),S&4){var $=b!==null?b.memoizedState:null;if(S=h.memoizedState,b===null)if(S===null)if(h.stateNode===null){e:{S=h.type,b=h.memoizedProps,_=_.ownerDocument||_;t:switch(S){case"title":$=_.getElementsByTagName("title")[0],(!$||$[sr]||$[Jn]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=_.createElement(S),_.head.insertBefore($,_.querySelector("head > title"))),il($,S,b),$[Jn]=h,Ir($),S=$;break e;case"link":var te=P9("link","href",_).get(S+(b.href||""));if(te){for(var he=0;he<te.length;he++)if($=te[he],$.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&$.getAttribute("rel")===(b.rel==null?null:b.rel)&&$.getAttribute("title")===(b.title==null?null:b.title)&&$.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){te.splice(he,1);break t}}$=_.createElement(S),il($,S,b),_.head.appendChild($);break;case"meta":if(te=P9("meta","content",_).get(S+(b.content||""))){for(he=0;he<te.length;he++)if($=te[he],$.getAttribute("content")===(b.content==null?null:""+b.content)&&$.getAttribute("name")===(b.name==null?null:b.name)&&$.getAttribute("property")===(b.property==null?null:b.property)&&$.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&$.getAttribute("charset")===(b.charSet==null?null:b.charSet)){te.splice(he,1);break t}}$=_.createElement(S),il($,S,b),_.head.appendChild($);break;default:throw Error(r(468,S))}$[Jn]=h,Ir($),S=$}h.stateNode=S}else z9(_,h.type,h.stateNode);else h.stateNode=$9(_,S,h.memoizedProps);else $!==S?($===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):$.count--,S===null?z9(_,h.type,h.stateNode):$9(_,S,h.memoizedProps)):S===null&&h.stateNode!==null&&qN(h,h.memoizedProps,b.memoizedProps)}break;case 27:Sc(p,h),Cc(h),S&512&&(Qa||b===null||Qf(b,b.return)),b!==null&&S&4&&qN(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Sc(p,h),Cc(h),S&512&&(Qa||b===null||Qf(b,b.return)),h.flags&32){_=h.stateNode;try{el(_,"")}catch(gn){Is(h,h.return,gn)}}S&4&&h.stateNode!=null&&(_=h.memoizedProps,qN(h,_,b!==null?b.memoizedProps:_)),S&1024&&(XN=!0);break;case 6:if(Sc(p,h),Cc(h),S&4){if(h.stateNode===null)throw Error(r(162));S=h.memoizedProps,b=h.stateNode;try{b.nodeValue=S}catch(gn){Is(h,h.return,gn)}}break;case 3:if(bC=null,_=Md,Md=yC(p.containerInfo),Sc(p,h),Md=_,Cc(h),S&4&&b!==null&&b.memoizedState.isDehydrated)try{Ny(p.containerInfo)}catch(gn){Is(h,h.return,gn)}XN&&(XN=!1,zM(h));break;case 4:S=Md,Md=yC(h.stateNode.containerInfo),Sc(p,h),Cc(h),Md=S;break;case 12:Sc(p,h),Cc(h);break;case 31:Sc(p,h),Cc(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,sC(h,S)));break;case 13:Sc(p,h),Cc(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(aC=Ht()),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,sC(h,S)));break;case 22:_=h.memoizedState!==null;var Te=b!==null&&b.memoizedState!==null,tt=Xh,xt=Qa;if(Xh=tt||_,Qa=xt||Te,Sc(p,h),Qa=xt,Xh=tt,Cc(h),S&8192)e:for(p=h.stateNode,p._visibility=_?p._visibility&-2:p._visibility|1,_&&(b===null||Te||Xh||Qa||og(h)),b=null,p=h;;){if(p.tag===5||p.tag===26){if(b===null){Te=b=p;try{if($=Te.stateNode,_)te=$.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{he=Te.stateNode;var jt=Te.memoizedProps.style,rt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;he.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(gn){Is(Te,Te.return,gn)}}}else if(p.tag===6){if(b===null){Te=p;try{Te.stateNode.nodeValue=_?"":Te.memoizedProps}catch(gn){Is(Te,Te.return,gn)}}}else if(p.tag===18){if(b===null){Te=p;try{var ct=Te.stateNode;_?I9(ct,!0):I9(Te.stateNode,!1)}catch(gn){Is(Te,Te.return,gn)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}S&4&&(S=h.updateQueue,S!==null&&(b=S.retryQueue,b!==null&&(S.retryQueue=null,sC(h,b))));break;case 19:Sc(p,h),Cc(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,sC(h,S)));break;case 30:break;case 21:break;default:Sc(p,h),Cc(h)}}function Cc(h){var p=h.flags;if(p&2){try{for(var b,S=h.return;S!==null;){if(TM(S)){b=S;break}S=S.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var _=b.stateNode,$=GN(h);rC(h,$,_);break;case 5:var te=b.stateNode;b.flags&32&&(el(te,""),b.flags&=-33);var he=GN(h);rC(h,he,te);break;case 3:case 4:var Te=b.stateNode.containerInfo,tt=GN(h);KN(h,tt,Te);break;default:throw Error(r(161))}}catch(xt){Is(h,h.return,xt)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function zM(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;zM(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),h=h.sibling}}function Jh(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)OM(h,p.alternate,p),p=p.sibling}function og(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:Cp(4,p,p.return),og(p);break;case 1:Qf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&IM(p,p.return,b),og(p);break;case 27:lv(p.stateNode);case 26:case 5:Qf(p,p.return),og(p);break;case 22:p.memoizedState===null&&og(p);break;case 30:og(p);break;default:og(p)}h=h.sibling}}function Zh(h,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var S=p.alternate,_=h,$=p,te=$.flags;switch($.tag){case 0:case 11:case 15:Zh(_,$,b),Jb(4,$);break;case 1:if(Zh(_,$,b),S=$,_=S.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(tt){Is(S,S.return,tt)}if(S=$,_=S.updateQueue,_!==null){var he=S.stateNode;try{var Te=_.shared.hiddenCallbacks;if(Te!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Te.length;_++)Io(Te[_],he)}catch(tt){Is(S,S.return,tt)}}b&&te&64&&EM($),Zb($,$.return);break;case 27:_M($);case 26:case 5:Zh(_,$,b),b&&S===null&&te&4&&NM($),Zb($,$.return);break;case 12:Zh(_,$,b);break;case 31:Zh(_,$,b),b&&te&4&&LM(_,$);break;case 13:Zh(_,$,b),b&&te&4&&$M(_,$);break;case 22:$.memoizedState===null&&Zh(_,$,b),Zb($,$.return);break;case 30:break;default:Zh(_,$,b)}p=p.sibling}}function YN(h,p){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&ng(b))}function JN(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&ng(h))}function Qd(h,p,b,S){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)UM(h,p,b,S),p=p.sibling}function UM(h,p,b,S){var _=p.flags;switch(p.tag){case 0:case 11:case 15:Qd(h,p,b,S),_&2048&&Jb(9,p);break;case 1:Qd(h,p,b,S);break;case 3:Qd(h,p,b,S),_&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&ng(h)));break;case 12:if(_&2048){Qd(h,p,b,S),h=p.stateNode;try{var $=p.memoizedProps,te=$.id,he=$.onPostCommit;typeof he=="function"&&he(te,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Te){Is(p,p.return,Te)}}else Qd(h,p,b,S);break;case 31:Qd(h,p,b,S);break;case 13:Qd(h,p,b,S);break;case 23:break;case 22:$=p.stateNode,te=p.alternate,p.memoizedState!==null?$._visibility&2?Qd(h,p,b,S):ev(h,p):$._visibility&2?Qd(h,p,b,S):($._visibility|=2,xy(h,p,b,S,(p.subtreeFlags&10256)!==0||!1)),_&2048&&YN(te,p);break;case 24:Qd(h,p,b,S),_&2048&&JN(p.alternate,p);break;default:Qd(h,p,b,S)}}function xy(h,p,b,S,_){for(_=_&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var $=h,te=p,he=b,Te=S,tt=te.flags;switch(te.tag){case 0:case 11:case 15:xy($,te,he,Te,_),Jb(8,te);break;case 23:break;case 22:var xt=te.stateNode;te.memoizedState!==null?xt._visibility&2?xy($,te,he,Te,_):ev($,te):(xt._visibility|=2,xy($,te,he,Te,_)),_&&tt&2048&&YN(te.alternate,te);break;case 24:xy($,te,he,Te,_),_&&tt&2048&&JN(te.alternate,te);break;default:xy($,te,he,Te,_)}p=p.sibling}}function ev(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=h,S=p,_=S.flags;switch(S.tag){case 22:ev(b,S),_&2048&&YN(S.alternate,S);break;case 24:ev(b,S),_&2048&&JN(S.alternate,S);break;default:ev(b,S)}p=p.sibling}}var tv=8192;function by(h,p,b){if(h.subtreeFlags&tv)for(h=h.child;h!==null;)MM(h,p,b),h=h.sibling}function MM(h,p,b){switch(h.tag){case 26:by(h,p,b),h.flags&tv&&h.memoizedState!==null&&wpe(b,Md,h.memoizedState,h.memoizedProps);break;case 5:by(h,p,b);break;case 3:case 4:var S=Md;Md=yC(h.stateNode.containerInfo),by(h,p,b),Md=S;break;case 22:h.memoizedState===null&&(S=h.alternate,S!==null&&S.memoizedState!==null?(S=tv,tv=16777216,by(h,p,b),tv=S):by(h,p,b));break;default:by(h,p,b)}}function QM(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function nv(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var S=p[b];To=S,WM(S,h)}QM(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)HM(h),h=h.sibling}function HM(h){switch(h.tag){case 0:case 11:case 15:nv(h),h.flags&2048&&Cp(9,h,h.return);break;case 3:nv(h);break;case 12:nv(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&2&&(h.return===null||h.return.tag!==13)?(p._visibility&=-3,iC(h)):nv(h);break;default:nv(h)}}function iC(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var S=p[b];To=S,WM(S,h)}QM(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:Cp(8,p,p.return),iC(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,iC(p));break;default:iC(p)}h=h.sibling}}function WM(h,p){for(;To!==null;){var b=To;switch(b.tag){case 0:case 11:case 15:Cp(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var S=b.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:ng(b.memoizedState.cache)}if(S=b.child,S!==null)S.return=b,To=S;else e:for(b=h;To!==null;){S=To;var _=S.sibling,$=S.return;if(FM(S),S===b){To=null;break e}if(_!==null){_.return=$,To=_;break e}To=$}}}var LAe={getCacheForType:function(h){var p=oo(aa),b=p.data.get(h);return b===void 0&&(b=h(),p.data.set(h,b)),b},cacheSignal:function(){return oo(aa).controller.signal}},$Ae=typeof WeakMap=="function"?WeakMap:Map,ps=0,Js=null,Rr=null,Ur=0,Es=0,nu=null,kp=!1,vy=!1,ZN=!1,eA=0,ya=0,Bp=0,lg=0,eT=0,ru=0,wy=0,rv=null,kc=null,tT=!1,aC=0,VM=0,oC=1/0,lC=null,jp=null,co=0,Ep=null,Sy=null,tA=0,nT=0,rT=null,qM=null,sv=0,sT=null;function su(){return(ps&2)!==0&&Ur!==0?Ur&-Ur:q.T!==null?uT():Bt()}function GM(){if(ru===0)if((Ur&536870912)===0||_r){var h=Lt;Lt<<=1,(Lt&3932160)===0&&(Lt=262144),ru=h}else ru=536870912;return h=gi.current,h!==null&&(h.flags|=32),ru}function Bc(h,p,b){(h===Js&&(Es===2||Es===9)||h.cancelPendingCommit!==null)&&(Cy(h,0),Ip(h,Ur,ru,!1)),cn(h,b),((ps&2)===0||h!==Js)&&(h===Js&&((ps&2)===0&&(lg|=b),ya===4&&Ip(h,Ur,ru,!1)),Hf(h))}function KM(h,p,b){if((ps&6)!==0)throw Error(r(327));var S=!b&&(p&127)===0&&(p&h.expiredLanes)===0||pr(h,p),_=S?UAe(h,p):aT(h,p,!0),$=S;do{if(_===0){vy&&!S&&Ip(h,p,0,!1);break}else{if(b=h.current.alternate,$&&!PAe(b)){_=aT(h,p,!1),$=!1;continue}if(_===2){if($=p,h.errorRecoveryDisabledLanes&$)var te=0;else te=h.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){p=te;e:{var he=h;_=rv;var Te=he.current.memoizedState.isDehydrated;if(Te&&(Cy(he,te).flags|=256),te=aT(he,te,!1),te!==2){if(ZN&&!Te){he.errorRecoveryDisabledLanes|=$,lg|=$,_=4;break e}$=kc,kc=_,$!==null&&(kc===null?kc=$:kc.push.apply(kc,$))}_=te}if($=!1,_!==2)continue}}if(_===1){Cy(h,0),Ip(h,p,0,!0);break}e:{switch(S=h,$=_,$){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Ip(S,p,ru,!kp);break e;case 2:kc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(_=aC+300-Ht(),10<_)){if(Ip(S,p,ru,!kp),dt(S,0,!0)!==0)break e;tA=p,S.timeoutHandle=B9(XM.bind(null,S,b,kc,lC,tT,p,ru,lg,wy,kp,$,"Throttled",-0,0),_);break e}XM(S,b,kc,lC,tT,p,ru,lg,wy,kp,$,null,-0,0)}}break}while(!0);Hf(h)}function XM(h,p,b,S,_,$,te,he,Te,tt,xt,jt,rt,ct){if(h.timeoutHandle=-1,jt=p.subtreeFlags,jt&8192||(jt&16785408)===16785408){jt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:no},MM(p,$,jt);var gn=($&62914560)===$?aC-Ht():($&4194048)===$?VM-Ht():0;if(gn=Spe(jt,gn),gn!==null){tA=$,h.cancelPendingCommit=gn(s9.bind(null,h,p,$,b,S,_,te,he,Te,xt,jt,null,rt,ct)),Ip(h,$,te,!tt);return}}s9(h,p,$,b,S,_,te,he,Te)}function PAe(h){for(var p=h;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var S=0;S<b.length;S++){var _=b[S],$=_.getSnapshot;_=_.value;try{if(!ro($(),_))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ip(h,p,b,S){p&=~eT,p&=~lg,h.suspendedLanes|=p,h.pingedLanes&=~p,S&&(h.warmLanes|=p),S=h.expirationTimes;for(var _=p;0<_;){var $=31-ke(_),te=1<<$;S[$]=-1,_&=~te}b!==0&&Bs(h,b,p)}function cC(){return(ps&6)===0?(iv(0),!1):!0}function iT(){if(Rr!==null){if(Es===0)var h=Rr.return;else h=Rr,Lu=Ff=null,fy(h),It=null,bn=0,h=Rr;for(;h!==null;)jM(h.alternate,h),h=h.return;Rr=null}}function Cy(h,p){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,ipe(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),tA=0,iT(),Js=h,Rr=b=Ac(h.current,null),Ur=p,Es=0,nu=null,kp=!1,vy=pr(h,p),ZN=!1,wy=ru=eT=lg=Bp=ya=0,kc=rv=null,tT=!1,(p&8)!==0&&(p|=p&32);var S=h.entangledLanes;if(S!==0)for(h=h.entanglements,S&=p;0<S;){var _=31-ke(S),$=1<<_;p|=h[_],S&=~$}return eA=p,Xm(),b}function YM(h,p){$n=null,q.H=Kb,p===De||p===we?(p=vt(),Es=3):p===Ze?(p=vt(),Es=4):Es=p===LN?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,nu=p,Rr===null&&(ya=1,JS(h,pc(p,h.current)))}function JM(){var h=gi.current;return h===null?!0:(Ur&4194048)===Ur?Yr===null:(Ur&62914560)===Ur||(Ur&536870912)!==0?h===Yr:!1}function ZM(){var h=q.H;return q.H=Kb,h===null?Kb:h}function e9(){var h=q.A;return q.A=LAe,h}function uC(){ya=4,kp||(Ur&4194048)!==Ur&&gi.current!==null||(vy=!0),(Bp&134217727)===0&&(lg&134217727)===0||Js===null||Ip(Js,Ur,ru,!1)}function aT(h,p,b){var S=ps;ps|=2;var _=ZM(),$=e9();(Js!==h||Ur!==p)&&(lC=null,Cy(h,p)),p=!1;var te=ya;e:do try{if(Es!==0&&Rr!==null){var he=Rr,Te=nu;switch(Es){case 8:iT(),te=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(p=!0);var tt=Es;if(Es=0,nu=null,ky(h,he,Te,tt),b&&vy){te=0;break e}break;default:tt=Es,Es=0,nu=null,ky(h,he,Te,tt)}}zAe(),te=ya;break}catch(xt){YM(h,xt)}while(!0);return p&&h.shellSuspendCounter++,Lu=Ff=null,ps=S,q.H=_,q.A=$,Rr===null&&(Js=null,Ur=0,Xm()),te}function zAe(){for(;Rr!==null;)t9(Rr)}function UAe(h,p){var b=ps;ps|=2;var S=ZM(),_=e9();Js!==h||Ur!==p?(lC=null,oC=Ht()+500,Cy(h,p)):vy=pr(h,p);e:do try{if(Es!==0&&Rr!==null){p=Rr;var $=nu;t:switch(Es){case 1:Es=0,nu=null,ky(h,p,$,1);break;case 2:case 9:if(Ke($)){Es=0,nu=null,n9(p);break}p=function(){Es!==2&&Es!==9||Js!==h||(Es=7),Hf(h)},$.then(p,p);break e;case 3:Es=7;break e;case 4:Es=5;break e;case 7:Ke($)?(Es=0,nu=null,n9(p)):(Es=0,nu=null,ky(h,p,$,7));break;case 5:var te=null;switch(Rr.tag){case 26:te=Rr.memoizedState;case 5:case 27:var he=Rr;if(te?U9(te):he.stateNode.complete){Es=0,nu=null;var Te=he.sibling;if(Te!==null)Rr=Te;else{var tt=he.return;tt!==null?(Rr=tt,dC(tt)):Rr=null}break t}}Es=0,nu=null,ky(h,p,$,5);break;case 6:Es=0,nu=null,ky(h,p,$,6);break;case 8:iT(),ya=6;break e;default:throw Error(r(462))}}MAe();break}catch(xt){YM(h,xt)}while(!0);return Lu=Ff=null,q.H=S,q.A=_,ps=b,Rr!==null?0:(Js=null,Ur=0,Xm(),ya)}function MAe(){for(;Rr!==null&&!$t();)t9(Rr)}function t9(h){var p=kM(h.alternate,h,eA);h.memoizedProps=h.pendingProps,p===null?dC(h):Rr=p}function n9(h){var p=h,b=p.alternate;switch(p.tag){case 15:case 0:p=xM(b,p,p.pendingProps,p.type,void 0,Ur);break;case 11:p=xM(b,p,p.pendingProps,p.type.render,p.ref,Ur);break;case 5:fy(p);default:jM(b,p),p=Rr=Zm(p,eA),p=kM(b,p,eA)}h.memoizedProps=h.pendingProps,p===null?dC(h):Rr=p}function ky(h,p,b,S){Lu=Ff=null,fy(p),It=null,bn=0;var _=p.return;try{if(NAe(h,_,p,b,Ur)){ya=1,JS(h,pc(b,h.current)),Rr=null;return}}catch($){if(_!==null)throw Rr=_,$;ya=1,JS(h,pc(b,h.current)),Rr=null;return}p.flags&32768?(_r||S===1?h=!0:vy||(Ur&536870912)!==0?h=!1:(kp=h=!0,(S===2||S===9||S===3||S===6)&&(S=gi.current,S!==null&&S.tag===13&&(S.flags|=16384))),r9(p,h)):dC(p)}function dC(h){var p=h;do{if((p.flags&32768)!==0){r9(p,kp);return}h=p.return;var b=RAe(p.alternate,p,eA);if(b!==null){Rr=b;return}if(p=p.sibling,p!==null){Rr=p;return}Rr=p=h}while(p!==null);ya===0&&(ya=5)}function r9(h,p){do{var b=OAe(h.alternate,h);if(b!==null){b.flags&=32767,Rr=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(h=h.sibling,h!==null)){Rr=h;return}Rr=h=b}while(h!==null);ya=6,Rr=null}function s9(h,p,b,S,_,$,te,he,Te){h.cancelPendingCommit=null;do fC();while(co!==0);if((ps&6)!==0)throw Error(r(327));if(p!==null){if(p===h.current)throw Error(r(177));if($=p.lanes|p.childLanes,$|=J0,Ji(h,b,$,te,he,Te),h===Js&&(Rr=Js=null,Ur=0),Sy=p,Ep=h,tA=b,nT=$,rT=_,qM=S,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,VAe(fn,function(){return c9(),null})):(h.callbackNode=null,h.callbackPriority=0),S=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||S){S=q.T,q.T=null,_=Z.p,Z.p=2,te=ps,ps|=4;try{FAe(h,p,b)}finally{ps=te,Z.p=_,q.T=S}}co=1,i9(),a9(),o9()}}function i9(){if(co===1){co=0;var h=Ep,p=Sy,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=q.T,q.T=null;var S=Z.p;Z.p=2;var _=ps;ps|=4;try{PM(p,h);var $=yT,te=Od(h.containerInfo),he=$.focusedElem,Te=$.selectionRange;if(te!==he&&he&&he.ownerDocument&&Rd(he.ownerDocument.documentElement,he)){if(Te!==null&&Fu(he)){var tt=Te.start,xt=Te.end;if(xt===void 0&&(xt=tt),"selectionStart"in he)he.selectionStart=tt,he.selectionEnd=Math.min(xt,he.value.length);else{var jt=he.ownerDocument||document,rt=jt&&jt.defaultView||window;if(rt.getSelection){var ct=rt.getSelection(),gn=he.textContent.length,Kn=Math.min(Te.start,gn),Qs=Te.end===void 0?Kn:Math.min(Te.end,gn);!ct.extend&&Kn>Qs&&(te=Qs,Qs=Kn,Kn=te);var We=hp(he,Kn),Ue=hp(he,Qs);if(We&&Ue&&(ct.rangeCount!==1||ct.anchorNode!==We.node||ct.anchorOffset!==We.offset||ct.focusNode!==Ue.node||ct.focusOffset!==Ue.offset)){var et=jt.createRange();et.setStart(We.node,We.offset),ct.removeAllRanges(),Kn>Qs?(ct.addRange(et),ct.extend(Ue.node,Ue.offset)):(et.setEnd(Ue.node,Ue.offset),ct.addRange(et))}}}}for(jt=[],ct=he;ct=ct.parentNode;)ct.nodeType===1&&jt.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<jt.length;he++){var wt=jt[he];wt.element.scrollLeft=wt.left,wt.element.scrollTop=wt.top}}CC=!!gT,yT=gT=null}finally{ps=_,Z.p=S,q.T=b}}h.current=p,co=2}}function a9(){if(co===2){co=0;var h=Ep,p=Sy,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=q.T,q.T=null;var S=Z.p;Z.p=2;var _=ps;ps|=4;try{OM(h,p.alternate,p)}finally{ps=_,Z.p=S,q.T=b}}co=3}}function o9(){if(co===4||co===3){co=0,kt();var h=Ep,p=Sy,b=tA,S=qM;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?co=5:(co=0,Sy=Ep=null,l9(h,h.pendingLanes));var _=h.pendingLanes;if(_===0&&(jp=null),Er(b),p=p.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Fn,p,void 0,(p.current.flags&128)===128)}catch{}if(S!==null){p=q.T,_=Z.p,Z.p=2,q.T=null;try{for(var $=h.onRecoverableError,te=0;te<S.length;te++){var he=S[te];$(he.value,{componentStack:he.stack})}}finally{q.T=p,Z.p=_}}(tA&3)!==0&&fC(),Hf(h),_=h.pendingLanes,(b&261930)!==0&&(_&42)!==0?h===sT?sv++:(sv=0,sT=h):sv=0,iv(0)}}function l9(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,ng(p)))}function fC(){return i9(),a9(),o9(),c9()}function c9(){if(co!==5)return!1;var h=Ep,p=nT;nT=0;var b=Er(tA),S=q.T,_=Z.p;try{Z.p=32>b?32:b,q.T=null,b=rT,rT=null;var $=Ep,te=tA;if(co=0,Sy=Ep=null,tA=0,(ps&6)!==0)throw Error(r(331));var he=ps;if(ps|=4,HM($.current),UM($,$.current,te,b),ps=he,iv(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Fn,$)}catch{}return!0}finally{Z.p=_,q.T=S,l9(h,p)}}function u9(h,p,b){p=pc(b,p),p=DN(h.stateNode,p,2),h=lr(h,p,2),h!==null&&(cn(h,2),Hf(h))}function Is(h,p,b){if(h.tag===3)u9(h,h,b);else for(;p!==null;){if(p.tag===3){u9(p,h,b);break}else if(p.tag===1){var S=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(jp===null||!jp.has(S))){h=pc(b,h),b=dM(2),S=lr(p,b,2),S!==null&&(fM(b,S,p,h),cn(S,2),Hf(S));break}}p=p.return}}function oT(h,p,b){var S=h.pingCache;if(S===null){S=h.pingCache=new $Ae;var _=new Set;S.set(p,_)}else _=S.get(p),_===void 0&&(_=new Set,S.set(p,_));_.has(b)||(ZN=!0,_.add(b),h=QAe.bind(null,h,p,b),p.then(h,h))}function QAe(h,p,b){var S=h.pingCache;S!==null&&S.delete(p),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Js===h&&(Ur&b)===b&&(ya===4||ya===3&&(Ur&62914560)===Ur&&300>Ht()-aC?(ps&2)===0&&Cy(h,0):eT|=b,wy===Ur&&(wy=0)),Hf(h)}function d9(h,p){p===0&&(p=Hn()),h=Dd(h,p),h!==null&&(cn(h,p),Hf(h))}function HAe(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),d9(h,b)}function WAe(h,p){var b=0;switch(h.tag){case 31:case 13:var S=h.stateNode,_=h.memoizedState;_!==null&&(b=_.retryLane);break;case 19:S=h.stateNode;break;case 22:S=h.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(p),d9(h,b)}function VAe(h,p){return ht(h,p)}var hC=null,By=null,lT=!1,AC=!1,cT=!1,Np=0;function Hf(h){h!==By&&h.next===null&&(By===null?hC=By=h:By=By.next=h),AC=!0,lT||(lT=!0,GAe())}function iv(h,p){if(!cT&&AC){cT=!0;do for(var b=!1,S=hC;S!==null;){if(h!==0){var _=S.pendingLanes;if(_===0)var $=0;else{var te=S.suspendedLanes,he=S.pingedLanes;$=(1<<31-ke(42|h)+1)-1,$&=_&~(te&~he),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(b=!0,p9(S,$))}else $=Ur,$=dt(S,S===Js?$:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),($&3)===0||pr(S,$)||(b=!0,p9(S,$));S=S.next}while(b);cT=!1}}function qAe(){f9()}function f9(){AC=lT=!1;var h=0;Np!==0&&spe()&&(h=Np);for(var p=Ht(),b=null,S=hC;S!==null;){var _=S.next,$=h9(S,p);$===0?(S.next=null,b===null?hC=_:b.next=_,_===null&&(By=b)):(b=S,(h!==0||($&3)!==0)&&(AC=!0)),S=_}co!==0&&co!==5||iv(h),Np!==0&&(Np=0)}function h9(h,p){for(var b=h.suspendedLanes,S=h.pingedLanes,_=h.expirationTimes,$=h.pendingLanes&-62914561;0<$;){var te=31-ke($),he=1<<te,Te=_[te];Te===-1?((he&b)===0||(he&S)!==0)&&(_[te]=Kr(he,p)):Te<=p&&(h.expiredLanes|=he),$&=~he}if(p=Js,b=Ur,b=dt(h,h===p?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S=h.callbackNode,b===0||h===p&&(Es===2||Es===9)||h.cancelPendingCommit!==null)return S!==null&&S!==null&&ot(S),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||pr(h,b)){if(p=b&-b,p===h.callbackPriority)return p;switch(S!==null&&ot(S),Er(b)){case 2:case 8:b=en;break;case 32:b=fn;break;case 268435456:b=rn;break;default:b=fn}return S=A9.bind(null,h),b=ht(b,S),h.callbackPriority=p,h.callbackNode=b,p}return S!==null&&S!==null&&ot(S),h.callbackPriority=2,h.callbackNode=null,2}function A9(h,p){if(co!==0&&co!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(fC()&&h.callbackNode!==b)return null;var S=Ur;return S=dt(h,h===Js?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S===0?null:(KM(h,S,p),h9(h,Ht()),h.callbackNode!=null&&h.callbackNode===b?A9.bind(null,h):null)}function p9(h,p){if(fC())return null;KM(h,p,!0)}function GAe(){ape(function(){(ps&6)!==0?ht(Ut,qAe):f9()})}function uT(){if(Np===0){var h=E;h===0&&(h=_t,_t<<=1,(_t&261888)===0&&(_t=256)),Np=h}return Np}function m9(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:di(""+h)}function g9(h,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,h.id&&b.setAttribute("form",h.id),p.parentNode.insertBefore(b,p),h=new FormData(h),b.parentNode.removeChild(b),h}function KAe(h,p,b,S,_){if(p==="submit"&&b&&b.stateNode===_){var $=m9((_[ns]||null).action),te=S.submitter;te&&(p=(p=te[ns]||null)?m9(p.formAction):te.getAttribute("formAction"),p!==null&&($=p,te=null));var he=new Nr("action","action",null,S,_);h.push({event:he,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Np!==0){var Te=te?g9(_,te):new FormData(_);NN(b,{pending:!0,data:Te,method:_.method,action:$},null,Te)}}else typeof $=="function"&&(he.preventDefault(),Te=te?g9(_,te):new FormData(_),NN(b,{pending:!0,data:Te,method:_.method,action:$},$,Te))},currentTarget:_}]})}}for(var dT=0;dT<zh.length;dT++){var fT=zh[dT],XAe=fT.toLowerCase(),YAe=fT[0].toUpperCase()+fT.slice(1);hc(XAe,"on"+YAe)}hc(Ph,"onAnimationEnd"),hc(Gm,"onAnimationIteration"),hc(Ob,"onAnimationStart"),hc("dblclick","onDoubleClick"),hc("focusin","onFocus"),hc("focusout","onBlur"),hc(PS,"onTransitionRun"),hc(zS,"onTransitionStart"),hc(US,"onTransitionCancel"),hc(Fb,"onTransitionEnd"),gt("onMouseEnter",["mouseout","mouseover"]),gt("onMouseLeave",["mouseout","mouseover"]),gt("onPointerEnter",["pointerout","pointerover"]),gt("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var av="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(av));function y9(h,p){p=(p&4)!==0;for(var b=0;b<h.length;b++){var S=h[b],_=S.event;S=S.listeners;e:{var $=void 0;if(p)for(var te=S.length-1;0<=te;te--){var he=S[te],Te=he.instance,tt=he.currentTarget;if(he=he.listener,Te!==$&&_.isPropagationStopped())break e;$=he,_.currentTarget=tt;try{$(_)}catch(xt){Km(xt)}_.currentTarget=null,$=Te}else for(te=0;te<S.length;te++){if(he=S[te],Te=he.instance,tt=he.currentTarget,he=he.listener,Te!==$&&_.isPropagationStopped())break e;$=he,_.currentTarget=tt;try{$(_)}catch(xt){Km(xt)}_.currentTarget=null,$=Te}}}}function Or(h,p){var b=p[ft];b===void 0&&(b=p[ft]=new Set);var S=h+"__bubble";b.has(S)||(x9(p,h,2,!1),b.add(S))}function hT(h,p,b){var S=0;p&&(S|=4),x9(b,h,S,p)}var pC="_reactListening"+Math.random().toString(36).slice(2);function AT(h){if(!h[pC]){h[pC]=!0,si.forEach(function(b){b!=="selectionchange"&&(JAe.has(b)||hT(b,!1,h),hT(b,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[pC]||(p[pC]=!0,hT("selectionchange",!1,p))}}function x9(h,p,b,S){switch(G9(p)){case 2:var _=Bpe;break;case 8:_=jpe;break;default:_=IT}b=_.bind(null,p,b,h),_=void 0,!kd||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(_=!0),S?_!==void 0?h.addEventListener(p,b,{capture:!0,passive:_}):h.addEventListener(p,b,!0):_!==void 0?h.addEventListener(p,b,{passive:_}):h.addEventListener(p,b,!1)}function pT(h,p,b,S,_){var $=S;if((p&1)===0&&(p&2)===0&&S!==null)e:for(;;){if(S===null)return;var te=S.tag;if(te===3||te===4){var he=S.stateNode.containerInfo;if(he===_)break;if(te===4)for(te=S.return;te!==null;){var Te=te.tag;if((Te===3||Te===4)&&te.stateNode.containerInfo===_)return;te=te.return}for(;he!==null;){if(te=Hr(he),te===null)return;if(Te=te.tag,Te===5||Te===6||Te===26||Te===27){S=$=te;continue e}he=he.parentNode}}S=S.return}Eu(function(){var tt=$,xt=mn(b),jt=[];e:{var rt=Db.get(h);if(rt!==void 0){var ct=Nr,gn=h;switch(h){case"keypress":if(Ge(b)===0)break e;case"keydown":case"keyup":ct=Tr;break;case"focusin":gn="focus",ct=Xc;break;case"focusout":gn="blur",ct=Xc;break;case"beforeblur":case"afterblur":ct=Xc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=na;break;case Ph:case Gm:case Ob:ct=M;break;case Fb:ct=fa;break;case"scroll":case"scrollend":ct=Bd;break;case"wheel":ct=$l;break;case"copy":case"cut":case"paste":ct=Se;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=hi;break;case"toggle":case"beforetoggle":ct=Nu}var Kn=(p&4)!==0,Qs=!Kn&&(h==="scroll"||h==="scrollend"),We=Kn?rt!==null?rt+"Capture":null:rt;Kn=[];for(var Ue=tt,et;Ue!==null;){var wt=Ue;if(et=wt.stateNode,wt=wt.tag,wt!==5&&wt!==26&&wt!==27||et===null||We===null||(wt=Ni(Ue,We),wt!=null&&Kn.push(ov(Ue,wt,et))),Qs)break;Ue=Ue.return}0<Kn.length&&(rt=new ct(rt,gn,null,b,xt),jt.push({event:rt,listeners:Kn}))}}if((p&7)===0){e:{if(rt=h==="mouseover"||h==="pointerover",ct=h==="mouseout"||h==="pointerout",rt&&b!==Vc&&(gn=b.relatedTarget||b.fromElement)&&(Hr(gn)||gn[ji]))break e;if((ct||rt)&&(rt=xt.window===xt?xt:(rt=xt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ct?(gn=b.relatedTarget||b.toElement,ct=tt,gn=gn?Hr(gn):null,gn!==null&&(Qs=i(gn),Kn=gn.tag,gn!==Qs||Kn!==5&&Kn!==27&&Kn!==6)&&(gn=null)):(ct=null,gn=tt),ct!==gn)){if(Kn=Lh,wt="onMouseLeave",We="onMouseEnter",Ue="mouse",(h==="pointerout"||h==="pointerover")&&(Kn=hi,wt="onPointerLeave",We="onPointerEnter",Ue="pointer"),Qs=ct==null?rt:zr(ct),et=gn==null?rt:zr(gn),rt=new Kn(wt,Ue+"leave",ct,b,xt),rt.target=Qs,rt.relatedTarget=et,wt=null,Hr(xt)===tt&&(Kn=new Kn(We,Ue+"enter",gn,b,xt),Kn.target=et,Kn.relatedTarget=Qs,wt=Kn),Qs=wt,ct&&gn)t:{for(Kn=ZAe,We=ct,Ue=gn,et=0,wt=We;wt;wt=Kn(wt))et++;wt=0;for(var Un=Ue;Un;Un=Kn(Un))wt++;for(;0<et-wt;)We=Kn(We),et--;for(;0<wt-et;)Ue=Kn(Ue),wt--;for(;et--;){if(We===Ue||Ue!==null&&We===Ue.alternate){Kn=We;break t}We=Kn(We),Ue=Kn(Ue)}Kn=null}else Kn=null;ct!==null&&b9(jt,rt,ct,Kn,!1),gn!==null&&Qs!==null&&b9(jt,Qs,gn,Kn,!0)}}e:{if(rt=tt?zr(tt):window,ct=rt.nodeName&&rt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&rt.type==="file")var us=Tf;else if(Id(rt))if(pl)us=Ru;else{us=sa;var In=dp}else ct=rt.nodeName,!ct||ct.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?tt&&Ll(tt.elementType)&&(us=Tf):us=Y0;if(us&&(us=us(h,tt))){ra(jt,us,b,xt);break e}In&&In(h,rt,tt),h==="focusout"&&tt&&rt.type==="number"&&tt.memoizedProps.value!=null&&Fh(rt,"number",rt.value)}switch(In=tt?zr(tt):window,h){case"focusin":(Id(In)||In.contentEditable==="true")&&(Ul=In,Fd=tt,Bo=null);break;case"focusout":Bo=Fd=Ul=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,ss(jt,b,xt);break;case"selectionchange":if($h)break;case"keydown":case"keyup":ss(jt,b,xt)}var dr;if(Pl)e:{switch(h){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else _i?Mn(h,b)&&(Mr="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(Mr="onCompositionStart");Mr&&(St&&b.locale!=="ko"&&(_i||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&_i&&(dr=Re()):(V=xt,se="value"in V?V.value:V.textContent,_i=!0)),In=mC(tt,Mr),0<In.length&&(Mr=new Qe(Mr,h,null,b,xt),jt.push({event:Mr,listeners:In}),dr?Mr.data=dr:(dr=Sr(b),dr!==null&&(Mr.data=dr)))),(dr=qe?bs(h,b):Ai(h,b))&&(Mr=mC(tt,"onBeforeInput"),0<Mr.length&&(In=new Qe("onBeforeInput","beforeinput",null,b,xt),jt.push({event:In,listeners:Mr}),In.data=dr)),KAe(jt,h,tt,b,xt)}y9(jt,p)})}function ov(h,p,b){return{instance:h,listener:p,currentTarget:b}}function mC(h,p){for(var b=p+"Capture",S=[];h!==null;){var _=h,$=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||$===null||(_=Ni(h,b),_!=null&&S.unshift(ov(h,_,$)),_=Ni(h,p),_!=null&&S.push(ov(h,_,$))),h.tag===3)return S;h=h.return}return[]}function ZAe(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function b9(h,p,b,S,_){for(var $=p._reactName,te=[];b!==null&&b!==S;){var he=b,Te=he.alternate,tt=he.stateNode;if(he=he.tag,Te!==null&&Te===S)break;he!==5&&he!==26&&he!==27||tt===null||(Te=tt,_?(tt=Ni(b,$),tt!=null&&te.unshift(ov(b,tt,Te))):_||(tt=Ni(b,$),tt!=null&&te.push(ov(b,tt,Te)))),b=b.return}te.length!==0&&h.push({event:p,listeners:te})}var epe=/\r\n?/g,tpe=/\u0000|\uFFFD/g;function v9(h){return(typeof h=="string"?h:""+h).replace(epe,`
`).replace(tpe,"")}function w9(h,p){return p=v9(p),v9(h)===p}function Ms(h,p,b,S,_,$){switch(b){case"children":typeof S=="string"?p==="body"||p==="textarea"&&S===""||el(h,S):(typeof S=="number"||typeof S=="bigint")&&p!=="body"&&el(h,""+S);break;case"className":Co(h,"class",S);break;case"tabIndex":Co(h,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Co(h,b,S);break;case"style":Sd(h,S,$);break;case"data":if(p!=="object"){Co(h,"data",S);break}case"src":case"href":if(S===""&&(p!=="a"||b!=="href")){h.removeAttribute(b);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(b);break}S=di(""+S),h.setAttribute(b,S);break;case"action":case"formAction":if(typeof S=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(b==="formAction"?(p!=="input"&&Ms(h,p,"name",_.name,_,null),Ms(h,p,"formEncType",_.formEncType,_,null),Ms(h,p,"formMethod",_.formMethod,_,null),Ms(h,p,"formTarget",_.formTarget,_,null)):(Ms(h,p,"encType",_.encType,_,null),Ms(h,p,"method",_.method,_,null),Ms(h,p,"target",_.target,_,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(b);break}S=di(""+S),h.setAttribute(b,S);break;case"onClick":S!=null&&(h.onclick=no);break;case"onScroll":S!=null&&Or("scroll",h);break;case"onScrollEnd":S!=null&&Or("scrollend",h);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(b=S.__html,b!=null){if(_.children!=null)throw Error(r(60));h.innerHTML=b}}break;case"multiple":h.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":h.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){h.removeAttribute("xlink:href");break}b=di(""+S),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,""+S):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":S===!0?h.setAttribute(b,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,S):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?h.setAttribute(b,S):h.removeAttribute(b);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?h.removeAttribute(b):h.setAttribute(b,S);break;case"popover":Or("beforetoggle",h),Or("toggle",h),ci(h,"popover",S);break;case"xlinkActuate":Ei(h,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Ei(h,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Ei(h,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Ei(h,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Ei(h,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Ei(h,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Ei(h,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Ei(h,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Ei(h,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":ci(h,"is",S);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Cd.get(b)||b,ci(h,b,S))}}function mT(h,p,b,S,_,$){switch(b){case"style":Sd(h,S,$);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(b=S.__html,b!=null){if(_.children!=null)throw Error(r(60));h.innerHTML=b}}break;case"children":typeof S=="string"?el(h,S):(typeof S=="number"||typeof S=="bigint")&&el(h,""+S);break;case"onScroll":S!=null&&Or("scroll",h);break;case"onScrollEnd":S!=null&&Or("scrollend",h);break;case"onClick":S!=null&&(h.onclick=no);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rs.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(_=b.endsWith("Capture"),p=b.slice(2,_?b.length-7:void 0),$=h[ns]||null,$=$!=null?$[b]:null,typeof $=="function"&&h.removeEventListener(p,$,_),typeof S=="function")){typeof $!="function"&&$!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(p,S,_);break e}b in h?h[b]=S:S===!0?h.setAttribute(b,""):ci(h,b,S)}}}function il(h,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",h),Or("load",h);var S=!1,_=!1,$;for($ in b)if(b.hasOwnProperty($)){var te=b[$];if(te!=null)switch($){case"src":S=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ms(h,p,$,te,b,null)}}_&&Ms(h,p,"srcSet",b.srcSet,b,null),S&&Ms(h,p,"src",b.src,b,null);return;case"input":Or("invalid",h);var he=$=te=_=null,Te=null,tt=null;for(S in b)if(b.hasOwnProperty(S)){var xt=b[S];if(xt!=null)switch(S){case"name":_=xt;break;case"type":te=xt;break;case"checked":Te=xt;break;case"defaultChecked":tt=xt;break;case"value":$=xt;break;case"defaultValue":he=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(r(137,p));break;default:Ms(h,p,S,xt,b,null)}}Oh(h,$,he,Te,tt,te,_,!1);return;case"select":Or("invalid",h),S=te=$=null;for(_ in b)if(b.hasOwnProperty(_)&&(he=b[_],he!=null))switch(_){case"value":$=he;break;case"defaultValue":te=he;break;case"multiple":S=he;default:Ms(h,p,_,he,b,null)}p=$,b=te,h.multiple=!!S,p!=null?Ea(h,!!S,p,!1):b!=null&&Ea(h,!!S,b,!0);return;case"textarea":Or("invalid",h),$=_=S=null;for(te in b)if(b.hasOwnProperty(te)&&(he=b[te],he!=null))switch(te){case"value":S=he;break;case"defaultValue":_=he;break;case"children":$=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(91));break;default:Ms(h,p,te,he,b,null)}bd(h,S,_,$);return;case"option":for(Te in b)b.hasOwnProperty(Te)&&(S=b[Te],S!=null)&&(Te==="selected"?h.selected=S&&typeof S!="function"&&typeof S!="symbol":Ms(h,p,Te,S,b,null));return;case"dialog":Or("beforetoggle",h),Or("toggle",h),Or("cancel",h),Or("close",h);break;case"iframe":case"object":Or("load",h);break;case"video":case"audio":for(S=0;S<av.length;S++)Or(av[S],h);break;case"image":Or("error",h),Or("load",h);break;case"details":Or("toggle",h);break;case"embed":case"source":case"link":Or("error",h),Or("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in b)if(b.hasOwnProperty(tt)&&(S=b[tt],S!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ms(h,p,tt,S,b,null)}return;default:if(Ll(p)){for(xt in b)b.hasOwnProperty(xt)&&(S=b[xt],S!==void 0&&mT(h,p,xt,S,b,void 0));return}}for(he in b)b.hasOwnProperty(he)&&(S=b[he],S!=null&&Ms(h,p,he,S,b,null))}function npe(h,p,b,S){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,$=null,te=null,he=null,Te=null,tt=null,xt=null;for(ct in b){var jt=b[ct];if(b.hasOwnProperty(ct)&&jt!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":Te=jt;default:S.hasOwnProperty(ct)||Ms(h,p,ct,null,S,jt)}}for(var rt in S){var ct=S[rt];if(jt=b[rt],S.hasOwnProperty(rt)&&(ct!=null||jt!=null))switch(rt){case"type":$=ct;break;case"name":_=ct;break;case"checked":tt=ct;break;case"defaultChecked":xt=ct;break;case"value":te=ct;break;case"defaultValue":he=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(r(137,p));break;default:ct!==jt&&Ms(h,p,rt,ct,S,jt)}}cc(h,te,he,Te,tt,xt,$,_);return;case"select":ct=te=he=rt=null;for($ in b)if(Te=b[$],b.hasOwnProperty($)&&Te!=null)switch($){case"value":break;case"multiple":ct=Te;default:S.hasOwnProperty($)||Ms(h,p,$,null,S,Te)}for(_ in S)if($=S[_],Te=b[_],S.hasOwnProperty(_)&&($!=null||Te!=null))switch(_){case"value":rt=$;break;case"defaultValue":he=$;break;case"multiple":te=$;default:$!==Te&&Ms(h,p,_,$,S,Te)}p=he,b=te,S=ct,rt!=null?Ea(h,!!b,rt,!1):!!S!=!!b&&(p!=null?Ea(h,!!b,p,!0):Ea(h,!!b,b?[]:"",!1));return;case"textarea":ct=rt=null;for(he in b)if(_=b[he],b.hasOwnProperty(he)&&_!=null&&!S.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Ms(h,p,he,null,S,_)}for(te in S)if(_=S[te],$=b[te],S.hasOwnProperty(te)&&(_!=null||$!=null))switch(te){case"value":rt=_;break;case"defaultValue":ct=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==$&&Ms(h,p,te,_,S,$)}If(h,rt,ct);return;case"option":for(var gn in b)rt=b[gn],b.hasOwnProperty(gn)&&rt!=null&&!S.hasOwnProperty(gn)&&(gn==="selected"?h.selected=!1:Ms(h,p,gn,null,S,rt));for(Te in S)rt=S[Te],ct=b[Te],S.hasOwnProperty(Te)&&rt!==ct&&(rt!=null||ct!=null)&&(Te==="selected"?h.selected=rt&&typeof rt!="function"&&typeof rt!="symbol":Ms(h,p,Te,rt,S,ct));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kn in b)rt=b[Kn],b.hasOwnProperty(Kn)&&rt!=null&&!S.hasOwnProperty(Kn)&&Ms(h,p,Kn,null,S,rt);for(tt in S)if(rt=S[tt],ct=b[tt],S.hasOwnProperty(tt)&&rt!==ct&&(rt!=null||ct!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,p));break;default:Ms(h,p,tt,rt,S,ct)}return;default:if(Ll(p)){for(var Qs in b)rt=b[Qs],b.hasOwnProperty(Qs)&&rt!==void 0&&!S.hasOwnProperty(Qs)&&mT(h,p,Qs,void 0,S,rt);for(xt in S)rt=S[xt],ct=b[xt],!S.hasOwnProperty(xt)||rt===ct||rt===void 0&&ct===void 0||mT(h,p,xt,rt,S,ct);return}}for(var We in b)rt=b[We],b.hasOwnProperty(We)&&rt!=null&&!S.hasOwnProperty(We)&&Ms(h,p,We,null,S,rt);for(jt in S)rt=S[jt],ct=b[jt],!S.hasOwnProperty(jt)||rt===ct||rt==null&&ct==null||Ms(h,p,jt,rt,S,ct)}function S9(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rpe(){if(typeof performance.getEntriesByType=="function"){for(var h=0,p=0,b=performance.getEntriesByType("resource"),S=0;S<b.length;S++){var _=b[S],$=_.transferSize,te=_.initiatorType,he=_.duration;if($&&he&&S9(te)){for(te=0,he=_.responseEnd,S+=1;S<b.length;S++){var Te=b[S],tt=Te.startTime;if(tt>he)break;var xt=Te.transferSize,jt=Te.initiatorType;xt&&S9(jt)&&(Te=Te.responseEnd,te+=xt*(Te<he?1:(he-tt)/(Te-tt)))}if(--S,p+=8*($+te)/(_.duration/1e3),h++,10<h)break}}if(0<h)return p/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var gT=null,yT=null;function gC(h){return h.nodeType===9?h:h.ownerDocument}function C9(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k9(h,p){if(h===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&p==="foreignObject"?0:h}function xT(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var bT=null;function spe(){var h=window.event;return h&&h.type==="popstate"?h===bT?!1:(bT=h,!0):(bT=null,!1)}var B9=typeof setTimeout=="function"?setTimeout:void 0,ipe=typeof clearTimeout=="function"?clearTimeout:void 0,j9=typeof Promise=="function"?Promise:void 0,ape=typeof queueMicrotask=="function"?queueMicrotask:typeof j9<"u"?function(h){return j9.resolve(null).then(h).catch(ope)}:B9;function ope(h){setTimeout(function(){throw h})}function Tp(h){return h==="head"}function E9(h,p){var b=p,S=0;do{var _=b.nextSibling;if(h.removeChild(b),_&&_.nodeType===8)if(b=_.data,b==="/$"||b==="/&"){if(S===0){h.removeChild(_),Ny(p);return}S--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")S++;else if(b==="html")lv(h.ownerDocument.documentElement);else if(b==="head"){b=h.ownerDocument.head,lv(b);for(var $=b.firstChild;$;){var te=$.nextSibling,he=$.nodeName;$[sr]||he==="SCRIPT"||he==="STYLE"||he==="LINK"&&$.rel.toLowerCase()==="stylesheet"||b.removeChild($),$=te}}else b==="body"&&lv(h.ownerDocument.body);b=_}while(b);Ny(p)}function I9(h,p){var b=h;h=0;do{var S=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),S&&S.nodeType===8)if(b=S.data,b==="/$"){if(h===0)break;h--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||h++;b=S}while(b)}function vT(h){var p=h.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":vT(b),da(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function lpe(h,p,b,S){for(;h.nodeType===1;){var _=b;if(h.nodeName.toLowerCase()!==p.toLowerCase()){if(!S&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(S){if(!h[sr])switch(p){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if($=h.getAttribute("rel"),$==="stylesheet"&&h.hasAttribute("data-precedence"))break;if($!==_.rel||h.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||h.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||h.getAttribute("title")!==(_.title==null?null:_.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if($=h.getAttribute("src"),($!==(_.src==null?null:_.src)||h.getAttribute("type")!==(_.type==null?null:_.type)||h.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&$&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(p==="input"&&h.type==="hidden"){var $=_.name==null?null:""+_.name;if(_.type==="hidden"&&h.getAttribute("name")===$)return h}else return h;if(h=zu(h.nextSibling),h===null)break}return null}function cpe(h,p,b){if(p==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=zu(h.nextSibling),h===null))return null;return h}function N9(h,p){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!p||(h=zu(h.nextSibling),h===null))return null;return h}function wT(h){return h.data==="$?"||h.data==="$~"}function ST(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function upe(h,p){var b=h.ownerDocument;if(h.data==="$~")h._reactRetry=p;else if(h.data!=="$?"||b.readyState!=="loading")p();else{var S=function(){p(),b.removeEventListener("DOMContentLoaded",S)};b.addEventListener("DOMContentLoaded",S),h._reactRetry=S}}function zu(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return h}var CT=null;function T9(h){h=h.nextSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="/$"||b==="/&"){if(p===0)return zu(h.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}h=h.nextSibling}return null}function _9(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return h;p--}else b!=="/$"&&b!=="/&"||p++}h=h.previousSibling}return null}function R9(h,p,b){switch(p=gC(b),h){case"html":if(h=p.documentElement,!h)throw Error(r(452));return h;case"head":if(h=p.head,!h)throw Error(r(453));return h;case"body":if(h=p.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}function lv(h){for(var p=h.attributes;p.length;)h.removeAttributeNode(p[0]);da(h)}var Uu=new Map,O9=new Set;function yC(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var nA=Z.d;Z.d={f:dpe,r:fpe,D:hpe,C:Ape,L:ppe,m:mpe,X:ype,S:gpe,M:xpe};function dpe(){var h=nA.f(),p=cC();return h||p}function fpe(h){var p=cs(h);p!==null&&p.tag===5&&p.type==="form"?YU(p):nA.r(h)}var jy=typeof document>"u"?null:document;function F9(h,p,b){var S=jy;if(S&&typeof p=="string"&&p){var _=Ii(p);_='link[rel="'+h+'"][href="'+_+'"]',typeof b=="string"&&(_+='[crossorigin="'+b+'"]'),O9.has(_)||(O9.add(_),h={rel:h,crossOrigin:b,href:p},S.querySelector(_)===null&&(p=S.createElement("link"),il(p,"link",h),Ir(p),S.head.appendChild(p)))}}function hpe(h){nA.D(h),F9("dns-prefetch",h,null)}function Ape(h,p){nA.C(h,p),F9("preconnect",h,p)}function ppe(h,p,b){nA.L(h,p,b);var S=jy;if(S&&h&&p){var _='link[rel="preload"][as="'+Ii(p)+'"]';p==="image"&&b&&b.imageSrcSet?(_+='[imagesrcset="'+Ii(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(_+='[imagesizes="'+Ii(b.imageSizes)+'"]')):_+='[href="'+Ii(h)+'"]';var $=_;switch(p){case"style":$=Ey(h);break;case"script":$=Iy(h)}Uu.has($)||(h=f({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:h,as:p},b),Uu.set($,h),S.querySelector(_)!==null||p==="style"&&S.querySelector(cv($))||p==="script"&&S.querySelector(uv($))||(p=S.createElement("link"),il(p,"link",h),Ir(p),S.head.appendChild(p)))}}function mpe(h,p){nA.m(h,p);var b=jy;if(b&&h){var S=p&&typeof p.as=="string"?p.as:"script",_='link[rel="modulepreload"][as="'+Ii(S)+'"][href="'+Ii(h)+'"]',$=_;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Iy(h)}if(!Uu.has($)&&(h=f({rel:"modulepreload",href:h},p),Uu.set($,h),b.querySelector(_)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(uv($)))return}S=b.createElement("link"),il(S,"link",h),Ir(S),b.head.appendChild(S)}}}function gpe(h,p,b){nA.S(h,p,b);var S=jy;if(S&&h){var _=Zi(S).hoistableStyles,$=Ey(h);p=p||"default";var te=_.get($);if(!te){var he={loading:0,preload:null};if(te=S.querySelector(cv($)))he.loading=5;else{h=f({rel:"stylesheet",href:h,"data-precedence":p},b),(b=Uu.get($))&&kT(h,b);var Te=te=S.createElement("link");Ir(Te),il(Te,"link",h),Te._p=new Promise(function(tt,xt){Te.onload=tt,Te.onerror=xt}),Te.addEventListener("load",function(){he.loading|=1}),Te.addEventListener("error",function(){he.loading|=2}),he.loading|=4,xC(te,p,S)}te={type:"stylesheet",instance:te,count:1,state:he},_.set($,te)}}}function ype(h,p){nA.X(h,p);var b=jy;if(b&&h){var S=Zi(b).hoistableScripts,_=Iy(h),$=S.get(_);$||($=b.querySelector(uv(_)),$||(h=f({src:h,async:!0},p),(p=Uu.get(_))&&BT(h,p),$=b.createElement("script"),Ir($),il($,"link",h),b.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},S.set(_,$))}}function xpe(h,p){nA.M(h,p);var b=jy;if(b&&h){var S=Zi(b).hoistableScripts,_=Iy(h),$=S.get(_);$||($=b.querySelector(uv(_)),$||(h=f({src:h,async:!0,type:"module"},p),(p=Uu.get(_))&&BT(h,p),$=b.createElement("script"),Ir($),il($,"link",h),b.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},S.set(_,$))}}function D9(h,p,b,S){var _=(_=Ae.current)?yC(_):null;if(!_)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Ey(b.href),b=Zi(_).hoistableStyles,S=b.get(p),S||(S={type:"style",instance:null,count:0,state:null},b.set(p,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Ey(b.href);var $=Zi(_).hoistableStyles,te=$.get(h);if(te||(_=_.ownerDocument||_,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(h,te),($=_.querySelector(cv(h)))&&!$._p&&(te.instance=$,te.state.loading=5),Uu.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Uu.set(h,b),$||bpe(_,h,b,te.state))),p&&S===null)throw Error(r(528,""));return te}if(p&&S!==null)throw Error(r(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Iy(b),b=Zi(_).hoistableScripts,S=b.get(p),S||(S={type:"script",instance:null,count:0,state:null},b.set(p,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function Ey(h){return'href="'+Ii(h)+'"'}function cv(h){return'link[rel="stylesheet"]['+h+"]"}function L9(h){return f({},h,{"data-precedence":h.precedence,precedence:null})}function bpe(h,p,b,S){h.querySelector('link[rel="preload"][as="style"]['+p+"]")?S.loading=1:(p=h.createElement("link"),S.preload=p,p.addEventListener("load",function(){return S.loading|=1}),p.addEventListener("error",function(){return S.loading|=2}),il(p,"link",b),Ir(p),h.head.appendChild(p))}function Iy(h){return'[src="'+Ii(h)+'"]'}function uv(h){return"script[async]"+h}function $9(h,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var S=h.querySelector('style[data-href~="'+Ii(b.href)+'"]');if(S)return p.instance=S,Ir(S),S;var _=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return S=(h.ownerDocument||h).createElement("style"),Ir(S),il(S,"style",_),xC(S,b.precedence,h),p.instance=S;case"stylesheet":_=Ey(b.href);var $=h.querySelector(cv(_));if($)return p.state.loading|=4,p.instance=$,Ir($),$;S=L9(b),(_=Uu.get(_))&&kT(S,_),$=(h.ownerDocument||h).createElement("link"),Ir($);var te=$;return te._p=new Promise(function(he,Te){te.onload=he,te.onerror=Te}),il($,"link",S),p.state.loading|=4,xC($,b.precedence,h),p.instance=$;case"script":return $=Iy(b.src),(_=h.querySelector(uv($)))?(p.instance=_,Ir(_),_):(S=b,(_=Uu.get($))&&(S=f({},b),BT(S,_)),h=h.ownerDocument||h,_=h.createElement("script"),Ir(_),il(_,"link",S),h.head.appendChild(_),p.instance=_);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(S=p.instance,p.state.loading|=4,xC(S,b.precedence,h));return p.instance}function xC(h,p,b){for(var S=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=S.length?S[S.length-1]:null,$=_,te=0;te<S.length;te++){var he=S[te];if(he.dataset.precedence===p)$=he;else if($!==_)break}$?$.parentNode.insertBefore(h,$.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(h,p.firstChild))}function kT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.title==null&&(h.title=p.title)}function BT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.integrity==null&&(h.integrity=p.integrity)}var bC=null;function P9(h,p,b){if(bC===null){var S=new Map,_=bC=new Map;_.set(b,S)}else _=bC,S=_.get(b),S||(S=new Map,_.set(b,S));if(S.has(h))return S;for(S.set(h,null),b=b.getElementsByTagName(h),_=0;_<b.length;_++){var $=b[_];if(!($[sr]||$[Jn]||h==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var te=$.getAttribute(p)||"";te=h+te;var he=S.get(te);he?he.push($):S.set(te,[$])}}return S}function z9(h,p,b){h=h.ownerDocument||h,h.head.insertBefore(b,p==="title"?h.querySelector("head > title"):null)}function vpe(h,p,b){if(b===1||p.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;return p.rel==="stylesheet"?(h=p.disabled,typeof p.precedence=="string"&&h==null):!0;case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function U9(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function wpe(h,p,b,S){if(b.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var _=Ey(S.href),$=p.querySelector(cv(_));if($){p=$._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(h.count++,h=vC.bind(h),p.then(h,h)),b.state.loading|=4,b.instance=$,Ir($);return}$=p.ownerDocument||p,S=L9(S),(_=Uu.get(_))&&kT(S,_),$=$.createElement("link"),Ir($);var te=$;te._p=new Promise(function(he,Te){te.onload=he,te.onerror=Te}),il($,"link",S),b.instance=$}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(h.count++,b=vC.bind(h),p.addEventListener("load",b),p.addEventListener("error",b))}}var jT=0;function Spe(h,p){return h.stylesheets&&h.count===0&&SC(h,h.stylesheets),0<h.count||0<h.imgCount?function(b){var S=setTimeout(function(){if(h.stylesheets&&SC(h,h.stylesheets),h.unsuspend){var $=h.unsuspend;h.unsuspend=null,$()}},6e4+p);0<h.imgBytes&&jT===0&&(jT=62500*rpe());var _=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&SC(h,h.stylesheets),h.unsuspend)){var $=h.unsuspend;h.unsuspend=null,$()}},(h.imgBytes>jT?50:800)+p);return h.unsuspend=b,function(){h.unsuspend=null,clearTimeout(S),clearTimeout(_)}}:null}function vC(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)SC(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var wC=null;function SC(h,p){h.stylesheets=null,h.unsuspend!==null&&(h.count++,wC=new Map,p.forEach(Cpe,h),wC=null,vC.call(h))}function Cpe(h,p){if(!(p.state.loading&4)){var b=wC.get(h);if(b)var S=b.get(null);else{b=new Map,wC.set(h,b);for(var _=h.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<_.length;$++){var te=_[$];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(b.set(te.dataset.precedence,te),S=te)}S&&b.set(null,S)}_=p.instance,te=_.getAttribute("data-precedence"),$=b.get(te)||S,$===S&&b.set(null,_),b.set(te,_),this.count++,S=vC.bind(this),_.addEventListener("load",S),_.addEventListener("error",S),$?$.parentNode.insertBefore(_,$.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(_,h.firstChild)),p.state.loading|=4}}var dv={$$typeof:B,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function kpe(h,p,b,S,_,$,te,he,Te){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=S,this.onUncaughtError=_,this.onCaughtError=$,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function M9(h,p,b,S,_,$,te,he,Te,tt,xt,jt){return h=new kpe(h,p,b,te,Te,tt,xt,jt,he),p=1,$===!0&&(p|=24),$=Eo(3,null,null,p),h.current=$,$.stateNode=h,p=xp(),p.refCount++,h.pooledCache=p,p.refCount++,$.memoizedState={element:S,isDehydrated:b,cache:p},Wt($),h}function Q9(h){return h?(h=so,h):so}function H9(h,p,b,S,_,$){_=Q9(_),S.context===null?S.context=_:S.pendingContext=_,S=qn(p),S.payload={element:b},$=$===void 0?null:$,$!==null&&(S.callback=$),b=lr(h,S,p),b!==null&&(Bc(b,h,p),hs(b,h,p))}function W9(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function ET(h,p){W9(h,p),(h=h.alternate)&&W9(h,p)}function V9(h){if(h.tag===13||h.tag===31){var p=Dd(h,67108864);p!==null&&Bc(p,h,67108864),ET(h,67108864)}}function q9(h){if(h.tag===13||h.tag===31){var p=su();p=ts(p);var b=Dd(h,p);b!==null&&Bc(b,h,p),ET(h,p)}}var CC=!0;function Bpe(h,p,b,S){var _=q.T;q.T=null;var $=Z.p;try{Z.p=2,IT(h,p,b,S)}finally{Z.p=$,q.T=_}}function jpe(h,p,b,S){var _=q.T;q.T=null;var $=Z.p;try{Z.p=8,IT(h,p,b,S)}finally{Z.p=$,q.T=_}}function IT(h,p,b,S){if(CC){var _=NT(S);if(_===null)pT(h,p,S,kC,b),K9(h,S);else if(Ipe(_,h,p,b,S))S.stopPropagation();else if(K9(h,S),p&4&&-1<Epe.indexOf(h)){for(;_!==null;){var $=cs(_);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var te=Jt($.pendingLanes);if(te!==0){var he=$;for(he.pendingLanes|=2,he.entangledLanes|=2;te;){var Te=1<<31-ke(te);he.entanglements[1]|=Te,te&=~Te}Hf($),(ps&6)===0&&(oC=Ht()+500,iv(0))}}break;case 31:case 13:he=Dd($,2),he!==null&&Bc(he,$,2),cC(),ET($,2)}if($=NT(S),$===null&&pT(h,p,S,kC,b),$===_)break;_=$}_!==null&&S.stopPropagation()}else pT(h,p,S,null,b)}}function NT(h){return h=mn(h),TT(h)}var kC=null;function TT(h){if(kC=null,h=Hr(h),h!==null){var p=i(h);if(p===null)h=null;else{var b=p.tag;if(b===13){if(h=a(p),h!==null)return h;h=null}else if(b===31){if(h=l(p),h!==null)return h;h=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null)}}return kC=h,null}function G9(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case Ut:return 2;case en:return 8;case fn:case Qt:return 32;case rn:return 268435456;default:return 32}default:return 32}}var _T=!1,_p=null,Rp=null,Op=null,fv=new Map,hv=new Map,Fp=[],Epe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K9(h,p){switch(h){case"focusin":case"focusout":_p=null;break;case"dragenter":case"dragleave":Rp=null;break;case"mouseover":case"mouseout":Op=null;break;case"pointerover":case"pointerout":fv.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":hv.delete(p.pointerId)}}function Av(h,p,b,S,_,$){return h===null||h.nativeEvent!==$?(h={blockedOn:p,domEventName:b,eventSystemFlags:S,nativeEvent:$,targetContainers:[_]},p!==null&&(p=cs(p),p!==null&&V9(p)),h):(h.eventSystemFlags|=S,p=h.targetContainers,_!==null&&p.indexOf(_)===-1&&p.push(_),h)}function Ipe(h,p,b,S,_){switch(p){case"focusin":return _p=Av(_p,h,p,b,S,_),!0;case"dragenter":return Rp=Av(Rp,h,p,b,S,_),!0;case"mouseover":return Op=Av(Op,h,p,b,S,_),!0;case"pointerover":var $=_.pointerId;return fv.set($,Av(fv.get($)||null,h,p,b,S,_)),!0;case"gotpointercapture":return $=_.pointerId,hv.set($,Av(hv.get($)||null,h,p,b,S,_)),!0}return!1}function X9(h){var p=Hr(h.target);if(p!==null){var b=i(p);if(b!==null){if(p=b.tag,p===13){if(p=a(b),p!==null){h.blockedOn=p,Bi(h.priority,function(){q9(b)});return}}else if(p===31){if(p=l(b),p!==null){h.blockedOn=p,Bi(h.priority,function(){q9(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function BC(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var b=NT(h.nativeEvent);if(b===null){b=h.nativeEvent;var S=new b.constructor(b.type,b);Vc=S,b.target.dispatchEvent(S),Vc=null}else return p=cs(b),p!==null&&V9(p),h.blockedOn=b,!1;p.shift()}return!0}function Y9(h,p,b){BC(h)&&b.delete(p)}function Npe(){_T=!1,_p!==null&&BC(_p)&&(_p=null),Rp!==null&&BC(Rp)&&(Rp=null),Op!==null&&BC(Op)&&(Op=null),fv.forEach(Y9),hv.forEach(Y9)}function jC(h,p){h.blockedOn===p&&(h.blockedOn=null,_T||(_T=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Npe)))}var EC=null;function J9(h){EC!==h&&(EC=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){EC===h&&(EC=null);for(var p=0;p<h.length;p+=3){var b=h[p],S=h[p+1],_=h[p+2];if(typeof S!="function"){if(TT(S||b)===null)continue;break}var $=cs(b);$!==null&&(h.splice(p,3),p-=3,NN($,{pending:!0,data:_,method:b.method,action:S},S,_))}}))}function Ny(h){function p(Te){return jC(Te,h)}_p!==null&&jC(_p,h),Rp!==null&&jC(Rp,h),Op!==null&&jC(Op,h),fv.forEach(p),hv.forEach(p);for(var b=0;b<Fp.length;b++){var S=Fp[b];S.blockedOn===h&&(S.blockedOn=null)}for(;0<Fp.length&&(b=Fp[0],b.blockedOn===null);)X9(b),b.blockedOn===null&&Fp.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(S=0;S<b.length;S+=3){var _=b[S],$=b[S+1],te=_[ns]||null;if(typeof $=="function")te||J9(b);else if(te){var he=null;if($&&$.hasAttribute("formAction")){if(_=$,te=$[ns]||null)he=te.formAction;else if(TT(_)!==null)continue}else he=te.action;typeof he=="function"?b[S+1]=he:(b.splice(S,3),S-=3),J9(b)}}}function Z9(){function h($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(te){return _=te})},focusReset:"manual",scroll:"manual"})}function p(){_!==null&&(_(),_=null),S||setTimeout(b,20)}function b(){if(!S&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,_=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){S=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),_!==null&&(_(),_=null)}}}function RT(h){this._internalRoot=h}IC.prototype.render=RT.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(r(409));var b=p.current,S=su();H9(b,S,h,p,null,null)},IC.prototype.unmount=RT.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;H9(h.current,2,null,h,null,null),cC(),p[ji]=null}};function IC(h){this._internalRoot=h}IC.prototype.unstable_scheduleHydration=function(h){if(h){var p=Bt();h={blockedOn:null,target:h,priority:p};for(var b=0;b<Fp.length&&p!==0&&p<Fp[b].priority;b++);Fp.splice(b,0,h),b===0&&X9(h)}};var e7=e.version;if(e7!=="19.2.4")throw Error(r(527,e7,"19.2.4"));Z.findDOMNode=function(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=u(p),h=h!==null?d(h):null,h=h===null?null:h.stateNode,h};var Tpe={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var NC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!NC.isDisabled&&NC.supportsFiber)try{Fn=NC.inject(Tpe),Ft=NC}catch{}}return mv.createRoot=function(h,p){if(!s(h))throw Error(r(299));var b=!1,S="",_=oM,$=lM,te=cM;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(_=p.onUncaughtError),p.onCaughtError!==void 0&&($=p.onCaughtError),p.onRecoverableError!==void 0&&(te=p.onRecoverableError)),p=M9(h,1,!1,null,null,b,S,null,_,$,te,Z9),h[ji]=p.current,AT(h),new RT(p)},mv.hydrateRoot=function(h,p,b){if(!s(h))throw Error(r(299));var S=!1,_="",$=oM,te=lM,he=cM,Te=null;return b!=null&&(b.unstable_strictMode===!0&&(S=!0),b.identifierPrefix!==void 0&&(_=b.identifierPrefix),b.onUncaughtError!==void 0&&($=b.onUncaughtError),b.onCaughtError!==void 0&&(te=b.onCaughtError),b.onRecoverableError!==void 0&&(he=b.onRecoverableError),b.formState!==void 0&&(Te=b.formState)),p=M9(h,1,!0,p,b??null,S,_,Te,$,te,he,Z9),p.context=Q9(null),b=p.current,S=su(),S=ts(S),_=qn(S),_.callback=null,lr(b,_,S),b=S,p.current.lanes=b,cn(p,b),Hf(p),h[ji]=p.current,AT(h),new IC(p)},mv.version="19.2.4",mv}var u7;function Upe(){if(u7)return DT.exports;u7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),DT.exports=zpe(),DT.exports}var Mpe=Upe();const Qpe=oc(Mpe);var d7="popstate";function Hpe(t={}){function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return Z6("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:B2(s)}return Vpe(e,n,null,t)}function Vi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wpe(){return Math.random().toString(36).substring(2,10)}function f7(t,e){return{usr:t.state,key:t.key,idx:e}}function Z6(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Y1(e):e,state:n,key:e&&e.key||r||Wpe()}}function B2({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Y1(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Vpe(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){l="POP";let x=d(),v=x==null?null:x-u;u=x,c&&c({action:l,location:y.location,delta:v})}function A(x,v){l="PUSH";let w=Z6(y.location,x,v);u=d()+1;let B=f7(w,u),k=y.createHref(w);try{a.pushState(B,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(k)}i&&c&&c({action:l,location:y.location,delta:1})}function m(x,v){l="REPLACE";let w=Z6(y.location,x,v);u=d();let B=f7(w,u),k=y.createHref(w);a.replaceState(B,"",k),i&&c&&c({action:l,location:y.location,delta:0})}function g(x){return qpe(x)}let y={get action(){return l},get location(){return t(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(d7,f),c=x,()=>{s.removeEventListener(d7,f),c=null}},createHref(x){return e(s,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:A,replace:m,go(x){return a.go(x)}};return y}function qpe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Vi(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:B2(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function LJ(t,e,n="/"){return Gpe(t,e,n,!1)}function Gpe(t,e,n,r){let s=typeof e=="string"?Y1(e):e,i=jA(s.pathname||"/",n);if(i==null)return null;let a=$J(t);Kpe(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=ame(i);l=sme(a[c],u,r)}return l}function $J(t,e=[],n=[],r="",s=!1){let i=(a,l,c=s,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Vi(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=bA([r,d.relativePath]),A=n.concat(d);a.children&&a.children.length>0&&(Vi(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),$J(a.children,e,A,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:nme(f,a.index),routesMeta:A})};return t.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))i(a,l);else for(let c of PJ(a.path))i(a,l,!0,c)}),e}function PJ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=PJ(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Kpe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rme(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Xpe=/^:[\w-]+$/,Ype=3,Jpe=2,Zpe=1,eme=10,tme=-2,h7=t=>t==="*";function nme(t,e){let n=t.split("/"),r=n.length;return n.some(h7)&&(r+=tme),e&&(r+=Jpe),n.filter(s=>!h7(s)).reduce((s,i)=>s+(Xpe.test(i)?Ype:i===""?Zpe:eme),r)}function rme(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sme(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=PB({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=PB({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:bA([i,f.pathname]),pathnameBase:ume(bA([i,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(i=bA([i,f.pathnameBase]))}return a}function PB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ime(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let g=l[A]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[A];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function ime(t,e=!1,n=!0){cf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ame(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function jA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ome=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lme(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Y1(t):t,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=A7(n.substring(1),"/"):i=A7(n,e)):i=e,{pathname:i,search:dme(r),hash:fme(s)}}function A7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zT(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cme(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rD(t){let e=cme(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function sD(t,e,n,r=!1){let s;typeof t=="string"?s=Y1(t):(s={...t},Vi(!s.pathname||!s.pathname.includes("?"),zT("?","pathname","search",s)),Vi(!s.pathname||!s.pathname.includes("#"),zT("#","pathname","hash",s)),Vi(!s.search||!s.search.includes("#"),zT("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let A=a.split("/");for(;A[0]==="..";)A.shift(),f-=1;s.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=lme(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var bA=t=>t.join("/").replace(/\/\/+/g,"/"),ume=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dme=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fme=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,hme=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ame(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function pme(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function UJ(t,e){let n=t;if(typeof n!="string"||!ome.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(zJ)try{let i=new URL(window.location.href),a=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=jA(a.pathname,e);a.origin===i.origin&&l!=null?n=l+a.search+a.hash:s=!0}catch{cf(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MJ=["POST","PUT","PATCH","DELETE"];new Set(MJ);var mme=["GET",...MJ];new Set(mme);var J1=C.createContext(null);J1.displayName="DataRouter";var Lj=C.createContext(null);Lj.displayName="DataRouterState";var gme=C.createContext(!1),QJ=C.createContext({isTransitioning:!1});QJ.displayName="ViewTransition";var yme=C.createContext(new Map);yme.displayName="Fetchers";var xme=C.createContext(null);xme.displayName="Await";var ku=C.createContext(null);ku.displayName="Navigation";var gw=C.createContext(null);gw.displayName="Location";var Ch=C.createContext({outlet:null,matches:[],isDataRoute:!1});Ch.displayName="Route";var iD=C.createContext(null);iD.displayName="RouteError";var HJ="REACT_ROUTER_ERROR",bme="REDIRECT",vme="ROUTE_ERROR_RESPONSE";function wme(t){if(t.startsWith(`${HJ}:${bme}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Sme(t){if(t.startsWith(`${HJ}:${vme}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new hme(e.status,e.statusText,e.data)}catch{}}function Cme(t,{relative:e}={}){Vi(Z1(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(ku),{hash:s,pathname:i,search:a}=yw(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:bA([n,i])),r.createHref({pathname:l,search:a,hash:s})}function Z1(){return C.useContext(gw)!=null}function xf(){return Vi(Z1(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(gw).location}var WJ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VJ(t){C.useContext(ku).static||C.useLayoutEffect(t)}function aD(){let{isDataRoute:t}=C.useContext(Ch);return t?Lme():kme()}function kme(){Vi(Z1(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(J1),{basename:e,navigator:n}=C.useContext(ku),{matches:r}=C.useContext(Ch),{pathname:s}=xf(),i=JSON.stringify(rD(r)),a=C.useRef(!1);return VJ(()=>{a.current=!0}),C.useCallback((c,u={})=>{if(cf(a.current,WJ),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=sD(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bA([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}C.createContext(null);function yw(t,{relative:e}={}){let{matches:n}=C.useContext(Ch),{pathname:r}=xf(),s=JSON.stringify(rD(n));return C.useMemo(()=>sD(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Bme(t,e){return qJ(t,e)}function qJ(t,e,n,r,s){Vi(Z1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(ku),{matches:a}=C.useContext(Ch),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";KJ(u,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let A=xf(),m;if(e){let w=typeof e=="string"?Y1(e):e;Vi(d==="/"||w.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=A;let g=m.pathname||"/",y=g;if(d!=="/"){let w=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=LJ(t,{pathname:y});cf(f||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),cf(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=Tme(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:bA([d,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:bA([d,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),a,n,r,s);return e&&v?C.createElement(gw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},v):v}function jme(){let t=Dme(),e=Ame(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,a)}var Eme=C.createElement(jme,null),GJ=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Sme(t.digest);n&&(t=n)}let e=t!==void 0?C.createElement(Ch.Provider,{value:this.props.routeContext},C.createElement(iD.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?C.createElement(Ime,{error:t},e):e}};GJ.contextType=gme;var UT=new WeakMap;function Ime({children:t,error:e}){let{basename:n}=C.useContext(ku);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=wme(e.digest);if(r){let s=UT.get(e);if(s)throw s;let i=UJ(r.location,n);if(zJ&&!UT.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw UT.set(e,a),a}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function Nme({routeContext:t,match:e,children:n}){let r=C.useContext(J1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Ch.Provider,{value:t},n)}function Tme(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n?.errors;if(a!=null){let d=i.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Vi(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:A,errors:m}=n,g=f.route.loader&&!A.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&r?(d,f)=>{r(d,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:pme(n.matches),errorInfo:f})}:void 0;return i.reduceRight((d,f,A)=>{let m,g=!1,y=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,y=f.route.errorElement||Eme,l&&(c<0&&A===0?(KJ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):c===A&&(g=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,A+1)),w=()=>{let B;return m?B=y:g?B=x:f.route.Component?B=C.createElement(f.route.Component,null):f.route.element?B=f.route.element:B=d,C.createElement(Nme,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:B})};return n&&(f.route.ErrorBoundary||f.route.errorElement||A===0)?C.createElement(GJ,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):w()},null)}function oD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _me(t){let e=C.useContext(J1);return Vi(e,oD(t)),e}function Rme(t){let e=C.useContext(Lj);return Vi(e,oD(t)),e}function Ome(t){let e=C.useContext(Ch);return Vi(e,oD(t)),e}function lD(t){let e=Ome(t),n=e.matches[e.matches.length-1];return Vi(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Fme(){return lD("useRouteId")}function Dme(){let t=C.useContext(iD),e=Rme("useRouteError"),n=lD("useRouteError");return t!==void 0?t:e.errors?.[n]}function Lme(){let{router:t}=_me("useNavigate"),e=lD("useNavigate"),n=C.useRef(!1);return VJ(()=>{n.current=!0}),C.useCallback(async(s,i={})=>{cf(n.current,WJ),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var p7={};function KJ(t,e,n){!e&&!p7[t]&&(p7[t]=!0,cf(!1,n))}C.memo($me);function $me({routes:t,future:e,state:n,onError:r}){return qJ(t,void 0,n,r,e)}function r1({to:t,replace:e,state:n,relative:r}){Vi(Z1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(ku);cf(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(Ch),{pathname:a}=xf(),l=aD(),c=sD(t,rD(i),a,r==="path"),u=JSON.stringify(c);return C.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function os(t){Vi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pme({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:a}){Vi(!Z1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:a,future:{}}),[l,s,i,a]);typeof n=="string"&&(n=Y1(n));let{pathname:u="/",search:d="",hash:f="",state:A=null,key:m="default"}=n,g=C.useMemo(()=>{let y=jA(u,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:A,key:m},navigationType:r}},[l,u,d,f,A,m,r]);return cf(g!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:C.createElement(ku.Provider,{value:c},C.createElement(gw.Provider,{children:e,value:g}))}function $j({children:t,location:e}){return Bme(eO(t),e)}function eO(t,e=[]){let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,eO(r.props.children,i));return}Vi(r.type===os,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=eO(r.props.children,i)),n.push(a)}),n}var tB="get",nB="application/x-www-form-urlencoded";function Pj(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function zme(t){return Pj(t)&&t.tagName.toLowerCase()==="button"}function Ume(t){return Pj(t)&&t.tagName.toLowerCase()==="form"}function Mme(t){return Pj(t)&&t.tagName.toLowerCase()==="input"}function Qme(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hme(t,e){return t.button===0&&(!e||e==="_self")&&!Qme(t)}var TC=null;function Wme(){if(TC===null)try{new FormData(document.createElement("form"),0),TC=!1}catch{TC=!0}return TC}var Vme=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function MT(t){return t!=null&&!Vme.has(t)?(cf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nB}"`),null):t}function qme(t,e){let n,r,s,i,a;if(Ume(t)){let l=t.getAttribute("action");r=l?jA(l,e):null,n=t.getAttribute("method")||tB,s=MT(t.getAttribute("enctype"))||nB,i=new FormData(t)}else if(zme(t)||Mme(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?jA(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||tB,s=MT(t.getAttribute("formenctype"))||MT(l.getAttribute("enctype"))||nB,i=new FormData(l,t),!Wme()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";i.append(`${A}x`,"0"),i.append(`${A}y`,"0")}else u&&i.append(u,f)}}else{if(Pj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tB,r=null,s=nB,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gme(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&jA(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function Kme(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xme(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Yme(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await Kme(i,n);return a.links?a.links():[]}return[]}));return tge(r.flat(1).filter(Xme).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function m7(t,e,n,r,s,i){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Jme(t,e,{includeHydrateFallback:n}={}){return Zme(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Zme(t){return[...new Set(t)]}function ege(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function tge(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(ege(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function XJ(){let t=C.useContext(J1);return cD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nge(){let t=C.useContext(Lj);return cD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var uD=C.createContext(void 0);uD.displayName="FrameworkContext";function YJ(){let t=C.useContext(uD);return cD(t,"You must render this element inside a <HydratedRouter> element"),t}function rge(t,e){let n=C.useContext(uD),[r,s]=C.useState(!1),[i,a]=C.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=C.useRef(null);C.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let y=v=>{v.forEach(w=>{a(w.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return A.current&&x.observe(A.current),()=>{x.disconnect()}}},[t]),C.useEffect(()=>{if(r){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[r]);let m=()=>{s(!0)},g=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,A,{}]:[i,A,{onFocus:gv(l,m),onBlur:gv(c,g),onMouseEnter:gv(u,m),onMouseLeave:gv(d,g),onTouchStart:gv(f,m)}]:[!1,A,{}]}function gv(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function sge({page:t,...e}){let{router:n}=XJ(),r=C.useMemo(()=>LJ(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?C.createElement(age,{page:t,matches:r,...e}):null}function ige(t){let{manifest:e,routeModules:n}=YJ(),[r,s]=C.useState([]);return C.useEffect(()=>{let i=!1;return Yme(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function age({page:t,matches:e,...n}){let r=xf(),{future:s,manifest:i,routeModules:a}=YJ(),{basename:l}=XJ(),{loaderData:c,matches:u}=nge(),d=C.useMemo(()=>m7(t,e,u,i,r,"data"),[t,e,u,i,r]),f=C.useMemo(()=>m7(t,e,u,i,r,"assets"),[t,e,u,i,r]),A=C.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(e.forEach(w=>{let B=i.routes[w.route.id];!B||!B.hasLoader||(!d.some(k=>k.route.id===w.route.id)&&w.route.id in c&&a[w.route.id]?.shouldRevalidate||B.hasClientLoader?x=!0:y.add(w.route.id))}),y.size===0)return[];let v=Gme(t,l,s.unstable_trailingSlashAwareDataRequests,"data");return x&&y.size>0&&v.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[v.pathname+v.search]},[l,s.unstable_trailingSlashAwareDataRequests,c,r,i,d,e,t,a]),m=C.useMemo(()=>Jme(f,i),[f,i]),g=ige(f);return C.createElement(C.Fragment,null,A.map(y=>C.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>C.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),g.map(({key:y,link:x})=>C.createElement("link",{key:y,nonce:n.nonce,...x,crossOrigin:x.crossOrigin??n.crossOrigin})))}function oge(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lge&&(window.__reactRouterVersion="7.13.0")}catch{}function cge({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=C.useRef();s.current==null&&(s.current=Hpe({window:r,v5Compat:!0}));let i=s.current,[a,l]=C.useState({action:i.action,location:i.location}),c=C.useCallback(u=>{n===!1?l(u):C.startTransition(()=>l(u))},[n]);return C.useLayoutEffect(()=>i.listen(c),[i,c]),C.createElement(Pme,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:n})}var JJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZJ=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A,...m},g){let{basename:y,unstable_useTransitions:x}=C.useContext(ku),v=typeof u=="string"&&JJ.test(u),w=UJ(u,y);u=w.to;let B=Cme(u,{relative:s}),[k,j,I]=rge(r,m),O=fge(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f,unstable_defaultShouldRevalidate:A,unstable_useTransitions:x});function F(T){e&&e(T),T.defaultPrevented||O(T)}let D=C.createElement("a",{...m,...I,href:w.absoluteURL||B,onClick:w.isExternal||i?e:F,ref:oge(g,j),target:c,"data-discover":!v&&n==="render"?"true":void 0});return k&&!v?C.createElement(C.Fragment,null,D,C.createElement(sge,{page:B})):D});ZJ.displayName="Link";var tO=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:l,children:c,...u},d){let f=yw(a,{relative:u.relative}),A=xf(),m=C.useContext(Lj),{navigator:g,basename:y}=C.useContext(ku),x=m!=null&&gge(f)&&l===!0,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=A.pathname,B=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),B=B?B.toLowerCase():null,v=v.toLowerCase()),B&&y&&(B=jA(B,y)||B);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=w===v||!s&&w.startsWith(v)&&w.charAt(k)==="/",I=B!=null&&(B===v||!s&&B.startsWith(v)&&B.charAt(v.length)==="/"),O={isActive:j,isPending:I,isTransitioning:x},F=j?e:void 0,D;typeof r=="function"?D=r(O):D=[r,j?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(O):i;return C.createElement(ZJ,{...u,"aria-current":F,className:D,ref:d,style:T,to:a,viewTransition:l},typeof c=="function"?c(O):c)});tO.displayName="NavLink";var uge=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=tB,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A,...m},g)=>{let{unstable_useTransitions:y}=C.useContext(ku),x=pge(),v=mge(l,{relative:u}),w=a.toLowerCase()==="get"?"get":"post",B=typeof l=="string"&&JJ.test(l),k=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let I=j.nativeEvent.submitter,O=I?.getAttribute("formmethod")||a,F=()=>x(I||j.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A});y&&n!==!1?C.startTransition(()=>F()):F()};return C.createElement("form",{ref:g,method:w,action:v,onSubmit:r?c:k,...m,"data-discover":!B&&t==="render"?"true":void 0})});uge.displayName="Form";function dge(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eZ(t){let e=C.useContext(J1);return Vi(e,dge(t)),e}function fge(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=aD(),d=xf(),f=yw(t,{relative:i});return C.useCallback(A=>{if(Hme(A,e)){A.preventDefault();let m=n!==void 0?n:B2(d)===B2(f),g=()=>u(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:l});c?C.startTransition(()=>g()):g()}},[d,u,f,n,r,e,t,s,i,a,l,c])}var hge=0,Age=()=>`__${String(++hge)}__`;function pge(){let{router:t}=eZ("useSubmit"),{basename:e}=C.useContext(ku),n=Fme(),r=t.fetch,s=t.navigate;return C.useCallback(async(i,a={})=>{let{action:l,method:c,encType:u,formData:d,body:f}=qme(i,e);if(a.navigate===!1){let A=a.fetcherKey||Age();await r(A,n,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await s(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,s,e,n])}function mge(t,{relative:e}={}){let{basename:n}=C.useContext(ku),r=C.useContext(Ch);Vi(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...yw(t||".",{relative:e})},a=xf();if(t==null){i.search=a.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:bA([n,i.pathname])),B2(i)}function gge(t,{relative:e}={}){let n=C.useContext(QJ);Vi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eZ("useViewTransitionState"),s=yw(t,{relative:e});if(!n.isTransitioning)return!1;let i=jA(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=jA(n.nextLocation.pathname,r)||n.nextLocation.pathname;return PB(s.pathname,a)!=null||PB(s.pathname,i)!=null}var zj=DJ();const yge=oc(zj);const tZ=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const xge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const bge=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const g7=t=>{const e=bge(t);return e.charAt(0).toUpperCase()+e.slice(1)};var vge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wge=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Sge=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>C.createElement("svg",{ref:c,...vge,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tZ("lucide",s),...!i&&!wge(l)&&{"aria-hidden":"true"},...l},[...a.map(([u,d])=>C.createElement(u,d)),...Array.isArray(i)?i:[i]]));const Rt=(t,e)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(Sge,{ref:i,iconNode:e,className:tZ(`lucide-${xge(g7(t))}`,`lucide-${t}`,r),...s}));return n.displayName=g7(t),n};const Cge=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ua=Rt("activity",Cge);const kge=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],nZ=Rt("archive",kge);const Bge=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],jge=Rt("arrow-down-right",Bge);const Ege=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],y7=Rt("arrow-left-right",Ege);const Ige=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nge=Rt("arrow-left",Ige);const Tge=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Dg=Rt("arrow-right",Tge);const _ge=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Rge=Rt("arrow-up-right",_ge);const Oge=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_l=Rt("award",Oge);const Fge=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],j2=Rt("book-open",Fge);const Dge=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],zB=Rt("bot",Dge);const Lge=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zr=Rt("brain",Lge);const $ge=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],k1=Rt("calendar",$ge);const Pge=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],rB=Rt("camera",Pge);const zge=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Jg=Rt("chart-column",zge);const Uge=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],fu=Rt("chart-no-axes-column",Uge);const Mge=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Qge=Rt("chart-pie",Mge);const Hge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rZ=Rt("check",Hge);const Wge=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],EA=Rt("chevron-down",Wge);const Vge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],B1=Rt("chevron-left",Vge);const qge=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hm=Rt("chevron-right",qge);const Gge=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Am=Rt("chevron-up",Gge);const Kge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nO=Rt("circle-alert",Kge);const Xge=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nn=Rt("circle-check-big",Xge);const Yge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Jge=Rt("circle-check",Yge);const Zge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sZ=Rt("circle-question-mark",Zge);const e0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kr=Rt("circle-x",e0e);const t0e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Zd=Rt("clipboard-list",t0e);const n0e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]],r0e=Rt("clipboard-x",n0e);const s0e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ls=Rt("clock",s0e);const i0e=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Lg=Rt("code-xml",i0e);const a0e=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Lr=Rt("code",a0e);const o0e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iZ=Rt("copy",o0e);const l0e=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],rO=Rt("cpu",l0e);const c0e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],wi=Rt("database",c0e);const u0e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ad=Rt("download",u0e);const d0e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zg=Rt("eye-off",d0e);const f0e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gs=Rt("eye",f0e);const h0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],IA=Rt("file-code",h0e);const A0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qi=Rt("file-text",A0e);const p0e=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],x7=Rt("flame",p0e);const m0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ex=Rt("globe",m0e);const g0e=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],y0e=Rt("hard-drive",g0e);const x0e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],sO=Rt("hash",x0e);const b0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dD=Rt("info",b0e);const v0e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],iO=Rt("key",v0e);const w0e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Gl=Rt("layers",w0e);const S0e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fD=Rt("layout-dashboard",S0e);const C0e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],NA=Rt("lightbulb",C0e);const k0e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],B0e=Rt("link",k0e);const j0e=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],aZ=Rt("list-checks",j0e);const E0e=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],oZ=Rt("list",E0e);const I0e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mA=Rt("loader-circle",I0e);const N0e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],T0e=Rt("loader",N0e);const _0e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],R0e=Rt("lock",_0e);const O0e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],F0e=Rt("log-out",O0e);const D0e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],L0e=Rt("mail",D0e);const $0e=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],qv=Rt("maximize",$0e);const P0e=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],b7=Rt("medal",P0e);const z0e=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],U0e=Rt("menu",z0e);const M0e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],lZ=Rt("message-circle",M0e);const Q0e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],qp=Rt("message-square",Q0e);const H0e=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],cZ=Rt("mic-off",H0e);const W0e=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Uj=Rt("mic",W0e);const V0e=[["path",{d:"M5 12h14",key:"1ays0h"}]],q0e=Rt("minus",V0e);const G0e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],K0e=Rt("monitor",G0e);const X0e=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Y0e=Rt("moon",X0e);const J0e=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Z0e=Rt("network",J0e);const eye=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],dd=Rt("play",eye);const tye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zo=Rt("plus",tye);const nye=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],rye=Rt("radar",nye);const sye=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_c=Rt("refresh-cw",sye);const iye=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],uZ=Rt("rotate-ccw",iye);const aye=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],tx=Rt("save",aye);const oye=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],lye=Rt("scan-face",oye);const cye=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],j0=Rt("search",cye);const uye=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$c=Rt("send",uye);const dye=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],v7=Rt("server",dye);const fye=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UB=Rt("settings",fye);const hye=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vs=Rt("shield",hye);const Aye=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],aO=Rt("smartphone",Aye);const pye=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qo=Rt("sparkles",pye);const mye=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dZ=Rt("square-pen",mye);const gye=[["path",{d:"M10.029 4.285A2 2 0 0 0 7 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"1ystz2"}],["path",{d:"M3 4v16",key:"1ph11n"}]],yye=Rt("step-forward",gye);const xye=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bye=Rt("sun",xye);const vye=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],hD=Rt("table",vye);const wye=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Sye=Rt("tag",wye);const Cye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Br=Rt("target",Cye);const kye=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],w7=Rt("terminal",kye);const Bye=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],oO=Rt("toggle-left",Bye);const jye=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],S7=Rt("toggle-right",jye);const Eye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],po=Rt("trash-2",Eye);const Iye=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Nye=Rt("trending-down",Iye);const Tye=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],uf=Rt("trending-up",Tye);const _ye=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pn=Rt("triangle-alert",_ye);const Rye=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ul=Rt("trophy",Rye);const Oye=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Fye=Rt("type",Oye);const Dye=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Mj=Rt("upload",Dye);const Lye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$ye=Rt("user-plus",Lye);const Pye=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],MB=Rt("user",Pye);const zye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],od=Rt("users",zye);const Uye=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sB=Rt("video-off",Uye);const Mye=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],h2=Rt("video",Mye);const Qye=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],C7=Rt("volume-2",Qye);const Hye=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Wye=Rt("volume-x",Hye);const Vye=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],lO=Rt("wand-sparkles",Vye);const qye=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],k7=Rt("wifi-off",qye);const Gye=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],fZ=Rt("wifi",Gye);const Kye=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Os=Rt("x",Kye);const Xye=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vu=Rt("zap",Xye);function Yye(){const t=C.useRef(null);return C.useEffect(()=>{const e=t.current,n=e.getContext("2d");let r,s=[];const i=()=>{e.width=window.innerWidth,e.height=window.innerHeight,a()},a=()=>{s=[];const u=Math.floor(e.width*e.height/18e3);for(let d=0;d<u;d++)s.push({x:Math.random()*e.width,y:Math.random()*e.height,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4,radius:Math.random()*2+1,pulsePhase:Math.random()*Math.PI*2})},l=()=>{const u=document.documentElement.getAttribute("data-theme")==="light";n.fillStyle=u?"rgba(248, 250, 252, 0.08)":"rgba(8, 12, 24, 0.08)",n.fillRect(0,0,e.width,e.height),s.forEach((d,f)=>{d.x+=d.vx,d.y+=d.vy,d.pulsePhase+=.015,(d.x<0||d.x>e.width)&&(d.vx*=-1),(d.y<0||d.y>e.height)&&(d.vy*=-1),s.forEach((g,y)=>{if(f>=y)return;const x=g.x-d.x,v=g.y-d.y,w=Math.sqrt(x*x+v*v);if(w<120){const B=(1-w/120)*.25;n.beginPath(),n.strokeStyle=u?`rgba(59, 130, 246, ${B*1.5})`:`rgba(59, 130, 246, ${B})`,n.lineWidth=.5,n.moveTo(d.x,d.y),n.lineTo(g.x,g.y),n.stroke()}});const A=Math.sin(d.pulsePhase)*.3+.7,m=n.createRadialGradient(d.x,d.y,0,d.x,d.y,d.radius*3);m.addColorStop(0,`rgba(59, 130, 246, ${A})`),m.addColorStop(.5,`rgba(59, 130, 246, ${A*.3})`),m.addColorStop(1,"rgba(59, 130, 246, 0)"),n.beginPath(),n.fillStyle=m,n.arc(d.x,d.y,d.radius*3,0,Math.PI*2),n.fill(),n.beginPath(),n.fillStyle=u?`rgba(37, 99, 235, ${A})`:`rgba(147, 197, 253, ${A})`,n.arc(d.x,d.y,d.radius,0,Math.PI*2),n.fill()}),r=requestAnimationFrame(l)};i();const c=document.documentElement.getAttribute("data-theme")==="light";return n.fillStyle=c?"#f8fafc":"#080c18",n.fillRect(0,0,e.width,e.height),l(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(r)}},[]),o.jsx("canvas",{ref:t,className:"neural-canvas"})}function Jye(){return o.jsxs("div",{className:"ai-illustration",children:[o.jsxs("div",{className:"illustration-container",children:[o.jsxs("div",{className:"central-brain",children:[o.jsx(Zr,{size:80}),o.jsx("div",{className:"brain-pulse"}),o.jsx("div",{className:"brain-pulse delay-1"}),o.jsx("div",{className:"brain-pulse delay-2"})]}),o.jsx("div",{className:"floating-icon icon-1",children:o.jsx(wi,{size:28})}),o.jsx("div",{className:"floating-icon icon-2",children:o.jsx(Jg,{size:28})}),o.jsx("div",{className:"floating-icon icon-3",children:o.jsx(Lg,{size:28})}),o.jsx("div",{className:"floating-icon icon-4",children:o.jsx(rO,{size:28})}),o.jsx("div",{className:"floating-icon icon-5",children:o.jsx(Z0e,{size:28})}),o.jsx("div",{className:"floating-icon icon-6",children:o.jsx(Qo,{size:28})}),o.jsxs("svg",{className:"connection-lines",viewBox:"0 0 400 400",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.6"}),o.jsx("stop",{offset:"100%",stopColor:"#06b6d4",stopOpacity:"0.1"})]})}),o.jsx("circle",{cx:"200",cy:"200",r:"80",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"1",strokeDasharray:"5,5",className:"rotating-circle"}),o.jsx("circle",{cx:"200",cy:"200",r:"130",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"0.5",strokeDasharray:"3,3",className:"rotating-circle reverse"}),o.jsx("circle",{cx:"200",cy:"200",r:"170",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"0.5",strokeDasharray:"2,4",className:"rotating-circle"})]})]}),o.jsxs("h3",{className:"illustration-title",children:[o.jsx(Qo,{size:20}),"AI-Powered Learning"]}),o.jsx("p",{className:"illustration-desc",children:"Experience intelligent code evaluation and personalized feedback"})]})}function Zye(){const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,l]=C.useState(!1),[c,u]=C.useState(!1),{login:d}=Rb(),f=async A=>{A.preventDefault(),i(""),l(!0);const m=await d(t,n);m.success||i(m.error),l(!1)};return o.jsxs("div",{className:"login-page",children:[o.jsx(Yye,{}),o.jsxs("nav",{className:"login-nav",children:[o.jsxs("div",{className:"nav-logo",children:[o.jsx(Zr,{className:"logo-icon-svg",size:28}),o.jsx("span",{className:"logo-text",children:"Mentor Hub"})]}),o.jsxs("button",{className:"nav-login-btn",onClick:()=>u(!0),children:["Login ",o.jsx(Dg,{size:16})]})]}),o.jsxs("div",{className:"login-content",children:[o.jsxs("div",{className:"hero-section",children:[o.jsxs("div",{className:"hero-badge",children:[o.jsx(Zr,{size:16}),o.jsx("span",{children:"AI & Data Science Learning Platform"})]}),o.jsx("h1",{className:"hero-title",children:"Learn with Mentors"}),o.jsx("p",{className:"hero-subtitle",children:"Learn Machine Learning, Deep Learning, and Data Analytics with personalized mentorship, hands-on projects, and AI-powered code evaluation."}),o.jsxs("button",{className:"cta-button",onClick:()=>u(!0),children:["Get Started - It's Free ",o.jsx(Dg,{size:18})]})]}),o.jsx("div",{className:"dynamic-container",children:c?o.jsxs("div",{className:"login-card-inline animate-slideIn",children:[o.jsx("button",{className:"panel-back",onClick:()=>u(!1),children:o.jsx(Os,{size:20})}),o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"header-icon",children:o.jsx(Zr,{size:32})}),o.jsx("h2",{children:"Welcome Back"}),o.jsx("p",{children:"Sign in to continue your AI learning journey"})]}),o.jsxs("form",{onSubmit:f,className:"login-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email Address"}),o.jsxs("div",{className:"input-field",children:[o.jsx(L0e,{className:"field-icon",size:18}),o.jsx("input",{type:"email",id:"email",value:t,onChange:A=>e(A.target.value),placeholder:"Enter your email",required:!0})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"input-field",children:[o.jsx(R0e,{className:"field-icon",size:18}),o.jsx("input",{type:"password",id:"password",value:n,onChange:A=>r(A.target.value),placeholder:"Enter your password",required:!0})]})]}),s&&o.jsx("div",{className:"error-message",children:s}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"btn-spinner"}),"Signing in..."]}):o.jsxs(o.Fragment,{children:["Sign In",o.jsx(Dg,{size:18})]})})]})]}):o.jsx(Jye,{})})]})]})}const yv={en:{app_name:"AI Mentor Hub",loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search...",submit:"Submit",close:"Close",back:"Back",next:"Next",yes:"Yes",no:"No",confirm:"Confirm",actions:"Actions",status:"Status",view:"View",download:"Download",export:"Export",refresh:"Refresh",no_data:"No data available",error_occurred:"An error occurred",success:"Success",failed:"Failed",offline_message:"You are offline. Changes will sync when connected.",online_message:"You are back online!",syncing:"Syncing data...",login:"Login",logout:"Logout",email:"Email",password:"Password",sign_in:"Sign In",welcome_back:"Welcome Back",login_subtitle:"Sign in to your account",dashboard:"Dashboard",global_tasks:"Global Tasks",global_problems:"Global Problems",aptitude_tests:"Aptitude Tests",global_complete_tests:"Global Complete Tests",allocations:"Allocations",student_ranks:"Student Ranks",mentor_ranks:"Mentor Ranks",all_submissions:"All Submissions",live_monitoring:"Live Monitoring",admin_operations:"Admin Operations",upload_tasks:"Upload Tasks",upload_problems:"Upload Problems",leaderboard:"Leaderboard",coding_problems:"Coding Problems",my_submissions:"My Submissions",dark_mode:"Dark Mode",light_mode:"Light Mode",total_students:"Total Students",total_mentors:"Total Mentors",total_submissions:"Total Submissions",total_problems:"Total Problems",total_tasks:"Total Tasks",average_score:"Average Score",pass_rate:"Pass Rate",active_users:"Active Users",system_health:"System Health",bulk_operations:"Bulk Operations",audit_logs:"Audit Logs",templates:"Templates",backups:"Backups",data_export:"Data Export",analytics:"Analytics",solve_problem:"Solve Problem",run_code:"Run Code",submit_solution:"Submit Solution",test_cases:"Test Cases",passed:"Passed",failed_status:"Failed",score:"Score",difficulty:"Difficulty",easy:"Easy",medium:"Medium",hard:"Hard",language:"Language",proctored:"Proctored",camera_required:"Camera access required for proctored exams",tab_switch_warning:"Tab switch detected!",violation:"Violation",just_now:"Just now",minutes_ago:"{n} minutes ago",hours_ago:"{n} hours ago",days_ago:"{n} days ago",system_overview:"System Overview",system_administration:"System Administration",mentor_student_assignments:"Mentor-Student assignments",student_leaderboard:"Student Leaderboard",top_performers:"Top performers",mentor_leaderboard:"Mentor Leaderboard",mentor_activity:"Mentor activity",platform_wide_submissions:"Platform-wide submissions",tasks_visible_all:"Tasks visible to all users",coding_challenges_all:"Coding challenges for everyone",manage_aptitude_tests:"Manage aptitude tests for all students",global_tests_subtitle:"Aptitude, Verbal, Logical, Coding, SQL  create and manage",global_live_monitoring:"Global Live Monitoring",monitor_all_subtitle:"Monitor all mentors, students, and proctoring alerts",admin_ops_subtitle:"Bulk operations, backups, exports, audit logs & system health",ml_tasks:"ML Tasks",create_ml_tasks_subtitle:"Create machine learning tasks for students",create_problems_subtitle:"Create coding/SQL problems",student_rankings:"Student rankings",review_student_work:"Review student work with AI evaluation",live_student_monitoring:"Live Student Monitoring",realtime_activity_subtitle:"Real-time student activity and proctoring alerts",welcome_back_name:"Welcome back, {name}!",ml_tasks_subtitle:"Machine Learning tasks to complete",solve_coding_subtitle:"Solve coding and SQL problems",aptitude_subtitle:"Test your reasoning and analytical skills",global_tests_student_subtitle:"Aptitude, Verbal, Logical, Coding, SQL",submissions_subtitle:"View your submission history and reports",my_mentor:"My Mentor",skip_to_content:"Skip to main content",menu:"Menu",close_menu:"Close menu",open_menu:"Open menu",navigation:"Navigation",main_content:"Main content",my_analytics:"My Analytics",analytics_subtitle:"Track your performance and progress",analytics_dashboard_subtitle:"Student performance insights and reports",advanced_analytics_subtitle:"Platform-wide data analytics and insights",learning_path:"Learning Path",peer_comparison:"Peer Comparison",topic_analysis:"Topic Analysis",plagiarism_detection:"Plagiarism Detection",time_to_solve:"Time to Solve",export_report:"Export Report",overall_pass_rate:"Overall Pass Rate",problems_passed:"Problems Passed",total_attempts:"Total Attempts",weak_areas:"Weak Areas",strengths:"Strengths",fail_rate:"Fail Rate",avg_score:"Avg Score",submissions:"Submissions",students:"Students",by_difficulty:"By Difficulty",by_language:"By Language",most_attempted_problems:"Most Attempted Problems",plagiarism_flags:"Plagiarism Flags",plagiarism_rate:"Plagiarism Rate",repeat_offenders:"Repeat Offenders",no_offenders:"No repeat offenders found",most_copied_problems:"Most Copied Problems",copied_from:"Copied From",all_flagged_submissions:"All Flagged Submissions",no_plagiarism_detected:"No plagiarism detected",avg_time:"Avg Time",avg_attempts:"Avg Attempts",solve_rate:"Solve Rate",problems:"Problems",all_problems_metrics:"All Problems - Performance Metrics",export_platform_analytics:"Export Platform Analytics",export_platform_description:"Download comprehensive analytics data for offline analysis and reporting",download_csv:"Download CSV",download_json:"Download JSON",date:"Date",student:"Student",problem:"Problem",type:"Type",attempts:"Attempts",no_weak_areas:"No weak areas found - great job!",language_proficiency:"Language Proficiency",recommended_problems:"Recommended Problems",complete_more_problems:"Complete more problems to get recommendations",your_rank:"Your Rank",out_of:"out of",percentile:"Percentile",top_performer_msg:"You are in the top performers!",your_score_vs_class:"Your Score vs Class Average",problems_solved_label:"Problems Solved",tasks_completed:"Tasks Completed",you:"You",class_avg:"Class Avg",score_distribution:"Score Distribution",highlighted_your_position:"Your position is highlighted",language_vs_class:"Language vs Class Average",performance_by_type:"Performance by Type",performance_by_difficulty:"Performance by Difficulty",performance_by_language:"Performance by Language",most_attempted:"Most Attempted",by_problem_type:"By Problem Type",type_difficulty_heatmap:"Type-Difficulty Heatmap",flagged:"Flagged",flags:"Flags",flagged_submissions:"Flagged Submissions"},ta:{app_name:"AI  ",loading:"...",save:"",cancel:"",delete:"",edit:"",create:"",search:"...",submit:"",close:"",back:"",next:"",yes:"",no:"",confirm:"",actions:"",status:"",view:"",download:"",export:"",refresh:"",no_data:" ",error_occurred:" ",success:"",failed:"",offline_message:"  .   .",online_message:"   !",syncing:" ...",login:"",logout:"",email:"",password:"",sign_in:"",welcome_back:" ",login_subtitle:"  ",dashboard:"",global_tasks:" ",global_problems:" ",aptitude_tests:" ",global_complete_tests:" ",allocations:"",student_ranks:" ",mentor_ranks:" ",all_submissions:" ",live_monitoring:" ",admin_operations:" ",upload_tasks:" ",upload_problems:" ",leaderboard:" ",coding_problems:" ",my_submissions:" ",dark_mode:" ",light_mode:" ",total_students:" ",total_mentors:" ",total_submissions:" ",total_problems:" ",total_tasks:" ",average_score:" ",pass_rate:" ",active_users:"  ",system_health:" ",bulk_operations:" ",audit_logs:" ",templates:"",backups:"",data_export:" ",analytics:"",solve_problem:" ",run_code:" ",submit_solution:" ",test_cases:" ",passed:"",failed_status:"",score:"",difficulty:"",easy:"",medium:"",hard:"",language:"",proctored:"",camera_required:"    ",tab_switch_warning:"  !",violation:"",just_now:"",minutes_ago:"{n}  ",hours_ago:"{n}   ",days_ago:"{n}  ",system_overview:" ",system_administration:" ",mentor_student_assignments:"- ",student_leaderboard:"  ",top_performers:" ",mentor_leaderboard:"  ",mentor_activity:" ",platform_wide_submissions:"  ",tasks_visible_all:"   ",coding_challenges_all:"  ",manage_aptitude_tests:"    ",global_tests_subtitle:", , , , SQL    ",global_live_monitoring:"  ",monitor_all_subtitle:" ,     ",admin_ops_subtitle:" , , ,   &  ",ml_tasks:"ML ",create_ml_tasks_subtitle:"    ",create_problems_subtitle:"/SQL  ",student_rankings:" ",review_student_work:"AI     ",live_student_monitoring:"  ",realtime_activity_subtitle:"     ",welcome_back_name:" , {name}!",ml_tasks_subtitle:"    ",solve_coding_subtitle:"  SQL  ",aptitude_subtitle:"     ",global_tests_student_subtitle:", , , , SQL",submissions_subtitle:"     ",my_mentor:" ",skip_to_content:"  ",menu:"",close_menu:" ",open_menu:" ",navigation:"",main_content:" ",my_analytics:" ",analytics_subtitle:"    ",analytics_dashboard_subtitle:"  ",advanced_analytics_subtitle:"   ",learning_path:" ",peer_comparison:" ",topic_analysis:" ",plagiarism_detection:" ",time_to_solve:" ",export_report:" ",overall_pass_rate:"  ",problems_passed:"  ",total_attempts:" ",weak_areas:" ",strengths:"",fail_rate:" ",avg_score:" ",submissions:"",students:"",by_difficulty:" ",by_language:" ",most_attempted_problems:"  ",plagiarism_flags:" ",plagiarism_rate:" ",repeat_offenders:" ",no_offenders:"  ",most_copied_problems:"  ",copied_from:"",all_flagged_submissions:"  ",no_plagiarism_detected:" ",avg_time:" ",avg_attempts:" ",solve_rate:" ",problems:"",all_problems_metrics:"  -  ",export_platform_analytics:"   ",export_platform_description:"    ",download_csv:"CSV ",download_json:"JSON ",date:"",student:"",problem:"",type:"",attempts:"",no_weak_areas:"   -  !",language_proficiency:" ",recommended_problems:" ",complete_more_problems:"    ",your_rank:" ",out_of:"",percentile:" ",top_performer_msg:"   !",your_score_vs_class:"  vs  ",problems_solved_label:" ",tasks_completed:" ",you:"",class_avg:" ",score_distribution:" ",highlighted_your_position:"  ",language_vs_class:" vs  ",performance_by_type:"  ",performance_by_difficulty:"  ",performance_by_language:"  ",most_attempted:" ",by_problem_type:"  ",type_difficulty_heatmap:"-  ",flagged:"",flags:"",flagged_submissions:" "},hi:{app_name:"AI  ",loading:"   ...",save:" ",cancel:" ",delete:"",edit:" ",create:"",search:"...",submit:" ",close:" ",back:"",next:"",yes:"",no:"",confirm:" ",actions:"",status:"",view:"",download:"",export:"",refresh:"",no_data:"   ",error_occurred:"  ",success:"",failed:"",offline_message:"        ",online_message:"   !",syncing:"    ...",login:"",logout:"",email:"",password:"",sign_in:" ",welcome_back:"   ",login_subtitle:"     ",dashboard:"",global_tasks:" ",global_problems:" ",aptitude_tests:" ",global_complete_tests:" ",allocations:"",student_ranks:" ",mentor_ranks:" ",all_submissions:" ",live_monitoring:" ",admin_operations:" ",upload_tasks:"  ",upload_problems:"  ",leaderboard:"",coding_problems:" ",my_submissions:" ",dark_mode:" ",light_mode:" ",total_students:" ",total_mentors:" ",total_submissions:" ",total_problems:" ",total_tasks:" ",average_score:" ",pass_rate:" ",active_users:" ",system_health:" ",bulk_operations:" ",audit_logs:" ",templates:"",backups:"",data_export:" ",analytics:"",solve_problem:"  ",run_code:" ",submit_solution:"  ",test_cases:" ",passed:"",failed_status:"",score:"",difficulty:"",easy:"",medium:"",hard:"",language:"",proctored:"",camera_required:"     ",tab_switch_warning:"  !",violation:"",just_now:"",minutes_ago:"{n}  ",hours_ago:"{n}  ",days_ago:"{n}  ",system_overview:" ",system_administration:" ",mentor_student_assignments:"- ",student_leaderboard:" ",top_performers:" ",mentor_leaderboard:" ",mentor_activity:" ",platform_wide_submissions:"- ",tasks_visible_all:"     ",coding_challenges_all:"    ",manage_aptitude_tests:"       ",global_tests_subtitle:", , , , SQL     ",global_live_monitoring:"  ",monitor_all_subtitle:" ,       ",admin_ops_subtitle:" , , ,     ",ml_tasks:"ML ",create_ml_tasks_subtitle:"      ",create_problems_subtitle:"/SQL  ",student_rankings:" ",review_student_work:"AI        ",live_student_monitoring:"  ",realtime_activity_subtitle:"      ",welcome_back_name:"   , {name}!",ml_tasks_subtitle:"      ",solve_coding_subtitle:"  SQL   ",aptitude_subtitle:"       ",global_tests_student_subtitle:", , , , SQL",submissions_subtitle:"     ",my_mentor:" ",skip_to_content:"   ",menu:"",close_menu:"  ",open_menu:" ",navigation:"",main_content:" ",my_analytics:" ",analytics_subtitle:"      ",analytics_dashboard_subtitle:"    ",advanced_analytics_subtitle:"-  ",learning_path:"  ",peer_comparison:" ",topic_analysis:" ",plagiarism_detection:"  ",time_to_solve:"   ",export_report:" ",overall_pass_rate:"  ",problems_passed:" ",total_attempts:" ",weak_areas:" ",strengths:"",fail_rate:" ",avg_score:" ",submissions:"",students:"",by_difficulty:"  ",by_language:"  ",most_attempted_problems:"     ",plagiarism_flags:"  ",plagiarism_rate:"  ",repeat_offenders:"- ",no_offenders:" -   ",most_copied_problems:"     ",copied_from:"  ",all_flagged_submissions:"  ",no_plagiarism_detected:"     ",avg_time:" ",avg_attempts:" ",solve_rate:"   ",problems:"",all_problems_metrics:"  -  ",export_platform_analytics:"   ",export_platform_description:"       ",download_csv:"CSV  ",download_json:"JSON  ",date:"",student:"",problem:"",type:"",attempts:"",no_weak_areas:"    -  !",language_proficiency:" ",recommended_problems:" ",complete_more_problems:"        ",your_rank:" ",out_of:" ",percentile:"",top_performer_msg:"    !",your_score_vs_class:"    ",problems_solved_label:"   ",tasks_completed:"   ",you:"",class_avg:" ",score_distribution:" ",highlighted_your_position:"     ",language_vs_class:"   ",performance_by_type:"   ",performance_by_difficulty:"   ",performance_by_language:"   ",most_attempted:"    ",by_problem_type:"   ",type_difficulty_heatmap:"- ",flagged:"",flags:"",flagged_submissions:" "}},hZ=[{code:"en",name:"English",nativeName:"English",flag:""},{code:"ta",name:"Tamil",nativeName:"",flag:""},{code:"hi",name:"Hindi",nativeName:"",flag:""}],AZ=C.createContext(null);function E0(){const t=C.useContext(AZ);return t||{t:e=>e,locale:"en",setLocale:()=>{},languages:hZ}}function e1e({children:t}){const[e,n]=C.useState(()=>{const a=localStorage.getItem("locale");if(a&&yv[a])return a;const l=navigator.language?.split("-")[0];return yv[l]?l:"en"}),r=C.useCallback(a=>{yv[a]&&(n(a),localStorage.setItem("locale",a),document.documentElement.setAttribute("lang",a),document.documentElement.setAttribute("dir","ltr"))},[]),i={t:C.useCallback((a,l={})=>{let c=yv[e]?.[a]||yv.en?.[a]||a;return Object.entries(l).forEach(([u,d])=>{c=c.replace(new RegExp(`\\{${u}\\}`,"g"),d)}),c},[e]),locale:e,setLocale:r,languages:hZ};return o.jsx(AZ.Provider,{value:i,children:t})}function AD({children:t,navItems:e,title:n,subtitle:r,mentorInfo:s}){const{user:i,logout:a}=Rb(),{theme:l,toggleTheme:c}=Zbt(),{t:u,locale:d,setLocale:f,languages:A}=E0(),[m,g]=C.useState(!1),[y,x]=C.useState(navigator.onLine),[v,w]=C.useState(!1),[B,k]=C.useState({});C.useEffect(()=>{const I=()=>x(!0),O=()=>x(!1);return window.addEventListener("online",I),window.addEventListener("offline",O),()=>{window.removeEventListener("online",I),window.removeEventListener("offline",O)}},[]),C.useEffect(()=>{const I=O=>{O.key==="Escape"&&m&&g(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[m]);const j=I=>{k(O=>({...O,[I]:!O[I]}))};return o.jsxs("div",{className:"dashboard-layout",children:[o.jsx("a",{href:"#main-content",className:"skip-to-content",children:u("skip_to_content")}),!y&&o.jsxs("div",{role:"alert",style:{position:"fixed",top:0,left:0,right:0,zIndex:9999,background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#fff",textAlign:"center",padding:"0.5rem 1rem",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(k7,{size:16})," ",u("offline_message")]}),m&&o.jsx("div",{className:"sidebar-overlay",onClick:()=>g(!1),"aria-hidden":"true"}),o.jsxs("aside",{className:`sidebar ${m?"open":""}`,role:"navigation","aria-label":u("navigation"),children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"logo",children:[o.jsx("div",{className:"logo-icon",children:o.jsx(Zr,{size:18})}),o.jsx("span",{className:"logo-text",children:u("app_name")})]}),o.jsx("button",{className:"close-sidebar",onClick:()=>g(!1),"aria-label":u("close_menu"),children:o.jsx(Os,{size:24})})]}),o.jsx("nav",{className:"sidebar-nav","aria-label":u("navigation"),children:e.map(I=>{if(I.children&&I.children.length>0){const O=B[I.label]||I.defaultExpanded||!1;return o.jsxs("div",{className:"nav-group",children:[o.jsxs("button",{className:"nav-group-header",onClick:()=>j(I.label),"aria-expanded":O,children:[o.jsxs("span",{className:"nav-group-left",children:[I.icon,o.jsx("span",{children:I.label})]}),o.jsx(EA,{size:18,style:{transform:O?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),O&&o.jsx("div",{className:"nav-group-items",children:I.children.map((F,D)=>o.jsxs(tO,{to:F.path,className:({isActive:T})=>`nav-item nav-sub-item ${T?"active":""}`,onClick:()=>g(!1),"aria-current":({isActive:T})=>T?"page":void 0,children:[F.icon,o.jsx("span",{children:F.label})]},D))})]},I.label)}return o.jsxs(tO,{to:I.path,className:({isActive:O})=>`nav-item ${O?"active":""}`,onClick:()=>g(!1),"aria-current":({isActive:O})=>O?"page":void 0,children:[I.icon,o.jsx("span",{children:I.label}),I.badge>0&&o.jsx("span",{style:{marginLeft:"auto",background:"#ef4444",color:"white",borderRadius:"50%",minWidth:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:700,padding:"0 4px",animation:"pulse 2s infinite"},children:I.badge>99?"99+":I.badge})]},I.path)})}),o.jsxs("div",{className:"sidebar-footer",children:[o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("button",{className:"theme-btn",onClick:()=>w(!v),"aria-label":"Change language","aria-expanded":v,children:[o.jsx(ex,{size:18}),o.jsx("span",{children:A.find(I=>I.code===d)?.nativeName||"English"})]}),v&&o.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"4px",overflow:"hidden",boxShadow:"0 -4px 12px rgba(0,0,0,0.15)",zIndex:100},role:"listbox","aria-label":"Select language",children:A.map(I=>o.jsxs("button",{role:"option","aria-selected":d===I.code,onClick:()=>{f(I.code),w(!1)},style:{width:"100%",padding:"0.6rem 1rem",border:"none",background:d===I.code?"var(--primary-alpha)":"transparent",color:"var(--text)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",fontWeight:d===I.code?600:400},children:[o.jsx("span",{children:I.flag}),o.jsx("span",{children:I.nativeName})]},I.code))})]}),o.jsxs("button",{className:"theme-btn",onClick:c,"aria-label":u(l==="light"?"dark_mode":"light_mode"),children:[l==="light"?o.jsx(Y0e,{size:20}):o.jsx(bye,{size:20}),o.jsx("span",{children:u(l==="light"?"dark_mode":"light_mode")})]}),o.jsxs("div",{className:"user-info",children:[o.jsx("div",{className:"user-avatar","aria-hidden":"true",children:o.jsx(MB,{size:18})}),o.jsxs("div",{className:"user-details",children:[o.jsx("span",{className:"user-name",children:i?.name}),o.jsx("span",{className:"user-role",children:i?.role})]}),o.jsx("button",{className:"logout-btn",onClick:a,title:u("logout"),"aria-label":u("logout"),children:o.jsx(F0e,{size:18})})]})]})]}),o.jsxs("main",{className:"main-content",role:"main",children:[o.jsxs("header",{className:"content-header",role:"banner",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("button",{className:"menu-toggle",onClick:()=>g(!0),"aria-label":u("open_menu"),"aria-expanded":m,children:o.jsx(U0e,{size:24})}),o.jsxs("div",{className:"page-title",children:[o.jsx("h1",{children:n}),o.jsx("p",{children:r})]})]}),o.jsxs("div",{className:"header-right",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.8rem",color:y?"var(--success)":"var(--warning)",fontWeight:500},role:"status","aria-live":"polite",children:[y?o.jsx(fZ,{size:14}):o.jsx(k7,{size:14}),o.jsx("span",{className:"sr-only",children:y?"Online":"Offline"})]}),s&&o.jsxs("div",{className:"mentor-badge-nav",children:[o.jsx("div",{className:"mentor-avatar-nav","aria-hidden":"true",children:s.name.charAt(0).toUpperCase()}),o.jsxs("div",{className:"mentor-details-nav",children:[o.jsx("span",{className:"mentor-label-nav",children:u("my_mentor")}),o.jsx("span",{className:"mentor-name-nav",children:s.name})]})]})]})]}),o.jsx("div",{className:"content-body",id:"main-content",tabIndex:"-1",children:t})]})]})}function pZ(t,e){return function(){return t.apply(e,arguments)}}const{toString:t1e}=Object.prototype,{getPrototypeOf:pD}=Object,{iterator:Qj,toStringTag:mZ}=Symbol,Hj=(t=>e=>{const n=t1e.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bf=t=>(t=t.toLowerCase(),e=>Hj(e)===t),Wj=t=>e=>typeof e===t,{isArray:nx}=Array,j1=Wj("undefined");function xw(t){return t!==null&&!j1(t)&&t.constructor!==null&&!j1(t.constructor)&&Dc(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const gZ=bf("ArrayBuffer");function n1e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&gZ(t.buffer),e}const r1e=Wj("string"),Dc=Wj("function"),yZ=Wj("number"),bw=t=>t!==null&&typeof t=="object",s1e=t=>t===!0||t===!1,iB=t=>{if(Hj(t)!=="object")return!1;const e=pD(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mZ in t)&&!(Qj in t)},i1e=t=>{if(!bw(t)||xw(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},a1e=bf("Date"),o1e=bf("File"),l1e=bf("Blob"),c1e=bf("FileList"),u1e=t=>bw(t)&&Dc(t.pipe),d1e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Dc(t.append)&&((e=Hj(t))==="formdata"||e==="object"&&Dc(t.toString)&&t.toString()==="[object FormData]"))},f1e=bf("URLSearchParams"),[h1e,A1e,p1e,m1e]=["ReadableStream","Request","Response","Headers"].map(bf),g1e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vw(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),nx(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(xw(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(r=0;r<a;r++)l=i[r],e.call(null,t[l],l,t)}}function xZ(t,e){if(xw(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Eg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bZ=t=>!j1(t)&&t!==Eg;function cO(){const{caseless:t,skipUndefined:e}=bZ(this)&&this||{},n={},r=(s,i)=>{if(i==="__proto__"||i==="constructor"||i==="prototype")return;const a=t&&xZ(n,i)||i;iB(n[a])&&iB(s)?n[a]=cO(n[a],s):iB(s)?n[a]=cO({},s):nx(s)?n[a]=s.slice():(!e||!j1(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&vw(arguments[s],r);return n}const y1e=(t,e,n,{allOwnKeys:r}={})=>(vw(e,(s,i)=>{n&&Dc(s)?Object.defineProperty(t,i,{value:pZ(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),x1e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),b1e=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},v1e=(t,e,n,r)=>{let s,i,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&pD(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},w1e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},S1e=t=>{if(!t)return null;if(nx(t))return t;let e=t.length;if(!yZ(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},C1e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pD(Uint8Array)),k1e=(t,e)=>{const r=(t&&t[Qj]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},B1e=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},j1e=bf("HTMLFormElement"),E1e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),B7=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),I1e=bf("RegExp"),vZ=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};vw(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},N1e=t=>{vZ(t,(e,n)=>{if(Dc(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Dc(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},T1e=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return nx(t)?r(t):r(String(t).split(e)),n},_1e=()=>{},R1e=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function O1e(t){return!!(t&&Dc(t.append)&&t[mZ]==="FormData"&&t[Qj])}const F1e=t=>{const e=new Array(10),n=(r,s)=>{if(bw(r)){if(e.indexOf(r)>=0)return;if(xw(r))return r;if(!("toJSON"in r)){e[s]=r;const i=nx(r)?[]:{};return vw(r,(a,l)=>{const c=n(a,s+1);!j1(c)&&(i[l]=c)}),e[s]=void 0,i}}return r};return n(t,0)},D1e=bf("AsyncFunction"),L1e=t=>t&&(bw(t)||Dc(t))&&Dc(t.then)&&Dc(t.catch),wZ=((t,e)=>t?setImmediate:e?((n,r)=>(Eg.addEventListener("message",({source:s,data:i})=>{s===Eg&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Eg.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Dc(Eg.postMessage)),$1e=typeof queueMicrotask<"u"?queueMicrotask.bind(Eg):typeof process<"u"&&process.nextTick||wZ,P1e=t=>t!=null&&Dc(t[Qj]),lt={isArray:nx,isArrayBuffer:gZ,isBuffer:xw,isFormData:d1e,isArrayBufferView:n1e,isString:r1e,isNumber:yZ,isBoolean:s1e,isObject:bw,isPlainObject:iB,isEmptyObject:i1e,isReadableStream:h1e,isRequest:A1e,isResponse:p1e,isHeaders:m1e,isUndefined:j1,isDate:a1e,isFile:o1e,isBlob:l1e,isRegExp:I1e,isFunction:Dc,isStream:u1e,isURLSearchParams:f1e,isTypedArray:C1e,isFileList:c1e,forEach:vw,merge:cO,extend:y1e,trim:g1e,stripBOM:x1e,inherits:b1e,toFlatObject:v1e,kindOf:Hj,kindOfTest:bf,endsWith:w1e,toArray:S1e,forEachEntry:k1e,matchAll:B1e,isHTMLForm:j1e,hasOwnProperty:B7,hasOwnProp:B7,reduceDescriptors:vZ,freezeMethods:N1e,toObjectSet:T1e,toCamelCase:E1e,noop:_1e,toFiniteNumber:R1e,findKey:xZ,global:Eg,isContextDefined:bZ,isSpecCompliantForm:O1e,toJSONObject:F1e,isAsyncFn:D1e,isThenable:L1e,setImmediate:wZ,asap:$1e,isIterable:P1e};let Zn=class SZ extends Error{static from(e,n,r,s,i,a){const l=new SZ(e.message,n||e.code,r,s,i);return l.cause=e,l.name=e.name,a&&Object.assign(l,a),l}constructor(e,n,r,s,i){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}};Zn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Zn.ERR_BAD_OPTION="ERR_BAD_OPTION";Zn.ECONNABORTED="ECONNABORTED";Zn.ETIMEDOUT="ETIMEDOUT";Zn.ERR_NETWORK="ERR_NETWORK";Zn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Zn.ERR_DEPRECATED="ERR_DEPRECATED";Zn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Zn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Zn.ERR_CANCELED="ERR_CANCELED";Zn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Zn.ERR_INVALID_URL="ERR_INVALID_URL";const z1e=null;function uO(t){return lt.isPlainObject(t)||lt.isArray(t)}function CZ(t){return lt.endsWith(t,"[]")?t.slice(0,-2):t}function j7(t,e,n){return t?t.concat(e).map(function(s,i){return s=CZ(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function U1e(t){return lt.isArray(t)&&!t.some(uO)}const M1e=lt.toFlatObject(lt,{},null,function(e){return/^is[A-Z]/.test(e)});function Vj(t,e,n){if(!lt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=lt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!lt.isUndefined(x[y])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(e);if(!lt.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(lt.isDate(g))return g.toISOString();if(lt.isBoolean(g))return g.toString();if(!c&&lt.isBlob(g))throw new Zn("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(g)||lt.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,x){let v=g;if(g&&!x&&typeof g=="object"){if(lt.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(lt.isArray(g)&&U1e(g)||(lt.isFileList(g)||lt.endsWith(y,"[]"))&&(v=lt.toArray(g)))return y=CZ(y),v.forEach(function(B,k){!(lt.isUndefined(B)||B===null)&&e.append(a===!0?j7([y],k,i):a===null?y:y+"[]",u(B))}),!1}return uO(g)?!0:(e.append(j7(x,y,i),u(g)),!1)}const f=[],A=Object.assign(M1e,{defaultVisitor:d,convertValue:u,isVisitable:uO});function m(g,y){if(!lt.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),lt.forEach(g,function(v,w){(!(lt.isUndefined(v)||v===null)&&s.call(e,v,lt.isString(w)?w.trim():w,y,A))===!0&&m(v,y?y.concat(w):[w])}),f.pop()}}if(!lt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function E7(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function mD(t,e){this._pairs=[],t&&Vj(t,this,e)}const kZ=mD.prototype;kZ.append=function(e,n){this._pairs.push([e,n])};kZ.toString=function(e){const n=e?function(r){return e.call(this,r,E7)}:E7;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Q1e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function BZ(t,e,n){if(!e)return t;const r=n&&n.encode||Q1e,s=lt.isFunction(n)?{serialize:n}:n,i=s&&s.serialize;let a;if(i?a=i(e,s):a=lt.isURLSearchParams(e)?e.toString():new mD(e,s).toString(r),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class I7{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){lt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},H1e=typeof URLSearchParams<"u"?URLSearchParams:mD,W1e=typeof FormData<"u"?FormData:null,V1e=typeof Blob<"u"?Blob:null,q1e={isBrowser:!0,classes:{URLSearchParams:H1e,FormData:W1e,Blob:V1e},protocols:["http","https","file","blob","url","data"]},yD=typeof window<"u"&&typeof document<"u",dO=typeof navigator=="object"&&navigator||void 0,G1e=yD&&(!dO||["ReactNative","NativeScript","NS"].indexOf(dO.product)<0),K1e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",X1e=yD&&window.location.href||"http://localhost",Y1e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yD,hasStandardBrowserEnv:G1e,hasStandardBrowserWebWorkerEnv:K1e,navigator:dO,origin:X1e},Symbol.toStringTag,{value:"Module"})),Il={...Y1e,...q1e};function J1e(t,e){return Vj(t,new Il.classes.URLSearchParams,{visitor:function(n,r,s,i){return Il.isNode&&lt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Z1e(t){return lt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function exe(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function jZ(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&lt.isArray(s)?s.length:a,c?(lt.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!lt.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&lt.isArray(s[a])&&(s[a]=exe(s[a])),!l)}if(lt.isFormData(t)&&lt.isFunction(t.entries)){const n={};return lt.forEachEntry(t,(r,s)=>{e(Z1e(r),s,n,0)}),n}return null}function txe(t,e,n){if(lt.isString(t))try{return(e||JSON.parse)(t),lt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ww={transitional:gD,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=lt.isObject(e);if(i&&lt.isHTMLForm(e)&&(e=new FormData(e)),lt.isFormData(e))return s?JSON.stringify(jZ(e)):e;if(lt.isArrayBuffer(e)||lt.isBuffer(e)||lt.isStream(e)||lt.isFile(e)||lt.isBlob(e)||lt.isReadableStream(e))return e;if(lt.isArrayBufferView(e))return e.buffer;if(lt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J1e(e,this.formSerializer).toString();if((l=lt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Vj(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),txe(e)):e}],transformResponse:[function(e){const n=this.transitional||ww.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(lt.isResponse(e)||lt.isReadableStream(e))return e;if(e&&lt.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?Zn.from(l,Zn.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Il.classes.FormData,Blob:Il.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],t=>{ww.headers[t]={}});const nxe=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rxe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&nxe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},N7=Symbol("internals");function xv(t){return t&&String(t).trim().toLowerCase()}function aB(t){return t===!1||t==null?t:lt.isArray(t)?t.map(aB):String(t)}function sxe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ixe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function QT(t,e,n,r,s){if(lt.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!lt.isString(e)){if(lt.isString(r))return e.indexOf(r)!==-1;if(lt.isRegExp(r))return r.test(e)}}function axe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function oxe(t,e){const n=lt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let Lc=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,c,u){const d=xv(c);if(!d)throw new Error("header name must be a non-empty string");const f=lt.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=aB(l))}const a=(l,c)=>lt.forEach(l,(u,d)=>i(u,d,c));if(lt.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(lt.isString(e)&&(e=e.trim())&&!ixe(e))a(rxe(e),n);else if(lt.isObject(e)&&lt.isIterable(e)){let l={},c,u;for(const d of e){if(!lt.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?lt.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=xv(e),e){const r=lt.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return sxe(s);if(lt.isFunction(n))return n.call(this,s,r);if(lt.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xv(e),e){const r=lt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||QT(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=xv(a),a){const l=lt.findKey(r,a);l&&(!n||QT(r,r[l],l,n))&&(delete r[l],s=!0)}}return lt.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||QT(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return lt.forEach(this,(s,i)=>{const a=lt.findKey(r,i);if(a){n[a]=aB(s),delete n[i];return}const l=e?axe(i):String(i).trim();l!==i&&delete n[i],n[l]=aB(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return lt.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&lt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[N7]=this[N7]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=xv(a);r[l]||(oxe(s,a),r[l]=!0)}return lt.isArray(e)?e.forEach(i):i(e),this}};Lc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(Lc.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});lt.freezeMethods(Lc);function HT(t,e){const n=this||ww,r=e||n,s=Lc.from(r.headers);let i=r.data;return lt.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function EZ(t){return!!(t&&t.__CANCEL__)}let Sw=class extends Zn{constructor(e,n,r){super(e??"canceled",Zn.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function IZ(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Zn("Request failed with status code "+n.status,[Zn.ERR_BAD_REQUEST,Zn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function lxe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cxe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let f=i,A=0;for(;f!==s;)A+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const m=d&&u-d;return m?Math.round(A*1e3/m):void 0}}function uxe(t,e){let n=0,r=1e3/e,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-f)))},()=>s&&a(s)]}const QB=(t,e,n=3)=>{let r=0;const s=cxe(50,250);return uxe(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},n)},T7=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},_7=t=>(...e)=>lt.asap(()=>t(...e)),dxe=Il.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Il.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Il.origin),Il.navigator&&/(msie|trident)/i.test(Il.navigator.userAgent)):()=>!0,fxe=Il.hasStandardBrowserEnv?{write(t,e,n,r,s,i,a){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];lt.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),lt.isString(r)&&l.push(`path=${r}`),lt.isString(s)&&l.push(`domain=${s}`),i===!0&&l.push("secure"),lt.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function hxe(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Axe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function NZ(t,e,n){let r=!hxe(e);return t&&(r||n==!1)?Axe(t,e):e}const R7=t=>t instanceof Lc?{...t}:t;function e0(t,e){e=e||{};const n={};function r(u,d,f,A){return lt.isPlainObject(u)&&lt.isPlainObject(d)?lt.merge.call({caseless:A},u,d):lt.isPlainObject(d)?lt.merge({},d):lt.isArray(d)?d.slice():d}function s(u,d,f,A){if(lt.isUndefined(d)){if(!lt.isUndefined(u))return r(void 0,u,f,A)}else return r(u,d,f,A)}function i(u,d){if(!lt.isUndefined(d))return r(void 0,d)}function a(u,d){if(lt.isUndefined(d)){if(!lt.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>s(R7(u),R7(d),f,!0)};return lt.forEach(Object.keys({...t,...e}),function(d){if(d==="__proto__"||d==="constructor"||d==="prototype")return;const f=lt.hasOwnProp(c,d)?c[d]:s,A=f(t[d],e[d],d);lt.isUndefined(A)&&f!==l||(n[d]=A)}),n}const TZ=t=>{const e=e0({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=e;if(e.headers=a=Lc.from(a),e.url=BZ(NZ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),lt.isFormData(n)){if(Il.hasStandardBrowserEnv||Il.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(lt.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&a.set(d,f)})}}if(Il.hasStandardBrowserEnv&&(r&&lt.isFunction(r)&&(r=r(e)),r||r!==!1&&dxe(e.url))){const c=s&&i&&fxe.read(i);c&&a.set(s,c)}return e},pxe=typeof XMLHttpRequest<"u",mxe=pxe&&function(t){return new Promise(function(n,r){const s=TZ(t);let i=s.data;const a=Lc.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,A,m,g;function y(){m&&m(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function v(){if(!x)return;const B=Lc.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:B,config:t,request:x};IZ(function(O){n(O),y()},function(O){r(O),y()},j),x=null}"onloadend"in x?x.onloadend=v:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(v)},x.onabort=function(){x&&(r(new Zn("Request aborted",Zn.ECONNABORTED,t,x)),x=null)},x.onerror=function(k){const j=k&&k.message?k.message:"Network Error",I=new Zn(j,Zn.ERR_NETWORK,t,x);I.event=k||null,r(I),x=null},x.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||gD;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),r(new Zn(k,j.clarifyTimeoutError?Zn.ETIMEDOUT:Zn.ECONNABORTED,t,x)),x=null},i===void 0&&a.setContentType(null),"setRequestHeader"in x&&lt.forEach(a.toJSON(),function(k,j){x.setRequestHeader(j,k)}),lt.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),l&&l!=="json"&&(x.responseType=s.responseType),u&&([A,g]=QB(u,!0),x.addEventListener("progress",A)),c&&x.upload&&([f,m]=QB(c),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(d=B=>{x&&(r(!B||B.type?new Sw(null,t,x):B),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const w=lxe(s.url);if(w&&Il.protocols.indexOf(w)===-1){r(new Zn("Unsupported protocol "+w+":",Zn.ERR_BAD_REQUEST,t));return}x.send(i||null)})},gxe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Zn?d:new Sw(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new Zn(`timeout of ${e}ms exceeded`,Zn.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>lt.asap(l),c}},yxe=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},xxe=async function*(t,e){for await(const n of bxe(t))yield*yxe(n,e)},bxe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},O7=(t,e,n,r)=>{const s=xxe(t,e);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let A=i+=f;n(A)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},F7=64*1024,{isFunction:_C}=lt,vxe=(({Request:t,Response:e})=>({Request:t,Response:e}))(lt.global),{ReadableStream:D7,TextEncoder:L7}=lt.global,$7=(t,...e)=>{try{return!!t(...e)}catch{return!1}},wxe=t=>{t=lt.merge.call({skipUndefined:!0},vxe,t);const{fetch:e,Request:n,Response:r}=t,s=e?_C(e):typeof fetch=="function",i=_C(n),a=_C(r);if(!s)return!1;const l=s&&_C(D7),c=s&&(typeof L7=="function"?(g=>y=>g.encode(y))(new L7):async g=>new Uint8Array(await new n(g).arrayBuffer())),u=i&&l&&$7(()=>{let g=!1;const y=new n(Il.origin,{body:new D7,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),d=a&&l&&$7(()=>lt.isReadableStream(new r("").body)),f={stream:d&&(g=>g.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,x)=>{let v=y&&y[g];if(v)return v.call(y);throw new Zn(`Response type '${g}' is not supported`,Zn.ERR_NOT_SUPPORT,x)})});const A=async g=>{if(g==null)return 0;if(lt.isBlob(g))return g.size;if(lt.isSpecCompliantForm(g))return(await new n(Il.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(g)||lt.isArrayBuffer(g))return g.byteLength;if(lt.isURLSearchParams(g)&&(g=g+""),lt.isString(g))return(await c(g)).byteLength},m=async(g,y)=>{const x=lt.toFiniteNumber(g.getContentLength());return x??A(y)};return async g=>{let{url:y,method:x,data:v,signal:w,cancelToken:B,timeout:k,onDownloadProgress:j,onUploadProgress:I,responseType:O,headers:F,withCredentials:D="same-origin",fetchOptions:T}=TZ(g),N=e||fetch;O=O?(O+"").toLowerCase():"text";let P=gxe([w,B&&B.toAbortSignal()],k),z=null;const U=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let ee;try{if(I&&u&&x!=="get"&&x!=="head"&&(ee=await m(F,v))!==0){let H=new n(y,{method:"POST",body:v,duplex:"half"}),Q;if(lt.isFormData(v)&&(Q=H.headers.get("content-type"))&&F.setContentType(Q),H.body){const[X,re]=T7(ee,QB(_7(I)));v=O7(H.body,F7,X,re)}}lt.isString(D)||(D=D?"include":"omit");const q=i&&"credentials"in n.prototype,Z={...T,signal:P,method:x.toUpperCase(),headers:F.normalize().toJSON(),body:v,duplex:"half",credentials:q?D:void 0};z=i&&new n(y,Z);let G=await(i?N(z,T):N(y,Z));const ne=d&&(O==="stream"||O==="response");if(d&&(j||ne&&U)){const H={};["status","statusText","headers"].forEach(le=>{H[le]=G[le]});const Q=lt.toFiniteNumber(G.headers.get("content-length")),[X,re]=j&&T7(Q,QB(_7(j),!0))||[];G=new r(O7(G.body,F7,X,()=>{re&&re(),U&&U()}),H)}O=O||"text";let K=await f[lt.findKey(f,O)||"text"](G,g);return!ne&&U&&U(),await new Promise((H,Q)=>{IZ(H,Q,{data:K,headers:Lc.from(G.headers),status:G.status,statusText:G.statusText,config:g,request:z})})}catch(q){throw U&&U(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Zn("Network Error",Zn.ERR_NETWORK,g,z,q&&q.response),{cause:q.cause||q}):Zn.from(q,q&&q.code,g,z,q&&q.response)}}},Sxe=new Map,_Z=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let a=i.length,l=a,c,u,d=Sxe;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:wxe(e)),d=u;return u};_Z();const xD={http:z1e,xhr:mxe,fetch:{get:_Z}};lt.forEach(xD,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const P7=t=>`- ${t}`,Cxe=t=>lt.isFunction(t)||t===null||t===!1;function kxe(t,e){t=lt.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let a=0;a<n;a++){r=t[a];let l;if(s=r,!Cxe(r)&&(s=xD[(l=String(r)).toLowerCase()],s===void 0))throw new Zn(`Unknown adapter '${l}'`);if(s&&(lt.isFunction(s)||(s=s.get(e))))break;i[l||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map(P7).join(`
`):" "+P7(a[0]):"as no adapter specified";throw new Zn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const RZ={getAdapter:kxe,adapters:xD};function WT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Sw(null,t)}function z7(t){return WT(t),t.headers=Lc.from(t.headers),t.data=HT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),RZ.getAdapter(t.adapter||ww.adapter,t)(t).then(function(r){return WT(t),r.data=HT.call(t,t.transformResponse,r),r.headers=Lc.from(r.headers),r},function(r){return EZ(r)||(WT(t),r&&r.response&&(r.response.data=HT.call(t,t.transformResponse,r.response),r.response.headers=Lc.from(r.response.headers))),Promise.reject(r)})}const OZ="1.13.5",qj={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{qj[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const U7={};qj.transitional=function(e,n,r){function s(i,a){return"[Axios v"+OZ+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(e===!1)throw new Zn(s(a," has been removed"+(n?" in "+n:"")),Zn.ERR_DEPRECATED);return n&&!U7[a]&&(U7[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,l):!0}};qj.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Bxe(t,e,n){if(typeof t!="object")throw new Zn("options must be an object",Zn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new Zn("option "+i+" must be "+c,Zn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Zn("Unknown option "+i,Zn.ERR_BAD_OPTION)}}const oB={assertOptions:Bxe,validators:qj},Mu=oB.validators;let $g=class{constructor(e){this.defaults=e||{},this.interceptors={request:new I7,response:new I7}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=e0(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&oB.assertOptions(r,{silentJSONParsing:Mu.transitional(Mu.boolean),forcedJSONParsing:Mu.transitional(Mu.boolean),clarifyTimeoutError:Mu.transitional(Mu.boolean),legacyInterceptorReqResOrdering:Mu.transitional(Mu.boolean)},!1),s!=null&&(lt.isFunction(s)?n.paramsSerializer={serialize:s}:oB.assertOptions(s,{encode:Mu.function,serialize:Mu.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),oB.assertOptions(n,{baseUrl:Mu.spelling("baseURL"),withXsrfToken:Mu.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&lt.merge(i.common,i[n.method]);i&&lt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=Lc.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){if(typeof y.runWhen=="function"&&y.runWhen(n)===!1)return;c=c&&y.synchronous;const x=n.transitional||gD;x&&x.legacyInterceptorReqResOrdering?l.unshift(y.fulfilled,y.rejected):l.push(y.fulfilled,y.rejected)});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,f=0,A;if(!c){const g=[z7.bind(this),void 0];for(g.unshift(...l),g.push(...u),A=g.length,d=Promise.resolve(n);f<A;)d=d.then(g[f++],g[f++]);return d}A=l.length;let m=n;for(;f<A;){const g=l[f++],y=l[f++];try{m=g(m)}catch(x){y.call(this,x);break}}try{d=z7.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,A=u.length;f<A;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=e0(this.defaults,e);const n=NZ(e.baseURL,e.url,e.allowAbsoluteUrls);return BZ(n,e.params,e.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(e){$g.prototype[e]=function(n,r){return this.request(e0(r||{},{method:e,url:n,data:(r||{}).data}))}});lt.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,l){return this.request(e0(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}$g.prototype[e]=n(),$g.prototype[e+"Form"]=n(!0)});let jxe=class FZ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,l){r.reason||(r.reason=new Sw(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new FZ(function(s){e=s}),cancel:e}}};function Exe(t){return function(n){return t.apply(null,n)}}function Ixe(t){return lt.isObject(t)&&t.isAxiosError===!0}const fO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fO).forEach(([t,e])=>{fO[e]=t});function DZ(t){const e=new $g(t),n=pZ($g.prototype.request,e);return lt.extend(n,$g.prototype,e,{allOwnKeys:!0}),lt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return DZ(e0(t,s))},n}const Xe=DZ(ww);Xe.Axios=$g;Xe.CanceledError=Sw;Xe.CancelToken=jxe;Xe.isCancel=EZ;Xe.VERSION=OZ;Xe.toFormData=Vj;Xe.AxiosError=Zn;Xe.Cancel=Xe.CanceledError;Xe.all=function(e){return Promise.all(e)};Xe.spread=Exe;Xe.isAxiosError=Ixe;Xe.mergeConfig=e0;Xe.AxiosHeaders=Lc;Xe.formToJSON=t=>jZ(lt.isHTMLForm(t)?new FormData(t):t);Xe.getAdapter=RZ.getAdapter;Xe.HttpStatusCode=fO;Xe.default=Xe;const{Axios:avt,AxiosError:ovt,CanceledError:lvt,isCancel:cvt,CancelToken:uvt,VERSION:dvt,all:fvt,Cancel:hvt,isAxiosError:Avt,spread:pvt,toFormData:mvt,AxiosHeaders:gvt,HttpStatusCode:yvt,formToJSON:xvt,getAdapter:bvt,mergeConfig:vvt}=Xe,Nxe="http://localhost:8000/api";function Txe(t,e){const n=[...t];let r=n.length;const s=()=>(e=(e*9301+49297)%233280,e/233280);for(;r>0;){const i=Math.floor(s()*r);r--,[n[r],n[i]]=[n[i],n[r]]}return n}function _xe(t,e){const n=`${t}-${e}`;let r=0;for(let s=0;s<n.length;s++){const i=n.charCodeAt(s);r=(r<<5)-r+i,r=r&r}return Math.abs(r)}function Rxe({test:t,user:e,onClose:n,onComplete:r}){const[s,i]=C.useState(0),[a,l]=C.useState({}),[c,u]=C.useState(t.duration*60),[d,f]=C.useState(0),[A,m]=C.useState(!1),[g,y]=C.useState(""),[x,v]=C.useState(!1),[w,B]=C.useState(!1),[k,j]=C.useState(null),[I,O]=C.useState(!1),F=t.questions||[],D=C.useMemo(()=>{const K=_xe(e.id,t.id);return Txe(F,K)},[F,e.id,t.id]),T=C.useRef(null),N=C.useRef(a),P=C.useRef(d),z=C.useRef(c);C.useEffect(()=>{N.current=a},[a]),C.useEffect(()=>{P.current=d},[d]),C.useEffect(()=>{z.current=c},[c]),C.useEffect(()=>((async()=>{try{await document.documentElement.requestFullscreen()}catch(H){console.log("Fullscreen request failed:",H)}})(),()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}),[]),C.useEffect(()=>{if(!(k||w))return T.current=setInterval(()=>{u(K=>K<=1?(clearInterval(T.current),Z(),0):K-1)},1e3),()=>clearInterval(T.current)},[k,w]);const U=t.maxTabSwitches||3;C.useEffect(()=>{const K=()=>{document.hidden&&!k&&!w&&f(H=>{const Q=H+1;return Q>=U?(y(` DISQUALIFIED! You have exceeded the maximum allowed tab switches (${Q}/${U}). Test terminated.`),m(!0),B(!0),setTimeout(()=>{Z(!0)},3e3)):(y(` Tab switch detected! (${Q}/${U} violations) ${U-Q} more will disqualify you!`),m(!0),setTimeout(()=>m(!1),4e3)),Q})};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[k,w]),C.useEffect(()=>{const K=Q=>Q.preventDefault(),H=Q=>{(Q.ctrlKey||Q.altKey||Q.metaKey)&&["c","v","u","p","s","a"].includes(Q.key.toLowerCase())&&Q.preventDefault(),(Q.key==="F12"||Q.key==="Escape")&&Q.preventDefault()};return document.addEventListener("contextmenu",K),document.addEventListener("keydown",H),()=>{document.removeEventListener("contextmenu",K),document.removeEventListener("keydown",H)}},[]);const ee=K=>{const H=Math.floor(K/60),Q=K%60;return`${H.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`},q=(K,H)=>{l(Q=>({...Q,[K]:H}))},Z=async(K=!1)=>{v(!0);try{const H=N.current,Q=P.current,X=z.current,re=await Xe.post(`${Nxe}/aptitude/${t.id}/submit`,{studentId:e.id,answers:K?{}:H,timeSpent:t.duration*60-X,tabSwitches:Q});j(re.data.submission),O(!0)}catch(H){console.error("Submit failed:",H)}finally{v(!1)}},G=async()=>{if(Object.keys(a).length<D.length){const K=D.length-Object.keys(a).length;if(!window.confirm(`You have ${K} unanswered question(s). Submit anyway?`))return}await Z()},ne=Object.keys(a).length;return I&&k?o.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflowY:"auto"},children:o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(15, 23, 42, 0.5)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:k.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Zr,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Aptitude Test Report"}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:t.title})]})]}),o.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:o.jsx(kr,{size:20})})]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:k.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${k.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:k.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[k.score,"%"]}),o.jsx("div",{style:{color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:"Overall Score"})]}),o.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:k.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${k.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[k.status==="passed"?o.jsx(Nn,{size:28,color:"#10b981"}):o.jsx(kr,{size:28,color:"#ef4444"}),o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:k.status==="passed"?"#10b981":"#ef4444"},children:k.status==="passed"?"PASSED":"FAILED"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:k.totalQuestions}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Total Questions"})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:k.correctCount}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Correct"})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:k.totalQuestions-k.correctCount}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Incorrect"})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(k.tabSwitches||d||0)>0?"#f59e0b":"#10b981"},children:k.tabSwitches||d||0}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[o.jsx(Pn,{size:12}),"Violations"]})]}),o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:k.timeSpent?`${Math.floor(k.timeSpent/60)}m`:`${Math.round((t.duration*60-c)/60)}m`}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[o.jsx(ls,{size:12}),"Time Spent"]})]})]}),(k.tabSwitches||d||0)>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[o.jsx(Pn,{size:24,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:["You switched tabs/windows ",k.tabSwitches||d||0," time(s) during the test."]})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:600,color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:k.questionResults?.map((K,H)=>o.jsxs("div",{style:{padding:"1.25rem",background:K.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${K.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:K.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:K.isCorrect?"":""}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",H+1]}),K.category&&o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:K.category})]}),o.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,color:"white",lineHeight:1.5},children:K.question})]})]}),o.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:K.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${K.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Your Answer:"}),o.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:K.isCorrect?"#10b981":"#ef4444"},children:K.userAnswer||"(Not answered)"})]}),!K.isCorrect&&o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Correct Answer:"}),o.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:K.correctAnswer})]}),K.explanation&&o.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:" Explanation"}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",lineHeight:1.5},children:K.explanation})]})]})]},H))})]})]}),o.jsx("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(15, 23, 42, 0.5)",display:"flex",justifyContent:"flex-end"},children:o.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{padding:"0.875rem 2rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"10px",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"Close & Return"})})]})}):o.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 2rem",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(Zr,{size:28,color:"#8b5cf6"}),o.jsx("div",{children:o.jsxs("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"white"},children:["Aptitude Test  ",t.title]})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:c<60?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",padding:"0.5rem 1rem",borderRadius:"8px",border:`1px solid ${c<60?"#ef4444":"#10b981"}`},children:[o.jsx(ls,{size:20,color:c<60?"#ef4444":"#10b981"}),o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"monospace",color:c<60?"#ef4444":"#10b981"},children:ee(c)})]})]}),A&&o.jsxs("div",{style:{background:d>=3?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #f59e0b, #d97706)",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",animation:"pulse 1s infinite"},children:[o.jsx(Pn,{size:24,color:"white"}),o.jsx("span",{style:{color:"white",fontWeight:600},children:g})]}),o.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[o.jsxs("div",{style:{width:"200px",background:"rgba(30, 41, 59, 0.5)",borderRight:"1px solid rgba(139, 92, 246, 0.2)",padding:"1.5rem",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:16})," Question Palette"]}),o.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:[ne,"/",D.length," Answered"]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1.5rem"},children:D.map((K,H)=>o.jsx("button",{onClick:()=>i(H),style:{width:"36px",height:"36px",borderRadius:"8px",border:s===H?"2px solid #3b82f6":"none",background:a[K.id]?"linear-gradient(135deg, #10b981, #06b6d4)":s===H?"rgba(59, 130, 246, 0.3)":"rgba(71, 85, 105, 0.5)",color:"white",fontWeight:600,fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s"},children:H+1},K.id))}),o.jsxs("div",{style:{marginTop:"auto"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"linear-gradient(135deg, #10b981, #06b6d4)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Answered"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"rgba(71, 85, 105, 0.5)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unanswered"})]})]}),o.jsxs("button",{onClick:G,disabled:x,style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontSize:"0.95rem",fontWeight:600,cursor:x?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:x?.7:1},children:[o.jsx($c,{size:18}),x?"Submitting...":"Submit Test"]})]}),o.jsx("div",{style:{flex:1,padding:"2rem 4rem",overflowY:"auto"},children:D[s]&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("span",{style:{color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",s+1," of ",D.length]}),o.jsx("h2",{style:{margin:"1rem 0",fontSize:"1.5rem",fontWeight:600,color:"white",lineHeight:1.5},children:D[s].question}),D[s].category&&o.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",fontSize:"0.8rem",color:"#a78bfa"},children:D[s].category})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:D[s].options.map((K,H)=>{const Q=["A","B","C","D"][H],X=a[D[s].id]===K;return o.jsxs("button",{onClick:()=>q(D[s].id,K),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem 1.5rem",background:X?"rgba(59, 130, 246, 0.15)":"rgba(30, 41, 59, 0.8)",border:X?"2px solid #3b82f6":"1px solid rgba(71, 85, 105, 0.5)",borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:X?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(71, 85, 105, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:700,fontSize:"0.9rem"},children:Q}),o.jsx("span",{style:{color:X?"#3b82f6":"rgba(255,255,255,0.9)",fontSize:"1.05rem",fontWeight:X?600:400},children:K})]},H)})}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3rem"},children:[o.jsxs("button",{onClick:()=>i(K=>Math.max(0,K-1)),disabled:s===0,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",color:s===0?"rgba(255,255,255,0.3)":"white",cursor:s===0?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:[o.jsx(B1,{size:20})," Previous"]}),o.jsxs("button",{onClick:()=>i(K=>Math.min(D.length-1,K+1)),disabled:s===D.length-1,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:s===D.length-1?"rgba(71, 85, 105, 0.5)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"8px",color:s===D.length-1?"rgba(255,255,255,0.3)":"white",cursor:s===D.length-1?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:["Next ",o.jsx(hm,{size:20})]})]})]})})]})]})}function M7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Oxe(t){if(Array.isArray(t))return t}function Fxe(t,e,n){return(e=Mxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function Lxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function H7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(n),!0).forEach(function(r){Fxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $xe(t,e){if(t==null)return{};var n,r,s=Pxe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Pxe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function zxe(t,e){return Oxe(t)||Dxe(t,e)||Qxe(t,e)||Lxe()}function Uxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mxe(t){var e=Uxe(t,"string");return typeof e=="symbol"?e:e+""}function Qxe(t,e){if(t){if(typeof t=="string")return M7(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M7(t,e):void 0}}function Hxe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function V7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W7(Object(n),!0).forEach(function(r){Hxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,i){return i(s)},r)}}function Gv(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return e.apply(n,[].concat(s,l))}}}function HB(t){return{}.toString.call(t).includes("Object")}function Vxe(t){return!Object.keys(t).length}function E2(t){return typeof t=="function"}function qxe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gxe(t,e){return HB(e)||nm("changeType"),Object.keys(e).some(function(n){return!qxe(t,n)})&&nm("changeField"),e}function Kxe(t){E2(t)||nm("selectorType")}function Xxe(t){E2(t)||HB(t)||nm("handlerType"),HB(t)&&Object.values(t).some(function(e){return!E2(e)})&&nm("handlersType")}function Yxe(t){t||nm("initialIsRequired"),HB(t)||nm("initialType"),Vxe(t)&&nm("initialContent")}function Jxe(t,e){throw new Error(t[e]||t.default)}var Zxe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},nm=Gv(Jxe)(Zxe),RC={changes:Gxe,selector:Kxe,handler:Xxe,initial:Yxe};function ebe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};RC.initial(t),RC.handler(e);var n={current:t},r=Gv(rbe)(n,e),s=Gv(nbe)(n),i=Gv(RC.changes)(t),a=Gv(tbe)(n);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return RC.selector(u),u(n.current)}function c(u){Wxe(r,s,i,a)(u)}return[l,c]}function tbe(t,e){return E2(e)?e(t.current):e}function nbe(t,e){return t.current=V7(V7({},t.current),e),e}function rbe(t,e,n){return E2(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var sbe={create:ebe},ibe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function abe(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return e.apply(n,[].concat(s,l))}}}function obe(t){return{}.toString.call(t).includes("Object")}function lbe(t){return t||q7("configIsRequired"),obe(t)||q7("configType"),t.urls?(cbe(),{paths:{vs:t.urls.monacoBase}}):t}function cbe(){console.warn(LZ.deprecation)}function ube(t,e){throw new Error(t[e]||t.default)}var LZ={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},q7=abe(ube)(LZ),dbe={config:lbe},fbe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(i,a){return a(i)},s)}};function $Z(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],$Z(t[n],e[n]))}),H7(H7({},t),e)}var hbe={type:"cancelation",msg:"operation is manually canceled"};function VT(t){var e=!1,n=new Promise(function(r,s){t.then(function(i){return e?s(hbe):r(i)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var Abe=["monaco"],pbe=sbe.create({config:ibe,isInitialized:!1,resolve:null,reject:null,monaco:null}),PZ=zxe(pbe,2),Cw=PZ[0],Gj=PZ[1];function mbe(t){var e=dbe.config(t),n=e.monaco,r=$xe(e,Abe);Gj(function(s){return{config:$Z(s.config,r),monaco:n}})}function gbe(){var t=Cw(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Gj({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),VT(qT);if(window.monaco&&window.monaco.editor)return zZ(window.monaco),t.resolve(window.monaco),VT(qT);fbe(ybe,bbe)(vbe)}return VT(qT)}function ybe(t){return document.body.appendChild(t)}function xbe(t){var e=document.createElement("script");return t&&(e.src=t),e}function bbe(t){var e=Cw(function(r){var s=r.config,i=r.reject;return{config:s,reject:i}}),n=xbe("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function vbe(){var t=Cw(function(n){var r=n.config,s=n.resolve,i=n.reject;return{config:r,resolve:s,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;zZ(r),t.resolve(r)},function(n){t.reject(n)})}function zZ(t){Cw().monaco||Gj({monaco:t})}function wbe(){return Cw(function(t){var e=t.monaco;return e})}var qT=new Promise(function(t,e){return Gj({resolve:t,reject:e})}),UZ={config:mbe,init:gbe,__getMonacoInstance:wbe},Sbe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},GT=Sbe,Cbe={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},kbe=Cbe;function Bbe({children:t}){return xA.createElement("div",{style:kbe.container},t)}var jbe=Bbe,Ebe=jbe;function Ibe({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:i,wrapperProps:a}){return xA.createElement("section",{style:{...GT.wrapper,width:t,height:e},...a},!n&&xA.createElement(Ebe,null,r),xA.createElement("div",{ref:s,style:{...GT.fullWidth,...!n&&GT.hide},className:i}))}var Nbe=Ibe,MZ=C.memo(Nbe);function Tbe(t){C.useEffect(t,[])}var QZ=Tbe;function _be(t,e,n=!0){let r=C.useRef(!0);C.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var lu=_be;function A2(){}function s1(t,e,n,r){return Rbe(t,r)||Obe(t,e,n,r)}function Rbe(t,e){return t.editor.getModel(HZ(t,e))}function Obe(t,e,n,r){return t.editor.createModel(e,n,r?HZ(t,r):void 0)}function HZ(t,e){return t.Uri.parse(e)}function Fbe({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:i,modifiedModelPath:a,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:u="light",loading:d="Loading...",options:f={},height:A="100%",width:m="100%",className:g,wrapperProps:y={},beforeMount:x=A2,onMount:v=A2}){let[w,B]=C.useState(!1),[k,j]=C.useState(!0),I=C.useRef(null),O=C.useRef(null),F=C.useRef(null),D=C.useRef(v),T=C.useRef(x),N=C.useRef(!1);QZ(()=>{let ee=UZ.init();return ee.then(q=>(O.current=q)&&j(!1)).catch(q=>q?.type!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>I.current?U():ee.cancel()}),lu(()=>{if(I.current&&O.current){let ee=I.current.getOriginalEditor(),q=s1(O.current,t||"",r||n||"text",i||"");q!==ee.getModel()&&ee.setModel(q)}},[i],w),lu(()=>{if(I.current&&O.current){let ee=I.current.getModifiedEditor(),q=s1(O.current,e||"",s||n||"text",a||"");q!==ee.getModel()&&ee.setModel(q)}},[a],w),lu(()=>{let ee=I.current.getModifiedEditor();ee.getOption(O.current.editor.EditorOption.readOnly)?ee.setValue(e||""):e!==ee.getValue()&&(ee.executeEdits("",[{range:ee.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),ee.pushUndoStop())},[e],w),lu(()=>{I.current?.getModel()?.original.setValue(t||"")},[t],w),lu(()=>{let{original:ee,modified:q}=I.current.getModel();O.current.editor.setModelLanguage(ee,r||n||"text"),O.current.editor.setModelLanguage(q,s||n||"text")},[n,r,s],w),lu(()=>{O.current?.editor.setTheme(u)},[u],w),lu(()=>{I.current?.updateOptions(f)},[f],w);let P=C.useCallback(()=>{if(!O.current)return;T.current(O.current);let ee=s1(O.current,t||"",r||n||"text",i||""),q=s1(O.current,e||"",s||n||"text",a||"");I.current?.setModel({original:ee,modified:q})},[n,e,s,t,r,i,a]),z=C.useCallback(()=>{!N.current&&F.current&&(I.current=O.current.editor.createDiffEditor(F.current,{automaticLayout:!0,...f}),P(),O.current?.editor.setTheme(u),B(!0),N.current=!0)},[f,u,P]);C.useEffect(()=>{w&&D.current(I.current,O.current)},[w]),C.useEffect(()=>{!k&&!w&&z()},[k,w,z]);function U(){let ee=I.current?.getModel();l||ee?.original?.dispose(),c||ee?.modified?.dispose(),I.current?.dispose()}return xA.createElement(MZ,{width:m,height:A,isEditorReady:w,loading:d,_ref:F,className:g,wrapperProps:y})}var Dbe=Fbe;C.memo(Dbe);function Lbe(t){let e=C.useRef();return C.useEffect(()=>{e.current=t},[t]),e.current}var $be=Lbe,OC=new Map;function Pbe({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:i,theme:a="light",line:l,loading:c="Loading...",options:u={},overrideServices:d={},saveViewState:f=!0,keepCurrentModel:A=!1,width:m="100%",height:g="100%",className:y,wrapperProps:x={},beforeMount:v=A2,onMount:w=A2,onChange:B,onValidate:k=A2}){let[j,I]=C.useState(!1),[O,F]=C.useState(!0),D=C.useRef(null),T=C.useRef(null),N=C.useRef(null),P=C.useRef(w),z=C.useRef(v),U=C.useRef(),ee=C.useRef(r),q=$be(i),Z=C.useRef(!1),G=C.useRef(!1);QZ(()=>{let H=UZ.init();return H.then(Q=>(D.current=Q)&&F(!1)).catch(Q=>Q?.type!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>T.current?K():H.cancel()}),lu(()=>{let H=s1(D.current,t||r||"",e||s||"",i||n||"");H!==T.current?.getModel()&&(f&&OC.set(q,T.current?.saveViewState()),T.current?.setModel(H),f&&T.current?.restoreViewState(OC.get(i)))},[i],j),lu(()=>{T.current?.updateOptions(u)},[u],j),lu(()=>{!T.current||r===void 0||(T.current.getOption(D.current.editor.EditorOption.readOnly)?T.current.setValue(r):r!==T.current.getValue()&&(G.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),T.current.pushUndoStop(),G.current=!1))},[r],j),lu(()=>{let H=T.current?.getModel();H&&s&&D.current?.editor.setModelLanguage(H,s)},[s],j),lu(()=>{l!==void 0&&T.current?.revealLine(l)},[l],j),lu(()=>{D.current?.editor.setTheme(a)},[a],j);let ne=C.useCallback(()=>{if(!(!N.current||!D.current)&&!Z.current){z.current(D.current);let H=i||n,Q=s1(D.current,r||t||"",e||s||"",H||"");T.current=D.current?.editor.create(N.current,{model:Q,automaticLayout:!0,...u},d),f&&T.current.restoreViewState(OC.get(H)),D.current.editor.setTheme(a),l!==void 0&&T.current.revealLine(l),I(!0),Z.current=!0}},[t,e,n,r,s,i,u,d,f,a,l]);C.useEffect(()=>{j&&P.current(T.current,D.current)},[j]),C.useEffect(()=>{!O&&!j&&ne()},[O,j,ne]),ee.current=r,C.useEffect(()=>{j&&B&&(U.current?.dispose(),U.current=T.current?.onDidChangeModelContent(H=>{G.current||B(T.current.getValue(),H)}))},[j,B]),C.useEffect(()=>{if(j){let H=D.current.editor.onDidChangeMarkers(Q=>{let X=T.current.getModel()?.uri;if(X&&Q.find(re=>re.path===X.path)){let re=D.current.editor.getModelMarkers({resource:X});k?.(re)}});return()=>{H?.dispose()}}return()=>{}},[j,k]);function K(){U.current?.dispose(),A?f&&OC.set(i,T.current.saveViewState()):T.current.getModel()?.dispose(),T.current.dispose()}return xA.createElement(MZ,{width:m,height:g,isEditorReady:j,loading:c,_ref:N,className:y,wrapperProps:x})}var zbe=Pbe,Ube=C.memo(zbe),kw=Ube;const Mbe=1e-7,Qbe=1e-4;class bD{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Kj{refCount(e){return jc("refCount")}incRef(e){return jc("incRef")}timerAvailable(){return!0}time(e){return jc("time")}read(e){return jc("read")}readSync(e){return jc("readSync")}readToGPU(e,n){return jc("readToGPU")}numDataIds(){return jc("numDataIds")}disposeData(e,n){return jc("disposeData")}write(e,n,r){return jc("write")}move(e,n,r,s,i){return jc("move")}createTensorFromGPUData(e,n,r){return jc("createTensorFromGPUData")}memory(){return jc("memory")}floatPrecision(){return jc("floatPrecision")}epsilon(){return this.floatPrecision()===32?Mbe:Qbe}dispose(){return jc("dispose")}}function jc(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function vD(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,hA(t,e,n)}function Hbe(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,hA(t,n,r),hA(e,n,r)}function pm(t,e,n){return Math.max(t,Math.min(e,n))}function Xj(t){return t%2===0?t:t+1}function hA(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function WZ(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Wbe(t,e){const n=Math.random();return e*n+(1-n)*t}function Vbe(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function ce(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Wo(t,e,n=""){ce(vr(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function I0(t){ce(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function it(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function qbe(t){return t.length===0}function VZ(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function vr(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function t0(t){return t%1===0}function Gbe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function WB(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Kbe(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return vD(e),e}function Pg(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function hO(t,e=s=>0,n,r){return new Promise((s,i)=>{let a=0;const l=()=>{if(t()){s();return}a++;const c=e(a);if(n!=null&&a>=n){i();return}r!=null?r(l,c):setTimeout(l,c)};l()})}function wD(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Ar(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),ce(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),ce(t.every(r=>t0(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function VA(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Ar(e,t).sort();let a=0;for(let l=0;l<t.length;++l){if(i!=null){if(i[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(i[a]==null||i[a]>l)&&t[l]===1&&(n.push(t[l]),r.push(l)),i[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),r.push(l))}return{newShape:n,keptDims:r}}function go(t,e){return ca(t,e)}function ca(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function qZ(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function GZ(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function SD(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function I2(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function KZ(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function eh(t){return typeof t=="string"||t instanceof String}function XZ(t){return typeof t=="boolean"}function VB(t){return typeof t=="number"}function N0(t){return Array.isArray(t)?N0(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":VB(t)?"float32":eh(t)?"string":XZ(t)?"bool":"float32"}function mm(t){return!!(t&&t.constructor&&t.call&&t.apply)}function qB(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function On(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function YZ(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let a=0;a<i;a++)s[a]=n[t+a]}else{const i=e[0],a=e.slice(1),l=a.reduce((c,u)=>c*u)*(r?2:1);for(let c=0;c<i;c++)s[c]=YZ(t+c*l,a,n,r)}return s}function yu(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return YZ(0,t,e,n)}function JZ(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Yj(t,e){const n=Ho(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Ho(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function CD(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return yu(t,new Float32Array(n));if(e==="int32")return yu(t,new Int32Array(n));if(e==="bool")return yu(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Qc(t){t.forEach(e=>{ce(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function af(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function T0(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function gm(t){return t&&t.then&&typeof t.then=="function"}const G7="tfjsflags";class ZZ{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Xbe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(gm(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);G7 in e&&e[G7].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=Jbe(s,i)})}}function Xbe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Ybe(e,r[0],r[1]),r.join("="))),e}function Ybe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Jbe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Ye(){return kD}let kD=null;function Zbe(t){kD=t}let KT;function eee(){if(KT==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");KT=t}return KT}function eve(){const t=eee();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function BD(t,e){const n=eve();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Bw="Abs",rx="Acos",sx="Acosh",_0="Add",jw="AddN",Jj="All",Zj="Any",Ew="ArgMax",Iw="ArgMin",ix="Asin",ax="Asinh",ox="Atan",lx="Atanh",cx="Atan2",Nw="AvgPool",eE="AvgPoolGrad",Tw="AvgPool3D",tE="AvgPool3DGrad",_w="BatchMatMul",Rw="BatchToSpaceND",nE="Bincount",Ow="BitwiseAnd",tee="BroadcastTo",rE="BroadcastArgs",ux="Cast",dx="Ceil",fx="ClipByValue",sE="Complex",Fw="ComplexAbs",Dw="Concat",Lw="Conv2D",iE="Conv2DBackpropFilter",$w="Conv2DBackpropInput",Pw="Conv3D",aE="Conv3DBackpropFilterV2",oE="Conv3DBackpropInputV2",hx="Cos",Ax="Cosh",lE="Cumprod",zw="Cumsum",cE="CropAndResize",uE="DenseBincount",dE="DepthToSpace",Uw="DepthwiseConv2dNative",fE="DepthwiseConv2dNativeBackpropFilter",hE="DepthwiseConv2dNativeBackpropInput",AE="Diag",Mw="Dilation2D",GB="Dilation2DBackpropInput",KB="Dilation2DBackpropFilter",pE="Draw",px="RealDiv",mE="Einsum",mx="Elu",gE="EluGrad",gx="Erf",Qw="Equal",yx="Exp",Hw="ExpandDims",xx="Expm1",yE="FFT",xE="Fill",bE="FlipLeftRight",bx="Floor",vx="FloorDiv",Ww="FusedBatchNorm",Vw="GatherV2",vE="GatherNd",qw="Greater",wx="GreaterEqual",Sx="Identity",wE="IFFT",SE="Imag",Cx="IsFinite",kx="IsInf",Bx="IsNan",Gw="LeakyRelu",Kw="Less",Xw="LessEqual",CE="LinSpace",jx="Log",Ex="Log1p",Yw="LogicalAnd",Jw="LogicalNot",Zw="LogicalOr",tve="LogicalXor",nee="LogSoftmax",nve="LowerBound",e5="LRN",kE="LRNGrad",rve="MatrixBandPart",t5="Max",Ix="Maximum",n5="MaxPool",BE="MaxPoolGrad",r5="MaxPool3D",jE="MaxPool3DGrad",EE="MaxPoolWithArgmax",s5="Mean",i5="Min",Nx="Minimum",a5="MirrorPad",Tx="Mod",IE="Multinomial",_x="Multiply",o5="Neg",l5="NotEqual",NE="NonMaxSuppressionV3",TE="NonMaxSuppressionV4",_E="NonMaxSuppressionV5",c5="OnesLike",u5="OneHot",d5="Pack",f5="PadV2",sve="Pool",Rx="Pow",h5="Prelu",A5="Prod",RE="RaggedGather",OE="RaggedRange",FE="RaggedTensorToTensor",DE="Range",LE="Real",Ox="Reciprocal",Fx="Relu",p5="Reshape",m5="ResizeNearestNeighbor",$E="ResizeNearestNeighborGrad",g5="ResizeBilinear",PE="ResizeBilinearGrad",Dx="Relu6",y5="Reverse",Lx="Round",$x="Rsqrt",zE="ScatterNd",UE="TensorScatterUpdate",ME="SearchSorted",x5="Select",Px="Selu",b5="Slice",zx="Sin",Ux="Sinh",Mx="Sign",Qx="Sigmoid",Hx="Softplus",Wx="Sqrt",v5="Sum",w5="SpaceToBatchND",S5="SplitV",C5="Softmax",QE="SparseFillEmptyRows",HE="SparseReshape",WE="SparseSegmentMean",VE="SparseSegmentSum",qE="SparseToDense",Vx="SquaredDifference",GE="Square",k5="StaticRegexReplace",KE="StridedSlice",XE="StringNGrams",YE="StringSplit",JE="StringToHashBucketFast",qx="Sub",Gx="Tan",Kx="Tanh",Xx="Tile",ZE="TopK",e3="Transform",zg="Transpose",t3="Unique",B5="Unpack",j5="UnsortedSegmentSum",ive="UpperBound",E5="ZerosLike",Yx="Step",XB="FromPixels",n3="RotateWithOffset",N2="_FusedMatMul",T2="FusedConv2D",_2="FusedDepthwiseConv2D";function cu(...t){Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(...t)}function ave(...t){Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.log(...t)}const E1=BD("kernelRegistry",()=>new Map),R2=BD("gradRegistry",()=>new Map);function O2(t,e){const n=jD(t,e);return E1.get(n)}function AO(t){return R2.get(t)}function YB(t){const e=E1.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,a]=s,[l]=i.split("_");l===t&&n.push(a)}return n}function r3(t){const{kernelName:e,backendName:n}=t,r=jD(e,n);E1.has(r)&&cu(`The kernel '${e}' for backend '${n}' is already registered`),E1.set(r,t)}function ree(t){const{kernelName:e}=t;R2.has(e)&&Ye().getBool("DEBUG")&&cu(`Overriding the gradient for '${e}'`),R2.set(e,t)}function ove(t,e){const n=jD(t,e);if(!E1.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);E1.delete(n)}function lve(t){if(!R2.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);R2.delete(t)}function cve(t,e){YB(t).forEach(r=>{const s=Object.assign({},r,{backendName:e});r3(s)})}function jD(t,e){return`${e}_${t}`}function see(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var XT,K7;function uve(){if(K7)return XT;K7=1,XT=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(T,N,P){this.low=T|0,this.high=N|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(T){return(T&&T.__isLong__)===!0}e.isLong=n;var r={},s={};function i(T,N){var P,z,U;return N?(T>>>=0,(U=0<=T&&T<256)&&(z=s[T],z)?z:(P=l(T,(T|0)<0?-1:0,!0),U&&(s[T]=P),P)):(T|=0,(U=-128<=T&&T<128)&&(z=r[T],z)?z:(P=l(T,T<0?-1:0,!1),U&&(r[T]=P),P))}e.fromInt=i;function a(T,N){if(isNaN(T))return N?w:v;if(N){if(T<0)return w;if(T>=g)return O}else{if(T<=-y)return F;if(T+1>=y)return I}return T<0?a(-T,N).neg():l(T%m|0,T/m|0,N)}e.fromNumber=a;function l(T,N,P){return new e(T,N,P)}e.fromBits=l;var c=Math.pow;function u(T,N,P){if(T.length===0)throw Error("empty string");if(T==="NaN"||T==="Infinity"||T==="+Infinity"||T==="-Infinity")return v;if(typeof N=="number"?(P=N,N=!1):N=!!N,P=P||10,P<2||36<P)throw RangeError("radix");var z;if((z=T.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return u(T.substring(1),N,P).neg();for(var U=a(c(P,8)),ee=v,q=0;q<T.length;q+=8){var Z=Math.min(8,T.length-q),G=parseInt(T.substring(q,q+Z),P);if(Z<8){var ne=a(c(P,Z));ee=ee.mul(ne).add(a(G))}else ee=ee.mul(U),ee=ee.add(a(G))}return ee.unsigned=N,ee}e.fromString=u;function d(T,N){return typeof T=="number"?a(T,N):typeof T=="string"?u(T,N):l(T.low,T.high,typeof N=="boolean"?N:T.unsigned)}e.fromValue=d;var f=65536,A=1<<24,m=f*f,g=m*m,y=g/2,x=i(A),v=i(0);e.ZERO=v;var w=i(0,!0);e.UZERO=w;var B=i(1);e.ONE=B;var k=i(1,!0);e.UONE=k;var j=i(-1);e.NEG_ONE=j;var I=l(-1,2147483647,!1);e.MAX_VALUE=I;var O=l(-1,-1,!0);e.MAX_UNSIGNED_VALUE=O;var F=l(0,-2147483648,!1);e.MIN_VALUE=F;var D=e.prototype;return D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},D.toString=function(N){if(N=N||10,N<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(F)){var P=a(N),z=this.div(P),U=z.mul(P).sub(this);return z.toString(N)+U.toInt().toString(N)}else return"-"+this.neg().toString(N);for(var ee=a(c(N,6),this.unsigned),q=this,Z="";;){var G=q.div(ee),ne=q.sub(G.mul(ee)).toInt()>>>0,K=ne.toString(N);if(q=G,q.isZero())return K+Z;for(;K.length<6;)K="0"+K;Z=""+K+Z}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(F)?64:this.neg().getNumBitsAbs();for(var N=this.high!=0?this.high:this.low,P=31;P>0&&(N&1<<P)==0;P--);return this.high!=0?P+33:P+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return(this.low&1)===1},D.isEven=function(){return(this.low&1)===0},D.equals=function(N){return n(N)||(N=d(N)),this.unsigned!==N.unsigned&&this.high>>>31===1&&N.high>>>31===1?!1:this.high===N.high&&this.low===N.low},D.eq=D.equals,D.notEquals=function(N){return!this.eq(N)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(N){return this.comp(N)<0},D.lt=D.lessThan,D.lessThanOrEqual=function(N){return this.comp(N)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(N){return this.comp(N)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function(N){return this.comp(N)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(N){if(n(N)||(N=d(N)),this.eq(N))return 0;var P=this.isNegative(),z=N.isNegative();return P&&!z?-1:!P&&z?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(F)?F:this.not().add(B)},D.neg=D.negate,D.add=function(N){n(N)||(N=d(N));var P=this.high>>>16,z=this.high&65535,U=this.low>>>16,ee=this.low&65535,q=N.high>>>16,Z=N.high&65535,G=N.low>>>16,ne=N.low&65535,K=0,H=0,Q=0,X=0;return X+=ee+ne,Q+=X>>>16,X&=65535,Q+=U+G,H+=Q>>>16,Q&=65535,H+=z+Z,K+=H>>>16,H&=65535,K+=P+q,K&=65535,l(Q<<16|X,K<<16|H,this.unsigned)},D.subtract=function(N){return n(N)||(N=d(N)),this.add(N.neg())},D.sub=D.subtract,D.multiply=function(N){if(this.isZero())return v;if(n(N)||(N=d(N)),t){var P=t.mul(this.low,this.high,N.low,N.high);return l(P,t.get_high(),this.unsigned)}if(N.isZero())return v;if(this.eq(F))return N.isOdd()?F:v;if(N.eq(F))return this.isOdd()?F:v;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(x)&&N.lt(x))return a(this.toNumber()*N.toNumber(),this.unsigned);var z=this.high>>>16,U=this.high&65535,ee=this.low>>>16,q=this.low&65535,Z=N.high>>>16,G=N.high&65535,ne=N.low>>>16,K=N.low&65535,H=0,Q=0,X=0,re=0;return re+=q*K,X+=re>>>16,re&=65535,X+=ee*K,Q+=X>>>16,X&=65535,X+=q*ne,Q+=X>>>16,X&=65535,Q+=U*K,H+=Q>>>16,Q&=65535,Q+=ee*ne,H+=Q>>>16,Q&=65535,Q+=q*G,H+=Q>>>16,Q&=65535,H+=z*K+U*ne+ee*G+q*Z,H&=65535,l(X<<16|re,H<<16|Q,this.unsigned)},D.mul=D.multiply,D.divide=function(N){if(n(N)||(N=d(N)),N.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&N.low===-1&&N.high===-1)return this;var P=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,N.low,N.high);return l(P,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:v;var z,U,ee;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return w;if(N.gt(this.shru(1)))return k;ee=w}else{if(this.eq(F)){if(N.eq(B)||N.eq(j))return F;if(N.eq(F))return B;var q=this.shr(1);return z=q.div(N).shl(1),z.eq(v)?N.isNegative()?B:j:(U=this.sub(N.mul(z)),ee=z.add(U.div(N)),ee)}else if(N.eq(F))return this.unsigned?w:v;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();ee=v}for(U=this;U.gte(N);){z=Math.max(1,Math.floor(U.toNumber()/N.toNumber()));for(var Z=Math.ceil(Math.log(z)/Math.LN2),G=Z<=48?1:c(2,Z-48),ne=a(z),K=ne.mul(N);K.isNegative()||K.gt(U);)z-=G,ne=a(z,this.unsigned),K=ne.mul(N);ne.isZero()&&(ne=B),ee=ee.add(ne),U=U.sub(K)}return ee},D.div=D.divide,D.modulo=function(N){if(n(N)||(N=d(N)),t){var P=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,N.low,N.high);return l(P,t.get_high(),this.unsigned)}return this.sub(this.div(N).mul(N))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return l(~this.low,~this.high,this.unsigned)},D.and=function(N){return n(N)||(N=d(N)),l(this.low&N.low,this.high&N.high,this.unsigned)},D.or=function(N){return n(N)||(N=d(N)),l(this.low|N.low,this.high|N.high,this.unsigned)},D.xor=function(N){return n(N)||(N=d(N)),l(this.low^N.low,this.high^N.high,this.unsigned)},D.shiftLeft=function(N){return n(N)&&(N=N.toInt()),(N&=63)===0?this:N<32?l(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):l(0,this.low<<N-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(N){return n(N)&&(N=N.toInt()),(N&=63)===0?this:N<32?l(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):l(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(N){if(n(N)&&(N=N.toInt()),N&=63,N===0)return this;var P=this.high;if(N<32){var z=this.low;return l(z>>>N|P<<32-N,P>>>N,this.unsigned)}else return N===32?l(P,0,this.unsigned):l(P>>>N-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},D.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var N=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,N&255,N>>>8&255,N>>>16&255,N>>>24]},D.toBytesBE=function(){var N=this.high,P=this.low;return[N>>>24,N>>>16&255,N>>>8&255,N&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(N,P,z){return z?e.fromBytesLE(N,P):e.fromBytesBE(N,P)},e.fromBytesLE=function(N,P){return new e(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,P)},e.fromBytesBE=function(N,P){return new e(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],P)},XT}var iee=uve();const aee=oc(iee),dve=FJ({__proto__:null,default:aee},[iee]);const vg=aee||dve;function I5(t){return vg.fromString(t,!0,16)}const oee=I5("c3a5c85c97cb3127"),pg=I5("b492b66fbe98f273"),jl=I5("9ae16a3b2f90404f");function pO(t){return t.xor(t.shru(47))}function lee(t,e,n){const r=t.slice(e,e+n);return vg.fromBytes(Array.from(r),!0,!0)}function ei(t,e){return lee(t,e,8)}function X7(t,e){return lee(t,e,4)}function fo(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function rm(t,e,n=I5("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function fve(t,e,n,r,s,i){s=s.add(t),i=fo(i.add(s).add(r),21);const a=s;return s=s.add(e),s=s.add(n),i=i.add(fo(s,44)),[s.add(r),i.add(a)]}function FC(t,e,n,r){return fve(ei(t,e),ei(t,e+8),ei(t,e+16),ei(t,e+24),n,r)}function hve(t,e=t.length){if(e>=8){const n=jl.add(e*2),r=ei(t,0).add(jl),s=ei(t,e-8),i=fo(s,37).mul(n).add(r),a=fo(r,25).add(s).mul(n);return rm(i,a,n)}if(e>=4){const n=jl.add(e*2),r=X7(t,0);return rm(r.shl(3).add(e),X7(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),a=e+(s<<2);return pO(jl.mul(i).xor(oee.mul(a))).mul(jl)}return jl}function Ave(t,e=t.length){const n=jl.add(e*2),r=ei(t,0).mul(pg),s=ei(t,8),i=ei(t,e-8).mul(n),a=ei(t,e-16).mul(jl);return rm(fo(r.add(s),43).add(fo(i,30)).add(a),r.add(fo(s.add(jl),18)).add(i),n)}function pve(t,e=t.length){const n=jl.add(e*2),r=ei(t,0).mul(jl),s=ei(t,8),i=ei(t,e-8).mul(n),a=ei(t,e-16).mul(jl),l=fo(r.add(s),43).add(fo(i,30)).add(a),c=rm(l,r.add(fo(s.add(jl),18)).add(i),n),u=ei(t,16).mul(n),d=ei(t,24),f=l.add(ei(t,e-32)).mul(n),A=c.add(ei(t,e-24)).mul(n);return rm(fo(u.add(d),43).add(fo(f,30)).add(A),u.add(fo(d.add(r),18)).add(f),n)}function cee(t,e=t.length){const n=vg.fromNumber(81,!0);if(e<=32)return e<=16?hve(t,e):Ave(t,e);if(e<=64)return pve(t,e);let r=n,s=n.mul(pg).add(113),i=pO(s.mul(jl).add(113)).mul(jl),a=[vg.UZERO,vg.UZERO],l=[vg.UZERO,vg.UZERO];r=r.mul(jl).add(ei(t,0));let c=0;const u=(e-1>>6)*64,d=u+(e-1&63)-63;do r=fo(r.add(s).add(a[0]).add(ei(t,c+8)),37).mul(pg),s=fo(s.add(a[1]).add(ei(t,c+48)),42).mul(pg),r=r.xor(l[1]),s=s.add(a[0]).add(ei(t,c+40)),i=fo(i.add(l[0]),33).mul(pg),a=FC(t,c,a[1].mul(pg),r.add(l[0])),l=FC(t,c+32,i.add(l[1]),s.add(ei(t,c+16))),[i,r]=[r,i],c+=64;while(c!==u);const f=pg.add(i.and(255).shl(1));return c=d,l[0]=l[0].add(e-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),r=fo(r.add(s).add(a[0]).add(ei(t,c+8)),37).mul(f),s=fo(s.add(a[1]).add(ei(t,c+48)),42).mul(f),r=r.xor(l[1].mul(9)),s=s.add(a[0].mul(9).add(ei(t,c+40))),i=fo(i.add(l[0]),33).mul(f),a=FC(t,c,a[1].mul(f),r.add(l[0])),l=FC(t,c+32,i.add(l[1]),s.add(ei(t,c+16))),[i,r]=[r,i],rm(rm(a[0],l[0],f).add(pO(s).mul(oee)).add(i),rm(a[1],l[1],f).add(r),f)}function qA(t,e){return e==="string"?ih(t):Om([t],e)}function mve(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Om(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ah(t)),Ye().getBool("DEBUG")&&qZ(t,e),mve(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Cl(){return Ye().platform.now()}function gve(t,e){return Ye().platform.fetch(t,e)}function ih(t,e="utf-8"){return e=e||"utf-8",Ye().platform.encode(t,e)}function TA(t,e="utf-8"){return e=e||"utf-8",Ye().platform.decode(t,e)}function ho(t){return Ye().platform.isTypedArray!=null?Ye().platform.isTypedArray(t):see(t)}function Ah(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||gm(t)||t==null||ho(t)&&n)e.push(t);else if(Array.isArray(t)||ho(t))for(let r=0;r<t.length;++r)Ah(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Ah(t[s],e,n)}return e}const yve=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:vr,arraysEqualWithNull:VZ,assert:ce,assertNonNegativeIntegerDimensions:Qc,assertNonNull:I0,assertShapesMatch:Wo,bytesFromStringArray:KZ,bytesPerElement:I2,checkConversionForErrors:qZ,clamp:pm,computeStrides:On,convertBackendValuesAndArrayBuffer:JZ,createScalarValue:qA,createShuffledIndices:Kbe,decodeString:TA,distSquared:Vbe,encodeString:ih,fetch:gve,fingerPrint64:cee,flatten:Ah,getArrayFromDType:ca,getTypedArrayFromDType:go,hasEncodingLoss:SD,hexToLong:I5,indexToLoc:T0,inferDtype:N0,inferFromImplicitShape:wD,isBoolean:XZ,isFunction:mm,isInt:t0,isNumber:VB,isPromise:gm,isScalarShape:qbe,isString:eh,isTypedArray:ho,isValidDtype:GZ,locToIndex:af,makeOnesTypedArray:Yj,makeZerosNestedTypedArray:CD,makeZerosTypedArray:Ho,nearestDivisor:qB,nearestLargerEven:Xj,now:Cl,parseAxisParam:Ar,randUniform:Wbe,repeatedTry:hO,rightPad:Pg,shuffle:vD,shuffleCombo:Hbe,sizeFromShape:it,sizeToSquarishShape:WB,squeezeShape:VA,sum:WZ,swap:hA,tanh:Gbe,toNestedArray:yu,toTypedArray:Om},Symbol.toStringTag,{value:"Module"}));class xve{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new vve)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let a;const l=Cl();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();a=Promise.resolve({kernelMs:Cl()-l})}if(Ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const d=s[u];d.data().then(f=>{bve(f,d.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:a}=e;r.forEach(l=>{Promise.all([l.data(),s,a]).then(c=>{this.logger.logKernelProfile(n,l,c[0],c[1],i,c[2])})})}}function bve(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}let vve=class{logKernelProfile(e,n,r,s,i,a){const l=typeof s=="number"?Pg(`${s}ms`,9):s.error,c=Pg(e,25),u=n.rank,d=n.size,f=Pg(n.shape.toString(),14);let A="";for(const m in i){const g=i[m];if(g!=null){const y=g.shape||n.shape,x=y.length;A+=`${m}: ${x}D ${x>0?y:""} `}}console.log(`%c${c}	%c${l}	%c${u}D ${f}	%c${d}	%c${A}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function wve(t,e,n){const r={},s={};for(let c=0;c<e.length;c++)r[e[c].id]=!0;for(let c=0;c<t.length;c++){const u=t[c],d=u.inputs;for(const f in d){const A=d[f];let m=!1;for(let g=0;g<e.length;g++)if(r[A.id]){u.outputs.forEach(y=>r[y.id]=!0),m=!0,s[u.id]=!0;break}if(m)break}}const i={};i[n.id]=!0;const a={};for(let c=t.length-1;c>=0;c--){const u=t[c],d=u.inputs;for(let f=0;f<u.outputs.length;f++)if(i[u.outputs[f].id]){for(const A in d)i[d[A].id]=!0,a[u.id]=!0;break}}const l=[];for(let c=0;c<t.length;c++){const u=t[c];if(s[u.id]&&a[u.id]){const d={};for(const A in u.inputs){const m=u.inputs[A];r[m.id]&&(d[A]=m)}const f=Object.assign({},u);f.inputs=d,f.outputs=u.outputs,l.push(f)}}return l}function Sve(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],a=[];if(i.outputs.forEach(c=>{const u=t[c.id];u!=null?a.push(u):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const l=i.gradient(a);for(const c in i.inputs){if(!(c in l))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(l)}.`);const u=n(()=>l[c]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${u.dtype}'`);const d=i.inputs[c];if(!vr(u.shape,d.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${c}' has shape '${u.shape}', which does not match the shape of the input '${d.shape}'`);if(t[d.id]==null)t[d.id]=u;else{const f=t[d.id];t[d.id]=r(f,u),f.dispose()}}}}const Y7=20,bv=3,YT=7;function Cve(t,e,n,r){const s=On(e),i=kve(t,e,n,s),a=e.length,l=lB(t,e,n,s,i),c=["Tensor"];return r&&(c.push(`  dtype: ${n}`),c.push(`  rank: ${a}`),c.push(`  shape: [${e}]`),c.push("  values:")),c.push(l.map(u=>"    "+u).join(`
`)),c.join(`
`)}function kve(t,e,n,r){const s=it(e),i=r[r.length-1],a=new Array(i).fill(0),l=e.length,c=n==="complex64"?Xv(t):t;if(l>1)for(let u=0;u<s/i;u++){const d=u*i;for(let f=0;f<i;f++)a[f]=Math.max(a[f],Kv(c[d+f],0,n).length)}return a}function Kv(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(YT))} + ${parseFloat(t[1].toFixed(YT))}j`:eh(t)?r=`'${t}'`:n==="bool"?r=uee(t):r=parseFloat(t.toFixed(YT)).toString(),Pg(r,e)}function uee(t){return t===0?"false":"true"}function lB(t,e,n,r,s,i=!0){const a=n==="complex64"?2:1,l=e[0],c=e.length;if(c===0){if(n==="complex64"){const y=Xv(t);return[Kv(y[0],0,n)]}return n==="bool"?[uee(t[0])]:[t[0].toString()]}if(c===1){if(l>Y7){const x=bv*a;let v=Array.from(t.slice(0,x)),w=Array.from(t.slice((l-bv)*a,l*a));return n==="complex64"&&(v=Xv(v),w=Xv(w)),["["+v.map((B,k)=>Kv(B,s[k],n)).join(", ")+", ..., "+w.map((B,k)=>Kv(B,s[l-bv+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?Xv(t):Array.from(t)).map((x,v)=>Kv(x,s[v],n)).join(", ")+"]"]}const u=e.slice(1),d=r.slice(1),f=r[0]*a,A=[];if(l>Y7){for(let y=0;y<bv;y++){const x=y*f,v=x+f;A.push(...lB(t.slice(x,v),u,n,d,s,!1))}A.push("...");for(let y=l-bv;y<l;y++){const x=y*f,v=x+f;A.push(...lB(t.slice(x,v),u,n,d,s,y===l-1))}}else for(let y=0;y<l;y++){const x=y*f,v=x+f;A.push(...lB(t.slice(x,v),u,n,d,s,y===l-1))}const m=c===2?",":"";A[0]="["+(l>0?A[0]+m:"");for(let y=1;y<A.length-1;y++)A[y]=" "+A[y]+m;let g=`,
`;for(let y=2;y<c;y++)g+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(i?"":g),A}function Xv(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class $a{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=it(e),r!=null){const s=r.length;ce(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ca(n,this.size),this.strides=On(e)}set(e,...n){n.length===0&&(n=[0]),ce(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Yd().makeTensor(this.values,this.shape,this.dtype)}}let Yd=null,Gy=null;function Bve(t){Yd=t}function jve(t){Gy=t}class Dr{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=it(e),this.strides=On(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Gy.buffer(this.shape,this.dtype,e)}bufferSync(){return Gy.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return yu(this.shape,e,this.dtype==="complex64")}arraySync(){return yu(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Yd().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>TA(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Yd().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Yd().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>TA(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Yd().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Yd().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Gy.print(this,e)}clone(){return this.throwIfDisposed(),Gy.clone(this)}toString(e=!1){const n=this.dataSync();return Cve(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Gy.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Yd().makeVariable(this,e,n,r)}}Object.defineProperty(Dr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ut(){return BD("Tensor",()=>Dr)}ut();class F2 extends Dr{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!vr(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Yd().disposeTensor(this),this.dataId=e.dataId,Yd().incRef(this,null)}dispose(){Yd().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(F2,Symbol.hasInstance,{value:t=>t instanceof Dr&&t.assign!=null&&t.assign instanceof Function});var mO;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(mO||(mO={}));var gO;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(gO||(gO={}));var yO;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(yO||(yO={}));var xO;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(xO||(xO={}));var bO;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(bO||(bO={}));const Eve={float32:xO,int32:gO,bool:yO,complex64:bO};function ec(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Eve[t][e]}function s3(t){return ec(t,"int32")}function dee(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function fee(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function Ki(t,e){if(t.dtype===e.dtype)return[t,e];const n=ec(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function hee(t,e){ce(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Ive(t,e){return e.some(n=>n.id===t.id)}function ED(t){const e=[];return Aee(t,e,new Set),e}function Aee(t,e,n){if(t==null)return;if(t instanceof Dr){e.push(t);return}if(!Nve(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),Aee(i,e,n))}}function Nve(t){return Array.isArray(t)||typeof t=="object"}const Tve=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:hee,getTensorsInContainer:ED,isTensorInList:Ive,makeTypesMatch:Ki},Symbol.toStringTag,{value:"Module"}));function JT(t){return t.kernelName!=null}class J7{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class I1{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new J7}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(cu(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new xve(this.backendInstance),!0}setupRegisteredKernels(){YB(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){YB(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Kj)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,cu(`Initialization of backend ${e} failed`),cu(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return cu(`Initialization of backend ${e} failed`),cu(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return I1.nextTensorId++}nextVariableId(){return I1.nextVariableId++}clone(e){const n=Ee.runKernel(Sx,{x:e}),r={x:e},s=a=>({x:()=>{const l="float32",c={x:a},u={dtype:l};return Ee.runKernel(ux,c,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(O2(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(c=>{i+=c.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-n-i-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c;const u=JT(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(JT(e)){const{kernelName:g,inputs:y,attrs:x}=e;this.backendName==null&&this.backend;const v=O2(g,this.backendName);ce(v!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),l=()=>{const w=this.backend.numDataIds();c=v.kernelFunc({inputs:y,attrs:x,backend:this.backend});const B=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,w,B);const k=B.map(j=>j.rank!=null?j:this.makeTensorFromTensorInfo(j));if(s){const j=this.getTensorsForGradient(g,y,k);r=this.saveTensorsForBackwardMode(j)}return k}}else{const{forwardFunc:g}=e,y=x=>{s&&(r=x.map(v=>this.keep(this.clone(v))))};l=()=>{const x=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,y));const v=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,x,v),v}}const{inputs:d,attrs:f}=e,A=JT(e)?null:e.backwardsFunc;let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=l():(m=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),n=m.outputs)}),s&&this.addTapeNode(u,d,n,A,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=AO(e);if(s!=null){const i=s.inputsToSave||[],a=s.outputsToSave||[];let l;s.saveAllInputs?(ce(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(n).map(u=>n[u])):l=i.map(u=>n[u]);const c=r.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&eh(e[0])&&(i=e.map(c=>ih(c)));const a=s.write(i,n,r),l=new Dr(n,r,a,this.nextTensorId());if(this.trackTensor(l,s),r==="string"){const c=this.state.tensorInfo.get(a),u=KZ(i);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,a=new Dr(s,i,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new F2(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*I2(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof F2||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*I2(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,a){const l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},c=AO(e);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=u=>(u=u.map((d,f)=>{if(d==null){const A=r[f],m=Ho(A.size,A.dtype);return this.makeTensor(m,A.shape,A.dtype)}return d}),s(u.length>1?u:u[0],i,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=ED(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(ce(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));ce(i instanceof Dr,()=>"The result y returned by f() must be a tensor.");const a=wve(this.state.activeTape,n,i);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const l={};l[i.id]=r??_ve(i.shape),Sve(l,a,u=>this.tidy(u),Rve);const c=n.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const d of u.saved)d.dispose()}),this.state.activeTape=null),{value:i,grads:c}})}customGrad(e){return ce(mm(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{ce(n.every(l=>l instanceof Dr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((l,c)=>{s[c]=l});const i=(l,c)=>(r=e(...n,c),ce(r.value instanceof Dr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ce(mm(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(l,c)=>{const u=r.gradFunc(l,c),d=Array.isArray(u)?u:[u];ce(d.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ce(d.every(A=>A instanceof Dr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return d.forEach((A,m)=>{f[m]=()=>A}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Cl(),r=await this.backend.time(e);return r.wallMs=Cl()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new J7;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}I1.nextTensorId=0;I1.nextVariableId=0;function _ve(t){const e=Yj(it(t),"float32");return Ee.makeTensor(e,t,"float32")}function pee(){const t=eee();if(t._tfengine==null){const e=new ZZ(t);t._tfengine=new I1(e)}return Zbe(t._tfengine.ENV),Bve(()=>t._tfengine),t._tfengine}const Ee=pee();function Rve(t,e){const n={a:t,b:e};return Ee.runKernel(_0,n)}function Ove(){return typeof navigator<"u"&&navigator!=null}let vO;function Fve(t){vO=t}function ID(t){if(vO!==void 0)return vO;if(t||Ove()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function ND(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Dve=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:ND,isMobile:ID,mockIsMobile:Fve},Symbol.toStringTag,{value:"Module"}));const tc=Ye();tc.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});tc.registerFlag("IS_BROWSER",()=>ND());tc.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");tc.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));tc.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));tc.registerFlag("PROD",()=>!1);tc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>tc.getBool("DEBUG"));tc.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);tc.registerFlag("IS_TEST",()=>!1);tc.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>tc.getBool("DEBUG"));tc.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);tc.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);tc.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function ph(t,e){let n=t;if(ho(t))return e==="string"?[]:[t.length];if(dee(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(fee(t))return[t.buffer.size/(e==null?4:I2(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ho(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mee(t,r,[]),r}function mee(t,e,n){if(n=n||[],!Array.isArray(t)&&!ho(t)){ce(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}ce(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),ce(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)mee(t[s],r,n.concat(s))}function Z7(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function fe(t,e,n,r="numeric"){if(t instanceof ut())return Z7(r,t.dtype,e,n),t;let s=N0(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),Z7(r,s,e,n),t==null||!ho(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const c=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${c}'`)}const i=ph(t,s);!ho(t)&&!Array.isArray(t)&&(t=[t]);const l=s!=="string"?Om(t,s):Ah(t,[],!0);return Ee.makeTensor(l,i,s)}function D2(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,a)=>fe(i,`${e}[${a}]`,n,r))}const TD="__op";function Ie(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+TD;const s=(...i)=>{Ee.startScope(n);try{const a=r(...i);return gm(a)&&console.error("Cannot return a Promise inside of tidy."),Ee.endScope(a),a}catch(a){throw Ee.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}function Lve(t,e){const n=fe(t,"real","complex"),r=fe(e,"imag","complex");Wo(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return Ee.runKernel(sE,s)}const _A=Ie({complex_:Lve});function Fm(t,e,n,r){if(r==null)r=N0(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(fee(t)||dee(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Ee.backend.createTensorFromGPUData(t,e||n,r)}if(!ho(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Qc(e);const s=it(e),i=it(n);ce(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let a=0;a<n.length;++a){const l=n[a],c=a===n.length-1?l!==it(e.slice(a)):!0;ce(n[a]===e[a]||!c,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ho(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Om(t,r):Ah(t,[],!0),Ee.makeTensor(t,e,r)}function ld(t,e,n){const r=ph(t,n);return Fm(t,e,r,n)}const n0={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class vf{static join(e){return new vf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>ho(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),a=new Uint8Array(i);let l=0;for(let c=r;c<this.shards.length;c++){const u=this.shards[c],f=e+l-u.start,A=l,g=Math.min(n,u.end)-u.start,y=new Uint8Array(u.buffer,f,g-f);if(a.set(y,A),l+=y.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=$ve(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function $ve(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}function Pve(){Ye().set("PROD",!0)}function zve(){Ye().set("DEBUG",!0)}function Uve(){Ye().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Mve(t){Ye().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Qve(){Ee.disposeVariables()}function Kd(){return Ee}function wO(){return Ee.memory()}function Hve(t){return Ee.profile(t)}function He(t,e){return Ee.tidy(t,e)}function hr(t){ED(t).forEach(n=>n.dispose())}function Va(t){return Ee.keep(t)}function Wve(t){return Ee.time(t)}function Vve(t){return Ee.setBackend(t)}function _D(){return Ee.ready()}function gee(){return Ee.backendName}function qve(t){Ee.removeBackend(t)}function Gve(t){return Ee.findBackend(t)}function Kve(t){return Ee.findBackendFactory(t)}function RD(t,e,n=1){return Ee.registerBackend(t,e,n)}function OD(){return Ee.backend}function Xve(t,e){Ye().setPlatform(t,e)}const ym=4;async function SO(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<s.length;++a){const l=s[a],c=Array.isArray(t)?t[a].tensor:t[l];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${c.dtype}`);const u={name:l,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){const d=new Promise(async f=>{const A=await c.bytes(),m=A.reduce((x,v)=>x+v.length,0)+ym*A.length,g=new Uint8Array(m);let y=0;for(let x=0;x<A.length;x++){const v=A[x],w=new Uint8Array(new Uint32Array([v.length]).buffer);g.set(w,y),y+=ym,g.set(v,y),y+=v.length}f(g)});r.push(d)}else r.push(c.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Zve(i),specs:n}}function yee(t,e){const n=new vf(t),r={};let s=0;for(const i of e){const a=Yve(i,(l,c)=>n.slice(s+l,s+c));r[i.name]=xee(i,n.slice(s,s+a)),s+=a}return r}function Yve(t,e){const n=it(t.shape);let r;if("quantization"in t){const s=t.quantization;r=n0[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=ym+new Uint32Array(e(s,s+ym))[0];return s}else r=n0[t.dtype];return n*r}async function Jve(t,e){const n=it(t.shape);let r;if("quantization"in t){const s=t.quantization;r=n0[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=ym+new Uint32Array(await e(s,s+ym))[0];return s}else r=n0[t.dtype];return n*r}function xee(t,e){const n=t.name,r=t.dtype,s=t.shape,i=it(s);let a,l=0;if("quantization"in t){const c=t.quantization;if(c.dtype==="uint8"||c.dtype==="uint16"){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${t.name} with quantization ${c.dtype} doesn't have corresponding metadata min and scale.`)}else if(c.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${c.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${c.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=n0[c.dtype],d=c.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(c.dtype==="uint8"||c.dtype==="uint16"){a=new Float32Array(d.length);for(let f=0;f<d.length;f++){const A=d[f];a[f]=A*c.scale+c.min}}else if(c.dtype==="float16")a=i2e()(d);else throw new Error(`Unsupported quantization type ${c.dtype} for weight type float32.`);else if(r==="int32"){if(c.dtype!=="uint8"&&c.dtype!=="uint16")throw new Error(`Unsupported quantization type ${c.dtype} for weight type int32.`);a=new Int32Array(d.length);for(let f=0;f<d.length;f++){const A=d[f];a[f]=Math.round(A*c.scale+c.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);l+=i*u}else if(r==="string"){const c=it(t.shape);a=[];for(let u=0;u<c;u++){const d=new Uint32Array(e.slice(l,l+ym))[0];l+=ym;const f=new Uint8Array(e.slice(l,l+d));a.push(f),l+=d}}else{const c=n0[r];if(r==="float32")a=new Float32Array(e);else if(r==="int32")a=new Int32Array(e);else if(r==="bool")a=new Uint8Array(e);else if(r==="complex64"){a=new Float32Array(e);const u=new Float32Array(a.length/2),d=new Float32Array(a.length/2);for(let g=0;g<u.length;g++)u[g]=a[g*2],d[g]=a[g*2+1];const f=ld(u,s,"float32"),A=ld(d,s,"float32"),m=_A(f,A);return f.dispose(),A.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);l+=i*c}return ld(a,s,r)}async function eQ(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const l=n-r.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}const a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function bee(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const a=await Jve(i,async(u,d)=>(s=await eQ(r,s,d),s.slice(u,d)));s=await eQ(r,s,a);const l=s.slice(0,a);s=s.slice(a);const c=xee(i,l);if(n[i.name]=c,gee()==="webgpu"){const u=OD();"uploadToGPU"in u&&it(c.shape)>=Ye().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(c.dataId)}}return n}function Zve(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const FD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function tQ(t){return FD?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function e2e(t){if(FD)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function t2e(t){if(FD){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function vee(t){return vf.join(t)}function nQ(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const n=t.split("/");return n[n.length-1]}function wee(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function DD(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function LD(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),DD(t,n,r)}function N5(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:tQ(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:tQ(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new vf(t.weightData).byteLength}}function JB(t){const e=[];for(const n of t)e.push(...n.weights);return e}function n2e(){const t=n=>{let r=n<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function r2e(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function s2e(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function i2e(){const t=n2e(),e=r2e(),n=s2e();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let a=0;a<r.length;a++){const l=r[a],c=t[n[l>>10]+(l&1023)]+e[l>>10];i[a]=c}return new Float32Array(s)}}class Pi{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Pi.instance==null&&(Pi.instance=new Pi),Pi.instance}static registerSaveRouter(e){Pi.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Pi.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Pi.getHandlers(e,"save")}static getLoadHandlers(e,n){return Pi.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Pi.getInstance().loadRouters:Pi.getInstance().saveRouters).forEach(a=>{const l=a(e,r);l!==null&&s.push(l)}),s}}const a2e=t=>Pi.registerSaveRouter(t),o2e=t=>Pi.registerLoadRouter(t),See=t=>Pi.getSaveHandlers(t),l2e=(t,e)=>Pi.getLoadHandlers(t,e);const CO="tensorflowjs",kO=1,Ig="models_store",Gp="model_info_store";function Cee(){if(!Ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function BO(t){const e=t.result;e.createObjectStore(Ig,{keyPath:"modelPath"}),e.createObjectStore(Gp,{keyPath:"modelPath"})}class r0{constructor(e){if(this.indexedDB=Cee(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(CO,kO);i.onupgradeneeded=()=>BO(i),i.onsuccess=()=>{const a=i.result;if(n==null){const l=a.transaction(Ig,"readonly"),u=l.objectStore(Ig).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=d=>(a.close(),s(u.error)),l.oncomplete=()=>a.close()}else{n.weightData=vf.join(n.weightData);const l=N5(n),c=a.transaction(Gp,"readwrite");let u=c.objectStore(Gp),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(A){return s(A)}let f;d.onsuccess=()=>{f=a.transaction(Ig,"readwrite");const A=f.objectStore(Ig);let m;try{m=A.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:l})}catch(g){return s(g)}m.onsuccess=()=>r({modelArtifactsInfo:l}),m.onerror=g=>{u=c.objectStore(Gp);const y=u.delete(this.modelPath);y.onsuccess=()=>(a.close(),s(m.error)),y.onerror=x=>(a.close(),s(m.error))}},d.onerror=A=>(a.close(),s(d.error)),c.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}r0.URL_SCHEME="indexeddb://";const kee=t=>Ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(r0.URL_SCHEME)?c2e(t.slice(r0.URL_SCHEME.length)):null;Pi.registerSaveRouter(kee);Pi.registerLoadRouter(kee);function c2e(t){return new r0(t)}function u2e(t){return t.startsWith(r0.URL_SCHEME)?t.slice(r0.URL_SCHEME.length):t}class d2e{constructor(){this.indexedDB=Cee()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(CO,kO);r.onupgradeneeded=()=>BO(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Gp,"readonly"),l=i.objectStore(Gp).getAll();l.onsuccess=()=>{const c={};for(const u of l.result)c[u.modelPath]=u.modelArtifactsInfo;e(c)},l.onerror=c=>(s.close(),n(l.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=u2e(e),new Promise((n,r)=>{const s=this.indexedDB.open(CO,kO);s.onupgradeneeded=()=>BO(s),s.onsuccess=()=>{const i=s.result,a=i.transaction(Gp,"readwrite"),l=a.objectStore(Gp),c=l.get(e);let u;c.onsuccess=()=>{if(c.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const d=l.delete(e),f=()=>{u=i.transaction(Ig,"readwrite");const m=u.objectStore(Ig).delete(e);m.onsuccess=()=>n(c.result.modelArtifactsInfo),m.onerror=g=>r(c.error)};d.onsuccess=f,d.onerror=A=>(f(),i.close(),r(c.error))}},c.onerror=d=>(i.close(),r(c.error)),a.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}const AA="/",Ky="tensorflowjs_models",Bee="info",f2e="model_topology",h2e="weight_specs",A2e="weight_data",p2e="model_metadata";function jee(t){return{info:[Ky,t,Bee].join(AA),topology:[Ky,t,f2e].join(AA),weightSpecs:[Ky,t,h2e].join(AA),weightData:[Ky,t,A2e].join(AA),modelMetadata:[Ky,t,p2e].join(AA)}}function Eee(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function m2e(t){const e=t.split(AA);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(AA)}function g2e(t){return t.startsWith(s0.URL_SCHEME)?t.slice(s0.URL_SCHEME.length):t}class s0{constructor(e){if(!Ye().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=jee(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=N5(e),i=vf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,e2e(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw Eee(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const l=JSON.parse(i);n.format=l.format,n.generatedBy=l.generatedBy,n.convertedBy=l.convertedBy,l.signature!=null&&(n.signature=l.signature),l.userDefinedMetadata!=null&&(n.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(n.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(n.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(n.trainingConfig=l.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=t2e(a),n}}s0.URL_SCHEME="localstorage://";const Iee=t=>Ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(s0.URL_SCHEME)?y2e(t.slice(s0.URL_SCHEME.length)):null;Pi.registerSaveRouter(Iee);Pi.registerLoadRouter(Iee);function y2e(t){return new s0(t)}class x2e{constructor(){ce(Ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ce(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ky+AA,r=AA+Bee;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const a=m2e(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=g2e(e);const n=jee(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return Eee(n),r}}const f1="://";class kl{constructor(){this.managers={}}static getInstance(){return kl.instance==null&&(kl.instance=new kl),kl.instance}static registerManager(e,n){ce(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(f1)&&(e=e.slice(0,e.indexOf(f1))),ce(e.length>0,()=>"scheme must not be an empty string.");const r=kl.getInstance();ce(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=kl.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(kl.getInstance().managers)}}function cB(t){if(t.indexOf(f1)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${kl.getSchemes().join(",")}`);return{scheme:t.split(f1)[0],path:t.split(f1)[1]}}async function Nee(t,e,n=!1){ce(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Pi.getLoadHandlers(t);ce(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),ce(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Pi.getSaveHandlers(e);ce(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),ce(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=i[0],l=cB(t).scheme,c=cB(t).path,u=l===cB(t).scheme,d=await s.load();n&&u&&await kl.getManager(l).removeModel(c);const f=await a.save(d);return n&&!u&&await kl.getManager(l).removeModel(c),f.modelArtifactsInfo}async function b2e(){const t=kl.getSchemes(),e={};for(const n of t){const r=await kl.getManager(n).listModels();for(const s in r){const i=n+f1+s;e[i]=r[s]}}return e}async function v2e(t){const e=cB(t);return kl.getManager(e.scheme).removeModel(e.path)}async function w2e(t,e){return Nee(t,e,!1)}async function S2e(t,e){return Nee(t,e,!0)}class C2e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Ye().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return see(e)}}if(Ye().get("IS_BROWSER")){Ye().setPlatform("browser",new C2e);try{kl.registerManager(s0.URL_SCHEME,new x2e)}catch{}try{kl.registerManager(r0.URL_SCHEME,new d2e)}catch{}}const k2e={importFetch:()=>require("node-fetch")};let ZT;class B2e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ye().global.fetch!=null?Ye().global.fetch(e,n):(ZT==null&&(ZT=k2e.importFetch()),ZT(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ye().get("IS_NODE")&&!Ye().get("IS_BROWSER")&&Ye().setPlatform("node",new B2e);function cr(t,e="float32",n){return e=e||"float32",Qc(t),new $a(t,e,n)}function j2e(t,e){const n=fe(t,"x","cast");if(!GZ(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return Ee.runKernel(ux,r,s)}const Mt=Ie({cast_:j2e});function E2e(t){const n={x:fe(t,"x","clone","string_or_numeric")};return Ee.runKernel(Sx,n)}const ah=Ie({clone_:E2e});function $D(t,e=!1){console.log(t.toString(e))}pee();const I2e={buffer:cr,cast:Mt,clone:ah,print:$D};jve(I2e);function N2e(t,e){let n=fe(t,"a","add"),r=fe(e,"b","add");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(_0,s)}const Nt=Ie({add_:N2e});function T2e(t,e){let n=fe(t,"a","floorDiv"),r=fe(e,"b","floorDiv");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(vx,s)}const i3=Ie({floorDiv_:T2e});function _2e(t,e){let n=fe(t,"a","div"),r=fe(e,"b","div");if([n,r]=Ki(n,r),n.dtype==="int32"&&r.dtype==="int32")return i3(n,r);const s={a:n,b:r},i={};return Ee.runKernel(px,s,i)}const un=Ie({div_:_2e});function R2e(t,e){let n=fe(t,"a","mul"),r=fe(e,"b","mul");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(_x,s)}const Ne=Ie({mul_:R2e});function O2e(t){const e=fe(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Ee.runKernel(Fw,n)}else{const n={x:e};return Ee.runKernel(Bw,n)}}const Ra=Ie({abs_:O2e});function F2e(t){const n={x:fe(t,"x","acos")};return Ee.runKernel(rx,n)}const PD=Ie({acos_:F2e});function D2e(t){const n={x:fe(t,"x","acosh")};return Ee.runKernel(sx,n)}const zD=Ie({acosh_:D2e});function L2e(t){ce(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),ce(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>fe(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!vr(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return Ee.runKernel(jw,r)}const Tee=Ie({addN_:L2e});function $2e(t,e=null,n=!1){const s={x:fe(t,"x","all","bool")},i={axis:e,keepDims:n};return Ee.runKernel(Jj,s,i)}const a3=Ie({all_:$2e});function P2e(t,e=null,n=!1){const s={x:fe(t,"x","any","bool")},i={axis:e,keepDims:n};return Ee.runKernel(Zj,s,i)}const L2=Ie({any_:P2e});function z2e(t,e=0){const r={x:fe(t,"x","argMax")},s={axis:e};return Ee.runKernel(Ew,r,s)}const i0=Ie({argMax_:z2e});function U2e(t,e=0){const r={x:fe(t,"x","argMin")},s={axis:e};return Ee.runKernel(Iw,r,s)}const UD=Ie({argMin_:U2e});function M2e(t){const n={x:fe(t,"x","asin")};return Ee.runKernel(ix,n)}const MD=Ie({asin_:M2e});function Q2e(t){const n={x:fe(t,"x","asinh")};return Ee.runKernel(ax,n)}const QD=Ie({asinh_:Q2e});function H2e(t){const n={x:fe(t,"x","atan")};return Ee.runKernel(ox,n)}const HD=Ie({atan_:H2e});function W2e(t,e){let n=fe(t,"a","atan2"),r=fe(e,"b","atan2");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(cx,s)}const WD=Ie({atan2_:W2e});function V2e(t){const n={x:fe(t,"x","atanh")};return Ee.runKernel(lx,n)}const VD=Ie({atanh_:V2e});function T5(t,e,n,r,s="NHWC",i){const a=t[3],l=[...e,a],c=KA(s);return xo(t,l,n,i,r,null,null,c)}function md(t,e,n,r,s,i,a="channelsLast"){const[l,c]=$2(e);let u;if(a==="channelsLast")u=[l,c,t[3],t[3]];else if(a==="channelsFirst")u=[l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return xo(t,u,n,r,s,i,!1,a)}function GA(t,e,n,r,s,i,a="NDHWC"){const[l,c,u]=jO(e);let d,f;if(a==="NDHWC")f="channelsLast",d=[l,c,u,t[4],t[4]];else if(a==="NCDHW")f="channelsFirst",d=[l,c,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Dm(t,d,n,r,s,!1,f,i)}function xo(t,e,n,r,s,i,a=!1,l="channelsLast"){let[c,u,d,f]=[-1,-1,-1,-1];if(l==="channelsLast")[c,u,d,f]=t;else if(l==="channelsFirst")[c,f,u,d]=t;else throw new Error(`Unknown dataFormat ${l}`);const[A,m,,g]=e,[y,x]=$2(n),[v,w]=$2(r),B=h1(A,v),k=h1(m,w),{padInfo:j,outHeight:I,outWidth:O}=K2e(s,u,d,y,x,B,k,i,l),F=a?g*f:g;let D;return l==="channelsFirst"?D=[c,F,I,O]:l==="channelsLast"&&(D=[c,I,O,F]),{batchSize:c,dataFormat:l,inHeight:u,inWidth:d,inChannels:f,outHeight:I,outWidth:O,outChannels:F,padInfo:j,strideHeight:y,strideWidth:x,filterHeight:A,filterWidth:m,effectiveFilterHeight:B,effectiveFilterWidth:k,dilationHeight:v,dilationWidth:w,inShape:t,outShape:D,filterShape:e}}function Dm(t,e,n,r,s,i=!1,a="channelsLast",l){let[c,u,d,f,A]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[c,u,d,f,A]=t;else if(a==="channelsFirst")[c,A,u,d,f]=t;else throw new Error(`Unknown dataFormat ${a}`);const[m,g,y,,x]=e,[v,w,B]=jO(n),[k,j,I]=jO(r),O=h1(m,k),F=h1(g,j),D=h1(y,I),{padInfo:T,outDepth:N,outHeight:P,outWidth:z}=X2e(s,u,d,f,v,w,B,O,F,D,l),U=i?x*A:x;let ee;return a==="channelsFirst"?ee=[c,U,N,P,z]:a==="channelsLast"&&(ee=[c,N,P,z,U]),{batchSize:c,dataFormat:a,inDepth:u,inHeight:d,inWidth:f,inChannels:A,outDepth:N,outHeight:P,outWidth:z,outChannels:U,padInfo:T,strideDepth:v,strideHeight:w,strideWidth:B,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:O,effectiveFilterHeight:F,effectiveFilterWidth:D,dilationDepth:k,dilationHeight:j,dilationWidth:I,inShape:t,outShape:ee,filterShape:e}}function q2e(t,e,n,r,s){r==null&&(r=qD(t,e,n));const i=t[0],a=t[1],l=P2((i-e+2*r)/n+1,s),c=P2((a-e+2*r)/n+1,s);return[l,c]}function G2e(t,e,n,r,s,i){s==null&&(s=qD(t,e[0],r[0]));const a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*s>=e[l]&&(a[l]=P2((t[l]-e[l]+2*s)/r[l]+1,i));return a}function qD(t,e,n,r=1){const s=h1(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function $2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function jO(t){return typeof t=="number"?[t,t,t]:t}function h1(t,e){return e<=1?t:t+(t-1)*(e-1)}function K2e(t,e,n,r,s,i,a,l,c){let u,d,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const m=q2e([e,n],i,r,t,l);d=m[0],f=m[1]}else if(t==="same"){d=Math.ceil(e/r),f=Math.ceil(n/s);const A=Math.max(0,(d-1)*r+i-e),m=Math.max(0,(f-1)*s+a-n),g=Math.floor(A/2),y=A-g,x=Math.floor(m/2),v=m-x;u={top:g,bottom:y,left:x,right:v,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((e-i+1)/r),f=Math.ceil((n-a+1)/s);else if(typeof t=="object"){const A=c==="channelsLast"?t[1][0]:t[2][0],m=c==="channelsLast"?t[1][1]:t[2][1],g=c==="channelsLast"?t[2][0]:t[3][0],y=c==="channelsLast"?t[2][1]:t[3][1];u={top:A,bottom:m,left:g,right:y,type:A===0&&m===0&&g===0&&y===0?"VALID":"EXPLICIT"},d=P2((e-i+A+m)/r+1,l),f=P2((n-a+g+y)/s+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:d,outWidth:f}}function X2e(t,e,n,r,s,i,a,l,c,u,d){let f,A,m,g;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const x=G2e([e,n,r,1],[l,c,u],1,[s,i,a],t,d);A=x[0],m=x[1],g=x[2]}else if(t==="same"){A=Math.ceil(e/s),m=Math.ceil(n/i),g=Math.ceil(r/a);const y=(A-1)*s+l-e,x=(m-1)*i+c-n,v=(g-1)*a+u-r,w=Math.floor(y/2),B=y-w,k=Math.floor(x/2),j=x-k,I=Math.floor(v/2),O=v-I;f={top:k,bottom:j,left:I,right:O,front:w,back:B,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:A,outHeight:m,outWidth:g}}function P2(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function xm(t){const[e,n,r]=$2(t);return e===1&&n===1&&r===1}function Vo(t,e){return xm(t)||xm(e)}function a0(t){return $2(t).every(e=>e>0)}function KA(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Fl(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")ce(t0(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{ce(t0(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function Y2e(t,e){const r={x:fe(t,"x","reshape","string_or_numeric")},s={shape:e};return Ee.runKernel(p5,r,s)}const Fe=Ie({reshape_:Y2e});function J2e(t,e,n,r,s){const i=fe(t,"x","avgPool","float32"),a=1;ce(Vo(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=i,c=!1;i.rank===3&&(c=!0,l=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ce(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),Fl("avgPool",r,s);const u={x:l},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let f=Ee.runKernel(Nw,u,d);return f=Mt(f,i.dtype),c?Fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const _5=Ie({avgPool_:J2e});function Z2e(t,e,n,r,s,i="NDHWC"){const a=fe(t,"x","avgPool3d","float32");let l=a,c=!1;a.rank===4&&(c=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ce(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),ce(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ce(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Fl("avgPool3d",r,s);const u={x:l},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let f=Ee.runKernel(Tw,u,d);return f=Mt(f,l.dtype),c?Fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const GD=Ie({avgPool3d_:Z2e});function ewe(t,e=0){ce(t.length>=1,()=>"Pass at least one tensor to concat");const n=D2(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return ah(n[0]);const r=n,s={axis:e};return Ee.runKernel(Dw,r,s)}const Gi=Ie({concat_:ewe});function twe(t,e,n=!1,r=!1){let s=fe(t,"a","matMul"),i=fe(e,"b","matMul");[s,i]=Ki(s,i);const a={a:s,b:i},l={transposeA:n,transposeB:r};return Ee.runKernel(_w,a,l)}const fr=Ie({matMul_:twe});function nwe(t){const n={x:fe(t,"x","sigmoid","float32")};return Ee.runKernel(Qx,n)}const cd=Ie({sigmoid_:nwe});function rwe(t,e,n){const r=fe(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return Ee.runKernel(b5,s,i)}const Gn=Ie({slice_:rwe});function swe(t){const n={x:fe(t,"x","tanh","float32")};return Ee.runKernel(Kx,n)}const bm=Ie({tanh_:swe});function iwe(t,e,n,r,s,i){const a=fe(t,"forgetBias","basicLSTMCell"),l=fe(e,"lstmKernel","basicLSTMCell"),c=fe(n,"lstmBias","basicLSTMCell"),u=fe(r,"data","basicLSTMCell"),d=fe(s,"c","basicLSTMCell"),f=fe(i,"h","basicLSTMCell"),A=Gi([u,f],1),m=fr(A,l),g=Nt(m,c),y=g.shape[0],x=g.shape[1]/4,v=[y,x],w=Gn(g,[0,0],v),B=Gn(g,[0,x],v),k=Gn(g,[0,x*2],v),j=Gn(g,[0,x*3],v),I=Nt(Ne(cd(w),bm(B)),Ne(d,cd(Nt(a,k)))),O=Ne(bm(I),cd(j));return[I,O]}const _ee=Ie({basicLSTMCell_:iwe});function awe(t,e,n){const r=fe(t,"x","batchToSpaceND"),s=e.reduce((l,c)=>l*c);ce(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),ce(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ce(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},a={blockShape:e,crops:n};return Ee.runKernel(Rw,i,a)}const R5=Ie({batchToSpaceND_:awe});function owe(t){let e;return t.rank===0||t.rank===1?e=Fe(t,[1,1,1,t.size]):t.rank===2?e=Fe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function lwe(t,e,n,r,s,i){i==null&&(i=.001);const a=fe(t,"x","batchNorm"),l=fe(e,"mean","batchNorm"),c=fe(n,"variance","batchNorm");let u;s!=null&&(u=fe(s,"scale","batchNorm"));let d;r!=null&&(d=fe(r,"offset","batchNorm")),ce(l.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(d==null||l.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(u==null||l.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const A={x:owe(a),scale:u,offset:d,mean:l,variance:c},m={varianceEpsilon:i},g=Ee.runKernel(Ww,A,m);return Fe(g,a.shape)}const Jx=Ie({batchNorm_:lwe});function cwe(t,e,n,r,s,i){const a=fe(t,"x","batchNorm"),l=fe(e,"mean","batchNorm"),c=fe(n,"variance","batchNorm");let u;s!=null&&(u=fe(s,"scale","batchNorm"));let d;return r!=null&&(d=fe(r,"offset","batchNorm")),ce(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),ce(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),ce(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),d!=null&&ce(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),Jx(a,l,c,d,u,i)}const KD=Ie({batchNorm2d_:cwe});function uwe(t,e,n,r,s,i){const a=fe(t,"x","batchNorm"),l=fe(e,"mean","batchNorm"),c=fe(n,"variance","batchNorm");let u;s!=null&&(u=fe(s,"scale","batchNorm"));let d;return r!=null&&(d=fe(r,"offset","batchNorm")),ce(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),ce(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),ce(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),d!=null&&ce(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),Jx(a,l,c,d,u,i)}const XD=Ie({batchNorm3d_:uwe});function dwe(t,e,n,r,s,i){const a=fe(t,"x","batchNorm"),l=fe(e,"mean","batchNorm"),c=fe(n,"variance","batchNorm");let u;s!=null&&(u=fe(s,"scale","batchNorm"));let d;return r!=null&&(d=fe(r,"offset","batchNorm")),ce(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),ce(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),ce(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),d!=null&&ce(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),Jx(a,l,c,d,u,i)}const YD=Ie({batchNorm4d_:dwe});function fwe(t,e,n){const r=fe(t,"x","bincount"),s=fe(e,"weights","bincount");ce(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),ce(n>=0,()=>`size must be non-negative, but got ${n}.`),ce(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},a={size:n};return Ee.runKernel(nE,i,a)}const JD=Ie({bincount_:fwe});function hwe(t,e){const n=fe(t,"x","bitwiseAnd"),r=fe(e,"y","bitwiseAnd");if(!vr(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return Ee.runKernel(Ow,s)}const Ree=Ie({bitwiseAnd_:hwe});function Awe(t,e){const n=fe(t,"s0","broadcastArgs","int32"),r=fe(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return Ee.runKernel(rE,s)}const Oee=Ie({broadcastArgs_:Awe});function pwe(t,e){let n=fe(t,"broadcastTo","x");const r=n.shape;if(Qc(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=Fe(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,d)=>u>1?d:-1).filter(u=>u>=0).length===0)return ah(n);const l={x:n},c={reps:i};return Ee.runKernel(Xx,l,c)}const Ug=Ie({broadcastTo_:pwe});function mwe(t){const n={x:fe(t,"x","ceil","float32")};return Ee.runKernel(dx,n)}const ZD=Ie({ceil_:mwe});function R0(t,e,n){Qc(t),n=n||N0(e);const r={shape:t,value:e,dtype:n};return Ee.runKernel(xE,{},r)}function gwe(t,e,n){const r=fe(t,"x","clipByValue");if(ce(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return R0(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return Ee.runKernel(fx,s,i)}const nc=Ie({clipByValue_:gwe});function ywe(t){return Gi(t,0)}const eL=Ie({concat1d_:ywe});function xwe(t,e){return Gi(t,e)}const O5=Ie({concat2d_:xwe});function bwe(t,e){return Gi(t,e)}const tL=Ie({concat3d_:bwe});function vwe(t,e){return Gi(t,e)}const nL=Ie({concat4d_:vwe});function wwe(t,e,n,r,s="NHWC",i=[1,1],a){const l=fe(t,"x","conv2d","float32"),c=fe(e,"filter","conv2d","float32");let u=l,d=!1;l.rank===3&&(d=!0,u=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),ce(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),Fl("conv2d",r,a);const f=s==="NHWC"?u.shape[3]:u.shape[1];ce(f===c.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${c.shape[2]}.`),ce(Vo(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ce(a0(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),ce(a0(n),()=>"Error in conv2D: Strides should be larger than 0.");const A={x:u,filter:c},m={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},g=Ee.runKernel(Lw,A,m);return d?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const RA=Ie({conv2d_:wwe});function Swe(t,e,n,r,s="NWC",i=1,a){const l=fe(t,"x","conv1d"),c=fe(e,"filter","conv1d");let u=l,d=!1;l.rank===2&&(d=!0,u=Fe(l,[1,l.shape[0],l.shape[1]])),ce(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),ce(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),Fl("conv1d",r,a),ce(u.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${c.shape[1]}.`),ce(Vo(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),ce(a0(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),ce(a0(n),()=>"Error in conv1D: Stride should be larger than 0."),ce(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const f=Fe(c,[1,c.shape[0],c.shape[1],c.shape[2]]),A=Fe(u,[u.shape[0],1,u.shape[1],u.shape[2]]),x=RA(A,f,[1,n],r,"NHWC",[1,i],a);return d?Fe(x,[x.shape[2],x.shape[3]]):Fe(x,[x.shape[0],x.shape[2],x.shape[3]])}const o3=Ie({conv1d_:Swe});function Cwe(t,e,n,r,s,i="NHWC",a){ce(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let l=t,c=e,u=!1;e.rank===3&&(u=!0,c=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,t[0],t[1],t[2]]),ce(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),ce(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),ce(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const d=i==="NHWC"?l[3]:l[1],f=i==="NHWC"?c.shape[3]:c.shape[1];ce(d===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${n.shape[2]}.`),ce(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Fl("conv2dDerInput",s,a);const A={dy:c,filter:n},m={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,inputShape:l},g=Ee.runKernel($w,A,m);return u?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const rL=Ie({conv2DBackpropInput_:Cwe});function kwe(t,e,n,r,s,i){const a=fe(t,"x","conv2dTranspose"),l=fe(e,"filter","conv2dTranspose");return rL(n,a,l,r,s,"NHWC",i)}const l3=Ie({conv2dTranspose_:kwe});function Bwe(t,e,n,r,s="NDHWC",i=[1,1,1]){const a=fe(t,"x","conv3d"),l=fe(e,"filter","conv3d");let c=a,u=!1;a.rank===4&&(u=!0,c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ce(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),ce(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),ce(c.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${l.shape[3]}.`),ce(Vo(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ce(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),ce(a0(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),ce(a0(n),()=>"Error in conv3D: Strides should be larger than 0.");const d={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i},A=Ee.runKernel(Pw,d,f);return u?Fe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const sL=Ie({conv3d_:Bwe});function jwe(t,e,n,r,s){ce(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,a=e,l=!1;e.rank===4&&(l=!0,a=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const c=i[4],u=a.shape[4];ce(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),ce(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),ce(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ce(c===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`),ce(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const d={dy:a,filter:n},f={pad:s,strides:r,inputShape:i},A=Ee.runKernel(oE,d,f);return l?Fe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const Fee=Ie({conv3DBackpropInput_:jwe});function Ewe(t,e,n,r,s){const i=fe(t,"x","conv3dTranspose"),a=fe(e,"filter","conv3dTranspose");return Fee(n,i,a,r,s)}const iL=Ie({conv3dTranspose_:Ewe});function Iwe(t){const n={x:fe(t,"x","cos","float32")};return Ee.runKernel(hx,n)}const F5=Ie({cos_:Iwe});function Nwe(t){const n={x:fe(t,"x","cosh","float32")};return Ee.runKernel(Ax,n)}const c3=Ie({cosh_:Nwe});function Twe(t,e=0,n=!1,r=!1){const i={x:fe(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return Ee.runKernel(lE,i,a)}const z2=Ie({cumprod_:Twe});function _we(t,e=0,n=!1,r=!1){const i={x:fe(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return Ee.runKernel(zw,i,a)}const u3=Ie({cumsum_:_we});function Rwe(t,e,n,r=!1){const s=fe(t,"x","denseBincount"),i=fe(e,"weights","denseBincount");ce(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),ce(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),ce(n>=0,()=>`size must be non-negative, but got ${n}.`),ce(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const a={x:s,weights:i},l={size:n,binaryOutput:r};return Ee.runKernel(uE,a,l)}const ZB=Ie({denseBincount_:Rwe});function Owe(t,e,n="NHWC"){const r=fe(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];ce(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),ce(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),ce(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),ce(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const l={x:r},c={blockSize:e,dataFormat:n};return Ee.runKernel(dE,l,c)}const aL=Ie({depthToSpace_:Owe});function Fwe(t,e,n,r,s="NHWC",i=[1,1],a){const l=fe(t,"x","depthwiseConv2d","float32"),c=fe(e,"filter","depthwiseConv2d","float32");let u=l,d=!1;l.rank===3&&(d=!0,u=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),ce(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);const f=s==="NHWC"?u.shape[3]:u.shape[1];ce(f===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${c.shape[2]}.`),Fl("depthwiseConv2d",r,a);const A={x:u,filter:c},m={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},g=Ee.runKernel(Uw,A,m);return d?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Zx=Ie({depthwiseConv2d_:Fwe});function Dwe(t){const n={x:fe(t,"x","diag")};return Ee.runKernel(AE,n)}const Dee=Ie({diag_:Dwe});function Lwe(t,e,n,r,s=[1,1],i="NHWC"){const a=fe(t,"x","dilation2d"),l=fe(e,"filter","dilation2d");ce(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),ce(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),ce(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let c=a,u=!1;a.rank===3&&(c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),ce(c.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${l.shape[2]}`);const d={x:c,filter:l},f={strides:n,pad:r,dilations:s},A=Ee.runKernel(Mw,d,f);return u?Fe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const oL=Ie({dilation2d_:Lwe});function o0(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,a=t[i]||1;(e[e.length-1-s]||1)>1&&a===1&&r.unshift(i)}return r}function Pa(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,a=e[i];(s==null||s===1&&a>1)&&n.unshift(i)}return n}function rr(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let a=e[e.length-s-1];if(a==null&&(a=1),i===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=i;else if(i!==a){const l=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(l)}else r[n-s-1]=i}return r}const $we=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:rr,getBroadcastDims:o0,getReductionAxes:Pa},Symbol.toStringTag,{value:"Module"}));function Pwe(t,e){let n=fe(t,"a","equal","string_or_numeric"),r=fe(e,"b","equal","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Qw,s)}const fd=Ie({equal_:Pwe});function zwe(t,e,n){const r=fe(e,"a","where"),s=fe(n,"b","where"),i=fe(t,"condition","where","bool"),a=rr(rr(i.shape,r.shape),s.shape),l=Ug(i,a),c=Ug(r,a),u=Ug(s,a),d={condition:l,t:c,e:u};return Ee.runKernel(x5,d)}const Mo=Ie({where_:zwe});function Uwe(t){const n={x:fe(t,"x","zerosLike")};return Ee.runKernel(E5,n)}const $r=Ie({zerosLike_:Uwe});function Mwe(t,e){let n=fe(t,"a","div"),r=fe(e,"b","div");[n,r]=Ki(n,r);const s=un(n,r),i=$r(s),a=fd(r,i);return Mo(a,i,s)}const lL=Ie({divNoNan_:Mwe});function Qwe(t,e){const n=fe(t,"t1","dot"),r=fe(e,"t2","dot");ce((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(ce(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const a=Fe(n,[1,-1]),l=Fe(r,[-1,1]),c=fr(a,l);return Fe(c,[])}else if(n.rank===1&&r.rank===2){const a=Fe(n,[1,-1]),l=Fe(r,[r.shape[0],r.shape[1]]),c=fr(a,l);return Fe(c,[c.size])}else if(n.rank===2&&r.rank===1){const a=Fe(r,[-1,1]),l=fr(n,a);return Fe(l,[l.size])}else{const a=Fe(r,[r.shape[0],r.shape[1]]);return fr(n,a)}}const cL=Ie({dot_:Qwe});function Hwe(t,...e){const n=e.map((s,i)=>fe(s,`tensors${i}`,"einsum")),r={equation:t};return Ee.runKernel(mE,n,r)}const wg=Ie({einsum_:Hwe});function Wwe(t){const n={x:fe(t,"x","elu","float32")};return Ee.runKernel(mx,n)}const eb=Ie({elu_:Wwe});function Vwe(t,e){const n=fe(t,"x","ensureShape","string_or_numeric");if(!VZ(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Lee=Ie({ensureShape_:Vwe});function qwe(t){let e=fe(t,"x","erf");ce(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Mt(e,"float32"));const n={x:e};return Ee.runKernel(gx,n)}const d3=Ie({erf_:qwe});function uL(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function $ee(t,e,n){const r=t.length+e.length,s=[];let i=0,a=0;for(let l=0;l<r;l++)n.indexOf(l)===-1?s.push(t[i++]):s.push(e[a++]);return s}function bo(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function wa(t,e){const n=e.map(r=>1);return $ee(t,n,e)}function qo(t,e,n){ce(uL(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Yi(t,e){if(uL(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Lm(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Sa(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function Gwe(t,e=null,n=!1){const s={x:fe(t,"x","max")},i={reductionIndices:e,keepDims:n};return Ee.runKernel(t5,s,i)}const xu=Ie({max_:Gwe});function Kwe(t,e=null,n=!1){const s={x:fe(t,"x","min")},i={axis:e,keepDims:n};return Ee.runKernel(i5,s,i)}const N1=Ie({min_:Kwe});function Xwe(t,e){let n=fe(t,"base","pow"),r=fe(e,"exp","pow");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(Rx,s)}const mh=Ie({pow_:Xwe});function Dn(t,e){if((ho(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ho(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fm(t,[],[],e)}function Ywe(t){const n={x:fe(t,"x","sqrt","float32")};return Ee.runKernel(Wx,n)}const yo=Ie({sqrt_:Ywe});function Jwe(t){const e=fe(t,"x","square"),n={};return Ee.runKernel("Square",{x:e},n)}const Rs=Ie({square_:Jwe});function Zwe(t,e=null,n=!1){let r=fe(t,"x","sum");r.dtype==="bool"&&(r=Mt(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return Ee.runKernel(v5,s,i)}const An=Ie({sum_:Zwe});function e5e(t,e="euclidean",n=null,r=!1){t=fe(t,"x","norm");const s=Pee(t,e,n);let i=s.shape;if(r){const a=Ar(n,t.shape);i=wa(s.shape,a)}return Fe(s,i)}function Pee(t,e,n=null){if(t.rank===0)return Ra(t);if(t.rank!==1&&n===null)return Pee(Fe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return An(Ra(t),n);if(e===1/0)return xu(Ra(t),n);if(e===-1/0)return N1(Ra(t),n);if(e==="euclidean"||e===2)return yo(An(mh(Ra(t),Dn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return xu(An(Ra(t),n[0]),n[1]-1);if(e===1/0)return xu(An(Ra(t),n[1]),n[0]);if(e===-1/0)return N1(An(Ra(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return yo(An(Rs(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const tb=Ie({norm_:e5e});function t5e(t,e=null,n=!1){return tb(t,"euclidean",e,n)}const dL=Ie({euclideanNorm_:t5e});function n5e(t){const n={x:fe(t,"x","exp")};return Ee.runKernel(yx,n)}const rc=Ie({exp_:n5e});function r5e(t,e=0){const n=fe(t,"x","expandDims","string_or_numeric");ce(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return Ee.runKernel(Hw,r,s)}const Lo=Ie({expandDims_:r5e});function s5e(t){const n={x:fe(t,"x","expm1")};return Ee.runKernel(xx,n)}const fL=Ie({expm1_:s5e});function i5e(t,e){const n=fe(t,"x","tile","string_or_numeric");ce(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return Ee.runKernel(Xx,r,s)}const hu=Ie({tile_:i5e});function a5e(t,e,n,r="float32"){e==null&&(e=t);const s=cr([t,e],r),i=t<=e?t:e;for(let l=0;l<i;++l)s.set(1,l,l);const a=Fe(s.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return hu(Lo(a,0),[n[0],1,1]);if(n.length===2)return hu(Lo(Lo(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return hu(Lo(Lo(Lo(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const f3=Ie({eye_:a5e});function o5e(t){const n={x:fe(t,"x","floor","float32")};return Ee.runKernel(bx,n)}const nb=Ie({floor_:o5e});function l5e(t,e,n=0,r=0){const s=fe(t,"x","gather"),i=fe(e,"indices","gather","int32"),a={x:s,indices:i},l={axis:n,batchDims:r};return Ee.runKernel(Vw,a,l)}const rb=Ie({gather_:l5e});function c5e(t,e){let n=fe(t,"a","greater","string_or_numeric"),r=fe(e,"b","greater","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(qw,s)}const lc=Ie({greater_:c5e});function u5e(t,e){let n=fe(t,"a","greaterEqual","string_or_numeric"),r=fe(e,"b","greaterEqual","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(wx,s)}const XA=Ie({greaterEqual_:u5e});function d5e(t){const n={input:fe(t,"input","imag")};return Ee.runKernel(SE,n)}const D5=Ie({imag_:d5e});function f5e(t){const n={x:fe(t,"x","isFinite")};return Ee.runKernel(Cx,n)}const hL=Ie({isFinite_:f5e});function h5e(t){const n={x:fe(t,"x","isInf")};return Ee.runKernel(kx,n)}const AL=Ie({isInf_:h5e});function A5e(t){const n={x:fe(t,"x","isNaN")};return Ee.runKernel(Bx,n)}const pL=Ie({isNaN_:A5e});function p5e(t,e=.2){const r={x:fe(t,"x","leakyRelu")},s={alpha:e};return Ee.runKernel(Gw,r,s)}const L5=Ie({leakyRelu_:p5e});function m5e(t,e){let n=fe(t,"a","less","string_or_numeric"),r=fe(e,"b","less","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Kw,s)}const T1=Ie({less_:m5e});function g5e(t,e){let n=fe(t,"a","lessEqual","string_or_numeric"),r=fe(e,"b","lessEqual","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Xw,s)}const $m=Ie({lessEqual_:g5e});function zee(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return Ee.runKernel(CE,{},r)}function y5e(t,e=5,n=1,r=1,s=.5){const i=fe(t,"x","localResponseNormalization");ce(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),ce(t0(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,l=!1;i.rank===3&&(l=!0,a=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const c={x:a},u={depthRadius:e,bias:n,alpha:r,beta:s},d=Ee.runKernel(e5,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const mL=Ie({localResponseNormalization_:y5e});function x5e(t){const n={x:fe(t,"x","log","float32")};return Ee.runKernel(jx,n)}const Pc=Ie({log_:x5e});function b5e(t){const n={x:fe(t,"x","log1p")};return Ee.runKernel(Ex,n)}const $5=Ie({log1p_:b5e});function v5e(t){return ce(mm(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=fe(e,"x","tf.grad","string_or_numeric"),s=n!=null?fe(n,"dy","tf.grad"):null;return Ee.tidy(()=>{const{value:i,grads:a}=Ee.gradients(()=>t(r),[r],s);return s!=null&&Wo(i.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h3(a),a[0]})}}function w5e(t){return ce(mm(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{ce(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=D2(e,"args","tf.grads","string_or_numeric"),s=n!=null?fe(n,"dy","tf.grads"):null;return Ee.tidy(()=>{const{value:i,grads:a}=Ee.gradients(()=>t(...r),r,s);return s!=null&&Wo(i.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h3(a),a})}}function S5e(t){return ce(mm(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{ce(e instanceof Dr,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),ce(n==null||n instanceof Dr,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=Ee.gradients(()=>t(e),[e],n);return h3(r),{grad:r[0],value:s}}}function C5e(t){return ce(mm(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{ce(Array.isArray(e)&&e.every(s=>s instanceof Dr),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),ce(n==null||n instanceof Dr,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=Ee.gradients(()=>t(...e),e,n);return n!=null&&Wo(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h3(r.grads),r}}function Uee(t,e){ce(mm(t),()=>"The f passed in variableGrads(f) must be a function"),ce(e==null||Array.isArray(e)&&e.every(u=>u instanceof F2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in Ee.registeredVariables)e.push(Ee.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),ce(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:a,grads:l}=Ee.gradients(t,e,null,i);ce(l.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ce(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const c={};return e.forEach((u,d)=>{l[d]!=null&&(c[u.name]=l[d])}),r?.forEach(u=>c[u.name]=null),{value:a,grads:c}}function gh(t){return Ee.customGrad(t)}function h3(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function k5e(t){const n={x:fe(t,"x","neg")};return Ee.runKernel(o5,n)}const ni=Ie({neg_:k5e});function B5e(t){const n={x:fe(t,"x","softplus")};return Ee.runKernel(Hx,n)}const O0=Ie({softplus_:B5e});function j5e(t){const e=fe(t,"x","logSigmoid");return gh(r=>({value:ni(O0(ni(r))),gradFunc:a=>Ne(a,cd(ni(r)))}))(e)}const gL=Ie({logSigmoid_:j5e});function E5e(t,e){let n=fe(t,"a","sub"),r=fe(e,"b","sub");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(qx,s)}const Kt=Ie({sub_:E5e});function I5e(t,e=-1){const n=fe(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return gh((s,i)=>{const l=xu(s,e,!0),c=Kt(s,l),u=Kt(Mt(c,"float32"),Pc(An(rc(c),e,!0)));return i([u]),{value:u,gradFunc:(f,A)=>{const[m]=A,g=!0,y=rc(m);return Kt(f,Ne(An(f,e,g),y))}}})(n)}const A3=Ie({logSoftmax_:I5e});function N5e(t,e=null,n=!1){const r=fe(t,"x","logSumExp"),s=Ar(e,r.shape),i=xu(r,s,!0),a=Kt(r,i),l=rc(a),c=An(l,s),u=Pc(c),d=Nt(Fe(i,u.shape),u);if(n){const f=wa(d.shape,s);return Fe(d,f)}return d}const P5=Ie({logSumExp_:N5e});function T5e(t,e){const n=fe(t,"a","logicalAnd","bool"),r=fe(e,"b","logicalAnd","bool");rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Yw,s)}const df=Ie({logicalAnd_:T5e});function _5e(t){const n={x:fe(t,"x","logicalNot","bool")};return Ee.runKernel(Jw,n)}const z5=Ie({logicalNot_:_5e});function R5e(t,e){const n=fe(t,"a","logicalOr","bool"),r=fe(e,"b","logicalOr","bool");rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Zw,s)}const p3=Ie({logicalOr_:R5e});function O5e(t,e){const n=fe(t,"a","logicalXor","bool"),r=fe(e,"b","logicalXor","bool");return rr(n.shape,r.shape),df(p3(t,e),z5(df(t,e)))}const yL=Ie({logicalXor_:O5e});const DC=2147483648;function F5e(t,e,n="left"){const r=fe(t,"sortedSequence","searchSorted"),s=fe(e,"values","searchSorted"),i=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],l=Fe(r,[-1,i]),c=Fe(s,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(it(c.shape)>=DC)throw new Error(`values tensor size must less than ${DC}`);if(l.shape[1]>=DC)throw new Error(`trailing dim_size must less than ${DC} for int32 output type, was ${l.shape[1]}`);const u={sortedSequence:l,values:c},d={side:n};return Ee.runKernel(ME,u,d)}const m3=Ie({searchSorted_:F5e});function Mee(t,e){return m3(t,e,"left")}function D5e(t,e,n,r,s){const i=fe(t,"x","maxPool"),a=1;let l=i,c=!1;i.rank===3&&(c=!0,l=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ce(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),ce(Vo(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Fl("maxPool",r,s);const u={x:l},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s},f=Ee.runKernel(n5,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const U5=Ie({maxPool_:D5e});function L5e(t,e=[1,1,1],n,r,s,i="NDHWC"){const a=fe(t,"x","maxPool3d");let l=a,c=!1;a.rank===4&&(c=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ce(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),ce(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Fl("maxPool3d",r,s);const u={x:l},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},f=Ee.runKernel(r5,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const xL=Ie({maxPool3d_:L5e});function $5e(t,e,n,r,s=!1){const a={x:fe(t,"x","maxPoolWithArgmax")},l={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},c=Ee.runKernel(EE,a,l);return{result:c[0],indexes:c[1]}}const Qee=Ie({maxPoolWithArgmax_:$5e});function P5e(t,e){let n=fe(t,"a","maximum"),r=fe(e,"b","maximum");[n,r]=Ki(n,r),n.dtype==="bool"&&(n=Mt(n,"int32"),r=Mt(r,"int32")),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Ix,s)}const kh=Ie({maximum_:P5e});function z5e(t,e=null,n=!1){const s={x:fe(t,"x","mean")},i={axis:e,keepDims:n};return Ee.runKernel(s5,s,i)}const Ui=Ie({mean_:z5e});function La(t,e="float32"){if(Qc(t),e==="complex64"){const r=La(t,"float32"),s=La(t,"float32");return _A(r,s)}const n=Ho(it(t),e);return Ee.makeTensor(n,t,e)}function Kl(t,e="float32"){if(Qc(t),e==="complex64"){const r=Kl(t,"float32"),s=La(t,"float32");return _A(r,s)}const n=Yj(it(t),e);return Ee.makeTensor(n,t,e)}function Hee(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=fe(t,"x","meshgrid",t instanceof Dr?t.dtype:"float32");if(e===void 0)return[r];let s=fe(e,"y","meshgrid",e instanceof Dr?e.dtype:"float32");const i=it(r.shape),a=it(s.shape);return n==="xy"?(r=Fe(r,[1,-1]),s=Fe(s,[-1,1]),[fr(Kl([a,1],r.dtype),r),fr(s,Kl([1,i],s.dtype))]):(r=Fe(r,[-1,1]),s=Fe(s,[1,-1]),[fr(r,Kl([1,a],r.dtype)),fr(Kl([i,1],s.dtype),s)])}function U5e(t,e){let n=fe(t,"a","minimum"),r=fe(e,"b","minimum");[n,r]=Ki(n,r),n.dtype==="bool"&&(n=Mt(n,"int32"),r=Mt(r,"int32")),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(Nx,s)}const vm=Ie({minimum_:U5e});function M5e(t,e,n){ce(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=fe(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ce(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let l=0;l<r.rank;l++)ce(e[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ce(e[l][0]>=0&&e[l][0]<=r.shape[l]-s&&e[l][1]>=0&&e[l][1]<=r.shape[l]-s,()=>`Padding in dimension ${l} cannot be greater than or equal to ${r.shape[l]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},a={x:r};return Ee.runKernel(a5,a,i)}const bL=Ie({mirrorPad_:M5e});function Q5e(t,e){let n=fe(t,"a","mod"),r=fe(e,"b","mod");[n,r]=Ki(n,r);const s={a:n,b:r};return Ee.runKernel(Tx,s)}const vL=Ie({mod_:Q5e});function H5e(t,e=null,n=!1){t=fe(t,"x","moments");const r=Ar(e,t.shape),s=Ui(t,r,n);let i=s.shape;n||(i=wa(s.shape,r));const a=Rs(Kt(Mt(t,"float32"),Fe(s,i))),l=Ui(a,r,n);return{mean:s,variance:l}}const M5=Ie({moments_:H5e});function W5e(t,e,n,r){const s=fe(e,"data","multiRNNCell"),i=D2(n,"c","multiRNNCell"),a=D2(r,"h","multiRNNCell");let l=s;const c=[];for(let f=0;f<t.length;f++){const A=t[f](l,i[f],a[f]);c.push(A[0]),c.push(A[1]),l=A[1]}const u=[],d=[];for(let f=0;f<c.length;f+=2)u.push(c[f]),d.push(c[f+1]);return[u,d]}const Wee=Ie({multiRNNCell_:W5e});function V5e(t,e,n,r=!1){const s=fe(t,"logits","multinomial"),i=s.size,a=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const c={logits:a===1?Fe(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},d=Ee.runKernel(IE,c,u);return a===1?Fe(d,[d.size]):d}const Vee=Ie({multinomial_:V5e});function q5e(t,e){let n=fe(t,"a","notEqual","string_or_numeric"),r=fe(e,"b","notEqual","string_or_numeric");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r};return Ee.runKernel(l5,s)}const l0=Ie({notEqual_:q5e});function G5e(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:fe(t,"indices","oneHot","int32")},l={dtype:s,depth:e,onValue:n,offValue:r};return Ee.runKernel(u5,a,l)}const _1=Ie({oneHot_:G5e});function K5e(t){const n={x:fe(t,"x","onesLike")};return Ee.runKernel(c5,n)}const zc=Ie({onesLike_:K5e});function X5e(t,e){const n=fe(t,"v1","outerProduct"),r=fe(e,"v2","outerProduct");ce(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=Fe(n,[-1,1]),i=Fe(r,[1,-1]);return fr(s,i)}const qee=Ie({outerProduct_:X5e});function Y5e(t,e,n=0){const r=fe(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return Ee.runKernel(f5,i,s)}const YA=Ie({pad_:Y5e});function J5e(t,e,n=0){return ce(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),YA(t,[e],n)}const Gee=Ie({pad1d_:J5e});function Z5e(t,e,n=0){return ce(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),YA(t,e,n)}const Kee=Ie({pad2d_:Z5e});function eSe(t,e,n=0){return ce(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),YA(t,e,n)}const Xee=Ie({pad3d_:eSe});function tSe(t,e,n=0){return ce(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),YA(t,e,n)}const Yee=Ie({pad4d_:tSe});function nSe(t,e,n){const r=fe(t,"x","spaceToBatchND");ce(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),ce(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ce(r.shape.reduce((a,l,c)=>c>0&&c<=e.length?a&&(l+n[c-1][0]+n[c-1][1])%e[c-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return Ee.runKernel(w5,s,i)}const Q5=Ie({spaceToBatchND_:nSe});function rSe(t,e,n,r,s,i,a){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const l=fe(t,"x","maxPool");let c=l,u=!1;l.rank===3&&(u=!0,c=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(Vo(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const d=md(c.shape,e,i,s,r),f=[d.dilationHeight,d.dilationWidth];let A;r==="same"?A=iSe([d.filterHeight,d.filterWidth],f):A=[[0,0],[0,0]];const m=f[0]===1&&f[1]===1,[g,y]=sSe([d.inHeight,d.inWidth],f,A),x=m?r:"valid",v=m?c:Q5(c,f,g),B=(n==="avg"?()=>_5(v,e,i,x,a):()=>U5(v,e,i,x,a))(),k=m?B:R5(B,f,y);return u?Fe(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function sSe(t,e,n){const r=n.map(d=>d[0]),s=n.map(d=>d[1]),i=t.concat(r,s),a=e.map((d,f)=>(d-i[f]%d)%d),l=s.map((d,f)=>d+a[f]),c=e.map((d,f)=>[r[f],l[f]]),u=e.map((d,f)=>[0,a[f]]);return[c,u]}function iSe(t,e){const r=t.map((a,l)=>a+(a-1)*(e[l]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),i=r.map((a,l)=>a-s[l]);return r.map((a,l)=>[s[l],i[l]])}const wL=Ie({pool_:rSe});function aSe(t,e){const n=fe(t,"x","prelu"),r=fe(e,"alpha","prelu"),s={x:n,alpha:r};return Ee.runKernel(h5,s)}const H5=Ie({prelu_:aSe});function oSe(t,e=null,n=!1){let r=fe(t,"x","prod");r.dtype==="bool"&&(r=Mt(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return Ee.runKernel(A5,s,i)}const SL=Ie({prod_:oSe});function lSe(t,e,n,r){const s=t.map((d,f)=>fe(d,`tensors${f}`,"raggedGather","int32")),i=fe(e,"paramsDenseValues","raggedGather"),a=fe(n,"indices","raggedGather","int32"),l={paramsNestedSplits:s,paramsDenseValues:i,indices:a},c={outputRaggedRank:r},u=Ee.runKernel(RE,l,c);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const Jee=Ie({raggedGather_:lSe});function cSe(t,e,n){const r=fe(t,"starts","raggedRange"),s=fe(e,"limits","raggedRange",r.dtype),i=fe(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:i},l=Ee.runKernel(OE,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}const Zee=Ie({raggedRange_:cSe});function uSe(t,e,n,r,s){const i=fe(t,"shape","raggedTensorToTensor","int32"),a=fe(e,"values","raggedTensorToTensor"),l=fe(n,"defaultValue","raggedTensorToTensor",a.dtype),c=r.map((f,A)=>fe(f,`tensors${A}`,"raggedTensorToTensor","int32")),u={shape:i,values:a,defaultValue:l,rowPartitionTensors:c},d={rowPartitionTypes:s};return Ee.runKernel(FE,u,d)}const ete=Ie({raggedTensorToTensor_:uSe});function dSe(t,e,n){Qc(t);const r=it(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return Ee.makeTensor(s,t,n)}const tte=Ie({rand_:dSe});var uB={exports:{}},fSe=uB.exports,rQ;function hSe(){return rQ||(rQ=1,(function(t){(function(e,n,r){function s(c){var u=this,d=l();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(c),u.s0<0&&(u.s0+=1),u.s1-=d(c),u.s1<0&&(u.s1+=1),u.s2-=d(c),u.s2<0&&(u.s2+=1),d=null}function i(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function a(c,u){var d=new s(c),f=u&&u.state,A=d.next;return A.int32=function(){return d.next()*4294967296|0},A.double=function(){return A()+(A()*2097152|0)*11102230246251565e-32},A.quick=A,f&&(typeof f=="object"&&i(f,d),A.state=function(){return i(d,{})}),A}function l(){var c=4022871197,u=function(d){d=String(d);for(var f=0;f<d.length;f++){c+=d.charCodeAt(f);var A=.02519603282416938*c;c=A>>>0,A-=c,A*=c,c=A>>>0,A-=c,c+=A*4294967296}return(c>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:this.alea=a})(fSe,t)})(uB)),uB.exports}var dB={exports:{}},ASe=dB.exports,sQ;function pSe(){return sQ||(sQ=1,(function(t){(function(e,n,r){function s(l){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var f=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^f^f>>>8},l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function a(l,c){var u=new s(l),d=c&&c.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var A=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(A+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&i(d,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(ASe,t)})(dB)),dB.exports}var fB={exports:{}},mSe=fB.exports,iQ;function gSe(){return iQ||(iQ=1,(function(t){(function(e,n,r){function s(l){var c=this,u="";c.next=function(){var f=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(f^f<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,d==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function a(l,c){var u=new s(l),d=c&&c.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var A=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(A+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&i(d,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(mSe,t)})(fB)),fB.exports}var hB={exports:{}},ySe=hB.exports,aQ;function xSe(){return aQ||(aQ=1,(function(t){(function(e,n,r){function s(l){var c=this;c.next=function(){var d=c.x,f=c.i,A,m;return A=d[f],A^=A>>>7,m=A^A<<24,A=d[f+1&7],m^=A^A>>>10,A=d[f+3&7],m^=A^A>>>3,A=d[f+4&7],m^=A^A<<7,A=d[f+7&7],A=A^A<<13,m^=A^A<<9,d[f]=m,c.i=f+1&7,m};function u(d,f){var A,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,A=0;A<f.length;++A)m[A&7]=m[A&7]<<15^f.charCodeAt(A)+m[A+1&7]<<13;for(;m.length<8;)m.push(0);for(A=0;A<8&&m[A]===0;++A);for(A==8?m[7]=-1:m[A],d.x=m,d.i=0,A=256;A>0;--A)d.next()}u(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function a(l,c){l==null&&(l=+new Date);var u=new s(l),d=c&&c.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var A=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(A+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(d.x&&i(d,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(ySe,t)})(hB)),hB.exports}var AB={exports:{}},bSe=AB.exports,oQ;function vSe(){return oQ||(oQ=1,(function(t){(function(e,n,r){function s(l){var c=this;c.next=function(){var d=c.w,f=c.X,A=c.i,m,g;return c.w=d=d+1640531527|0,g=f[A+34&127],m=f[A=A+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=f[A]=g^m,c.i=A,g+(d^d>>>16)|0};function u(d,f){var A,m,g,y,x,v=[],w=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,w=Math.max(w,f.length)),g=0,y=-32;y<w;++y)f&&(m^=f.charCodeAt((y+32)%f.length)),y===0&&(x=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,y>=0&&(x=x+1640531527|0,A=v[y&127]^=m+x,g=A==0?g+1:0);for(g>=128&&(v[(f&&f.length||0)&127]=-1),g=127,y=512;y>0;--y)m=v[g+34&127],A=v[g=g+1&127],m^=m<<13,A^=A<<17,m^=m>>>15,A^=A>>>12,v[g]=m^A;d.w=x,d.X=v,d.i=g}u(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function a(l,c){l==null&&(l=+new Date);var u=new s(l),d=c&&c.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var A=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(A+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(d.X&&i(d,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(bSe,t)})(AB)),AB.exports}var pB={exports:{}},wSe=pB.exports,lQ;function SSe(){return lQ||(lQ=1,(function(t){(function(e,n,r){function s(l){var c=this,u="";c.next=function(){var f=c.b,A=c.c,m=c.d,g=c.a;return f=f<<25^f>>>7^A,A=A-m|0,m=m<<24^m>>>8^g,g=g-f|0,c.b=f=f<<20^f>>>12^A,c.c=A=A-m|0,c.d=m<<16^A>>>16^g,c.a=g-f|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=l|0):u+=l;for(var d=0;d<u.length+20;d++)c.b^=u.charCodeAt(d)|0,c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function a(l,c){var u=new s(l),d=c&&c.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var A=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(A+m)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&i(d,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(wSe,t)})(pB)),pB.exports}var mB={exports:{}};const CSe={},kSe=Object.freeze(Object.defineProperty({__proto__:null,default:CSe},Symbol.toStringTag,{value:"Module"})),EO=nD(kSe);var BSe=mB.exports,cQ;function jSe(){return cQ||(cQ=1,(function(t){(function(e,n,r){var s=256,i=6,a=52,l="random",c=r.pow(s,i),u=r.pow(2,a),d=u*2,f=s-1,A;function m(k,j,I){var O=[];j=j==!0?{entropy:!0}:j||{};var F=v(x(j.entropy?[k,B(n)]:k??w(),3),O),D=new g(O),T=function(){for(var N=D.g(i),P=c,z=0;N<u;)N=(N+z)*s,P*=s,z=D.g(1);for(;N>=d;)N/=2,P/=2,z>>>=1;return(N+z)/P};return T.int32=function(){return D.g(4)|0},T.quick=function(){return D.g(4)/4294967296},T.double=T,v(B(D.S),n),(j.pass||I||function(N,P,z,U){return U&&(U.S&&y(U,D),N.state=function(){return y(D,{})}),z?(r[l]=N,P):N})(T,F,"global"in j?j.global:this==r,j.state)}function g(k){var j,I=k.length,O=this,F=0,D=O.i=O.j=0,T=O.S=[];for(I||(k=[I++]);F<s;)T[F]=F++;for(F=0;F<s;F++)T[F]=T[D=f&D+k[F%I]+(j=T[F])],T[D]=j;(O.g=function(N){for(var P,z=0,U=O.i,ee=O.j,q=O.S;N--;)P=q[U=f&U+1],z=z*s+q[f&(q[U]=q[ee=f&ee+P])+(q[ee]=P)];return O.i=U,O.j=ee,z})(s)}function y(k,j){return j.i=k.i,j.j=k.j,j.S=k.S.slice(),j}function x(k,j){var I=[],O=typeof k,F;if(j&&O=="object")for(F in k)try{I.push(x(k[F],j-1))}catch{}return I.length?I:O=="string"?k:k+"\0"}function v(k,j){for(var I=k+"",O,F=0;F<I.length;)j[f&F]=f&(O^=j[f&F]*19)+I.charCodeAt(F++);return B(j)}function w(){try{var k;return A&&(k=A.randomBytes)?k=k(s):(k=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(k)),B(k)}catch{var j=e.navigator,I=j&&j.plugins;return[+new Date,e,I,e.screen,B(n)]}}function B(k){return String.fromCharCode.apply(0,k)}if(v(r.random(),n),t.exports){t.exports=m;try{A=EO}catch{}}else r["seed"+l]=m})(typeof self<"u"?self:BSe,[],Math)})(mB)),mB.exports}var e_,uQ;function ESe(){if(uQ)return e_;uQ=1;var t=hSe(),e=pSe(),n=gSe(),r=xSe(),s=vSe(),i=SSe(),a=jSe();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=r,a.xor4096=s,a.tychei=i,e_=a,e_}var g3=ESe();const ISe=.001,nte=.1;function NSe(t,e,n){return n==null&&(n=CL()),IO(t,e,(r,s)=>kL(r,s,n))}function CL(){return Ee.backend.floatPrecision()===32?ISe:nte}function IO(t,e,n){let r=!0;if((ho(t)||ho(e))&&(r=!1),ho(t)&&ho(e)&&(r=!0),r){const a=t.constructor.name,l=e.constructor.name;if(a!==l)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${l}`)}if(Array.isArray(t)&&Array.isArray(e)){const a=ph(t),l=ph(e);if(!vr(a,l))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${l}]`)}const s=ho(t)?t:Ah(t),i=ho(e)?e:Ah(e);if(s.length!==i.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${i.length}.
Actual:   ${s}.
Expected: ${i}.`);for(let a=0;a<i.length;++a){const l=s[a],c=i[a];if(!n(l,c))throw new Error(`Arrays differ: actual[${a}] = ${l}, expected[${a}] = ${c}.
Actual:   ${s}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function TSe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function _Se(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return eh(t)||eh(t[0])||eh(e)||eh(e[0])?IO(t,n,(r,s)=>r==s):IO(t,e,(r,s)=>kL(r,s,0))}function RSe(t,e,n){if(n==null&&(n=CL()),!kL(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function kL(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function OSe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function FSe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function rte(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?rte(n):t[e]=ih(n)}return t}function DSe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function LSe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const $Se=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:nte,createVideoElement:DSe,encodeStrings:rte,expectArrayBuffersEqual:FSe,expectArraysClose:NSe,expectArraysEqual:_Se,expectNumbersClose:RSe,expectPromiseToFail:TSe,expectValuesInRange:OSe,play:LSe,testEpsilon:CL},Symbol.toStringTag,{value:"Module"}));class BL{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=g3.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,a;do s=2*this.random()-1,i=2*this.random()-1,a=s*s+i*i;while(a>=1||a===0);const l=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*s*l,n=this.mean+this.stdDev*i*l,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class PSe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=g3.alea(i.toString()),this.randn=new BL(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class zSe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=g3.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function USe(t,e,n=1,r="float32",s){if(Qc(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new PSe(e,n,r,s),a=cr(t,r);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const ste=Ie({randomGamma_:USe});function MSe(t,e=0,n=1,r,s){if(Qc(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new BL(e,n,r,!1,s),a=cr(t,r);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const y3=Ie({randomNormal_:MSe});function QSe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return y3(t,0,1,e,n)}const ite=Ie({randomStandardNormal_:QSe});function HSe(t,e=0,n=1,r="float32",s){Qc(t);const i=cr(t,r),a=new zSe(e,n,null,s);for(let l=0;l<i.values.length;l++)i.values[l]=a.nextValue();return i.toTensor()}const Pm=Ie({randomUniform_:HSe});function WSe(t,e,n,r){return Pm(t,e,n,"int32",r)}const ate=Ie({randomUniformInt_:WSe});function c0(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return Ee.runKernel(DE,{},s)}function VSe(t){const n={input:fe(t,"input","real")};return Ee.runKernel(LE,n)}const R1=Ie({real_:VSe});function qSe(t){const n={x:fe(t,"x","reciprocal")};return Ee.runKernel(Ox,n)}const jL=Ie({reciprocal_:qSe});function GSe(t){const n={x:fe(t,"x","relu")};return Ee.runKernel(Fx,n)}const wf=Ie({relu_:GSe});function KSe(t){const n={x:fe(t,"x","relu6")};return Ee.runKernel(Dx,n)}const x3=Ie({relu6_:KSe});function XSe(t,e){const r={x:fe(t,"x","reverse")},s={dims:e};return Ee.runKernel(y5,r,s)}const wu=Ie({reverse_:XSe});function YSe(t){const e=fe(t,"x","reverse");return ce(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),wu(e,0)}const ote=Ie({reverse1d_:YSe});function JSe(t,e){const n=fe(t,"x","reverse");return ce(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),wu(n,e)}const lte=Ie({reverse2d_:JSe});function ZSe(t,e){const n=fe(t,"x","reverse");return ce(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),wu(n,e)}const cte=Ie({reverse3d_:ZSe});function eCe(t,e){const n=fe(t,"x","reverse");return ce(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),wu(n,e)}const ute=Ie({reverse4d_:eCe});function tCe(t){const n={x:fe(t,"x","round")};return Ee.runKernel(Lx,n)}const b3=Ie({round_:tCe});function nCe(t){const n={x:fe(t,"x","rsqrt","float32")};return Ee.runKernel($x,n)}const v3=Ie({rsqrt_:nCe});function rCe(t){const n={x:fe(t,"x","selu")};return Ee.runKernel(Px,n)}const w3=Ie({selu_:rCe});function sCe(t,e,n,r,s,i=[1,1],a="NHWC"){const l=fe(t,"x","separableConv2d"),c=fe(e,"depthwiseFilter","separableConv2d"),u=fe(n,"pointwiseFilter","separableConv2d");let d=l,f=!1;if(l.rank===3&&(f=!0,d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ce(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),ce(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),ce(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),ce(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),ce(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const A=c.shape[2],m=c.shape[3];ce(u.shape[2]===A*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${A*m}, but got ${u.shape[2]}.`);const g=Zx(d,c,r,s,a,i),x=RA(g,u,1,"valid",a);return f?Fe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const S3=Ie({separableConv2d_:sCe});async function iCe(t,e){const n=fe(t,"x","setdiff1d"),r=fe(e,"y","setdiff1d");ce(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),ce(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),ce(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),a=new Set(i);let l=0;for(let d=0;d<s.length;d++)a.has(s[d])||l++;const c=new $a([l],n.dtype),u=new $a([l],"int32");for(let d=0,f=0;d<s.length;d++)a.has(s[d])||(c.values[f]=s[d],u.values[f]=d,f++);return[c.toTensor(),u.toTensor()]}const dte=iCe;function aCe(t){const n={x:fe(t,"x","sign")};return Ee.runKernel(Mx,n)}const EL=Ie({sign_:aCe});function oCe(t){const n={x:fe(t,"x","sin","float32")};return Ee.runKernel(zx,n)}const C3=Ie({sin_:oCe});function lCe(t){const n={x:fe(t,"x","sinh")};return Ee.runKernel(Ux,n)}const k3=Ie({sinh_:lCe});function cCe(t,e,n){const r=fe(t,"x","slice1d");return ce(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gn(r,[e],[n])}const W5=Ie({slice1d_:cCe});function uCe(t,e,n){const r=fe(t,"x","slice2d");return ce(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gn(r,e,n)}const B3=Ie({slice2d_:uCe});function dCe(t,e,n){const r=fe(t,"x","slice3d");return ce(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gn(r,e,n)}const V5=Ie({slice3d_:dCe});function fCe(t,e,n){const r=fe(t,"x","slice4d");return ce(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gn(r,e,n)}const O1=Ie({slice4d_:fCe});function hCe(t,e=-1){const n=fe(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return Ee.runKernel(C5,r,s)}const q5=Ie({softmax_:hCe});function ACe(t){ce(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Ee.runKernel(yE,e)}const G5=Ie({fft_:ACe});function pCe(t){ce(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Ee.runKernel(wE,e)}const F1=Ie({ifft_:pCe});function mCe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Fe(t,[n,e]);r=F1(s)}else{const s=[n,2*(e-1)],i=Fe(R1(t),[n,e]),a=Fe(D5(t),[n,e]),l=wu(Gn(i,[0,1],[n,e-2]),1),c=Ne(wu(Gn(a,[0,1],[n,e-2]),1),Dn(-1)),u=Gi([i,l],1),d=Gi([a,c],1),f=Fe(_A(u,d),[s[0],s[1]]);r=F1(f)}if(r=R1(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=Fe(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const j3=Ie({irfft_:mCe});function gCe(t,e,n=0){const s={x:fe(t,"x","split")},i={numOrSizeSplits:e,axis:n};return Ee.runKernel(S5,s,i)}const Zl=Ie({split_:gCe});function yCe(t,e){ce(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const g=t.shape.map(x=>0),y=t.shape.map(x=>x);y[t.shape.length-1]=e,s=Gn(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,s=Gi([t,La(g)],t.shape.length-1),n=e}else s=t;const i=$r(s),a=Fe(_A(s,i),[r,n]),l=G5(a),c=Math.floor(n/2)+1,u=R1(l),d=D5(l),f=Zl(u,[c,n-c],u.shape.length-1),A=Zl(d,[c,n-c],d.shape.length-1),m=s.shape.slice();return m[s.shape.length-1]=c,Fe(_A(f[0],A[0]),m)}const K5=Ie({rfft_:yCe});function xCe(t,e){let n=fe(t,"a","squaredDifference"),r=fe(e,"b","squaredDifference");[n,r]=Ki(n,r),rr(n.shape,r.shape);const s={a:n,b:r},i={};return Ee.runKernel(Vx,s,i)}const E3=Ie({squaredDifference_:xCe});function bCe(t,e){const n=fe(t,"x","squeeze","string_or_numeric");return Fe(n,VA(n.shape,e).newShape)}const ud=Ie({squeeze_:bCe});function vCe(t,e=0){const n=D2(t,"tensors","stack","string_or_numeric");ce(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ce(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return Ee.runKernel(d5,r,s)}const sc=Ie({stack_:vCe});function wCe(t,e=0){const r={x:fe(t,"x","step")},s={alpha:e};return Ee.runKernel(Yx,r,s)}const F0=Ie({step_:wCe});function SCe(t,e,n,r,s=0,i=0,a=0,l=0,c=0){const d={x:fe(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:c};return Ee.runKernel(KE,d,f)}const IL=Ie({stridedSlice_:SCe});function CCe(t){const n={x:fe(t,"x","tan","float32")};return Ee.runKernel(Gx,n)}const NL=Ie({tan_:CCe});function qa(t,e){I0(t);const n=ph(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fm(t,null,n,e)}function sm(t,e,n){if(I0(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ph(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fm(t,e,r,n)}function TL(t,e,n){if(I0(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=ph(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fm(t,e,r,n)}function fte(t,e,n){if(I0(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=ph(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fm(t,e,r,n)}function hte(t,e,n){if(I0(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=ph(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fm(t,e,r,n)}function Ate(t,e,n){if(I0(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=ph(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Fm(t,e,r,n)}function _L(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==t[a+r])throw new Error(i+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${t[a+s]})`)}function I3(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}_L(n,e,t)}function zm(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let a=1;for(let f=s;f<i;++f)a*=n[f];const l=s<1?1:s,c=it(e.shape)/l,u=[...On(n.slice(0,s)),1],d=it(n);return{sliceRank:s,numUpdates:c,sliceSize:a,strides:u,outputSize:d}}const kCe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:zm,validateInput:I3,validateUpdateShape:_L},Symbol.toStringTag,{value:"Module"}));function BCe(t,e,n){const r=fe(t,"tensor","tensorScatterupdate"),s=fe(e,"indices","tensorScatterupdate","int32"),i=fe(n,"updates","tensorScatterupdate");if(I3(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const a={tensor:r,indices:s,updates:i},l={};return Ee.runKernel(UE,a,l)}const pte=Ie({tensorScatterUpdate_:BCe});function jCe(t,e=1,n=!0){const r=fe(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},a={k:e,sorted:n},[l,c]=Ee.runKernel(ZE,i,a);return{values:l,indices:c}}const RL=Ie({topk_:jCe});function ECe(t,e=0,n=1,r,s){if(Qc(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new BL(e,n,r,!0,s),a=cr(t,r);for(let l=0;l<a.values.length;l++)a.values[l]=i.nextValue();return a.toTensor()}const N3=Ie({truncatedNormal_:ECe});function ICe(t,e=0){const n=fe(t,"x","unique","string_or_numeric");ce(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,a]=Ee.runKernel(t3,r,s);return{values:i,indices:a}}const OL=Ie({unique_:ICe});function NCe(t,e,n){const r=fe(t,"x","unsortedSegmentSum"),s=fe(e,"segmentIds","unsortedSegmentSum","int32");ce(t0(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},a={numSegments:n};return Ee.runKernel(j5,i,a)}const T3=Ie({unsortedSegmentSum_:NCe});function TCe(t,e=0){const n=fe(t,"x","unstack","string_or_numeric");ce(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return Ee.runKernel(B5,r,s)}const Su=Ie({unstack_:TCe});function mte(t,e){return m3(t,e,"right")}function FL(t,e=!0,n,r){return Ee.makeVariable(t,e,n,r)}function _3(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=cr(t,"int32"),s=cr([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const a=r.indexToLoc(n[i]),l=i*t.length;s.values.set(a,l)}return s.toTensor()}async function _Ce(t){const e=fe(t,"condition","whereAsync","bool"),n=await e.data(),r=_3(e.shape,n);return t!==e&&e.dispose(),r}const DL=_Ce;async function RCe(t,e,n){const r=fe(t,"tensor","boolMask"),s=fe(e,"mask","boolMask","bool"),i=n??0,a=s.rank,l=r.shape;ce(a>0,()=>"mask cannot be scalar"),Wo(l.slice(i,i+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let y=i;y<i+a;y++)c*=l[y];const u=l.slice(0,i).concat([c],l.slice(i+a)),d=Fe(r,u),f=Fe(s,[-1]),A=await DL(f),m=ud(A,[1]),g=rb(d,m,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),m.dispose(),d.dispose(),f.dispose(),A.dispose(),g}const gte=RCe;function OCe(t,e,n){const r=fe(t,"x","transpose");if(e==null&&(e=r.shape.map((a,l)=>l).reverse()),ce(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{ce(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?He(()=>{let a=R1(r),l=D5(r);return a=Ee.runKernel(zg,{x:a},i),l=Ee.runKernel(zg,{x:l},i),n&&(l=ni(l)),_A(a,l)}):Ee.runKernel(zg,s,i)}const jr=Ie({transpose_:OCe});function FCe(t,e,n,r,s=!0){const i=fe(t,"v","movingAverage"),a=fe(e,"x","movingAverage"),l=fe(n,"decay","movingAverage");hee(i,a),ce(vr(i.shape,a.shape),()=>"Shape mismatch in v and x");const c=Dn(1),u=Kt(c,l);let d=Ne(Kt(a,i),u);if(s){ce(r!=null,()=>"When using zeroDebias: true, step is required.");const f=fe(r,"step","movingAverage");d=un(d,Kt(c,mh(l,f)))}return Nt(i,d)}const yte=Ie({movingAverage_:FCe});function DCe(t,e,n){Qc(n);const r=fe(t,"indices","scatterND","int32"),s=fe(e,"updates","scatterND");I3(s,r,n);const i={indices:r,updates:s},a={shape:n};return Ee.runKernel(zE,i,a)}const xte=Ie({scatterND_:DCe});function LCe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function $Ce(t,e,n,r=0){Qc(n);const s=fe(t,"sparseIndices","sparseToDense","int32"),i=fe(e,"sparseValues","sparseToDense","string_or_numeric"),a=fe(r,"defaultValue","sparseToDense",i.dtype);LCe(s,i,n,a);const l={sparseIndices:s,sparseValues:i,defaultValue:a},c={outputShape:n};return Ee.runKernel(qE,l,c)}const bte=Ie({sparseToDense_:$Ce});function PCe(t,e){const n=fe(e,"indices","gatherND","int32"),s={params:fe(t,"x","gatherND","string_or_numeric"),indices:n};return Ee.runKernel(vE,s)}const vte=Ie({gatherND_:PCe});function zCe(t,e){if(e==null)return t.shape.slice();if(vr(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}function UCe(t,e,n,r){const s=fe(t,"x","dropout");if(ce(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),ce(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Dr?s.clone():s;const i=zCe(s,n),a=1-e,l=un(nb(Nt(Pm(i,0,1,"float32",r),a)),a);return Ne(s,l)}const LL=Ie({dropout_:UCe});function $L(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function R3(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const a=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(a)}return qa(s,"float32")}async function MCe(t,e,n=1){const r=fe(t,"predictions","inTopK"),s=fe(e,"targets","inTopK");ce(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),ce(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Wo(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];ce(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const a=await r.data(),l=await s.data(),[c,u]=[a.length/i,i],d=go("bool",c);for(let f=0;f<c;f++){const A=f*u,m=a.subarray(A,A+u),g=[];for(let y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort((y,x)=>x.value-y.value),d[f]=0;for(let y=0;y<n;y++)if(g[y].index===l[f]){d[f]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),ld(d,s.shape,"bool")}const wte=MCe;function QCe(t,e,n,r,s,i="NHWC",a){let l=t;t.rank===3&&(l=Fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ce(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),ce(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),ce(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?l.shape[3]:l.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];ce(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),ce(d===n[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${n[3]}).`),Fl("conv2dDerFilter",s,a);const f={x:l,dy:c},A={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,filterShape:n};return Ee.runKernel(iE,f,A)}const PL=Ie({conv2DBackpropFilter_:QCe});function O3(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Ne(t,F0(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function F3(t,e){let n=e;const r=Pa(t.shape,e.shape);return r.length>0&&(n=An(n,r)),Fe(n,t.shape)}function D3(t,e,n,r){if(e==="linear")return t;if(e==="relu")return wf(t);if(e==="elu")return eb(t);if(e==="relu6")return x3(t);if(e==="prelu")return H5(t,n);if(e==="leakyrelu")return L5(t,r);if(e==="sigmoid")return cd(t);throw new Error(`Unknown fused activation ${e}.`)}const L3=(t,e)=>!(t>0)||e==="linear";function HCe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}){if(c=c||"linear",L3(Ee.state.gradientDepth,c)===!1){ce(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=RA(t,e,n,r,s,i,a);return l!=null&&(I=Nt(I,l)),D3(I,c,u,d)}const f=fe(t,"x","conv2d","float32"),A=fe(e,"filter","conv2d","float32");let m=f,g=!1;f.rank===3&&(g=!0,m=Fe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),ce(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),ce(A.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${A.rank}.`),Fl("fused conv2d",r,a);const y=s==="NHWC"?m.shape[3]:m.shape[1];ce(A.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${A.shape[2]}.`),ce(Vo(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const x=xo(m.shape,A.shape,n,i,r,a);let v;l!=null&&(v=fe(l,"bias","fused conv2d"),[v]=Ki(v,f),s==="NHWC"?rr(x.outShape,v.shape):(ce(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),ce(v.shape.length===0||v.shape[0]===x.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${x.outChannels})`)));let w;if(u!=null){const I=u.shape;if(ce(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)ce(I[0]===1||I[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${x.outChannels}).`);else if(I.length===3)try{rr(I,x.outShape)}catch{const F=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(F)}w=fe(u,"prelu weights","fused conv2d")}const B=(I,O)=>{ce(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[F,D,T,N]=O,P=O3(I,T,c);ce(xm(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const z=rL(D.shape,P,F,n,r),U=PL(D,P,F.shape,n,r),ee=[z,U];if(N!=null){const q=F3(N,P);ee.push(q)}return ee},k={x:m,filter:A,bias:v,preluActivationWeights:w},j={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:c,leakyreluAlpha:d};return l==null?gh((O,F,D)=>{let T=Ee.runKernel(T2,k,j);return D([F,O,T]),g&&(T=Fe(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:B}})(m,A):gh((O,F,D,T)=>{let N=Ee.runKernel(T2,k,j);return T([F,O,N,D]),g&&(N=Fe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:B}})(m,A,v)}const Ste=Ie({fusedConv2d_:HCe});function WCe(t,e,n,r,s,i=[1,1],a){let l=t;t.rank===3&&(l=Fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:l,dy:c},d={strides:r,pad:s,dimRoundingMode:a,dilations:i,filterShape:n};return Ee.runKernel(fE,u,d)}const Cte=Ie({depthwiseConv2dNativeBackpropFilter_:WCe});function VCe(t,e,n,r,s,i=[1,1],a){let l=e,c=!1;e.rank===3&&(c=!0,l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:l,filter:n},d={strides:r,pad:s,dimRoundingMode:a,dilations:i,inputShape:t},f=Ee.runKernel(hE,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const kte=Ie({depthwiseConv2dNativeBackpropInput_:VCe});function qCe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}){if(L3(Ee.state.gradientDepth,c)===!1){let j=Zx(t,e,n,r,s,i,a);return l!=null&&(j=Nt(j,l)),D3(j,c,u,d)}const f=fe(t,"x","depthwiseConv2d","float32"),A=fe(e,"filter","depthwiseConv2d","float32");let m=f,g=!1;f.rank===3&&(g=!0,m=Fe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),ce(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),ce(A.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${A.rank}.`),ce(m.shape[3]===A.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${A.shape[2]}.`),i==null&&(i=[1,1]),ce(Vo(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Fl("fused depthwiseConv2d",r,a);const y=xo(m.shape,A.shape,n,i,r,a,!0);let x;l!=null&&(x=fe(l,"bias","fused conv2d"),[x]=Ki(x,f),rr(y.outShape,x.shape));let v;u!=null&&(v=fe(u,"prelu weights","fused depthwiseConv2d"));const w=(j,I)=>{ce(xm(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[O,F,D,T]=I,N=O3(j,D,c),P=kte(F.shape,N,O,n,r,i,a),z=Cte(F,N,O.shape,n,r,i,a);if(T!=null){const U=F3(x,N);return[P,z,U]}return[P,z]},B={x:m,filter:A,bias:x,preluActivationWeights:v},k={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:c,leakyreluAlpha:d};return l==null?gh((I,O,F)=>{let D=Ee.runKernel(_2,B,k);return F([O,I,D]),g&&(D=Fe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:w}})(m,A):gh((I,O,F,D)=>{let T=Ee.runKernel(_2,B,k);return D([O,I,T,F]),g&&(T=Fe(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:w}})(m,A,x)}const GCe=Ie({fusedDepthwiseConv2d_:qCe});function KCe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(L3(Ee.state.gradientDepth,i)===!1){let N=fr(t,e,n,r);return s!=null&&(N=Nt(N,s)),D3(N,i,a,l)}let c=fe(t,"a","fused matMul"),u=fe(e,"b","fused matMul");[c,u]=Ki(c,u);const d=n?c.shape[c.rank-2]:c.shape[c.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],A=n?c.shape[c.rank-1]:c.shape[c.rank-2],m=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=c.shape.slice(0,-2),y=u.shape.slice(0,-2),x=it(g),v=it(y);ce(d===f,()=>`Error in fused matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${c.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const B=rr(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([A,m]),k=n?Fe(c,[x,d,A]):Fe(c,[x,A,d]),j=r?Fe(u,[v,m,f]):Fe(u,[v,f,m]);let I;s!=null&&(I=fe(s,"bias","fused matMul"),[I]=Ki(I,c),rr(B,I.shape));let O;a!=null&&(O=fe(a,"prelu weights","fused matMul"));const F=(N,P)=>{const[z,U,ee,q]=P,Z=O3(Fe(N,ee.shape),ee,i);let G,ne;if(!n&&!r?(G=fr(Z,U,!1,!0),ne=fr(z,Z,!0,!1)):!n&&r?(G=fr(Z,U,!1,!1),ne=fr(Z,z,!0,!1)):n&&!r?(G=fr(U,Z,!1,!0),ne=fr(z,Z,!1,!1)):(G=fr(U,Z,!0,!0),ne=fr(Z,z,!0,!0)),s!=null){const K=F3(q,Z);return[G,ne,K]}else return[G,ne]},D={a:k,b:j,bias:I,preluActivationWeights:O},T={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:l};return s==null?gh((P,z,U)=>{const ee=Ee.runKernel(N2,D,T);return U([P,z,ee]),{value:Fe(ee,B),gradFunc:F}})(k,j):gh((P,z,U,ee)=>{const q=Ee.runKernel(N2,D,T);return ee([P,z,q,U]),{value:Fe(q,B),gradFunc:F}})(k,j,I)}const NO=Ie({fusedMatMul_:KCe});const Bte=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Ste,depthwiseConv2d:GCe,matMul:NO},Symbol.toStringTag,{value:"Module"}));function XCe(t){return R3(t,.54,.46)}const YCe=Ie({hammingWindow_:XCe});function JCe(t){return R3(t,.5,.5)}const jte=Ie({hannWindow_:JCe});function ZCe(t,e,n,r=!1,s=0){let i=0;const a=[];for(;i+e<=t.size;)a.push(Gn(t,i,e)),i+=n;if(r)for(;i<t.size;){const l=i+e-t.size,c=Gi([Gn(t,i,e-l),R0([l],s)]);a.push(c),i+=n}return a.length===0?sm([],[0,e]):Fe(Gi(a),[a.length,e])}const Ete=Ie({frame_:ZCe});function eke(t,e,n,r,s=jte){r==null&&(r=$L(e));const i=Ete(t,e,n),a=Ne(i,s(e));return K5(a,r)}const tke=Ie({stft_:eke});function nke(t,e,n,r,s="bilinear",i=0){const a=fe(t,"image","cropAndResize"),l=fe(e,"boxes","cropAndResize","float32"),c=fe(n,"boxInd","cropAndResize","int32"),u=l.shape[0];ce(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),ce(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${l.shape}.`),ce(c.rank===1&&c.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${l.shape}.`),ce(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),ce(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),ce(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const d={image:a,boxes:l,boxInd:c},f={method:s,extrapolationValue:i,cropSize:r};return Ee.runKernel(cE,d,f)}const rke=Ie({cropAndResize_:nke});function ske(t){const e=fe(t,"image","flipLeftRight","float32");ce(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Ee.runKernel(bE,n,{})}const ike=Ie({flipLeftRight_:ske});function ake(t){const e=fe(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];ce(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),ce(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,hu(e,s)}const oke=Ie({grayscaleToRGB_:ake});function lke(t){const e=fe(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];ce(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),ce(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Mt(e,"float32"),a=qa([.2989,.587,.114]);let l;switch(e.rank){case 2:l=wg("ij,j->i",i,a);break;case 3:l=wg("ijk,k->ij",i,a);break;case 4:l=wg("ijkl,l->ijk",i,a);break;case 5:l=wg("ijklm,m->ijkl",i,a);break;case 6:l=wg("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return l=Lo(l,-1),Mt(l,s)}const cke=Ie({rgbToGrayscale_:lke});function uke(t,e,n=0,r=.5){const s=fe(t,"image","rotateWithOffset","float32");ce(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},a={radians:e,fillValue:n,center:r};return Ee.runKernel(n3,i,a)}const dke=Ie({rotateWithOffset_:uke});function sb(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=t.shape[0];return n=Math.min(n,a),ce(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),ce(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ce(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),ce(e.rank===1,()=>"scores must be a 1D tensor"),ce(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),ce(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}function fke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=fe(t,"boxes","nonMaxSuppression","float32"),a=fe(e,"scores","nonMaxSuppression","float32"),l=sb(i,a,n,r,s);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold;const c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return Ee.runKernel(NE,{boxes:i,scores:a},c)}const hke=Ie({nonMaxSuppression_:fke});function Ake(t,e,n){const r=pke(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function pke(t,e,n){return gke(t,e,n||mke)}function mke(t,e){return t>e?1:t<e?-1:0}function gke(t,e,n){let r=0,s=t.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const l=n(e,t[i]);l>0?r=i+1:(s=i,a=!l)}return a?r:-r-1}function $3(t,e,n,r,s){return zL(t,e,n,r,s,0)}function P3(t,e,n,r,s,i){return zL(t,e,n,r,s,0,!1,i,!0)}function z3(t,e,n,r,s,i){return zL(t,e,n,r,s,i,!0)}function zL(t,e,n,r,s,i,a=!1,l=!1,c=!1){const u=[];for(let x=0;x<e.length;x++)e[x]>s&&u.push({score:e[x],boxIndex:x,suppressBeginIndex:0});u.sort(dQ);const d=i>0?-.5/i:0,f=[],A=[];for(;f.length<n&&u.length>0;){const x=u.pop(),{score:v,boxIndex:w,suppressBeginIndex:B}=x;if(v<s)break;let k=!1;for(let j=f.length-1;j>=B;--j){const I=yke(t,w,f[j]);if(I>=r){k=!0;break}if(x.score=x.score*xke(r,d,I),x.score<=s)break}x.suppressBeginIndex=f.length,k||(x.score===v?(f.push(w),A.push(x.score)):x.score>s&&Ake(u,x,dQ))}const m=f.length,g=n-m;l&&g>0&&(f.push(...new Array(g).fill(0)),A.push(...new Array(g).fill(0)));const y={selectedIndices:f};return a&&(y.selectedScores=A),c&&(y.validOutputs=m),y}function yke(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),d=Math.min(s[1],s[3]),f=Math.max(s[0],s[2]),A=Math.max(s[1],s[3]),m=(l-i)*(c-a),g=(f-u)*(A-d);if(m<=0||g<=0)return 0;const y=Math.max(i,u),x=Math.max(a,d),v=Math.min(l,f),w=Math.min(c,A),B=Math.max(v-y,0)*Math.max(w-x,0);return B/(m+g-B)}function xke(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function dQ(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}async function bke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=fe(t,"boxes","nonMaxSuppressionAsync"),a=fe(e,"scores","nonMaxSuppressionAsync"),l=sb(i,a,n,r,s);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold;const c=await Promise.all([i.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f}=$3(u,d,n,r,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),qa(f,"int32")}const vke=bke;function wke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=fe(t,"boxes","nonMaxSuppression"),l=fe(e,"scores","nonMaxSuppression"),c=sb(a,l,n,r,s,i);n=c.maxOutputSize,r=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma;const u={boxes:a,scores:l},d={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},f=Ee.runKernel(_E,u,d);return{selectedIndices:f[0],selectedScores:f[1]}}const Ske=Ie({nonMaxSuppressionWithScore_:wke});async function Cke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=fe(t,"boxes","nonMaxSuppressionAsync"),l=fe(e,"scores","nonMaxSuppressionAsync"),c=sb(a,l,n,r,s,i);n=c.maxOutputSize,r=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma;const u=await Promise.all([a.data(),l.data()]),d=u[0],f=u[1],{selectedIndices:A,selectedScores:m}=z3(d,f,n,r,s,i);return a!==t&&a.dispose(),l!==e&&l.dispose(),{selectedIndices:qa(A,"int32"),selectedScores:qa(m)}}const kke=Cke;function Bke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=fe(t,"boxes","nonMaxSuppression"),l=fe(e,"scores","nonMaxSuppression"),c=sb(a,l,n,r,s,null),u=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,A={boxes:a,scores:l},m={maxOutputSize:u,iouThreshold:d,scoreThreshold:f,padToMaxOutputSize:i},g=Ee.runKernel(TE,A,m);return{selectedIndices:g[0],validOutputs:g[1]}}const jke=Ie({nonMaxSuppressionPadded_:Bke});async function Eke(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=fe(t,"boxes","nonMaxSuppressionAsync"),l=fe(e,"scores","nonMaxSuppressionAsync"),c=sb(a,l,n,r,s,null),u=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,[A,m]=await Promise.all([a.data(),l.data()]),{selectedIndices:g,validOutputs:y}=P3(A,m,u,d,f,i);return a!==t&&a.dispose(),l!==e&&l.dispose(),{selectedIndices:qa(g,"int32"),validOutputs:Dn(y,"int32")}}const Ike=Eke;function Nke(t,e,n=!1,r=!1){const s=fe(t,"images","resizeBilinear");ce(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),ce(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ce(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={images:i},c={alignCorners:n,halfPixelCenters:r,size:e},u=Ee.runKernel(g5,l,c);return a?Fe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Ite=Ie({resizeBilinear_:Nke});function Tke(t,e,n=!1,r=!1){const s=fe(t,"images","resizeNearestNeighbor");ce(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),ce(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ce(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ce(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={images:i},c={alignCorners:n,halfPixelCenters:r,size:e},u=Ee.runKernel(m5,l,c);return a?Fe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Nte=Ie({resizeNearestNeighbor_:Tke});function _ke(t,e="binary",n=!1,r=.5){const s=fe(t,"image","threshold"),i=.2989,a=.587,l=.114,c=s.shape[0]*s.shape[1];let u=Ne(qa([r]),255),d,f,A,m;if(ce(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),ce(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),ce(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),ce(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[d,f,A]=Zl(s,[1,1,1],-1);const x=Ne(d,i),v=Ne(f,a),w=Ne(A,l);m=Nt(Nt(x,v),w)}else m=t;if(e==="otsu"){const x=JD(Mt(b3(m),"int32"),ld([]),256);u=Rke(x,c)}const g=n?$m(m,u):lc(m,u);return Mt(Ne(g,255),"int32")}function Rke(t,e){let n=qa([-1]),r=qa([0]),s=qa([0]),i,a,l,c,u,d;for(let f=0;f<t.size-1;f++){i=Gn(t,0,f+1),a=Gn(t,f+1),u=un(An(i),e),d=un(An(a),e);const A=An(Ne(i,c0(0,i.size)));l=un(A,An(i));const m=R0(a.shape,i.size),g=Nt(c0(0,a.size),m),y=Ne(a,g);c=un(An(y),An(a));const x=Kt(l,c),v=Kt(l,c),w=Ne(u,d);s=Ne(Ne(w,x),v);const B=lc(s,r);r=Mo(B,s,r),n=Mo(B,qa([f]),n)}return n}const Oke=Ie({threshold_:_ke});function Fke(t,e,n="nearest",r="constant",s=0,i){const a=fe(t,"image","transform","float32"),l=fe(e,"transforms","transform","float32");ce(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),ce(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ce(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const c={image:a,transforms:l},u={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return Ee.runKernel(e3,c,u)}const Dke=Ie({transform_:Fke});function Lke(t,e,n){const r=fe(t,"a","bandPart");ce(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,a]=r.shape.slice(-2);let l,c;typeof e=="number"?(ce(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ce(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),l=fe(e<0?i:e,"numLower","bandPart")):(ce(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=Mo(T1(e,0),i,vm(e,i))),typeof n=="number"?(ce(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),ce(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),c=fe(n<0?a:n,"numUpper","bandPart")):(ce(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=Mo(T1(n,0),a,vm(n,a)));const u=Fe(c0(0,i,1,"int32"),[-1,1]),d=c0(0,a,1,"int32"),f=Kt(u,d),A=df($m(f,l),XA(f,ni(c))),m=La([i,a],r.dtype);return Fe(sc(Su(Fe(r,[-1,i,a])).map(g=>Mo(A,g,m))),s)}const $ke=Ie({bandPart_:Lke});function Pke(t){let e;if(Array.isArray(t)){e=!1,ce(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)ce(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Zl(t,t.shape[0],0).map(s=>ud(s,[0]));ce(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(Ee.tidy(()=>{let i=r[s];if(s>0)for(let a=0;a<s;++a){const l=Ne(An(Ne(n[a],i)),n[a]);i=Kt(i,l)}return un(i,tb(i,"euclidean"))}));return e?sc(n,0):n}const zke=Ie({gramSchmidt_:Pke});function Uke(t,e=!1){if(ce(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return fQ(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((c,u)=>c*u),r=Su(Fe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(c=>{const[u,d]=fQ(c,e);s.push(u),i.push(d)});const a=Fe(sc(s,0),t.shape),l=Fe(sc(i,0),t.shape);return[a,l]}}function fQ(t,e=!1){return Ee.tidy(()=>{ce(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=f3(n),i=ah(t);const a=sm([[1]],[1,1]);let l=ah(a);const c=n>=r?r:n;for(let u=0;u<c;++u){const d=i,f=l,A=s;[l,i,s]=Ee.tidy(()=>{const m=Gn(i,[u,u],[n-u,1]),g=tb(m),y=Gn(i,[u,u],[1,1]),x=Mo(lc(y,0),sm([[-1]]),sm([[1]])),v=Kt(y,Ne(x,g)),w=un(m,v);w.shape[0]===1?l=ah(a):l=Gi([a,Gn(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const B=ni(un(fr(x,v),g)),k=Gn(i,[u,0],[n-u,r]),j=Ne(B,l),I=jr(l);if(u===0)i=Kt(k,fr(j,fr(I,k)));else{const D=Kt(k,fr(j,fr(I,k)));i=Gi([Gn(i,[0,0],[u,r]),D],0)}const O=jr(j),F=Gn(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=Kt(F,fr(fr(F,l),O));else{const D=Kt(F,fr(fr(F,l),O));s=Gi([Gn(s,[0,0],[n,u]),D],1)}return[l,i,s]}),hr([d,f,A])}return!e&&n>r&&(s=Gn(s,[0,0],[n,r]),i=Gn(i,[0,0],[r,r])),[s,i]})}const Mke=Ie({qr_:Uke});var Nl;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Nl||(Nl={}));function Qke(t,e,n=Nl.SUM_BY_NONZERO_WEIGHTS){const r=fe(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=fe(e,"weights","computeWeightedLoss"));const i=s==null?r:Ne(r,s);if(n===Nl.NONE)return i;if(n===Nl.SUM)return An(i);if(n===Nl.MEAN){if(s==null)return Ui(i);{const a=r.size/s.size,l=un(An(i),An(s));return a>1?un(l,Dn(a)):l}}if(n===Nl.SUM_BY_NONZERO_WEIGHTS){if(s==null)return un(An(i),Dn(r.size));{const a=Ne(s,Kl(r.shape)),l=Mt(An(l0(a,Dn(0))),"float32");return un(An(i),l)}}throw Error(`Unknown reduction: ${n}`)}const JA=Ie({computeWeightedLoss_:Qke});function Hke(t,e,n,r=Nl.SUM_BY_NONZERO_WEIGHTS){const s=fe(t,"labels","absoluteDifference"),i=fe(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=fe(n,"weights","absoluteDifference")),Wo(s.shape,i.shape,"Error in absoluteDifference: ");const l=Ra(Kt(s,i));return JA(l,a,r)}const Wke=Ie({absoluteDifference_:Hke});function Vke(t,e,n,r,s=Nl.SUM_BY_NONZERO_WEIGHTS){const i=fe(t,"labels","cosineDistance"),a=fe(e,"predictions","cosineDistance");let l=null;r!=null&&(l=fe(r,"weights","cosineDistance")),Wo(i.shape,a.shape,"Error in cosineDistance: ");const c=Dn(1),u=Kt(c,An(Ne(i,a),n,!0));return JA(u,l,s)}const qke=Ie({cosineDistance_:Vke});function Gke(t,e,n,r=Nl.SUM_BY_NONZERO_WEIGHTS){let s=fe(t,"labels","hingeLoss");const i=fe(e,"predictions","hingeLoss");let a=null;n!=null&&(a=fe(n,"weights","hingeLoss")),Wo(s.shape,i.shape,"Error in hingeLoss: ");const l=Dn(1);s=Kt(Ne(Dn(2),s),l);const c=wf(Kt(l,Ne(s,i)));return JA(c,a,r)}const Kke=Ie({hingeLoss_:Gke});function Xke(t,e,n,r=1,s=Nl.SUM_BY_NONZERO_WEIGHTS){const i=fe(t,"labels","huberLoss"),a=fe(e,"predictions","huberLoss");let l=null;n!=null&&(l=fe(n,"weights","huberLoss")),Wo(i.shape,a.shape,"Error in huberLoss: ");const c=Dn(r),u=Ra(Kt(a,i)),d=vm(u,c),f=Kt(u,d),A=Nt(Ne(Dn(.5),Rs(d)),Ne(c,f));return JA(A,l,s)}const Yke=Ie({huberLoss_:Xke});function Jke(t,e,n,r=1e-7,s=Nl.SUM_BY_NONZERO_WEIGHTS){const i=fe(t,"labels","logLoss"),a=fe(e,"predictions","logLoss");let l=null;n!=null&&(l=fe(n,"weights","logLoss")),Wo(i.shape,a.shape,"Error in logLoss: ");const c=Dn(1),u=Dn(r),d=ni(Ne(i,Pc(Nt(a,u)))),f=Ne(Kt(c,i),Pc(Nt(Kt(c,a),u))),A=Kt(d,f);return JA(A,l,s)}const Zke=Ie({logLoss_:Jke});function eBe(t,e,n,r=Nl.SUM_BY_NONZERO_WEIGHTS){const s=fe(t,"labels","meanSquaredError"),i=fe(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=fe(n,"weights","meanSquaredError")),Wo(s.shape,i.shape,"Error in meanSquaredError: ");const l=E3(s,i);return JA(l,a,r)}const tBe=Ie({meanSquaredError_:eBe});function nBe(t,e){const n=fe(t,"labels","sigmoidCrossEntropyWithLogits"),r=fe(e,"logits","sigmoidCrossEntropyWithLogits");Wo(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=wf(r),i=Ne(r,n),a=$5(rc(ni(Ra(r))));return Nt(Kt(s,i),a)}function rBe(t,e,n,r=0,s=Nl.SUM_BY_NONZERO_WEIGHTS){let i=fe(t,"multiClassLabels","sigmoidCrossEntropy");const a=fe(e,"logits","sigmoidCrossEntropy");let l=null;if(n!=null&&(l=fe(n,"weights","sigmoidCrossEntropy")),Wo(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Dn(r),d=Dn(1),f=Dn(.5);i=Nt(Ne(i,Kt(d,u)),Ne(f,u))}const c=nBe(i,a);return JA(c,l,s)}const sBe=Ie({sigmoidCrossEntropy_:rBe});function iBe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return gh((s,i,a)=>{const c=P5(i,[n],!0),u=Kt(Mt(i,"float32"),c);a([s,u]);const d=ni(Ne(u,s));return{value:An(d,[n]),gradFunc:(m,g)=>{const[y,x]=g,v=wa(m.shape,[n]);return[Ne(Fe(m,v),Kt(Mt(y,"float32"),rc(x))),Ne(Fe(m,v),Kt(rc(x),Mt(y,"float32")))]}}})(t,e)}function aBe(t,e,n,r=0,s=Nl.SUM_BY_NONZERO_WEIGHTS){let i=fe(t,"onehotLabels","softmaxCrossEntropy");const a=fe(e,"logits","softmaxCrossEntropy");let l=null;if(n!=null&&(l=fe(n,"weights","softmaxCrossEntropy")),Wo(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Dn(r),d=Dn(1),f=Dn(i.shape[1]);i=Nt(Ne(i,Kt(d,u)),un(u,f))}const c=iBe(i,a);return JA(c,l,s)}const oBe=Ie({softmaxCrossEntropy_:aBe});function lBe(t,e,n,r){const s=fe(t,"indices","sparseFillEmptyRows","int32"),i=fe(e,"values","sparseFillEmptyRows"),a=fe(n,"denseShape","sparseFillEmptyRows","int32"),l=fe(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);const c={indices:s,values:i,denseShape:a,defaultValue:l},u=Ee.runKernel(QE,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const cBe=Ie({sparseFillEmptyRows_:lBe});function uBe(t,e,n){const r=fe(t,"inputIndices","sparseReshape","int32"),s=fe(e,"inputShape","sparseReshape","int32"),i=fe(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const a={inputIndices:r,inputShape:s,newShape:i},l=Ee.runKernel(HE,a);return{outputIndices:l[0],outputShape:l[1]}}const dBe=Ie({sparseReshape_:uBe});function fBe(t,e,n){const r=fe(t,"data","sparseSegmentMean"),s=fe(e,"indices","sparseSegmentMean","int32"),i=fe(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return Ee.runKernel(WE,a)}const hBe=Ie({sparseSegmentMean_:fBe});function ABe(t,e,n){const r=fe(t,"data","sparseSegmentSum"),s=fe(e,"indices","sparseSegmentSum","int32"),i=fe(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return Ee.runKernel(VE,a)}const pBe=Ie({sparseSegmentSum_:ABe});function mBe(t,e,n,r,s,i,a,l){const c=fe(t,"data","stringNGrams","string");if(c.dtype!=="string")throw new Error("Data must be of datatype string");if(c.shape.length!==1)throw new Error(`Data must be a vector, saw: ${c.shape}`);const u=fe(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const d={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:a,preserveShortSequences:l},f={data:c,dataSplits:u},A=Ee.runKernel(XE,f,d);return{nGrams:A[0],nGramsSplits:A[1]}}const gBe=Ie({stringNGrams_:mBe});function yBe(t,e,n=!0){const r=fe(t,"input","stringSplit","string"),s=fe(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},a={input:r,delimiter:s},l=Ee.runKernel(YE,a,i);return{indices:l[0],values:l[1],shape:l[2]}}const xBe=Ie({stringSplit_:yBe});function bBe(t,e){const n=fe(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return Ee.runKernel(JE,s,r)}const vBe=Ie({stringToHashBucketFast_:bBe});function wBe(t,e,n,r=!0){const s=fe(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return Ee.runKernel(k5,{x:s},i)}const SBe=Ie({staticRegexReplace_:wBe});const Tte={fft:G5,ifft:F1,rfft:K5,irfft:j3},_te={hammingWindow:YCe,hannWindow:jte,frame:Ete,stft:tke},Au={flipLeftRight:ike,grayscaleToRGB:oke,resizeNearestNeighbor:Nte,resizeBilinear:Ite,rgbToGrayscale:cke,rotateWithOffset:dke,cropAndResize:rke,nonMaxSuppression:hke,nonMaxSuppressionAsync:vke,nonMaxSuppressionWithScore:Ske,nonMaxSuppressionWithScoreAsync:kke,nonMaxSuppressionPadded:jke,nonMaxSuppressionPaddedAsync:Ike,threshold:Oke,transform:Dke},UL={bandPart:$ke,gramSchmidt:zke,qr:Mke},Rte={absoluteDifference:Wke,computeWeightedLoss:JA,cosineDistance:qke,hingeLoss:Kke,huberLoss:Yke,logLoss:Zke,meanSquaredError:tBe,sigmoidCrossEntropy:sBe,softmaxCrossEntropy:oBe},Ote={sparseFillEmptyRows:cBe,sparseReshape:dBe,sparseSegmentMean:hBe,sparseSegmentSum:pBe},Fte={stringNGrams:gBe,stringSplit:xBe,stringToHashBucketFast:vBe,staticRegexReplace:SBe};const CBe=new Map,TO=new Map;class D0{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class uu{constructor(){this.classNameMap={}}static getMap(){return uu.instance==null&&(uu.instance=new uu),uu.instance}static register(e){uu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ot(t,e,n){ce(t.className!=null,()=>"Class being registered does not have the static className property defined."),ce(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),ce(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return uu.register(t),CBe.set(s,t),TO.set(t,s),t}function kBe(t){return TO.has(t)?TO.get(t):t.className}const BBe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:D0,SerializationMap:uu,getRegisteredName:kBe,registerClass:Ot},Symbol.toStringTag,{value:"Module"}));class ZA extends D0{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const a=r.map(l=>({name:l.name,tensor:i[l.name]}));this.applyGradients(a)}else this.applyGradients(i);return hr(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Uee(e,n)}dispose(){this.iterations_!=null&&hr(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Dn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(ZA,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});class ML extends ZA{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ee.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:He(()=>$r(i).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:He(()=>$r(i).variable(a))});const l=Array.isArray(e)?e[s].tensor:e[r];if(l==null)return;const c=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;He(()=>{const d=Nt(Ne(c,this.rho),Ne(Rs(l),1-this.rho)),f=Ne(un(yo(Nt(u,this.epsilon)),yo(Nt(c,this.epsilon))),l),A=Nt(Ne(u,this.rho),Ne(Rs(f),1-this.rho));c.assign(d),u.assign(A);const m=Nt(Ne(f,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(hr(this.accumulatedGrads.map(e=>e.variable)),hr(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}class QL extends ZA{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ee.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:He(()=>R0(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable;He(()=>{const c=Nt(l,Rs(a));l.assign(c);const u=Nt(Ne(un(a,yo(Nt(c,Ee.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&hr(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}class HL extends ZA{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],He(()=>{this.accBeta1=Dn(n).variable(),this.accBeta2=Dn(r).variable()}),s==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);He(()=>{const r=Kt(1,this.accBeta1),s=Kt(1,this.accBeta2);n.forEach((i,a)=>{const l=Ee.registeredVariables[i],c=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:He(()=>$r(l).variable(c))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:He(()=>$r(l).variable(c))});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const d=this.accumulatedFirstMoment[a].variable,f=this.accumulatedSecondMoment[a].variable,A=Nt(Ne(d,this.beta1),Ne(u,1-this.beta1)),m=Nt(Ne(f,this.beta2),Ne(Rs(u),1-this.beta2)),g=un(A,r),y=un(m,s);d.assign(A),f.assign(m);const x=Nt(Ne(un(g,Nt(yo(y),this.epsilon)),-this.learningRate),l);l.assign(x)}),this.accBeta1.assign(Ne(this.accBeta1,this.beta1)),this.accBeta2.assign(Ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&hr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&hr(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),He(()=>{this.accBeta1.assign(mh(this.beta1,this.iterations_+1)),this.accBeta2.assign(mh(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}class WL extends ZA{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],He(()=>{this.iteration=Dn(0).variable(),this.accBeta1=Dn(n).variable()}),s==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);He(()=>{const r=Kt(1,this.accBeta1),s=un(-this.learningRate,Nt(Ne(this.iteration,this.decay),1));n.forEach((i,a)=>{const l=Ee.registeredVariables[i],c=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:$r(l).variable(c)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:$r(l).variable(c)});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const d=this.accumulatedFirstMoment[a].variable,f=this.accumulatedWeightedInfNorm[a].variable,A=Nt(Ne(d,this.beta1),Ne(u,1-this.beta1)),m=Ne(f,this.beta2),g=Ra(u),y=kh(m,g);d.assign(A),f.assign(y);const x=Nt(Ne(un(s,r),un(A,Nt(y,this.epsilon))),l);l.assign(x)}),this.iteration.assign(Nt(this.iteration,1)),this.accBeta1.assign(Ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&hr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&hr(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}class U3 extends ZA{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=Ee.registeredVariables[r];He(()=>{const l=Nt(Ne(this.c,i),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Va(Dn(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}class VL extends U3{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Dn(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ee.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:He(()=>$r(i).variable(!1))});const a=this.accumulations[s].variable,l=Array.isArray(e)?e[s].tensor:e[r];l!=null&&He(()=>{let c;const u=Nt(Ne(this.m,a),l);this.useNesterov?c=Nt(Ne(this.c,Nt(l,Ne(u,this.m))),i):c=Nt(Ne(this.c,u),i),a.assign(u),i.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&hr(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}class qL extends ZA{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=Ee.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ee.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:He(()=>$r(i).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:He(()=>$r(i).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:He(()=>$r(i).variable(a))});const l=Array.isArray(e)?e[s].tensor:e[r];if(l==null)return;const c=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;He(()=>{const d=Nt(Ne(c,this.decay),Ne(Rs(l),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[s].variable,A=Nt(Ne(f,this.decay),Ne(l,1-this.decay)),m=un(Ne(l,this.learningRate),yo(Kt(d,Nt(Rs(A),this.epsilon)))),g=Nt(Ne(u,this.momentum),m);c.assign(d),f.assign(A),u.assign(g);const y=Kt(i,g);i.assign(y)}else{const f=Nt(Ne(c,this.decay),Ne(Rs(l),1-this.decay)),A=Nt(Ne(u,this.momentum),un(Ne(l,this.learningRate),yo(Nt(f,this.epsilon))));c.assign(f),u.assign(A);const m=Kt(i,A);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&hr(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&hr(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&hr(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}const jBe=[ML,QL,HL,WL,VL,qL,U3];function EBe(){for(const t of jBe)Ot(t)}const IBe="model",NBe=".json",TBe=".weights.bin";function hQ(t){return new Promise(e=>setTimeout(e)).then(t)}class u0{constructor(e){if(!Ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(u0.URL_SCHEME)&&(e=e.slice(u0.URL_SCHEME.length)),(e==null||e.length===0)&&(e=IBe),this.modelJsonFileName=e+NBe,this.weightDataFileName=e+TBe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=vf.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=wee(e,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,await hQ(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=r,await hQ(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:N5(e)}}}}u0.URL_SCHEME="downloads://";class _Be{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const c=LD(i,u=>this.loadWeights(u));e(c)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const a of e)n.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(i).then(a=>[n,a])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=a=>{const l=a.target.result;r(l)},i.onerror=a=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>nQ(i.name)),s={};for(const i of e)i.paths.forEach(a=>{const l=nQ(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),r.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const RBe=t=>Ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(u0.URL_SCHEME)?OBe(t.slice(u0.URL_SCHEME.length)):null;Pi.registerSaveRouter(RBe);function OBe(t="model"){return new u0(t)}function FBe(t){return new _Be(t)}function AQ(t,e,n,r){a(t),n=n??0,r=r??1,l(n,r);let s=0;const i=c=>(c.then(u=>{const d=n+ ++s/t.length*(r-n);return e(d),u}),c);function a(c){ce(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function l(c,u){ce(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),ce(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),ce(u>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${u}`)}return Promise.all(t.map(i))}async function Dte(t,e){e==null&&(e={});const n=e.fetchFunc==null?Ye().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),l=(e.onProgress==null?await Promise.all(r):await AQ(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(l):await AQ(l,e.onProgress,.5,1)}function DBe(t,e){var n;const r=e.fetchFunc==null?Ye().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async a=>{for(var l;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:u}=await i.read();if(c){s++,i=void 0,(l=e.onProgress)===null||l===void 0||l.call(e,s/t.length);continue}a.enqueue(u);return}a.close()}})}async function LBe(t,e="",n,r){return Lte(a=>Dte(a,{requestInit:r}))(t,e,n)}function Lte(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},a=r!=null?r.map(()=>!1):[],l=[];if(e.forEach((m,g)=>{let y=0;m.weights.forEach(x=>{const v="quantization"in x?x.quantization.dtype:x.dtype,w=n0[v]*it(x.shape),B=()=>{s[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:x,groupOffset:y,sizeBytes:w})};r!=null?r.forEach((k,j)=>{k===x.name&&(B(),a[j]=!0)}):B(),l.push(x.name),y+=w})}),!a.every(m=>m)){const m=r.filter((g,y)=>!a[y]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}const c=s.reduce((m,g,y)=>(g&&m.push(y),m),[]),u=[];c.forEach(m=>{e[m].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const d=await t(u),f={};let A=0;return c.forEach(m=>{const g=e[m].paths.length,y=new vf(d.slice(A,A+g));i[m].forEach(v=>{const w=y.slice(v.groupOffset,v.groupOffset+v.sizeBytes),B=yee(w,[v.manifestEntry]);for(const k in B)f[k]=B[k]}),A+=g}),f}}const $Be="application/octet-stream",PBe="application/json";class GL{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(ce(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ye().platform.fetch,ce(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&ce(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=wee(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:PBe}),"model.json"),e.weightData!=null){const a=vf.join(e.weightData);n.body.append("model.weights.bin",new Blob([a],{type:$Be}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:N5(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return LD(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=JB(e.weightsManifest),s=()=>DBe(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=zBe(n),i=this.weightPathPrefix||r,a=[],l=[];for(const c of e)for(const u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(i+u+s);return this.weightUrlConverter&&a.push(...await Promise.all(l)),a}async loadWeights(e){const n=await this.getWeightUrls(e),r=JB(e),s=await Dte(n,this.loadOptions);return[r,s]}}GL.URL_SCHEME_REGEX=/^https?:\/\//;function zBe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function _O(t){return t.match(GL.URL_SCHEME_REGEX)!=null}const $te=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>_O(r)):n=_O(t),n)return KL(t,e)}return null};Pi.registerSaveRouter($te);Pi.registerLoadRouter($te);function KL(t,e){return new GL(t,e)}function UBe(t,e){return KL(t,e)}class t_{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Pte{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class MBe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function QBe(t,e,n,r){const s=arguments;return new MBe(e4(...s))}function e4(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new t_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t_({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function HBe(t){return new Pte(t)}function WBe(t){return new Pte(t)}const XL=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:vf,browserFiles:FBe,browserHTTPRequest:UBe,concatenateArrayBuffers:vee,copyModel:w2e,decodeWeights:yee,decodeWeightsStream:bee,encodeWeights:SO,fromMemory:QBe,fromMemorySync:e4,getLoadHandlers:l2e,getModelArtifactsForJSON:LD,getModelArtifactsForJSONSync:DD,getModelArtifactsInfoForJSON:N5,getSaveHandlers:See,getWeightSpecs:JB,http:KL,isHTTPScheme:_O,listModels:b2e,loadWeights:LBe,moveModel:S2e,registerLoadRouter:o2e,registerSaveRouter:a2e,removeModel:v2e,weightsLoaderFactory:Lte,withSaveHandler:HBe,withSaveHandlerSync:WBe},Symbol.toStringTag,{value:"Module"}));function VBe(t,e,n){const r=fe(t,"labels","confusionMatrix"),s=fe(e,"predictions","confusionMatrix");ce(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),ce(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),ce(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),ce(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),ce(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=_1(Mt(r,"int32"),n),a=_1(Mt(s,"int32"),n),l=jr(i),c=fr(l,a);return Mt(c,"int32")}const qBe=Ie({confusionMatrix_:VBe});const GBe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:qBe},Symbol.toStringTag,{value:"Module"}));let cg,pQ=!1;function zte(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(O2(XB,Ee.backendName)!=null){const g={pixels:t},y={numChannels:e};return Ee.runKernel(XB,g,y)}const[u,d]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f;if(a)f=t.getContext("2d").getImageData(0,0,u,d).data;else if(r||n)f=t.data;else if(i||s||l){if(cg==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")cg=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else cg=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});cg.canvas.width=u,cg.canvas.height=d,cg.drawImage(t,0,0,u,d),f=cg.getImageData(0,0,u,d).data}let A;if(e===4)A=new Int32Array(f);else{const g=u*d;A=new Int32Array(g*e);for(let y=0;y<g;y++)for(let x=0;x<e;++x)A[y*e+x]=f[y*4+x]}return TL(A,[d,u,e],"int32")}function KBe(t){return t!=null&&t.data instanceof Uint8Array}function XBe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function YBe(t){return t!=null&&t.width!==0&&t.height!==0}function JBe(t){return XBe()&&!(t instanceof ImageBitmap)&&YBe(t)&&!KBe(t)}async function ZBe(t,e=3){let n=null;if(Ye().getBool("WRAP_TO_IMAGEBITMAP")&&JBe(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return zte(n,e)}function Ute(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function e4e(t){const e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function t4e(t,e){let n=fe(t,"img","toPixels");if(!(t instanceof Dr)){const u=n;n=Mt(u,"int32"),u.dispose()}Ute(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],a=await n.data(),l=n.dtype==="float32"?255:1,c=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const d=[0,0,0,255];for(let A=0;A<i;A++){const m=a[u*i+A];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(d[0]=m*l,d[1]=m*l,d[2]=m*l):d[A]=m*l}const f=u*4;c[f+0]=Math.round(d[0]),c[f+1]=Math.round(d[1]),c[f+2]=Math.round(d[2]),c[f+3]=Math.round(d[3])}if(e!=null){pQ||O2(pE,Ee.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),pQ=!0),e.width=s,e.height=r;const u=e.getContext("2d"),d=new ImageData(c,s,r);u.putImageData(d,0,0)}return n!==t&&n.dispose(),c}function n4e(t,e,n){let r=fe(t,"img","draw");if(!(t instanceof Dr)){const a=r;r=Mt(a,"int32"),a.dispose()}Ute(r),e4e(n?.imageOptions);const s={image:r},i={canvas:e,options:n};Ee.runKernel(pE,s,i)}const Mte=Ie({fromPixels_:zte}),r4e=Object.freeze(Object.defineProperty({__proto__:null,draw:n4e,fromPixels:Mte,fromPixelsAsync:ZBe,toPixels:t4e},Symbol.toStringTag,{value:"Module"}));function M3(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(it(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let a=1;for(let f=0;f<s.length-1;++f)a*=s[f];const l=t.shape,c=s.slice();c.pop();let u=1;for(let f=i;f<n;++f)u*=l[f],c.push(l[f]);const d=[...On(t.shape).map(f=>f/u),1].slice(0,i);return[c,a,u,d]}const s4e=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:M3},Symbol.toStringTag,{value:"Module"}));const RO=-2,i4e=-1;function YL(t,e,n){const r=t.shape.length;ce(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),ce(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)ce(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function a4e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function JL(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function Qte(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Hte(t,e,n){return n<=t?n:n-(e-1)}function Wte(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function o4e(t,e,n,r,s,i,a,l,c){const u=t.length;let d=new Array(u),f=new Array(u),A=new Array(u);if(e.length&&n>0){const m=e[0],g=n+1;d=Vte(a,m,g,r,t),f=qte(l,m,g,s,t),A=Qte(i,m,g,t)}else for(let m=0;m<u;m++)d[m]=Kte(a,r,i,t,m,c),f[m]=Xte(l,s,i,t,m,c),A[m]=Gte(i,m,c);return{begin:d,end:f,strides:A}}function Vte(t,e,n,r,s){const i=[...s],a=Wte(n,e);for(let l=0;l<i.length;l++)if(a.indexOf(l)>-1)i[l]=0;else{const c=Hte(e,n,l);let u=r[c];t&1<<c&&(u=0),i[l]=u}return i}function qte(t,e,n,r,s){const i=[...s],a=Wte(n,e);for(let l=0;l<i.length;l++)if(a.indexOf(l)>-1)i[l]=Number.MAX_SAFE_INTEGER;else{const c=Hte(e,n,l);let u=r[c];t&1<<c&&(u=Number.MAX_SAFE_INTEGER),i[l]=u}for(let l=0;l<i.length;l++){const c=s[l];i[l]<0&&(i[l]+=c),i[l]=pm(0,i[l],s[l])}return i}function Gte(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Kte(t,e,n,r,s,i){let a=e[s];const l=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(l>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const c=r[s];return a<0&&(a+=c),a=pm(0,a,c-1),a}function Xte(t,e,n,r,s,i){let a=e[s];const l=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(l>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const c=r[s];return a<0&&(a+=c),l>0?a=pm(0,a,c):a=pm(-1,a,c-1),a}function ZL(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function e$(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Q3(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(a=>{ce(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((a,l)=>a>=0?a:(ce(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-r[l])),[r,i]}function t$(t,e,n,r,s,i,a,l,c){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:c};for(let B=0;B<f.dims;B++)d&&(1<<B&l)!==0&&f.numAddAxisAfterEllipsis++,1<<B&a&&(d=!0);d||(f.ellipsisMask|=1<<f.dims,f.dims++);const A={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};l4e(f,A);let m=!0,g=!0,y=!0;const x=[],v=[];for(let B=0;B<t.length;++B){if(A.strides[B]===0)throw Error(`strides[${B}] must be non-zero`);const k=!!(A.shrinkAxisMask&1<<B),j=t[B];if(j===-1){x.push(k?1:-1);continue}const I=[A.beginMask&1<<B,A.endMask&1<<B],O=[A.strides[B]>0?0:-1,A.strides[B]>0?j:j-1];if(k&&A.strides[B]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&A.strides[B]===1;const F=!!(A.beginMask&1<<B&&A.endMask&1<<B);if(A.beginValid&&A.endValid){if(k){const P=A.begin[B]<0?j+A.begin[B]:A.begin[B];if(A.begin[B]=P,A.end[B]=A.begin[B]+1,P<0||P>=j)throw Error(`slice index ${A.begin[B]} of dimension ${B} out of bounds.`)}else A.begin[B]=mQ(A.begin[B],0,A.strides[B],j,I,O),A.end[B]=mQ(A.end[B],1,A.strides[B],j,I,O);const N=A.strides[B]===1&&A.begin[B]===0&&A.end[B]===j;m=m&&N,g=g&&(B===0&&A.strides[B]===1||N)}else m=m&&A.strides[B]===1&&F,g=g&&(B===0&&A.strides[B]===1||F);let D,T=!1;if(A.beginValid&&A.endValid?(D=A.end[B]-A.begin[B],T=!0):k?(D=1,T=!0):F&&j>=0&&(A.strides[B]<0?D=-j:D=j,T=!0),T){let N;D===0||D<0!=A.strides[B]<0?N=0:N=Math.trunc(D/A.strides[B])+(D%A.strides[B]!==0?1:0),x.push(N)}else x.push(-1)}for(let B=0;B<A.finalShapeGatherIndices.length;++B){const k=A.finalShapeGatherIndices[B];k>=0?v.push(x[k]):k===RO&&v.push(1)}return{finalShapeSparse:v.filter((B,k)=>A.finalShapeGatherIndices[k]!==RO),finalShape:v,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:A.begin,end:A.end,strides:A.strides}}function l4e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(RO),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(i4e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function mQ(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const a=t<0?r+t:t;return a<i[0]?i[0]:a>i[1]?i[1]:a}}const Yte=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:YL,computeFlatOffset:e$,computeOutShape:JL,getNormalizedAxes:o4e,isSliceContinous:ZL,maskToAxes:a4e,parseSliceParams:Q3,sliceInfo:t$,startForAxis:Kte,startIndicesWithElidedDims:Vte,stopForAxis:Xte,stopIndicesWithElidedDims:qte,stridesForAxis:Gte,stridesWithElidedDims:Qte},Symbol.toStringTag,{value:"Module"}));const c4e="4.22.0";class Jte{static sgd(e){return new U3(e)}static momentum(e,n,r=!1){return new VL(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new qL(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new HL(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new ML(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new WL(e,n,r,s,i)}static adagrad(e,n=.1){return new QL(e,n)}}const mg=Jte;const u4e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function n$(){return new Promise(t=>u4e(()=>t()))}function r$(t,e){const n=t[0].length;t.forEach((s,i)=>{ce(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),ce(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let a=0;a<n;a++)ce(a===e||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function oh(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var Jd;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Jd||(Jd={}));function Zte(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],a=r[r.length-n.length+s],l=r[a];if(i>=0)if(l>=0){if(l!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${l}`)}else r[a]=i}return r}function ene(t){const e={FIRST_DIM_SIZE:Jd.FIRST_DIM_SIZE,VALUE_ROWIDS:Jd.VALUE_ROWIDS,ROW_LENGTHS:Jd.ROW_LENGTHS,ROW_SPLITS:Jd.ROW_SPLITS,ROW_LIMITS:Jd.ROW_LIMITS,ROW_STARTS:Jd.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function tne(t){return t.length===0?0:t[0]===Jd.FIRST_DIM_SIZE?t.length-1:t.length}function nne(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],a=e[s+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${a}`)}}const s$=30;function H3(t){return t<=s$?t:qB(t,Math.floor(Math.sqrt(t)))}function i$(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}function X5(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let a=0;a<i;++a)s=s.concat([t[a+1]/e[a],e[a]]);s=s.concat(t.slice(i+1))}return s}function Y5(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?i.push(a):s.push(a);r.push(...s),r.push(0),r.push(...i)}return r}function J5(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function a$(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function o$(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}const W3=1.7580993408473768,V3=1.0507009873554805;const l$=.3275911,c$=.254829592,u$=-.284496736,d$=1.421413741,f$=-1.453152027,h$=1.061405429;function OA(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function rne(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function sne(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function ine(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function A$(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function ane(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function one(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function lne(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}const n_="->",d4e=/->/g,gQ=",",yQ="...";function p$(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(d4e,"").length)/n_.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${n_}").`);const[r,s]=t.split(n_);ce(r.indexOf(yQ)===-1,()=>`The ellipsis notation ("${yQ}") is not supported yet.`);const i=r.split(gQ),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const l=[];for(let A=0;A<s.length;++A){const m=s[A];if(!i.some(g=>g.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);l.indexOf(m)===-1&&l.push(m)}for(let A=0;A<r.length;++A){const m=r[A];l.indexOf(m)===-1&&m!==gQ&&l.push(m)}const c=new Array(i.length);for(let A=0;A<a;++A){if(new Set(i[A].split("")).size!==i[A].length)throw new Error(`Found duplicate axes in input component ${i[A]}. Support for duplicate axes in input is not implemented yet.`);c[A]=[];for(let m=0;m<i[A].length;++m)c[A].push(l.indexOf(i[A][m]))}const u=l.length,d=s.length,f=[];for(let A=d;A<u;++A)f.push(A);return{allDims:l,summedDims:f,idDims:c}}function m$(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function g$(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let a=0;a<e[s].length;++a)r[e[s][a]]===void 0?r[e[s][a]]=i[a]:ce(r[e[s][a]]===i[a],()=>`Expected dimension ${r[e[s][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function y$(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let a=0;a<s;++a)r.push([]);const i=[];for(let a=0;a<n.length;++a){const l=n[a],c=f4e(e,l);for(const u of c)i.indexOf(u)===-1&&(r[a].push(u),i.push(u))}return{path:n,steps:r}}function x$(t){return t.every((e,n)=>e===n)}function f4e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function b$(t,e,n=0){let r=[];if(typeof e=="number")ce(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((a,l)=>(l===-1&&(a+=1),a),0);ce(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((l,c)=>c>0?l+c:l);e[i]=t.shape[n]-a}ce(t.shape[n]===e.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function cne(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function une(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function dne(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function fne(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function hne(t,e){return`size ${t} must be non-negative, not ${e}`}function Ane(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function pne(t,e){const n=it(t),r=it(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function mne(t,e){const n=it(t),r=it(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function OO(){return"segment ids must be >= 0"}function gne(){return"segment ids are not increasing"}function yne(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function xne(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}function bne(t,e){let n=!1,r;for(t<=s$?(r=t,n=!0):r=qB(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=qB(t,r+1);return r}function vne(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function v$(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const a=t.shape[n],l=[];let c=1,u=1,d=1;for(let f=0;f<r;++f)l.push(t.shape[f]),c*=t.shape[f];for(let f=r;f<n;f++)l.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<s;f++)l.push(e.shape[f]);for(let f=n+1;f<i;f++)l.push(t.shape[f]),d*=t.shape[f];return{batchSize:c,sliceSize:d,outerSize:u,dimSize:a,outputShape:l}}const h4e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:v$,computeOutShape:vne,segOpComputeOptimalWindowSize:bne},Symbol.toStringTag,{value:"Module"}));function FA(t){try{return t.map(e=>TA(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function wne(t){return t.map(e=>ih(e))}const Sne=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:c$,ERF_A2:u$,ERF_A3:d$,ERF_A4:f$,ERF_A5:h$,ERF_P:l$,PARALLELIZE_THRESHOLD:s$,get RowPartitionType(){return Jd},SELU_SCALE:V3,SELU_SCALEALPHA:W3,applyActivation:D3,assertAndGetBroadcastShape:rr,assertAxesAreInnerMostDims:qo,assertParamsConsistent:r$,assignToTypedArray:ane,axesAreInnerMostDims:uL,calculateShapes:zm,checkEinsumDimSizes:g$,checkPadOnDimRoundingMode:Fl,combineLocations:$ee,combineRaggedTensorToTensorShapes:Zte,complexWithEvenIndex:sne,complexWithOddIndex:ine,computeConv2DInfo:xo,computeConv3DInfo:Dm,computeDefaultPad:qD,computeDilation2DInfo:T5,computeOptimalWindowSize:H3,computeOutAndReduceShapes:bo,computeOutShape:oh,computePool2DInfo:md,computePool3DInfo:GA,convertConv2DDataFormat:KA,decodeEinsumEquation:p$,eitherStridesOrDilationsAreOne:Vo,expandShapeToKeepDim:wa,exponent:lne,exponents:one,fromStringArrayToUint8:wne,fromUint8ToStringArray:FA,getAxesPermutation:Yi,getBroadcastDims:o0,getComplexWithIndex:A$,getEinsumComputePath:y$,getEinsumPermutation:m$,getFusedBiasGradient:F3,getFusedDyActivation:O3,getImageCenter:i$,getInnerMostAxes:Sa,getPermuted:Y5,getRaggedRank:tne,getReductionAxes:Pa,getReshaped:X5,getReshapedPermuted:J5,getRowPartitionTypesHelper:ene,getSliceBeginCoords:a$,getSliceSize:o$,getSparseFillEmptyRowsIndicesDenseShapeMismatch:cne,getSparseFillEmptyRowsNegativeIndexErrorMessage:une,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:dne,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Ane,getSparseReshapeInputOutputMismatchErrorMessage:mne,getSparseReshapeInputOutputMultipleErrorMessage:pne,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:fne,getSparseReshapeNegativeOutputDimErrorMessage:hne,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:xne,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:OO,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:gne,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:yne,getUndoAxesPermutation:Lm,isIdentityPermutation:x$,log:ave,mergeRealAndImagArrays:OA,prepareAndValidate:M3,prepareSplitSize:b$,segment_util:h4e,shouldFuse:L3,slice_util:Yte,splitRealAndImagArrays:rne,stridesOrDilationsArePositive:a0,tupleValuesAreOne:xm,upcastType:ec,validateDefaultValueShape:nne,validateInput:I3,validateUpdateShape:_L,warn:cu},Symbol.toStringTag,{value:"Module"}));const A4e=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:$3,nonMaxSuppressionV4Impl:P3,nonMaxSuppressionV5Impl:z3,whereImpl:_3},Symbol.toStringTag,{value:"Module"}));EBe();const p4e=Object.freeze(Object.defineProperty({__proto__:null,Abs:Bw,Acos:rx,Acosh:sx,AdadeltaOptimizer:ML,AdagradOptimizer:QL,AdamOptimizer:HL,AdamaxOptimizer:WL,Add:_0,AddN:jw,All:Jj,Any:Zj,ArgMax:Ew,ArgMin:Iw,Asin:ix,Asinh:ax,Atan:ox,Atan2:cx,Atanh:lx,AvgPool:Nw,AvgPool3D:Tw,AvgPool3DGrad:tE,AvgPoolGrad:eE,BatchMatMul:_w,BatchToSpaceND:Rw,Bincount:nE,BitwiseAnd:Ow,BroadcastArgs:rE,BroadcastTo:tee,Cast:ux,Ceil:dx,ClipByValue:fx,Complex:sE,ComplexAbs:Fw,Concat:Dw,Conv2D:Lw,Conv2DBackpropFilter:iE,Conv2DBackpropInput:$w,Conv3D:Pw,Conv3DBackpropFilterV2:aE,Conv3DBackpropInputV2:oE,Cos:hx,Cosh:Ax,CropAndResize:cE,Cumprod:lE,Cumsum:zw,DataStorage:bD,DenseBincount:uE,DepthToSpace:dE,DepthwiseConv2dNative:Uw,DepthwiseConv2dNativeBackpropFilter:fE,DepthwiseConv2dNativeBackpropInput:hE,Diag:AE,Dilation2D:Mw,Dilation2DBackpropFilter:KB,Dilation2DBackpropInput:GB,Draw:pE,get ENV(){return kD},Einsum:mE,Elu:mx,EluGrad:gE,Environment:ZZ,Equal:Qw,Erf:gx,Exp:yx,ExpandDims:Hw,Expm1:xx,FFT:yE,Fill:xE,FlipLeftRight:bE,Floor:bx,FloorDiv:vx,FromPixels:XB,FusedBatchNorm:Ww,FusedConv2D:T2,FusedDepthwiseConv2D:_2,GatherNd:vE,GatherV2:Vw,Greater:qw,GreaterEqual:wx,IFFT:wE,Identity:Sx,Imag:SE,IsFinite:Cx,IsInf:kx,IsNan:Bx,KernelBackend:Kj,LRN:e5,LRNGrad:kE,LeakyRelu:Gw,Less:Kw,LessEqual:Xw,LinSpace:CE,Log:jx,Log1p:Ex,LogSoftmax:nee,LogicalAnd:Yw,LogicalNot:Jw,LogicalOr:Zw,LogicalXor:tve,LowerBound:nve,MatrixBandPart:rve,Max:t5,MaxPool:n5,MaxPool3D:r5,MaxPool3DGrad:jE,MaxPoolGrad:BE,MaxPoolWithArgmax:EE,Maximum:Ix,Mean:s5,Min:i5,Minimum:Nx,MirrorPad:a5,Mod:Tx,MomentumOptimizer:VL,Multinomial:IE,Multiply:_x,Neg:o5,NonMaxSuppressionV3:NE,NonMaxSuppressionV4:TE,NonMaxSuppressionV5:_E,NotEqual:l5,OP_SCOPE_SUFFIX:TD,OneHot:u5,OnesLike:c5,Optimizer:ZA,OptimizerConstructors:Jte,Pack:d5,PadV2:f5,Pool:sve,Pow:Rx,Prelu:h5,Prod:A5,RMSPropOptimizer:qL,RaggedGather:RE,RaggedRange:OE,RaggedTensorToTensor:FE,Range:DE,get Rank(){return mO},Real:LE,RealDiv:px,Reciprocal:Ox,get Reduction(){return Nl},Relu:Fx,Relu6:Dx,Reshape:p5,ResizeBilinear:g5,ResizeBilinearGrad:PE,ResizeNearestNeighbor:m5,ResizeNearestNeighborGrad:$E,Reverse:y5,RotateWithOffset:n3,Round:Lx,Rsqrt:$x,SGDOptimizer:U3,ScatterNd:zE,SearchSorted:ME,Select:x5,Selu:Px,Sigmoid:Qx,Sign:Mx,Sin:zx,Sinh:Ux,Slice:b5,Softmax:C5,Softplus:Hx,SpaceToBatchND:w5,SparseFillEmptyRows:QE,SparseReshape:HE,SparseSegmentMean:WE,SparseSegmentSum:VE,SparseToDense:qE,SplitV:S5,Sqrt:Wx,Square:GE,SquaredDifference:Vx,StaticRegexReplace:k5,Step:Yx,StridedSlice:KE,StringNGrams:XE,StringSplit:YE,StringToHashBucketFast:JE,Sub:qx,Sum:v5,Tan:Gx,Tanh:Kx,Tensor:Dr,TensorBuffer:$a,TensorScatterUpdate:UE,Tile:Xx,TopK:ZE,Transform:e3,Transpose:zg,Unique:t3,Unpack:B5,UnsortedSegmentSum:j5,UpperBound:ive,Variable:F2,ZerosLike:E5,_FusedMatMul:N2,abs:Ra,acos:PD,acosh:zD,add:Nt,addN:Tee,all:a3,any:L2,argMax:i0,argMin:UD,asin:MD,asinh:QD,atan:HD,atan2:WD,atanh:VD,avgPool:_5,avgPool3d:GD,backend:OD,backend_util:Sne,basicLSTMCell:_ee,batchNorm:Jx,batchNorm2d:KD,batchNorm3d:XD,batchNorm4d:YD,batchToSpaceND:R5,bincount:JD,bitwiseAnd:Ree,booleanMaskAsync:gte,broadcastArgs:Oee,broadcastTo:Ug,broadcast_util:$we,browser:r4e,buffer:cr,cast:Mt,ceil:ZD,clipByValue:nc,clone:ah,complex:_A,concat:Gi,concat1d:eL,concat2d:O5,concat3d:tL,concat4d:nL,conv1d:o3,conv2d:RA,conv2dTranspose:l3,conv3d:sL,conv3dTranspose:iL,copyRegisteredKernels:cve,cos:F5,cosh:c3,cosineWindow:R3,cumprod:z2,cumsum:u3,customGrad:gh,denseBincount:ZB,deprecationWarn:Mve,depthToSpace:aL,depthwiseConv2d:Zx,device_util:Dve,diag:Dee,dilation2d:oL,disableDeprecationWarnings:Uve,dispose:hr,disposeVariables:Qve,div:un,divNoNan:lL,dot:cL,dropout:LL,einsum:wg,elu:eb,enableDebugMode:zve,enableProdMode:Pve,enclosingPowerOfTwo:$L,engine:Kd,ensureShape:Lee,env:Ye,equal:fd,erf:d3,euclideanNorm:dL,exp:rc,expandDims:Lo,expm1:fL,eye:f3,fft:G5,fill:R0,findBackend:Gve,findBackendFactory:Kve,floor:nb,floorDiv:i3,fused:Bte,gather:rb,gatherND:vte,gather_util:s4e,getBackend:gee,getGradient:AO,getKernel:O2,getKernelsForBackend:YB,grad:v5e,grads:w5e,greater:lc,greaterEqual:XA,ifft:F1,imag:D5,image:Au,inTopKAsync:wte,io:XL,irfft:j3,isFinite:hL,isInf:AL,isNaN:pL,keep:Va,kernel_impls:A4e,leakyRelu:L5,less:T1,lessEqual:$m,linalg:UL,linspace:zee,localResponseNormalization:mL,log:Pc,log1p:$5,logSigmoid:gL,logSoftmax:A3,logSumExp:P5,logicalAnd:df,logicalNot:z5,logicalOr:p3,logicalXor:yL,losses:Rte,lowerBound:Mee,matMul:fr,math:GBe,max:xu,maxPool:U5,maxPool3d:xL,maxPoolWithArgmax:Qee,maximum:kh,mean:Ui,memory:wO,meshgrid:Hee,min:N1,minimum:vm,mirrorPad:bL,mod:vL,moments:M5,movingAverage:yte,mul:Ne,multiRNNCell:Wee,multinomial:Vee,neg:ni,nextFrame:n$,norm:tb,notEqual:l0,oneHot:_1,ones:Kl,onesLike:zc,op:Ie,outerProduct:qee,pad:YA,pad1d:Gee,pad2d:Kee,pad3d:Xee,pad4d:Yee,pool:wL,pow:mh,prelu:H5,print:$D,prod:SL,profile:Hve,raggedGather:Jee,raggedRange:Zee,raggedTensorToTensor:ete,rand:tte,randomGamma:ste,randomNormal:y3,randomStandardNormal:ite,randomUniform:Pm,randomUniformInt:ate,range:c0,ready:_D,real:R1,reciprocal:jL,registerBackend:RD,registerGradient:ree,registerKernel:r3,relu:wf,relu6:x3,removeBackend:qve,reshape:Fe,reverse:wu,reverse1d:ote,reverse2d:lte,reverse3d:cte,reverse4d:ute,rfft:K5,round:b3,rsqrt:v3,scalar:Dn,scatterND:xte,scatter_util:kCe,searchSorted:m3,selu:w3,separableConv2d:S3,serialization:BBe,setBackend:Vve,setPlatform:Xve,setdiff1dAsync:dte,sigmoid:cd,sign:EL,signal:_te,sin:C3,sinh:k3,slice:Gn,slice1d:W5,slice2d:B3,slice3d:V5,slice4d:O1,slice_util:Yte,softmax:q5,softplus:O0,spaceToBatchND:Q5,sparse:Ote,sparseToDense:bte,spectral:Tte,split:Zl,sqrt:yo,square:Rs,squaredDifference:E3,squeeze:ud,stack:sc,step:F0,stridedSlice:IL,string:Fte,sub:Kt,sum:An,sumOutType:s3,tan:NL,tanh:bm,tensor:ld,tensor1d:qa,tensor2d:sm,tensor3d:TL,tensor4d:fte,tensor5d:hte,tensor6d:Ate,tensorScatterUpdate:pte,tensor_util:Tve,test_util:$Se,tidy:He,tile:hu,time:Wve,topk:RL,train:mg,transpose:jr,truncatedNormal:N3,unique:OL,unregisterGradient:lve,unregisterKernel:ove,unsortedSegmentSum:T3,unstack:Su,upcastType:ec,upperBound:mte,util:yve,valueAndGrad:S5e,valueAndGrads:C5e,variable:FL,variableGrads:Uee,version_core:c4e,where:Mo,whereAsync:DL,zeros:La,zerosLike:$r},Symbol.toStringTag,{value:"Module"}));const Cne={kernelName:Bw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,F0(Mt(n,"float32"),-1))}}};const m4e={kernelName:rx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Rs(Mt(n,"float32")),s=yo(Kt(Dn(1),r));return ni(un(t,s))}}}};const g4e={kernelName:sx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yo(Kt(Rs(Mt(n,"float32")),1));return un(t,r)}}}};const y4e={kernelName:_0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{let l=t;const c=Pa(n.shape,s);return c.length>0&&(l=An(l,c)),Fe(l,n.shape)},b:()=>{let l=t;const c=Pa(r.shape,s);return c.length>0&&(l=An(l,c)),Fe(l,r.shape)}}}};const x4e={kernelName:jw,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};const b4e={kernelName:Ew,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>$r(n)}}};const v4e={kernelName:Iw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>$r(n)}}};const w4e={kernelName:ix,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,yo(Kt(Dn(1),Rs(Mt(n,"float32")))))}}};const S4e={kernelName:ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yo(Nt(Dn(1),Rs(Mt(n,"float32"))));return un(t,r)}}}};const C4e={kernelName:cx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{const l=Nt(Rs(n),Rs(r));let c=Ne(t,un(r,l));const u=Pa(n.shape,s);return u.length>0&&(c=An(c,u)),Fe(c,n.shape)},b:()=>{const l=Nt(Rs(n),Rs(r));let c=ni(Ne(t,un(n,l)));const u=Pa(r.shape,s);return u.length>0&&(c=An(c,u)),Fe(c,r.shape)}}}};const k4e={kernelName:ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Nt(Rs(Mt(n,"float32")),1))}}};const B4e={kernelName:lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Kt(Dn(1),Rs(Mt(n,"float32"))))}}};function j4e(t,e,n,r,s,i){const a=fe(t,"dy","avgPool3dGrad"),l=fe(e,"input","avgPool3dGrad");let c=a,u=l,d=!1;l.rank===4&&(d=!0,c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),ce(c.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),ce(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Fl("avgPool3dGrad",s,i);const f={dy:c,input:u},A={filterSize:n,strides:r,pad:s,dimRoundingMode:i},m=Ee.runKernel(tE,f,A);return d?Fe(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const E4e=Ie({avgPool3dGrad_:j4e});const I4e={kernelName:Tw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>E4e(t,r,s,i,a,l)}}};function N4e(t,e,n,r,s){const i=fe(t,"dy","avgPoolGrad"),a=fe(e,"input","avgPoolGrad");ce(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let l=a,c=i,u=!1;a.rank===3&&(u=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ce(c.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${c.rank}.`),ce(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);const d={dy:c,input:l},f={filterSize:n,strides:r,pad:s},A=Ee.runKernel(eE,d,f);return u?Fe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const T4e=Ie({avgPoolGrad_:N4e});const _4e={kernelName:Nw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>T4e(t,r,s,i,a)}}};const R4e={kernelName:_w,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:a}=n;return!i&&!a?{a:()=>fr(t,s,!1,!0),b:()=>fr(r,t,!0,!1)}:!i&&a?{a:()=>fr(t,s,!1,!1),b:()=>fr(t,r,!0,!1)}:i&&!a?{a:()=>fr(s,t,!1,!0),b:()=>fr(r,t,!1,!1)}:{a:()=>fr(s,t,!0,!0),b:()=>fr(t,r,!0,!0)}}};const O4e={kernelName:Rw,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>Q5(t,r,s)}}};const F4e={kernelName:tee,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,a=Array.from(i);for(let c=s.length-1;c>=0;c--)if(s[c]===i[c])a[c]=1;else if(s[c]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const l=[];for(let c=0;c<a.length;c++)a[c]>1&&l.push(c);return{x:()=>An(t,l,!0)}}};const D4e={kernelName:ux,gradFunc:t=>({x:()=>t.clone()})};const L4e={kernelName:dx,gradFunc:t=>({x:()=>$r(t)})};const $4e={kernelName:fx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Mo(df(XA(r,s),$m(r,i)),t,$r(t))}}};const P4e={kernelName:Fw,inputsToSave:["x"],gradFunc:Cne.gradFunc};const z4e={kernelName:Dw,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(c=>c.shape),{axis:s}=n,i=Ar(s,e[0].shape)[0],a=r.map(c=>c[i]);return Zl(t,a,i).map(c=>()=>c)}};const U4e={kernelName:Lw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:a,pad:l,dataFormat:c}=n;return ce(xm(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>rL(r.shape,t,s,a,l,c),filter:()=>PL(r,t,s.shape,a,l,c)}}};const M4e={kernelName:$w,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=n;return{dy:()=>RA(t,s,i,a,l,1,c),filter:()=>PL(t,r,s.shape,i,a,l,c)}}};function Q4e(t,e,n,r,s){let i=t;t.rank===4&&(i=Fe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ce(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),ce(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),ce(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ce(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),ce(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const l={x:i,dy:a},c={strides:r,pad:s,filterShape:n};return Ee.runKernel(aE,l,c)}const H4e=Ie({conv3DBackpropFilter_:Q4e});const W4e={kernelName:Pw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;ce(xm(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,l]=e;return{x:()=>Fee(a.shape,t,l,s,i),filter:()=>H4e(a,t,l.shape,s,i)}}};const V4e={kernelName:hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(ni(C3(Mt(n,"float32"))),t)}}};const q4e={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(k3(Mt(n,"float32")),t)}}};const G4e={kernelName:zw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:a}=n;return{x:()=>{const l=Yi([s],r.rank);let c=u3(t,s,i,!a);return l!=null&&(c=jr(c,l)),c}}}};const K4e={kernelName:Uw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:a}=n,l=r??[1,1];ce(xm(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);const[c,u]=e;return ce(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${c.rank}.`),ce(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),ce(c.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),ce(Vo(s,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${l}'.`),Fl("depthwiseConv2d",i,a),{x:()=>kte(c.shape,t,u,s,i,l,a),filter:()=>Cte(c,t,u.shape,s,i,l,a)}}};const X4e={kernelName:Mw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},a={x:r,filter:s,dy:t};return{x:()=>Ee.runKernel(GB,i,n),filter:()=>Ee.runKernel(KB,a,n)}}};const Y4e={kernelName:mx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Ee.runKernel(gE,r)}}};const J4e={kernelName:gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Ne(rc(ni(Rs(n))),2/Math.sqrt(Math.PI));return{x:()=>Ne(t,r)}}};const Z4e={kernelName:yx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,n)}}};const eje={kernelName:Hw,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Fe(t,n.shape)}}};const tje={kernelName:xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,rc(n))}}};const nje={kernelName:bx,gradFunc:t=>({x:()=>$r(t)})};const rje={kernelName:vx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{const l=un(t,Mt(r,"float32")),c=Pa(n.shape,s);return c.length>0?Fe(An(l,c),n.shape):l},b:()=>{let l=Ne(t,Mt(n,"float32"));const c=Pa(r.shape,s);c.length>0&&(l=Fe(An(l,c),r.shape));const u=Rs(r);return ni(un(l,Mt(u,"float32")))}}}};const sje={kernelName:Ww,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,a,l]=e,c=l??Dn(1),u=Pa(i.shape,s.shape),d=[];if(i.rank===1){for(let k=0;k<s.shape.length-1;++k)d.push(s.shape[k]);d.push(1)}const f=Kt(s,i),A=Ne(t,c),m=v3(Nt(a,Dn(r))),g=Ne(Ne(Ne(m,m),m),Dn(-.5));return{x:()=>i.rank===1?Fe(Ne(Ne(t,hu(Fe(m,[1,1,1,i.shape[0]]),d)),c),s.shape):Fe(Ne(Ne(t,m),c),s.shape),mean:()=>{let k=Ne(Ne(m,Dn(-1)),A);return i.rank===1&&(k=An(k,u)),Fe(k,i.shape)},variance:()=>{let k=Ne(Ne(g,f),A);return i.rank===1&&(k=An(k,u)),Fe(k,i.shape)},scale:()=>{const k=Ne(f,m);let j=Ne(t,k);return i.rank===1&&(j=An(j,u)),Fe(j,i.shape)},offset:()=>{let k=t;return i.rank===1&&(k=An(k,u)),Fe(k,i.shape)}}}};const ije={kernelName:Vw,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:a}=n,l=Ar(i,r.shape)[0],c=(u,d,f)=>()=>{const A=u.shape,m=d.size,g=A.slice(0,l),y=g.length,x=A.slice(i,A.length).slice(1),v=x.length,w=xQ(0,y),B=xQ(y+1,y+1+v),k=bQ([g,[m],x]),j=Fe(f,k),I=Fe(d,[m]),O=bQ([[y],w,B]),F=jr(j,O);let D=T3(F,I,u.shape[l]);const T=Lm(O);return D=jr(D,T),D};if(a===1){const u=r.shape[0],d=r.split(u,0);return{x:()=>sc(d.map((m,g)=>c(m,s.slice(g,1),t.slice(g,1))())).reshape(r.shape),indices:()=>s}}else return{x:c(r,s,t),indices:()=>s}}};function xQ(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function bQ(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}const aje={kernelName:wx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>$r(n),b:()=>$r(r)}}};const oje={kernelName:Sx,gradFunc:t=>({x:()=>Mt(t,"float32")})};const lje={kernelName:Cx,gradFunc:t=>({x:()=>$r(t)})};const cje={kernelName:kx,gradFunc:t=>({x:()=>$r(t)})};const uje={kernelName:Bx,gradFunc:t=>({x:()=>$r(t)})};const dje={kernelName:Gw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=lc(r,0);return{x:()=>Mo(i,t,Ne(t,s))}}};const fje={kernelName:Ex,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Nt(n,1))}}};const hje={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Mt(n,"float32"))}}};const Aje={kernelName:nee,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const a=rc(r);return Kt(t,Ne(An(t,s,!0),a))}}}};function pje(t,e,n,r=5,s=1,i=1,a=.5){const l={x:t,y:e,dy:n},c={depthRadius:r,bias:s,alpha:i,beta:a};return Ee.runKernel(kE,l,c)}const mje=Ie({localResponseNormalizationBackprop_:pje});const gje={kernelName:e5,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:a,alpha:l,beta:c}=n;return{x:()=>mje(r,s,t,i,a,l,c)}}};function kne(t,e,n,r){return e.rank<n.rank&&(e=Fe(e,wa(e.shape,r))),t.rank<n.rank&&(t=Fe(t,wa(t.shape,r))),{x:()=>Ne(t,Mt(fd(n,e),t.dtype))}}const vQ={kernelName:t5,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],a=e[1],l=Ar(s,i.shape),c=kne(t,a,i,l);return{x:()=>c.x()}}};const yje={kernelName:Ix,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ne(t,Mt(XA(n,r),"float32")),b:()=>Ne(t,Mt(T1(n,r),"float32"))}}};function xje(t,e,n,r,s,i,a){const l=fe(t,"dy","maxPool3dGrad"),c=fe(e,"input","maxPool3dGrad"),u=fe(n,"output","maxPool3dGrad");let d=l,f=c,A=u,m=!1;c.rank===4&&(m=!0,d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Fe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),A=Fe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),ce(d.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${d.rank}.`),ce(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),ce(A.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${A.rank}.`),Fl("maxPool3dGrad",i,a);const g={dy:d,input:f,output:A},y={filterSize:r,strides:s,pad:i,dimRoundingMode:a},x=Ee.runKernel(jE,g,y);return m?Fe(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const bje=Ie({maxPool3dGrad_:xje});const vje={kernelName:r5,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=n;return{x:()=>bje(t,r,s,i,a,l,c)}}};function wje(t,e,n,r,s,i,a){const l=fe(t,"dy","maxPoolGrad"),c=fe(e,"input","maxPoolGrad"),u=fe(n,"output","maxPoolGrad");ce(c.rank===l.rank,()=>`Rank of input (${c.rank}) does not match rank of dy (${l.rank})`),ce(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),ce(c.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${c.rank}.`),Fl("maxPoolGrad",i,a);const d={dy:l,input:c,output:u},f={filterSize:r,strides:s,pad:i,dimRoundingMode:a};return Ee.runKernel(BE,d,f)}const Sje=Ie({maxPoolGrad_:wje});const Cje={kernelName:n5,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:l}=n;return{x:()=>Sje(t,r,s,i,a,l)}}};const kje={kernelName:s5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=Ar(s,r.shape),l=bo(r.shape,i)[1],c=it(l);return{x:()=>{const d=r.shape.slice();i.forEach(m=>{d[m]=1});const f=Fe(t,d);return un(Ne(f,Kl(r.shape,"float32")),c)}}}};const Bje={kernelName:i5,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,a]=e,l=Ar(s,i.shape),c=kne(t,a,i,l);return{x:()=>c.x()}}};const jje={kernelName:Nx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ne(t,Mt($m(n,r),"float32")),b:()=>Ne(t,Mt(lc(n,r),"float32"))}}};const Eje={kernelName:a5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>Gn(t,i,r.shape)}}};const Ije={kernelName:Tx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{const l=Pa(n.shape,s);return l.length>0?Fe(An(t,l),n.shape):t},b:()=>{const l=Ne(t,ni(nb(un(n,r)))),c=Pa(r.shape,s);return c.length>0?Fe(An(l,c),r.shape):l}}}};const Nje={kernelName:_x,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{const l=Ne(t,Mt(r,"float32")),c=Pa(n.shape,s);return c.length>0?Fe(An(l,c),n.shape):l},b:()=>{const l=Ne(t,Mt(n,"float32")),c=Pa(r.shape,s);return c.length>0?Fe(An(l,c),r.shape):l}}}};const Tje={kernelName:o5,gradFunc:t=>({x:()=>ni(t)})};const _je={kernelName:u5,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>La(n.shape,"float32")}}};const Rje={kernelName:c5,gradFunc:t=>({x:()=>$r(t)})};const Oje={kernelName:d5,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Su(t,r).map(i=>()=>i)}};const wQ={kernelName:f5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>Gn(t,i,r.shape)}}};const Fje={kernelName:Rx,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,a=r,l=rr(i.shape,a.shape);return{a:()=>{const d=Mt(a,"float32");let f=Ne(t,Ne(d,mh(i,Kt(d,Dn(1)))));const A=Pa(i.shape,l);return A.length>0&&(f=An(f,A)),Fe(f,i.shape)},b:()=>{const d=lc(i,0),f=Mo(d,Pc(i),$r(i));let A=Ne(t,Ne(s,f));const m=Pa(a.shape,l);return m.length>0&&(A=An(A,m)),Fe(A,a.shape)}}}};const Dje={kernelName:h5,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=lc(n,0);return{x:()=>Mo(s,t,Ne(t,r)),alpha:()=>{let i=Mo(s,$r(t),Ne(t,n));const a=Pa(r.shape,t.shape);return a.length>0&&(i=An(i,a)),Fe(i,r.shape)}}}};function Lje(t,e,n){const r=t.shape.slice();r[n]=1;const s=Fe(e,r),i=z2(t,n,!0,!1),a=z2(t,n,!0,!0),l=Ne(i,a);return Ne(s,l)}function $je(t,e,n){const r=t.shape.length,s=r-n.length,i=Yi(n,r);let a=t;i!=null&&(a=jr(t,i));const l=a.shape.slice(),u=l.splice(r-n.length,n.length).reduce((A,m)=>A*m,1);l.push(u);const d=a.reshape(l);let f=Lje(d,e,s);if(f=f.reshape(a.shape),i!=null){const A=Lm(i);f=jr(f,A)}return f}const Pje={kernelName:A5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((a,l)=>l):typeof s=="number"?i=[s]:i=s,{x:()=>$je(r,t,i)}}};const zje={kernelName:px,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{const l=un(t,Mt(r,"float32")),c=Pa(n.shape,s);return c.length>0?Fe(An(l,c),n.shape):l},b:()=>{let l=Ne(t,Mt(n,"float32"));const c=Pa(r.shape,s);c.length>0&&(l=Fe(An(l,c),r.shape));const u=Rs(r);return ni(un(l,Mt(u,"float32")))}}}};const Uje={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,ni(Rs(n)))}}};const Mje={kernelName:Dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Ne($m(n,6),F0(n));return{x:()=>Ne(t,Mt(r,"float32"))}}};const Qje={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,Mt(F0(n),"float32"))}}};const Hje={kernelName:p5,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,n.shape)}}};const Wje={kernelName:g5,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Ee.runKernel(PE,s,n)}}};const Vje={kernelName:m5,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Ee.runKernel($E,s,n)}}};const qje={kernelName:y5,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Ar(r,t.shape);return{x:()=>wu(t,s)}}};const Gje={kernelName:Lx,gradFunc:t=>({x:()=>$r(t)})};const Kje={kernelName:$x,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ni(un(t,Ne(mh(n,1.5),2)))}}};const Xje={kernelName:x5,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Mt($r(n),"float32"),t:()=>Ne(t,Mt(n,t.dtype)),e:()=>Ne(t,Mt(z5(n),t.dtype))}}};const Yje={kernelName:Px,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=lc(n,Dn(0)),s=Dn(W3),i=Dn(V3),a=Ne(t,i),l=Ne(Ne(t,s),rc(Mt(n,"float32")));return Mo(r,a,l)}}}};const Jje={kernelName:Qx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,Ne(n,Kt(Dn(1),n)))}}};const Zje={kernelName:Mx,gradFunc:t=>({x:()=>$r(t)})};const eEe={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(F5(Mt(n,"float32")),t)}}};const tEe={kernelName:Ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(c3(Mt(n,"float32")),t)}}};const nEe={kernelName:b5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,a=r.shape,[l,c]=Q3(r,s,i),u=[];for(let d=0;d<t.rank;d++)u.push([l[d],a[d]-l[d]-c[d]]);return{x:()=>YA(t,u)}}};const rEe={kernelName:C5,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,a=Ne(t,r);return{logits:()=>Kt(a,Ne(An(a,[s],i),r))}}};const sEe={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,cd(n))}}};const SQ={kernelName:w5,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>R5(t,r,s)}}};const CQ={kernelName:S5,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Gi(t,r)}}};const iEe={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Ne(yo(Mt(n,"float32")),2))}}};const aEe={kernelName:GE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(t,Ne(Mt(n,"float32"),2))}}};const oEe={kernelName:Vx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Dn(2);return{a:()=>Ne(t,Ne(s,Kt(n,r))),b:()=>Ne(t,Ne(s,Kt(r,n)))}}};const lEe={kernelName:Yx,gradFunc:t=>({x:()=>$r(t)})};const cEe={kernelName:qx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=rr(n.shape,r.shape);return{a:()=>{let l=t;const c=Pa(n.shape,s);return c.length>0&&(l=An(l,c)),Fe(l,n.shape)},b:()=>{let l=t;const c=Pa(r.shape,s);return c.length>0&&(l=An(l,c)),Fe(ni(l),r.shape)}}}};const uEe={kernelName:v5,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;Ar(i,r.shape).forEach(u=>{s[u]=1});const l=Fe(t,s),c=Ne(l,Kl(r.shape,"float32"));return{x:()=>c}}};const dEe={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>un(t,Rs(F5(n)))}}};const fEe={kernelName:Kx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ne(Kt(Dn(1),Rs(n)),t)}}};const hEe={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let a=$r(r);if(r.rank===1)for(let l=0;l<s[0];++l)a=Nt(a,Gn(t,[l*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let l=0;l<s[0];++l)for(let c=0;c<s[1];++c)a=Nt(a,Gn(t,[l*r.shape[0],c*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let l=0;l<s[0];++l)for(let c=0;c<s[1];++c)for(let u=0;u<s[2];++u)a=Nt(a,Gn(t,[l*r.shape[0],c*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let l=0;l<s[0];++l)for(let c=0;c<s[1];++c)for(let u=0;u<s[2];++u)for(let d=0;d<s[3];++d)a=Nt(a,Gn(t,[l*r.shape[0],c*r.shape[1],u*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};const AEe={kernelName:zg,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Lm(s);return{x:()=>jr(t,i)}}};const pEe={kernelName:B5,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>sc(t,s)}}};const mEe={kernelName:j5,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gEe(t,n)}}};function gEe(t,e){const n=kh(e,$r(e)),r=rb(t,n);let s=XA(e,Dn(0,"int32"));const i=r.rank-s.rank;for(let l=0;l<i;++l)s=Lo(s,l+1);s=df(s,Kl(r.shape,"bool"));const a=$r(r);return Mo(s,r,a)}const yEe={kernelName:E5,gradFunc:t=>({x:()=>$r(t)})};const xEe=[Cne,m4e,g4e,y4e,x4e,b4e,v4e,w4e,S4e,C4e,k4e,B4e,I4e,_4e,R4e,O4e,F4e,D4e,L4e,$4e,P4e,z4e,M4e,U4e,W4e,V4e,q4e,G4e,K4e,X4e,zje,Y4e,J4e,Z4e,eje,tje,rje,nje,sje,ije,aje,oje,lje,cje,uje,dje,fje,hje,Aje,gje,vQ,vQ,yje,vje,Cje,kje,Bje,jje,Eje,Ije,Nje,Tje,_je,Rje,Oje,wQ,wQ,Fje,Dje,Pje,Uje,Mje,Qje,Hje,Wje,Vje,qje,Gje,Kje,Xje,Yje,Jje,Zje,eEe,tEe,nEe,rEe,sEe,SQ,SQ,CQ,CQ,iEe,oEe,aEe,lEe,cEe,uEe,dEe,fEe,hEe,AEe,pEe,mEe,yEe];for(const t of xEe)ree(t);ut().prototype.abs=function(){return this.throwIfDisposed(),Ra(this)};ut().prototype.acos=function(){return this.throwIfDisposed(),PD(this)};ut().prototype.acosh=function(){return this.throwIfDisposed(),zD(this)};ut().prototype.add=function(t){return this.throwIfDisposed(),Nt(this,t)};ut().prototype.all=function(t,e){return this.throwIfDisposed(),a3(this,t,e)};ut().prototype.any=function(t,e){return this.throwIfDisposed(),L2(this,t,e)};ut().prototype.argMax=function(t){return this.throwIfDisposed(),i0(this,t)};ut().prototype.argMin=function(t){return this.throwIfDisposed(),UD(this,t)};ut().prototype.asScalar=function(){return this.throwIfDisposed(),ce(this.size===1,()=>"The array must have only 1 element."),Fe(this,[])};ut().prototype.asType=function(t){return this.throwIfDisposed(),Mt(this,t)};ut().prototype.as1D=function(){return this.throwIfDisposed(),Fe(this,[this.size])};ut().prototype.as2D=function(t,e){return this.throwIfDisposed(),Fe(this,[t,e])};ut().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Fe(this,[t,e,n])};ut().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Fe(this,[t,e,n,r])};ut().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Fe(this,[t,e,n,r,s])};ut().prototype.asin=function(){return this.throwIfDisposed(),MD(this)};ut().prototype.asinh=function(){return this.throwIfDisposed(),QD(this)};ut().prototype.atan=function(){return this.throwIfDisposed(),HD(this)};ut().prototype.atan2=function(t){return this.throwIfDisposed(),WD(this,t)};ut().prototype.atanh=function(){return this.throwIfDisposed(),VD(this)};ut().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),_5(this,t,e,n,r)};ut().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),R5(this,t,e)};ut().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Jx(this,t,e,n,r,s)};ut().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Ug(this,t)};ut().prototype.cast=function(t){return this.throwIfDisposed(),Mt(this,t)};ut().prototype.ceil=function(){return this.throwIfDisposed(),ZD(this)};ut().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),nc(this,t,e)};ut().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Dr&&(t=[t]),Gi([this,...t],e)};ut().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),o3(this,t,e,n,r,s,i)};ut().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),l3(this,t,e,n,r,s)};ut().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),RA(this,t,e,n,r,s,i)};ut().prototype.cos=function(){return this.throwIfDisposed(),F5(this)};ut().prototype.cosh=function(){return this.throwIfDisposed(),c3(this)};ut().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),z2(this,t,e,n)};ut().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),u3(this,t,e,n)};ut().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),aL(this,t,e)};ut().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Zx(this,t,e,n,r,s,i)};ut().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),oL(this,t,e,n,r,s)};ut().prototype.divNoNan=function(t){return this.throwIfDisposed(),lL(this,t)};ut().prototype.div=function(t){return this.throwIfDisposed(),un(this,t)};ut().prototype.dot=function(t){return this.throwIfDisposed(),cL(this,t)};ut().prototype.elu=function(){return this.throwIfDisposed(),eb(this)};ut().prototype.equal=function(t){return this.throwIfDisposed(),fd(this,t)};ut().prototype.erf=function(){return this.throwIfDisposed(),d3(this)};ut().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),dL(this,t,e)};ut().prototype.exp=function(){return this.throwIfDisposed(),rc(this)};ut().prototype.expandDims=function(t){return this.throwIfDisposed(),Lo(this,t)};ut().prototype.expm1=function(){return this.throwIfDisposed(),fL(this)};ut().prototype.fft=function(){return this.throwIfDisposed(),G5(this)};ut().prototype.flatten=function(){return this.throwIfDisposed(),Fe(this,[this.size])};ut().prototype.floor=function(){return this.throwIfDisposed(),nb(this)};ut().prototype.floorDiv=function(t){return this.throwIfDisposed(),i3(this,t)};ut().prototype.gather=function(t,e,n){return this.throwIfDisposed(),rb(this,t,e,n)};ut().prototype.greaterEqual=function(t){return this.throwIfDisposed(),XA(this,t)};ut().prototype.greater=function(t){return this.throwIfDisposed(),lc(this,t)};ut().prototype.ifft=function(){return this.throwIfDisposed(),F1(this)};ut().prototype.irfft=function(){return this.throwIfDisposed(),j3(this)};ut().prototype.isFinite=function(){return this.throwIfDisposed(),hL(this)};ut().prototype.isInf=function(){return this.throwIfDisposed(),AL(this)};ut().prototype.isNaN=function(){return this.throwIfDisposed(),pL(this)};ut().prototype.leakyRelu=function(t){return this.throwIfDisposed(),L5(this,t)};ut().prototype.lessEqual=function(t){return this.throwIfDisposed(),$m(this,t)};ut().prototype.less=function(t){return this.throwIfDisposed(),T1(this,t)};ut().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),mL(this,t,e,n,r)};ut().prototype.logSigmoid=function(){return this.throwIfDisposed(),gL(this)};ut().prototype.logSoftmax=function(t){return this.throwIfDisposed(),A3(this,t)};ut().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),P5(this,t,e)};ut().prototype.log=function(){return this.throwIfDisposed(),Pc(this)};ut().prototype.log1p=function(){return this.throwIfDisposed(),$5(this)};ut().prototype.logicalAnd=function(t){return this.throwIfDisposed(),df(this,t)};ut().prototype.logicalNot=function(){return this.throwIfDisposed(),z5(this)};ut().prototype.logicalOr=function(t){return this.throwIfDisposed(),p3(this,t)};ut().prototype.logicalXor=function(t){return this.throwIfDisposed(),yL(this,t)};ut().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),fr(this,t,e,n)};ut().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),U5(this,t,e,n,r)};ut().prototype.max=function(t,e){return this.throwIfDisposed(),xu(this,t,e)};ut().prototype.maximum=function(t){return this.throwIfDisposed(),kh(this,t)};ut().prototype.mean=function(t,e){return this.throwIfDisposed(),Ui(this,t,e)};ut().prototype.min=function(t,e){return this.throwIfDisposed(),N1(this,t,e)};ut().prototype.minimum=function(t){return this.throwIfDisposed(),vm(this,t)};ut().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),bL(this,t,e)};ut().prototype.mod=function(t){return this.throwIfDisposed(),vL(this,t)};ut().prototype.mul=function(t){return this.throwIfDisposed(),Ne(this,t)};ut().prototype.neg=function(){return this.throwIfDisposed(),ni(this)};ut().prototype.norm=function(t,e,n){return this.throwIfDisposed(),tb(this,t,e,n)};ut().prototype.notEqual=function(t){return this.throwIfDisposed(),l0(this,t)};ut().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),_1(this,t,e,n)};ut().prototype.onesLike=function(){return this.throwIfDisposed(),zc(this)};ut().prototype.pad=function(t,e){return this.throwIfDisposed(),YA(this,t,e)};ut().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),wL(this,t,e,n,r,s,i)};ut().prototype.pow=function(t){return this.throwIfDisposed(),mh(this,t)};ut().prototype.prelu=function(t){return this.throwIfDisposed(),H5(this,t)};ut().prototype.prod=function(t,e){return this.throwIfDisposed(),SL(this,t,e)};ut().prototype.reciprocal=function(){return this.throwIfDisposed(),jL(this)};ut().prototype.relu=function(){return this.throwIfDisposed(),wf(this)};ut().prototype.relu6=function(){return this.throwIfDisposed(),x3(this)};ut().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Fe(this,t.shape)};ut().prototype.reshape=function(t){return this.throwIfDisposed(),Fe(this,t)};ut().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Ite(this,t,e,n)};ut().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Nte(this,t,e,n)};ut().prototype.reverse=function(t){return this.throwIfDisposed(),wu(this,t)};ut().prototype.rfft=function(){return this.throwIfDisposed(),K5(this)};ut().prototype.round=function(){return this.throwIfDisposed(),b3(this)};ut().prototype.rsqrt=function(){return this.throwIfDisposed(),v3(this)};ut().prototype.selu=function(){return this.throwIfDisposed(),w3(this)};ut().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),S3(this,t,e,n,r,s,i)};ut().prototype.sigmoid=function(){return this.throwIfDisposed(),cd(this)};ut().prototype.sign=function(){return this.throwIfDisposed(),EL(this)};ut().prototype.sin=function(){return this.throwIfDisposed(),C3(this)};ut().prototype.sinh=function(){return this.throwIfDisposed(),k3(this)};ut().prototype.slice=function(t,e){return this.throwIfDisposed(),Gn(this,t,e)};ut().prototype.softmax=function(t){return this.throwIfDisposed(),q5(this,t)};ut().prototype.softplus=function(){return this.throwIfDisposed(),O0(this)};ut().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Q5(this,t,e)};ut().prototype.split=function(t,e){return this.throwIfDisposed(),Zl(this,t,e)};ut().prototype.sqrt=function(){return this.throwIfDisposed(),yo(this)};ut().prototype.square=function(){return this.throwIfDisposed(),Rs(this)};ut().prototype.squaredDifference=function(t){return this.throwIfDisposed(),E3(this,t)};ut().prototype.squeeze=function(t){return this.throwIfDisposed(),ud(this,t)};ut().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Dr?[this,t]:[this,...t];return sc(n,e)};ut().prototype.step=function(t){return this.throwIfDisposed(),F0(this,t)};ut().prototype.stridedSlice=function(t,e,n,r,s,i,a,l){return this.throwIfDisposed(),IL(this,t,e,n,r,s,i,a,l)};ut().prototype.sub=function(t){return this.throwIfDisposed(),Kt(this,t)};ut().prototype.sum=function(t,e){return this.throwIfDisposed(),An(this,t,e)};ut().prototype.tan=function(){return this.throwIfDisposed(),NL(this)};ut().prototype.tanh=function(){return this.throwIfDisposed(),bm(this)};ut().prototype.tile=function(t){return this.throwIfDisposed(),hu(this,t)};ut().prototype.toBool=function(){return this.throwIfDisposed(),Mt(this,"bool")};ut().prototype.toFloat=function(){return this.throwIfDisposed(),Mt(this,"float32")};ut().prototype.toInt=function(){return this.throwIfDisposed(),Mt(this,"int32")};ut().prototype.topk=function(t,e){return this.throwIfDisposed(),RL(this,t,e)};ut().prototype.transpose=function(t){return this.throwIfDisposed(),jr(this,t)};ut().prototype.unique=function(t){return this.throwIfDisposed(),OL(this,t)};ut().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),T3(this,t,e)};ut().prototype.unstack=function(t){return this.throwIfDisposed(),Su(this,t)};ut().prototype.where=function(t,e){return this.throwIfDisposed(),Mo(t,this,e)};ut().prototype.zerosLike=function(){return this.throwIfDisposed(),$r(this)};class Xf extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Xf.prototype)}}class td extends Error{constructor(e){super(e),Object.setPrototypeOf(this,td.prototype)}}class Pe extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Pe.prototype)}}class ur extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ur.prototype)}}class w$ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,w$.prototype)}}class Bne{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}function d0(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Yf(t,e){if(!t)throw new w$(e)}function kQ(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Wl(t){return t.length===1?t[0]:t}function ws(t){return Array.isArray(t)?t:[t]}function lA(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Sg(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Qu={};function S$(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function FO(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>FO(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:FO(r))}}}function Z5(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let a;if(i in n)a=n[i];else if(i in Qu)a=Qu[i];else if(a=e[i],a==null)throw new Pe(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=t;if(i.className==null||i.config==null)throw new Pe(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let l,c;if(a in n?[l,c]=n[a]:a in Qu?[l,c]=Qu.className:a in e&&([l,c]=e[a]),l==null)throw new Pe(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(c!=null){const u={};for(const m of Object.keys(Qu))u[m]=Qu[m];for(const m of Object.keys(n))u[m]=n[m];const d=i.config;d.customObjects=u;const f=Object.assign({},Qu);for(const m of Object.keys(n))Qu[m]=n[m];FO(i.config);const A=c(l,i.config,n,s);return Qu=Object.assign({},f),A}else{const u=Object.assign({},Qu);for(const f of Object.keys(n))Qu[f]=n[f];const d=new l(i.config);return Qu=Object.assign({},u),d}}}function bEe(t,e){return t<e?-1:t>e?1:0}function LC(t,e){return-1*bEe(t,e)}function im(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function vEe(t){if(t==null)throw new Pe(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function L0(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Pe(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function C$(t,e,n=0,r=1/0){return Yf(n>=0),Yf(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function mo(t,e){Array.isArray(t)?(ce(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>mo(n,`element ${r+1} of ${e}`))):ce(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${jne(t)}.`)}function jne(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>jne(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function wEe(t,e,n){let r=n!=null?n():Cl(),s;return(...a)=>{const l=n!=null?n():Cl();return l-r<e||(r=l,s=t(...a)),s}}function Ene(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}let SEe=0;function Ine(){return SEe++}const $C={};function q3(t=""){return t in $C||($C[t]=0),$C[t]+=1,t+$C[t].toString()}const CEe=["channelsFirst","channelsLast"],kEe=["nearest","bilinear"],BEe=["valid","same","causal"],jEe=["max","avg"],EEe=["sum","mul","concat","ave"];const Ty=new Map;function Ca(t){L0(CEe,"DataFormat",t)}function IEe(t){L0(kEe,"InterpolationFormat",t)}function Bu(t){L0(BEe,"PaddingMode",t)}function Nne(t){L0(jEe,"PoolMode",t)}const p2=[],BQ="/";function Mg(t,e){p2.push(t);try{const n=e();return p2.pop(),n}catch(n){throw p2.pop(),n}}function NEe(){return p2.length===0?"":p2.join(BQ)+BQ}function Tne(t){if(!Rne(t))throw new Error("Not a valid tensor name: '"+t+"'");return NEe()+t}function _ne(t){if(!Rne(t))throw new Error("Not a valid tensor name: '"+t+"'");Ty.has(t)||Ty.set(t,0);const e=Ty.get(t);if(Ty.set(t,Ty.get(t)+1),e>0){const n=`${t}_${e}`;return Ty.set(n,1),n}else return t}const TEe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Rne(t){return!!t.match(TEe)}function _Ee(t){return t===parseInt(t.toString(),10)}function am(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function D1(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function wm(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ff(t,e){if(e<t)throw new Pe(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}let r_;function Ga(){return r_==null&&(r_=OD().epsilon()),r_}function hf(){return"channelsLast"}function lh(t,e){return Mt(t,e)}function eS(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Fe(t,n)}function REe(t,e){return He(()=>{if(t.shape.length!==2)throw new Pe(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=eS(t,1);return DO(n,[1,e,1])})}function OEe(t){const e=[am(t.shape)];return Fe(t,e)}function FEe(t){if(t.rank<=1)throw new Pe(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],am(t.shape,1)];return Fe(t,e)}function Qg(t,e,n){return He(()=>{switch(t.rank){case 1:return W5(t,e,n);case 2:return B3(t,[e,0],[n,t.shape[1]]);case 3:return V5(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return O1(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Gn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Gn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Pe(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function s_(t,e,n){return He(()=>{switch(t.rank){case 1:return W5(t,e,n);case 2:return B3(t,[0,e],[t.shape[0],n]);case 3:return V5(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return O1(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Pe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function PC(t,e,n,r){return He(()=>{switch(t.rank){case 1:return W5(t,e,n);case 2:switch(r){case 1:return Qg(t,e,n);case 2:return s_(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Qg(t,e,n);case 2:return V5(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return s_(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Qg(t,e,n);case 2:return O1(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return O1(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return s_(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}default:throw new Pe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function k$(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Gi(t,e)}function jQ(t,e){switch(t.rank){case 1:return eL([t,e]);case 2:return O5([t,e],0);case 3:return tL([t,e],0);case 4:return nL([t,e],0);default:throw new Pe(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function DO(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Pe(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return hu(t,e)}function G3(t,e=0,n=1,r,s){return y3(t,e,n,r,s)}function ch(t,e,n,r){if(t.rank<2||e.rank<2)throw new ur(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new ur(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return NO({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?LO(t.rank,r,hf()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=Fe(t,[-1,i]);const a=e.shape.slice(),l=a.pop(),c=a.pop(),u=[...a,l],d=Array.from({length:e.rank},(g,y)=>y===0?e.rank-2:y<=e.rank-2?y-1:y);e=Fe(jr(e,d),[c,-1]);const f=[...s,...u];return Fe(NO({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?LO(t.rank,r,hf()):null,activation:n}),f)}}function One(t,e,n){return He(()=>(Array.isArray(e)?e=qa(e,"int32"):e=Mt(e,"int32"),rb(t,e,n)))}function tS(t){return Ne(t,t)}function LO(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Pe(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1,1]):Fe(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Fe(e,[1,1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1]):Fe(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Fe(e,[1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1]):Fe(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Fe(e,[1,1,r[0]]):Fe(e,[1].concat(r))}else if(t<3)return e;throw new Pe(`Unsupported input rank by biasAdd: ${e.rank}`)}function Sf(t,e,n){return He(()=>(n==null&&(n=hf()),Ca(n),Nt(t,LO(t.rank,e,n))))}function DEe(t,e=1){if(e!==1)throw new ur(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return eb(t)}function LEe(t){return He(()=>un(t,Nt(Ra(t),1)))}function Fne(t,e,n,r){return He(()=>LL(t,e,n,r))}function $Ee(t){return He(()=>{const e=Nt(.5,Ne(.2,t));return nc(e,0,1)})}function nS(t,e,n=!1){return n?t():e()}const PEe=["fanIn","fanOut","fanAvg"],zEe=["normal","uniform","truncatedNormal"];function UEe(t){L0(PEe,"FanMode",t)}function MEe(t){L0(zEe,"Distribution",t)}class gd extends D0{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Dne extends gd{apply(e,n){return La(e,n)}}Dne.className="Zeros";Ot(Dne);class B$ extends gd{apply(e,n){return Kl(e,n)}}B$.className="Ones";Ot(B$);class Lne extends gd{constructor(e){if(super(),typeof e!="object")throw new Pe(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Pe(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return He(()=>Ne(Dn(this.value),Kl(e,n)))}getConfig(){return{value:this.value}}}Lne.className="Constant";Ot(Lne);class $ne extends gd{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Pm(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}$ne.className="RandomUniform";Ot($ne);class Pne extends gd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ur(`randomNormal does not support dType ${n}.`);return G3(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Pne.className="RandomNormal";Ot(Pne);class zne extends gd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ur(`truncatedNormal does not support dType ${n}.`);return N3(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}zne.className="TruncatedNormal";Ot(zne);class Une extends gd{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return He(()=>{if(e.length!==2||e[0]!==e[1])throw new Pe("Identity matrix initializer can only be used for 2D square matrices.");return Ne(this.gain,f3(e[0]))})}getConfig(){return{gain:this.gain}}}Une.className="Identity";Ot(Une);function QEe(t,e="channelsLast"){let n,r;if(Ca(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=am(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=am(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=am(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Uc extends gd{constructor(e){if(super(),e.scale<0)throw new Pe(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,UEe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,MEe(this.distribution),this.seed=e.seed}apply(e,n){const r=QEe(e),s=r[0],i=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){const l=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ur(`${this.getClassName()} does not support dType ${n}.`);return N3(e,0,l,n,this.seed)}else{const l=Math.sqrt(3*a);return Pm(e,-l,l,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Uc.className="VarianceScaling";Ot(Uc);class j$ extends Uc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}j$.className="GlorotUniform";Ot(j$);class E$ extends Uc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}E$.className="GlorotNormal";Ot(E$);class I$ extends Uc{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}I$.className="HeNormal";Ot(I$);class N$ extends Uc{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}N$.className="HeUniform";Ot(N$);class T$ extends Uc{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}T$.className="LeCunNormal";Ot(T$);class _$ extends Uc{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Uc.className}}_$.className="LeCunUniform";Ot(_$);class Mne extends gd{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return He(()=>{if(e.length<2)throw new ur("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=it(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(s,r),Math.min(s,r)],l=G3(a,0,1,n,this.seed),c=UL.qr(l,!1);let u=c[0];const f=c[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return u=Ne(u,f.sign()),r<s&&(u=u.transpose()),Ne(Dn(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Mne.className="Orthogonal";Ot(Mne);const EQ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function IQ(t,e={}){return Z5(t,uu.getMap().classNameMap,e,"initializer")}function Qi(t){return S$(t)}function vi(t){if(typeof t=="string"){const e=t in EQ?EQ[t]:t;if(e==="GlorotNormal")return new E$;if(e==="GlorotUniform")return new j$;if(e==="HeNormal")return new I$;if(e==="HeUniform")return new N$;if(e==="LeCunNormal")return new T$;if(e==="LeCunUniform")return new _$;{const n={};return n.className=e,n.config={},IQ(n)}}else return t instanceof gd?t:IQ(t)}function $O(t){return Array.isArray(t)&&Array.isArray(t[0])}function t4(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Yn(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Pe(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function es(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Pe(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function n4(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}const NQ="Variable";class HEe{constructor(e,n="float32",r=NQ,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Ine(),r=r??NQ,this.originalName=Tne(r),this.name=_ne(this.originalName),this.trainable_=s,this.constraint=i,this.val=FL(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),WEe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function WEe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function PO(t){return t.map(e=>e.read())}function R$(t){t.forEach(e=>{e[0].write(e[1])})}class Ka{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class yh{constructor(e,n,r,s,i,a,l){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=l,this.id=Ine(),a!=null&&(this.originalName=Tne(a),this.name=_ne(this.originalName)),this.rank=n.length}}let VEe=0,K3=class{constructor(e,n){this.callArgs=n,this.id=VEe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},qEe=0,xr=class extends D0{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=qEe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=lA(r)+"_"+q3(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new td(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Pe(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Wl(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Wl(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Xf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Xf(`Layer ${this.name} is not connected, no input to return.`);return Wl(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Xf(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Xf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Wl(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=ws(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=ws(this.inputSpec);if(n.length!==r.length)throw new Pe(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],a=r[s];if(a==null)continue;const l=i.rank;if(a.ndim!=null&&l!==a.ndim)throw new Pe(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new Pe(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new Pe(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new Pe(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const c=i.shape;for(const u in a.axes){const d=Number(u),f=a.axes[u],A=d>=0?c[d]:c[c.length+d];if(f!=null&&[f,null].indexOf(A)===-1)throw new Pe(`Input ${s} is incompatible with layer ${this.name}: expected axis ${d} of input shape to have value ${f} but got shape ${c}.`)}}if(a.shape!=null)for(let c=0;c<a.shape.length;++c){const u=a.shape[c],d=i.shape[c];if(u!=null&&d!=null&&u!==d)throw new Pe(`Input ${s} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=ws(e),s=XEe(e),i=YEe(e);if(s===i)throw new Pe("Arguments to apply() must be all SymbolicTensors or all Tensors");return Mg(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const l of ws(e))a.push(l.shape);this.build(Wl(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const l=ws(a),c=[];for(let u of l)r.indexOf(u)!==-1&&(u=u.clone()),c.push(u);if(a=Wl(c),this.activityRegularizer!=null)throw new ur("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=GEe(e),l=this.computeOutputShape(a);let c;const u=KEe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?c=l.map((d,f)=>new yh(u,d,this,ws(e),n,this.name,f)):c=new yh(u,l,this,ws(e),n,this.name),this.addInboundNode(e,c,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new ur("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Xf(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Xf(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new td(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return n4(this.weights)}build(e){this.built=!0}getWeights(e=!1){return PO(e?this.trainableWeights:this.weights)}setWeights(e){He(()=>{const n=this.weights;if(n.length!==e.length)throw new Pe(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=PO(n);for(let i=0;i<s.length;++i){const a=s[i],l=n[i],c=e[i];if(!vr(a.shape,c.shape))throw new Pe(`Layer weight shape ${a.shape} not compatible with provided weight shape ${c.shape}`);r.push([l,c])}R$(r)})}addWeight(e,n,r,s,i,a,l,c){if(this._addedWeightNames.indexOf(e)!==-1)throw new Pe(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=c!=null?c():vi("zeros"));const u=s.apply(n,r),d=new HEe(u,r,e,a,l);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(d.read())),a==null&&(a=!0),a?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ws(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=ws(n),a=ws(s);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let l=0;l<i.length;l++)i[l].kerasMask=a[l]}addInboundNode(e,n,r,s,i,a,l=null){const c=ws(e);n=ws(n),r=ws(r),s=ws(s),i=t4(i),a=t4(a);const u=[],d=[],f=[];for(const A of c)u.push(A.sourceLayer),d.push(A.nodeIndex),f.push(A.tensorIndex);new K3({outboundLayer:this,inboundLayers:u,nodeIndices:d,tensorIndices:f,inputTensors:c,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:a},l);for(let A=0;A<n.length;A++)n[A].sourceLayer=this,n[A].nodeIndex=this.inboundNodes.length-1,n[A].tensorIndex=A}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function GEe(t){t=ws(t);const e=[];for(const n of t)e.push(n.shape);return Wl(e)}function KEe(t){return"float32"}function Qne(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const a=r.inputTensors[i],l=r.inboundLayers[i],c=r.nodeIndices[i],u=Qne(a,l,c);for(const d of u)s.indexOf(d)===-1&&s.push(d)}return s}}}function XEe(t){let e=!0;for(const n of ws(t))if(!(n instanceof yh)){e=!1;break}return e}function YEe(t){let e=!0;for(const n of ws(t))if(n instanceof yh){e=!1;break}return e}class rS extends xr{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:q3("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Pe("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Pe("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Pe("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new yh(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new K3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Pe(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}rS.className="InputLayer";Ot(rS);function JEe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Pe("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new rS({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function ZEe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Mt(e,t.dtype)}catch{throw new Pe(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Kp{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Kp)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=ZEe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Pe(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof yh){if(this.id2Value[e.id]==null)throw new Pe(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Pe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof yh){if(this.id2Value[e.id]==null)throw new Pe(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Pe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&hr(this.id2Mask)}}const r4=new Bne,s4=new Bne;function e3e(t){r4?.setMaxEntries(t),s4?.setMaxEntries(t)}function Yv(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),a=i?t:[t],l=a.map(g=>g.name),c=[],u=e.names();for(const g of l)u.indexOf(g)!==-1?c.push(e.getValue(g)):c.push(null);const d=l.join(",")+"|"+e.names().sort().join(",");let f=r4.get(d),A;if(f==null){const g=t3e(a,e);f=g.sorted,A=g.recipientCounts,r4.put(d,f),s4.put(d,A)}A={},s||Object.assign(A,s4.get(d));const m=new Kp(e);for(let g=0;g<f.length;++g){const y=f[g],x=y.sourceLayer;if(x instanceof rS)continue;const v=[],w=[],B=[];let k=!1;for(const D of y.inputs){const T=m.getValue(D),N=m.getMask(D);v.push(T),w.push(N),N!=null&&(k=!0),s||(A[D.name]--,A[D.name]===0&&!e.hasKey(D)&&l.indexOf(D.name)===-1&&!T.isDisposed&&D.sourceLayer.stateful!==!0&&B.push(T))}k&&(n=n||{},n.mask=w[0]);const j=ws(x.apply(v,n));let I=null;x.supportsMasking&&(I=x.computeMask(v,w));const O=r3e(y),F=Array.isArray(O)?O:[O];for(let D=0;D<F.length;++D){m.hasKey(F[D])||m.add(F[D],j[D],Array.isArray(I)?I[0]:I);const T=l.indexOf(F[D].name);T!==-1&&(c[T]=j[D])}s||hr(B)}return m.disposeMasks(),i?c:c[0]}function t3e(t,e){ce(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=TQ(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:a,recipientMap:l}=TQ(i,e);for(const c of a)s.has(c.name)||(n.push(c),s.add(c.name));for(const c in l)r[c]==null&&(r[c]=new Set),l[c].forEach(u=>r[c].add(u))}}return{sorted:n,recipientCounts:n3e(r)}}function n3e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function TQ(t,e){const n=new Set,r=[],s={};for(const l of e.names())n.add(l);const i=[],a=[];for(i.push(t);i.length>0;){const l=i[i.length-1];if(n.has(l.name)){i.pop();continue}const c=a[a.length-1]===i.length-1;if(l.inputs.length===0||c)i.pop(),r.push(l),n.add(l.name),c&&a.pop();else{a.push(i.length-1);for(const u of l.inputs)s[u.name]==null&&(s[u.name]=new Set),s[u.name].add(l.name),!n.has(u.name)&&i.push(u)}}return{sorted:r,recipientMap:s}}function r3e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}const s3e=Ye();s3e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,e3e);function O$(t,e){return He(()=>yo(An(Ne(t,t),e,!0)))}class sS extends D0{getConfig(){return{}}}class Hne extends sS{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return He(()=>{const n=O$(e,this.axis),r=nc(n,0,this.maxValue);return Ne(e,un(r,Nt(Ga(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Hne.className="MaxNorm";Ot(Hne);class Wne extends sS{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return He(()=>un(e,Nt(Ga(),O$(e,this.axis))))}getConfig(){return{axis:this.axis}}}Wne.className="UnitNorm";Ot(Wne);class Vne extends sS{apply(e){return wf(e)}}Vne.className="NonNeg";Ot(Vne);class qne extends sS{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return He(()=>{const n=O$(e,this.axis),r=Nt(Ne(this.rate,nc(n,this.minValue,this.maxValue)),Ne(1-this.rate,n));return Ne(e,un(r,Nt(Ga(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}qne.className="MinMaxNorm";Ot(qne);const _Q={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ja(t){return S$(t)}function RQ(t,e={}){return Z5(t,uu.getMap().classNameMap,e,"constraint")}function Za(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in _Q?_Q[t]:t,config:{}};return RQ(n)}else return t instanceof sS?t:RQ(t)}async function ug(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const a=i;e.push(a.data()),n.push(s),r.push(a)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];hr(r)}}function Gne(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}var OQ;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(OQ||(OQ={}));const i3e=125;class U2{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class a3e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class o3e extends U2{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let a;s in this.totals?a=this.totals[s]:this.totals[s]=0;const l=He(()=>Nt(this.totals[s],Ne(i,r)));this.totals[s]=l,a?.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:He(()=>{const s=Ne(un(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Va(n[r])}))}}class l3e extends U2{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const a=this.history[i];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){const c=a[l];e.push(c.data()),n.push(i),r.push(l)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class c3e extends U2{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||n$,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=i3e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");VB(this.yieldEvery)&&(this.maybeWait=wEe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await ug(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ug(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ug(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ug(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ug(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):VB(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ug(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ug(e),await this.trainEnd(e))}}function Kne(t,e){return t==null&&(t={}),t instanceof U2?[t]:Array.isArray(t)&&t[0]instanceof U2?t:ws(t).map(r=>new c3e(r,e))}class Ku{constructor(){}static registerCallbackConstructor(e,n){ce(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ku.checkForDuplicate(n),Ku.constructors[e]==null&&(Ku.constructors[e]=[]),Ku.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ku.constructors)Ku.constructors[+n].forEach(s=>{if(s===e)throw new Pe("Duplicate callback constructor.")})}static clear(){Ku.constructors={}}static createCallbacks(e){const n=[];for(const r in Ku.constructors){const s=+r;e>=s&&n.push(...Ku.constructors[s])}return n.map(r=>new r)}}Ku.constructors={};function Xne(t,e,n,r,s,i,a,l,c){const u=new l3e,d=[new o3e,...Ku.createCallbacks(e)];t!=null&&d.push(...t),d.push(u);const f=new a3e(d);return f.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:a,verbose:e,doValidation:l,metrics:c}),{callbackList:f,history:u}}function vA(t,e={},n=!1){return Z5(t,uu.getMap().classNameMap,e,"layer",n)}function i4(t,e){return He(()=>{t.dtype!=="float32"&&(t=Mt(t,"float32"));const n=An(tS(t),e,!0),r=R0(n.shape,Ga()),s=yo(kh(n,r));return un(t,s)})}function X3(t,e){return He(()=>Ui(tS(Kt(e,t)),-1))}function F$(t,e){return He(()=>Ui(Ra(Kt(e,t)),-1))}function D$(t,e){return He(()=>{const n=Kt(t,e),r=nc(Ra(t),Ga(),Number.MAX_VALUE),s=Ra(un(n,r));return Ne(100,Ui(s,-1))})}function u3e(t,e){return He(()=>{const n=nc(e,Ga(),Number.MAX_VALUE),r=Pc(Nt(1,n)),s=nc(t,Ga(),Number.MAX_VALUE),i=Pc(Nt(1,s));return Ui(tS(Kt(r,i)),-1)})}function d3e(t,e){return He(()=>{const n=kh(0,Kt(1,Ne(t,e)));return Ui(tS(n),-1)})}function f3e(t,e){return He(()=>{const n=kh(0,Kt(1,Ne(t,e)));return Ui(n,-1)})}function h3e(t,e){return He(()=>{const n=An(Ne(t,e),-1),r=xu(Ne(Kt(1,t),e),-1);return kh(0,Nt(1,Kt(r,n)))})}function A3e(t,e){return He(()=>{const n=Math.log(2),r=Kt(e,t),s=Kt(Nt(r,O0(Ne(-2,r))),n);return Ui(s,-1)})}function M2(t,e,n=!1){return He(()=>{if(n)e=q5(e);else{const r=An(e,e.shape.length-1,!0);e=un(e,r)}return e=nc(e,Ga(),1-Ga()),ni(An(Ne(Mt(t,"float32"),Pc(e)),e.shape.length-1))})}function a4(t,e,n=!1){return He(()=>{const r=Mt(nb(OEe(t)),"int32");e=nc(e,Ga(),1-Ga());const s=e.shape,i=Fe(_1(r,s[s.length-1]),s);return M2(i,e,n)})}function p3e(t,e){if(!vr(t.shape,e.shape))throw new Pe(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return He(()=>{const n=wf(e),r=ni(Ra(e));return Nt(Kt(n,Ne(e,t)),$5(rc(r)))})}function Y3(t,e){return He(()=>{let n;return n=nc(e,Ga(),1-Ga()),n=Pc(un(n,Kt(1,n))),Ui(p3e(t,n),-1)})}function m3e(t,e){return He(()=>{const n=nc(t,Ga(),1),r=nc(e,Ga(),1);return An(Ne(t,Pc(un(n,r))),-1)})}function g3e(t,e){return He(()=>{const n=Pc(Nt(Ga(),e));return Ui(Kt(e,Ne(t,n)),-1)})}function Yne(t,e){return He(()=>{const n=i4(t,-1),r=i4(e,-1),s=Ne(n,r);return ni(An(s,-1))})}const o4={meanSquaredError:X3,meanAbsoluteError:F$,meanAbsolutePercentageError:D$,meanSquaredLogarithmicError:u3e,squaredHinge:d3e,hinge:f3e,categoricalHinge:h3e,logcosh:A3e,categoricalCrossentropy:M2,sparseCategoricalCrossentropy:a4,binaryCrossentropy:Y3,kullbackLeiblerDivergence:m3e,poisson:g3e,cosineProximity:Yne};function i_(t){if(typeof t=="string"){if(t in o4)return o4[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Pe(e)}else return t}function Jne(t,e){return He(()=>{const n=Ne(.5,zc(e)),r=lh(lc(e,n),t.dtype);return Ui(fd(t,r),-1)})}function Zne(t,e){return He(()=>lh(fd(i0(t,-1),i0(e,-1)),"float32"))}function y3e(t,e){return He(()=>Mt(An(df(fd(t,1),fd(e,1))),"float32"))}function x3e(t,e){return He(()=>Mt(An(df(fd(t,0),fd(e,1))),"float32"))}function b3e(t,e){return He(()=>{const n=y3e(t,e),r=x3e(t,e),s=Nt(n,r);return Mt(Mo(lc(s,0),un(n,s),0),"float32")})}function v3e(t,e){return Y3(t,e)}function w3e(t,e){return t.rank===e.rank&&(t=ud(t,[t.rank-1])),e=i0(e,-1),e.dtype!==t.dtype&&(e=Mt(e,t.dtype)),Mt(fd(t,e),"float32")}const S3e=X3,C3e=X3,k3e=F$,B3e=F$,j3e=D$,E3e=D$,ere=M2,I3e=Yne,tre=a4,l4={binaryAccuracy:Jne,categoricalAccuracy:Zne,precision:b3e,categoricalCrossentropy:ere,sparseCategoricalCrossentropy:tre,mse:S3e,MSE:C3e,mae:k3e,MAE:B3e,mape:j3e,MAPE:E3e,cosine:I3e};function N3e(t){if(typeof t=="string"&&t in l4)return l4[t];if(typeof t!="string"&&t!=null)return t;throw new Pe(`Unknown metric ${t}`)}function zC(t){if(Yf(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(o4))if(o4[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(l4))if(l4[n]===t){e=n;break}return e!==void 0?e:t.name}}function T3e(t){const e={Adagrad:()=>mg.adagrad(.01),Adadelta:()=>mg.adadelta(1,.95,Ga()),Adam:()=>mg.adam(.001,.9,.999,Ga()),Adamax:()=>mg.adamax(.002,.9,.999,Ga(),0),RMSProp:()=>mg.rmsprop(.001,.9,0,Ga()),SGD:()=>mg.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Pe(`Unknown Optimizer ${t}`)}const FQ=1*1024*1024;function DQ(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!zO(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>FQ&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${FQ}.`)}}function zO(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!zO(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!zO(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}function _3e(t,e,n,r=console.log){const s=O3e(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(d=>Math.floor(e*d)));let a;if(!s){i.push("Receives inputs"),a=[];for(const d in t.nodesByDepth)a.push(...t.nodesByDepth[d])}r("_".repeat(e)),c4(i,n,r),r("=".repeat(e));const l=t.layers;for(let d=0;d<l.length;++d)s?F3e(l[d],n,r):D3e(l[d],n,a,r),r((d===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const c=R3e(t),u=n4(t.nonTrainableWeights);r(`Total params: ${c+u}`),r(`Trainable params: ${c}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function R3e(t){let e;return t.collectedTrainableWeights!=null?e=n4(t.collectedTrainableWeights):e=n4(t.trainableWeights),e}function O3e(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const a of s.inboundNodes)if(r.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function c4(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function F3e(t,e,n){let r,s;try{s=t.inboundNodes.map(c=>JSON.stringify(c.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,a=t.getClassName(),l=[`${i} (${a})`,s,r,t.countParams().toString()];c4(l,e,n)}function D3e(t,e,n,r){let s,i;try{i=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const a=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let A=0;A<f.inboundLayers.length;++A){const m=f.inboundLayers[A].name,g=f.nodeIndices[A],y=f.tensorIndices[A];a.push(`${m}[${g}][${y}]`)}const l=t.name,c=t.getClassName(),u=a.length===0?"":a[0],d=[`${l} (${c})`,i,s,t.countParams().toString(),u];c4(d,e,r);for(let f=1;f<a.length;++f)c4(["","","","",a[f]],e,r)}function nre(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function UO(t,e){if(t===null)return null;if(typeof t=="string")return Sg(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];nre(e,s,i)?n.push(i):n.push(UO(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Sg(r);n[i]=UO(s,i)}}return n}}function MO(t,e){if(t==null)return null;if(typeof t=="string")return lA(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];nre(e,s,i)?n.push(i):n.push(MO(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=lA(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=MO(s,r)}return n}}const rre="4.22.0";const L3e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Gd extends xr{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const w=this.getClassName().toLowerCase();this.name=q3(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],im(this.inputs).length!==this.inputs.length)throw new Pe(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);im(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const B=w.sourceLayer,k=w.nodeIndex,j=w.tensorIndex;this.outputLayers.push(B),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(j)}for(const w of this.inputs){const B=w.sourceLayer,k=w.nodeIndex,j=w.tensorIndex;Yf(k===0,"input layer has >1 nodes"),Yf(j===0,"input layer has >1 tensors"),this.inputLayers.push(B),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(j)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const B=this.inputLayers[w];if(!(B instanceof rS))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${w} (0-based) originates from layer type ${B.getClassName()}.`);this.inputNames.push(B.name),this.feedInputShapes.push(B.batchInputShape),this.feedInputNames.push(B.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const n={},r={},s={},i={},a={},l=[],c=(w,B,k,j,I,O)=>{(j==null||I==null||O==null)&&(j=w.sourceLayer,I=w.nodeIndex,O=w.tensorIndex);const F=j.inboundNodes[I];if(k.indexOf(F)!==-1)throw new td(`The tensor ${w.name} at layer "${j.name}" is part of a cycle.`);if(B.indexOf(F)!==-1)return;this.containerNodes.add(Gd.nodeKey(j,I)),j.id in a||(a[j.id]=Object.keys(a).length),k.indexOf(F)===-1&&k.push(F);const D=F.inboundLayers.length;for(let T=0;T<D;T++){const N=F.inputTensors[T],P=F.inboundLayers[T],z=F.nodeIndices[T],U=F.tensorIndices[T];c(N,B,k,P,z,U)}for(B.push(F);k.indexOf(F)>=0;)k.splice(k.indexOf(F),1);l.push(F)},u=[],d=[];for(const w of this.outputs)c(w,u,d);const f=l.slice().reverse();for(const w of f){r[w.id]=w,w.id in n||(n[w.id]=0);let B=n[w.id];const k=s[w.outboundLayer.id]==null?0:s[w.outboundLayer.id];B=Math.max(B,k),s[w.outboundLayer.id]=B,i[w.outboundLayer.id]=w.outboundLayer,n[w.id]=B;for(let j=0;j<w.inboundLayers.length;j++){const I=w.inboundLayers[j],O=w.nodeIndices[j],F=I.inboundNodes[O],D=n[F.id]==null?0:n[F.id];n[F.id]=Math.max(B+1,D),r[F.id]=F}}const A={};for(const w in n){const B=n[w];B in A||(A[B]=[]),A[B].push(r[w])}const m={};for(const w in s){const B=s[w];B in m||(m[B]=[]),m[B].push(i[w])}let g=Object.keys(m).map(w=>parseInt(w,10)).sort(LC);this.layers=[];for(const w of g){const B=m[w];B.sort((k,j)=>{const I=a[k.id],O=a[j.id];return I<O?-1:I>O?1:0});for(const k of B)k instanceof Gd&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=m,g=Object.keys(A).map(w=>parseInt(w,10)).sort(LC);const y=this.inputs.slice(),x=[];for(const w of g)for(const B of A[w]){const k=B.outboundLayer;if(k!=null){for(const j of B.inputTensors)if(y.indexOf(j)===-1)throw new td(`Graph disconnected: cannot obtain value for tensor ${j} at layer "${k.name}". The following previous layers were accessed without issue: ${x}`);for(const j of B.outputTensors)y.push(j);x.push(k.name)}}this.nodesByDepth=A;const v=this.layers.map(w=>w.name);for(const w of v){const B=v.filter(k=>k===w).length;if(B!==1)throw new td(`The name "${w}" is used ${B} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new K3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Pe("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=L3e(e);i&&this.parseWeights(e);for(const l of this.layers)for(const[c,u]of l.weights.entries()){const d=i?`${u.name.split("/").slice(0,-1).join("/")+"/"}${c}`:u.originalName;if(r[d]!=null)throw new Pe(`Duplicate weight name: ${d}`);r[d]=u,s++}const a=[];for(const l in e){let c=l;if(r[l]==null){const u=l.split("/");c=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[c]!=null)a.push([r[c],e[l]]);else if(n)throw new Pe(`Provided weight data has no target variable: ${l}`);delete r[c]}if(n){const l=[];for(const c in r)l.push(c);if(l.length>0)throw new Pe(`${l.length} of ${s} weights are not set: ${l}`)}R$(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!s.includes(a)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${rre}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=MO(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return He(()=>{e=ws(e);const r=new Kp;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Yv(this.outputs,r,n)})}computeMask(e,n){return He(()=>{e=ws(e);let r;return n==null?r=d0(null,e.length):r=ws(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=t4(e);if(n.length!==this.inputLayers.length)throw new Pe(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let l=0;l<n.length;l++){const c=this.inputLayers[l],u=n[l],d=c.name+"_0_0";r[d]=u}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(LC);if(s.length>1)for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer;if(this.inputLayers.map(y=>y.id).indexOf(d.id)!==-1)continue;const f=[];for(let y=0;y<u.inboundLayers.length;y++){const x=u.inboundLayers[y],v=u.nodeIndices[y],w=u.tensorIndices[y],B=`${x.name}_${v}_${w}`,k=r[B];f.push(k)}const A=d.computeOutputShape(Wl(f)),m=t4(A),g=d.inboundNodes.indexOf(u);for(let y=0;y<m.length;y++){const x=`${d.name}_${g}_${y}`;r[x]=m[y]}}}const i=[],a=[];for(let l=0;l<this.outputLayers.length;l++){const c=this.outputLayers[l],u=this.outputLayersNodeIndices[l],d=this.outputLayersTensorIndices[l],f=`${c.name}_${u}_${d}`;a.push(f)}for(let l=0;l<a.length;l++){const c=a[l];Yf(c in r),i.push(r[c])}return Wl(i)}runInternalGraph(e,n){n==null&&(n=d0(null,e.length));const r={};for(let c=0;c<this.inputs.length;++c){const u=this.inputs[c],d=e[c],f=n[c];r[u.id]=[d,f]}const s=Object.keys(this.nodesByDepth).map(c=>parseInt(c,10)).sort(LC);for(const c of s){const u=this.nodesByDepth[c];for(const d of u){const f=d.outboundLayer,A=d.inputTensors,m=d.outputTensors,g=new Array;for(const y of A)y.id in r&&g.push(r[y.id]);if(g.length===A.length){let y={},x,v,w,B;if(d.callArgs!=null&&(y=d.callArgs),g.length===1){const[k,j]=g[0];y.mask==null&&(y.mask=j),w=ws(f.call(k,y)),B=ws(f.computeMask(k,j)),x=[k],v=[j]}else x=g.map(k=>k[0]),v=g.map(k=>k[1]),y.mask==null&&(y.mask=v),w=ws(f.call(x,y)),B=ws(f.computeMask(x,v));if(f.activityRegularizer)throw new ur("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<m.length;++k){const j=m[k],I=w[k],O=B[k];r[j.id]=[I,O]}}}}const i=[],a=[],l=[];for(const c of this.outputs){Yf(c.id in r,`Could not compute output ${c.name} : ${c.id}`);const[u,d]=r[c.id];l.push(u.shape),i.push(u),a.push(d)}return[i,a,l]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Gd?1:0;for(let i=0;i<s.inboundNodes.length;i++){const a=Gd.nodeKey(s,i);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Pe("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Pe(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Pe(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return He(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Gd.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const l=a.getClassName(),c=a.getConfig(),u=[];for(let f=0;f<a.inboundNodes.length;f++){const A=a.inboundNodes[f],m=Gd.nodeKey(a,f);let g={};if(this.containerNodes.has(m)){if(A.callArgs)try{JSON.stringify(A.callArgs),g=A.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${A.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(A.inboundLayers.length>0){const y=[];for(let x=0;x<A.inboundLayers.length;x++){const v=A.inboundLayers[x],w=A.nodeIndices[x],B=A.tensorIndices[x],k=Gd.nodeKey(v,w);let j=n[k];j==null&&(j=0),y.push([v.name,j,B,g])}u.push(y)}}}const d={};d.name=a.name,d.className=l,d.config=c,d.inboundNodes=u,r.push(d)}e.layers=r;const s=[];for(let a=0;a<this.inputLayers.length;a++){const l=this.inputLayers[a],c=this.inputLayersNodeIndices[a],u=Gd.nodeKey(l,c);if(!this.containerNodes.has(u))continue;let d=n[u];d==null&&(d=0);const f=this.inputLayersTensorIndices[a];s.push([l.name,d,f])}e.inputLayers=s;const i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=Gd.nodeKey(l,c);if(!this.containerNodes.has(u))continue;let d=n[u];d==null&&(d=0);const f=this.outputLayersTensorIndices[a];i.push([l.name,d,f])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},a={};function l(x,v){x.name in a?a[x.name].push(v):a[x.name]=[v]}function c(x,v){const w=[];let B;for(const k of v){const j=k[0],I=k[1],O=k[2];if(B=k[3]==null?{}:k[3],!(j in i)){l(x,v);return}const F=i[j];if(F.inboundNodes.length<=I){l(x,v);return}const D=F.inboundNodes[I];w.push(D.outputTensors[O])}w.length>0&&x.apply(Wl(w),B)}function u(x){const v=x.name,w=vA(x,n.customObjects!=null?n.customObjects:{});w.setFastWeightInitDuringBuild(s),i[v]=w,x.inboundNodes.forEach(k=>{if(!(k instanceof Array))throw new Pe(`Corrupted configuration, expected array for nodeData: ${k}`);l(w,k)})}const d=n.name,f=n.layers;for(const x of f)u(x);for(;!vEe(a);)for(const x of f){const v=i[x.name];if(v.name in a){const w=a[v.name];delete a[v.name];for(const B of w)c(v,B)}}const A=[],m=[],g=n.inputLayers;for(const x of g){const v=x[0],w=x[1],B=x[2];Yf(v in i);const j=i[v].inboundNodes[w].outputTensors;A.push(j[B])}const y=n.outputLayers;for(const x of y){const v=x[0],w=x[1],B=x[2];Yf(v in i);const j=i[v].inboundNodes[w].outputTensors;m.push(j[B])}return new e({inputs:A,outputs:m,name:d})}get stateful(){if(this._stateful)throw new Pe("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){He(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function $3e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function sre(t,e){return $3e(t,e,"classWeight")}async function ire(t,e,n,r){if(n!=null){const s=He(()=>{if(t.shape.length===1)return ah(t);if(t.shape.length===2){if(t.shape[1]>1)return i0(t,1);if(t.shape[1]===1)return Fe(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());hr(s);const a=[];return i.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),qa(a,"float32")}else return null}function P3e(t,e){return Ne(t,e)}const z3e=32;function are(t,e){let n,r;const s=e;n=s.xs,r=s.ys,ce(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=LQ("input",t.inputNames,n),a=LQ("output",t.outputNames,r),l=i[0].shape[0];ce(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),ce(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let c=0;c<i.length;c++)ce(i[c].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[c]} has ${i[c].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let c=0;c<a.length;c++)ce(a[c].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[c]} has ${a[c].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:i,ys:a}}function LQ(t,e,n){if(n instanceof Dr)return[n];if(Array.isArray(n))return ce(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new Pe(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function U3e(t){if(t.length===3)throw new ur("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function M3e(t,e,n){const r=n.batchesPerEpoch!=null;if(ce(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),ce(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),ce(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),ce(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),ce(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,a;if(s)if($Q(n.validationData))ce(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const x=U3e(n.validationData);i=x.xs,a=x.ys}const l=t.makeTrainFunction(),c=t.getDedupedMetricsNames();let u;s?u=c.slice().concat(c.map(x=>"val_"+x)):u=c.slice();const d=Kne(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:A,history:m}=Xne(d,f,n.epochs,null,null,Q3e(e,n),null,s,u);A.setModel(t),t.history=m,await A.onTrainBegin(),t.stopTraining_=!1;let g=n.initialEpoch==null?0:n.initialEpoch,y=await e.iterator();for(;g<n.epochs;){const x={};await A.onEpochBegin(g);let v=0,w=0;for(r||(y=await e.iterator());!r||v<n.batchesPerEpoch;){const B=await y.next();if(r&&B.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(B.value!=null){const{xs:k,ys:j}=are(t,B.value),I={};I.batch=w,I.size=k[0].shape[0],await A.onBatchBegin(w,I);const O=[];if(n.classWeight!=null){const T=sre(n.classWeight,t.outputNames);for(let N=0;N<T.length;++N)O.push(await ire(j[N],null,T[N]))}const F=k.concat(j).concat(O),D=l(F);hr(F);for(let T=0;T<c.length;++T){const N=c[T],P=D[T];I[N]=P,Va(P)}await A.onBatchEnd(w,I),Gne(I),w++,v++}if(r?v>=n.batchesPerEpoch:B.done){if(s){let k;$Q(n.validationData)?k=ws(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):k=ws(t.evaluate(i,a,{batchSize:n.validationBatchSize==null?z3e:n.validationBatchSize,verbose:0}));for(let j=0;j<t.metricsNames.length;++j)x[`val_${t.metricsNames[j]}`]=k[j]}break}if(t.stopTraining_)break}if(await A.onEpochEnd(g,x),g++,t.stopTraining_)break}return await A.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Q3e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function $Q(t){return typeof t.iterator=="function"}function H3e(t){return typeof t.next=="function"}async function W3e(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new ur("Verbose mode is not implemented yet.");ce(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=H3e(e)?e:await e.iterator();let l=0,c=0;for(;!r||c<n.batches;){const u=await a.next();if(i=He(()=>{if(u.value){const{xs:d,ys:f}=are(t,u.value),A=d.concat(f),m=He(()=>s(A));if(hr(A),c===0)for(let y=0;y<m.length;++y)i.push(Dn(0));const g=A[0].shape[0];for(let y=0;y<m.length;++y){const x=m[y],v=i[y];i[y]=He(()=>Nt(i[y],Ne(g,x))),c>0&&hr(v)}hr(m),l+=g,++c}return i}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const d=i[u];i[u]=un(i[u],l),hr(d)}return Wl(i)}function a_(t){ce(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function vv(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Qg(r,e,n-e)):Qg(t,e,n-e)}function QO(t,e){return He(()=>t==null?null:Array.isArray(t)?t.map(n=>QO(n,e)):One(t,e.dtype==="int32"?e:Mt(e,"int32")))}function o_(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function ore(t){const e=[];t instanceof Dr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(eS(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Hd(t,e){if(t==null)return;const n=[];if(e instanceof Dr)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Dr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}function V3e(t){return t instanceof Dr}function HO(t){return Array.isArray(t)}function PQ(t){return!V3e(t)&&!HO(t)}function zQ(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(HO(t)&&t.length>0)a=!0;else if(PQ(t)){for(const l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new Pe(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let i;if(PQ(t)){t=t,i=[];for(const a of e){if(t[a]==null)throw new Pe(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(t[a])}}else if(HO(t)){if(t=t,t.length!==e.length)throw new Pe(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new Pe(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=ore(i),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const l=i[a];if(l.shape.length!==n[a].length)throw new Pe(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let c=0;c<n[a].length;++c){if(c===0&&!r)continue;const u=l.shape[c],d=n[a][c];if(d!=null&&d>=0&&u!==d)throw new Pe(`${s} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${s} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return i}function q3e(t,e,n){const r=im(t.map(i=>i.shape[0]));r.sort();const s=im(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new Pe(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new Pe(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!vr(r,s))throw new Pe(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function G3e(t,e,n){const r=[X3,Y3,M2];for(let s=0;s<t.length;++s){const i=t[s],a=e[s],l=n[s];if(a!=null){if(a===M2&&i.shape[i.shape.length-1]===1)throw new Pe(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const c=i.shape.slice(1),u=l.slice(1);for(let d=0;d<c.length;++d){const f=c[d],A=u[d];if(A!=null&&f!==A)throw new Pe(`A target Tensor with shape ${i.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function UQ(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new Pe(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new Pe(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const l=i[a];if(l.shape.length!==n[a].length)throw new Pe(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let c=0;c<n[a].length;++c){if(c===0&&!r)continue;const u=l.shape[c],d=n[a][c];if(d!=null&&d!==u)throw new Pe(`Error when checking ${s}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function K3e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const X3e="layers-model";class A1 extends Gd{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Pe("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");_3e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=T3e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ZA))throw new Pe("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new Pe(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(i_(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Pe(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(l=>i_(l))}else{const a=i_(e.loss);this.outputs.forEach(l=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Mg("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const s=K3e(e.metrics,this.outputNames),i=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Mg("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const l=s[a];(u=>{let f,A,m;for(const g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const x=this.internalOutputShapes[a];x[x.length-1]===1||this.lossFunctions[a]===Y3?["accuracy","acc"].indexOf(g)!==-1?A=Jne:["crossentropy","ce"].indexOf(g)!==-1&&(A=v3e):this.lossFunctions[a]===a4?["accuracy","acc"].indexOf(g)!==-1?A=w3e:["crossentropy","ce"].indexOf(g)!==-1&&(A=tre):["accuracy","acc"].indexOf(g)!==-1?A=Zne:["crossentropy","ce"].indexOf(g)!==-1&&(A=ere);let v;["accuracy","acc"].indexOf(g)!==-1?v="acc":["crossentropy","ce"].indexOf(g)!==-1&&(v="ce"),m=A,f=""+v}else m=N3e(g),f=""+zC(g);let y;Mg(f,()=>{y=m}),i(a,f,y)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;a_(s);const a=this.standardizeUserDataXY(e,n,!0,s);try{const l=a[0].concat(a[1]);this.makeTestFunction();const c=this.testFunction,u=this.testLoop(c,l,s,r.verbose,r.steps);return Wl(u)}finally{Hd(a[0],e),Hd(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),W3e(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new Pe(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new Pe(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Pe("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),a=new Kp;if(e instanceof Dr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Pe(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(const c of this.inputs){const u=e[c.name];if(u==null)throw new Pe(`No value is provided for the model's input ${c.name}`);a.add(c,u)}const l=Yv(i,a);return r?l:l[0]}retrieveSymbolicTensors(e){const n=d0(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],a=i.map(l=>l.name);for(let l=0;l<e.length;++l){const c=a.indexOf(e[l]);if(c!==-1&&(n[l]=i[c],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,a)=>{i==null&&s.push(e[a])}),new Pe(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return He(()=>{const s=this.checkNumSamples(e);if(r)throw new ur("Verbose predictLoop() is not implemented yet.");const i=o_(s,n),a=this.outputs.map(l=>[]);for(let l=0;l<i.length;++l)He(()=>{const u=i[l][0],d=i[l][1],f=vv(e,u,d),A=[];if(Array.isArray(f))for(let g=0;g<f.length;++g)A.push({key:this.inputs[g],value:f[g]});else A.push({key:this.inputs[0],value:f});const m=new Kp(A);return Yv(this.outputs,m)}).forEach((u,d)=>a[d].push(u));return Wl(a.map(l=>Gi(l,0)))})}predict(e,n={}){const r=ore(e);UQ(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return a_(s),this.predictLoop(r,s)}finally{Hd(r,e)}}predictOnBatch(e){UQ(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new td("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const l=this.feedOutputShapes[a];this.feedLossFns[a]===a4?i.push(l.slice(0,l.length-1).concat([1])):i.push(l)}if(e=zQ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=zQ(n,this.feedOutputNames,i,!1,"target"),q3e(e,n),G3e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new Pe(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,a){const[l,c]=this.standardizeUserDataXY(e,n,i,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){const d=sre(s,this.outputNames);u=[];for(let f=0;f<d.length;++f)u.push(await ire(c[f],null,d[f]))}return[l,c,u]}testLoop(e,n,r,s=0,i){return He(()=>{const a=this.checkNumSamples(n,r,i,"steps"),l=[];if(s>0)throw new ur("Verbose mode is not implemented yet.");if(i!=null)throw new ur("steps mode in testLoop() is not implemented yet");{const c=o_(a,r),u=qa(ff(0,a));for(let d=0;d<c.length;++d){const f=c[d][0],A=c[d][1],m=Qg(u,f,A-f),g=QO(n,m),y=e(g);if(d===0)for(let x=0;x<y.length;++x)l.push(Dn(0));for(let x=0;x<y.length;++x){const v=y[x];l[x]=Nt(l[x],Ne(A-f,v))}}for(let d=0;d<l.length;++d)l[d]=un(l[d],a)}return l})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(kQ(e,s)>1){const a=kQ(e.slice(0,r),s);i+=`_${a}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{const f=[];for(let y=0;y<this.inputs.length;++y)f.push({key:this.inputs[y],value:r[y]});const A=new Kp(f),m=Yv(this.outputs,A,{training:!0});let g;for(let y=0;y<this.lossFunctions.length;++y){const x=this.lossFunctions[y];let v=x(s[y],m[y]);i[y]!=null&&(v=P3e(v,i[y]));const w=Ui(v);n.push(w),y===0?g=v:g=Nt(g,v)}for(let y=0;y<this.metricsTensors.length;++y){let x;if(this.outputs.length>1&&y<this.outputs.length)x=n[y];else{const v=this.metricsTensors[y][0],w=this.metricsTensors[y][1];x=Ui(v(s[w],m[w]))}Va(x),a.push(x)}return g=Ui(g),this.calculateLosses().forEach(y=>{g=Nt(g,y)}),g},c=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>He(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:s[u]});const l=new Kp(a),c=Yv(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){const d=this.lossFunctions[u],f=Ui(d(i[u],c[u]));u===0?r=f:r=Nt(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const d=this.metricsTensors[u][0],f=this.metricsTensors[u][1],A=Ui(d(i[f],c[f]));n.push(A)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,a,l,c,u,d,f,A;try{const m=r.batchSize==null?32:r.batchSize;a_(m);const y=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,m);s=y[0],i=y[1],A=y[2];let x=!1,v;if(r.validationData!=null&&r.validationData.length>0){if(x=!0,r.validationData.length===2)c=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new ur("validationData including sample weights is not supported yet."):new Pe(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const T=await this.standardizeUserData(c,u,null,null,!0,m);d=T[0],f=T[1],v=d.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){x=!0;const D=Math.floor(s[0].shape[0]*(1-r.validationSplit)),T=s[0].shape[0];d=vv(s,D,T),a=s,s=vv(s,0,D),f=vv(i,D,T),l=i,i=vv(i,0,D),v=d.concat(f)}else r.validationSteps!=null&&(x=!0);const w=s.concat(i).concat(A);this.checkTrainableWeightsConsistency();const B=this.makeTrainFunction(),k=this.getDedupedMetricsNames();let j,I;x?(this.makeTestFunction(),j=this.testFunction,I=k.slice().concat(k.map(D=>"val_"+D))):(j=null,v=[],I=k.slice());const O=Kne(r.callbacks,r.yieldEvery);return await this.fitLoop(B,w,k,m,r.epochs,r.verbose,O,j,v,r.shuffle,I,r.initialEpoch,null,null)}finally{this.isTraining=!1,Hd(s,e),Hd(i,n),Hd(a,e),Hd(l,n),Hd(d,c),Hd(f,u),A!=null&&hr(A)}}async fitLoop(e,n,r,s,i,a,l,c,u,d,f,A,m,g){s==null&&(s=32),i==null&&(i=1),d==null&&(d=!0),A==null&&(A=0);let y=!1;if(c!=null&&u!=null&&(y=!0),g!=null&&(y=!0,m==null))throw new Pe("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const x=this.checkNumSamples(n,s,m,"steps_per_epoch");let v;x!=null&&(v=ff(0,x)),a==null&&(a=1);const{callbackList:w,history:B}=Xne(l,a,i,A,x,m,s,y,f);w.setModel(this),this.history=B,await w.onTrainBegin(),this.stopTraining_=!1;for(let k=A;k<i;++k){await w.onEpochBegin(k);const j={};if(m!=null)throw new ur("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new ur("batch shuffling is not implemneted yet");d&&vD(v);const I=qa(v),O=o_(x,s);for(let F=0;F<O.length;++F){const D={};if(await w.onBatchBegin(F,D),He(()=>{const T=O[F][0],N=O[F][1],P=Qg(I,T,N-T);D.batch=F,D.size=N-T;const z=QO(n,P),U=e(z);for(let ee=0;ee<r.length;++ee){const q=r[ee],Z=U[ee];D[q]=Z,Va(Z)}if(F===O.length-1&&y){const ee=this.testLoop(c,u,s);for(let q=0;q<r.length;++q){const Z=r[q],G=ee[q];Va(G),j["val_"+Z]=G}}}),await w.onBatchEnd(F,D),Gne(D),this.stopTraining_)break}I.dispose()}if(await w.onEpochEnd(k,j),this.stopTraining_)break}return await w.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return M3e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],l=this.makeTrainFunction()(s.concat(i)),c=[];for(const u of l){const d=await u.data();c.push(d[0])}return hr(l),Hd(r[0],e),Hd(r[1],n),Wl(c)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let a=0;a<s.length;++a)r&&!s[a].trainable||n.push({name:s[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=wO().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-wO().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=lA(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>lA(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=lA(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[lA(zC(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>lA(zC(e)));{const e={};for(const n in this.metrics)e[n]=lA(zC(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=UO(e.optimizer_config),r=vA(n);let s;if(typeof e.loss=="string")s=Sg(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>Sg(a));else if(e.loss!=null){s={};for(const a in e.loss)s[a]=Sg(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>Sg(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=Sg(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=See(e);if(u.length===0)throw new Pe(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new Pe(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new Pe("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await SO(this.getNamedWeights(n)),l={modelTopology:this.toJSON(null,!1),format:X3e,generatedBy:`TensorFlow.js tfjs-layers v${rre}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:d,specs:f}=await SO(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=vee([r.data,d])}return this.userDefinedMetadata!=null&&(DQ(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=r.data,l.weightSpecs=r.specs,e.save(l)}setUserDefinedMetadata(e){DQ(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}A1.className="Model";Ot(A1);class lre extends A1{}lre.className="Functional";Ot(lre);class Q2 extends A1{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:q3("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Pe(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Q2||e instanceof A1;let r;if(n){if(r=e,r.outputs.length!==1)throw new Pe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Pe("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Pe("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=JEe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Pe(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Pe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Qne(this.outputs[0])}this.inboundNodes=[],new K3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:d0(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(es(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new A1({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new td("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new td("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new td("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new td("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Pe("Legacy serialization format not supported yet.");i=n}else ce(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,a=n;const l=new e(a);if(!(l instanceof Q2))throw new ur(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(const c of i){const d=vA(c,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new Pe("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Pe("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Q2.className="Sequential";Ot(Q2);let dl=class extends D0{getConfig(){return{}}};class cre extends dl{apply(e,n=1){return DEe(e,n)}}cre.className="elu";Ot(cre);class ure extends dl{apply(e){return w3(e)}}ure.className="selu";Ot(ure);class dre extends dl{apply(e){return wf(e)}}dre.className="relu";Ot(dre);class fre extends dl{apply(e){return He(()=>vm(6,wf(e)))}}fre.className="relu6";Ot(fre);let hre=class extends dl{apply(e){return e}};hre.className="linear";Ot(hre);class Are extends dl{apply(e){return cd(e)}}Are.className="sigmoid";Ot(Are);class pre extends dl{apply(e){return $Ee(e)}}pre.className="hardSigmoid";Ot(pre);class mre extends dl{apply(e){return O0(e)}}mre.className="softplus";Ot(mre);class gre extends dl{apply(e){return LEe(e)}}gre.className="softsign";Ot(gre);class yre extends dl{apply(e){return bm(e)}}yre.className="tanh";Ot(yre);let L$=class extends dl{apply(e,n=-1){return q5(e,n)}};L$.className="softmax";Ot(L$);class xre extends dl{apply(e,n=-1){return A3(e,n)}}xre.className="logSoftmax";Ot(xre);class bre extends dl{apply(e){return He(()=>He(()=>{const n=Math.sqrt(2),r=Ne(.5,Nt(1,d3(un(e,n))));return Ne(e,r)}))}}bre.className="gelu";Ot(bre);class vre extends dl{apply(e){return He(()=>Ne(.5,Ne(e,Nt(1,bm(Ne(yo(un(2,Math.PI)),Nt(e,Ne(.044715,mh(e,3)))))))))}}vre.className="gelu_new";Ot(vre);class wre extends dl{apply(e){return He(()=>Ne(e,bm(O0(e))))}}wre.className="mish";Ot(wre);class Sre extends dl{apply(e,n=1){return He(()=>Ne(cd(Ne(e,n)),e))}}Sre.className="swish";Ot(Sre);function Sm(t){return t.getClassName()}function l_(t,e={}){return Z5(t,uu.getMap().classNameMap,e,"activation")}function Cm(t){if(t==null){const e={};return e.className="linear",e.config={},l_(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},l_(e)}else return t instanceof dl?t:l_(t)}function Y3e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Cre extends D0{}class kre extends Cre{constructor(e){super(),Y3e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return He(()=>{let n=La([1]);return this.hasL1&&(n=Nt(n,An(Ne(this.l1,Ra(e))))),this.hasL2&&(n=Nt(n,An(Ne(this.l2,tS(e))))),Fe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}kre.className="L1L2";Ot(kre);const MQ={l1l2:"L1L2"};function qs(t){return S$(t)}function QQ(t,e={}){return Z5(t,uu.getMap().classNameMap,e,"regularizer")}function Si(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in MQ?MQ[t]:t,config:{}};return QQ(n)}else return t instanceof Cre?t:QQ(t)}class Bre extends xr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Yn(e);let r=wf(e);return this.maxValue!=null&&(r=nc(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Bre.className="ReLU";Ot(Bre);class jre extends xr{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Yn(e);return L5(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}jre.className="LeakyReLU";Ot(jre);class Ere extends xr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=vi(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Si(e.alphaRegularizer),this.alphaConstraint=Za(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Pe(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=es(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Ka({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Yn(e),H5(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Qi(this.alphaInitializer),alphaRegularizer:qs(this.alphaRegularizer),alphaConstraint:Ja(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Ere.className="PReLU";Ot(Ere);let Ire=class extends xr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new ur(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Yn(e);return eb(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Ire.className="ELU";Ot(Ire);class Nre extends xr{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Yn(e);return Ne(r,Mt(lc(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Nre.className="ThresholdedReLU";Ot(Nre);class Tre extends xr{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new L$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return He(()=>{let r=Yn(e);const s=n.mask;if(s!=null){const i=Ne(Kt(Kl(r.shape),Mt(s,r.dtype)),Dn(-1e9));r=Nt(r,i)}return this.axis instanceof Array?this.axis.length>1?rc(Kt(r,P5(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Tre.className="Softmax";Ot(Tre);function p1(t,e,n){if(typeof t=="number")return d0(t,e);if(t.length!==e)throw new Pe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!_Ee(s))throw new Pe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function of(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let a;return n==="same"?a=t:a=t-i+1,Math.floor((a+r-1)/r)}function Jf(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+wm([n-e,0]);else if(r==="same")t=t*e;else throw new Pe(`Unsupport padding mode: ${r}.`);return t}function $$(t,e){return He(()=>(Ca(e),e==="channelsFirst"?jr(t,[0,2,3,1]):t))}function _re(t,e){return He(()=>(Ca(e),e==="channelsFirst"?jr(t,[0,2,3,4,1]):t))}function J3e(t,e,n,r=1,s="valid",i,a=1){return He(()=>{if(i==null&&(i=hf()),Ca(i),t.shape.length!==3)throw new Pe(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Pe(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Pe(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=jr(t,[0,2,1])),s==="causal")throw new ur("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=o3(t,e,r,s==="same"?"same":"valid","NWC",a);return n!=null&&(l=Sf(l,n)),l})}function HQ(t,e,n,r=[1,1],s="valid",i,a,l=null){return He(()=>{if(i==null&&(i=hf()),Ca(i),t.rank!==3&&t.rank!==4)throw new Pe(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Pe(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let c=$$(t,i);if(s==="causal")throw new ur("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=Ste({x:c,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),i==="channelsFirst"&&(c=jr(c,[0,3,1,2])),c})}function Z3e(t,e,n,r=[1,1,1],s="valid",i,a){return He(()=>{if(i==null&&(i=hf()),Ca(i),t.rank!==4&&t.rank!==5)throw new Pe(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Pe(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=_re(t,i);if(s==="causal")throw new ur("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=sL(l,e,r,s==="same"?"same":"valid","NDHWC",a),n!=null&&(l=Sf(l,n)),i==="channelsFirst"&&(l=jr(l,[0,4,1,2,3])),l})}class J3 extends xr{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",J3.verifyArgs(n),this.rank=e,mo(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ur(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=p1(n.kernelSize,e,"kernelSize"),this.strides=p1(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Bu(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ca(this.dataFormat),this.activation=Cm(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=vi(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Za(n.biasConstraint),this.biasRegularizer=Si(n.biasRegularizer),this.activityRegularizer=Si(n.activityRegularizer),this.dilationRate=p1(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Pe(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Pe(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Pe(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Yf("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!C$(e.kernelSize,"number",1,3))throw new Pe(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Sm(this.activation),useBias:this.useBias,biasInitializer:Qi(this.biasInitializer),biasRegularizer:qs(this.biasRegularizer),activityRegularizer:qs(this.activityRegularizer),biasConstraint:Ja(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class ib extends J3{constructor(e,n){super(e,n),this.kernel=null,ib.verifyArgs(n),this.filters=n.filters,mo(this.filters,"filters"),this.kernelInitializer=vi(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Za(n.kernelConstraint),this.kernelRegularizer=Si(n.kernelRegularizer)}build(e){e=es(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return He(()=>{e=Yn(e);let r;const s=this.bias==null?null:this.bias.read(),i=Ene(this.activation.getClassName());if(i!=null&&this.rank===2)r=HQ(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=J3e(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=HQ(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Z3e(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ur("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=es(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const a=of(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(a)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Qi(this.kernelInitializer),kernelRegularizer:qs(this.kernelRegularizer),kernelConstraint:Ja(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Pe(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class iS extends ib{constructor(e){super(2,e),iS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!C$(e.kernelSize,"number",1,2))throw new Pe(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}iS.className="Conv2D";Ot(iS);class aS extends ib{constructor(e){super(3,e),aS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Pe(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}aS.className="Conv3D";Ot(aS);class Rre extends iS{constructor(e){if(super(e),this.inputSpec=[new Ka({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Pe(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=es(e),e.length!==4)throw new Pe("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ka({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return He(()=>{let r=Yn(e);if(r.shape.length!==4)throw new Pe(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);const c=s[a],u=s[l],d=this.kernelSize[0],f=this.kernelSize[1],A=this.strides[0],m=this.strides[1],g=Jf(c,A,d,this.padding),y=Jf(u,m,f,this.padding),x=[i,g,y,this.filters];this.dataFormat!=="channelsLast"&&(r=jr(r,[0,2,3,1]));let v=l3(r,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=jr(v,[0,3,1,2])),this.bias!=null&&(v=Sf(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=es(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[s]=Jf(n[s],c,a,this.padding),n[i]=Jf(n[i],u,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Rre.className="Conv2DTranspose";Ot(Rre);class Ore extends aS{constructor(e){if(super(e),this.inputSpec=[new Ka({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Pe(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=es(e),e.length!==5)throw new Pe("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ka({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return He(()=>{let r=Yn(e);if(r.shape.length!==5)throw new Pe(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);const u=s[c],d=s[a],f=s[l],A=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],x=this.strides[1],v=this.strides[2],w=Jf(u,y,A,this.padding),B=Jf(d,x,m,this.padding),k=Jf(f,v,g,this.padding),j=[i,w,B,k,this.filters];this.dataFormat!=="channelsLast"&&(r=jr(r,[0,2,3,4,1]));let I=iL(r,this.kernel.read(),j,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=jr(I,[0,4,1,2,3])),this.bias!==null&&(I=Sf(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(e){e=es(e);const n=e.slice();let r,s,i,a;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,a=4):(r=4,s=1,i=2,a=3);const l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],f=this.strides[1],A=this.strides[2];return n[r]=this.filters,n[s]=Jf(n[s],d,l,this.padding),n[i]=Jf(n[i],f,c,this.padding),n[a]=Jf(n[a],A,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Ore.className="Conv3DTranspose";Ot(Ore);class Fre extends ib{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Pe("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Pe("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Pe(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=vi(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Si(n.depthwiseRegularizer),this.depthwiseConstraint=Za(n.depthwiseConstraint),this.pointwiseInitializer=vi(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Si(n.pointwiseRegularizer),this.pointwiseConstraint=Za(n.pointwiseConstraint)}build(e){if(e=es(e),e.length<this.rank+2)throw new Pe(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Pe(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let l=0;l<this.rank;++l)i.push(1);i.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Ka({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return He(()=>{e=Yn(e);let r;if(this.rank===1)throw new ur("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=jr(e,[0,2,3,1])),r=S3(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Sf(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=jr(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Qi(this.depthwiseInitializer),e.pointwiseInitializer=Qi(this.pointwiseInitializer),e.depthwiseRegularizer=qs(this.depthwiseRegularizer),e.pointwiseRegularizer=qs(this.pointwiseRegularizer),e.depthwiseConstraint=Ja(this.depthwiseConstraint),e.pointwiseConstraint=Ja(this.pointwiseConstraint),e}}Fre.className="SeparableConv";class Dre extends Fre{constructor(e){super(2,e)}}Dre.className="SeparableConv2D";Ot(Dre);class Z3 extends ib{constructor(e){super(1,e),Z3.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!C$(e.kernelSize,"number",1,1))throw new Pe(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Z3.className="Conv1D";Ot(Z3);class Lre extends xr{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return He(()=>{if(e=Yn(e),this.dataFormat==="channelsLast"){const r=PC(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return PC(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=PC(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return PC(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Lre.className="Cropping2D";Ot(Lre);class $re extends xr{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ca(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,IEe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return He(()=>{let r=Yn(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=jr(r,[0,2,3,1]);const i=this.size[0]*s[2],a=this.size[1]*s[3],l=this.interpolation==="nearest"?Au.resizeNearestNeighbor(r,[i,a]):Au.resizeBilinear(r,[i,a]);return jr(l,[0,3,1,2])}else{const i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?Au.resizeNearestNeighbor(r,[i,a]):Au.resizeBilinear(r,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}$re.className="UpSampling2D";Ot($re);function eIe(t,e,n=[1,1],r="valid",s,i){return He(()=>{s==null&&(s=hf()),Ca(s);let a=$$(t,s);if(t.rank!==4)throw new Pe(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Pe(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=Zx(a,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(a=jr(a,[0,3,1,2])),a})}class Pre extends J3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=vi(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Za(e.depthwiseConstraint),this.depthwiseRegularizer=Si(e.depthwiseRegularizer)}build(e){if(e=es(e),e.length<4)throw new Pe(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Pe(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return He(()=>{e=Yn(e);let r=eIe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Sf(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=es(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=of(n,this.kernelSize[0],this.padding,this.strides[0]),a=of(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Qi(this.depthwiseInitializer),e.depthwiseRegularizer=qs(this.depthwiseRegularizer),e.depthwiseConstraint=Ja(this.depthwiseRegularizer),e}}Pre.className="DepthwiseConv2D";Ot(Pre);function zre(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Pe("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function Ure(t,e,n,r=!1,s,i,a=!1,l=!1){return He(()=>{const c=e.shape.length;if(c<3)throw new Pe(`Input should be at least 3D, but is ${c}D.`);const u=[1,0].concat(ff(2,c));e=jr(e,u),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Mt(Mt(s,"bool"),"float32"),s.rank===c-1&&(s=Lo(s,-1)),s=jr(s,u)),r&&(e=wu(e,0),s!=null&&(s=wu(s,0)));const d=[];let f,A=n;const m=e.shape[0],g=Su(e);let y;s!=null&&(y=Su(s));for(let v=0;v<m;++v){const w=g[v],B=He(()=>t(w,A));if(s==null)f=B[0],A=B[1];else{const k=He(()=>{const j=y[v],I=Kt(zc(j),j),O=Nt(Ne(B[0],j),Ne(A[0],I)),F=A.map((D,T)=>Nt(Ne(B[1][T],j),Ne(D,I)));return{output:O,newStates:F}});f=k.output,A=k.newStates}l&&d.push(f)}let x;return l&&(x=sc(d,1)),[f,x,A]})}class Um extends xr{constructor(e){super(e);let n;if(e.cell==null)throw new Pe("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new U$({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Pe("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ka({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ff(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){$O(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const a of n)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,n){return He(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new ur("Constants support is not implemented in RNN yet.");$O(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ka({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!vr(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new Pe(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new Ka({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){He(()=>{if(!this.stateful)throw new Xf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Pe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>La([r,s])):this.states_=[La([r,this.cell.stateSize])];else if(e==null)hr(this.states_),this.keptStates!=null&&(hr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>La([r,s])):this.states_[0]=La([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Pe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):hr(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,l=[r,a];if(!vr(i.shape,l))throw new Pe(`State ${s} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>Va(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=zre(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let a=[],l=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Ka({shape:u.shape}));l=l.concat(this.stateSpec)}if(s!=null&&(n.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof yh){const u=[e].concat(a),d=this.inputSpec.concat(l),f=this.inputSpec;this.inputSpec=d;const A=super.apply(u,n);return this.inputSpec=f,A}else return super.apply(e,n)}call(e,n){return He(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=Yn(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new Pe(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:s},u=Ure((g,y)=>{const x=this.cell.call([g].concat(y),l);return[x[0],x.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),d=u[0],f=u[1],A=u[2];this.stateful&&this.resetStates(A,s);const m=this.returnSequences?f:d;return this.returnState?[m].concat(A):m})}getInitialState(e){return He(()=>{let n=La(e.shape);return n=An(n,[1,2]),n=eS(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?DO(n,[1,r]):n):this.cell.stateSize>1?[DO(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Um.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=vA(s,r);return new e(Object.assign(n,{cell:i}))}}Um.className="RNN";Ot(Um);class eI extends xr{}class P$ extends eI{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,mo(this.units,"units"),this.activation=Cm(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Si(e.kernelRegularizer),this.recurrentRegularizer=Si(e.recurrentRegularizer),this.biasRegularizer=Si(e.biasRegularizer),this.kernelConstraint=Za(e.kernelConstraint),this.recurrentConstraint=Za(e.recurrentConstraint),this.biasConstraint=Za(e.biasConstraint),this.dropout=D1([1,wm([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=D1([1,wm([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=es(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return He(()=>{if(e=e,e.length!==2)throw new Pe(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=km({ones:()=>zc(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=km({ones:()=>zc(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?i=ch(Ne(e,a),this.kernel.read()):i=ch(e,this.kernel.read()),this.bias!=null&&(i=Sf(i,this.bias.read())),l!=null&&(r=Ne(r,l));let c=Nt(i,ch(r,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sm(this.activation),useBias:this.useBias,kernelInitializer:Qi(this.kernelInitializer),recurrentInitializer:Qi(this.recurrentInitializer),biasInitializer:Qi(this.biasInitializer),kernelRegularizer:qs(this.kernelRegularizer),recurrentRegularizer:qs(this.recurrentRegularizer),biasRegularizer:qs(this.biasRegularizer),activityRegularizer:qs(this.activityRegularizer),kernelConstraint:Ja(this.kernelConstraint),recurrentConstraint:Ja(this.recurrentConstraint),biasConstraint:Ja(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}P$.className="SimpleRNNCell";Ot(P$);class Mre extends Um{constructor(e){e.cell=new P$(e),super(e)}call(e,n){return He(()=>{this.cell.dropoutMask!=null&&(hr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}Mre.className="SimpleRNN";Ot(Mre);class z$ extends eI{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Pe("GRUCell does not support reset_after parameter set to true.");this.units=e.units,mo(this.units,"units"),this.activation=Cm(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cm(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Si(e.kernelRegularizer),this.recurrentRegularizer=Si(e.recurrentRegularizer),this.biasRegularizer=Si(e.biasRegularizer),this.kernelConstraint=Za(e.kernelConstraint),this.recurrentConstraint=Za(e.recurrentConstraint),this.biasConstraint=Za(e.biasConstraint),this.dropout=D1([1,wm([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=D1([1,wm([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=es(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return He(()=>{if(e=e,e.length!==2)throw new Pe(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=km({ones:()=>zc(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=km({ones:()=>zc(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u;0<this.dropout&&this.dropout<1&&(e=Ne(e,i[0]));let d=ch(e,this.kernel.read());this.useBias&&(d=Sf(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Ne(s,a[0]));const f=this.recurrentKernel.read(),[A,m]=Zl(f,[2*this.units,this.units],f.rank-1),g=ch(s,A),[y,x,v]=Zl(d,3,d.rank-1),[w,B]=Zl(g,2,g.rank-1);l=this.recurrentActivation.apply(Nt(y,w)),c=this.recurrentActivation.apply(Nt(x,B));const k=ch(Ne(c,s),m);u=this.activation.apply(Nt(v,k));const j=Nt(Ne(l,s),Ne(Nt(1,ni(l)),u));return[j,j]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sm(this.activation),recurrentActivation:Sm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qi(this.kernelInitializer),recurrentInitializer:Qi(this.recurrentInitializer),biasInitializer:Qi(this.biasInitializer),kernelRegularizer:qs(this.kernelRegularizer),recurrentRegularizer:qs(this.recurrentRegularizer),biasRegularizer:qs(this.biasRegularizer),activityRegularizer:qs(this.activityRegularizer),kernelConstraint:Ja(this.kernelConstraint),recurrentConstraint:Ja(this.recurrentConstraint),biasConstraint:Ja(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}z$.className="GRUCell";Ot(z$);class Qre extends Um{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new z$(e),super(e)}call(e,n){return He(()=>{this.cell.dropoutMask!=null&&(hr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Qre.className="GRU";Ot(Qre);class tI extends eI{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,mo(this.units,"units"),this.activation=Cm(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cm(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Si(e.kernelRegularizer),this.recurrentRegularizer=Si(e.recurrentRegularizer),this.biasRegularizer=Si(e.biasRegularizer),this.kernelConstraint=Za(e.kernelConstraint),this.recurrentConstraint=Za(e.recurrentConstraint),this.biasConstraint=Za(e.biasConstraint),this.dropout=D1([1,wm([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=D1([1,wm([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=es(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;s=new(n=class extends gd{apply(c,u){const d=i.apply([a]),f=new B$().apply([a]),A=i.apply([a*2]);return jQ(jQ(d,f),A)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return He(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Pe(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=km({ones:()=>zc(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=km({ones:()=>zc(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,l=this.recurrentDropoutMask;let c,u,d,f;0<this.dropout&&this.dropout<1&&(e=Ne(e,a[0]));let A=ch(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Ne(s,l[0])),A=Nt(A,ch(s,this.recurrentKernel.read())),this.useBias&&(A=Sf(A,this.bias.read()));const[m,g,y,x]=Zl(A,4,A.rank-1);c=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(g),d=Nt(Ne(u,i),Ne(c,this.activation.apply(y))),f=this.recurrentActivation.apply(x);const v=Ne(f,this.activation.apply(d));return[v,v,d]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sm(this.activation),recurrentActivation:Sm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qi(this.kernelInitializer),recurrentInitializer:Qi(this.recurrentInitializer),biasInitializer:Qi(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:qs(this.kernelRegularizer),recurrentRegularizer:qs(this.recurrentRegularizer),biasRegularizer:qs(this.biasRegularizer),activityRegularizer:qs(this.activityRegularizer),kernelConstraint:Ja(this.kernelConstraint),recurrentConstraint:Ja(this.recurrentConstraint),biasConstraint:Ja(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}tI.className="LSTMCell";Ot(tI);class Hre extends Um{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new tI(e),super(e)}call(e,n){return He(()=>{this.cell.dropoutMask!=null&&(hr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Hre.className="LSTM";Ot(Hre);class U$ extends eI{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return He(()=>{e=e;let r=e.slice(1);const s=[];for(const l of this.cells.slice().reverse())Array.isArray(l.stateSize)?s.push(r.splice(0,l.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let a;for(let l=0;l<this.cells.length;++l){const c=this.cells[l];r=s[l],l===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=c.call(a,n),i.push(a.slice(1))}r=[];for(const l of i.slice().reverse())r.push(...l);return[a[0]].concat(r)})}build(e){$O(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Mg(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(vA(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return PO(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],i[a]])}R$(n)}}U$.className="StackedRNNCells";Ot(U$);function km(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,a=()=>i!=null?i(e(),n):Fne(e(),n),l=()=>nS(a,e,r);return!s||s<=1?Va(l().clone()):Array(s).fill(void 0).map(l).map(u=>Va(u.clone()))}var tIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Wre extends Um{constructor(e){if(e.unroll)throw new ur("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ur("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ka({ndim:5})]}call(e,n){return He(()=>{if(this.cell.dropoutMask!=null&&(hr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Pe("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return He(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],a=La(i);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){He(()=>{if(!this.stateful)throw new Xf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new Pe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>La(i)):this.states_=[La(i)];else if(e==null)hr(this.states_),this.keptStates!=null&&(hr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>La(i)):this.states_[0]=La(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Pe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):hr(this.states_);for(let l=0;l<this.states_.length;++l){const c=e[l],u=i;if(!vr(c.shape,u))throw new Pe(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>Va(l.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:a,dilationRate:l}=this.cell,c=n==="channelsFirst",u=e[c?3:2],d=e[c?4:3],f=of(u,s[0],i,a[0],l[0]),A=of(d,s[1],i,a[1],l[1]);return[...e.slice(0,2),...c?[r,f,A]:[f,A,r]]}}Wre.className="ConvRNN2D";class M$ extends tI{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,mo(this.filters,"filters"),this.kernelSize=p1(r,2,"kernelSize"),this.kernelSize.forEach(c=>mo(c,"kernelSize")),this.strides=p1(s||1,2,"strides"),this.strides.forEach(c=>mo(c,"strides")),this.padding=i||"valid",Bu(this.padding),this.dataFormat=a||"channelsLast",Ca(this.dataFormat),this.dilationRate=p1(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>mo(c,"dilationRate"))}build(e){var n;e=es(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Pe(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const l=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const u=this.biasInitializer,d=this.filters;c=new(n=class extends gd{apply(A,m){const g=u.apply([d]),y=Kl([d]),x=u.apply([d*2]);return k$([g,y,x])}},n.className="CustomInit",n)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return He(()=>{if(e.length!==3)throw new Pe(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=km({ones:()=>zc(s),rate:this.dropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,u=(K,H,Q)=>!H||!H[Q]?K:Ne(H[Q],K);let d=u(s,c,0),f=u(s,c,1),A=u(s,c,2),m=u(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=km({ones:()=>zc(i),rate:this.recurrentDropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let y=u(i,g,0),x=u(i,g,1),v=u(i,g,2),w=u(i,g,3);const B=3,[k,j,I,O]=Zl(this.kernel.read(),l,B),[F,D,T,N]=this.useBias?Zl(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,k,F,this.padding),f=this.inputConv(f,j,D,this.padding),A=this.inputConv(A,I,T,this.padding),m=this.inputConv(m,O,N,this.padding);const[P,z,U,ee]=Zl(this.recurrentKernel.read(),l,B);y=this.recurrentConv(y,P),x=this.recurrentConv(x,z),v=this.recurrentConv(v,U),w=this.recurrentConv(w,ee);const q=this.recurrentActivation.apply(Nt(d,y)),Z=this.recurrentActivation.apply(Nt(f,x)),G=Nt(Ne(Z,a),Ne(q,this.activation.apply(Nt(A,v)))),ne=Ne(this.recurrentActivation.apply(Nt(m,w)),this.activation.apply(G));return[ne,ne,G]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=tIe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=RA(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Sf(i,r,this.dataFormat):i}recurrentConv(e,n){return RA(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}M$.className="ConvLSTM2DCell";Ot(M$);class Vre extends Wre{constructor(e){const n=new M$(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Vre.className="ConvLSTM2D";Ot(Vre);class Q$ extends xr{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return nS(()=>Fne(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}Q$.className="Dropout";Ot(Q$);class qre extends Q${constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}qre.className="SpatialDropout1D";Ot(qre);class Gre extends xr{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,mo(this.units,"units"),this.activation=Cm(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=vi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=vi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Za(e.kernelConstraint),this.biasConstraint=Za(e.biasConstraint),this.kernelRegularizer=Si(e.kernelRegularizer),this.biasRegularizer=Si(e.biasRegularizer),this.activityRegularizer=Si(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=es(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=es(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e),s=Ene(this.activation.getClassName());let i;return s!=null?i=ch(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=ch(r,this.kernel.read()),this.bias!=null&&(i=Sf(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Sm(this.activation),useBias:this.useBias,kernelInitializer:Qi(this.kernelInitializer),biasInitializer:Qi(this.biasInitializer),kernelRegularizer:qs(this.kernelRegularizer),biasRegularizer:qs(this.biasRegularizer),activityRegularizer:qs(this.activityRegularizer),kernelConstraint:Ja(this.kernelConstraint),biasConstraint:Ja(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Gre.className="Dense";Ot(Gre);class Kre extends xr{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=es(e);for(const n of e.slice(1))if(n==null)throw new Pe(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],am(e,1)]}call(e,n){return He(()=>{this.invokeCallHook(e,n);let r=Yn(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=jr(r,s)}return FEe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Kre.className="Flatten";Ot(Kre);class Xre extends xr{constructor(e){super(e),this.supportsMasking=!0,this.activation=Cm(e.activation)}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e);return this.activation.apply(r)})}getConfig(){const e={activation:Sm(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Xre.className="Activation";Ot(Xre);class Yre extends xr{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return He(()=>(e=Yn(e),REe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Yre.className="RepeatVector";Ot(Yre);class Jre extends xr{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,a=null;for(let c=0;c<s.length;++c){const u=s[c];if(this.isUnknown(u))if(a===null)a=c;else throw new Pe("Can only specifiy one unknown dimension.");else i*=u}const l=am(e);if(a!==null){if(i===0||l%i!==0)throw new Pe(r);s[a]=l/i}else if(l!==i)throw new Pe(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Fe(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Jre.className="Reshape";Ot(Jre);class Zre extends xr{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ff(1,e.dims.length+1);if(!vr(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ka({ndim:this.dims.length+1})]}computeOutputShape(e){e=es(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return jr(Yn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Zre.className="Permute";Ot(Zre);class ese extends xr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Yn(e);return L2(l0(r,this.maskValue),-1)}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e),a=L2(l0(r,this.maskValue),-1,!0);return Ne(r,Mt(a,r.dtype))})}}ese.className="Masking";Ot(ese);class tse extends xr{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ws(e.inputLength))}this.inputDim=e.inputDim,mo(this.inputDim,"inputDim"),this.outputDim=e.outputDim,mo(this.outputDim,"outputDim"),this.embeddingsInitializer=vi(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Si(e.embeddingsRegularizer),this.activityRegularizer=Si(e.activityRegularizer),this.embeddingsConstraint=Za(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return He(()=>this.maskZero?(e=Yn(e),l0(e,$r(e))):null)}computeOutputShape(e){if(e=es(e),this.inputLength==null)return[...e,this.outputDim];const n=ws(this.inputLength);if(n.length!==e.length-1)throw new Pe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new Pe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return He(()=>{this.invokeCallHook(e,n);let r=Yn(e);r.dtype!=="int32"&&(r=lh(r,"int32"));const s=One(this.embeddings.read(),Fe(r,[r.size]));return Fe(s,es(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Qi(this.embeddingsInitializer),embeddingsRegularizer:qs(this.embeddingsRegularizer),activityRegularizer:qs(this.activityRegularizer),embeddingsConstraint:Ja(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}tse.className="Embedding";Ot(tse);class $0 extends xr{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ur}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],a=n[s];if(i==null||a==null||i<0||a<0)r.push(null);else if(i===1)r.push(a);else if(a===1)r.push(i);else{if(i!==a)throw new Pe("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[es(e)]),e=e,e.length<2)throw new Pe(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=im(n),n.length>1)throw new Pe(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&im(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return He(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=wm(s);for(let a of e){const l=a.rank;for(let c=0;c<i-l;++c)a=eS(a,1);r.push(a)}return this.mergeFunction(r)}else{let i=!1;for(const c of e){const u=c.rank;if(u==null){const d=c.shape,f=d[0],A=d.slice(1).concat([f]);let m=Fe(c,[f].concat(am(d.slice(1))));m=jr(m,[1,0]),m=Fe(m,A),r.push(m),i=!0}else if(u>1){const d=ff(1,u).concat([0]);r.push(jr(c,d)),i=!0}else r.push(c)}let a=this.mergeFunction(r);const l=a.rank;if(i){if(l==null){const c=a.shape,u=c.length,d=c[u-1],f=[d].concat(c.slice(0,c.length-1));a=Fe(jr(Fe(a,[-1,d]),[1,0]),f)}else if(l>1){const c=[l-1].concat(ff(0,l-1));a=jr(a,c)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=im(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return He(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Pe("`mask` should be an Array");if(!Array.isArray(e))throw new Pe("`inputs` should be an Array");if(n.length!==e.length)throw new Pe(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Lo(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=df(r,n[s]);return r})}}class nse extends $0{constructor(e){super(e)}mergeFunction(e){return He(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Nt(n,e[r]);return n})}}nse.className="Add";Ot(nse);class rse extends $0{constructor(e){super(e)}mergeFunction(e){return He(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ne(n,e[r]);return n})}}rse.className="Multiply";Ot(rse);class sse extends $0{constructor(e){super(e)}mergeFunction(e){return He(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Nt(n,e[r]);return Ne(1/e.length,n)})}}sse.className="Average";Ot(sse);class ise extends $0{constructor(e){super(e)}mergeFunction(e){return He(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=kh(n,e[r]);return n})}}ise.className="Maximum";Ot(ise);class ase extends $0{constructor(e){super(e)}mergeFunction(e){return He(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=vm(n,e[r]);return n})}}ase.className="Minimum";Ot(ase);class ose extends $0{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Pe("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let a=!1;for(const l of r)if(vr(l,i)){a=!0;break}a||r.push(i)}if(r.length>1)throw new Pe("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return He(()=>k$(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Pe("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Pe("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Pe("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Pe(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return He(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const s=[];for(let a=0;a<e.length;++a)n[a]==null?s.push(Mt(zc(e[a]),"bool")):n[a].rank<e[a].rank?s.push(Lo(n[a],-1)):s.push(n[a]);const i=Gi(s,this.axis);return a3(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}ose.className="Concatenate";Ot(ose);function wv(t,e){for(;t<0;)t+=e;return t}function nIe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new ur("batchDot is not implemented for tensors of 4D or higher rank yet");if(ce(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),ce(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new ur("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return He(()=>{let a;if(r>s){a=r-s;const c=[];for(let u=0;u<a;++u)c.push(1);e=Fe(e,e.shape.concat(c))}else if(s>r){a=s-r;const c=[];for(let u=0;u<a;++u)c.push(1);t=Fe(t,t.shape.concat(c))}else a=0;let l;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?l=An(Ne(t,e),i[0]):l=An(Ne(jr(t,[1,0]),e),i[1]);else{const c=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;l=fr(t,e,c,u)}if(a>0){let c;r>s?c=r+s-3:c=r-1;const u=[];for(let d=c;d<c+a;++d)u.push(d);l=ud(l,u)}return l.shape.length===1&&(l=Lo(l,1)),l})}let lse=class extends $0{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){ce(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new ur("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new Pe(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Pe(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>wv(i,e[a].shape.length)):s=[wv(this.axes,n.shape.length),wv(this.axes,r.shape.length)],this.normalize&&(n=i4(n,s[0]),r=i4(r,s[1])),nIe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[wv(this.axes,e.length),wv(this.axes,n.length)],r}computeOutputShape(e){ce(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new ur("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};lse.className="Dot";Ot(lse);class cse extends xr{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e);return nS(()=>Nt(G3(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}cse.className="GaussianNoise";Ot(cse);class use extends xr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return He(()=>{this.invokeCallHook(e,n);const r=Yn(e);return this.rate>0&&this.rate<1?nS(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return Ne(r,G3(r.shape,1,i))},()=>r,n.training||!1):r})}}use.className="GaussianDropout";Ot(use);class dse extends xr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Yn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return He(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return nS(()=>{const i=Yn(e),l=-1.6732632423543772*1.0507009873554805;let c=XA(Pm(r),this.rate);c=lh(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,f=Nt(Ne(i,c),Ne(Nt(c,-1),l));return Nt(Ne(f,u),d)},()=>Yn(e),n.training||!1)}return e})}}dse.className="AlphaDropout";Ot(dse);function H2(t,e,n,r,s,i=.001){let a;if(t.rank===2)a=KD(t,e,n,r,s,i);else if(t.rank===3)a=XD(t,e,n,r,s,i);else if(t.rank===4)a=YD(t,e,n,r,s,i);else throw new ur(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function rIe(t,e,n,r,s=.001){return He(()=>{const i=M5(t,r),a=i.mean,l=i.variance;return[H2(t,a,l,n,e,s),a,l]})}function sIe(t,e,n,r,s=.001){return He(()=>{const i=M5(t,r),a=i.mean,l=i.variance,c=[];for(const g of ff(0,t.rank))r.indexOf(g)!==-1?c.push(1):c.push(t.shape[g]);const u=Fe(a,c),d=Fe(l,c),f=e==null?null:Fe(e,c),A=n==null?null:Fe(n,c);return[H2(t,u,d,A,f,s),a,l]})}function iIe(t,e,n,r,s=.001){return vr(r.slice().sort(),ff(0,t.rank-1))?rIe(t,e,n,r,s):sIe(t,e,n,r,s)}class fse extends xr{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vi(e.betaInitializer||"zeros"),this.gammaInitializer=vi(e.gammaInitializer||"ones"),this.movingMeanInitializer=vi(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=vi(e.movingVarianceInitializer||"ones"),this.betaConstraint=Za(e.betaConstraint),this.gammaConstraint=Za(e.gammaConstraint),this.betaRegularizer=Si(e.betaRegularizer),this.gammaRegularizer=Si(e.gammaRegularizer)}build(e){e=es(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Pe(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ka({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return He(()=>{const r=n.training==null?!1:n.training,s=Yn(e),i=s.shape,a=i.length,l=ff(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);const u=d0(1,a);u[c]=i[c];const d=l.slice();d.sort();const f=!vr(d,ff(0,a).slice(0,a-1)),A=()=>{if(f){const w=Fe(this.movingMean.read(),u),B=Fe(this.movingVariance.read(),u),k=this.center?Fe(this.beta.read(),u):null,j=this.scale?Fe(this.gamma.read(),u):null;return H2(s,w,B,k,j,this.epsilon)}else return H2(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return A();const[m,g,y]=iIe(s,this.gamma.read(),this.beta.read(),l,this.epsilon),x=(w,B,k)=>{He(()=>{const j=1-k,I=w.read(),O=Ne(Kt(I,B),j);w.write(Kt(I,O))})};return x(this.movingMean,g,this.momentum),x(this.movingVariance,y,this.momentum),m})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qi(this.betaInitializer),gammaInitializer:Qi(this.gammaInitializer),movingMeanInitializer:Qi(this.movingMeanInitializer),movingVarianceInitializer:Qi(this.movingVarianceInitializer),betaRegularizer:qs(this.betaRegularizer),gammaRegularizer:qs(this.gammaRegularizer),betaConstraint:Ja(this.betaConstraint),gammaConstraint:Ja(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}fse.className="BatchNormalization";Ot(fse);class hse extends xr{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vi(e.betaInitializer||"zeros"),this.gammaInitializer=vi(e.gammaInitializer||"ones"),this.betaRegularizer=Si(e.betaRegularizer),this.gammaRegularizer=Si(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=es(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==im(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=Yn(e),s=r.shape,i=s.length;return He(()=>{let{mean:l,variance:c}=M5(r,this.axis,!0);const u=d0(1,i);for(const y of this.axis)u[y]=s[y];const d=y=>y!=null&&y.shape.length!==i?Fe(y,u):y;let f=this.scale?d(this.gamma.read()):null,A=this.center?d(this.beta.read()):null;const m=[],g=[];for(let y=0;y<i;++y)this.axis.indexOf(y)!==-1?(m.push(s[y]),g.push(1)):(m.push(1),g.push(s[y]));return l=hu(l,m),c=hu(c,m),f!=null&&(f=hu(f,g)),A!=null&&(A=hu(A,g)),H2(r,l,c,A,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qi(this.betaInitializer),gammaInitializer:Qi(this.gammaInitializer),betaRegularizer:qs(this.betaRegularizer),gammaRegularizer:qs(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}hse.className="LayerNormalization";Ot(hse);function aIe(t,e,n){return He(()=>{if(t.rank!==4)throw new Pe(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Pe("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=hf()),n!=="channelsLast"&&n!=="channelsFirst")throw new Pe(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],YA(t,r)})}class Ase extends xr{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?hf():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Pe(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Pe(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Pe(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ka({ndim:4})]}computeOutputShape(e){e=es(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return He(()=>aIe(Yn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Ase.className="ZeroPadding2D";Ot(Ase);function nI(t,e,n,r,s,i){return He(()=>{Ca(s),Nne(i),Bu(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=hf()),i==null&&(i="max"),t=$$(t,s);let a;const l=r==="same"?"same":"valid";return i==="max"?a=U5(t,e,n,l):a=_5(t,e,n,l),s==="channelsFirst"&&(a=jr(a,[0,3,1,2])),a})}function pse(t,e,n,r,s,i){return He(()=>{Ca(s),Nne(i),Bu(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=hf()),i==null&&(i="max"),t=_re(t,s);let a;const l=r==="same"?"same":"valid";return i==="max"?a=xL(t,e,n,l):a=GD(t,e,n,l),s==="channelsFirst"&&(a=jr(a,[0,4,1,2,3])),a})}class mse extends xr{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Pe(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(mo(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Pe(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);mo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Bu(this.padding),this.inputSpec=[new Ka({ndim:3})]}computeOutputShape(e){e=es(e);const n=of(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return He(()=>{this.invokeCallHook(e,n),e=eS(Yn(e),2);const r=this.poolingFunction(Yn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ud(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class gse extends mse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),nI(e,n,r,s,i,"max")}}gse.className="MaxPooling1D";Ot(gse);class yse extends mse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),nI(e,n,r,s,i,"avg")}}yse.className="AveragePooling1D";Ot(yse);class xse extends xr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Pe(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];mo(this.poolSize,"poolSize"),mo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ca(this.dataFormat),Bu(this.padding),this.inputSpec=[new Ka({ndim:4})]}computeOutputShape(e){e=es(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=of(n,this.poolSize[0],this.padding,this.strides[0]),r=of(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return He(()=>(this.invokeCallHook(e,n),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class bse extends xse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),nI(e,n,r,s,i,"max")}}bse.className="MaxPooling2D";Ot(bse);class vse extends xse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),nI(e,n,r,s,i,"avg")}}vse.className="AveragePooling2D";Ot(vse);class wse extends xr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Pe(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];mo(this.poolSize,"poolSize"),mo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ca(this.dataFormat),Bu(this.padding),this.inputSpec=[new Ka({ndim:5})]}computeOutputShape(e){e=es(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=of(n,this.poolSize[0],this.padding,this.strides[0]),r=of(r,this.poolSize[1],this.padding,this.strides[1]),s=of(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return He(()=>(this.invokeCallHook(e,n),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Sse extends wse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),pse(e,n,r,s,i,"max")}}Sse.className="MaxPooling3D";Ot(Sse);class Cse extends wse{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ca(i),Bu(s),pse(e,n,r,s,i,"avg")}}Cse.className="AveragePooling3D";Ot(Cse);class kse extends xr{constructor(e){super(e),this.inputSpec=[new Ka({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new ur}}class Bse extends kse{constructor(e){super(e||{})}call(e,n){return He(()=>{const r=Yn(e);return Ui(r,1)})}}Bse.className="GlobalAveragePooling1D";Ot(Bse);class jse extends kse{constructor(e){super(e||{})}call(e,n){return He(()=>{const r=Yn(e);return xu(r,1)})}}jse.className="GlobalMaxPooling1D";Ot(jse);class Ese extends xr{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ca(this.dataFormat),this.inputSpec=[new Ka({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new ur}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Ise extends Ese{call(e,n){return He(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?Ui(r,[1,2]):Ui(r,[2,3])})}}Ise.className="GlobalAveragePooling2D";Ot(Ise);class Nse extends Ese{call(e,n){return He(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?xu(r,[1,2]):xu(r,[2,3])})}}Nse.className="GlobalMaxPooling2D";Ot(Nse);class Tse extends xr{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=vA(s,r);delete n.layer;const a={layer:i};return Object.assign(a,n),new e(a)}}class _se extends Tse{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=es(e),e.length<3)throw new Pe(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=es(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return He(()=>(e=Yn(e),Ure((a,l)=>[Yn(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}_se.className="TimeDistributed";Ot(_se);function oIe(t){L0(EEe,"BidirectionalMergeMode",t)}const lIe="concat";class Rse extends Tse{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=vA(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=vA(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?lIe:e.mergeMode,oIe(this.mergeMode),e.weights)throw new ur("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Wl(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=zre(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const a=[],l=[];if(r!=null){const u=r.length;if(u%2>0)throw new Pe("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const d=r.map(f=>new Ka({shape:f.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(s!=null)throw new ur("Support for constants in Bidirectional layers is not implemented yet.");const c=a[0]instanceof yh;for(const u of a)if(u instanceof yh!==c)throw new Pe("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const u=[e].concat(a),d=this.inputSpec.concat(l),f=this.inputSpec;this.inputSpec=d;const A=super.apply(u,n);return this.inputSpec=f,A}else return super.apply(e,n)}call(e,n){return He(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const c=r.slice(0,r.length/2),u=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:c})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=wu(i,1));let l;return this.mergeMode==="concat"?l=k$([s,i]):this.mergeMode==="sum"?l=Nt(s,i):this.mergeMode==="ave"?l=Ne(.5,Nt(s,i)):this.mergeMode==="mul"?l=Ne(s,i):this.mergeMode==null&&(l=[s,i]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Mg(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Mg(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=vA(n.layer);if(delete n.layer,n.numConstants!=null)throw new ur("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}Rse.className="Bidirectional";Ot(Rse);class Ose extends xr{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return He(()=>(e=Yn(e),e.dtype!=="float32"&&(e=lh(e,"float32")),Nt(Ne(e,this.scale),this.offset)))}}Ose.className="Rescaling";Ot(Ose);const{resizeBilinear:cIe,cropAndResize:uIe}=Au;class Fse extends xr{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,a,l,c){return He(()=>{let u,d=!1;const f=n/a,A=r/l,m=(s+n)/a,g=(i+r)/l,y=[f,A,m,g],x=[];e.rank===3?(d=!0,u=sc([e])):u=e;for(let j=0;j<u.shape[0];j++)x.push(y);const v=ld(x,[x.length,4]),w=c0(0,x.length,1,"int32"),k=uIe(u,v,w,[s,i],"nearest");return lh(d?Yn(Su(k)):k,c)})}upsize(e,n,r,s){return He(()=>{const i=cIe(e,[n,r]);return lh(i,s)})}call(e,n){return He(()=>{const r=Yn(e),s=r.dtype,i=r.shape,a=i[i.length-3],l=i[i.length-2];let c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(r,c,u,this.height,this.width,a,l,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=es(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}Fse.className="CenterCrop";Ot(Fse);function dIe(t,e,n,r){let s=Yn(t);if(s.dtype!=="int32"&&(s=lh(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Lo(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Lo(s,-1)),s.rank>2)throw new Pe(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const a=["multiHot","oneHot"].includes(e),l=s;let c;if(typeof r<"u"&&e==="count"?c=ZB(l,r,n,a):c=ZB(l,[],n,a),e!=="tfIdf")return c;if(r)return Ne(c,r);throw new Pe("When outputMode is 'tfIdf', weights must be provided.")}class Dse extends xr{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=es(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return He(()=>{e=Yn(e),e.dtype!=="int32"&&(e=lh(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Pe(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Yn(n.countWeights)}const s=xu(e),i=N1(e),a=lc(this.numTokens,s).bufferSync().get(0),l=XA(i,0).bufferSync().get(0);if(!(a&&l))throw new Pe(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return dIe(e,this.outputMode,this.numTokens,r)})}}Dse.className="CategoryEncoding";Ot(Dse);const fIe=["bilinear","nearest"],WQ=new Set(fIe);class Lse extends xr{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(WQ.has(e.interpolation))this.interpolation=e.interpolation;else throw new Pe(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=es(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return He(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Au.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Au.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...WQ]} are supported`)})}}Lse.className="Resizing";Ot(Lse);class $se{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}$se.className="RandomSeed";class Pse extends xr{constructor(e){super(e),this.randomGenerator=new $se(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}Pse.className="BaseRandomLayer";const hIe=["bilinear","nearest"],VQ=new Set(hIe);class zse extends Pse{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Pe(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Pe(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Pe(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(VQ.has(r))this.interpolation=r;else throw new Pe(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=es(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return He(()=>{const r=Yn(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Pm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Au.resizeBilinear(e,a);case"nearest":return Au.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...VQ]} are supported`)}})}}zse.className="RandomWidth";Ot(zse);const AIe=Ye();AIe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Ec;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Ec||(Ec={}));var qQ;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(qQ||(qQ={}));const H$={};function pIe(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};H$[t]=n}function Use(t){return H$[t]}function mIe(t){delete H$[t]}function Y(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const l=i.inputIndexStart,c=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?l+1:i.inputIndexEnd,u=l<0?e.inputNames.length+l:l;if(i.type==="tensor")return $o(e.inputNames[u],n,r,s);if(i.type==="tensors"){const A=e.inputs.slice(l,c);return e.inputNames.slice(l,c).filter((g,y)=>{var x;return((x=A[y])===null||x===void 0?void 0:x.op)!=="NoOp"}).map(g=>$o(g,n,r,s))}const d=$o(e.inputNames[u],n,r,s),f=d.dataSync();return i.type==="number"?f[0]:yu(d.shape,f)}const a=e.attrParams[t];return a&&a.value}function $o(t,e,n,r){const[s,i]=Ic(t,n);if(r!=null){const l=r.getHashTableHandleByName(s);if(l!=null)return l}const a=n.currentContextIds.find(l=>!!e[u4(s,l)]);return a!==void 0?e[u4(s,a)][i]:void 0}function GQ(t,e,n){return e[u4(t,n.currentContextId)]}function cA(t,e){const[n,r,s]=Ic(t,e);return[u4(n,e&&e.currentContextId),r,s]}function u4(t,e){return e?`${t}-${e}`:t}function Ic(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],a=r.length===3?r[1]:void 0,l=Number(r[r.length-1]);s=[i,l,a]}return n&&e.parseNodeNameCache.set(t,s),s}function gB(t,e,n){let r=Y("pad",t,e,n);if(r==="explicit"){r=Y("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function uA(t){return t.kept?t:ah(t)}const gIe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],yIe=Object.freeze(Object.defineProperty({__proto__:null,json:gIe},Symbol.toStringTag,{value:"Module"}));const xIe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bIe=Object.freeze(Object.defineProperty({__proto__:null,json:xIe},Symbol.toStringTag,{value:"Module"}));const vIe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],wIe=Object.freeze(Object.defineProperty({__proto__:null,json:vIe},Symbol.toStringTag,{value:"Module"}));const SIe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],CIe=Object.freeze(Object.defineProperty({__proto__:null,json:SIe},Symbol.toStringTag,{value:"Module"}));const kIe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],BIe=Object.freeze(Object.defineProperty({__proto__:null,json:kIe},Symbol.toStringTag,{value:"Module"}));const jIe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],EIe=Object.freeze(Object.defineProperty({__proto__:null,json:jIe},Symbol.toStringTag,{value:"Module"}));const IIe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],NIe=Object.freeze(Object.defineProperty({__proto__:null,json:IIe},Symbol.toStringTag,{value:"Module"}));const TIe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],_Ie=Object.freeze(Object.defineProperty({__proto__:null,json:TIe},Symbol.toStringTag,{value:"Module"}));const RIe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],OIe=Object.freeze(Object.defineProperty({__proto__:null,json:RIe},Symbol.toStringTag,{value:"Module"}));const FIe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],DIe=Object.freeze(Object.defineProperty({__proto__:null,json:FIe},Symbol.toStringTag,{value:"Module"}));const LIe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],$Ie=Object.freeze(Object.defineProperty({__proto__:null,json:LIe},Symbol.toStringTag,{value:"Module"}));const PIe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],zIe=Object.freeze(Object.defineProperty({__proto__:null,json:PIe},Symbol.toStringTag,{value:"Module"}));const UIe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],MIe=Object.freeze(Object.defineProperty({__proto__:null,json:UIe},Symbol.toStringTag,{value:"Module"}));const QIe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],HIe=Object.freeze(Object.defineProperty({__proto__:null,json:QIe},Symbol.toStringTag,{value:"Module"}));const WIe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],VIe=Object.freeze(Object.defineProperty({__proto__:null,json:WIe},Symbol.toStringTag,{value:"Module"}));const qIe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],GIe=Object.freeze(Object.defineProperty({__proto__:null,json:qIe},Symbol.toStringTag,{value:"Module"}));const KIe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],XIe=Object.freeze(Object.defineProperty({__proto__:null,json:KIe},Symbol.toStringTag,{value:"Module"}));const YIe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],JIe=Object.freeze(Object.defineProperty({__proto__:null,json:YIe},Symbol.toStringTag,{value:"Module"}));const ZIe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],eNe=Object.freeze(Object.defineProperty({__proto__:null,json:ZIe},Symbol.toStringTag,{value:"Module"}));class KQ{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[yIe,bIe,wIe,CIe,BIe,EIe,NIe,_Ie,OIe,DIe,$Ie,zIe,MIe,HIe,VIe,GIe,XIe,JIe,eNe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],a=[],l=r.reduce((y,x)=>(y[x.name]=this.mapNode(x),x.op.startsWith("Placeholder")?s.push(y[x.name]):x.op==="Const"?i.push(y[x.name]):(x.input==null||x.input.length===0)&&a.push(y[x.name]),y),{});let c=[];const u=[];let d={},f={};n!=null&&(d=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const A=Object.keys(l);A.forEach(y=>{const x=l[y];x.inputNames.forEach((v,w)=>{const[B,,k]=cA(v),j=l[B];if(j.outputs!=null){const I=j.outputs.indexOf(k);if(I!==-1){const O=`${B}:${I}`;x.inputNames[w]=O}}x.inputs.push(j),j.children.push(x)})}),Object.keys(f).length===0?A.forEach(y=>{const x=l[y];x.children.length===0&&u.push(x)}):Object.keys(f).forEach(y=>{const[x]=cA(y),v=l[x];v!=null&&(v.signatureKey=f[y],u.push(v))}),Object.keys(d).length>0?Object.keys(d).forEach(y=>{const[x]=cA(y),v=l[x];v&&(v.signatureKey=d[y],c.push(v))}):c=s;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((y,x)=>(y[x.signature.name]=this.mapFunction(x),y),{}));const g={nodes:l,inputs:c,outputs:u,weights:i,placeholders:s,signature:n,functions:m};return a.length>0&&(g.initNodes=a),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=Use(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const a=i.type;let l;switch(i.type){case"string":l=WO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=WO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":l=JO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=JO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":l=qO(e.attr,i.tfName,i.defaultValue||0),l===void 0&&i.tfDeprecatedName&&(l=qO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":l=YO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=YO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":l=VO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=VO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":l=eF(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=eF(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":l=XO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=XO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":l=ZO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=ZO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":l=GO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=GO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":l=KO(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=KO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":l=XQ(e.attr,i.tfName,i.defaultValue),l===void 0&&i.tfDeprecatedName&&(l=XQ(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:l,type:a},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((f,A)=>(f[A.name]=this.mapNode(A),A.op==="Const"&&s.push(f[A.name]),f),{}));const a=[],l=[];e.signature.inputArg.forEach(f=>{const[A]=cA(f.name),m={name:A,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:W$(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,a.push(m),i[A]=m}),Object.keys(i).forEach(f=>{const A=i[f];A.inputNames.forEach((m,g)=>{const[y,,x]=cA(m),v=i[y];if(v.outputs!=null){const w=v.outputs.indexOf(x);if(w!==-1){const B=`${y}:${w}`;A.inputNames[g]=B}}A.inputs.push(v),v.children.push(A)})});const u=e.ret;e.signature.outputArg.forEach(f=>{const[A,m]=cA(u[f.name]),g=i[A];g!=null&&(g.defaultOutput=m,l.push(g))});const d=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:l,weights:s,placeholders:r,signature:d}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function tNe(t){const e=Ye().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Mse(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):tNe(t);return e?n:n.toLowerCase()}function WO(t,e,n,r=!1){const s=t[e];return s!=null?Mse(s.s,r):n}function VO(t,e,n){const r=t[e];return r?r.b:n}function qO(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function W$(t){switch(typeof t=="string"&&(t=Ec[t]),t){case Ec.DT_FLOAT:case Ec.DT_HALF:return"float32";case Ec.DT_INT32:case Ec.DT_INT64:case Ec.DT_INT8:case Ec.DT_UINT8:return"int32";case Ec.DT_BOOL:return"bool";case Ec.DT_DOUBLE:return"float32";case Ec.DT_STRING:return"string";case Ec.DT_COMPLEX64:case Ec.DT_COMPLEX128:return"complex64";default:return null}}function XQ(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function GO(t,e,n){const r=t[e];return r&&r.type?W$(r.type):n}function KO(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>W$(s)):n}function Qse(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function XO(t,e,n){const r=t[e];return r&&r.shape?Qse(r.shape):n}function YO(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function JO(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>Mse(i,r)):n}function ZO(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>Qse(s)):n}function eF(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class nNe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return $o(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return $o(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return qO(this.node.rawAttrs,e,n);if(r.s!=null)return WO(this.node.rawAttrs,e,n);if(r.b!=null)return VO(this.node.rawAttrs,e,n);if(r.shape!=null)return XO(this.node.rawAttrs,e,n);if(r.type!=null)return GO(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return YO(this.node.rawAttrs,e,n);if(r.list.s!=null)return JO(this.node.rawAttrs,e,n);if(r.list.shape!=null)return ZO(this.node.rawAttrs,e,n);if(r.list.b!=null)return eF(this.node.rawAttrs,e,n);if(r.list.type!=null)return KO(this.node.rawAttrs,e,n)}return n}}const Go=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:TD,abs:Ra,acos:PD,acosh:zD,add:Nt,addN:Tee,all:a3,any:L2,argMax:i0,argMin:UD,asin:MD,asinh:QD,atan:HD,atan2:WD,atanh:VD,avgPool:_5,avgPool3d:GD,basicLSTMCell:_ee,batchNorm:Jx,batchNorm2d:KD,batchNorm3d:XD,batchNorm4d:YD,batchToSpaceND:R5,bincount:JD,bitwiseAnd:Ree,booleanMaskAsync:gte,broadcastArgs:Oee,broadcastTo:Ug,buffer:cr,cast:Mt,ceil:ZD,clipByValue:nc,clone:ah,complex:_A,concat:Gi,concat1d:eL,concat2d:O5,concat3d:tL,concat4d:nL,conv1d:o3,conv2d:RA,conv2dTranspose:l3,conv3d:sL,conv3dTranspose:iL,cos:F5,cosh:c3,cosineWindow:R3,cumprod:z2,cumsum:u3,denseBincount:ZB,depthToSpace:aL,depthwiseConv2d:Zx,diag:Dee,dilation2d:oL,div:un,divNoNan:lL,dot:cL,dropout:LL,einsum:wg,elu:eb,enclosingPowerOfTwo:$L,ensureShape:Lee,equal:fd,erf:d3,euclideanNorm:dL,exp:rc,expandDims:Lo,expm1:fL,eye:f3,fft:G5,fill:R0,floor:nb,floorDiv:i3,fused:Bte,gather:rb,gatherND:vte,greater:lc,greaterEqual:XA,ifft:F1,imag:D5,image:Au,inTopKAsync:wte,irfft:j3,isFinite:hL,isInf:AL,isNaN:pL,leakyRelu:L5,less:T1,lessEqual:$m,linalg:UL,linspace:zee,localResponseNormalization:mL,log:Pc,log1p:$5,logSigmoid:gL,logSoftmax:A3,logSumExp:P5,logicalAnd:df,logicalNot:z5,logicalOr:p3,logicalXor:yL,losses:Rte,lowerBound:Mee,matMul:fr,max:xu,maxPool:U5,maxPool3d:xL,maxPoolWithArgmax:Qee,maximum:kh,mean:Ui,meshgrid:Hee,min:N1,minimum:vm,mirrorPad:bL,mod:vL,moments:M5,movingAverage:yte,mul:Ne,multiRNNCell:Wee,multinomial:Vee,neg:ni,norm:tb,notEqual:l0,oneHot:_1,ones:Kl,onesLike:zc,op:Ie,outerProduct:qee,pad:YA,pad1d:Gee,pad2d:Kee,pad3d:Xee,pad4d:Yee,pool:wL,pow:mh,prelu:H5,print:$D,prod:SL,raggedGather:Jee,raggedRange:Zee,raggedTensorToTensor:ete,rand:tte,randomGamma:ste,randomNormal:y3,randomStandardNormal:ite,randomUniform:Pm,randomUniformInt:ate,range:c0,real:R1,reciprocal:jL,relu:wf,relu6:x3,reshape:Fe,reverse:wu,reverse1d:ote,reverse2d:lte,reverse3d:cte,reverse4d:ute,rfft:K5,round:b3,rsqrt:v3,scalar:Dn,scatterND:xte,searchSorted:m3,selu:w3,separableConv2d:S3,setdiff1dAsync:dte,sigmoid:cd,sign:EL,signal:_te,sin:C3,sinh:k3,slice:Gn,slice1d:W5,slice2d:B3,slice3d:V5,slice4d:O1,softmax:q5,softplus:O0,spaceToBatchND:Q5,sparse:Ote,sparseToDense:bte,spectral:Tte,split:Zl,sqrt:yo,square:Rs,squaredDifference:E3,squeeze:ud,stack:sc,step:F0,stridedSlice:IL,string:Fte,sub:Kt,sum:An,tan:NL,tanh:bm,tensor:ld,tensor1d:qa,tensor2d:sm,tensor3d:TL,tensor4d:fte,tensor5d:hte,tensor6d:Ate,tensorScatterUpdate:pte,tile:hu,topk:RL,transpose:jr,truncatedNormal:N3,unique:OL,unsortedSegmentSum:T3,unstack:Su,upperBound:mte,variable:FL,where:Mo,whereAsync:DL,zeros:La,zerosLike:$r},Symbol.toStringTag,{value:"Module"}));const rNe=(t,e,n,r=Go)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Y("a",t,e,n),Y("b",t,e,n))];case"AddN":return[r.addN(Y("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(Y("a",t,e,n),Y("b",t,e,n))];case"Mul":return[r.mul(Y("a",t,e,n),Y("b",t,e,n))];case"RealDiv":case"Div":return[r.div(Y("a",t,e,n),Y("b",t,e,n))];case"DivNoNan":return[r.divNoNan(Y("a",t,e,n),Y("b",t,e,n))];case"FloorDiv":return[r.floorDiv(Y("a",t,e,n),Y("b",t,e,n))];case"Sub":return[r.sub(Y("a",t,e,n),Y("b",t,e,n))];case"Minimum":return[r.minimum(Y("a",t,e,n),Y("b",t,e,n))];case"Maximum":return[r.maximum(Y("a",t,e,n),Y("b",t,e,n))];case"Pow":return[r.pow(Y("a",t,e,n),Y("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(Y("a",t,e,n),Y("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const sNe=(t,e,n,r=Go)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(Y("x",t,e,n))];case"Acos":return[r.acos(Y("x",t,e,n))];case"Acosh":return[r.acosh(Y("x",t,e,n))];case"Asin":return[r.asin(Y("x",t,e,n))];case"Asinh":return[r.asinh(Y("x",t,e,n))];case"Atan":return[r.atan(Y("x",t,e,n))];case"Atan2":return[r.atan2(Y("x",t,e,n),Y("y",t,e,n))];case"Atanh":return[r.atanh(Y("x",t,e,n))];case"Ceil":return[r.ceil(Y("x",t,e,n))];case"Complex":return[r.complex(Y("real",t,e,n),Y("imag",t,e,n))];case"Cos":return[r.cos(Y("x",t,e,n))];case"Cosh":return[r.cosh(Y("x",t,e,n))];case"Elu":return[r.elu(Y("x",t,e,n))];case"Erf":return[r.erf(Y("x",t,e,n))];case"Exp":return[r.exp(Y("x",t,e,n))];case"Expm1":return[r.expm1(Y("x",t,e,n))];case"Floor":return[r.floor(Y("x",t,e,n))];case"Log":return[r.log(Y("x",t,e,n))];case"Log1p":return[r.log1p(Y("x",t,e,n))];case"Imag":return[r.imag(Y("x",t,e,n))];case"Neg":return[r.neg(Y("x",t,e,n))];case"Reciprocal":return[r.reciprocal(Y("x",t,e,n))];case"Real":return[r.real(Y("x",t,e,n))];case"Relu":return[r.relu(Y("x",t,e,n))];case"Round":return[r.round(Y("x",t,e,n))];case"Selu":return[r.selu(Y("x",t,e,n))];case"Sigmoid":return[r.sigmoid(Y("x",t,e,n))];case"Sin":return[r.sin(Y("x",t,e,n))];case"Sign":return[r.sign(Y("x",t,e,n))];case"Sinh":return[r.sinh(Y("x",t,e,n))];case"Softplus":return[r.softplus(Y("x",t,e,n))];case"Sqrt":return[r.sqrt(Y("x",t,e,n))];case"Square":return[r.square(Y("x",t,e,n))];case"Tanh":return[r.tanh(Y("x",t,e,n))];case"Tan":return[r.tan(Y("x",t,e,n))];case"ClipByValue":return[r.clipByValue(Y("x",t,e,n),Y("clipValueMin",t,e,n),Y("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(Y("x",t,e,n))];case"Rsqrt":return[r.rsqrt($o(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(Y("x",t,e,n),Y("alpha",t,e,n))];case"Prelu":return[r.prelu(Y("x",t,e,n),Y("alpha",t,e,n))];case"IsNan":return[r.isNaN($o(t.inputNames[0],e,n))];case"IsInf":return[r.isInf($o(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite($o(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function Yu(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){ce(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];ce(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function YQ(t){return!(typeof t=="number"||t.some(e=>e<0))}function Sv(t,e,n){let r=tF(t,n);const s=!YQ(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=tF(i.shape,r)}),!YQ(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function tF(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}class iNe{constructor(e,n,r,s,i,a,l){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=l,this.tensors=[],this.closed_=!1,this.idTensor=Dn(0),Va(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Yu(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Va(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return ld([],[0].concat(this.elementShape));const r=this.readMany(e);return Yu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),sc(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ld([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Yu(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Gi(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Su(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(c=>(r+=c,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,a=[];He(()=>{n=Fe(n,[1,r,i]);for(let c=0;c<e.length;++c){const d=[0,c===0?0:s[c-1],0],f=[1,e[c],i];a[c]=Fe(Gn(n,d,f),this.elementShape)}return a});const l=[];for(let c=0;c<e.length;c++)l[c]=c;this.writeMany(l,a)}}class f0{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Yu(n,i.shape,"TensorList shape mismatch: "),Va(i)}),this.idTensor=Dn(0),this.maxNumElements=s,Va(this.idTensor)}copy(){return new f0([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Yu(e,this.elementShape,"TensorList shape mismatch: ");const s=Sv(this.elementShape,this.tensors,e);return He(()=>{const i=this.tensors.map(a=>Fe(a,s));return sc(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Sv(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Yu(s.shape,e,"TensorList shape mismatch: "),Fe(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Yu(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Va(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new f0([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Yu(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=Sv(this.elementShape,this.tensors,n);return Fe(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Yu(this.elementShape,n.shape,"TensorList shape mismatch: "),Va(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Yu(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=Sv(this.elementShape,this.tensors,r);return e.length===0?ld([],[0].concat(s)):He(()=>{const i=e.map(a=>Fe(this.tensors[a],s));return sc(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Yu(this.elementShape,n,"TensorList shape mismatch: ");const r=Sv(this.elementShape,this.tensors,n);return this.size()===0?ld([],[0].concat(r)):He(()=>{const s=this.tensors.map(i=>Fe(i,r));return Gi(s,0)})}}function aNe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Yu(s,e,"TensorList shape mismatch: ");const i=Su(t);return new f0(i,e,r)}function oNe(t,e,n,r){return new f0([],t,e,r)}function lNe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new f0([],n,t.dtype,r),a=Su(t,0);return e.forEach((l,c)=>{i.setItem(l,a[c])}),i}function cNe(t,e,n){let r=0;const s=e.map(d=>(r+=d,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),a=tF(i,n),l=r===0?0:t.size/r,c=He(()=>{const d=[];t=Fe(t,[1,r,l]);for(let f=0;f<e.length;++f){const m=[0,f===0?0:s[f-1],0],g=[1,e[f],l];d[f]=Fe(Gn(t,m,g),a)}return t.dispose(),d}),u=new f0([],n,t.dtype,e.length);for(let d=0;d<c.length;d++)u.setItem(d,c[d]);return u}const uNe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=Y("thenBranch",t,e,n),s=Y("elseBranch",t,e,n),i=Y("cond",t,e,n),a=Y("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Y("body",t,e,n),s=Y("cond",t,e,n),i=Y("args",t,e,n),a=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),l=i.map(d=>d.id);let c=await a[0].data();a.forEach(d=>{!d.kept&&l.indexOf(d.id)===-1&&d.dispose()});let u=i;for(;c[0];){const d=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const f=u.map(m=>m.id);d.forEach(m=>{!m.kept&&l.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});const A=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await A[0].data(),A.forEach(m=>{!m.kept&&l.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return u}case"LoopCond":{const r=Y("pred",t,e,n);return[uA(r)]}case"Switch":{const r=Y("pred",t,e,n);let s=Y("data",t,e,n);return s.kept||(s=uA(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>$o(s,e,n)!==void 0);if(r){const s=$o(r,e,n);return[uA(s)]}return}case"Enter":{const r=Y("frameName",t,e,n),s=Y("tensor",t,e,n);return n.enterFrame(r),[uA(s)]}case"Exit":{const r=Y("tensor",t,e,n);return n.exitFrame(),[uA(r)]}case"NextIteration":{const r=Y("tensor",t,e,n);return n.nextIteration(),[uA(r)]}case"TensorArrayV3":{const r=Y("size",t,e,n),s=Y("dtype",t,e,n),i=Y("elementShape",t,e,n),a=Y("dynamicSize",t,e,n),l=Y("clearAfterRead",t,e,n),c=Y("identicalElementShapes",t,e,n),u=Y("name",t,e,n),d=new iNe(u,s,r,i,c,a,l);return n.addTensorArray(d),[d.idTensor,Dn(1)]}case"TensorArrayWriteV3":{const r=Y("tensorArrayId",t,e,n),s=Y("index",t,e,n),i=Y("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(s,i),[a.idTensor]}case"TensorArrayReadV3":{const r=Y("tensorArrayId",t,e,n),s=Y("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=Y("tensorArrayId",t,e,n),s=Y("indices",t,e,n),i=Y("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=Y("tensorArrayId",t,e,n),s=Y("indices",t,e,n),i=Y("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(s,i),[a.idTensor]}case"TensorArrayConcatV3":{const r=Y("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=Y("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=Y("tensorArrayId",t,e,n),s=Y("tensor",t,e,n),i=Y("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(i,s),[a.idTensor]}case"TensorArraySizeV3":{const r=Y("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[Dn(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=Y("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=Y("tensorListId",t,e,n),s=Y("index",t,e,n),i=Y("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(s,i),[a.idTensor]}case"TensorListGetItem":{const r=Y("tensorListId",t,e,n),s=Y("index",t,e,n),i=Y("elementShape",t,e,n),a=Y("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Y("indices",t,e,n),s=Y("tensor",t,e,n),i=Y("elementShape",t,e,n),a=Y("numElements",t,e,n),l=lNe(s,r,i,a);return n.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Y("elementShape",t,e,n),s=Y("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const a=Y(i,t,e,n),l=t.op==="TensorListReserve"?-1:a,c=oNe(r,s,a,l);return n.addTensorList(c),[c.idTensor]}case"TensorListGather":{const r=Y("tensorListId",t,e,n),s=Y("indices",t,e,n),i=Y("elementShape",t,e,n),a=Y("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,a,i)]}case"TensorListStack":{const r=Y("tensorListId",t,e,n),s=Y("elementShape",t,e,n),i=Y("elementDType",t,e,n),a=Y("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,a)]}case"TensorListFromTensor":{const r=Y("tensor",t,e,n),s=Y("elementShape",t,e,n),i=Y("elementDType",t,e,n),a=aNe(r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=Y("tensorListId",t,e,n),s=n.getTensorList(r.id),i=Y("dtype",t,e,n),a=Y("elementShape",t,e,n);return[s.concat(i,a)]}case"TensorListPushBack":{const r=Y("tensorListId",t,e,n),s=Y("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=Y("tensorListId",t,e,n),s=Y("elementShape",t,e,n),i=Y("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=Y("tensor",t,e,n),s=Y("elementShape",t,e,n),i=Y("lengths",t,e,n),a=cNe(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=Y("tensorListId",t,e,n),s=n.getTensorList(r.id);return[Dn(s.size(),"int32")]}case"TensorListResize":{const r=Y("tensorListId",t,e,n),s=Y("size",t,e,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};function JQ(t,e,n){const[r,s]=Y("fusedOps",t,e,n),i=r==="biasadd",a=!i,l=s==="prelu",c=r==="fusedbatchnorm",u=Y("numArgs",t,e,n);if(i){if(l&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const d=Y("strides",t,e,n),f=gB(t,e,n),A=Y("dataFormat",t,e,n).toUpperCase(),m=Y("dilations",t,e,n);let[g,y]=Y("args",t,e,n);a&&(y=g,g=void 0);const x=Y("leakyreluAlpha",t,e,n);return{stride:d,pad:f,dataFormat:A,dilations:m,biasArg:g,preluArg:y,activationFunc:s,leakyreluAlpha:x}}const dNe=(t,e,n,r=Go)=>{switch(t.op){case"Conv1D":{const s=Y("stride",t,e,n),i=Y("pad",t,e,n),a=Y("dataFormat",t,e,n).toUpperCase(),l=Y("dilation",t,e,n);return[r.conv1d(Y("x",t,e,n),Y("filter",t,e,n),s,i,a,l)]}case"Conv2D":{const s=Y("strides",t,e,n),i=gB(t,e,n),a=Y("dataFormat",t,e,n).toUpperCase(),l=Y("dilations",t,e,n);return[r.conv2d(Y("x",t,e,n),Y("filter",t,e,n),[s[1],s[2]],i,a,[l[1],l[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:a,dilations:l,biasArg:c,preluArg:u,activationFunc:d,leakyreluAlpha:f}=JQ(t,e,n);return[r.fused.conv2d({x:Y("x",t,e,n),filter:Y("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[l[1],l[2]],bias:c,activation:d,preluActivationWeights:u,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:a,dilations:l,biasArg:c,preluArg:u,activationFunc:d,leakyreluAlpha:f}=JQ(t,e,n);return[r.fused.depthwiseConv2d({x:Y("x",t,e,n),filter:Y("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[l[1],l[2]],bias:c,activation:d,preluActivationWeights:u,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=Y("outputShape",t,e,n),i=Y("strides",t,e,n),a=gB(t,e,n);return[r.conv2dTranspose(Y("x",t,e,n),Y("filter",t,e,n),s,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=Y("strides",t,e,n),i=gB(t,e,n),a=Y("dilations",t,e,n),l=Y("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(Y("input",t,e,n),Y("filter",t,e,n),[s[1],s[2]],i,l,[a[1],a[2]])]}case"Conv3D":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("dataFormat",t,e,n).toUpperCase(),l=Y("dilations",t,e,n);return[r.conv3d(Y("x",t,e,n),Y("filter",t,e,n),[s[1],s[2],s[3]],i,a,[l[1],l[2],l[3]])]}case"AvgPool":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("kernelSize",t,e,n);return[r.avgPool(Y("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("kernelSize",t,e,n);return[r.maxPool(Y("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("kernelSize",t,e,n),l=Y("includeBatchInIndex",t,e,n),{result:c,indexes:u}=r.maxPoolWithArgmax(Y("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i,l);return[c,u]}case"AvgPool3D":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("kernelSize",t,e,n);return[r.avgPool3d(Y("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("kernelSize",t,e,n);return[r.maxPool3d(Y("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=Y("strides",t,e,n),i=Y("pad",t,e,n),a=Y("dilations",t,e,n),l=s[1],c=s[2],u=a[1],d=a[2];return[r.dilation2d(Y("x",t,e,n),Y("filter",t,e,n),[l,c],i,[u,d],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const fNe=(t,e,n,r=Go)=>{switch(t.op){case"Fill":{const s=Y("shape",t,e,n),i=Y("dtype",t,e,n),a=Y("value",t,e,n);return[r.fill(s,a,i)]}case"LinSpace":{const s=Y("start",t,e,n),i=Y("stop",t,e,n),a=Y("num",t,e,n);return[r.linspace(s,i,a)]}case"Multinomial":{const s=Y("logits",t,e,n),i=Y("numSamples",t,e,n),a=Y("seed",t,e,n);return[r.multinomial(s,i,a)]}case"OneHot":{const s=Y("indices",t,e,n),i=Y("depth",t,e,n),a=Y("onValue",t,e,n),l=Y("offValue",t,e,n),c=Y("dtype",t,e,n);return[r.oneHot(s,i,a,l,c)]}case"Ones":return[r.ones(Y("shape",t,e,n),Y("dtype",t,e,n))];case"OnesLike":return[r.onesLike(Y("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(Y("shape",t,e,n),Y("dtype",t,e,n),Y("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(Y("shape",t,e,n),Y("minval",t,e,n),Y("maxval",t,e,n),Y("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(Y("shape",t,e,n),Y("minval",t,e,n),Y("maxval",t,e,n),Y("seed",t,e,n))];case"Range":{const s=Y("start",t,e,n),i=Y("stop",t,e,n),a=Y("step",t,e,n);return[r.range(s,i,a,Y("dtype",t,e,n))]}case"TruncatedNormal":{const s=Y("shape",t,e,n),i=Y("mean",t,e,n),a=Y("stdDev",t,e,n),l=Y("seed",t,e,n);return[r.truncatedNormal(s,i,a,Y("dtype",t,e,n),l)]}case"Zeros":return[r.zeros(Y("shape",t,e,n),Y("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(Y("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function c_(t,e,n){const r=Y("boxes",t,e,n),s=Y("scores",t,e,n),i=Y("maxOutputSize",t,e,n),a=Y("iouThreshold",t,e,n),l=Y("scoreThreshold",t,e,n),c=Y("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}}const hNe=async(t,e,n,r,s=Go)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u,softNmsSigma:d}=c_(t,e,n),f=await s.image.nonMaxSuppressionWithScoreAsync(i,a,l,c,u,d);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=c_(t,e,n),d=Y("padToMaxOutputSize",t,e,n),f=await s.image.nonMaxSuppressionPaddedAsync(i,a,l,c,u,d);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=c_(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,a,l,c,u)]}case"Where":{const i=s.cast(Y("condition",t,e,n),"bool"),a=[await s.whereAsync(i)];return i.dispose(),a}case"ListDiff":return s.setdiff1dAsync(Y("x",t,e,n),Y("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};const ANe=(t,e,n,r=Go)=>{switch(t.op){case"LowerBound":{const s=Y("sortedSequence",t,e,n),i=Y("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=Y("x",t,e,n),i=Y("k",t,e,n),a=Y("sorted",t,e,n),l=r.topk(s,i,a);return[l.values,l.indices]}case"UpperBound":{const s=Y("sortedSequence",t,e,n),i=Y("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=Y("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=Y("x",t,e,n),i=Y("axis",t,e,n),a=r.unique(s,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const pNe=(t,e,n,r=Go)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=Y("default",t,e,n);return[$o(t.name,e,n)||s];case"Placeholder":return[$o(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const d=Y("x",t,e,n);return[uA(d)]}case"IdentityN":return Y("x",t,e,n).map(d=>uA(d));case"Snapshot":const i=Y("x",t,e,n);return[uA(i)];case"Shape":return[r.tensor1d(Y("x",t,e,n).shape,"int32")];case"ShapeN":return Y("x",t,e,n).map(d=>r.tensor1d(d.shape));case"Size":return[r.scalar(Y("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(Y("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=Y("x",t,e,n),l=Y("data",t,e,n),c=Y("message",t,e,n),u=Y("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let d=0;d<l.length;d++)console.log(Array.prototype.slice.call(l[d].dataSync()).slice(0,u));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}};class mNe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Dn(0),this.tensorMap=new Map,Va(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Dn(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),He(()=>{const s=Su(n),i=r.length,a=s.length;ce(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let l=0;l<i;l++){const c=r[l],u=s[l];Va(u),this.tensorMap.set(c,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return He(()=>{const s=[];for(let i=0;i<r.length;i++){const a=r[i],l=this.findWithDefault(a,n);s.push(l)}return sc(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}const gNe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=Y("keyDType",t,e,n),a=Y("valueDType",t,e,n),l=new mNe(i,a);return r.addHashTable(t.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=Y("tableHandle",t,e,n,r),i=Y("keys",t,e,n),a=Y("values",t,e,n);return[await r.getHashTableById(s.id).import(i,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=Y("tableHandle",t,e,n,r),i=Y("keys",t,e,n),a=Y("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=Y("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const yNe=(t,e,n,r=Go)=>{switch(t.op){case"ResizeBilinear":{const s=Y("images",t,e,n),i=Y("size",t,e,n),a=Y("alignCorners",t,e,n),l=Y("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],a,l)]}case"ResizeNearestNeighbor":{const s=Y("images",t,e,n),i=Y("size",t,e,n),a=Y("alignCorners",t,e,n),l=Y("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],a,l)]}case"CropAndResize":{const s=Y("image",t,e,n),i=Y("boxes",t,e,n),a=Y("boxInd",t,e,n),l=Y("cropSize",t,e,n),c=Y("method",t,e,n),u=Y("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,a,l,c,u)]}case"ImageProjectiveTransformV3":{const s=Y("images",t,e,n),i=Y("transforms",t,e,n),a=Y("outputShape",t,e,n),l=Y("fillValue",t,e,n),c=Y("interpolation",t,e,n),u=Y("fillMode",t,e,n);return[r.image.transform(s,i,c.toLowerCase(),u.toLowerCase(),l,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const xNe=(t,e,n,r=Go)=>{switch(t.op){case"Equal":return[r.equal(Y("a",t,e,n),Y("b",t,e,n))];case"NotEqual":return[r.notEqual(Y("a",t,e,n),Y("b",t,e,n))];case"Greater":return[r.greater(Y("a",t,e,n),Y("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(Y("a",t,e,n),Y("b",t,e,n))];case"Less":return[r.less(Y("a",t,e,n),Y("b",t,e,n))];case"LessEqual":return[r.lessEqual(Y("a",t,e,n),Y("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(Y("a",t,e,n),Y("b",t,e,n))];case"LogicalNot":return[r.logicalNot(Y("a",t,e,n))];case"LogicalOr":return[r.logicalOr(Y("a",t,e,n),Y("b",t,e,n))];case"Select":case"SelectV2":return[r.where(Y("condition",t,e,n),Y("a",t,e,n),Y("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(Y("a",t,e,n),Y("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const bNe=(t,e,n,r=Go)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Y("a",t,e,n),Y("b",t,e,n),Y("transposeA",t,e,n),Y("transposeB",t,e,n))];case"Einsum":return[r.einsum(Y("equation",t,e,n),...Y("tensors",t,e,n))];case"Transpose":return[r.transpose(Y("x",t,e,n),Y("perm",t,e,n))];case"_FusedMatMul":const[s,i]=Y("fusedOps",t,e,n),a=s==="biasadd",l=i==="prelu",c=Y("numArgs",t,e,n),u=Y("leakyreluAlpha",t,e,n);if(a){if(l&&c!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&c!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[d,f]=Y("args",t,e,n);return[r.fused.matMul({a:Y("a",t,e,n),b:Y("b",t,e,n),transposeA:Y("transposeA",t,e,n),transposeB:Y("transposeB",t,e,n),bias:d,activation:i,preluActivationWeights:f,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(Y("a",t,e,n),Y("numLower",t,e,n),Y("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const vNe=(t,e,n,r=Go)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(Y("x",t,e,n),Y("axis",t,e,n),Y("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(Y("x",t,e,n),Y("mean",t,e,n),Y("variance",t,e,n),Y("offset",t,e,n),Y("scale",t,e,n),Y("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(Y("x",t,e,n),Y("mean",t,e,n),Y("variance",t,e,n),Y("offset",t,e,n),Y("scale",t,e,n),Y("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(Y("x",t,e,n),Y("radius",t,e,n),Y("bias",t,e,n),Y("alpha",t,e,n),Y("beta",t,e,n))];case"Softmax":return[r.softmax(Y("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(Y("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const wNe=(t,e,n,r=Go)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(Y("paramsNestedSplits",t,e,n),Y("paramsDenseValues",t,e,n),Y("indices",t,e,n),Y("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(Y("starts",t,e,n),Y("limits",t,e,n),Y("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(Y("shape",t,e,n),Y("values",t,e,n),Y("defaultValue",t,e,n),Y("rowPartitionTensors",t,e,n),Y("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const SNe=(t,e,n,r=Go)=>{switch(t.op){case"Max":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.max(Y("x",t,e,n),l,c)]}case"Mean":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.mean(Y("x",t,e,n),l,c)]}case"Min":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.min(Y("x",t,e,n),l,c)]}case"Sum":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.sum(Y("x",t,e,n),l,c)]}case"All":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.all(Y("x",t,e,n),l,c)]}case"Any":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.any(Y("x",t,e,n),l,c)]}case"ArgMax":{const l=Y("axis",t,e,n);return[r.argMax(Y("x",t,e,n),l)]}case"ArgMin":{const l=Y("axis",t,e,n);return[r.argMin(Y("x",t,e,n),l)]}case"Prod":{const l=Y("axis",t,e,n),c=Y("keepDims",t,e,n);return[r.prod(Y("x",t,e,n),l,c)]}case"Cumprod":{const l=Y("axis",t,e,n),c=Y("exclusive",t,e,n),u=Y("reverse",t,e,n);return[r.cumprod(Y("x",t,e,n),l,c,u)]}case"Cumsum":{const l=Y("axis",t,e,n),c=Y("exclusive",t,e,n),u=Y("reverse",t,e,n);return[r.cumsum(Y("x",t,e,n),l,c,u)]}case"Bincount":const s=Y("x",t,e,n),i=Y("weights",t,e,n),a=Y("size",t,e,n);return[r.bincount(s,i,a)];case"DenseBincount":{const l=Y("x",t,e,n),c=Y("weights",t,e,n),u=Y("size",t,e,n),d=Y("binaryOutput",t,e,n);return[r.denseBincount(l,c,u,d)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const CNe=(t,e,n,r=Go)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=Y("n",t,e,n),i=Y("axis",t,e,n);let a=Y("tensors",t,e,n);return a=a.slice(0,s),[r.concat(a,i)]}case"Gather":{const s=Y("x",t,e,n),i=Y("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=Y("axis",t,e,n),i=Y("batchDims",t,e,n),a=Y("x",t,e,n),l=Y("indices",t,e,n);return[r.gather(a,r.cast(l,"int32"),s,i)]}case"Reverse":{const s=Y("dims",t,e,n),i=[];for(let l=0;l<s.length;l++)s[l]&&i.push(l);const a=Y("x",t,e,n);return[r.reverse(a,i)]}case"ReverseV2":{const s=Y("axis",t,e,n),i=Y("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=Y("begin",t,e,n),i=Y("size",t,e,n);return[r.slice(Y("x",t,e,n),s,i)]}case"StridedSlice":{const s=Y("begin",t,e,n),i=Y("end",t,e,n),a=Y("strides",t,e,n),l=Y("beginMask",t,e,n),c=Y("endMask",t,e,n),u=Y("ellipsisMask",t,e,n),d=Y("newAxisMask",t,e,n),f=Y("shrinkAxisMask",t,e,n),A=Y("x",t,e,n);return[r.stridedSlice(A,s,i,a,l,c,u,d,f)]}case"Pack":return He(()=>{const s=Y("axis",t,e,n),i=Y("tensors",t,e,n),a=i[0].shape,l=r.squeeze(i[0]).shape,c=i.map(u=>{const d=vr(u.shape,a);if(!d&&!vr(r.squeeze(u).shape,l))throw new Error("the input tensors shape does not match");return d?u:r.reshape(u,a)});return[r.stack(c,s)]});case"Unpack":{const s=Y("axis",t,e,n),i=Y("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=Y("reps",t,e,n);return[r.tile(Y("x",t,e,n),s)]}case"Split":case"SplitV":{const s=Y("axis",t,e,n),i=Y("numOrSizeSplits",t,e,n),a=Y("x",t,e,n);return r.split(a,i,s)}case"ScatterNd":{const s=Y("indices",t,e,n),i=Y("values",t,e,n),a=Y("shape",t,e,n);return[r.scatterND(s,i,a)]}case"GatherNd":{const s=Y("x",t,e,n),i=Y("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=Y("sparseIndices",t,e,n),i=Y("outputShape",t,e,n),a=Y("sparseValues",t,e,n),l=Y("defaultValue",t,e,n);return[r.sparseToDense(s,a,i,a.dtype===l.dtype?l:r.cast(l,a.dtype))]}case"TensorScatterUpdate":{const s=Y("indices",t,e,n),i=Y("values",t,e,n),a=Y("tensor",t,e,n);return[r.tensorScatterUpdate(a,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const kNe=(t,e,n,r=Go)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:a,reverseIndexMap:l}=r.sparse.sparseFillEmptyRows(Y("indices",t,e,n),Y("values",t,e,n),Y("denseShape",t,e,n),Y("defaultValue",t,e,n));return[s,i,a,l]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(Y("inputIndices",t,e,n),Y("inputShape",t,e,n),Y("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(Y("data",t,e,n),Y("indices",t,e,n),Y("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(Y("data",t,e,n),Y("indices",t,e,n),Y("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const BNe=(t,e,n,r=Go)=>{switch(t.op){case"FFT":return[r.fft(Y("x",t,e,n))];case"IFFT":return[r.ifft(Y("x",t,e,n))];case"RFFT":return[r.rfft(Y("x",t,e,n))];case"IRFFT":return[r.irfft(Y("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const jNe=(t,e,n,r=Go)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(Y("input",t,e,n),Y("pattern",t,e,n),Y("rewrite",t,e,n),Y("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(Y("data",t,e,n),Y("dataSplits",t,e,n),Y("separator",t,e,n),Y("nGramWidths",t,e,n),Y("leftPad",t,e,n),Y("rightPad",t,e,n),Y("padWidth",t,e,n),Y("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:a}=r.string.stringSplit(Y("input",t,e,n),Y("delimiter",t,e,n),Y("skipEmpty",t,e,n));return[s,i,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(Y("input",t,e,n),Y("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const ENe=(t,e,n,r=Go)=>{switch(t.op){case"Cast":return[r.cast(Y("x",t,e,n),Y("dtype",t,e,n))];case"ExpandDims":{const s=Y("axis",t,e,n);return[r.expandDims(Y("x",t,e,n),s)]}case"Squeeze":{const s=Y("axis",t,e,n);return[r.squeeze(Y("x",t,e,n),s)]}case"Reshape":return[r.reshape(Y("x",t,e,n),Y("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(Y("x",t,e,n),Y("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(Y("x",t,e,n),Y("padding",t,e,n),Y("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(Y("x",t,e,n),Y("padding",t,e,n),Y("constantValue",t,e,n))];case"SpaceToBatchND":{const s=Y("blockShape",t,e,n),i=Y("paddings",t,e,n);return[r.spaceToBatchND(Y("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=Y("blockShape",t,e,n),i=Y("crops",t,e,n);return[r.batchToSpaceND(Y("x",t,e,n),s,i)]}case"DepthToSpace":{const s=Y("blockSize",t,e,n),i=Y("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(Y("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(Y("x",t,e,n),Y("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(Y("s0",t,e,n),Y("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function ZQ(t,e,n,r,s=He){const i=((a,l,c)=>{switch(a.category){case"arithmetic":return s(()=>rNe(a,l,c));case"basic_math":return s(()=>sNe(a,l,c));case"control":return uNe(a,l,c);case"convolution":return s(()=>dNe(a,l,c));case"creation":return s(()=>fNe(a,l,c));case"dynamic":return hNe(a,l,c);case"evaluation":return s(()=>ANe(a,l,c));case"image":return s(()=>yNe(a,l,c));case"graph":return s(()=>pNe(a,l,c));case"logical":return s(()=>xNe(a,l,c));case"matrices":return s(()=>bNe(a,l,c));case"normalization":return s(()=>vNe(a,l,c));case"ragged":return s(()=>wNe(a,l,c));case"reduction":return s(()=>SNe(a,l,c));case"slice_join":return s(()=>CNe(a,l,c));case"sparse":return s(()=>kNe(a,l,c));case"spectral":return s(()=>BNe(a,l,c));case"string":return s(()=>jNe(a,l,c));case"transformation":return s(()=>ENe(a,l,c));case"hash_table":return gNe(a,l,c,r);case"custom":const u=Use(a.op);if(u&&u.customExecutor)return u.customExecutor(new nNe(a,l,c));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return gm(i)?i.then(a=>[].concat(a)):[].concat(i)}class eH{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}function tH(t,e,n,r){const s=new Set,i=[];let a=null,l=null;const c=new Set,u=new Set(Object.keys(t).map(A=>Ic(A)[0]));r=r||[];const d=new Set(r.map(A=>Ic(A.name)[0])),f=[...e];for(;f.length>0;){const A=f.pop();if((Cg(A)||DNe(A)||LNe(A))&&a==null&&(a=A,l=a.children.map(m=>m.name).filter(m=>s.has(m))),s.add(A.name),n[A.name]==null&&!u.has(A.name)&&!d.has(A.name)){if(A.inputs.length===0){i.push(A.name);continue}A.inputs.forEach(m=>{c.has(m.name)||(c.add(m.name),f.push(m))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:a,syncInputs:l}}function INe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(x=>Ic(x)[0]).map(x=>t.nodes[x]),i=t.initNodes||[],a=x=>n.has(typeof x=="string"?x:x.name);function l(x){return[...new Map(x.map(v=>[v.name,v])).values()]}const c=l([...s,...t.weights,...i]).filter(a),u=l([...c,...Object.values(t.nodes)]).filter(a),d=new Map(u.map(x=>[x.name,x])),f={};for(const x of u){f[x.name]=f[x.name]||0;for(const v of x.children)a(v)||(f[v.name]=Number.POSITIVE_INFINITY),f[v.name]=(f[v.name]||0)+1}const A=Object.entries(f).filter(([,x])=>x===0).map(([x])=>x),m=[...A];for(;A.length>0;){const x=A.pop(),v=d.get(x);for(const w of v.children.filter(a))--f[w.name]===0&&(m.push(w.name),A.push(w.name))}const g=m.map(x=>d.get(x)),y=NNe(g,c);return TNe(y,c),y}function NNe(t,e){const n=new Map(t.map(a=>[a.name,a])),r=e.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),l=n.get(a);for(const c of l.children)!n.has(c.name)||s.has(c.name)||(s.add(c.name),r.push(c.name))}return t.filter(a=>s.has(a.name))}class UC extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function TNe(t,e){const n=new Map(t.map((l,c)=>[l.name,c])),r=new Set(e.map(l=>l.name)),s=l=>r.has(typeof l=="string"?l:l.name),i=new Set(t.map(l=>l.name)),a=l=>i.has(typeof l=="string"?l:l.name);for(const l of t){for(const c of l.children.filter(a)){if(!n.has(c.name))throw new UC(`Child ${c.name} of node ${l.name} is unreachable.`);if(n.get(l.name)>n.get(c.name))throw new UC(`Node ${l.name} is scheduled to run after its child ${c.name}.`)}if(!s(l))for(const c of l.inputs){if(!n.has(c.name))throw new UC(`Input ${c.name} of node ${l.name} is unreachable.`);if(n.get(c.name)>n.get(l.name))throw new UC(`Node ${l.name} is scheduled to run before its input ${c.name}.`)}}}function _Ne(t){const e=new Map(t.map((l,c)=>[l.name,c])),n=Number.MAX_SAFE_INTEGER,r=t.map((l,c)=>Cg(l)?n:c),s=l=>{const c=r[e.get(l.name)];return c??-1},i=t.map((l,c)=>l.children.map(s).reduce((u,d)=>Math.max(u,d),r[c])),a=new Map;for(let l=0;l<t.length;++l){const c=i[l];if(c===n)continue;const u=t[l],d=t[c];a.has(d.name)||a.set(d.name,[]),a.get(d.name).push(u)}return a}const RNe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),ONe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),FNe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Cg(t){return RNe.has(t.op)}function DNe(t){return ONe.has(t.op)}function LNe(t){return FNe.has(t.op)}class d4{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new d4(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=tH(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:a}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const u=n.map(f=>f.name),d=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${d}]. Missing the following inputs: [${s}]`)}const l=INe(this.graph,r),c=_Ne(l);return{orderedNodes:l,nodeLiveUntilMap:c}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Va(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(A=>this.graph.nodes[Ic(A)[0]]),i=n.map(A=>Ic(A)[0]),a=new Set(i);let l=i.map(A=>this.graph.nodes[A]);l.length===0&&(l=this._outputs);const c=this.getCompilationKey(s,l);let u=this.compiledMap.get(c);u==null&&(u=this.compile(e,l),this.compiledMap.set(c,u));try{this.keepIntermediateTensors=Ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(A){this.keepIntermediateTensors=!1,console.warn(A.message)}const d={},f={};return He(()=>{const A=new eH(this.weightMap,d,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(v=>{const[w,B]=Ic(v,A),k=[];k[B]=e[v],m[w]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(k))});const g=this.getFrozenTensorIds(m),{orderedNodes:y,nodeLiveUntilMap:x}=u;for(const v of y){if(m[v.name])continue;const w=ZQ(v,m,A,this._resourceManager);if(gm(w))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);m[v.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,m,A,g,a,x.get(v.name))}return this.parent==null&&A.dispose(g),n.map(v=>$o(v,m,A))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,a,l){if(!(Cg(n)||a.has(e))){for(const c of r[e])c!=null&&(l[c.id]=(l[c.id]||0)+n.children.length);for(const c of n.inputs){if(Cg(c))continue;const u=GQ(c.name,r,s);if(u!=null)for(const d of u){if(!d||d.kept||i.has(d.id))continue;const f=l[d.id];f===1?(d.dispose(),delete l[d.id]):f!=null&&l[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,a){function l(c){return Cg(c)||i.has(c.name)}if(!(Cg(e)||a==null))for(const c of a){if(l(c))continue;const u=GQ(c.name,n,r);for(const d of u)!d||d.kept||s.has(d.id)||d.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(A){this.keepIntermediateTensors=!1,console.warn(A.message)}const a=new eH(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const l=await this.executeWithControlFlow(e,a,n,r),c=n.map(A=>$o(A,l,a)),u=c.map(A=>A.id),d=Object.keys(e).map(A=>e[A].id),f=new Set([...u,...d,...this.weightIds]);return Object.values(l).forEach(A=>{A.forEach(m=>{m&&!m.isDisposed&&!f.has(m.id)&&m.dispose()})}),this.parent==null&&a.dispose(f),c}async executeFunctionAsync(e,n,r){const s=e.reduce((i,a,l)=>(i[this.inputs[l].name]=a,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),a=i.map(k=>this.graph.nodes[Ic(k)[0]]),l=r.map(k=>Ic(k)[0]),c=new Set(l);let u=l.map(k=>this.graph.nodes[k]);u.length===0&&(u=this._outputs);const{usedNodes:d,missingInputs:f,dynamicNode:A,syncInputs:m}=tH(e,u,this.weightMap,this._initNodes),g=[...a,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:n.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(k=>{const[j,I]=Ic(k),O=[];O[I]=e[k],y[j]=O});const x={},v=this.getFrozenTensorIds(y),w={};for(;g.length>0;){const k=this.processStack(a,g,n,y,w,v,c,x,d);await Promise.all(k)}A==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const B=u.filter(k=>!Cg(k)&&!$o(k.name,y,n)).map(k=>k.name);if(B.length>0){let k="";throw A!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${B}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${k}`)}return y}processStack(e,n,r,s,i,a,l,c,u){const d=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let A="";if(f.node.op==="Enter"&&Y("isConstant",f.node,s,r)&&([A]=cA(f.node.name,r)),s[f.node.name]==null){const m=ZQ(f.node,s,r,this._resourceManager);A||([A]=cA(f.node.name,r));const g=r.currentContext;gm(m)?d.push(m.then(y=>(s[A]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[A]=this.cloneTensorList(y)),r.currentContext=g,this.checkTensorForDisposal(A,f.node,s,r,a,l,c),this.processChildNodes(f.node,n,r,s,i,u),y))):(s[A]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[A]=this.cloneTensorList(m)),this.checkTensorForDisposal(A,f.node,s,r,a,l,c),this.processChildNodes(f.node,n,r,s,i,u))}else this.processChildNodes(f.node,n,r,s,i,u)}return d}processChildNodes(e,n,r,s,i,a){e.children.forEach(l=>{const[c]=cA(l.name,r);i[c]||!a.has(l.name)||(l.op==="Merge"?l.inputNames.some(u=>!!$o(u,s,r))&&(i[c]=!0,n.push({contexts:r.currentContext,node:l})):l.inputNames.every(u=>!!$o(u,s,r))&&(i[c]=!0,n.push({contexts:r.currentContext,node:l})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=Ic(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const a=i.attrParams.shape.value,l=a.length===r.shape.length&&r.shape.every((c,u)=>a[u]===-1||a[u]===c);ce(l,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&ce(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];a!=null?s[a.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=Ic(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=Ic(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class $Ne{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const PNe="?tfjs-format=file",zNe="model.json";class V${get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=XL){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new $Ne}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return gm(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await bee(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new d4(KQ.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=KQ.Instance.transformGraph(e.modelInitializer);this.initializer=new d4(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Dr?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Dr)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const a in i){const l=i[a];l.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[l.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,a)=>{var l,c,u;const d=(u=(c=(l=this.signature)===null||l===void 0?void 0:l.inputs)===null||c===void 0?void 0:c[a])===null||u===void 0?void 0:u.resourceId;return d!=null?i[a]=this.resourceIdToCapturedInput[d]:i[a]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],a=n[i];this.resourceIdToCapturedInput[a.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&hr(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function nF(t,e={},n=XL){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=MNe(t));const r=new V$(t,e,n);return await r.load(),r}function UNe(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,s]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const i=JB(r.weightsManifest),a=DD(r,i,s);e=e4(a)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=e4(t);else throw new Error("Unknown model format");const n=new V$(e);return n.load(),n}function MNe(t){return t.endsWith("/")||(t=t+"/"),`${t}${zNe}${PNe}`}const QNe="4.22.0";const HNe=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:V$,deregisterOp:mIe,loadGraphModel:nF,loadGraphModelSync:UNe,registerOp:pIe,version_converter:QNe},Symbol.toStringTag,{value:"Module"}));var nH;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(nH||(nH={}));function yn(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ce(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}const WNe=_3;class rI extends Kj{nextDataId(){return rI.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new bD(this,Kd())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ye().get("IS_NODE")&&cu(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&eh(r[0])){const i=r.map(a=>ih(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return OA(s,i)}return JZ(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>TA(s));return cr(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return cr(e.shape,e.dtype,n)}makeOutput(e,n,r){return Kd().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Cl();return e(),{kernelMs:Cl()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){yn([e],"where");const n=this.readSync(e.dataId);return WNe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}rI.nextDataId=0;function Hse(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const VNe=t=>{const{x:e}=t.inputs,n=t.backend;yn(e,"abs");let r=new Float32Array(it(e.shape));const s=n.data.get(e.dataId).values;return r=Hse(s),n.makeOutput(r,e.shape,e.dtype)},qNe={kernelName:Bw,backendName:"cpu",kernelFunc:VNe};function ka(t){return(e,n,r,s,i)=>{const a=rr(e,n),l=a.length,c=On(a),u=it(a),d=go(i,u),f=e.length,A=n.length,m=On(e),g=On(n),y=o0(e,a),x=o0(n,a);if(y.length+x.length===0)for(let v=0;v<d.length;++v)d[v]=t(r[v%r.length],s[v%s.length]);else for(let v=0;v<d.length;++v){const w=T0(v,l,c),B=w.slice(-f);y.forEach(O=>B[O]=0);const k=af(B,f,m),j=w.slice(-A);x.forEach(O=>j[O]=0);const I=af(j,A,g);d[v]=t(r[k],s[I])}return[d,a]}}function Tc(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.makeTensorInfo(r.shape,"complex64"),c=n.data.get(l.dataId);return c.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",a)},l}const GNe={kernelName:sE,backendName:"cpu",kernelFunc:Tc};function f4(t,e,n="float32"){if(n==="complex64"){const s=f4(t,e,"float32"),i=f4(t,e,"float32");return Tc({inputs:{real:s,imag:i},backend:t})}const r=Ho(it(e),n);return t.makeTensorInfo(e,n,r)}function xh(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const KNe={kernelName:Sx,backendName:"cpu",kernelFunc:xh};function h0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const XNe={kernelName:LE,backendName:"cpu",kernelFunc:h0};function Wse(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Om([0],n),[i,a]=ka((l,c)=>l!==c?1:0)(e,[],t,s,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Bm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return xh({inputs:{x:s},backend:n});const d=f4(n,s.shape,s.dtype),f=Bm({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),A=Tc({inputs:{real:f,imag:d},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),A}if(s.dtype==="complex64"){const d=h0({inputs:{input:s},backend:n}),f=Bm({inputs:{x:d},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(d),f}if(!SD(s.dtype,i)){const d=xh({inputs:{x:s},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}const a=n.data.get(s.dataId).values,[l,c,u]=Wse(a,s.shape,s.dtype,i);return n.makeTensorInfo(l,c,u)}const YNe={kernelName:ux,backendName:"cpu",kernelFunc:Bm};function to(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a,b:l}=s,c=i;yn([a,l],t);const u=c.data.get(a.dataId).values,d=c.data.get(l.dataId).values,f=a.dtype==="string"?FA(u):u,A=a.dtype==="string"?FA(d):d,m=r||a.dtype,[g,y]=e(a.shape,l.shape,f,A,m);return c.makeTensorInfo(y,m,g)}:({inputs:s,backend:i})=>{const{a,b:l}=s,c=i;if(a.dtype==="complex64"||l.dtype==="complex64"){const u=Bm({inputs:{x:a},backend:c,attrs:{dtype:"complex64"}}),d=c.data.get(u.dataId),f=d.complexTensorInfos.real,A=d.complexTensorInfos.imag,m=c.data.get(f.dataId).values,g=c.data.get(A.dataId).values,y=Bm({inputs:{x:l},backend:c,attrs:{dtype:"complex64"}}),x=c.data.get(y.dataId),v=x.complexTensorInfos.real,w=x.complexTensorInfos.imag,B=c.data.get(v.dataId).values,k=c.data.get(w.dataId).values,[j,I,O]=n(a.shape,l.shape,m,g,B,k),F=c.makeTensorInfo(O,"float32",j),D=c.makeTensorInfo(O,"float32",I),T=Tc({inputs:{real:F,imag:D},backend:c});return c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(F),c.disposeIntermediateTensorInfo(D),T}else{const u=c.data.get(a.dataId).values,d=c.data.get(l.dataId).values,f=r||a.dtype,[A,m]=e(a.shape,l.shape,u,d,f);return c.makeTensorInfo(m,f,A)}}}function q$(t){return(e,n,r,s,i,a)=>{const l=rr(e,n),c=it(l),u=l.length,d=On(l),f=go("float32",c),A=go("float32",c),m=o0(e,l),g=o0(n,l),y=OA(r,s),x=OA(i,a),v=e.length,w=On(e),B=n.length,k=On(n);if(m.length+g.length===0)for(let j=0;j<f.length;j++){const I=j%y.length,O=j%x.length,F=t(y[I*2],y[I*2+1],x[O*2],x[O*2+1]);f[j]=F.real,A[j]=F.imag}else for(let j=0;j<f.length;j++){const I=T0(j,u,d),O=I.slice(-v);m.forEach(P=>O[P]=0);const F=af(O,v,w),D=I.slice(-B);g.forEach(P=>D[P]=0);const T=af(D,B,k),N=t(y[F*2],y[F*2+1],x[T*2],x[T*2+1]);f[j]=N.real,A[j]=N.imag}return[f,A,l]}}const Vse=ka(((t,e)=>t+e)),JNe=q$(((t,e,n,r)=>({real:t+n,imag:e+r}))),L1=to(_0,Vse,JNe),ZNe={kernelName:_0,backendName:"cpu",kernelFunc:L1};function G$(t,e,n,r,s){const i=it(r),a=Ho(s,n);for(let l=0;l<t.length;l++){const c=t[l];if(c<0)throw new Error("Input x must be non-negative!");c>=s||(i>0?a[c]+=e[l]:a[c]+=1)}return a}function qse(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],a=cr([s,n],e.dtype);for(let l=0;l<s;l++)for(let c=0;c<i;c++){const u=t.get(l,c);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?a.set(1,l,u):e.size>0?a.set(a.get(l,u)+e.get(l,c),l,u):a.set(a.get(l,u)+1,l,u))}return a}const Gse=ka(((t,e)=>t&e)),eTe=to(Ow,Gse),tTe={kernelName:Ow,backendName:"cpu",kernelFunc:eTe};function Bh(t){return(e,n,r)=>{const s=ca(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}function ks(t,e,n){const r=Bh(e);return Mm(t,r,n)}function Mm(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:a}=r;yn(a,t);const l=i,c=l.data.get(a.dataId).values;let u;if(a.dtype==="string"){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=FA(c)}else u=c;const d=n||a.dtype,f=e(u,d,s);return l.makeTensorInfo(a.shape,d,f)}}const Kse=Bh(t=>Math.ceil(t)),nTe=Mm(dx,Kse),rTe={kernelName:dx,backendName:"cpu",kernelFunc:nTe};function Xse(t,e,n,r){const s=ca(n,it(e));if(r&&n!=="string"){let i=0;t.forEach(a=>{const l=it(a.shape);s.set(a.vals,i),i+=l})}else{let i=0;t.forEach(a=>{const l=n==="string"?FA(a.vals):a.vals;let c=0;for(let u=0;u<a.shape[0];++u){const d=u*e[1]+i;for(let f=0;f<a.shape[1];++f)s[d+f]=l[c++]}i+=a.shape[1]})}return s}const Yse=ka((t,e)=>t===e?1:0),Jse=to(Qw,Yse,null,"bool"),sTe={kernelName:Qw,backendName:"cpu",kernelFunc:Jse};const Zse=Bh(t=>Math.exp(t)),eie=Mm(yx,Zse,"float32"),iTe={kernelName:yx,backendName:"cpu",kernelFunc:eie};const tie=Bh(t=>Math.expm1(t)),aTe=Mm(xx,tie),oTe={kernelName:xx,backendName:"cpu",kernelFunc:aTe};const nie=Bh(t=>Math.floor(t)),lTe=Mm(bx,nie),cTe={kernelName:bx,backendName:"cpu",kernelFunc:lTe};const rie=ka((t,e)=>Math.floor(t/e)),uTe=to(vx,rie,null,"int32"),dTe={kernelName:vx,backendName:"cpu",kernelFunc:uTe};function sie(t,e,n,r,s,i,a,l,c){const u=cr([r,i],n);for(let d=0;d<r;d++){const f=[];let A=0;for(let m=0;m<s;m++){const g=t[d*s+m];A+=g*a[m],f.push(g)}if(A<0||A>=c/i)throw new Error(`Invalid indices: ${f} does not index into ${l}`);for(let m=0;m<i;m++)u.values[d*i+m]=e.get(...e.indexToLoc(A*i+m))}return u}function iie(t,e,n){const r=cr(n,t.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),l=a[0],c=a[2],u=e.locToIndex([l,c]);a[2]=e.values[u];const d=t.locToIndex(a);0<=d&&d<t.values.length&&(r.values[s]=t.values[d])}return r}const aie=ka((t,e)=>t>e?1:0),fTe=to(qw,aie,null,"bool"),hTe={kernelName:qw,backendName:"cpu",kernelFunc:fTe};const oie=ka((t,e)=>t>=e?1:0),ATe=to(wx,oie,null,"bool"),pTe={kernelName:wx,backendName:"cpu",kernelFunc:ATe};const lie=ka((t,e)=>t<e?1:0),mTe=to(Kw,lie,null,"bool"),gTe={kernelName:Kw,backendName:"cpu",kernelFunc:mTe};const cie=ka((t,e)=>t<=e?1:0),yTe=to(Xw,cie,null,"bool"),xTe={kernelName:Xw,backendName:"cpu",kernelFunc:yTe};function uie(t,e,n){const r=(e-t)/(n-1),s=Ho(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}const die=Bh(t=>Math.log(t)),bTe=Mm(jx,die),vTe={kernelName:jx,backendName:"cpu",kernelFunc:bTe};function fie(t,e,n,r){const s=go(r,it(n));for(let i=0;i<s.length;++i){const a=i*e;let l=t[a];for(let c=0;c<e;++c){const u=t[a+c];(Number.isNaN(u)||u>l)&&(l=u)}s[i]=l}return s}const hie=ka(((t,e)=>Math.max(t,e))),wTe=to(Ix,hie),STe={kernelName:Ix,backendName:"cpu",kernelFunc:wTe};const Aie=ka(((t,e)=>Math.min(t,e))),CTe=to(Nx,Aie),kTe={kernelName:Nx,backendName:"cpu",kernelFunc:CTe};const K$=ka(((t,e)=>t*e)),BTe=q$(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n}))),sI=to(_x,K$,BTe),jTe={kernelName:_x,backendName:"cpu",kernelFunc:sI};function pie(t,e,n){const r=qA(-1,n);return K$([],e,r,t,n)}function ETe(t){const{inputs:e,backend:n}=t,{x:r}=e;yn(r,"neg");const s=n.data.get(r.dataId).values,[i,a]=pie(s,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}const ITe={kernelName:o5,backendName:"cpu",kernelFunc:ETe};const mie=ka(((t,e)=>t!==e?1:0)),NTe=to(l5,mie,null,"bool"),TTe={kernelName:l5,backendName:"cpu",kernelFunc:NTe};function X$(t,e,n,r,s){const i=e.length,a=it(e),l=On(e),c=On(s),u=go(n,it(s));for(let d=0;d<a;++d){const f=T0(d,i,l),A=new Array(f.length);for(let g=0;g<A.length;g++)A[g]=f[r[g]];const m=af(A,i,c);u[m]=t[d]}return u}function ic(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;yn(s,"transpose");const a=s.shape.length,l=new Array(a);for(let f=0;f<l.length;f++)l[f]=s.shape[i[f]];const c=r.data.get(s.dataId).values,u=X$(c,s.shape,s.dtype,i,l);return{dataId:r.write(u,l,s.dtype),shape:l,dtype:s.dtype}}const _Te={kernelName:zg,backendName:"cpu",kernelFunc:ic};function gie(t,e,n,r){const[s,i]=bo(t,r),a=ec(e,"int32"),l=Ho(it(s),a),c=it(i);for(let u=0;u<l.length;++u){const d=u*c;let f=1;for(let A=0;A<c;++A)f*=n[d+A];l[u]=f}return{outVals:l,outShape:s,outDtype:a}}function RTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;yn(s,"prod");const l=s.shape.length,c=Ar(i,s.shape),u=Yi(c,l);let d=c,f=s;const A=[];u!=null&&(f=ic({inputs:{x:s},backend:n,attrs:{perm:u}}),A.push(f),d=Sa(d.length,l));const m=n.data.get(f.dataId).values,{outVals:g,outShape:y,outDtype:x}=gie(f.shape,f.dtype,m,d);let v=y;return a&&(v=wa(y,c)),A.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(v,x,g)}const OTe={kernelName:A5,backendName:"cpu",kernelFunc:RTe};function FTe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=T0(s,e.length,On(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function DTe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function LTe(t,e,n,r){const s=[];let i=0;const a=e.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);DTe(n,r);let c=1;for(let u=0;u<e.length-1;++u){c*=e[u];const d=e[u+1];for(let f=1;f<c+1;++f)l[u].push(f*d)}for(let u=0;u<t.length;++u){let d=t[u],f=t[u]+1;for(let A=0;A<n.length;++A){const m=n[A],g=A+e.length-1;if(g>=0){const y=l[g],x=y[y.length-1]-m[d];for(let v=d;v<f;++v)l[g].push(m[v+1]+x)}d=m[d],f=m[f]}f!==d&&(s.push([d,f]),i+=f-d)}return{outSplits:l,valueSlices:s,numValues:i}}function $Te(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=ca("int32",r);e.push(s),t[n].forEach((i,a)=>s[a]=i)}return e}function rH(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function PTe(t,e,n,r,s,i){const a=rH(e,2)[1],l=rH(i,2)[1];let c=0;for(const u of n)for(let d=u[0];d<u[1];++d){for(let f=0;f<r;++f)s[c*l+f]=t[d*a+f];++c}}function zTe(t,e,n,r,s){const i=e.slice();i[0]=s;const a=ca(n,it(i)),l=t.length,c=l===0?0:l/e[0];return PTe(t,e,r,c,a,i),[a,i]}function yie(t,e,n,r,s,i,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const c=e[0][0]-1;if(FTe(i,a,c),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:d,valueSlices:f,numValues:A}=LTe(i,a,t,u),m=$Te(d),g=zTe(n,r,s,f,A);return[m,g[0],g[1]]}const sH=2147483647;function xie(t,e,n,r,s,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const l=e.length===0,c=s.length===0,u=a.length===0,d=[];l||d.push(e[0]),c||d.push(s[0]),u||d.push(a[0]);for(let x=1;x<d.length;++x)if(d[x]!==d[x-1])throw new Error("starts, limits, and deltas must have the same shape");const f=d.length===0?1:d[0],A=ca("int32",f+1);A[0]=0;for(let x=0;x<f;++x){const v=l?t[0]:t[x],w=c?r[0]:r[x],B=u?i[0]:i[x];if(B===0)throw new Error("Requires delta != 0");let k;if(B>0&&w<v||B<0&&w>v)k=0;else if(k=Math.ceil(Math.abs((w-v)/B)),k>sH)throw new Error(`Requires ((limit - start) / delta) <= ${sH}`);A[x+1]=A[x]+k}const m=A[f],g=ca(n,m);let y=0;for(let x=0;x<f;++x){const v=A[x+1]-A[x];let w=l?t[0]:t[x];const B=u?i[0]:i[x];for(let k=0;k<v;++k)g[y++]=w,w+=B}return[A,g]}var Hu=Jd;class h4{constructor(e,n,r,s,i,a,l,c,u,d){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=c,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=ene(d),this.raggedRank=tne(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Hu.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Hu.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Hu.VALUE_ROWIDS:return h4.getMaxWidthValueRowID(n);case Hu.ROW_SPLITS:return h4.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Hu[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let a=1;a<n;++a){const l=e[a];l!==s&&(s=l,i=Math.max(a-r,i),r=a)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return aH(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;nne(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=Zte(this.raggedRank,s,n);a[0]<0&&(a[0]=e);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let a=0;for(let l=0;l<s;++l,a+=n)i.push(a);for(let l=s;l<e;++l)i.push(-1);return ce(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,a=[];for(let l=0;l<i-1;++l){const c=e[l+1]-e[l];let u=Math.min(s,c),d=n[l];d===-1&&(u=0);for(let f=0;f<u;++f)a.push(d),d+=r;for(let f=0;f<c-u;++f)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,a=[];if(i===0)return[];let l=0,c=e[0];if(c>=n.length)throw new Error(`Got currentValueRowId=${c}, which is not less than ${n.length}`);let u=n[c];a.push(u);for(let d=1;d<i;++d){const f=e[d];if(f===c)u>=0&&(++l,l<s?u+=r:u=-1);else{if(l=0,c=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}a.push(u)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Hu.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Hu.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Hu[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Hu.FIRST_DIM_SIZE:return e[0];case Hu.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Hu.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Hu[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let c=s.length-2;c>=0;--c)s[c]=s[c+1]*r[c+1];const i=aH(r,!1),a=ca(this.valuesDType,it(i));if(s[0]*r[0]>0){let c=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let u=1;u<=this.raggedRank;++u)c=this.calculateOutputIndex(u-1,c,s[u],r[u]);this.setOutput(this.raggedRank,c,a,i)}return[i,a]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,a=r;let l=s.slice();l=l.slice(e+1);const c=it(l),u=n.length;let d=this.defaultValue;if(d.length!==c&&d.length!==1){const g=this.defaultValueShape;He(()=>{const y=Fe(d,g);d=Ug(y,l).dataSync()})}let f=0,A=0,m=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===m){++m;continue}if(A<m){const x=i.subarray(f*c),v=a.subarray(A*c),w=(m-A)*c;iH(v,x,w)}if(g>=u){const x=r.length;y=Math.floor(x/c)}if(y>m)if(this.defaultValue.length===1)a.subarray(m*c,y*c).fill(this.defaultValue[0]),m=y;else for(;y>m;){const x=a.slice(m*c);iH(x,d,c),++m}y<0?(f=g+1,A=m):(f=g,A=m,m=A+1)}}}function iH(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function aH(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function bie(t,e,n,r,s,i,a,l,c,u){return new h4(t,e,n,r,s,i,a,l,c,u).compute()}function vie(t,e,n,r){const s=t===e,i=t<e&&n<0,a=e<t&&n>1;if(s||i||a)return Ho(0,r);const l=Math.abs(Math.ceil((e-t)/n)),c=Ho(l,r);e<t&&n===1&&(n=-1),c[0]=t;for(let u=1;u<c.length;u++)c[u]=c[u-1]+n;return c}const wie=Bh(t=>1/Math.sqrt(t)),UTe=Mm($x,wie),MTe={kernelName:$x,backendName:"cpu",kernelFunc:UTe};function Ng(t,e,n,r,s,i,a,l,c,u){const d=[r/s,s],f=t.values,A=e.values;if(r===0)return cr(n,e.dtype);const m=c instanceof $a?c:cr(d,e.dtype);typeof c=="string"||typeof c=="number"?m.values.fill(c):typeof c=="boolean"&&m.values.fill(+c);for(let g=0;g<i;g++){const y=[];let x=0;for(let v=0;v<a;v++){const w=f[g*a+v];y.push(w),x+=w*l[v]}if(x<0||x>=r/s)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let v=0;v<s;v++)u?m.values[x*s+v]+=A[g*s+v]:m.values[x*s+v]=e.rank===0?A[0]:A[g*s+v]}return m}const QTe=Bh(t=>1/(1+Math.exp(-t))),Sie=ks(Qx,t=>1/(1+Math.exp(-t))),HTe={kernelName:Qx,backendName:"cpu",kernelFunc:Sie};function Cie(t,e,n,r,s){const i=ZL(r,e,n),a=it(n),l=On(r);if(i){const f=e$(e,l);return s==="string"?t.slice(f,f+a):t.subarray(f,f+a)}const c=s==="string"?FA(t):t,u=cr(r,s,c),d=cr(n,s);for(let f=0;f<d.size;++f){const A=d.indexToLoc(f),m=A.map((g,y)=>g+e[y]);d.set(u.get(...m),...A)}return s==="string"?wne(d.values):d.values}function A0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r;yn(s,"slice");const[l,c]=Q3(s,i,a);YL(s,l,c);const u=n.data.get(s.dataId).values,d=Cie(u,l,c,s.shape,s.dtype);return n.makeTensorInfo(c,s.dtype,d)}const WTe={kernelName:b5,backendName:"cpu",kernelFunc:A0};function kie(t,e,n,r,s,i,a){const l=e[0],c=i[0],u=new Array(c),d=new Array(l),f=e[1];if(c===0){if(l!==0)throw new Error(cne(l));const x=ca(n,0),v=ca(s,0);return[x,[0,f],v,u,d]}let A=!0,m=0;const g=new Array(c).fill(0);for(let x=0;x<l;++x){const v=t[x*f];if(v<0)throw new Error(une(x,v));if(v>=c)throw new Error(dne(x,v,c));++g[v],A=A&&v>=m,m=v}let y=!0;for(let x=0;x<c;++x){const v=g[x]===0;u[x]=v,y=y&&!v,g[x]=Math.max(g[x],1),x>0&&(g[x]+=g[x-1])}if(y&&A){const x=t,v=r;for(let w=0;w<l;++w)d[w]=w;return[x,[l,f],v,u,d]}else{const x=g[c-1],v=ca(n,x*f),w=ca(s,x),B=new Array(c).fill(0);for(let k=0;k<l;++k){const j=t[k*f],I=B[j],O=(j===0?0:g[j-1])+I;B[j]++;for(let F=0;F<f;++F)v[O*f+F]=t[k*f+F];w[O]=r[k],d[k]=O}for(let k=0;k<c;++k)if(B[k]===0){const I=k===0?0:g[k-1];v[I*f+0]=k;for(let O=1;O<f;++O)v[I*f+O]=0;w[I]=a}return[v,[x,f],w,u,d]}}function Bie(t,e,n,r,s){const i=it(r),a=e[0],l=s.length,c=[];let u=1,d=-1;for(let x=0;x<l;++x){const v=s[x];if(v===-1){if(d!==-1)throw new Error(fne(d,x));d=x,c.push(1)}else{if(v<0)throw new Error(hne(x,v));u*=v,c.push(v)}}if(d!==-1){if(u<=0)throw new Error(Ane());const x=Math.trunc(i/u);if(u*x!==i)throw new Error(pne(r,c));c[d]=x}if(it(c)!==i)throw new Error(mne(r,c));const A=r.length,m=[];if(A>0){m[A-1]=1;for(let x=A-2;x>=0;--x)m[x]=m[x+1]*r[x+1]}const g=[];if(l>0){g[l-1]=1;for(let x=l-2;x>=0;--x)g[x]=g[x+1]*c[x+1]}const y=ca(n,a*l);for(let x=0;x<a;++x){let v=0;for(let w=0;w<A;++w)v+=t[x*A+w]*m[w];for(let w=0;w<l;++w)y[x*l+w]=Math.trunc(v/g[w]),v%=g[w]}return[y,[a,l],c]}function Y$(t,e,n,r,s,i=!1,a=0){const l=r.length,c=[e[0],t.length/e[0]],u=c[1],f=l>0?s[l-1]+1:0;if(f<0)throw new Error(OO());const A=e.slice();A[0]=f;const m=A.reduce((B,k)=>B*k,1),g=ca(n,m);if(l===0)return f>0&&g.fill(a),[g,A];if(f<=0)throw new Error(OO());let y=0,x=1,v=0,w=s[y];for(;;){let B=0;if(x<l){if(B=s[x],w===B){++x;continue}if(w>=B)throw new Error(gne())}if(w<0||w>=f)throw new Error(yne(w,f));w>v&&g.fill(a,v*u,w*u);for(let k=y;k<x;++k){const j=r[k];if(j<0||j>=c[0])throw new Error(xne(k,r[k],c[0]));for(let I=0;I<u;I++)g[w*u+I]+=t[j*u+I]}if(i)for(let k=0;k<u;k++)g[w*u+k]/=x-y;if(y=x,++x,v=w+1,w=B,x>l)break}return v<f&&g.fill(a,v*u,f*u),[g,A]}const VTe=Bh(t=>Math.sqrt(t)),qTe=ks(Wx,t=>Math.sqrt(t)),GTe={kernelName:Wx,backendName:"cpu",kernelFunc:qTe};const jie=ka(((t,e)=>{const n=t-e;return n*n})),KTe=to(Vx,jie),XTe={kernelName:Vx,backendName:"cpu",kernelFunc:KTe};const Eie=Bh((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),YTe=Mm(k5,Eie),JTe={kernelName:k5,backendName:"cpu",kernelFunc:YTe};function Iie(t,e,n,r){const s=cr(t,e.dtype);for(let i=0;i<s.size;i++){const a=s.indexToLoc(i),l=new Array(a.length);for(let c=0;c<l.length;c++)l[c]=a[c]*n[c]+r[c];s.set(e.get(...l),...a)}return s}class ZTe{constructor(e,n,r,s,i,a){this.separator=ih(e),this.nGramWidths=n,this.leftPad=ih(r),this.rightPad=ih(s),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,a){for(let l=0;l<i;++l){const c=this.getPadWidth(a),u=Math.max(0,c-l),d=Math.max(0,c-(i-(l+1))),f=a-(u+d),A=n+(u>0?0:l-c);let m=0;m+=u*this.leftPad.length;for(let w=0;w<f;++w)m+=e[A+w].length;m+=d*this.rightPad.length;const g=u+d+f-1;m+=g*this.separator.length,r[s+l]=new Uint8Array(m);const y=r[s+l];let x=0;const v=w=>w.forEach(B=>y[x++]=B);for(let w=0;w<u;++w)v(this.leftPad),v(this.separator);for(let w=0;w<f-1;++w)v(e[A+w]),v(this.separator);if(f>0){v(e[A+f-1]);for(let w=0;w<d;++w)v(this.separator),v(this.rightPad)}else{for(let w=0;w<d-1;++w)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let c=n[0];if(c!==0)throw new Error(`First split value must be 0, got ${c}`);for(let u=1;u<s;++u){let d=n[u]>=c;if(d=d&&n[u]<=r,!d)throw new Error(`Invalid split value ${n[u]}, must be in [${c}, ${r}]`);c=n[u]}if(c!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${c}`)}const i=s-1,a=ca("int32",s);if(r===0||s===0){const c=new Array(r);for(let u=0;u<=i;++u)a[u]=0;return[c,a]}a[0]=0;for(let c=1;c<=i;++c){const u=n[c]-n[c-1];let d=0;this.nGramWidths.forEach(f=>{d+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&d===0&&(d=1),a[c]=a[c-1]+d}const l=new Array(a[i]);for(let c=0;c<i;++c){const u=n[c];let d=a[c];if(this.nGramWidths.forEach(f=>{const A=n[c+1]-n[c],m=this.getNumNGrams(A,f);this.createNGrams(e,u,l,d,m,f),d+=m}),this.preserveShort&&d===a[c]){const f=n[c+1]-n[c];if(f===0)continue;const A=f+2*this.padWidth;this.createNGrams(e,u,l,d,1,A)}}return[l,a]}}function Nie(t,e,n,r,s,i,a,l){return new ZTe(n,r,s,i,a,l).compute(t,e)}function e_e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=t.indexOf(i);for(;a!==-1;){const l=t.subarray(0,a);(!n||l.length!==0)&&r.push(l),t=t.subarray(a+1),a=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const a=t.subarray(s,i);(!n||a.length!==0)&&r.push(a),s=i+1}}function Tie(t,e,n){const r=t.length,s=[];let i=0,a=0;const l=new Array(r);for(let A=0;A<r;++A){const m=s.length;e_e(t[A],e,n,s);const g=s.length-m;l[A]=g,i+=g,a=Math.max(a,g)}const c=ca("int32",i*2),u=new Array(i),d=[r,a];let f=0;for(let A=0;A<r;++A)for(let m=0;m<l[A];++m)c[f*2]=A,c[f*2+1]=m,u[f]=s[f],++f;return[c,u,d]}function _ie(t,e){const n=ca("int32",t.length);for(let r=0;r<t.length;++r)n[r]=cee(t[r]).modulo(e).getLowBitsUnsigned();return n}const Rie=ka(((t,e)=>t-e)),t_e=q$(((t,e,n,r)=>({real:t-n,imag:e-r}))),J$=to(qx,Rie,t_e),n_e={kernelName:qx,backendName:"cpu",kernelFunc:J$};function Oie(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=cr(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),a=new Array(t.rank);for(let c=0;c<a.length;c++)a[c]=i[c]%t.shape[c];const l=t.locToIndex(a);r.values[s]=t.values[l]}return r}const Jv=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Fie(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*Math.sign(c-l/2),A=Math.max(n,Math.floor(e-c*d/l+f)),m=Math.min(r,Math.floor(e+(l-c)*d/l+f));Fie(t,e,A,m)}const s=t[e];let i=n,a=r;for(hA(t,n,e),Jv(t[r],s)>0&&hA(t,n,r);i<a;){for(hA(t,i,a),i++,a--;Jv(t[i],s)<0;)i=i+1;for(;Jv(t[a],s)>0;)a=a-1}Jv(t[n],s)===0?hA(t,n,a):(a=a+1,hA(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function Die(t,e,n,r,s){const i=e[e.length-1],[a,l]=[t.length/i,i],c=go(n,a*r),u=go("int32",a*r);for(let f=0;f<a;f++){const A=f*l,m=t.subarray(A,A+l);let g=new Array(m.length);m.forEach((w,B)=>g[B]={value:w,index:B}),r<g.length&&(Fie(g,r),g=g.slice(0,r)),s&&g.sort(Jv);const y=f*r,x=c.subarray(y,y+r),v=u.subarray(y,y+r);for(let w=0;w<r;w++)x[w]=g[w].value,v[w]=g[w].index}const d=e.slice();return d[d.length-1]=r,[cr(d,n,c),cr(d,"int32",u)]}function Lie(t,e,n,r){const s=Ar(e,n)[0],i=[1,n[0],1];for(let g=0;g<s;g++)i[0]*=n[g];i[1]=n[s];for(let g=s+1;g<n.length;g++)i[2]*=n[g];const a=new Map,l=new Int32Array(n[s]),c=new $a(i,r,t),u=[],d=i[0]===1&&i[2]===1;for(let g=0;g<n[s];g++){let y;if(d)y=t[g].toString();else{const v=[];for(let w=0;w<i[0];w++)for(let B=0;B<i[2];B++)v.push(c.get(w,g,B));y=v.join(",")}const x=a.get(y);if(x!=null)l[g]=x;else{const v=a.size;a.set(y,v),l[g]=v,u.push(g)}}const f=i.slice();f[1]=a.size;const A=new $a(f,r);u.forEach((g,y)=>{for(let x=0;x<i[0];x++)for(let v=0;v<i[2];v++)A.set(c.get(x,g,v),x,y,v)});const m=n.slice();return m[s]=f[1],{outputValues:A.values,outputShape:m,indices:l}}const r_e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Vse,bincountImpl:G$,bincountReduceImpl:qse,bitwiseAndImpl:Gse,castImpl:Wse,ceilImpl:Kse,concatImpl:Xse,equalImpl:Yse,expImpl:Zse,expm1Impl:tie,floorDivImpl:rie,floorImpl:nie,gatherNdImpl:sie,gatherV2Impl:iie,greaterEqualImpl:oie,greaterImpl:aie,lessEqualImpl:cie,lessImpl:lie,linSpaceImpl:uie,logImpl:die,maxImpl:fie,maximumImpl:hie,minimumImpl:Aie,multiplyImpl:K$,negImpl:pie,notEqualImpl:mie,prodImpl:gie,raggedGatherImpl:yie,raggedRangeImpl:xie,raggedTensorToTensorImpl:bie,rangeImpl:vie,rsqrtImpl:wie,scatterImpl:Ng,sigmoidImpl:QTe,simpleAbsImpl:Hse,sliceImpl:Cie,sparseFillEmptyRowsImpl:kie,sparseReshapeImpl:Bie,sparseSegmentReductionImpl:Y$,sqrtImpl:VTe,squaredDifferenceImpl:jie,staticRegexReplaceImpl:Eie,stridedSliceImpl:Iie,stringNGramsImpl:Nie,stringSplitImpl:Tie,stringToHashBucketFastImpl:_ie,subImpl:Rie,tileImpl:Oie,topKImpl:Die,transposeImpl:X$,uniqueImpl:Lie},Symbol.toStringTag,{value:"Module"}));RD("cpu",()=>new rI,1);const $ie=ks(mx,t=>t>=0?t:Math.exp(t)-1),s_e={kernelName:mx,backendName:"cpu",kernelFunc:$ie};function Pie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;yn([s],"leakyRelu");const a=it(s.shape),l=n.data.get(s.dataId).values,c=go("float32",a);for(let u=0;u<l.length;u++)c[u]=l[u]<0?i*l[u]:l[u];return n.makeTensorInfo(s.shape,"float32",c)}const i_e={kernelName:Gw,backendName:"cpu",kernelFunc:Pie};const a_e=ka((t,e)=>t<0?e*t:t);function zie(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;yn([r,s],"prelu");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,[l,c]=a_e(r.shape,s.shape,i,a,"float32");return n.makeTensorInfo(c,"float32",l)}const o_e={kernelName:h5,backendName:"cpu",kernelFunc:zie};const Uie=ks(Fx,t=>Math.max(0,t)),l_e={kernelName:Fx,backendName:"cpu",kernelFunc:Uie};const Mie=ks(Dx,t=>Math.min(Math.max(0,t),6)),c_e={kernelName:Dx,backendName:"cpu",kernelFunc:Mie};function A4(t,e,n,r,s){if(n==="linear")return xh({inputs:{x:e},backend:t});if(n==="relu")return Uie({inputs:{x:e},backend:t});if(n==="elu")return $ie({inputs:{x:e},backend:t});if(n==="relu6")return Mie({inputs:{x:e},backend:t});if(n==="prelu")return zie({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Pie({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return Sie({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function ri(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=it(s.shape),l=wD(i,a),c=it(l);ce(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const u=n.data.get(s.dataId);if(u.complexTensorInfos!=null){const d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;d.shape=l,f.shape=l}return{dataId:s.dataId,shape:l,dtype:s.dtype}}const u_e={kernelName:p5,backendName:"cpu",kernelFunc:ri};function Qie(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:l}=r;yn([s,i],"matMul");const c=s.shape.length,u=i.shape.length,d=a?s.shape[c-2]:s.shape[c-1],f=l?i.shape[u-1]:i.shape[u-2],A=a?s.shape[c-1]:s.shape[c-2],m=l?i.shape[u-2]:i.shape[u-1],g=s.shape.slice(0,-2),y=i.shape.slice(0,-2),x=it(g),v=it(y),B=rr(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([A,m]);ce(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${a} and transposeB=${l} must match.`);const k=a?[x,d,A]:[x,A,d],j=l?[v,m,f]:[v,f,m],I=ri({inputs:{x:s},backend:n,attrs:{shape:k}}),O=ri({inputs:{x:i},backend:n,attrs:{shape:j}}),F=a?I.shape[1]:I.shape[2],D=a?I.shape[2]:I.shape[1],T=l?O.shape[1]:O.shape[2],N=Math.max(x,v),P=n.data.get(I.dataId).values,z=n.data.get(O.dataId).values,U=On(I.shape),ee=On(O.shape),[q,Z,G]=a?[U[0],1,U[1]]:[U[0],U[1],1],[ne,K,H]=l?[1,ee[1],ee[0]]:[ee[1],1,ee[0]],Q=D*T,X=cr([N,D,T],I.dtype),re=X.values,le=n.blockSize;for(let Ae=0;Ae<N;Ae++){const xe=Ae%x,Be=Ae%v;for(let me=0;me<D;me+=le){const ve=Math.min(me+le,D);for(let je=0;je<T;je+=le){const ye=Math.min(je+le,T);for(let ze=0;ze<F;ze+=le){const at=Math.min(ze+le,F);for(let ie=me;ie<ve;ie++)for(let Le=je;Le<ye;Le++){let nt=0;for(let Et=ze;Et<at;Et++){const _e=P[xe*q+ie*Z+Et*G],ht=z[Et*ne+Le*K+Be*H];nt+=_e*ht}re[Ae*Q+(ie*T+Le)]+=nt}}}}}return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(O),n.makeTensorInfo(B,X.dtype,X.values)}const d_e={kernelName:_w,backendName:"cpu",kernelFunc:Qie};function f_e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:l}=e,{transposeA:c,transposeB:u,activation:d,leakyreluAlpha:f}=r;let A,m,g;const y=[];A=Qie({inputs:{a:s,b:i},attrs:{transposeA:c,transposeB:u},backend:n}),a&&(m=L1({inputs:{a:A,b:a},backend:n}),y.push(A),A=m),d&&(g=A4(n,A,d,l,f),y.push(A),A=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return A}const h_e={kernelName:N2,backendName:"cpu",kernelFunc:f_e};const A_e=ks(rx,t=>Math.acos(t)),p_e={kernelName:rx,backendName:"cpu",kernelFunc:A_e};const m_e=ks(sx,t=>Math.acosh(t)),g_e={kernelName:sx,backendName:"cpu",kernelFunc:m_e};function y_e(t){const{inputs:e,backend:n}=t,r=e;yn(e,"addN");const s=r.map(l=>n.data.get(l.dataId).values),i=cr(r[0].shape,r[0].dtype),a=i.values;for(let l=0;l<r.length;l++){const c=s[l];for(let u=0;u<a.length;u++)a[u]+=c[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const x_e={kernelName:jw,backendName:"cpu",kernelFunc:y_e};function b_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;yn(s,"all");const l=Ar(i,s.shape);let c=l;const u=Yi(c,s.shape.length);let d=s;u!=null&&(d=ic({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Sa(c.length,s.shape.length)),qo("all",c,d.shape.length);const[f,A]=bo(d.shape,c),m=it(A),g=Ho(it(f),d.dtype),y=n.data.get(d.dataId).values;for(let v=0;v<g.length;++v){const w=v*m;let B=y[w];for(let k=0;k<m;++k){const j=y[w+k];B=B&&j}g[v]=B}u!=null&&n.disposeIntermediateTensorInfo(d);const x=n.makeTensorInfo(f,d.dtype,g);if(a){const v=wa(f,l),w=ri({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),w}return x}const v_e={kernelName:Jj,backendName:"cpu",kernelFunc:b_e};function w_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;yn(s,"any");const l=Ar(i,s.shape);let c=l;const u=Yi(c,s.shape.length);let d=s;u!=null&&(d=ic({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Sa(c.length,s.shape.length)),qo("any",c,d.shape.length);const[f,A]=bo(d.shape,c),m=it(A),g=Ho(it(f),d.dtype),y=n.data.get(d.dataId).values;for(let v=0;v<g.length;++v){const w=v*m;let B=y[w];for(let k=0;k<m;++k){const j=y[w+k];B=B||j}g[v]=B}u!=null&&n.disposeIntermediateTensorInfo(d);const x=n.makeTensorInfo(f,d.dtype,g);if(a){const v=wa(f,l),w=ri({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),w}return x}const S_e={kernelName:Zj,backendName:"cpu",kernelFunc:w_e};function C_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;yn(s,"argMax");let a=Ar(i,s.shape);const l=Yi(a,s.shape.length);let c=s;const u=[];l!=null&&(c=ic({inputs:{x:s},backend:n,attrs:{perm:l}}),u.push(c),a=Sa(a.length,c.shape.length)),a=[a[0]],qo("argMax",a,c.shape.length);const[d,f]=bo(c.shape,a),A=it(d),m=Ho(A,"int32"),g=it(f),y=n.data.get(c.dataId).values;for(let x=0;x<m.length;++x){const v=x*g;let w=y[v],B=0;for(let k=0;k<g;++k){const j=y[v+k];j>w&&(w=j,B=k)}m[x]=B}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(d,"int32",m)}const k_e={kernelName:Ew,backendName:"cpu",kernelFunc:C_e};function B_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;yn(s,"argMin");let a=Ar(i,s.shape);const l=Yi(a,s.shape.length);let c=s;const u=[];l!=null&&(c=ic({inputs:{x:s},backend:n,attrs:{perm:l}}),u.push(c),a=Sa(a.length,c.shape.length)),a=[a[0]],qo("argMin",a,c.shape.length);const[d,f]=bo(c.shape,a),A=it(d),m=Ho(A,"int32"),g=it(f),y=n.data.get(c.dataId).values;for(let x=0;x<m.length;++x){const v=x*g;let w=y[v],B=0;for(let k=0;k<g;++k){const j=y[v+k];j<w&&(w=j,B=k)}m[x]=B}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(d,"int32",m)}const j_e={kernelName:Iw,backendName:"cpu",kernelFunc:B_e};const E_e=ks(ix,t=>Math.asin(t)),I_e={kernelName:ix,backendName:"cpu",kernelFunc:E_e};const N_e=ks(ax,t=>Math.asinh(t)),T_e={kernelName:ax,backendName:"cpu",kernelFunc:N_e};const __e=ks(ox,t=>Math.atan(t)),R_e={kernelName:ox,backendName:"cpu",kernelFunc:__e};const O_e=ka((t,e)=>Math.atan2(t,e)),F_e=to(cx,O_e),D_e={kernelName:cx,backendName:"cpu",kernelFunc:F_e};const L_e=ks(lx,t=>Math.atanh(t)),$_e={kernelName:lx,backendName:"cpu",kernelFunc:L_e};function Z$(t,e,n,r,s,i){const a=s.strideHeight,l=s.strideWidth,c=s.dilationHeight,u=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,A=s.padInfo.top,m=s.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=cr(s.outShape,n),x=y.values,v=s.outShape[1]*s.outShape[2]*s.outShape[3],w=s.outShape[2]*s.outShape[3],B=s.outShape[3];for(let k=0;k<s.batchSize;++k){const j=k*v,I=k*r[0];for(let O=0;O<s.inChannels;++O)for(let F=0;F<s.outHeight;++F){const D=F*a-A,T=Math.max(0,D),N=Math.min(s.inHeight,d+D),P=j+F*w;for(let z=0;z<s.outWidth;++z){const U=z*l-m,ee=Math.max(0,U),q=Math.min(s.inWidth,f+U);let Z=g,G=0,ne=0;for(let H=T;H<N;H+=c){const Q=I+H*r[1];for(let X=ee;X<q;X+=u){const re=Q+X*r[2],le=t[re+O];i==="max"&&le>Z?Z=le:i==="avg"&&(G+=le,ne++)}if(isNaN(Z))break}const K=P+z*B+O;x[K]=i==="avg"?G/ne:Z}}}return y}function Hie(t,e,n,r,s=!1,i=!1){const a=cr(r.outShape,"int32"),l=r.strideHeight,c=r.strideWidth,u=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterHeight,A=r.effectiveFilterWidth,m=r.padInfo.top,g=r.padInfo.left,y=cr(e,n,t);for(let x=0;x<r.batchSize;++x)for(let v=0;v<r.inChannels;++v)for(let w=0;w<r.outHeight;++w){const B=w*l-m;let k=B;for(;k<0;)k+=u;const j=Math.min(r.inHeight,f+B);for(let I=0;I<r.outWidth;++I){const O=I*c-g;let F=O;for(;F<0;)F+=d;const D=Math.min(r.inWidth,A+O);let T=Number.NEGATIVE_INFINITY,N=-1;for(let P=k;P<j;P+=u){const z=P-B;for(let U=F;U<D;U+=d){const ee=U-O,q=y.get(x,P,U,v);q>T&&(T=q,s?N=i?((x*r.inHeight+P)*r.inWidth+U)*r.inChannels+v:(P*r.inWidth+U)*r.inChannels+v:N=z*A+ee)}}a.set(N,x,w,I,v)}}return a}function Wie(t,e,n,r,s,i){const a=s.strideDepth,l=s.strideHeight,c=s.strideWidth,u=s.dilationDepth,d=s.dilationHeight,f=s.dilationWidth,A=s.effectiveFilterDepth,m=s.effectiveFilterHeight,g=s.effectiveFilterWidth,y=s.padInfo.front,x=s.padInfo.top,v=s.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,B=cr(s.outShape,n),k=B.values,j=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],I=s.outShape[2]*s.outShape[3]*s.outShape[4],O=s.outShape[3]*s.outShape[4],F=s.outShape[4];for(let D=0;D<s.batchSize;++D){const T=D*j,N=D*r[0];for(let P=0;P<s.inChannels;++P)for(let z=0;z<s.outDepth;++z){const U=z*a-y;let ee=U;for(;ee<0;)ee+=u;const q=Math.min(s.inDepth,A+U),Z=T+z*I;for(let G=0;G<s.outHeight;++G){const ne=G*l-x;let K=ne;for(;K<0;)K+=d;const H=Math.min(s.inHeight,m+ne),Q=Z+G*O;for(let X=0;X<s.outWidth;++X){const re=X*c-v;let le=re;for(;le<0;)le+=f;const Ae=Math.min(s.inWidth,g+re),xe=Q+X*F;let Be=w,me=0,ve=0;for(let ye=ee;ye<q;ye+=u){const ze=N+ye*r[1];for(let at=K;at<H;at+=d){const ie=ze+at*r[2];for(let Le=le;Le<Ae;Le+=f){const nt=ie+Le*r[3],Et=t[nt+P];if(i==="max"&&Et>Be?Be=Et:i==="avg"&&(me+=Et,ve++),isNaN(Be))break}if(isNaN(Be))break}if(isNaN(Be))break}const je=xe+P;k[je]=i==="avg"?me/Math.max(ve,1):Be}}}}return B}function P_e(t,e){const n=cr(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,A=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let x=0;x<e.inChannels;++x)for(let v=0;v<e.outDepth;++v){const w=v*r-A;let B=w;for(;B<0;)B+=a;const k=Math.min(e.inDepth,u+w);for(let j=0;j<e.outHeight;++j){const I=j*s-m;let O=I;for(;O<0;)O+=l;const F=Math.min(e.inHeight,d+I);for(let D=0;D<e.outWidth;++D){const T=D*i-g;let N=T;for(;N<0;)N+=c;const P=Math.min(e.inWidth,f+T);let z=Number.NEGATIVE_INFINITY,U=-1;for(let ee=B;ee<k;ee+=a){const q=ee-w;for(let Z=O;Z<F;Z+=l){const G=Z-I;for(let ne=N;ne<P;ne+=c){const K=ne-T,H=t.get(y,ee,Z,ne,x);H>=z&&(z=H,U=q*d*f+G*d+K)}}}n.set(U,y,v,j,D,x)}}}return n}function z_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;yn(s,"avgPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r,u=1;ce(Vo(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=md(s.shape,i,a,u,l,c);let f;if(d.filterWidth===1&&d.filterHeight===1&&vr(d.inShape,d.outShape))f=xh({inputs:{x:s},backend:n});else{const A=n.data.get(s.dataId).values,m=On(s.shape),g=Z$(A,s.shape,s.dtype,m,d,"avg");f=n.makeTensorInfo(d.outShape,s.dtype,g.values)}return f}const U_e={kernelName:Nw,backendName:"cpu",kernelFunc:z_e};function M_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=r;yn(s,"avgPool3d");const d=GA(s.shape,i,a,1,l,c,u),f=n.data.get(s.dataId).values,A=Wie(f,s.shape,s.dtype,On(s.shape),d,"avg");return n.makeTensorInfo(A.shape,"float32",A.values)}const Q_e={kernelName:Tw,backendName:"cpu",kernelFunc:M_e};function H_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r;yn([s,i],"avgPool3DGrad");const d=GA(i.shape,a,l,1,c,u),f=d.strideDepth,A=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,x=d.filterWidth,v=d.dilationDepth,w=d.dilationHeight,B=d.dilationWidth,k=d.effectiveFilterDepth,j=d.effectiveFilterHeight,I=d.effectiveFilterWidth,O=k-1-d.padInfo.front,F=I-1-d.padInfo.left,D=j-1-d.padInfo.top,T=cr(i.shape,"float32"),N=1/(g*y*x),P=n.bufferSync(s);for(let z=0;z<d.batchSize;++z)for(let U=0;U<d.inChannels;++U)for(let ee=0;ee<d.inDepth;++ee)for(let q=0;q<d.inHeight;++q)for(let Z=0;Z<d.inWidth;++Z){const G=ee-O,ne=q-D,K=Z-F;let H=0;for(let Q=0;Q<k;Q+=v){const X=(G+Q)/f;if(!(X<0||X>=d.outDepth||Math.floor(X)!==X))for(let re=0;re<j;re+=w){const le=(ne+re)/A;if(!(le<0||le>=d.outHeight||Math.floor(le)!==le))for(let Ae=0;Ae<I;Ae+=B){const xe=(K+Ae)/m;if(xe<0||xe>=d.outWidth||Math.floor(xe)!==xe)continue;const Be=P.get(z,X,le,xe,U);H+=Be}}}T.set(H*N,z,ee,q,Z,U)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const W_e={kernelName:tE,backendName:"cpu",kernelFunc:H_e};function V_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;yn([s,i],"avgPoolGrad");const{filterSize:l,strides:c,pad:u}=r,d=md(a.shape,l,c,1,u),f=d.strideHeight,A=d.strideWidth,m=d.filterHeight,g=d.filterWidth,y=d.dilationHeight,x=d.dilationWidth,v=d.effectiveFilterHeight,w=d.effectiveFilterWidth,B=w-1-d.padInfo.left,k=v-1-d.padInfo.top,j=cr(a.shape,"float32"),I=1/(m*g),O=n.data.get(s.dataId).values,F=cr(s.shape,"float32",O);for(let D=0;D<d.batchSize;++D)for(let T=0;T<d.inChannels;++T)for(let N=0;N<d.inHeight;++N)for(let P=0;P<d.inWidth;++P){const z=N-k,U=P-B;let ee=0;for(let q=0;q<v;q+=y){const Z=(z+q)/f;if(!(Z<0||Z>=d.outHeight||Math.floor(Z)!==Z))for(let G=0;G<w;G+=x){const ne=(U+G)/A;if(ne<0||ne>=d.outWidth||Math.floor(ne)!==ne)continue;const K=F.get(D,Z,ne,T);ee+=K}}j.set(ee*I,D,N,P,T)}return n.makeTensorInfo(j.shape,j.dtype,j.values)}const q_e={kernelName:eE,backendName:"cpu",kernelFunc:V_e};function G_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:a,mean:l,variance:c}=e;ce(l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(i==null||l.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),yn([s,l,c,i,a],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const d=n.data.get(s.dataId).values,f=n.data.get(l.dataId).values,A=n.data.get(c.dataId).values,m=i?n.data.get(i.dataId).values:new Float32Array([1]),g=a?n.data.get(a.dataId).values:new Float32Array([0]),y=new Float32Array(d.length),x=g.length,v=m.length,w=A.length,B=f.length;let k=0,j=0,I=0,O=0;for(let F=0;F<d.length;++F)y[F]=g[k++]+(d[F]-f[j++])*m[I++]/Math.sqrt(A[O++]+u),k>=x&&(k=0),j>=B&&(j=0),I>=v&&(I=0),O>=w&&(O=0);return n.makeTensorInfo(s.shape,s.dtype,y)}const K_e={kernelName:Ww,backendName:"cpu",kernelFunc:G_e};function X_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;yn([s],"batchToSpaceND");const l=i.reduce((v,w)=>v*w),c=X5(s.shape,i,l),u=Y5(c.length,i.length),d=J5(s.shape,i,l),f=a$(a,i.length),A=o$(d,a,i.length),m=ri({inputs:{x:s},backend:n,attrs:{shape:c}}),g=ic({inputs:{x:m},backend:n,attrs:{perm:u}}),y=ri({inputs:{x:g},backend:n,attrs:{shape:d}}),x=A0({inputs:{x:y},backend:n,attrs:{begin:f,size:A}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const Y_e={kernelName:Rw,backendName:"cpu",kernelFunc:X_e};function J_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=G$(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const Z_e={kernelName:nE,backendName:"cpu",kernelFunc:J_e};function eRe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=rr(Array.from(i),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}const tRe={kernelName:rE,backendName:"cpu",kernelFunc:eRe};const nRe=ks(fx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),rRe={kernelName:fx,backendName:"cpu",kernelFunc:nRe};const sRe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(it(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values;for(let u=0;u<l.length;u++){const d=l[u],f=c[u];r[u]=Math.hypot(d,f)}return n.makeOutput(r,e.shape,"float32")},iRe={kernelName:Fw,backendName:"cpu",kernelFunc:sRe};function $1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const aRe={kernelName:SE,backendName:"cpu",kernelFunc:$1};function P1(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Ar(s,e[0].shape)[0],a=e.map(y=>y.shape);r$(a,i);let l=oh(e.map(y=>y.shape),i);if(it(l)===0)return n.makeTensorInfo(l,e[0].dtype,[]);const c=e.filter(y=>it(y.shape)>0);if(c.length===1)return xh({inputs:{x:c[0]},backend:n});if(c[0].dtype==="complex64"){const y=c.map(k=>h0({inputs:{input:k},backend:n})),x=c.map(k=>$1({inputs:{input:k},backend:n})),v=P1({inputs:y,backend:n,attrs:{axis:i}}),w=P1({inputs:x,backend:n,attrs:{axis:i}}),B=Tc({inputs:{real:v,imag:w},backend:n});return y.forEach(k=>n.disposeIntermediateTensorInfo(k)),x.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),B}const u=c.map(y=>{const v=[-1,it(y.shape.slice(i))];return ri({inputs:{x:y},backend:n,attrs:{shape:v}})}),d=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));l=oh(u.map(y=>y.shape),1);const f=u[0].shape[0]===1,A=Xse(d,l,e[0].dtype,f),m=oh(c.map(y=>y.shape),i),g=n.makeTensorInfo(m,e[0].dtype,A);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const oRe={kernelName:Dw,backendName:"cpu",kernelFunc:P1};function Vie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dataFormat:c,dilations:u,dimRoundingMode:d}=r;yn([s,i],"conv2d");const f=KA(c),A=xo(s.shape,i.shape,a,u,l,d,!1,f),m=A.filterHeight,g=A.filterWidth,y=A.dilationHeight,x=A.dilationWidth,v=A.padInfo.left,w=A.padInfo.top,B=A.dataFormat==="channelsLast",k=new $a(A.outShape,s.dtype),j=On(s.shape),I=On(i.shape),O=j[0],F=B?j[1]:j[2],D=B?j[2]:1,T=B?1:j[1],N=k.strides[0],P=B?k.strides[1]:k.strides[2],z=B?k.strides[2]:1,U=B?1:k.strides[1],ee=n.data.get(s.dataId).values,q=n.data.get(i.dataId).values,Z=k.values;for(let G=0;G<A.batchSize;++G){const ne=G*O,K=G*N;for(let H=0;H<A.outHeight;++H){const Q=K+H*P,X=H*A.strideHeight-w;for(let re=0;re<m;++re){const le=X+re*y;if(le<0||le>=A.inHeight)continue;const Ae=re*I[0],xe=ne+le*F;for(let Be=0;Be<A.outWidth;++Be){const me=Q+Be*z,ve=Be*A.strideWidth-v;for(let je=0;je<g;++je){const ye=ve+je*x;if(ye<0||ye>=A.inWidth)continue;const ze=Ae+je*I[1],at=xe+ye*D;let ie=ze;for(let Le=0;Le<A.inChannels;++Le){const nt=ee[at+Le*T];for(let Et=0;Et<A.outChannels;++Et)Z[me+Et*U]+=nt*q[ie+Et];ie+=A.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,Z)}const lRe={kernelName:Lw,backendName:"cpu",kernelFunc:Vie};function cRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:l,dataFormat:c,dimRoundingMode:u,filterShape:d}=r;yn([s,i],"conv2dBackpropFilter");const f=KA(c),A=xo(s.shape,d,a,1,l,u,!1,f),{strideHeight:m,strideWidth:g,filterHeight:y,filterWidth:x}=A,v=A.dataFormat==="channelsLast",w=new $a(A.filterShape,"float32"),B=A.padInfo.left,k=A.padInfo.top,j=n.data.get(s.dataId).values,I=n.data.get(i.dataId).values,O=new $a(s.shape,s.dtype,j),F=new $a(i.shape,i.dtype,I);for(let D=0;D<y;++D){const T=Math.max(0,Math.ceil((k-D)/m)),N=Math.min(A.outHeight,(A.inHeight+k-D)/m);for(let P=0;P<x;++P){const z=Math.max(0,Math.ceil((B-P)/g)),U=Math.min(A.outWidth,(A.inWidth+B-P)/g);for(let ee=0;ee<A.inChannels;++ee)for(let q=0;q<A.outChannels;++q){let Z=0;for(let G=0;G<A.batchSize;++G)for(let ne=T;ne<N;++ne){const K=D+ne*m-k;for(let H=z;H<U;++H){const Q=P+H*g-B;v?Z+=O.get(G,K,Q,ee)*F.get(G,ne,H,q):Z+=O.get(G,ee,K,Q)*F.get(G,q,ne,H)}}w.set(Z,D,P,ee,q)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const uRe={kernelName:iE,backendName:"cpu",kernelFunc:cRe};function dRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:l,pad:c,dataFormat:u,dimRoundingMode:d}=r;yn([s,i],"conv2dBackpropInput");const f=On(i.shape),A=On(s.shape);let m=KA(u);const g=xo(a,i.shape,l,1,c,d,!1,m),y=new $a(g.inShape,"float32"),x=y.values,v=n.data.get(s.dataId).values,w=n.data.get(i.dataId).values,[B,k,j]=f,{batchSize:I,filterHeight:O,filterWidth:F,inChannels:D,inHeight:T,inWidth:N,outChannels:P,outHeight:z,outWidth:U,strideHeight:ee,strideWidth:q}=g;m=g.dataFormat;const Z=O-1-g.padInfo.top,G=F-1-g.padInfo.left,ne=m==="channelsLast",K=y.strides[0],H=ne?y.strides[1]:y.strides[2],Q=ne?y.strides[2]:1,X=ne?1:y.strides[1],re=A[0],le=ne?A[1]:A[2],Ae=ne?A[2]:1,xe=ne?1:A[1];for(let Be=0;Be<I;++Be)for(let me=0;me<D;++me)for(let ve=0;ve<T;++ve){const je=ve-Z,ye=Math.max(0,Math.ceil(je/ee)),ze=Math.min(z,(O+je)/ee);for(let at=0;at<N;++at){const ie=at-G,Le=Math.max(0,Math.ceil(ie/q)),nt=Math.min(U,(F+ie)/q);let Et=0;for(let ht=ye;ht<ze;++ht){const ot=ht*ee-je;for(let $t=Le;$t<nt;++$t){const kt=$t*q-ie,Ht=re*Be+le*ht+Ae*$t,Sn=B*(O-1-ot)+k*(F-1-kt)+j*me;for(let Ut=0;Ut<P;++Ut){const en=v[Ht+xe*Ut],fn=w[Sn+Ut];Et+=en*fn}}}const _e=K*Be+H*ve+Q*at+X*me;x[_e]=Et}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const fRe={kernelName:$w,backendName:"cpu",kernelFunc:dRe};function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dilations:c}=r;yn([s,i],"conv3d");const u=Dm(s.shape,i.shape,a,c,l),{filterDepth:d,filterHeight:f,filterWidth:A,dilationDepth:m,dilationHeight:g,dilationWidth:y,padInfo:x}=u,v=x.front,w=x.left,B=x.top,k=new $a(u.outShape,s.dtype),j=n.data.get(s.dataId).values,I=n.data.get(i.dataId).values,O=k.values,F=On(s.shape),D=On(i.shape);for(let T=0;T<u.batchSize;++T){const N=T*F[0],P=T*k.strides[0];for(let z=0;z<u.outDepth;++z){const U=P+z*k.strides[1],ee=z*u.strideDepth-v;for(let q=0;q<d;++q){const Z=ee+q*m;if(Z<0||Z>=u.inDepth)continue;const G=q*D[0],ne=N+Z*F[1];for(let K=0;K<u.outHeight;++K){const H=U+K*k.strides[2],Q=K*u.strideHeight-B;for(let X=0;X<f;++X){const re=Q+X*g;if(re<0||re>=u.inHeight)continue;const le=G+X*D[1],Ae=ne+re*F[2];for(let xe=0;xe<u.outWidth;++xe){const Be=H+xe*u.outChannels,me=xe*u.strideWidth-w;for(let ve=0;ve<A;++ve){const je=me+ve*y;if(je<0||je>=u.inWidth)continue;const ye=le+ve*D[2],ze=Ae+je*u.inChannels;let at=ye;for(let ie=0;ie<u.inChannels;++ie){const Le=j[ze+ie];for(let nt=0;nt<u.outChannels;++nt)O[Be+nt]+=Le*I[at+nt];at+=u.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const ARe={kernelName:Pw,backendName:"cpu",kernelFunc:hRe};function pRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:l,filterShape:c}=r;yn([s,i],"conv3dBackpropFilterV2");const u=On(s.shape),d=On(i.shape),f=Dm(s.shape,c,a,1,l),A=f.strideDepth,m=f.strideHeight,g=f.strideWidth,y=f.filterDepth,x=f.filterHeight,v=f.filterWidth,w=new $a(f.filterShape,"float32"),B=w.values,[k,j,I,O]=w.strides,F=n.data.get(i.dataId).values,[D,T,N,P]=d,z=n.data.get(s.dataId).values,[U,ee,q,Z]=u,G=f.padInfo.front,ne=f.padInfo.left,K=f.padInfo.top;for(let H=0;H<y;++H){const Q=Math.max(0,Math.ceil((G-H)/A)),X=Math.min(f.outDepth,(f.inDepth+G-H)/A),re=H*k;for(let le=0;le<x;++le){const Ae=Math.max(0,Math.ceil((K-le)/m)),xe=Math.min(f.outHeight,(f.inHeight+K-le)/m),Be=le*j+re;for(let me=0;me<v;++me){const ve=Math.max(0,Math.ceil((ne-me)/g)),je=Math.min(f.outWidth,(f.inWidth+ne-me)/g),ye=me*I+Be;for(let ze=0;ze<f.inChannels;++ze){const at=ze*O+ye;for(let ie=0;ie<f.outChannels;++ie){let Le=0;for(let nt=0;nt<f.batchSize;++nt){const Et=nt*U,_e=nt*D;for(let ht=Q;ht<X;++ht){const $t=(H+ht*A-G)*ee+Et,kt=ht*T+_e;for(let Ht=Ae;Ht<xe;++Ht){const Ut=(le+Ht*m-K)*q+$t,en=Ht*N+kt;for(let fn=ve;fn<je;++fn){const rn=(me+fn*g-ne)*Z+Ut,Yt=fn*P+en;Le+=z[rn+ze]*F[Yt+ie]}}}}B[at+ie]=Le}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const mRe={kernelName:aE,backendName:"cpu",kernelFunc:pRe};function gRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:l,inputShape:c}=r;yn([s],"conv3dBackpropInputV2");const u=On(s.shape),d=On(i.shape),f=Dm(c,i.shape,l,1,a),A=new $a(f.inShape,"float32"),m=A.values,[g,y,x,v]=A.strides,w=n.data.get(s.dataId).values,[B,k,j,I]=u,O=n.data.get(i.dataId).values,[F,D,T,N]=d,{batchSize:P,filterDepth:z,filterHeight:U,filterWidth:ee,inChannels:q,inDepth:Z,inHeight:G,inWidth:ne,outChannels:K,outDepth:H,outHeight:Q,outWidth:X,strideDepth:re,strideHeight:le,strideWidth:Ae}=f,xe=z-1-f.padInfo.front,Be=U-1-f.padInfo.top,me=ee-1-f.padInfo.left;for(let ve=0;ve<P;++ve)for(let je=0;je<q;++je)for(let ye=0;ye<Z;++ye){const ze=ye-xe,at=Math.max(0,Math.ceil(ze/re)),ie=Math.min(H,(z+ze)/re);for(let Le=0;Le<G;++Le){const nt=Le-Be,Et=Math.max(0,Math.ceil(nt/le)),_e=Math.min(Q,(U+nt)/le);for(let ht=0;ht<ne;++ht){const ot=ht-me,$t=Math.max(0,Math.ceil(ot/Ae)),kt=Math.min(X,(ee+ot)/Ae);let Ht=0;for(let Sn=at;Sn<ie;++Sn){const Ut=Sn*re-ze;for(let en=Et;en<_e;++en){const fn=en*le-nt;for(let Qt=$t;Qt<kt;++Qt){const rn=Qt*Ae-ot,Yt=B*ve+k*Sn+j*en+I*Qt,sn=F*(z-1-Ut)+D*(U-1-fn)+T*(ee-1-rn)+N*je;for(let Fn=0;Fn<K;++Fn){const Ft=w[Yt+Fn],xn=O[sn+Fn];Ht+=Ft*xn}}}}m[g*ve+y*ye+x*Le+v*ht+je]=Ht}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const yRe={kernelName:oE,backendName:"cpu",kernelFunc:gRe};const xRe=ks(hx,t=>Math.cos(t)),bRe={kernelName:hx,backendName:"cpu",kernelFunc:xRe};const vRe=ks(Ax,t=>Math.cosh(t)),wRe={kernelName:Ax,backendName:"cpu",kernelFunc:vRe};function SRe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:l,method:c,extrapolationValue:u}=r,[d,f,A,m]=s.shape,g=i.shape[0],[y,x]=l,v=cr([g,y,x,m],"float32"),w=n.data.get(i.dataId).values,B=n.data.get(a.dataId).values,k=n.data.get(s.dataId).values,j=On(s.shape),I=On(v.shape);for(let O=0;O<g;O++){const F=O*4,D=w[F],T=w[F+1],N=w[F+2],P=w[F+3],z=B[O];if(z>=d)continue;const U=y>1?(N-D)*(f-1)/(y-1):0,ee=x>1?(P-T)*(A-1)/(x-1):0;for(let q=0;q<y;q++){const Z=y>1?D*(f-1)+q*U:.5*(D+N)*(f-1);if(Z<0||Z>f-1){for(let G=0;G<x;G++)for(let ne=0;ne<m;ne++){const K=ne+G*I[2]+q*I[1]+O*I[0];v.values[K]=u}continue}if(c==="bilinear"){const G=Math.floor(Z),ne=Math.ceil(Z),K=Z-G;for(let H=0;H<x;H++){const Q=x>1?T*(A-1)+H*ee:.5*(T+P)*(A-1);if(Q<0||Q>A-1){for(let Ae=0;Ae<m;Ae++){const xe=Ae+H*I[2]+q*I[1]+O*I[0];v.values[xe]=u}continue}const X=Math.floor(Q),re=Math.ceil(Q),le=Q-X;for(let Ae=0;Ae<m;Ae++){let xe=Ae+X*j[2]+G*j[1]+z*j[0];const Be=k[xe];xe=Ae+re*j[2]+G*j[1]+z*j[0];const me=k[xe];xe=Ae+X*j[2]+ne*j[1]+z*j[0];const ve=k[xe];xe=Ae+re*j[2]+ne*j[1]+z*j[0];const je=k[xe],ye=Be+(me-Be)*le,ze=ve+(je-ve)*le;xe=Ae+H*I[2]+q*I[1]+O*I[0],v.values[xe]=ye+(ze-ye)*K}}}else for(let G=0;G<x;++G){const ne=x>1?T*(A-1)+G*ee:.5*(T+P)*(A-1);if(ne<0||ne>A-1){for(let Q=0;Q<m;Q++){const X=Q+G*I[2]+q*I[1]+O*I[0];v.values[X]=u}continue}const K=Math.round(ne),H=Math.round(Z);for(let Q=0;Q<m;Q++){const X=Q+K*j[2]+H*j[1]+z*j[0],re=Q+G*I[2]+q*I[1]+O*I[0];v.values[re]=k[X]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const CRe={kernelName:cE,backendName:"cpu",kernelFunc:SRe};function kRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:l}=r;yn(s,"cumprod");const c=Yi([i],s.shape.length);let u=s;c!=null&&(u=ic({inputs:{x:s},backend:n,attrs:{perm:c}}));const d=Sa(1,s.shape.length)[0];if(d!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${d}`);const f=ec(u.dtype,"int32"),A=Yj(it(u.shape),f),m=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=l?(v,w)=>v+g-w-1:(v,w)=>v+w;for(let v=0;v<m.length;v+=g)for(let w=0;w<g;w++){const B=y(v,w);if(w===0)A[B]=a?1:m[B];else{const k=y(v,w-1);A[B]=a?m[k]*A[k]:m[B]*A[k]}}const x=n.makeTensorInfo(u.shape,f,A);if(c!=null){const v=Lm(c),w=ic({inputs:{x},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(u),w}return x}const BRe={kernelName:lE,backendName:"cpu",kernelFunc:kRe};function jRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:l}=r;yn(s,"cumsum");const c=Yi([i],s.shape.length);let u=s;c!=null&&(u=ic({inputs:{x:s},backend:n,attrs:{perm:c}}));const d=Sa(1,s.shape.length)[0];if(d!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${d}`);const f=ec(u.dtype,"int32"),A=Ho(it(u.shape),f),m=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=l?(v,w)=>v+g-w-1:(v,w)=>v+w;for(let v=0;v<m.length;v+=g)for(let w=0;w<g;w++){const B=y(v,w);if(w===0)A[B]=a?0:m[B];else{const k=y(v,w-1);A[B]=a?m[k]+A[k]:m[B]+A[k]}}const x=n.makeTensorInfo(u.shape,f,A);if(c!=null){const v=Lm(c),w=ic({inputs:{x},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(u),w}return x}const ERe={kernelName:zw,backendName:"cpu",kernelFunc:jRe};function IRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:l}=r;if(s.shape.length===1){const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=G$(c,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,d)}else if(s.shape.length===2){const c=n.bufferSync(s),u=n.bufferSync(i),d=qse(c,u,a,l);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const NRe={kernelName:uE,backendName:"cpu",kernelFunc:IRe};function TRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r;ce(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const l=s.shape[0],c=s.shape[1],u=s.shape[2],d=s.shape[3],f=c*i,A=u*i,m=d/(i*i),g=n.data.get(s.dataId).values,y=new Float32Array(l*f*A*m);let x=0;for(let v=0;v<l;++v)for(let w=0;w<f;++w){const B=Math.floor(w/i),k=w%i;for(let j=0;j<A;++j){const I=Math.floor(j/i),O=j%i,F=(k*i+O)*m;for(let D=0;D<m;++D){const N=D+F+d*(I+u*(B+c*v));y[x++]=g[N]}}}return n.makeTensorInfo([l,f,A,m],s.dtype,y)}const _Re={kernelName:dE,backendName:"cpu",kernelFunc:TRe};function qie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dilations:c,dimRoundingMode:u}=r;yn([s,i],"depthwiseConv2DNative");const d=On(s.shape),f=On(i.shape);let A=c;A==null&&(A=[1,1]),ce(Vo(a,A),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${A}'`);const m=xo(s.shape,i.shape,a,A,l,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:x,dilationWidth:v,padInfo:w}=m,B=w.left,k=w.top,j=m.outChannels/m.inChannels,I=new $a(m.outShape,s.dtype),O=n.data.get(s.dataId).values,F=n.data.get(i.dataId).values,D=I.values;for(let T=0;T<m.batchSize;++T){const N=T*d[0],P=T*I.strides[0];for(let z=0;z<m.outHeight;++z){const U=P+z*I.strides[1],ee=z*m.strideHeight-k;for(let q=0;q<g;++q){const Z=ee+q*x;if(Z<0||Z>=m.inHeight)continue;const G=q*f[0],ne=N+Z*d[1];for(let K=0;K<m.outWidth;++K){const H=U+K*I.strides[2],Q=K*m.strideWidth-B;for(let X=0;X<y;++X){const re=Q+X*v;if(re<0||re>=m.inWidth)continue;const le=G+X*f[1],Ae=ne+re*m.inChannels;let xe=H,Be=le;for(let me=0;me<m.inChannels;++me){const ve=O[Ae+me];for(let je=0;je<j;++je)D[xe+je]+=ve*F[Be+je];xe+=j,Be+=j}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const RRe={kernelName:Uw,backendName:"cpu",kernelFunc:qie};function ORe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,filterShape:d}=r;yn([s,i],"depthwiseConv2dNativeBackpropFilter");const f=xo(s.shape,d,a,l,c,u,!0),{strideHeight:A,strideWidth:m,filterHeight:g,filterWidth:y}=f,x=new $a(f.filterShape,"float32"),v=f.padInfo.left,w=f.padInfo.top,B=f.outChannels/f.inChannels,k=n.data.get(s.dataId).values,j=new $a(s.shape,s.dtype,k),I=n.data.get(i.dataId).values,O=new $a(i.shape,i.dtype,I);for(let F=0;F<g;++F){const D=Math.max(0,Math.ceil((w-F)/A)),T=Math.min(f.outHeight,(f.inHeight+w-F)/A);for(let N=0;N<y;++N){const P=Math.max(0,Math.ceil((v-N)/m)),z=Math.min(f.outWidth,(f.inWidth+v-N)/m);for(let U=0;U<f.outChannels;++U){const ee=Math.trunc(U/B),q=U%B;let Z=0;for(let G=0;G<f.batchSize;++G)for(let ne=D;ne<T;++ne){const K=F+ne*A-w;for(let H=P;H<z;++H){const Q=N+H*m-v;Z+=j.get(G,K,Q,ee)*O.get(G,ne,H,U)}}x.set(Z,F,N,ee,q)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const FRe={kernelName:fE,backendName:"cpu",kernelFunc:ORe};function DRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,inputShape:d}=r;yn([s,i],"depthwiseConv2DNativeBackpropInput");const f=On(s.shape),A=On(i.shape),m=xo(d,i.shape,a,l,c,u,!0),g=new $a(m.inShape,"float32"),y=g.values,[x,v,w]=g.strides,B=n.data.get(s.dataId).values,[k,j,I]=f,O=n.data.get(i.dataId).values,[F,D,T]=A,{batchSize:N,filterHeight:P,filterWidth:z,inChannels:U,inHeight:ee,inWidth:q,outChannels:Z,outHeight:G,outWidth:ne,strideHeight:K,strideWidth:H}=m,Q=P-1-m.padInfo.top,X=z-1-m.padInfo.left,re=Z/U;for(let le=0;le<N;++le)for(let Ae=0;Ae<U;++Ae)for(let xe=0;xe<ee;++xe){const Be=xe-Q,me=Math.max(0,Math.ceil(Be/K)),ve=Math.min(G,(P+Be)/K);for(let je=0;je<q;++je){const ye=je-X,ze=Math.max(0,Math.ceil(ye/H)),at=Math.min(ne,(z+ye)/H);let ie=0;for(let Le=me;Le<ve;++Le){const nt=Le*K-Be;for(let Et=ze;Et<at;++Et){const _e=Et*H-ye,ht=k*le+j*Le+I*Et,ot=F*(P-1-nt)+D*(z-1-_e)+T*Ae;for(let $t=0;$t<re;++$t){const kt=Ae*re+$t,Ht=B[ht+kt],Sn=O[ot+$t];ie+=Ht*Sn}}}y[x*le+v*xe+w*je+Ae]=ie}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const LRe={kernelName:hE,backendName:"cpu",kernelFunc:DRe};function $Re(t){const{inputs:e,backend:n}=t,{x:r}=e,s=it(r.shape),i=n.data.get(r.dataId).values,a=cr([s,s],r.dtype),l=a.values;for(let u=0;u<i.length;u++)l[u*s+u]=i[u];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,a.dtype,a.values)}const PRe={kernelName:AE,backendName:"cpu",kernelFunc:$Re};const zRe={kernelName:Mw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=c.data.get(r.dataId).values,d=r.shape.length,f=c.data.get(s.dataId).values,A=s.shape.length,{batchSize:m,inHeight:g,inWidth:y,inChannels:x,outHeight:v,outWidth:w,padInfo:B,strideHeight:k,strideWidth:j,filterHeight:I,filterWidth:O,dilationHeight:F,dilationWidth:D,outShape:T}=T5(r.shape,s.shape,i,a,"NHWC",l),N=it(T),P=T.length,z=ca(r.dtype,N);for(let ee=0;ee<m;++ee)for(let q=0;q<v;++q){const Z=q*k-B.top;for(let G=0;G<w;++G){const ne=G*j-B.left;for(let K=0;K<x;++K){let H=Number.MIN_SAFE_INTEGER;for(let X=0;X<I;++X){const re=Z+X*F;if(re>=0&&re<g)for(let le=0;le<O;++le){const Ae=ne+le*D;if(Ae>=0&&Ae<y){const xe=af([ee,re,Ae,K],d,On(r.shape)),Be=af([X,le,K],A,On(s.shape)),me=u[xe]+f[Be];me>H&&(H=me)}}}const Q=af([ee,q,G,K],P,On(T));z[Q]=H}}}return{dataId:c.write(Om(z,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};const URe={kernelName:KB,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:l,dilations:c}=n,u=e,d=yu(r.shape,u.data.get(r.dataId).values),f=yu(s.shape,u.data.get(s.dataId).values),{batchSize:A,inHeight:m,inWidth:g,inChannels:y,outHeight:x,outWidth:v,padInfo:w,strideHeight:B,strideWidth:k,filterHeight:j,filterWidth:I,dilationHeight:O,dilationWidth:F,outShape:D}=T5(r.shape,s.shape,a,l,"NHWC",c);ce(i.rank===D.length,()=>`Error in ${KB}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);const T=yu(D,u.data.get(i.dataId).values),N=CD(s.shape,s.dtype);for(let z=0;z<A;++z)for(let U=0;U<x;++U){const ee=U*B-w.top;for(let q=0;q<v;++q){const Z=q*k-w.left;for(let G=0;G<y;++G){let ne=Number.MIN_SAFE_INTEGER,K=0,H=0;for(let Q=0;Q<j;++Q){const X=ee+Q*O;if(X>=0&&X<m)for(let re=0;re<I;++re){const le=Z+re*F;if(le>=0&&le<g){const Ae=d[z][X][le][G]+f[Q][re][G];Ae>ne&&(ne=Ae,K=Q,H=re)}}}N[K][H][G]+=T[z][U][q][G]}}}return{dataId:u.write(Om(N,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};const MRe={kernelName:GB,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:l,dilations:c}=n,u=e,d=yu(r.shape,u.data.get(r.dataId).values),f=yu(s.shape,u.data.get(s.dataId).values),{batchSize:A,inHeight:m,inWidth:g,inChannels:y,outHeight:x,outWidth:v,padInfo:w,strideHeight:B,strideWidth:k,filterHeight:j,filterWidth:I,dilationHeight:O,dilationWidth:F,outShape:D}=T5(r.shape,s.shape,a,l,"NHWC",c);ce(i.rank===D.length,()=>`Error in ${GB}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);const T=yu(D,u.data.get(i.dataId).values),N=CD(r.shape,r.dtype);for(let z=0;z<A;++z)for(let U=0;U<x;++U){const ee=U*B-w.top;for(let q=0;q<v;++q){const Z=q*k-w.left;for(let G=0;G<y;++G){let ne=Number.MIN_SAFE_INTEGER,K=ee<0?0:ee,H=Z<0?0:Z;for(let Q=0;Q<j;++Q){const X=ee+Q*O;if(X>=0&&X<m)for(let re=0;re<I;++re){const le=Z+re*F;if(le>=0&&le<g){const Ae=d[z][X][le][G]+f[Q][re][G];Ae>ne&&(ne=Ae,K=X,H=le)}}}N[z][K][H][G]+=T[z][U][q][G]}}}return{dataId:u.write(Om(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function QRe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:a}=r,{contextOptions:l,imageOptions:c}=a||{},u=c?.alpha||1,d=l?.contextType||"2d";if(d!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);const f=i.getContext(d,l?.contextAttributes||{});if(f==null)throw new Error(`Could not get the context with ${d} type.`);const[A,m]=s.shape.slice(0,2),g=s.shape.length===2?1:s.shape[2],y=n.data.get(s.dataId).values,x=s.dtype==="float32"?255:1,v=new Uint8ClampedArray(m*A*4);for(let B=0;B<A*m;++B){const k=[0,0,0,255*u];for(let I=0;I<g;I++){const O=y[B*g+I];if(s.dtype==="float32"){if(O<0||O>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${O}.`)}else if(s.dtype==="int32"&&(O<0||O>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${O}.`);g===1?(k[0]=O*x,k[1]=O*x,k[2]=O*x):k[I]=O*x}const j=B*4;v[j+0]=Math.round(k[0]),v[j+1]=Math.round(k[1]),v[j+2]=Math.round(k[2]),v[j+3]=Math.round(k[3])}i.width=m,i.height=A;const w=new ImageData(v,m,A);return f.putImageData(w,0,0),s}const HRe={kernelName:pE,backendName:"cpu",kernelFunc:QRe};function oS(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;yn(s,"sum");let l;s.dtype==="bool"?l=Bm({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):l=xh({inputs:{x:s},backend:n});const c=l.shape.length,u=Ar(i,l.shape),d=Yi(u,c);let f=u,A=l;d!=null&&(A=ic({inputs:{x:l},backend:n,attrs:{perm:d}}),f=Sa(f.length,c)),qo("sum",f,A.shape.length);const[m,g]=bo(A.shape,f),y=ec(A.dtype,"int32");let x=f4(n,m,y);const v=it(g),w=n.data.get(x.dataId).values,B=n.data.get(A.dataId).values;for(let k=0;k<w.length;++k){const j=k*v;let I=0;for(let O=0;O<v;++O)I+=B[j+O];w[k]=I}if(a){const k=wa(x.shape,u),j=x;x=ri({inputs:{x},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo(j)}return n.disposeIntermediateTensorInfo(l),d!=null&&n.disposeIntermediateTensorInfo(A),x}const WRe={kernelName:v5,backendName:"cpu",kernelFunc:oS};function VRe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:l,idDims:c}=p$(s,i.length);g$(a.length,c,i);const{path:u,steps:d}=y$(l,c),f=d.length;let A=null,m=a.length;const g=[];for(let y=0;y<f;++y){for(const x of d[y]){const{permutationIndices:v,expandDims:w}=m$(m,c[x]);let B;x$(v)?B=i[x]:(B=ic({inputs:{x:i[x]},backend:n,attrs:{perm:v}}),g.push(B));const k=B.shape.slice();for(let j=0;j<w.length;++j)k.splice(w[j],0,1);vr(B.shape,k)||(B=ri({inputs:{x:B},backend:n,attrs:{shape:k}}),g.push(B)),A===null?A=B:(A=sI({inputs:{a:B,b:A},backend:n}),g.push(A))}y<f-1&&(u[y]>=0&&(A=oS({inputs:{x:A},backend:n,attrs:{axis:u[y]-(a.length-m),keepDims:!1}}),g.push(A)),m--)}for(const y of g)y!==A&&n.disposeIntermediateTensorInfo(y);return A}const qRe={kernelName:mE,backendName:"cpu",kernelFunc:VRe};function GRe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;yn([r,s],"eluGrad");const i=new Float32Array(it(s.shape)),a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values;for(let c=0;c<a.length;++c){const u=a[c];u>=0?i[c]=l[c]:i[c]=l[c]*(u+1)}return n.makeTensorInfo(s.shape,"float32",i)}const KRe={kernelName:gE,backendName:"cpu",kernelFunc:GRe};const XRe=l$,YRe=c$,JRe=u$,ZRe=d$,e6e=f$,t6e=h$,n6e=ks(gx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+XRe*n);return e*(1-((((t6e*r+e6e)*r+ZRe)*r+JRe)*r+YRe)*r*Math.exp(-n*n))}),r6e={kernelName:gx,backendName:"cpu",kernelFunc:n6e};function p4(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,a=s.shape.length,l=s.shape.slice();let c=i;return i<0&&(ce(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),c=a+i+1),l.splice(c,0,1),ri({inputs:{x:s},backend:n,attrs:{shape:l}})}const s6e={kernelName:Hw,backendName:"cpu",kernelFunc:p4};const i6e=ka((t,e)=>t/e),eP=to(px,i6e),rF={kernelName:px,backendName:"cpu",kernelFunc:eP};function Gie(t,e,n){const r=t.shape,s=r[0],i=r[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,c=a.complexTensorInfos.imag,u=[s,i],d=it(u),f=go("float32",d),A=go("float32",d);for(let x=0;x<s;x++){const v=A0({inputs:{x:l},backend:n,attrs:{begin:[x,0],size:[1,i]}}),w=A0({inputs:{x:c},backend:n,attrs:{begin:[x,0],size:[1,i]}}),B=Tc({inputs:{real:v,imag:w},backend:n}),{real:k,imag:j}=a6e(B,e,n),I=OA(k,j);for(let O=0;O<i;O++){const F=A$(I,O);f[x*i+O]=F.real,A[x*i+O]=F.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(B)}const m=n.makeTensorInfo(u,"float32",f),g=n.makeTensorInfo(u,"float32",A),y=Tc({inputs:{real:m,imag:g},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}function a6e(t,e,n){const r=it(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,a=n.data.get(s.complexTensorInfos.imag.dataId).values;if(o6e(r)){const l=sF(i,a,r,e,n),c=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(c,"float32",l.real),d=n.makeTensorInfo(c,"float32",l.imag),f=n.makeTensorInfo([],"float32",qA(r,"float32")),A=xh({inputs:{x:f},backend:n}),m=rF.kernelFunc({inputs:{a:u,b:f},backend:n}),g=rF.kernelFunc({inputs:{a:d,b:A},backend:n}),y=n.data.get(m.dataId).values,x=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),{real:y,imag:x}}return l}else{const l=OA(i,a),c=l6e(l,r,e);return rne(c)}}function o6e(t){return(t&t-1)===0}function sF(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=OA(t,e),a=n/2,l=sne(i),c=l.real,u=l.imag,d=[c.length],f=s.makeTensorInfo(d,"float32",c),A=s.makeTensorInfo(d,"float32",u),m=Tc({inputs:{real:f,imag:A},backend:s}),g=ine(i),y=g.real,x=g.imag,v=[y.length],w=s.makeTensorInfo(v,"float32",y),B=s.makeTensorInfo(v,"float32",x),k=Tc({inputs:{real:w,imag:B},backend:s}),j=sF(c,u,a,r,s),I=j.real,O=j.imag,F=[I.length],D=s.makeTensorInfo(F,"float32",I),T=s.makeTensorInfo(F,"float32",O),N=Tc({inputs:{real:D,imag:T},backend:s}),P=sF(y,x,a,r,s),z=P.real,U=P.imag,ee=[z.length],q=s.makeTensorInfo(ee,"float32",z),Z=s.makeTensorInfo(ee,"float32",U),G=Tc({inputs:{real:q,imag:Z},backend:s}),ne=one(n,r),K=[ne.real.length],H=s.makeTensorInfo(K,"float32",ne.real),Q=s.makeTensorInfo(K,"float32",ne.imag),X=Tc({inputs:{real:H,imag:Q},backend:s}),re=sI({inputs:{a:X,b:G},backend:s}),le=L1({inputs:{a:N,b:re},backend:s}),Ae=J$({inputs:{a:N,b:re},backend:s}),xe=h0({inputs:{input:le},backend:s}),Be=h0({inputs:{input:Ae},backend:s}),me=$1({inputs:{input:le},backend:s}),ve=$1({inputs:{input:Ae},backend:s}),je=P1({inputs:[xe,Be],backend:s,attrs:{axis:0}}),ye=P1({inputs:[me,ve],backend:s,attrs:{axis:0}}),ze=s.data.get(je.dataId).values,at=s.data.get(ye.dataId).values;return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(re),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(Ae),s.disposeIntermediateTensorInfo(xe),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(Be),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(je),s.disposeIntermediateTensorInfo(ye),{real:ze,imag:at}}function l6e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,a=0;for(let l=0;l<e;l++){const c=lne(s*l,e,n),u=A$(t,l);i+=u.real*c.real-u.imag*c.imag,a+=u.real*c.imag+u.imag*c.real}n&&(i/=e,a/=e),ane(r,i,a,s)}return r}function c6e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=it(r.shape),i=r.shape[r.shape.length-1],a=s/i,l=ri({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),c=Gie(l,!1,n),u=ri({inputs:{x:c},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}const u6e={kernelName:yE,backendName:"cpu",kernelFunc:c6e};function tP(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,a=i||N0(s),l=ca(a,it(r));return f6e(l,s,a),e.makeTensorInfo(r,a,l)}const d6e={kernelName:xE,backendName:"cpu",kernelFunc:tP};function f6e(t,e,n){t.fill(e)}const h6e={kernelName:bE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=go(r.dtype,it(r.shape)),[a,l,c,u]=r.shape,d=s.data.get(r.dataId).values;for(let A=0;A<a;A++){const m=A*c*l*u;for(let g=0;g<l;g++){const y=g*(c*u);for(let x=0;x<c;x++){const v=x*u;for(let w=0;w<u;w++){const B=Math.round(c-x-1),k=m+y+v+w;let j=d[k];if(B>=0&&B<c){const I=B*u,O=m+y+I+w;j=d[O]}i[k]=j}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function A6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:f,dimRoundingMode:A,activation:m,leakyreluAlpha:g}=r;let y=Vie({inputs:{x:s,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:d,dilations:f,dimRoundingMode:A}});if(a){const x=y;if(d==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const v=ri({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});y=L1({inputs:{a:y,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else y=L1({inputs:{a:y,b:a},backend:n});n.disposeIntermediateTensorInfo(x)}if(m){const x=y;if(d==="NCHW"&&m==="prelu"&&l.shape.length===1&&l.shape[0]!==1){const v=ri({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});y=A4(n,y,m,v,g),n.disposeIntermediateTensorInfo(v)}else y=A4(n,y,m,l,g);n.disposeIntermediateTensorInfo(x)}return y}const p6e={kernelName:T2,backendName:"cpu",kernelFunc:A6e};function m6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:f,dimRoundingMode:A,activation:m,leakyreluAlpha:g}=r;let y=qie({inputs:{x:s,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:d,dilations:f,dimRoundingMode:A}});if(a){const x=y;y=L1({inputs:{a:y,b:a},backend:n}),n.disposeIntermediateTensorInfo(x)}if(m){const x=y;y=A4(n,y,m,l,g),n.disposeIntermediateTensorInfo(x)}return y}const g6e={kernelName:_2,backendName:"cpu",kernelFunc:m6e};function y6e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=it(r.shape),a=s.shape,l=a[a.length-1],[c,u,d,f]=M3(r,s);if(u===0)return n.makeTensorInfo(c,r.dtype,[]);const A=n.data.get(s.dataId).values,m=n.bufferSync(r),g=sie(A,m,r.dtype,u,l,d,f,r.shape,i);return n.makeTensorInfo(c,r.dtype,g.values)}const x6e={kernelName:vE,backendName:"cpu",kernelFunc:y6e};function b6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:l}=r;yn([s,i],"gatherV2");const c=Ar(a,s.shape)[0],u=n.data.get(i.dataId).values,d=s.shape[c];for(let k=0;k<u.length;++k){const j=u[k];ce(j<=d-1&&j>=0,()=>`GatherV2: the index value ${j} is not in [0, ${d-1}]`)}let f=l;l==null&&(f=0);const A=it(i.shape),m=v$(s,i,c,f),g=ri({inputs:{x:s},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),y=ri({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,A/m.batchSize]}}),x=[m.batchSize,m.outerSize,A/m.batchSize,m.sliceSize],v=n.bufferSync(y),w=n.bufferSync(g),B=iie(w,v,x);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(m.outputShape,B.dtype,B.values)}const v6e={kernelName:Vw,backendName:"cpu",kernelFunc:b6e};function w6e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=it(r.shape),i=r.shape[r.shape.length-1],a=s/i,l=ri({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),c=Gie(l,!0,n),u=ri({inputs:{x:c},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}const S6e={kernelName:wE,backendName:"cpu",kernelFunc:w6e};const C6e=ks(Cx,t=>Number.isFinite(t)?1:0,"bool"),k6e={kernelName:Cx,backendName:"cpu",kernelFunc:C6e};const B6e=ks(kx,t=>Math.abs(t)===1/0?1:0,"bool"),j6e={kernelName:kx,backendName:"cpu",kernelFunc:B6e};const E6e=ks(Bx,t=>Number.isNaN(t)?1:0,"bool"),I6e={kernelName:Bx,backendName:"cpu",kernelFunc:E6e};function N6e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=uie(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const T6e={kernelName:CE,backendName:"cpu",kernelFunc:N6e};const _6e=ks(Ex,t=>Math.log1p(t)),R6e={kernelName:Ex,backendName:"cpu",kernelFunc:_6e};const O6e=ka((t,e)=>t&&e),F6e=to(Yw,O6e,null,"bool"),D6e={kernelName:Yw,backendName:"cpu",kernelFunc:F6e};const L6e=ks(Jw,t=>t?0:1,"bool"),$6e={kernelName:Jw,backendName:"cpu",kernelFunc:L6e};const P6e=ka((t,e)=>t||e),z6e=to(Zw,P6e,null,"bool"),U6e={kernelName:Zw,backendName:"cpu",kernelFunc:z6e};function M6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:l,beta:c}=r;yn(s,"LRN");const u=s.shape[3],d=u-1,f=n.data.get(s.dataId).values,A=it(s.shape),m=new Float32Array(A);function g(y){const x=y%u;let v=y-x+Math.max(0,x-i);const w=y-x+Math.min(x+i,d);let B=0;for(;v<=w;v++){const k=f[v];B+=k*k}return B}for(let y=0;y<A;y++){const x=g(y),v=f[y]*Math.pow(a+l*x,-c);m[y]=v}return n.makeTensorInfo(s.shape,s.dtype,m)}const Q6e={kernelName:e5,backendName:"cpu",kernelFunc:M6e};function H6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:l,bias:c,alpha:u,beta:d}=r;yn(a,"LRNGrad");const f=it(a.shape),A=a.shape[3],m=n.data.get(a.dataId).values,g=n.data.get(s.dataId).values,y=n.data.get(i.dataId).values,x=new Float32Array(f),v=f;for(let w=0;w<v;w++){const B=w%A,k=w-B+Math.max(0,B-l),j=w-B+Math.min(A,B+l+1);let I=0;for(let O=k;O<j;O++)I+=Math.pow(g[O],2);I=u*I+c;for(let O=k;O<j;O++){let F=-2*u*d*g[O]*y[w]/I;w===O&&(F+=Math.pow(I,-d)),F*=m[w],x[O]+=F}}return n.makeTensorInfo(a.shape,s.dtype,x)}const W6e={kernelName:kE,backendName:"cpu",kernelFunc:H6e};function Kie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,l=n;let c=s.shape;const u=c.length,d=Ar(i,c);let f=d;const A=Yi(f,u);let m=l.data.get(s.dataId).values;if(A!=null){const k=new Array(u);for(let j=0;j<k.length;j++)k[j]=c[A[j]];m=X$(m,c,s.dtype,A,k),f=Sa(f.length,u),c=k}yn(s,"max"),qo("max",f,u);const[g,y]=bo(c,f),x=it(y),v=fie(m,x,g,s.dtype),w=l.write(v,g,s.dtype);let B=g;return a&&(B=wa(g,d)),{dataId:w,shape:B,dtype:s.dtype}}const V6e={kernelName:t5,backendName:"cpu",kernelFunc:Kie};function q6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;yn(s,"maxPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r,u=1;ce(Vo(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=md(s.shape,i,a,u,l,c);let f;if(d.filterWidth===1&&d.filterHeight===1&&vr(d.inShape,d.outShape))f=xh({inputs:{x:s},backend:n});else{const A=n.data.get(s.dataId).values,m=On(s.shape),g=Z$(A,s.shape,s.dtype,m,d,"max");f=n.makeTensorInfo(d.outShape,s.dtype,g.values)}return f}const G6e={kernelName:n5,backendName:"cpu",kernelFunc:q6e};function K6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=r;yn(s,"maxPool3d");const d=GA(s.shape,i,a,1,l,c,u),f=n.data.get(s.dataId).values,A=Wie(f,s.shape,s.dtype,On(s.shape),d,"max");return n.makeTensorInfo(A.shape,"float32",A.values)}const X6e={kernelName:r5,backendName:"cpu",kernelFunc:K6e};function Y6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r;yn([s,i],"maxPool3DGrad");const d=GA(i.shape,a,l,1,c,u),f=n.bufferSync(i),A=P_e(f,d),m=d.strideDepth,g=d.strideHeight,y=d.strideWidth,x=d.dilationDepth,v=d.dilationHeight,w=d.dilationWidth,B=d.effectiveFilterDepth,k=d.effectiveFilterHeight,j=d.effectiveFilterWidth,I=B-1-d.padInfo.front,O=j-1-d.padInfo.left,F=k-1-d.padInfo.top,D=cr(i.shape,"float32"),T=n.bufferSync(s);for(let N=0;N<d.batchSize;++N)for(let P=0;P<d.inChannels;++P)for(let z=0;z<d.inDepth;++z)for(let U=0;U<d.inHeight;++U)for(let ee=0;ee<d.inWidth;++ee){const q=z-I,Z=U-F,G=ee-O;let ne=0;for(let K=0;K<B;K+=x){const H=(q+K)/m;if(!(H<0||H>=d.outDepth||Math.floor(H)!==H))for(let Q=0;Q<k;Q+=v){const X=(Z+Q)/g;if(!(X<0||X>=d.outHeight||Math.floor(X)!==X))for(let re=0;re<j;re+=w){const le=(G+re)/y;if(le<0||le>=d.outWidth||Math.floor(le)!==le)continue;const Ae=B*k*j-1-A.get(N,H,X,le,P),xe=K*k*j+Q*j+re,Be=Ae===xe?1:0;if(Be===0)continue;const me=T.get(N,H,X,le,P);ne+=me*Be}}}D.set(ne,N,z,U,ee,P)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const J6e={kernelName:jE,backendName:"cpu",kernelFunc:Y6e};function Z6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,l=i;yn([i,a],"maxPoolGrad");const{filterSize:c,strides:u,pad:d,dimRoundingMode:f}=r,A=md(l.shape,c,u,1,d,f),m=n.data.get(l.dataId).values,g=cr(A.outShape,l.dtype,Hie(m,l.shape,l.dtype,A).values),y=A.strideHeight,x=A.strideWidth,v=A.dilationHeight,w=A.dilationWidth,B=A.effectiveFilterHeight,k=A.effectiveFilterWidth,j=k-1-A.padInfo.left,I=B-1-A.padInfo.top,O=cr(l.shape,"float32"),F=n.data.get(s.dataId).values,D=cr(s.shape,"float32",F);for(let T=0;T<A.batchSize;++T)for(let N=0;N<A.inChannels;++N)for(let P=0;P<A.inHeight;++P)for(let z=0;z<A.inWidth;++z){const U=P-I,ee=z-j;let q=0;for(let Z=0;Z<B;Z+=v){const G=(U+Z)/y;if(!(G<0||G>=A.outHeight||Math.floor(G)!==G))for(let ne=0;ne<k;ne+=w){const K=(ee+ne)/x;if(K<0||K>=A.outWidth||Math.floor(K)!==K)continue;const H=B*k-1-g.get(T,G,K,N),Q=Z*k+ne,X=H===Q?1:0;if(X===0)continue;const re=D.get(T,G,K,N);q+=re*X}}O.set(q,T,P,z,N)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const eOe={kernelName:BE,backendName:"cpu",kernelFunc:Z6e};function tOe(t,e,n,r,s){const i=On(e),a=Z$(t,e,n,i,s,"max"),l=Hie(t,e,n,s,!0,r);return[a.values,l.values]}const nOe={kernelName:EE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:l}=e,c=n;yn(r,"MaxPoolWithArgmax");const u=c.data.get(r.dataId).values,d=md(r.shape,s,i,[1,1],a),[f,A]=tOe(u,r.shape,r.dtype,l,d),m=c.write(f,d.outShape,r.dtype),g=c.write(A,d.outShape,r.dtype);return[{dataId:m,shape:d.outShape,dtype:r.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};function rOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,l=Ar(i,s.shape),u=bo(s.shape,l)[1],d=it(u),f=[],A=n.makeTensorInfo([],"float32",new Float32Array([d]));f.push(A);const m=Bm({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});f.push(m);const g=eP({inputs:{a:m,b:A},backend:n});f.push(g);const y=oS({inputs:{x:g},backend:n,attrs:{axis:i,keepDims:a}});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const sOe={kernelName:s5,backendName:"cpu",kernelFunc:rOe};function iOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;yn(s,"min");const l=Ar(i,s.shape);let c=l;const u=Yi(c,s.shape.length);let d=s;u!=null&&(d=ic({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Sa(c.length,s.shape.length)),qo("min",c,d.shape.length);const[f,A]=bo(d.shape,c),m=it(A),g=Ho(it(f),d.dtype),y=n.data.get(d.dataId).values;for(let v=0;v<g.length;++v){const w=v*m;let B=y[w];for(let k=0;k<m;++k){const j=y[w+k];(Number.isNaN(j)||j<B)&&(B=j)}g[v]=B}u!=null&&n.disposeIntermediateTensorInfo(d);const x=n.makeTensorInfo(f,d.dtype,g);if(a){const v=wa(f,l),w=ri({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),w}return x}const aOe={kernelName:i5,backendName:"cpu",kernelFunc:iOe};function oOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:a}=r;yn(s,"mirrorPad");const l=i.map((B,k)=>B[0]+s.shape[k]+B[1]),c=i.map(B=>B[0]),u=i.map((B,k)=>B[0]+s.shape[k]),d=a==="reflect"?0:1,f=n.data.get(s.dataId).values,A=s.shape.length,m=On(s.shape),g=it(l),y=l.length,x=On(l),v=go(s.dtype,g);for(let B=0;B<g;B++){let k=T0(B,y,x);for(let I=0;I<y;I++)k[I]<c[I]?k[I]=c[I]*2-k[I]-d:k[I]>=u[I]&&(k[I]=(u[I]-1)*2-k[I]+d);k=k.map((I,O)=>I-c[O]);const j=af(k,A,m);v[B]=f[j]}return{dataId:n.write(v,l,s.dtype),shape:l,dtype:s.dtype}}const lOe={kernelName:a5,backendName:"cpu",kernelFunc:oOe};const cOe=ka(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),uOe=to(Tx,cOe),dOe={kernelName:Tx,backendName:"cpu",kernelFunc:uOe};function Xie(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=s.shape.length;let l=i;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);const c=Ar([l],s.shape),u=Kie({inputs:{x:s},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),d=wa(u.shape,c),f=ri({inputs:{x:u},backend:n,attrs:{shape:d}}),A=J$({inputs:{a:s,b:f},backend:n}),m=eie({inputs:{x:A},backend:n}),g=oS({inputs:{x:m},backend:n,attrs:{axis:c,keepDims:!1}}),y=ri({inputs:{x:g},backend:n,attrs:{shape:d}}),x=eP({inputs:{a:m,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const fOe={kernelName:C5,backendName:"cpu",kernelFunc:Xie};function hOe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:l}=r;yn(s,"multinomial");const c=l?s:Xie({inputs:{logits:s},backend:n,attrs:{dim:-1}}),u=c.shape[0],d=c.shape[1],f=n.data.get(c.dataId).values,A=[u,i],m=Ho(it(A),"int32");for(let g=0;g<u;++g){const y=g*d,x=new Float32Array(d-1);x[0]=f[y];for(let B=1;B<x.length;++B)x[B]=x[B-1]+f[y+B];const v=g3.alea(a.toString()),w=g*i;for(let B=0;B<i;++B){const k=v();m[w+B]=x.length;for(let j=0;j<x.length;j++)if(k<x[j]){m[w+B]=j;break}}}return l||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(A,"int32",m)}const AOe={kernelName:IE,backendName:"cpu",kernelFunc:hOe};const pOe=$3;function mOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=r;yn(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:f}=pOe(u,d,a,l,c);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const gOe={kernelName:NE,backendName:"cpu",kernelFunc:mOe};const yOe=P3;function xOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,padToMaxOutputSize:u}=r;yn(s,"NonMaxSuppressionPadded");const d=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,{selectedIndices:A,validOutputs:m}=yOe(d,f,a,l,c,u);return[n.makeTensorInfo([A.length],"int32",new Int32Array(A)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const bOe={kernelName:TE,backendName:"cpu",kernelFunc:xOe};const vOe=z3;function wOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=r;yn(s,"NonMaxSuppressionWithScore");const d=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,A=a,m=l,g=c,y=u,{selectedIndices:x,selectedScores:v}=vOe(d,f,A,m,g,y);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const SOe={kernelName:_E,backendName:"cpu",kernelFunc:wOe};function COe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:l,offValue:c}=r;yn(s,"oneHot");const u=it(s.shape),d=new Float32Array(u*a);d.fill(c);const f=n.data.get(s.dataId).values;for(let A=0;A<u;++A)f[A]>=0&&f[A]<a&&(d[A*a+f[A]]=l);return n.makeTensorInfo([...s.shape,a],i,d)}const kOe={kernelName:u5,backendName:"cpu",kernelFunc:COe};function m4(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=h0({inputs:{input:r},backend:n}),i=m4({inputs:{x:s},backend:n}),a=$1({inputs:{input:r},backend:n}),l=m4({inputs:{x:a},backend:n}),c=Tc({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return tP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const BOe={kernelName:E5,backendName:"cpu",kernelFunc:m4};function Yie(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=h0({inputs:{input:r},backend:n}),i=Yie({inputs:{x:s},backend:n}),a=$1({inputs:{input:r},backend:n}),l=m4({inputs:{x:a},backend:n}),c=Tc({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return tP({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const jOe={kernelName:c5,backendName:"cpu",kernelFunc:Yie};function Jie(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return p4({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(d=>{Wo(i,d.shape,"All tensors passed to stack must have matching shapes"),ce(a===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],c=e.map(d=>{const f=p4({inputs:{input:d},backend:n,attrs:{dim:s}});return l.push(f),f}),u=P1({inputs:c,backend:n,attrs:{axis:s}});return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const EOe={kernelName:d5,backendName:"cpu",kernelFunc:Jie};function IOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;yn(s,"pad");const l=i.map((w,B)=>w[0]+s.shape[B]+w[1]),c=i.map(w=>w[0]),u=n.data.get(s.dataId).values,d=it(s.shape),f=s.shape.length,A=On(s.shape),m=it(l),g=l.length,y=On(l),x=go(s.dtype,m);a!==0&&x.fill(a);for(let w=0;w<d;w++){const k=T0(w,f,A).map((I,O)=>I+c[O]),j=af(k,g,y);x[j]=u[w]}return{dataId:n.write(x,l,s.dtype),shape:l,dtype:s.dtype}}const Zie={kernelName:f5,backendName:"cpu",kernelFunc:IOe};const NOe=ka((t,e)=>Math.pow(t,e)),TOe=to(Rx,NOe),_Oe={kernelName:Rx,backendName:"cpu",kernelFunc:TOe};function ROe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:l}=r,c=s.map(v=>n.data.get(v.dataId).values),u=s.map(v=>v.shape),d=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,[A,m,g]=yie(c,u,d,i.shape,i.dtype,f,a.shape),y=A.map(v=>n.makeTensorInfo([v.length],"int32",v)),x=n.makeTensorInfo(g,i.dtype,m);return y.concat([x])}const OOe={kernelName:RE,backendName:"cpu",kernelFunc:ROe};function FOe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[u,d]=xie(a,r.shape,r.dtype,l,s.shape,c,i.shape),f=n.makeTensorInfo([u.length],"int32",u),A=n.makeTensorInfo([d.length],r.dtype,d);return[f,A]}const DOe={kernelName:OE,backendName:"cpu",kernelFunc:FOe};function LOe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:l}=e,{rowPartitionTypes:c}=r,u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,A=l.map(x=>n.data.get(x.dataId).values),m=l.map(x=>x.shape),[g,y]=bie(u,s.shape,d,i.shape,i.dtype,f,a.shape,A,m,c);return n.makeTensorInfo(g,i.dtype,y)}const $Oe={kernelName:FE,backendName:"cpu",kernelFunc:LOe};function POe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:a}=n,l=vie(r,s,a,i);return e.makeTensorInfo([l.length],i,l)}const zOe={kernelName:DE,backendName:"cpu",kernelFunc:POe};const UOe=ks(Ox,t=>1/t),MOe={kernelName:Ox,backendName:"cpu",kernelFunc:UOe};function QOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:l}=r;yn(s,"resizeBilinear");const c=On(s.shape),[u,d]=l,[f,A,m,g]=s.shape,y=n.data.get(s.dataId).values,x=new Float32Array(it([f,u,d,g])),v=[i&&u>1?A-1:A,i&&d>1?m-1:m],w=[i&&u>1?u-1:u,i&&d>1?d-1:d];let B=0;const k=v[0]/w[0],j=v[1]/w[1];for(let I=0;I<f;I++)for(let O=0;O<u;O++){let F;a?F=k*(O+.5)-.5:F=k*O;const D=Math.max(0,Math.floor(F)),T=F-D,N=Math.min(A-1,Math.ceil(F)),P=I*c[0]+D*c[1],z=I*c[0]+N*c[1];for(let U=0;U<d;U++){let ee;a?ee=j*(U+.5)-.5:ee=j*U;const q=Math.max(0,Math.floor(ee)),Z=ee-q,G=Math.min(m-1,Math.ceil(ee)),ne=P+q*c[2],K=z+q*c[2],H=P+G*c[2],Q=z+G*c[2];for(let X=0;X<g;X++){const re=y[ne+X],le=y[K+X],Ae=y[H+X],xe=y[Q+X],Be=re+(Ae-re)*Z,me=le+(xe-le)*Z,ve=Be+(me-Be)*T;x[B++]=ve}}}return n.makeTensorInfo([f,u,d,g],"float32",x)}const HOe={kernelName:g5,backendName:"cpu",kernelFunc:QOe};function WOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;yn([i,s],"resizeBilinearGrad");const l=On(s.shape),[c,u,d,f]=s.shape,[,A,m]=i.shape,g=new Float32Array(c*u*d*f),y=[a&&A>1?u-1:u,a&&m>1?d-1:d],x=[a&&A>1?A-1:A,a&&m>1?m-1:m],v=y[0]/x[0],w=y[1]/x[1],B=n.data.get(i.dataId).values;let k=0;for(let j=0;j<c;j++){const I=j*l[0];for(let O=0;O<A;O++){const F=O*v,D=Math.floor(F),T=Math.min(Math.ceil(F),u-1),N=I+D*l[1],P=I+T*l[1],z=F-D,U=1-z;for(let ee=0;ee<m;ee++){const q=ee*w,Z=Math.floor(q),G=Math.min(Math.ceil(q),d-1),ne=q-Z,K=1-ne,H=N+Z*l[2],Q=N+G*l[2],X=P+Z*l[2],re=P+G*l[2],le=U*K,Ae=U*ne,xe=z*K,Be=z*ne;for(let me=0;me<f;me++){const ve=B[k++];g[H+me]+=ve*le,g[Q+me]+=ve*Ae,g[X+me]+=ve*xe,g[re+me]+=ve*Be}}}}return n.makeTensorInfo([c,d,u,f],"float32",g)}const VOe={kernelName:PE,backendName:"cpu",kernelFunc:WOe};function qOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:l}=r;yn(s,"resizeNearestNeighbor");const c=On(s.shape),[u,d]=l,[f,A,m,g]=s.shape,y=n.data.get(s.dataId).values,x=new Float32Array(f*u*d*g),v=[i&&u>1?A-1:A,i&&d>1?m-1:m],w=[i&&u>1?u-1:u,i&&d>1?d-1:d],B=v[0]/w[0],k=v[1]/w[1];let j=0;for(let I=0;I<f;I++){const O=I*c[0];for(let F=0;F<u;F++){const D=a?B*(F+.5):B*F;let T=Math.min(A-1,i?Math.round(D):Math.floor(D));a&&(T=Math.max(0,T));const N=O+T*c[1];for(let P=0;P<d;P++){const z=a?k*(P+.5):k*P;let U=Math.min(m-1,i?Math.round(z):Math.floor(z));a&&(U=Math.max(0,U));const ee=N+U*c[2];for(let q=0;q<g;q++){const Z=y[ee+q];x[j++]=Z}}}}return n.makeTensorInfo([f,u,d,g],s.dtype,x)}const GOe={kernelName:m5,backendName:"cpu",kernelFunc:qOe};function KOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;yn([i,s],"resizeNearestNeighborGrad");const l=On(s.shape),c=On(i.shape),[u,d,f,A]=s.shape,[,m,g]=i.shape,y=new Float32Array(u*d*f*A),x=n.data.get(i.dataId).values,v=[a&&m>1?d-1:d,a&&g>1?f-1:f],w=[a&&m>1?m-1:m,a&&g>1?g-1:g],B=v[0]/w[0],k=v[1]/w[1],j=1/B,I=1/k,O=Math.ceil(j)*2+2,F=Math.ceil(I)*2+2;for(let D=0;D<u;D++){const T=D*l[0];for(let N=0;N<d;N++){const P=T+N*l[1],z=Math.floor(N*j),U=Math.floor(z-O/2);for(let ee=0;ee<f;ee++){const q=P+ee*l[2],Z=Math.floor(ee*I),G=Math.floor(Z-F/2);for(let ne=0;ne<A;ne++){let K=0;for(let H=0;H<O;H++){const Q=H+U;if(Q<0||Q>=m)continue;const X=T+Q*c[1],re=Q*B,le=Math.min(d-1,a?Math.round(re):Math.floor(re));if(N===le)for(let Ae=0;Ae<F;Ae++){const xe=Ae+G;if(xe<0||xe>=g)continue;const Be=X+xe*c[2],me=xe*k,ve=Math.min(f-1,a?Math.round(me):Math.floor(me));ee===ve&&(K+=x[Be+ne])}}y[q+ne]=K}}}}return n.makeTensorInfo(s.shape,s.dtype,y)}const XOe={kernelName:$E,backendName:"cpu",kernelFunc:KOe};function YOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;yn(s,"reverse");const a=s.shape.length,l=Ar(i,s.shape);if(a===0)return xh({inputs:{x:s},backend:n});const c=new $a(s.shape,s.dtype),u=n.bufferSync(s);for(let d=0;d<c.size;d++){const f=c.indexToLoc(d),A=f.slice();l.forEach(m=>A[m]=s.shape[m]-1-A[m]),c.set(u.get(...A),...f)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}const JOe={kernelName:y5,backendName:"cpu",kernelFunc:YOe};const ZOe={kernelName:n3,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,l=n,c=go(r.dtype,it(r.shape)),[u,d,f,A]=r.shape,[m,g]=i$(a,d,f),y=255,x=Math.sin(s),v=Math.cos(s),w=l.data.get(r.dataId).values;for(let k=0;k<u;k++){const j=k*f*d*A;for(let I=0;I<d;I++){const O=I*(f*A);for(let F=0;F<f;F++){const D=F*A;for(let T=0;T<A;T++){const N=[u,I,F,T],P=N[2],z=N[1];let U=(P-m)*v-(z-g)*x,ee=(P-m)*x+(z-g)*v;U=Math.round(U+m),ee=Math.round(ee+g);let q=i;if(typeof i!="number"&&(T===3?q=y:q=i[T]),U>=0&&U<f&&ee>=0&&ee<d){const G=ee*(f*A),ne=U*A,K=j+G+ne+T;q=w[K]}const Z=j+O+D+T;c[Z]=q}}}}return{dataId:l.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};const eFe=ks(Lx,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),tFe={kernelName:Lx,backendName:"cpu",kernelFunc:eFe};function nFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=zm(i,s,a),A=!0,m=n.bufferSync(s),g=n.bufferSync(i),y=Ng(m,g,a,f,u,c,l,d,0,A);return n.makeTensorInfo(a,y.dtype,y.values)}const rFe={kernelName:zE,backendName:"cpu",kernelFunc:nFe};function sFe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function iFe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function aFe(t,e,n,r,s,i){const a=ca("int32",n*s);for(let l=0;l<n;++l){const c=t.slice(l*r,(l+1)*r),u=l*s;for(let d=0;d<s;++d)a[u+d]=i==="left"?sFe(c,e[d+u]):iFe(c,e[d+u])}return a}function oFe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=aFe(l,c,s.shape[0],s.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",u)}const lFe={kernelName:ME,backendName:"cpu",kernelFunc:oFe};function cFe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;yn([r,s,i],"select");const a=r.shape.length,l=n.data.get(r.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=ec(s.dtype,i.dtype),f=Ho(it(s.shape),d);let A=0;const m=a===0||a>1||s.shape.length===1?1:it(s.shape.slice(1));for(let g=0;g<l.length;g++)for(let y=0;y<m;y++)l[g]===1?f[A++]=c[g]:f[A++]=u[g];return n.makeTensorInfo(s.shape,d,f)}const uFe={kernelName:x5,backendName:"cpu",kernelFunc:cFe};const dFe=W3,fFe=V3,hFe=ks(Px,t=>t>=0?fFe*t:dFe*(Math.exp(t)-1)),AFe={kernelName:Px,backendName:"cpu",kernelFunc:hFe};const pFe=ks(Mx,t=>t<0?-1:t>0?1:0),mFe={kernelName:Mx,backendName:"cpu",kernelFunc:pFe};const gFe=ks(zx,t=>Math.sin(t)),yFe={kernelName:zx,backendName:"cpu",kernelFunc:gFe};const xFe=ks(Ux,t=>Math.sinh(t)),bFe={kernelName:Ux,backendName:"cpu",kernelFunc:xFe};const vFe=11920928955078125e-23,oH=Math.log(vFe)+2,wFe=ks(Hx,t=>{const e=t>-oH,n=t<oH,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),SFe={kernelName:Hx,backendName:"cpu",kernelFunc:wFe};function CFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;yn([s],"spaceToBatchND");const l=it(i),c=[[0,0]];c.push(...a);for(let I=1+i.length;I<s.shape.length;++I)c.push([0,0]);const u=Zie.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:c,constantValue:0}}),d=X5(u.shape,i,l,!1),f=Y5(d.length,i.length,!1),A=J5(u.shape,i,l,!1),y=ri({inputs:{x:u},backend:n,attrs:{shape:d}}),w=ic({inputs:{x:y},backend:n,attrs:{perm:f}}),j=ri({inputs:{x:w},backend:n,attrs:{shape:A}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),j}const kFe={kernelName:w5,backendName:"cpu",kernelFunc:CFe};function BFe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const l=n.data.get(r.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values[0],[f,A,m,g,y]=kie(l,r.shape,r.dtype,c,s.dtype,u,d);return[n.makeTensorInfo(A,r.dtype,f),n.makeTensorInfo([A[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(x=>Number(x)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const jFe={kernelName:QE,backendName:"cpu",kernelFunc:BFe};function EFe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.data.get(s.dataId).values),l=n.data.get(r.dataId).values,c=Array.from(n.data.get(i.dataId).values),[u,d,f]=Bie(l,r.shape,r.dtype,a,c);return[n.makeTensorInfo(d,r.dtype,u),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const IFe={kernelName:HE,backendName:"cpu",kernelFunc:EFe};function NFe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[u,d]=Y$(a,r.shape,r.dtype,l,c,!0);return n.makeTensorInfo(d,r.dtype,u)}const TFe={kernelName:WE,backendName:"cpu",kernelFunc:NFe};function _Fe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[u,d]=Y$(a,r.shape,r.dtype,l,c);return n.makeTensorInfo(d,r.dtype,u)}const RFe={kernelName:VE,backendName:"cpu",kernelFunc:_Fe};function OFe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:l}=r,{sliceRank:c,numUpdates:u,sliceSize:d,strides:f,outputSize:A}=zm(i,s,l),m=!1,g=n.bufferSync(s);let y;switch(i.dtype){case"bool":{const x=n.bufferSync(i),v=!!n.data.get(a.dataId).values[0];y=Ng(g,x,l,A,d,u,c,f,v,m);break}case"float32":{const x=n.bufferSync(i),v=n.data.get(a.dataId).values[0];y=Ng(g,x,l,A,d,u,c,f,v,m);break}case"int32":{const x=n.bufferSync(i),v=n.data.get(a.dataId).values[0];y=Ng(g,x,l,A,d,u,c,f,v,m);break}case"string":{const x=n.bufferSync(i),v=TA(n.data.get(a.dataId).values[0]);y=Ng(g,x,l,A,d,u,c,f,v,m);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(l,y.dtype,y.values)}const FFe={kernelName:qE,backendName:"cpu",kernelFunc:OFe};function DFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,l=Ar(a,s.shape)[0],c=b$(s,i,l),u=new Array(s.shape.length).fill(0),d=s.shape.slice();return c.map(f=>{const A=[...d];A[l]=f;const m=A0({inputs:{x:s},backend:n,attrs:{begin:u,size:A}});return u[l]+=f,m})}const LFe={kernelName:S5,backendName:"cpu",kernelFunc:DFe};const $Fe={kernelName:GE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;yn(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let l=0;l<s.length;++l){const c=s[l];i[l]=c*c}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};const PFe=ks(Yx,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),zFe={kernelName:Yx,backendName:"cpu",kernelFunc:PFe};function UFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:l,beginMask:c,endMask:u,ellipsisMask:d,newAxisMask:f,shrinkAxisMask:A}=r;yn(s,"stridedSlice");const{finalShapeSparse:m,finalShape:g,isIdentity:y,sliceDim0:x,isSimpleSlice:v,begin:w,end:B,strides:k}=t$(s.shape,i,a,l,c,u,d,f,A);let j;if(y)j=ri({inputs:{x:s},backend:n,attrs:{shape:g}});else if(x||v){ce(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const I=JL(w,B,k),O=A0({inputs:{x:s},backend:n,attrs:{begin:w,size:I}});j=ri({inputs:{x:O},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(O)}else{const I=n.bufferSync(s),O=Iie(m,I,k,w);j=n.makeTensorInfo(g,O.dtype,O.values)}return j}const MFe={kernelName:KE,backendName:"cpu",kernelFunc:UFe};function QFe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:l,padWidth:c,preserveShortSequences:u}=r,{data:d,dataSplits:f}=e,A=n.data.get(d.dataId).values,m=n.data.get(f.dataId).values,[g,y]=Nie(A,m,s,i,a,l,c,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(f.shape,"int32",y)]}const HFe={kernelName:XE,backendName:"cpu",kernelFunc:QFe};function WFe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values[0],[u,d,f]=Tie(l,c,s),A=d.length;return[n.makeTensorInfo([A,2],"int32",u),n.makeTensorInfo([A],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const VFe={kernelName:YE,backendName:"cpu",kernelFunc:WFe};function qFe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(i.dataId).values,l=_ie(a,s);return n.makeTensorInfo(i.shape,"int32",l)}const GFe={kernelName:JE,backendName:"cpu",kernelFunc:qFe};const KFe=ks(Gx,t=>Math.tan(t)),XFe={kernelName:Gx,backendName:"cpu",kernelFunc:KFe};const YFe=ks(Kx,t=>Math.tanh(t)),JFe={kernelName:Kx,backendName:"cpu",kernelFunc:YFe};function ZFe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=zm(i,s,r.shape),f=!1,A=n.bufferSync(s),m=n.bufferSync(i),g=n.bufferSync(r),y=Ng(A,m,r.shape,d,c,l,a,u,g,f);return n.makeTensorInfo(r.shape,y.dtype,y.values)}const e8e={kernelName:UE,backendName:"cpu",kernelFunc:ZFe};function t8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;yn(s,"tile");const a=Oie(n.bufferSync(s),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const n8e={kernelName:Xx,backendName:"cpu",kernelFunc:t8e};function r8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r;yn(s,"topk");const l=n.data.get(s.dataId).values,[c,u]=Die(l,s.shape,s.dtype,i,a);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const s8e={kernelName:ZE,backendName:"cpu",kernelFunc:r8e};function i8e(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:l,fillValue:c,outputShape:u}=n,[d,f,A,m]=s.shape,[g,y]=u??[f,A],x=[d,g,y,m],v=On(s.shape),w=v[0],B=v[1],k=v[2],j=On(x),I=j[0],O=j[1],F=j[2],D=go(s.dtype,it(x));D.fill(c);const T=r.data.get(s.dataId).values,N=r.data.get(i.dataId).values;for(let z=0;z<d;++z){const U=i.shape[0]===1?N:N.subarray(z*8,z*8+8);for(let ee=0;ee<g;++ee)for(let q=0;q<y;++q)for(let Z=0;Z<m;++Z){let G;const ne=U[6]*q+U[7]*ee+1;if(ne===0)continue;const K=(U[0]*q+U[1]*ee+U[2])/ne,H=(U[3]*q+U[4]*ee+U[5])/ne,Q=lH(K,A,l),X=lH(H,f,l);switch(a){case"nearest":G=d8e(T,f,A,w,B,k,z,X,Q,Z,c);break;case"bilinear":G=f8e(T,f,A,w,B,k,z,X,Q,Z,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const re=z*I+ee*O+q*F+Z;D[re]=G}return r.makeTensorInfo(x,s.dtype,D)}return{dataId:r.write(D,x,s.dtype),shape:s.shape,dtype:s.dtype}}const a8e={kernelName:e3,backendName:"cpu",kernelFunc:i8e};function lH(t,e,n){switch(n){case"reflect":return o8e(t,e);case"wrap":return l8e(t,e);case"nearest":return u8e(t,e);default:return c8e(t)}}function o8e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return pm(0,n,e-1)}function l8e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return pm(0,n,e-1)}function c8e(t,e){return t}function u8e(t,e){return pm(0,t,e-1)}function Zv(t,e,n,r,s,i,a,l,c,u,d){const f=a*r+l*s+c*i+u;return 0<=l&&l<e&&0<=c&&c<n?t[f]:d}function d8e(t,e,n,r,s,i,a,l,c,u,d){const f=Math.round(l),A=Math.round(c);return Zv(t,e,n,r,s,i,a,f,A,u,d)}function f8e(t,e,n,r,s,i,a,l,c,u,d){const f=Math.floor(l),A=Math.floor(c),m=f+1,g=A+1,y=(g-c)*Zv(t,e,n,r,s,i,a,f,A,u,d)+(c-A)*Zv(t,e,n,r,s,i,a,f,g,u,d),x=(g-c)*Zv(t,e,n,r,s,i,a,m,A,u,d)+(c-A)*Zv(t,e,n,r,s,i,a,m,g,u,d);return(m-l)*y+(l-f)*x}function h8e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;yn(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:l,outputShape:c,indices:u}=Lie(a,s,i.shape,i.dtype);return[r.makeTensorInfo(c,i.dtype,l),r.makeTensorInfo([u.length],"int32",u)]}const A8e={kernelName:t3,backendName:"cpu",kernelFunc:h8e};function p8e(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=s.shape[m]);const d=new Array(a).fill(0),f=s.shape.slice();f[i]=1;const A=new Array(l);for(let m=0;m<A.length;m++){d[i]=m;const g=A0({inputs:{x:s},backend:n,attrs:{begin:d,size:f}});A[m]=ri({inputs:{x:g},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(g)}return A}const m8e={kernelName:B5,backendName:"cpu",kernelFunc:p8e};function g8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r;yn(s,"unsortedSegmentSum");const l=s.shape.length,c=i.shape.length,u=[],d=[],f=l-c;let A=i;for(let g=0;g<f;++g){const y=p4({inputs:{input:A},backend:n,attrs:{dim:g+1}});A=y,d.push(y)}for(let g=0;g<a;++g){const y=qA(g,"int32"),x=n.makeTensorInfo([],"int32",y),v=Jse({inputs:{a:x,b:A},backend:n}),w=Bm({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),B=sI({inputs:{a:w,b:s},backend:n}),k=oS({inputs:{x:B},backend:n,attrs:{axis:0,keepDims:!1}});u.push(k),d.push(x),d.push(v),d.push(w),d.push(B),d.push(k)}const m=Jie({inputs:u,backend:n,attrs:{axis:0}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const y8e={kernelName:j5,backendName:"cpu",kernelFunc:g8e};const x8e=[h_e,qNe,p_e,g_e,ZNe,x_e,v_e,S_e,k_e,j_e,I_e,T_e,R_e,D_e,$_e,U_e,Q_e,W_e,q_e,d_e,K_e,Y_e,Z_e,tTe,tRe,YNe,rTe,rRe,GNe,iRe,oRe,lRe,uRe,fRe,ARe,mRe,yRe,bRe,wRe,CRe,BRe,ERe,NRe,_Re,RRe,FRe,LRe,PRe,zRe,URe,MRe,HRe,qRe,s_e,KRe,sTe,r6e,iTe,s6e,oTe,u6e,d6e,h6e,cTe,dTe,p6e,g6e,x6e,v6e,hTe,pTe,KNe,S6e,aRe,k6e,j6e,I6e,i_e,gTe,xTe,T6e,vTe,R6e,D6e,$6e,U6e,Q6e,W6e,V6e,STe,G6e,X6e,J6e,eOe,nOe,sOe,aOe,kTe,lOe,dOe,AOe,jTe,ITe,gOe,bOe,SOe,TTe,kOe,jOe,EOe,Zie,_Oe,o_e,OTe,OOe,DOe,$Oe,zOe,XNe,rF,MOe,l_e,c_e,u_e,HOe,VOe,GOe,XOe,JOe,ZOe,tFe,MTe,rFe,lFe,uFe,AFe,HTe,mFe,yFe,bFe,WTe,fOe,SFe,kFe,jFe,IFe,TFe,RFe,FFe,LFe,GTe,$Fe,XTe,JTe,zFe,MFe,HFe,VFe,GFe,n_e,WRe,XFe,JFe,e8e,n8e,s8e,a8e,_Te,A8e,m8e,y8e,BOe];for(const t of x8e)r3(t);const kg={},MC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function b8e(t,e){kg[t]=e}function Af(t,e){if(!(t in kg)||e!=null){const r=w8e(t,e);if(r!==null)kg[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=kg[t];return n==null||n.isContextLost()?(delete kg[t],Af(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),kg[t])}function v8e(t){if(!Ye().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function w8e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??v8e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete kg[t]},!1),Ye().getBool("SOFTWARE_WEBGL_ENABLED")&&(MC.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",MC)||n.getContext("experimental-webgl",MC):n.getContext("webgl2",MC)}var W2;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(W2||(W2={}));var pu;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(pu||(pu={}));var Po;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Po||(Po={}));function lS(t,e){return[e,t]}function S8e(t,e){return t*e}function QC(t){const e=it(t),n=Math.ceil(e/4);return WB(n)}function ab(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function C8e(t,e){const[n,r]=ab(t,e);return n*r*4}function nP(t,e){const n=t;let r,s,i,a,l,c,u,d,f,A;return Ye().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,a=n.RGBA32F,l=n.RED,u=4,d=1,f=n.HALF_FLOAT,A=n.FLOAT,c=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,a=n.RGBA,l=t.RGBA,u=4,d=4,f=e!=null?e.HALF_FLOAT_OES:null,A=t.FLOAT,c=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:c,downloadUnpackNumChannels:u,defaultNumChannels:d,textureTypeHalfFloat:f,textureTypeFloat:A}}function Zt(t,e){const n=e();return Ye().getBool("DEBUG")&&k8e(t),n}function k8e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+I8e(t,e))}const B8e=596e-10,j8e=65504;function E8e(t){return!!(Ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||B8e<Math.abs(t)&&Math.abs(t)<j8e)}function I8e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function HC(t,e){return ep(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function N8e(t,e){const n=ep(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Zt(t,()=>t.shaderSource(n,e)),Zt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function T8e(t,e){const n=ep(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Zt(t,()=>t.shaderSource(n,e)),Zt(t,()=>t.compileShader(n)),Ye().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw eae(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const _8e=/ERROR: [0-9]+:([0-9]+):/g;function eae(t,e){const n=_8e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,a=s.map((f,A)=>Pg((A+1).toString(),i)+f);let l=0;for(let f=0;f<a.length;f++)l=Math.max(a[f].length,l);const c=a.slice(0,r-1),u=a.slice(r-1,r),d=a.slice(r);console.log(c.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Pg(u[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function R8e(t){return ep(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function O8e(t,e){if(Zt(t,()=>t.linkProgram(e)),!Ye().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function u_(t,e){if(Zt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function F8e(t,e){const n=ep(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Zt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Zt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function D8e(t,e){const n=ep(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Zt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Zt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function L8e(t){return ep(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function $8e(t,e){const n=Ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function P8e(t){return ep(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function cH(t,e,n,r,s,i,a){const l=t.getAttribLocation(e,n);return l===-1?!1:(Zt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Zt(t,()=>t.vertexAttribPointer(l,s,t.FLOAT,!1,i,a)),Zt(t,()=>t.enableVertexAttribArray(l)),!0)}function z8e(t,e,n){W8e(t,n),Zt(t,()=>t.activeTexture(t.TEXTURE0+n)),Zt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function U8e(t,e,n){return ep(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function M8e(t,e,n){return t.getUniformLocation(e,n)}function Q8e(t,e,n,r){Zt(t,()=>z8e(t,e,r)),Zt(t,()=>t.uniform1i(n,r))}function d_(t,e,n){Zt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Zt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function uH(t,e){Zt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Zt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function WC(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+H8e(t,e))}function H8e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ep(t,e,n){const r=Zt(t,()=>e());if(r==null)throw new Error(n);return r}function W8e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function z1(t,e=2){return it(t.slice(0,t.length-e))}function U1(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function VC(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[z1(t),...U1(t)]),e}function V8e(t,e=!1){let n=Ye().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ye().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ye().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((l,c)=>c>=t.length-2?Xj(t[c]):t[c]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=VA(t).newShape);let s=it(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const a=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const l=z1(t);let c=2,u=2;t.length&&([c,u]=U1(t)),s=l*(c/2)*(u/2),i=WB(s).map(d=>d*2)}else i=WB(s);return i}function qC(t){return t%2===0}function g4(t,e){if(t=t.slice(-2),e=e.slice(-2),vr(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||qC(n)&&qC(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&qC(t[0])&&qC(e[0])}let f_,h_;function q8e(t){if(f_==null){const e=Af(t);f_=e.getParameter(e.MAX_TEXTURE_SIZE)}return f_}function G8e(t){if(h_==null){const e=Af(t);h_=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,h_)}function K8e(t){if(t===0)return 0;let e;const n=Af(t);return nd(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:nd(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function nd(t,e){return t.getExtension(e)!=null}function dH(t){try{if(Af(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function X8e(t){if(t===0)return!1;const e=Af(t);if(t===1){if(!nd(e,"OES_texture_float"))return!1}else if(!nd(e,"EXT_color_buffer_float"))return!1;return iF(e)}function Y8e(t){if(t===0)return!1;const e=Af(t);if(t===1){if(!nd(e,"OES_texture_float")||!nd(e,"WEBGL_color_buffer_float"))return!1}else{if(nd(e,"EXT_color_buffer_float"))return iF(e);const r="EXT_color_buffer_half_float";if(nd(e,r)){const s=e.getExtension(r);return J8e(e,s)}return!1}return iF(e)}function iF(t){const e=nP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),a}function J8e(t,e){const n=nP(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),l}function Z8e(t){return t!==2?!1:Af(t).fenceSync!=null}function cS(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ce(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}const wn=Ye();wn.registerFlag("HAS_WEBGL",()=>wn.getNumber("WEBGL_VERSION")>0);wn.registerFlag("WEBGL_VERSION",()=>dH(2)?2:dH(1)?1:0);wn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);wn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>wn.get("WEBGL_VERSION")===2);wn.registerFlag("WEBGL_CPU_FORWARD",()=>!0);wn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);wn.registerFlag("WEBGL_PACK",()=>wn.getBool("HAS_WEBGL"));wn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_CLIP",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_REDUCE",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_LAZILY_UNPACK",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_CONV_IM2COL",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>wn.getBool("WEBGL_PACK"));wn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>q8e(wn.getNumber("WEBGL_VERSION")));wn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>G8e(wn.getNumber("WEBGL_VERSION")));wn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=wn.getNumber("WEBGL_VERSION");return t===0?0:K8e(t)});wn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>wn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ID());wn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>X8e(wn.getNumber("WEBGL_VERSION")));wn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>wn.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:wn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));wn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Y8e(wn.getNumber("WEBGL_VERSION")));wn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Z8e(wn.getNumber("WEBGL_VERSION")));wn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>wn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);wn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});wn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>ID()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});wn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);wn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);wn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);wn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);wn.registerFlag("WEBGL_EXP_CONV",()=>!1);wn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>wn.getBool("IS_TEST"));wn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);wn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);wn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);wn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Dl(){let t,e,n,r,s,i,a,l,c,u;return Ye().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",a="out vec4 outputColor;",l=Ye().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",c="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:c,defineRound:u}}function P0(t,e,n="index"){const r=On(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${s}`,l=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${a}; ${l};`}).join("")}function iI(t,e,n="index"){const r=On(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,l=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${l};`}).join("")}function eDe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function tDe(t,e,n="index"){const r=t.map((i,a)=>a),s=eDe(r,e);return s.map((i,a)=>{const l=`int ${t[a]} = ${n} / ${s[a]}`,c=a===s.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s[a]}`:`index -= ${t[a]} * ${s[a]}`;return`${l}; ${c};`}).join("")}function rP(t){const e=On(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function sP(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const tae=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;const{getBroadcastDims:nae}=Sne;function nDe(t,e,n){const r=[];if(t.forEach(m=>{const g=it(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?r.push(`uniform float ${m.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${m.name};`),r.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){const{uniformShape:y}=iP(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${m.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${m.name}Shape;`);break}r.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{r.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(m=>rDe(m,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,l=Dl(),c=aDe(l);let u,d,f=cDe(l);return e.isPacked?(u=sDe(e.logicalShape,a,n.enableShapeUniforms),d=lDe(l)):(u=iDe(e.logicalShape,a,n.enableShapeUniforms),d=oDe(l)),n.packedInputs&&(f+=hDe),[f,c,d,s,u,i,n.userCode].join(`
`)}function ob(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return kDe(t,e);case 1:return jDe(t,e);case 2:return IDe(t,e);case 3:return TDe(t,e);case 4:return RDe(t,e);case 5:return ODe(t);case 6:return FDe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function rae(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return CDe(t);case 1:return BDe(t,e);case 2:return EDe(t,e);case 3:return NDe(t,e);default:return _De(t,e)}}function rDe(t,e,n=!1,r){let s="";n?s+=rae(t,r):s+=ob(t,r);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(n?s+=DDe(t,e):s+=LDe(t,e)),s}function sDe(t,e,n){switch(t.length){case 0:return sae();case 1:return ADe(t,e,n);case 2:return wDe(t,e,n);case 3:return mDe(t,e,n);default:return yDe(t,e,n)}}function iDe(t,e,n){switch(t.length){case 0:return sae();case 1:return pDe(t,e,n);case 2:return SDe(t,e,n);case 3:return gDe(t,e,n);case 4:return xDe(t,e,n);case 5:return bDe(t,e);case 6:return vDe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function aDe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function oDe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function lDe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function cDe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${uDe}
    ${dDe}
    ${fDe}
  `}const uDe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dDe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fDe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hDe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function sae(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function ADe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function pDe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function mDe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function gDe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${iI(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=P0(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function yDe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let a=i,l="",c="b, r, c";for(let u=2;u<t.length-1;u++)a*=t[t.length-u-1],l=`
      int b${u} = index / ${a};
      index -= b${u} * ${a};
    `+l,c=`b${u}, `+c;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${l}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${c});
    }
  `}function xDe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${iI(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=P0(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function bDe(t,e){const n=P0(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function vDe(t,e){const n=P0(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function wDe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(vr(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function SDe(t,e,n){return vr(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function z0(t){return`offset${t}`}function CDe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Dl();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function kDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=z0(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[l,c]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${l}, ${c}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function BDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Dl();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function jDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${lb(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const l=z0(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function EDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=i[0],l=i[1],c=Dl();if(i!=null&&vr(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${c.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${c.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${c.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d}, ${u[0]}, ${u[1]}, row, col);
      return ${c.texture2D}(${r}, uv);
    }
  `}function IDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&vr(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const A=i[0],m=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${A}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:l}=VA(n),c=a;if(c.length<n.length){const A=cb(t,c),m=["row","col"];return`
      ${ob(A,e)}
      float ${s}(int row, int col) {
        return ${s}(${ub(m,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${lb(t)}
      }
    `;const u=i[0],d=i[1],f=z0(r);return d===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${d}, index);
    return sampleTexture(${r}, uv);
  }
`}function NDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const A=n.slice(1),m=[1,2],g=cb(t,A),y=["b","row","col"];return`
        ${rae(g,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${ub(y,m)});
        }
      `}const l=Dl();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=a[0],u=a[1],d=Math.ceil(n[2]/2),f=d*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${c}, ${u}, ${f}, ${d}, b, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function TDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:l,keptDims:c}=VA(n),u=l;if(u.length<n.length){const y=cb(t,u),x=["row","col","depth"];return`
        ${ob(y,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${ub(x,c)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${lb(t)}
      }
    `;const d=t.shapeInfo.texShape,f=d[0],A=d[1],m=t.shapeInfo.flatOffset;if(A===i&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${A}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(A===a&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${A}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=z0(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${g};
        vec2 uv = uvFromFlat(${f}, ${A}, index);
        return sampleTexture(${r}, uv);
      }
  `}function _De(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Dl();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,a=i.length,l=t.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],u=c[0],d=c[1],f=Math.ceil(i[a-1]/2);let A=f*Math.ceil(i[a-2]/2),m="int b, int row, int col",g=`b * ${A} + (row / 2) * ${f} + (col / 2)`;for(let y=2;y<a-1;y++)m=`int b${y}, `+m,A*=i[a-y-1],g=`b${y} * ${A} + `+g;return`
    vec4 ${r}(${m}) {
      int index = ${g};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function RDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,l=n[1]*a,{newShape:c,keptDims:u}=VA(n);if(c.length<n.length){const w=cb(t,c),B=["row","col","depth","depth2"];return`
      ${ob(w,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${ub(B,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${i}, 1)));
        ${lb(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,A=f[0],m=f[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,x=`int stride0 = ${r}Shape[1] * stride1;`;if(m===l&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${A}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===i&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${A}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=z0(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${x}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${A}, ${m}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function ODe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,a=e[2]*i,l=e[1]*a,{newShape:c,keptDims:u}=VA(e);if(c.length<e.length){const y=cb(t,c),x=["row","col","depth","depth2","depth3"];return`
      ${ob(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${ub(x,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${i}, ${s})) +
          depth3;
        ${lb(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,A=f[0],m=f[1];if(m===l&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${A}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${A}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=z0(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${i} +
          depth2 * ${s} + depth3 + ${g};
      vec2 uv = uvFromFlat(${A}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function FDe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=VA(e);if(s.length<e.length){const x=cb(t,s),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${ob(x)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${ub(v,i)});
      }
    `}const a=e[5],l=e[4]*a,c=e[3]*l,u=e[2]*c,d=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${u}, ${c}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${lb(t)}
      }
    `;const f=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,m=A[0],g=A[1];if(g===d&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${c}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===a&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=z0(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${u} + depth * ${c} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${y};
      vec2 uv = uvFromFlat(${m}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function lb(t){const e=t.name,n=it(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function DDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,l=nae(t.shapeInfo.logicalShape,e.logicalShape),c=Fs(a),u=a-i;let d;const f=["x","y","z","w","u","v"];i===0?d="":a<2&&l.length>=1?d="coords = 0;":d=l.map(w=>`coords.${f[w+u]} = 0;`).join(`
`);let A="";a<2&&i>0?A="coords":A=t.shapeInfo.logicalShape.map((w,B)=>`coords.${f[B+u]}`).join(", ");let m="return outputValue;";const y=it(t.shapeInfo.logicalShape)===1,v=it(e.logicalShape)===1;if(i===1&&!y&&!v)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!v)a===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(l.length){const w=i-2,B=i-1;l.indexOf(w)>-1&&l.indexOf(B)>-1?m="return vec4(outputValue.x);":l.indexOf(w)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(B)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${c} coords = getOutputCoords();
      ${d}
      vec4 outputValue = get${r}(${A});
      ${m}
    }
  `}function LDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!t.shapeInfo.isUniform&&l===c&&t.shapeInfo.flatOffset==null&&vr(a,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Fs(c),d=nae(t.shapeInfo.logicalShape,e.logicalShape),f=c-l;let A;const m=["x","y","z","w","u","v"];l===0?A="":c<2&&d.length>=1?A="coords = 0;":A=d.map(y=>`coords.${m[y+f]} = 0;`).join(`
`);let g="";return c<2&&l>0?g="coords":g=t.shapeInfo.logicalShape.map((y,x)=>`coords.${m[x+f]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${A}
      return get${r}(${g});
    }
  `}function Fs(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function iP(t,e,n){const{newShape:r,keptDims:s}=VA(e),i=e.length,a=t&&i===3&&e[0]===1,l=a?e.slice(1):r,c=!t&&i>1&&!vr(e,n)&&r.length<i||a;return{useSqueezeShape:c,uniformShape:c?l:e,keptDims:s}}function cb(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ub(t,e){return e.map(n=>t[n]).join(", ")}function $De(t,e,n,r){const s=n.map((d,f)=>{const A={logicalShape:d.shape,texShape:d.isUniform?null:d.texData.texShape,isUniform:d.isUniform,isPacked:d.isUniform?!1:d.texData.isPacked,flatOffset:null};return d.texData!=null&&d.texData.slice!=null&&d.texData.slice.flatOffset>0&&(A.flatOffset=d.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:A}}),i=s.map(d=>d.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=nDe(s,a,e),c=T8e(t.gl,l),u=t.createProgram(c);return Ye().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:c,source:l,webGLProgram:u,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:c,source:l,webGLProgram:u,inShapeInfos:i,outShapeInfo:a},iae(t,e,u)))}function iae(t,e,n){const r=[],s=[];let i,a,l,c=null,u=null;u=t.getUniformLocation(n,"NAN",!1),Ye().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const d=!1;for(const f of e.variableNames){const A={name:f,uniform:t.getUniformLocation(n,f,d),offset:t.getUniformLocation(n,`offset${f}`,d)};e.enableShapeUniforms&&(A.shape=t.getUniformLocation(n,`${f}Shape`,d),A.texShape=t.getUniformLocation(n,`${f}TexShape`,d)),r.push(A)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",d),l=t.getUniformLocation(n,"outShapeStrides",d),a=t.getUniformLocation(n,"outTexShape",d)),e.customUniforms)for(const f of e.customUniforms)s.push(t.getUniformLocation(n,f.name,d));return{variablesLocations:r,customUniformLocations:s,infLoc:c,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:l,outTexShapeLocation:a}}function fH(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],a=i.shape;if(!vr(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(n.isUniform&&i.isUniform)return;const l=n.texShape,c=i.isUniform?null:i.texData.texShape;if(!vr(l,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${c} must match`)})}function PDe(t,e,n,r,s){e.program.enableShapeUniforms||(fH(e.inShapeInfos,n),fH([e.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):t.setOutputMatrixTexture(i.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Ye().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let c=0;c<n.length;++c){const u=n[c],{uniform:d,offset:f,shape:A,texShape:m}=e.variablesLocations[c];if(A){const{uniformShape:g}=iP(e.program.packedInputs,u.shape,u.texData.texShape);switch(g.length){case 1:t.gl.uniform1iv(A,new Int32Array(g));break;case 2:t.gl.uniform2iv(A,new Int32Array(g));break;case 3:t.gl.uniform3iv(A,new Int32Array(g));break;case 4:t.gl.uniform4iv(A,new Int32Array(g));break}}if(m&&t.gl.uniform2i(m,u.texData.texShape[0],u.texData.texShape[1]),d!=null){if(u.isUniform){if(it(u.shape)<2)t.gl.uniform1f(d,u.uniformValues[0]);else{let g=u.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),t.gl.uniform1fv(d,g)}continue}u.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,d,c)}}const l=e.outShapeLocation;if(l)switch(r.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const c=On(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(c));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(c));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(c));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let c=0;c<e.program.customUniforms.length;++c){const u=e.program.customUniforms[c],d=e.customUniformLocations[c],f=s[c];if(u.type==="float")t.gl.uniform1fv(d,f);else if(u.type==="vec2")t.gl.uniform2fv(d,f);else if(u.type==="vec3")t.gl.uniform3fv(d,f);else if(u.type==="vec4")t.gl.uniform4fv(d,f);else if(u.type==="int")t.gl.uniform1iv(d,f);else if(u.type==="ivec2")t.gl.uniform2iv(d,f);else if(u.type==="ivec3")t.gl.uniform3iv(d,f);else if(u.type==="ivec4")t.gl.uniform4iv(d,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function zDe(t,e,n){let r="";e.concat(n).forEach(a=>{const l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const c=a.texData.texShape,{useSqueezeShape:u,uniformShape:d,keptDims:f}=iP(t.packedInputs,a.shape,c);let A="",m="",g="";if(d.length===1&&t.packedInputs){const j=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];A=`${j[0]>1}_${j[1]>1}`}else if(d.length===2&&!t.packedInputs)m=`${d[0]>1}_${d[1]>1}`;else if(d.length>2&&!t.packedInputs){const j=On(d);g=`${j[0]===c[1]}_${j[j.length-1]===c[1]}`}const y=a.shape.length,x=d.length===2&&vr(a.shape,c),v=it(a.shape)===1,w=o0(a.shape,n.shape),B=!t.packedInputs&&y===n.shape.length&&vr(c,n.texData.texShape),k=t.packedInputs||d.length>2?"":`${c[0]>1}_${c[1]>1}`;r+=`${y}_${B}_${u?f:""}_${d.length}_${v}_${w}_${x}_${A}_${m}_${g}_${k}_${l}`}else{const c=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${c}_${l}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${Ye().getNumber("WEBGL_VERSION")}`,i}function fl(t){return Ye().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class UDe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=W2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Dl();this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?iI(["r","c","d"],e):P0(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}class MDe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=W2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Dl();this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?iI(["r","c","d"],e):P0(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}class QDe{constructor(e){this.variableNames=["A"],this.outTexUsage=pu.DOWNLOAD;const n=Dl();this.outputShape=e,this.userCode=`
      ${tae}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}class HDe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=pu.DOWNLOAD;const n=Dl();this.outputShape=e,this.userCode=`
      ${tae}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}const WDe={R:0,G:1,B:2,A:3};class hH{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Dl();this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let l=0;l<r.length;l++){const c=r[l];a+=`
          if(offset == ${l}) {
            result = values[${WDe[c]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?sP():rP(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}class VDe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Dl();this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){const c=a*2+l;s+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${c}] = values[0];
            } else if (offset == 1) {
              result[${c}] = values[1];
            } else if (offset == 2) {
              result[${c}] = values[2];
            } else {
              result[${c}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?sP():rP(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}function qDe(t){const e=Dl(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return N8e(t,n)}function GDe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return F8e(t,e)}function KDe(t){const e=new Uint16Array([0,1,2,2,1,3]);return D8e(t,e)}function uS(t,e,n,r,s,i){$8e(e,n);const a=L8e(t),l=t.TEXTURE_2D;return Zt(t,()=>t.bindTexture(l,a)),Zt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Zt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Zt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),Zt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ye().getNumber("WEBGL_VERSION")===1?Zt(t,()=>t.texImage2D(l,0,r,e,n,0,s,i,null)):Zt(t,()=>t.texStorage2D(l,1,r,e,n)),Zt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function aae(t){return t.internalFormatFloat}function XDe(t,e,n,r){const[s,i]=lS(e,n);return uS(t,s,i,aae(r),r.textureFormatFloat,t.FLOAT)}function oae(t){return t.internalFormatHalfFloat}function YDe(t,e,n,r){const[s,i]=lS(e,n);return uS(t,s,i,oae(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function lae(t){return t.downloadTextureFormat}function JDe(t,e,n,r){const[s,i]=lS(e,n);return uS(t,s,i,lae(r),t.RGBA,t.UNSIGNED_BYTE)}function cae(t){return t.internalFormatPackedFloat}function ZDe(t,e,n,r){const[s,i]=ab(e,n);return uS(t,s,i,cae(r),t.RGBA,t.FLOAT)}function uae(t){return t.internalFormatPackedHalfFloat}function eLe(t,e,n,r){const[s,i]=ab(e,n);return uS(t,s,i,uae(r),t.RGBA,r.textureTypeHalfFloat)}function tLe(t,e,n){return Zt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),cH(t,e,"clipSpacePos",n,3,20,0)&&cH(t,e,"uv",n,2,20,12)}function nLe(t,e,n,r,s,i){Zt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,l,c;s instanceof Uint8Array?(a=new Uint8Array(n*r*4),l=t.UNSIGNED_BYTE,c=t.RGBA):(a=new Float32Array(n*r*4),l=t.FLOAT,c=i.internalFormatPackedFloat),a.set(s),Ye().getNumber("WEBGL_VERSION")===2?Zt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,l,a)):Zt(t,()=>t.texImage2D(t.TEXTURE_2D,0,c,n,r,0,t.RGBA,l,a)),Zt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function rLe(t,e,n){Zt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ye().getNumber("WEBGL_VERSION")===2?Zt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Zt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ye().getNumber("WEBGL_VERSION")===2?Zt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Zt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Zt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function sLe(t,e,n,r){const s=t.createBuffer();Zt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const l=4*4*e*n;return Zt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),Zt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Zt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function iLe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function aLe(t,e,n,r){const[s,i]=lS(e,n),a=4,l=new Uint8Array(S8e(e*n,a));return Zt(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function oLe(t,e,n,r,s,i,a,l){const c=t,u=new Float32Array(C8e(i,a));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}function lLe(t,e,n){const r=new Float32Array(e*n*4);return Zt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}class A_{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Ye().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,b8e(n,e)):this.gl=Af(n),e=this.gl,Ye().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Zt(i,()=>i.createVertexArray()),this.bindVertexArray=a=>Zt(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>Zt(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>Zt(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Zt(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>Zt(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Zt(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>Zt(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ye().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=HC(this.gl,i),nd(this.gl,a))this.textureHalfFloatExtension=HC(this.gl,a);else if(Ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),nd(this.gl,s))this.colorBufferHalfFloatExtension=HC(this.gl,s);else if(Ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",nd(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(nd(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=GDe(this.gl),this.indexBuffer=KDe(this.gl),this.framebuffer=P8e(this.gl),this.textureConfig=nP(this.gl,this.textureHalfFloatExtension)}get debug(){return Ye().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Zt(e,()=>e.finish()),Zt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Zt(e,()=>e.deleteFramebuffer(this.framebuffer)),Zt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Zt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Zt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),XDe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),YDe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),JDe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),rLe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),nLe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),eLe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),ZDe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uH(this.gl,this.framebuffer),this.outputTexture=null),Zt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>aLe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,a){return oLe(this.gl,e,n,r,s,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return iLe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=sLe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ye().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=i}else Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>lLe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=qDe(n));const r=R8e(n);Zt(n,()=>n.attachShader(r,this.vertexShader)),Zt(n,()=>n.attachShader(r,e)),O8e(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&u_(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Zt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),tLe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Zt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&u_(this.gl,this.program),Zt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?U8e(this.gl,e,n):M8e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Zt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Q8e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=ab(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&u_(this.gl,this.program),WC(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Zt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Zt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=HC(this.gl,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await hO(()=>this.disposed||this.isQueryAvailable(e,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=cLe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ye().platform&&(r=Ye().platform.setTimeoutCustom.bind(Ye().platform)),hO(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),d_(this.gl,e,this.framebuffer),this.debug&&WC(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(d_(this.gl,this.outputTexture,this.framebuffer),this.debug&&WC(this.gl)):uH(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;d_(s,e,this.framebuffer),this.debug&&WC(s),this.outputTexture=e,Zt(s,()=>s.viewport(0,0,n,r)),Zt(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Zt(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function cLe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}const{addImpl:uLe,bincountImpl:dae,bincountReduceImpl:dLe,bitwiseAndImpl:fLe,castImpl:hLe,ceilImpl:ALe,concatImpl:pLe,equalImpl:mLe,expImpl:gLe,expm1Impl:yLe,floorImpl:xLe,gatherNdImpl:bLe,gatherV2Impl:vLe,greaterImpl:wLe,greaterEqualImpl:SLe,lessImpl:CLe,lessEqualImpl:kLe,linSpaceImpl:BLe,logImpl:jLe,maxImpl:ELe,maximumImpl:ILe,minimumImpl:NLe,multiplyImpl:TLe,negImpl:_Le,notEqualImpl:RLe,prodImpl:OLe,raggedGatherImpl:FLe,raggedRangeImpl:DLe,raggedTensorToTensorImpl:LLe,rangeImpl:$Le,rsqrtImpl:PLe,scatterImpl:zLe,sigmoidImpl:ULe,simpleAbsImpl:fae,sliceImpl:MLe,sparseFillEmptyRowsImpl:QLe,sparseReshapeImpl:HLe,sparseSegmentReductionImpl:hae,sqrtImpl:WLe,staticRegexReplaceImpl:VLe,stridedSliceImpl:qLe,stringNGramsImpl:GLe,stringSplitImpl:KLe,stringToHashBucketFastImpl:XLe,subImpl:YLe,tileImpl:JLe,topKImpl:ZLe,transposeImpl:aP,uniqueImpl:e$e}=r_e;function Aae(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Tl(t,e){return e===1?[t]:Aae(t,e)}function t$e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}class n$e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=fl(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Tl("rc",this.rank),r=Fs(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}class pae{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${r$e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?sP():rP(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function r$e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?tDe(["r","c","d"],"inputShape"):P0(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}class s$e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=pH(n,r),i=mH(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=AH(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const c=this.freeTextures[i].pop();return this.usedTextures[i].push(c),c}let l;return s===Po.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Po.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Po.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Po.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Po.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=pH(r,s),a=mH(n,i,s);a in this.freeTextures||(this.freeTextures[a]=[]);const l=AH(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),c=Ye().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");c!==-1&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;const u=this.usedTextures[a],d=u&&u.indexOf(e);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[d]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function i$e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function AH(t,e,n,r,s){const i=a$e(e,r);let a;if(s){const[c,u]=ab(t[0],t[1]);a=c*u}else{const[c,u]=lS(t[0],t[1]);a=c*u}const l=i$e(n,i);return a*l}function a$e(t,e){switch(t){case Po.PACKED_2X2_FLOAT32:return cae(e);case Po.PACKED_2X2_FLOAT16:return uae(e);case Po.UNPACKED_FLOAT32:return aae(e);case Po.UNPACKED_FLOAT16:return oae(e);case Po.PACKED_4X1_UNSIGNED_BYTE:return lae(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function o$e(t){return Ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Po.PACKED_2X2_FLOAT32:Po.UNPACKED_FLOAT32:t?Po.PACKED_2X2_FLOAT16:Po.UNPACKED_FLOAT16}function pH(t,e){if(t===pu.UPLOAD)return Po.PACKED_2X2_FLOAT32;if(t===pu.RENDER||t==null)return o$e(e);if(t===pu.DOWNLOAD||t===pu.PIXELS)return Po.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function mH(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}class th{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const yd="if (isnan(x)) return x;",l$e="return x;",gH="return abs(x);",c$e="return (x >= 0.0) ? x : (exp(x) - 1.0);",u$e=yd+`
  return (x < 0.0) ? 0.0 : x;
`,d$e=yd+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Mp="return x;",f$e="return 1.0 / (1.0 + exp(-1.0 * x));";const h$e="return x;",A$e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,p$e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,m$e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,g$e="return 1.0 / (1.0 + exp(-1.0 * x));";class Xp{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}class y$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length);const n=e.length,r=Tl("rc",n),s=Fs(n),i=t$e(n,r),a=r.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}}const x$e=_3,b$e=1e-7,v$e=1e-4,GC={};function w$e(t){return t in GC||(GC[t]={}),GC[t]}const S$e=Ye().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),C$e=600;function k$e(){return Ye().global.screen==null?1024:Ye().global.screen.height*Ye().global.screen.width*window.devicePixelRatio*C$e/1024/1024}class aI extends Kj{nextDataId(){return aI.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ye().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof A_)n=e;else{const r=Af(Ye().getNumber("WEBGL_VERSION"),e);n=new A_(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Af(Ye().getNumber("WEBGL_VERSION"));n=new A_(r),this.binaryCache=w$e(Ye().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new s$e(this.gpgpu),this.numMBBeforeWarning=k$e(),this.texData=new bD(this,Kd())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,a){const l=this.makeTensorInfo(n,r),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[s,i]},c.texShape=[s,i];const u=VC(n),d=new hH(u,!1,a),f=this.runWebGLProgram(d,[l],r,[[s,i]]);return f.shape=n,c.texture=null,this.disposeIntermediateTensorInfo(l),f.dataId}write(e,n,r){if((Ye().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ye().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:pu.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(Ye().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:pu.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:a,shape:l,isPacked:c}=n;if(a!=null){let A;c?A=new Xp(l,Mp):A=new th(l,Mp);const m=this.runWebGLProgram(A,[{dataId:e,shape:l,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let d;u&&(d=Cl());let f;if(s==="complex64"){const A=this.readSync(i.real.dataId),m=this.readSync(i.imag.dataId);f=OA(A,m)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Cl()-d),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:a,complexTensorInfos:l,isPacked:c}=n;if(i!=null){let g;c?g=new Xp(s,Mp):g=new th(s,Mp);const y=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:a}],a),x=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ye().getBool("DEBUG")&&!Ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ye().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&Ye().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);const g=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...QC(s))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(a==="complex64"){const g=await Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),y=g[0],x=g[1];f=OA(y,x)}else if(u==null)f=this.getValuesFromTexture(e);else{const g=it(s);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){const g=this.gpgpu.gl;Zt(g,()=>g.deleteBuffer(u))}const A=this.convertAndCacheOnCPU(e,f),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(A)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Kd().removeDataId(e,this),this.pendingDeletes--),A}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:a,dtype:l,isPacked:c,texture:u}=r;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let m;c?m=new Xp(i,Mp):m=new th(i,Mp);const g=this.runWebGLProgram(m,[{dataId:e,shape:i,dtype:l}],l),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,n.customTexShape),f=Kd().makeTensorFromTensorInfo(d),A=this.texData.get(d.dataId);return Object.assign({tensorRef:f},A.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>TA(s));return cr(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return cr(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!E8e(r))throw Ye().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=it(n);if(Ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const A=this.decode(e),m=this.texData.get(A.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...QC(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(A),g}const a=Ye().getBool("WEBGL_PACK")&&s===!0,l=a?VC(n):n,c=a?new HDe(l):new QDe(l),u=this.runWebGLProgram(c,[{shape:l,dtype:r,dataId:e}],"float32"),d=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Ah(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=Ah(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const c=await Promise.all(i);l.kernelMs=WZ(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Cl(),endMs:null}}endTimer(e){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Cl(),e)}async getQueryTime(e){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,a)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=S$e){return Ye().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&it(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){cu("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return x$e(e.shape,n)}packedUnaryOp(e,n,r){const s=new Xp(e.shape,n),i=this.compileAndRun(s,[e],r);return Kd().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=fae(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gH,e.dtype);const n=new th(e.shape,gH),r=this.compileAndRun(n,[e]);return Kd().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&eh(r[0])){const i=r.map(a=>ih(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Kd().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new y$e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new n$e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[z1(e.shape),...U1(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[z1(n),...U1(n)],a=new pae(i,r),l=!0,c=[r],u=this.runWebGLProgram(a,[s],e.dtype,c,l);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=r;if(n!=null){const A=it(i),m=n[0]*n[1]*4;ce(A<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const l=VC(i);let c;s?c=new MDe(l):c=new UDe(l);const u=!0,d=[n??QC(l)],f=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,n);return{dtype:a,shape:i,dataId:f.dataId}}runWebGLProgram(e,n,r,s,i=!1,a){const l=this.makeTensorInfo(e.outputShape,r),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===W2.DENSE){const v=a??QC(e.outputShape);c.texShape=v.map(w=>w*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),it(l.shape)===0)return c.values=go(l.dtype,0),l;const u=[],d=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let w=this.texData.get(v.dataId);if(w.texture==null){if(!e.packedInputs&&it(v.shape)<=Ye().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:w.values};e.packedInputs&&(w.isPacked=!0,w.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!w.isPacked!=!!e.packedInputs)v=w.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),w=this.texData.get(v.dataId);else if(w.isPacked&&!g4(w.shape,v.shape)){const B=v,k=v.shape;v.shape=w.shape,v=this.packedReshape(v,k),u.push(v),w=this.texData.get(v.dataId),B.shape=k}return{shape:v.shape,texData:w,isUniform:!1}});this.uploadToGPU(l.dataId);const f={shape:l.shape,texData:c,isUniform:!1},A=zDe(e,d,f),m=this.getAndSaveBinary(A,()=>$De(this.gpgpu,e,d,f)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),Ye().get("ENGINE_COMPILE_ONLY")||PDe(this.gpgpu,m,d,f,s),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const x=Ye().getNumber("WEBGL_FLUSH_THRESHOLD");if(x>0){const v=Cl();v-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!Ye().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&i===!1){const v=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),v}return l}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ye().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=He(()=>{if(!Ye().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ye().getBool("DEBUG");Ye().set("DEBUG",!1);const n=this.abs(Dn(1e-8)).dataSync()[0];if(Ye().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?b$e:v$e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:a,usage:l,isPacked:c}=n;if(a!=null)return;const u=this.activeTimers!=null;let d;u&&(d=Cl());let f=n.texShape;if(f==null&&(f=V8e(r,c),n.texShape=f),i!=null){const A=VC(r);let m,g=f[1],y=f[0];const x=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(c||!x)&&([g,y]=ab(f[0],f[1])),c?m=new VDe(A,x):m=new hH(A,x);const v=x?[y,g]:f,w=this.makeTensorInfo(v,s),B=this.texData.get(w.dataId);x?B.usage=pu.PIXELS:B.usage=pu.UPLOAD,B.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),g,y,i);const k=[[y,g]],I=this.runWebGLProgram(m,[w],s,k,!0),O=this.texData.get(I.dataId);n.texShape=O.texShape,n.isPacked=O.isPacked,n.usage=O.usage,Ye().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(n.texture=O.texture,n.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(w),u&&(this.uploadWaitMs+=Cl()-d)}else{const A=this.acquireTexture(f,l,s,c);n.texture=A}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=B$e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*I2(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await n$(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(eae(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=iae(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:a,channels:l}=e,c=Kd().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=c.writeTexture(s,n,r,i,a,l);return Kd().makeTensorFromDataId(u,n,r,c)}}aI.nextDataId=0;function B$e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}ND()&&RD("webgl",()=>new aI,2);const oP=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class p0{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=rr(n,r),this.enableShapeUniforms=fl(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}const U0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class db{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rr(n,r);const i=this.outputShape.length;this.enableShapeUniforms=fl(i);let a="";if(s)if(i===0||it(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Fs(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const c=Tl("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${c[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${c[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${c[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${c[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}function Mc(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const j$e={kernelName:Sx,backendName:"webgl",kernelFunc:Mc};function Qm(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(i.dataId),l=Mc({inputs:{x:r},backend:n}),c=Mc({inputs:{x:s},backend:n});return a.complexTensorInfos={real:l,imag:c},i}const E$e={kernelName:sE,backendName:"webgl",kernelFunc:Qm};const mae="return (a < 0.) ? b * a : a;",gae=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function I$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,a=n.makeTensorInfo([],"float32",qA(i,"float32")),l=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new db(gae,s.shape,a.shape):new p0(mae,s.shape,a.shape),c=n.runWebGLProgram(l,[s,a],"float32");return n.disposeIntermediateTensorInfo(a),c}const N$e={kernelName:Gw,backendName:"webgl",kernelFunc:I$e};const yae="return (a < 0.) ? b * a : a;",xae=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function T$e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new db(xae,r.shape,s.shape):new p0(yae,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const _$e={kernelName:h5,backendName:"webgl",kernelFunc:T$e};const fb="if (isnan(x)) return x;";function Gr({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:a}=s,l=i,c=r||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){const f=l.texData.get(a.dataId),A=n(f.values,c);return l.makeTensorInfo(a.shape,c,A)}const u=Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let d;return u?d=new Xp(a.shape,e):d=new th(a.shape,t),l.runWebGLProgram(d,[a],c)}}function Ko({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:a,backend:l})=>{const{a:c,b:u}=a,d=l;if(r&&c.dtype==="complex64"){const g=d.texData.get(c.dataId),y=d.texData.get(u.dataId),[x,v]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(B=>{const[k,j]=B,I={dataId:k.dataId,dtype:k.dtype,shape:c.shape},O={dataId:j.dataId,dtype:j.dtype,shape:u.shape},F=new p0(t,c.shape,u.shape);return d.runWebGLProgram(F,[I,O],ec(k.dtype,j.dtype))}),w=Qm({inputs:{real:x,imag:v},backend:d});return d.disposeIntermediateTensorInfo(x),d.disposeIntermediateTensorInfo(v),w}const f=i||ec(c.dtype,u.dtype);if((c.dtype==="string"||u.dtype==="string"||d.shouldExecuteOnCPU([c,u]))&&s!=null){const g=d.texData.get(c.dataId).values,y=d.texData.get(u.dataId).values,x=c.dtype==="string"?FA(g):g,v=c.dtype==="string"?FA(y):y,[w,B]=s(c.shape,u.shape,x,v,f),k=d.makeTensorInfo(B,f),j=d.texData.get(k.dataId);return j.values=w,k}const A=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let m;return A?m=new db(e,c.shape,u.shape,n):m=new p0(t,c.shape,u.shape),d.runWebGLProgram(m,[c,u],f)}}function V2(t,e=!1){if(t==="linear")return e?h$e:l$e;if(t==="relu")return e?p$e:u$e;if(t==="elu")return e?A$e:c$e;if(t==="relu6")return e?m$e:d$e;if(t==="prelu")return e?xae:yae;if(t==="leakyrelu")return e?gae:mae;if(t==="sigmoid")return e?g$e:f$e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class bae{constructor(e,n,r,s=!1,i=!1,a=!1,l=null,c=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=fl(this.outputShape.length);const d=s?e[1]:e[2],f=Math.ceil(d/2),A=s?"i * 2, rc.y":"rc.y, i * 2",m=i?"rc.z, i * 2":"i * 2, rc.z",g=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",v="";l&&(c?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:u?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:x=`vec4 activation(vec4 x) {
          ${l}
        }`,v="result = activation(result);");const w=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let B="rc.x",k="rc.x";e[0]<n[0]?B=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(k=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${x}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${B};
        int batchB = ${k};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${A});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${v}

        setOutput(result);
      }
    `}}const yH={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class xH{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rr(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}const bH="return a * b;";function lP(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ec(r.dtype,s.dtype);if(r.dtype==="complex64"){const l=n.texData.get(r.dataId),c=n.texData.get(s.dataId),u=new xH(yH.REAL,r.shape,s.shape),d=new xH(yH.IMAG,r.shape,s.shape),f=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:r.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:s.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:s.shape}],A=n.runWebGLProgram(u,f,"float32"),m=n.runWebGLProgram(d,f,"float32"),g=Qm({inputs:{real:A,imag:m},backend:n});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m),g}if(n.shouldExecuteOnCPU([r,s])){const l=n.texData.get(r.dataId),c=n.texData.get(s.dataId),[u,d]=TLe(r.shape,s.shape,l.values,c.values,i),f=n.makeTensorInfo(d,i),A=n.texData.get(f.dataId);return A.values=u,f}let a;return Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new db(bH,r.shape,s.shape):a=new p0(bH,r.shape,s.shape),n.runWebGLProgram(a,[r,s],i)}const R$e={kernelName:_x,backendName:"webgl",kernelFunc:lP};function O$e(t,e,n){const r=[z1(t.shape),...U1(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[z1(e),...U1(e)],a=new pae(i,r),l=!0,c=[r],u=n.runWebGLProgram(a,[s],t.dtype,c,l);return{dataId:u.dataId,shape:e,dtype:u.dtype}}function qt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=n,l=it(s.shape),c=wD(i,l),u=it(c);ce(l===u,()=>`The new shape (${c}) has ${u} elements and the old shape (${s.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);const d=a.texData.get(s.dataId);return d.isPacked&&!g4(s.shape,c)&&!(d.texture!==null&&g4(d.shape,c))?O$e(s,c,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:c,dtype:s.dtype})}const F$e={kernelName:p5,backendName:"webgl",kernelFunc:qt};class vH{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];const l=Math.floor(r/4)*4,c=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${t0(f)?f.toPrecision(2):f}, ones);`}let d="";i%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${l};
        if (${c===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}class D$e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];let l="0.0",c="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",c="min"):n==="max"&&(l="-1.0 / 1e-20",c="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const d=Math.floor(r/4)*4,f=r%4;let A=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${c}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${c}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(l="1.0",A=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(l="0.0",A=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${A}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${A}
        } else if (${f===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${A}
        } else if (${f===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${A}
        }
        setOutput(${u});
      }
    `}}function L$e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=H3(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function M0(t,e,n,r){const s=L$e(t.shape);let i=t;for(let a=0;a<s.length;a++){const{inSize:l,windowSize:c,outSize:u}=s[a];let d,f;n==="mean"?d=a===0?new vH({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u},l):new vH({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u}):d=new D$e({windowSize:c,inSize:l,batchSize:t.shape[0],outSize:u},n),f=i,i=r.runWebGLProgram(d,[i],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return i}class $$e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const s=Fs(this.rank),i=P$e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function P$e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}class z$e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let d=0;d<r.length;d++)r[d]=e[n[d]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Fs(this.rank),i=Aae("rc",this.rank),a=new Array(this.rank);for(let d=0;d<n.length;d++)a[n[d]]=i[d];const l=`vec2(${a.slice(-2).join()})`,c=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${c}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${c}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}function oI(t,e,n){const r=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z$e(t.shape,e):new $$e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}function U$e(t,e,n,r){const s=e,i=t.shape.length,a=Ar(s,t.shape);let l=a;const c=Yi(l,i),u=c!=null;let d=t;u&&(d=oI(t,c,r),l=Sa(l.length,i)),qo("sum",l,i);const[f,A]=bo(d.shape,l);let m=f;n&&(m=wa(f,a));const g=it(A),x=it(t.shape)/g,v=qt({inputs:{x:d},attrs:{shape:[x,g]},backend:r}),w=s3(t.dtype),B=M0(v,w,"sum",r),k=qt({inputs:{x:B},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(B),u&&r.disposeIntermediateTensorInfo(d),k}function lI(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;return U$e(s,i,a,n)}const M$e={kernelName:v5,backendName:"webgl",kernelFunc:lI};function Ol(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,a=n,l=s.shape.length,c=new Array(l);for(let d=0;d<c.length;d++)c[d]=s.shape[i[d]];let u;if(a.shouldExecuteOnCPU([s])){const f=a.texData.get(s.dataId).values,A=aP(f,s.shape,s.dtype,i,c);u=a.makeTensorInfo(c,s.dtype);const m=a.texData.get(u.dataId);m.values=A}else u=oI(s,i,a);return u}const Q$e={kernelName:zg,backendName:"webgl",kernelFunc:Ol};const vae=1e3;function y4({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:c=null}){const u=t.shape.length,d=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],A=r?e.shape[d-1]:e.shape[d-2],m=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[d-2]:e.shape[d-1],y=t.shape.slice(0,-2),x=e.shape.slice(0,-2),v=it(y),w=it(x),k=rr(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([m,g]);ce(f===A,()=>`Error in matMul: inner shapes (${f}) and (${A}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const j=n?[v,f,m]:[v,m,f],I=r?[w,g,A]:[w,A,g],O=qt({inputs:{x:t},backend:s,attrs:{shape:j}}),F=qt({inputs:{x:e},backend:s,attrs:{shape:I}}),D=[O,F],T=Math.max(v,w),N=n?O.shape[1]:O.shape[2],P=i!=null,z=a!=null,U=c==="leakyrelu",ee=c!=null?V2(c,!0):null,q=P||z||U||ee!=null;let Z;if((m===1||g===1)&&N>vae&&q===!1){let ne=O,K=F;n&&(ne=Ol({inputs:{x:O},backend:s,attrs:{perm:[0,2,1]}}),D.push(ne)),r&&(K=Ol({inputs:{x:F},backend:s,attrs:{perm:[0,2,1]}}),D.push(K));const H=g!==1,Q=g===1;let X=ne;H&&(X=qt({inputs:{x:ne},backend:s,attrs:{shape:[T,N,1]}}),D.push(X));const re=g===1?2:1;let le=K;Q&&(le=qt({inputs:{x:K},backend:s,attrs:{shape:[T,1,N]}}),D.push(le));const Ae=lP({inputs:{a:X,b:le},backend:s});Z=lI({inputs:{x:Ae},backend:s,attrs:{axis:re,keepDims:!0}}),D.push(Ae)}else{const ne=ec(t.dtype,e.dtype),K=new bae(j,I,[T,m,g],n,r,P,ee,z,U),H=[O,F];if(i!=null&&H.push(i),z&&H.push(a),U){const Q=s.makeTensorInfo([],"float32",qA(l,"float32"));H.push(Q),D.push(Q)}Z=s.runWebGLProgram(K,H,ne)}const G=qt({inputs:{x:Z},backend:s,attrs:{shape:k}});D.push(Z);for(const ne of D)s.disposeIntermediateTensorInfo(ne);return G}function H$e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:l}=e,{transposeA:c,transposeB:u,activation:d,leakyreluAlpha:f}=r;return y4({a:s,b:i,transposeA:c,transposeB:u,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:f,activation:d})}const W$e={kernelName:N2,backendName:"webgl",kernelFunc:H$e};const wH="return abs(x);";function V$e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),a=fae(i.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let s;return Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Xp(r.shape,wH):s=new th(r.shape,wH),n.runWebGLProgram(s,[r],r.dtype)}const q$e={kernelName:Bw,backendName:"webgl",kernelFunc:V$e};const G$e=yd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,K$e=Gr({opSnippet:G$e}),X$e={kernelName:rx,backendName:"webgl",kernelFunc:K$e};const Y$e=yd+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,J$e=Gr({opSnippet:Y$e}),Z$e={kernelName:sx,backendName:"webgl",kernelFunc:J$e};const SH="return a + b;",ePe=Ko({opSnippet:SH,packedOpSnippet:SH,supportsComplex:!0,cpuKernelImpl:uLe}),tPe={kernelName:_0,backendName:"webgl",kernelFunc:ePe};class nPe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}class rPe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}function yB(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Mc({inputs:{x:r[0]},backend:n});if(r.length>Ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(r.length/2),u=yB({inputs:r.slice(0,c),backend:n}),d=yB({inputs:r.slice(c),backend:n});return yB({inputs:[u,d],backend:n})}const s=r.map(c=>c.dtype).reduce((c,u)=>ec(c,u)),i=r.map(c=>c.shape),l=Ye().getBool("WEBGL_PACK")?new rPe(r[0].shape,i):new nPe(r[0].shape,i);return n.runWebGLProgram(l,r,s)}const sPe={kernelName:jw,backendName:"webgl",kernelFunc:yB};function iPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,l=s.shape.length,c=Ar(i,s.shape);let u=c;const d=Yi(u,l);let f=s;d!=null&&(f=Ol({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Sa(u.length,l)),qo("all",u,l);const[A,m]=bo(f.shape,u),g=it(m),y=qt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),x=M0(y,y.dtype,"all",n);let v;if(a){const w=wa(A,c);v=qt({inputs:{x},backend:n,attrs:{shape:w}})}else v=qt({inputs:{x},backend:n,attrs:{shape:A}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),d!=null&&n.disposeIntermediateTensorInfo(f),v}const aPe={kernelName:Jj,backendName:"webgl",kernelFunc:iPe};function oPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,l=s.shape.length,c=Ar(i,s.shape);let u=c;const d=Yi(u,l);let f=s;d!=null&&(f=Ol({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Sa(u.length,l)),qo("any",u,l);const[A,m]=bo(f.shape,u),g=it(m),y=qt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),x=M0(y,y.dtype,"any",n);let v;if(a){const w=wa(A,c);v=qt({inputs:{x},backend:n,attrs:{shape:w}})}else v=qt({inputs:{x},backend:n,attrs:{shape:A}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),d!=null&&n.disposeIntermediateTensorInfo(f),v}const lPe={kernelName:Zj,backendName:"webgl",kernelFunc:oPe};class cPe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const l=n==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${c};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}class uPe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ce(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const l=this.outputShape,c=l.length,u=Fs(c),d=Tl("coords",c);let f,A;if(a===1){A=c+1;const F=Fs(A);f=`
        ${F} sourceLocR = ${F}(${d.join()}, 0);
        ++${d[c-1]};
        ${F} sourceLocG = ${F}(${d.join()}, 0);
        ++${d[c-2]};
        ${F} sourceLocA = ${F}(${d.join()}, 0);
        --${d[c-1]};
        ${F} sourceLocB = ${F}(${d.join()}, 0);
        --${d[c-2]};`}else A=c,f=`
        ${u} sourceLocR = coords;
        ++${d[c-1]};
        ${u} sourceLocG = coords;
        ++${d[c-2]};
        ${u} sourceLocA = coords;
        --${d[c-1]};
        ${u} sourceLocB = coords;
        --${d[c-2]};`;const m=["x","y","z","w","u","v"].slice(0,A),g="."+m[A-1],y=m.map(F=>"int "+F),x=Tl("sourceLocR",A-1).concat("inIdx.r"),v=Tl("sourceLocG",A-1).concat("inIdx.g"),w=Tl("sourceLocB",A-1).concat("inIdx.b"),B=Tl("sourceLocA",A-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",j=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${B.join()})));`,I=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${B.join()}) : 0.)`,O=s?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${O}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${d[c-1]} < ${l[c-1]-1};
        bool hasNextRow = ${d[c-2]} < ${l[c-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${j}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function wae(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const a=H3(i),l={windowSize:a,inSize:i,batchSize:s,outSize:Math.ceil(i/a)},c=new cPe(l,n,r==null),u=[e];r!=null&&u.push(r);const d=t.runWebGLProgram(c,u,"int32");if(d.shape[1]===1)return d;const f=wae(t,e,n,d);return t.disposeIntermediateTensorInfo(d),f}function Sae(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],a=H3(i),l=new uPe(s,a,n,r==null),c=r==null?[e]:[e,r],u=t.runWebGLProgram(l,c,"int32");if(u.shape.length===e.shape.length){const d=Sae(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}return u}function Cae(t,e,n,r){const s=[n];if(qo("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!Ye().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=t.texData.get(e.dataId),l=a!==null&&a.isPacked;let c=e;l&&(c=t.unpackTensor(e),i.push(c));const[u,d]=bo(c.shape,s),f=it(d),A=qt({inputs:{x:c},backend:t,attrs:{shape:[-1,f]}});i.push(A);const m=wae(t,A,r);i.push(m);const g=qt({inputs:{x:m},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return Sae(t,e,r)}function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Ar(i,s.shape);const l=Yi(a,s.shape.length);let c=s;const u=[];l!=null&&(c=Ol({inputs:{x:s},backend:n,attrs:{perm:l}}),u.push(c),a=Sa(a.length,c.shape.length)),qo("argMax",[a[0]],c.shape.length);const d=Cae(n,c,a[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}const fPe={kernelName:Ew,backendName:"webgl",kernelFunc:dPe};function hPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Ar(i,s.shape);const l=Yi(a,s.shape.length);let c=s;const u=[];l!=null&&(c=Ol({inputs:{x:s},backend:n,attrs:{perm:l}}),u.push(c),a=Sa(a.length,c.shape.length)),qo("argMin",[a[0]],c.shape.length);const d=Cae(n,c,a[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}const APe={kernelName:Iw,backendName:"webgl",kernelFunc:hPe};const pPe=yd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,mPe=Gr({opSnippet:pPe}),gPe={kernelName:ix,backendName:"webgl",kernelFunc:mPe};const yPe=yd+"return log(x + sqrt(x * x + 1.0));",xPe=Gr({opSnippet:yPe}),bPe={kernelName:ax,backendName:"webgl",kernelFunc:xPe};const vPe=yd+`
  return atan(x);
`,wPe=Gr({opSnippet:vPe}),SPe={kernelName:ox,backendName:"webgl",kernelFunc:wPe};const CPe=oP+`
  return atan(a, b);
`,kPe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+U0+`
  return result;
`,BPe=Ko({opSnippet:CPe,packedOpSnippet:kPe}),jPe={kernelName:cx,backendName:"webgl",kernelFunc:BPe};const EPe=yd+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,IPe=Gr({opSnippet:EPe}),NPe={kernelName:lx,backendName:"webgl",kernelFunc:IPe};class q2{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterHeight,A=e.effectiveFilterWidth,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",x=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let w="0.0";if(y||(w="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${l}, ${c});
        const ivec2 pads = ivec2(${m}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A};
                wC += ${d}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?x:v:`wR * ${A} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const B="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const j=Math.floor(a/4)*4,I=a%4,O=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${B}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${m}, ${g});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${j}; wC += 4) {
            int xC = xCCorner + wC * ${d};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              getValue(batch, xR, xC + 3 * ${d}, d)
            );

            ${O}
          }

          int xC = xCCorner + ${j};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              initializationValue
            );

            ${O}
          }
        }
        setOutput(${k});
      }
    `}}class cP{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,l=e.strideDepth,c=e.strideHeight,u=e.strideWidth,d=e.dilationDepth,f=e.dilationHeight,A=e.dilationWidth,m=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,x=e.padInfo.front,v=e.padInfo.top,w=e.padInfo.left;this.outputShape=e.outShape;const B=n==="avg";let k="0.0";if(B||(k="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${c}, ${u});
        const ivec3 pads = ivec3(${x}, ${v}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${d}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${A}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const j="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const O=Math.floor(a/4)*4,F=a%4,D=`
      if (${B}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${j}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${c}, ${u});
      const ivec3 pads = ivec3(${x}, ${v}, ${w});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${d}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${O}; wC += 4) {
              int xC = xCCorner + wC * ${A};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${A}, ch),
                getValue(batch, xD, xR, xC + 2 * ${A}, ch),
                getValue(batch, xD, xR, xC + 3 * ${A}, ch)
              );

              ${D}
            }

            int xC = xCCorner + ${O};
            if (${F===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${F===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${A}, ch),
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${F===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${A}, ch),
                getValue(batch, xD, xR, xC + 2 * ${A}, ch),
                initializationValue
              );

              ${D}
            }
          }
        }
        setOutput(${I});
      }
    `}}function TPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;cS(s,"avgPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r,u=1;ce(Vo(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=md(s.shape,i,a,u,l,c);if(d.filterWidth===1&&d.filterHeight===1&&vr(d.inShape,d.outShape))return Mc({inputs:{x:s},backend:n});const f=new q2(d,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const _Pe={kernelName:Nw,backendName:"webgl",kernelFunc:TPe};function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c,dataFormat:u}=r,d=[1,1,1],f=GA(s.shape,i,a,d,l,c,u),A=new cP(f,"avg",!1);return n.runWebGLProgram(A,[s],"float32")}const OPe={kernelName:Tw,backendName:"webgl",kernelFunc:RPe};class FPe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=c-1-e.padInfo.top,f=u-1-e.padInfo.left,A=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${d}, ${f});
      const float avgMultiplier = float(${A});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${c};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class DPe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,A=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=f-1-e.padInfo.front,y=A-1-e.padInfo.top,x=m-1-e.padInfo.left,v=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${x});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${A};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${d}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function LPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=[1,1,1],A=GA(a.shape,l,c,f,u,d),m=new DPe(A);return n.runWebGLProgram(m,[s],a.dtype)}const $Pe={kernelName:tE,backendName:"webgl",kernelFunc:LPe};function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;cS([s,i],"avgPoolGrad");const{filterSize:l,strides:c,pad:u}=r,d=md(a.shape,l,c,1,u),f=new FPe(d);return n.runWebGLProgram(f,[s],a.dtype)}const zPe={kernelName:eE,backendName:"webgl",kernelFunc:PPe};function UPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:l}=r;return y4({a:s,b:i,transposeA:a,transposeB:l,backend:n})}const MPe={kernelName:_w,backendName:"webgl",kernelFunc:UPe};class QPe{constructor(e,n,r,s,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],rr(e,n),rr(e,r);let l="0.0";s!=null&&(rr(e,s),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let c="1.0";i!=null&&(rr(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${c};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}class HPe{constructor(e,n,r,s,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rr(e,n),rr(e,r);let l="vec4(0.0)";s!=null&&(rr(e,s),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let c="vec4(1.0)";i!=null&&(rr(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${c};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}const WPe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:a,scale:l}=t;ce(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(l==null||s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=n;c==null&&(c=.001);const u=[r,s,i];let d=null;a!=null&&(d=a.shape,u.push(a));let f=null;l!=null&&(f=l.shape,u.push(l));const A=Ye().getBool("WEBGL_PACK_NORMALIZATION")?new HPe(r.shape,s.shape,i.shape,d,f,c):new QPe(r.shape,s.shape,i.shape,d,f,c);return e.runWebGLProgram(A,u,u[0].dtype)},VPe={kernelName:Ww,backendName:"webgl",kernelFunc:WPe};class qPe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Fs(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=GPe(this.rank);let s;const i=e.map((a,l)=>`sourceLoc.${aF[l]} = start[${l}] + coords.${aF[l]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const aF=["x","y","z","w","u","v"];function GPe(t){if(t===1)return"sourceLoc";if(t<=6)return aF.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}class KPe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Fs(this.rank),r=Tl("coords",this.rank),s=Tl("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${i})`,l=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,c=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((d,f)=>`start[${f}]`).join()});`:e.map((d,f)=>`${s[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${l}
        ${c}
        setOutput(result);
      }
    `}}function XPe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),a=r.texData.get(i.dataId);Object.assign(a,s),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=e$(e,On(t.shape));s.slice&&(l+=s.slice.flatOffset),a.slice={flatOffset:l,origDataId:s.slice&&s.slice.origDataId||t.dataId};const c=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,c+1),i}function hb(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r,[l,c]=Q3(s,i,a);if(YL(s,l,c),it(c)===0)return n.makeTensorInfo(c,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const f=n.texData.get(s.dataId),A=MLe(f.values,l,c,s.shape,s.dtype);return n.makeTensorInfo(c,s.dtype,A)}const{isPacked:u}=n.texData.get(s.dataId),d=ZL(s.shape,l,c);if(u||!d){const f=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KPe(c):new qPe(c),A=[l];return n.runWebGLProgram(f,[s],s.dtype,A)}return n.uploadToGPU(s.dataId),XPe(s,l,c,n)}const YPe={kernelName:b5,backendName:"webgl",kernelFunc:hb};const JPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;ce(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const l=i.reduce((w,B)=>w*B),c=X5(s.shape,i,l),u=Y5(c.length,i.length),d=J5(s.shape,i,l),f=a$(a,i.length),A=o$(d,a,i.length),m=[],g=qt({inputs:{x:s},backend:n,attrs:{shape:c}}),y=Ol({inputs:{x:g},backend:n,attrs:{perm:u}}),x=qt({inputs:{x:y},backend:n,attrs:{shape:d}}),v=hb({inputs:{x},backend:n,attrs:{begin:f,size:A}});return m.push(g),m.push(y),m.push(x),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),v},ZPe={kernelName:Rw,backendName:"webgl",kernelFunc:JPe};function eze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=dae(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const tze={kernelName:nE,backendName:"webgl",kernelFunc:eze};const nze=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,rze=`
  return float(int(a.r) & int(b.r));
`;function sze(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Ye().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||a===1){const c=n.texData.get(r.dataId).values,u=n.texData.get(s.dataId).values,[d,f]=fLe(r.shape,s.shape,c,u,r.dtype),A=n.makeTensorInfo(f,r.dtype),m=n.texData.get(A.dataId);return m.values=d,A}let l;return i?l=new db(nze,r.shape,s.shape,!1):l=new p0(rze,r.shape,s.shape),n.runWebGLProgram(l,[r,s],r.dtype)}const ize={kernelName:Ow,backendName:"webgl",kernelFunc:sze};function aze(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=rr(Array.from(i),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}const oze={kernelName:rE,backendName:"webgl",kernelFunc:aze};const lze="return float(a != b);",kae=Ko({opSnippet:lze,cpuKernelImpl:RLe,dtype:"bool"}),cze={kernelName:l5,backendName:"webgl",kernelFunc:kae};function dS(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Mc({inputs:{x:s.complexTensorInfos.real},backend:n})}const uze={kernelName:LE,backendName:"webgl",kernelFunc:dS};const dze="return float(int(x));";function fze(t,e){const n=new th(t.shape,dze),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function oF(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Mc({inputs:{x:s},backend:n});const a=La(s.shape),l=oF({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),c=Qm({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),c}if(s.dtype==="complex64"){const a=dS({inputs:{input:s},backend:n}),l=oF({inputs:{x:a},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(a),l}if(!SD(s.dtype,i)){const a=Mc({inputs:{x:s},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const a=n.texData.get(s.dataId).values,[l,c,u]=hLe(a,s.shape,s.dtype,i);return n.makeTensorInfo(l,c,u)}if(i==="int32")return fze(s,n);if(i==="bool"){const a=n.makeTensorInfo([],"bool",go("bool",1)),c=kae({inputs:{a:s,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),c}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const hze={kernelName:ux,backendName:"webgl",kernelFunc:oF};const CH="return ceil(x);",Aze=Gr({opSnippet:CH,packedOpSnippet:CH,cpuKernelImpl:ALe}),pze={kernelName:dx,backendName:"webgl",kernelFunc:Aze};class mze{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}class gze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}function yze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:a}=r;let l;Ye().getBool("WEBGL_PACK_CLIP")?l=new gze(s.shape):l=new mze(s.shape);const c=[[i],[a]];return n.runWebGLProgram(l,[s],s.dtype,c)}const xze={kernelName:fx,backendName:"webgl",kernelFunc:yze};class bze{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}function kH(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function vze(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new bze(r.shape),a=[kH(r,s.complexTensorInfos.real),kH(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}const wze={kernelName:Fw,backendName:"webgl",kernelFunc:vze};class Sze{constructor(e){this.outputShape=[],this.outputShape=oh(e,1),this.variableNames=e.map((a,l)=>`T${l}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const l=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}class Cze{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=oh(e,n);const r=this.outputShape,s=r.length,i=Fs(s),a=Tl("coords",s),l=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((y,x)=>`T${x}`);const c=new Array(e.length-1);c[0]=e[0][n];for(let y=1;y<c.length;y++)c[y]=c[y-1]+e[y][n];const u=l[n],d=l.slice(-2),f=l.join();let A=`if (${u} < ${c[0]}) {
        return getChannel(
            getT0(${f}), vec2(${d.join()}));
        }`;for(let y=1;y<c.length;y++){const x=c[y-1];A+=`
        if (${u} < ${c[y]}  && ${u} >= ${c[y-1]}) {
          return getChannel(
            getT${y}(${KC(l,u,x)}),
            vec2(${KC(d,u,x)}));
        }`}const m=c.length,g=c[c.length-1];A+=`
        return getChannel(
          getT${m}(${KC(l,u,g)}),
          vec2(${KC(d,u,g)}));`,this.userCode=`
      float getValue(${l.map(y=>"int "+y)}) {
        ${A}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function KC(t,e,n){const r=t.indexOf(e);return t.map((i,a)=>a===r?`${i} - ${n}`:i).join()}function cI(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Mc({inputs:{x:s.complexTensorInfos.imag},backend:n})}const kze={kernelName:SE,backendName:"webgl",kernelFunc:cI};function e2(t,e,n){const r=t[0].dtype;if(r==="complex64"){const m=t.map(w=>dS({inputs:{input:w},backend:n})),g=t.map(w=>cI({inputs:{input:w},backend:n})),y=e2(m,e,n),x=e2(g,e,n),v=Qm({inputs:{real:y,imag:x},backend:n});return m.forEach(w=>n.disposeIntermediateTensorInfo(w)),g.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),v}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const m=t.map(k=>{const I=[-1,it(k.shape.slice(e))];return qt({inputs:{x:k},backend:n,attrs:{shape:I}})}),g=m.map(k=>({vals:n.readSync(k.dataId),shape:k.shape})),y=oh(m.map(k=>k.shape),1),x=m[0].shape[0]===1,v=pLe(g,y,r,x),w=oh(t.map(k=>k.shape),e),B=n.makeTensorInfo(w,r,v);return m.forEach(k=>n.disposeIntermediateTensorInfo(k)),B}const i=t.filter(m=>it(m.shape)>0),a=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const m=a?new th(t[0].shape,Mp):new Xp(t[0].shape,Mp);return n.runWebGLProgram(m,t,r)}const l=Ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>l){const m=[];for(let y=0;y<i.length;y+=l){const x=i.slice(y,y+l);m.push(e2(x,e,n))}const g=e2(m,e,n);for(const y of m)n.disposeIntermediateTensorInfo(y);return g}if(a){const m=new Cze(i.map(g=>g.shape),e);return n.runWebGLProgram(m,i,r)}const{tensors2D:c,outShape:u}=Bze(i,e,n),d=new Sze(c.map(m=>m.shape)),f=n.runWebGLProgram(d,c,r);c.forEach(m=>n.disposeIntermediateTensorInfo(m));const A=qt({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),A}function Bze(t,e,n){const r=oh(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>qt({inputs:{x:i},attrs:{shape:[-1,it(i.shape.slice(e))]},backend:n})),outShape:r}}function Bae(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Ar(s,e[0].shape)[0],a=e.map(u=>u.shape);r$(a,i);const l=oh(e.map(u=>u.shape),i);if(it(l)===0)return n.makeTensorInfo(l,e[0].dtype,[]);const c=e.filter(u=>it(u.shape)>0);return c.length===1?Mc({inputs:{x:c[0]},backend:n}):e2(c,i,n)}const jze={kernelName:Dw,backendName:"webgl",kernelFunc:Bae};class jae{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,u=e.strideWidth,d=e.dilationHeight,f=e.dilationWidth,A=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,x=e.dataFormat==="channelsLast",v=x?1:2,w=x?2:3,B=x?3:1;let k="",j="";r&&(s?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,j="result = activation(result);");const I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${c}, ${u});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${B}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${A}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${j}
        setOutput(result);
      }
    `}}class Eze{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterDepth,A=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${c};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${A}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${d};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Eae{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=fl(this.outputShape.length);const a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let A=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<d;x++)A+=`
           vec4 xTexelC${x*2};
           int xTexelC${x*2}Ready;
           vec4 xTexelC${x*2+1};
           int xTexelC${x*2+1}Ready;
           vec4 xC${x};`;A+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let x=0;x<d;x++)A+=`
           xTexelC${x*2} = vec4(0.0);
           xTexelC${x*2}Ready = 0;
           xTexelC${x*2+1} = vec4(0.0);
           xTexelC${x*2+1}Ready = 0;
           xC${x} = vec4(0.0);`;A+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let x=0;x<(f+1)/2;x++){const v=x*2;if(A+=`
           xC = xCCorner + ${v*c};
           `,l===1){if(v<d&&(a%2===1?(A+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,c===1&&v>0?A+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:A+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):A+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<d)){const w=a%2===0?Xj(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(A+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,c>1?A+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:A+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):w===1?A+=`
                     xC${v+1} = xTexelC${v};
                     `:A+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<d&&(a%2===1?(A+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<d&&(A+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(A+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<d&&(A+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<d&&(A+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<d&&(A+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}A+=`
     }
   `,A+=`
     }
   `,A+=`
     }
   `;let m="",g="";r&&(s?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:m=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${A}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}class Ize{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=fl(this.outputShape.length);const{dataFormat:r}=n,s=Dl(),i=r==="channelsLast",a=i?1:2,l=i?2:3,c=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let d=0;d<=1;d++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${d};

          ${c}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}function x4(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Iae({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape,u=r.texData.get(t.dataId),d=n.inChannels,f=c[0]*c[1]*c[2],A=n.outChannels,m=n.dataFormat==="channelsLast",g=!1,y=!1;let x;const v=[];if(i!=null){const k=x4(i.shape,m);k!=null&&(i=qt({inputs:{x:i},backend:r,attrs:{shape:k}}),v.push(i))}if(s!=null){const k=x4(s.shape,m);k!=null&&(s=qt({inputs:{x:s},backend:r,attrs:{shape:k}}),v.push(s))}if(!((f===1||A===1)&&d>vae)&&u.isPacked&&m&&u.texture!=null&&c[2]%2!==0&&vr(u.shape.slice(-3),c.slice(-3))){const k=c[0]*c[1]*(c[2]+1),j={dataId:t.dataId,shape:[1,k,n.inChannels],dtype:t.dtype},I=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,ce(g4(u.shape,j.shape),()=>`packed reshape ${u.shape} to ${j.shape} isn't free`);const O=qt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(O);const F=y4({a:j,b:O,backend:r,transposeA:g,transposeB:y,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:a}),D=r.texData.get(F.dataId);ce(D.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=I,D.shape=n.outShape,x=Mc({inputs:{x:F},backend:r}),x.shape=n.outShape,v.push(F)}else{const k=n.outHeight*n.outWidth,j=qt({inputs:{x:t},backend:r,attrs:{shape:m?[n.batchSize,k,n.inChannels]:[n.batchSize,n.inChannels,k]}}),I=qt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),O=y4({a:m?j:I,b:m?I:j,transposeA:!m,transposeB:y,backend:r,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:a});x=qt({inputs:{x:O},backend:r,attrs:{shape:n.outShape}}),v.push(j),v.push(I),v.push(O)}for(const k of v)r.disposeIntermediateTensorInfo(k);return x}function Nae({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:f,outHeight:A,dataFormat:m}=n,g=m==="channelsLast",y=c*u*d,x=A*f,v=[n.batchSize,y,x],w=!0,B=!1,k=[];if(i!=null){const G=x4(i.shape,g);G!=null&&(i=qt({inputs:{x:i},backend:r,attrs:{shape:G}}),k.push(i))}if(s!=null){const G=x4(s.shape,g);G!=null&&(s=qt({inputs:{x:s},backend:r,attrs:{shape:G}}),k.push(s))}const j=qt({inputs:{x:e},backend:r,attrs:{shape:[1,y,it(e.shape)/y]}});k.push(j);const I=new Ize(v,n),O=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],F=r.runWebGLProgram(I,[t],"float32",O),D=qt({inputs:{x:F},backend:r,attrs:{shape:v}});k.push(F),k.push(D);const T=s!=null,N=i!=null,P=l==="leakyrelu",z=l?V2(l,!0):null,U=new bae(g?D.shape:j.shape,g?j.shape:D.shape,g?[n.batchSize,x,n.outChannels]:[n.batchSize,n.outChannels,x],w,B,T,z,N,P),ee=g?[D,j]:[j,D];if(s&&ee.push(s),N&&ee.push(i),P){const G=r.makeTensorInfo([],"float32",qA(a,"float32"));ee.push(G),k.push(G)}const q=r.runWebGLProgram(U,ee,"float32"),Z=qt({inputs:{x:q},backend:r,attrs:{shape:n.outShape}});k.push(q);for(const G of k)r.disposeIntermediateTensorInfo(G);return Z}function Nze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dataFormat:c,dilations:u,dimRoundingMode:d}=r,f=KA(c),A=xo(s.shape,i.shape,a,u,l,d,!1,f);let m;if(A.filterHeight===1&&A.filterWidth===1&&A.dilationHeight===1&&A.dilationWidth===1&&A.strideHeight===1&&A.strideWidth===1&&(A.padInfo.type==="SAME"||A.padInfo.type==="VALID"))m=Iae({x:s,filter:i,convInfo:A,backend:n});else if(A.strideWidth<=2&&f==="channelsLast"&&Ye().getBool("WEBGL_EXP_CONV")){const y=new Eae(A),x=[[A.padInfo.top,A.padInfo.left],[A.strideHeight,A.strideWidth],[A.dilationHeight,A.dilationWidth],[A.inHeight,A.inWidth]];m=n.runWebGLProgram(y,[s,i],"float32",x)}else if(Ye().getBool("WEBGL_CONV_IM2COL"))m=Nae({x:s,filter:i,convInfo:A,backend:n});else{const y=new jae(A);m=n.runWebGLProgram(y,[s,i],"float32")}const g=qt({inputs:{x:m},backend:n,attrs:{shape:A.outShape}});return n.disposeIntermediateTensorInfo(m),g}const Tze={kernelName:Lw,backendName:"webgl",kernelFunc:Nze};class _ze{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Rze{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",l=n-1-e.padInfo.top,c=r-1-e.padInfo.left,u=a?1:2,d=a?2:3,f=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${d}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Oze{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,l=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${l};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Fze{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=n-1-e.padInfo.front,u=r-1-e.padInfo.top,d=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${u}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function Dze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:l,dataFormat:c,dimRoundingMode:u,filterShape:d}=r,f=KA(c),A=xo(s.shape,d,a,1,l,u,!1,f),m=new _ze(A);return n.runWebGLProgram(m,[s,i],"float32")}const Lze={kernelName:iE,backendName:"webgl",kernelFunc:Dze};class $ze{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=fl(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}function Pze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:l,pad:c,dataFormat:u,dimRoundingMode:d}=r,f=KA(u),A=xo(a,i.shape,l,1,c,d,!1,f);if(Ye().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const m=[[A.strideHeight,A.strideWidth]],g=new $ze(A);return n.runWebGLProgram(g,[s,i],"float32",m)}else{const m=new Rze(A);return n.runWebGLProgram(m,[s,i],"float32")}}const zze={kernelName:$w,backendName:"webgl",kernelFunc:Pze};function Uze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dilations:c}=r,u=Dm(s.shape,i.shape,a,c,l),d=new Eze(u);return n.runWebGLProgram(d,[s,i],"float32")}const Mze={kernelName:Pw,backendName:"webgl",kernelFunc:Uze};function Qze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:l,filterShape:c}=r,u=Dm(s.shape,c,a,1,l),d=new Oze(u);return n.runWebGLProgram(d,[s,i],"float32")}const Hze={kernelName:aE,backendName:"webgl",kernelFunc:Qze};function Wze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:l,inputShape:c}=r,u=Dm(c,i.shape,l,1,a),d=new Fze(u);return n.runWebGLProgram(d,[s,i],"float32")}const Vze={kernelName:oE,backendName:"webgl",kernelFunc:Wze};const qze=fb+`
  return cos(x);
`,Gze=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${U0}
  return result;
`,Kze=Gr({opSnippet:qze,packedOpSnippet:Gze}),Xze={kernelName:hx,backendName:"webgl",kernelFunc:Kze};const Yze=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Jze=Gr({opSnippet:Yze}),Zze={kernelName:Ax,backendName:"webgl",kernelFunc:Jze};class eUe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,l,c,u]=e,[d]=n,[f,A]=r;this.outputShape=[d,f,A,u];const m=s==="bilinear"?1:0,[g,y]=[`${l-1}.0`,`${c-1}.0`],[x,v,w]=f>1?[`${(l-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[B,k,j]=A>1?[`${(c-1)/(A-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${B});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${k};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${j};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}const tUe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:l,method:c,extrapolationValue:u}=r,d=new eUe(s.shape,i.shape,l,c,u);return n.runWebGLProgram(d,[s,i,a],"float32")},nUe={kernelName:cE,backendName:"webgl",kernelFunc:tUe};var G2;(function(t){t.Prod="*",t.Sum="+"})(G2||(G2={}));class BH{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===G2.Prod?"1.0":"0.0",l=r?a:`getX(${jH(i,"coords",this.op)})`,c=this.outputShape[this.outputShape.length-1];let u="",d="";r?(u=s?`end != ${c-1}`:"end != 0",d=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${c}`:"end >= pow2",d=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Fs(i)} coords = getOutputCoords();
        int end = ${EH(i,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${d};
          ${EH(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${jH(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function jH(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function EH(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Tae(t,e,n,r,s,i){const a=e.shape.length,l=Yi([r],a);let c=e;l!=null&&(c=Ol({inputs:{x:e},backend:n,attrs:{perm:l}}));const u=Sa(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const d=c.shape[u];let f=Mc({inputs:{x:c},backend:n});for(let A=0;A<=Math.ceil(Math.log2(d))-1;A++){const m=new BH(t,c.shape,!1,i),g=[[A]],y=f;f=n.runWebGLProgram(m,[f],f.dtype,g),n.disposeIntermediateTensorInfo(y)}if(s){const A=new BH(t,c.shape,s,i),m=f;f=n.runWebGLProgram(A,[f],f.dtype),n.disposeIntermediateTensorInfo(m)}if(l!=null){const A=Lm(l),m=Ol({inputs:{x:f},backend:n,attrs:{perm:A}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(c),m}return f}function rUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:l}=r;return Tae(G2.Prod,s,n,i,a,l)}const sUe={kernelName:lE,backendName:"webgl",kernelFunc:rUe};function iUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:l}=r;return Tae(G2.Sum,s,n,i,a,l)}const aUe={kernelName:zw,backendName:"webgl",kernelFunc:iUe};function oUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:l}=r;if(s.shape.length===1){const c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=dae(c,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,d)}else if(s.shape.length===2){const c=n.bufferSync(s),u=n.bufferSync(i),d=dLe(c,u,a,l);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const lUe={kernelName:uE,backendName:"webgl",kernelFunc:oUe};class cUe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}function uUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r,l=s.shape[0],c=a==="NHWC"?s.shape[1]:s.shape[2],u=a==="NHWC"?s.shape[2]:s.shape[3],d=a==="NHWC"?s.shape[3]:s.shape[1],f=c*i,A=u*i,m=d/(i*i),g=a==="NHWC"?[l,f,A,m]:[l,m,f,A],y=new cUe(g,i,a);return n.runWebGLProgram(y,[s],s.dtype)}const dUe={kernelName:dE,backendName:"webgl",kernelFunc:uUe};class _ae{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=fl(this.outputShape.length);const a=e.filterHeight,l=e.filterWidth,c=e.outChannels/e.inChannels;let u="",d="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,d="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${c};
        int q = d2 - d1 * ${c};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${d}
        setOutput(result);
      }
    `}}class Rae{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=fl(this.outputShape.length);const a=e.outChannels/e.inChannels,l=e.padInfo.left,c=e.strideWidth,u=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,A=f;let m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<f;v++)m+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;m+=`
    for (int r = 0; r < ${d}; r++) {
      `;for(let v=0;v<f;v++)m+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(A+1)/2;v++){const w=v*2;if(m+=`
          xC = xCCorner + ${w*u};
          `,c===1){if(w<f&&(l%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,u===1&&w>0?m+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<f)){const B=l%2===0?Xj(u):u;u%2===0&&l%2===1||u%2!==0&&l%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${B};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,u>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:m+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):B===1?m+=`
                    xC${w+1} = xTexelC${w};
                    `:m+=`
                    xCOffset = xC + ${B};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<f&&(l%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<f&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<f&&(m+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<f&&(m+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<f&&(m+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let g="",y="";r&&(s?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${x}
        ${y}
        setOutput(result);
      }
    `}}function fUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dilations:c,dimRoundingMode:u}=r;let d=c;d==null&&(d=[1,1]),ce(Vo(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const f=xo(s.shape,i.shape,a,d,l,u,!0);let A;Ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?A=new Rae(f):A=new _ae(f);const m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(A,[s,i],"float32",m)}const hUe={kernelName:Uw,backendName:"webgl",kernelFunc:fUe};class AUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class pUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${c}; dm++) {
              int d2 = d1 * ${c} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function mUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,filterShape:d}=r,f=xo(s.shape,d,a,l,c,u,!0),A=new AUe(f);return n.runWebGLProgram(A,[s,i],"float32")}const gUe={kernelName:fE,backendName:"webgl",kernelFunc:mUe};function yUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:l,pad:c,dimRoundingMode:u,inputShape:d}=r,f=xo(d,i.shape,a,l,c,u,!0),A=new pUe(f);return n.runWebGLProgram(A,[s,i],"float32")}const xUe={kernelName:hE,backendName:"webgl",kernelFunc:yUe};class bUe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}function vUe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=it(r.shape),a=qt({inputs:{x:r},backend:n,attrs:{shape:[i]}}),l=new bUe(i),c=n.runWebGLProgram(l,[a],a.dtype),u=qt({inputs:{x:c},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),u}const wUe={kernelName:AE,backendName:"webgl",kernelFunc:vUe};class SUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:a,filterHeight:l,filterWidth:c,dilationHeight:u,dilationWidth:d}=e,{top:f,left:A}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${f}, ${A});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${c}; w++) {
              int wIn = wBeg + w * ${d};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}function CUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:l,dilations:c}=r,u=T5(s.shape,i.shape,a,l,"NHWC",c);let d;const f=new SUe(u);d=n.runWebGLProgram(f,[s,i],"float32");const A=qt({inputs:{x:d},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(d),A}const kUe={kernelName:Mw,backendName:"webgl",kernelFunc:CUe};function BUe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:l,idDims:c}=p$(s,i.length);g$(a.length,c,i);const{path:u,steps:d}=y$(l,c),f=d.length;let A=null,m=a.length;const g=[];for(let y=0;y<f;++y){for(const x of d[y]){const{permutationIndices:v,expandDims:w}=m$(m,c[x]);let B;x$(v)?B=i[x]:(B=Ol({inputs:{x:i[x]},backend:n,attrs:{perm:v}}),g.push(B));const k=B.shape.slice();for(let j=0;j<w.length;++j)k.splice(w[j],0,1);vr(B.shape,k)||(B=qt({inputs:{x:B},backend:n,attrs:{shape:k}}),g.push(B)),A===null?A=B:(A=lP({inputs:{a:B,b:A},backend:n}),g.push(A))}y<f-1&&(u[y]>=0&&(A=lI({inputs:{x:A},backend:n,attrs:{axis:u[y]-(a.length-m),keepDims:!1}}),g.push(A)),m--)}for(const y of g)y!==A&&n.disposeIntermediateTensorInfo(y);return A}const jUe={kernelName:mE,backendName:"webgl",kernelFunc:BUe};const EUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",IUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,NUe=Gr({opSnippet:EUe,packedOpSnippet:IUe}),TUe={kernelName:mx,backendName:"webgl",kernelFunc:NUe};const _Ue="return (b >= 0.0) ? a : a * (b + 1.0);",RUe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,OUe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new db(RUe,r.shape,s.shape):new p0(_Ue,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},FUe={kernelName:gE,backendName:"webgl",kernelFunc:OUe};const DUe=`
  return vec4(equal(a, b));
`,LUe="return float(a == b);",$Ue=Ko({opSnippet:LUe,packedOpSnippet:DUe,dtype:"bool",cpuKernelImpl:mLe}),PUe={kernelName:Qw,backendName:"webgl",kernelFunc:$Ue};const zUe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${l$};
  float a1 = ${c$};
  float a2 = ${u$};
  float a3 = ${d$};
  float a4 = ${f$};
  float a5 = ${h$};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,UUe=Gr({opSnippet:zUe}),MUe={kernelName:gx,backendName:"webgl",kernelFunc:UUe};const QUe=fb+`
  return exp(x);
`,HUe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Oae=Gr({opSnippet:QUe,packedOpSnippet:HUe,cpuKernelImpl:gLe,dtype:"float32"}),WUe={kernelName:yx,backendName:"webgl",kernelFunc:Oae};function lF(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,a=i.shape.length,l=i.shape.slice();let c=s;return s<0&&(ce(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),c=a+s+1),l.splice(c,0,1),qt({inputs:{x:i},backend:r,attrs:{shape:l}})}const VUe={kernelName:Hw,backendName:"webgl",kernelFunc:lF};const IH="return exp(x) - 1.0;",qUe=Gr({opSnippet:IH,packedOpSnippet:IH,cpuKernelImpl:yLe}),GUe={kernelName:xx,backendName:"webgl",kernelFunc:qUe};class NH{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let l;if(e==="real")l="return real * expR - imag * expI;";else if(e==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}function Fae(t,e,n){const r=n.texData.get(t.dataId),s=it(t.shape),i=t.shape[t.shape.length-1],a=s/i,l=qt({inputs:{x:t},backend:n,attrs:{shape:[a,i]}}),c=l.shape,u=new NH("real",c,e),d=new NH("imag",c,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:c},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:c}],A=n.runWebGLProgram(u,f,"float32"),m=n.runWebGLProgram(d,f,"float32"),g=Qm({inputs:{real:A,imag:m},backend:n});n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m);const y=qt({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(g),y}function KUe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Fae(r,!1,n)}const XUe={kernelName:yE,backendName:"webgl",kernelFunc:KUe};class YUe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}function fS(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||N0(s),i==="string"){const a=ca(i,it(r));return a.fill(s),e.makeTensorInfo(r,i,a)}else{const a=new YUe(r,s),l=[[s]];return e.runWebGLProgram(a,[],i,l)}}const JUe={kernelName:xE,backendName:"webgl",kernelFunc:fS};class ZUe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const eMe={kernelName:bE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new ZUe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};const TH="return floor(x);",tMe=Gr({opSnippet:TH,packedOpSnippet:TH,cpuKernelImpl:xLe}),nMe={kernelName:bx,backendName:"webgl",kernelFunc:tMe};const rMe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,sMe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,iMe=Ko({opSnippet:rMe,packedOpSnippet:sMe,dtype:"int32"}),aMe={kernelName:vx,backendName:"webgl",kernelFunc:iMe};class oMe{constructor(e){this.variableNames=["A"];const n=Dl(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}class lMe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Dl(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}const cMe={kernelName:XB,backendName:"webgl",kernelFunc:uMe};let _y,p_=Ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function uMe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[c,u]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=[u,c],f=[u,c,i];if(l||a){const y=Ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(_y==null||y!==p_)&&(p_=y,_y=document.createElement("canvas").getContext("2d",{willReadFrequently:p_})),_y.canvas.width=c,_y.canvas.height=u,_y.drawImage(s,0,0,c,u),s=_y.canvas}const A=n.makeTensorInfo(d,"int32");n.texData.get(A.dataId).usage=pu.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(A.dataId),s);const m=Ye().getBool("WEBGL_PACK")?new lMe(f):new oMe(f),g=n.runWebGLProgram(m,[A],"int32");return n.disposeData(A.dataId),g}function dMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dataFormat:d,dilations:f,dimRoundingMode:A,activation:m,leakyreluAlpha:g}=r,y=KA(d),x=xo(s.shape,i.shape,c,f,u,A,!1,y);let v;const w=[],B=a!=null,k=l!=null,j=m==="leakyrelu",I=()=>{const F=[s,i],D=(T,N)=>{if(N==="NCHW"&&T.shape.length===1&&T.shape[0]!==1){const P=qt({inputs:{x:T},backend:n,attrs:{shape:[T.shape[0],1,1]}});return w.push(P),P}return T};if(B&&F.push(D(a,d)),k&&F.push(D(l,d)),j){const T=n.makeTensorInfo([],"float32",qA(g,"float32"));F.push(T),w.push(T)}return F};if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))v=Iae({x:s,filter:i,convInfo:x,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:g});else if(x.strideWidth<=2&&y==="channelsLast"&&Ye().getBool("WEBGL_EXP_CONV")){const F=m?V2(m,!0):null,D=new Eae(x,B,F,k,j),T=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],N=I();v=n.runWebGLProgram(D,N,"float32",T)}else if(Ye().getBool("WEBGL_CONV_IM2COL"))v=Nae({x:s,filter:i,convInfo:x,backend:n,bias:a,activation:m,preluActivationWeights:l,leakyreluAlpha:g});else{const F=m?V2(m,!1):null,D=new jae(x,B,F,k,j),T=I();v=n.runWebGLProgram(D,T,"float32")}const O=qt({inputs:{x:v},backend:n,attrs:{shape:x.outShape}});return w.push(v),w.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}const fMe={kernelName:T2,backendName:"webgl",kernelFunc:dMe};function hMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:l}=e,{strides:c,pad:u,dilations:d,dimRoundingMode:f,activation:A,leakyreluAlpha:m}=r,g=[];let y=d;y==null&&(y=[1,1]),ce(Vo(c,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${y}'`);const x=xo(s.shape,i.shape,c,y,u,f,!0),v=Ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,w=A?V2(A,v):null,B=[s,i],k=a!=null,j=l!=null,I=A==="leakyrelu";if(k&&B.push(a),j&&B.push(l),I){const T=n.makeTensorInfo([],"float32",qA(m,"float32"));B.push(T),g.push(T)}let O;v?O=new Rae(x,k,w,j,I):O=new _ae(x,k,w,j,I);const F=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],D=n.runWebGLProgram(O,B,"float32",F);return g.forEach(T=>n.disposeIntermediateTensorInfo(T)),D}const AMe={kernelName:_2,backendName:"webgl",kernelFunc:hMe};class pMe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=Fs(r.length);let a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}function mMe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,a=i[i.length-1],l=it(r.shape),[c,u,d,f]=M3(r,s),A=qt({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),m=qt({inputs:{x:r},backend:n,attrs:{shape:[it(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const v=n.readSync(s.dataId),w=n.bufferSync(r),B=bLe(v,w,r.dtype,u,a,d,f,r.shape,l);return n.makeTensorInfo(c,r.dtype,B.values)}const g=new pMe(a,f,[u,d],r.shape),y=n.runWebGLProgram(g,[m,A],m.dtype),x=qt({inputs:{x:y},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),x}const gMe={kernelName:vE,backendName:"webgl",kernelFunc:mMe};class yMe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Fs(this.rank),s=xMe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function xMe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}function Dae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:l}=r,c=Ar(a,s.shape)[0];if(Ye().get("DEBUG")){const w=n.readSync(i.dataId),B=s.shape[c];for(let k=0;k<w.length;++k){const j=w[k];ce(j<=B-1&&j>=0,()=>`GatherV2: the index value ${j} is not in [0, ${B-1}]`)}}const u=v$(s,i,c,l),d=it(i.shape),f=[],A=qt({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),m=qt({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,d/u.batchSize]}});f.push(A),f.push(m);const g=[u.batchSize,u.outerSize,d/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const w=n.bufferSync(m),B=n.bufferSync(A),k=vLe(B,w,g);return f.forEach(j=>n.disposeIntermediateTensorInfo(j)),n.makeTensorInfo(u.outputShape,k.dtype,k.values)}const y=new yMe(A.shape,g),x=n.runWebGLProgram(y,[A,m],A.dtype);f.push(x);const v=qt({inputs:{x},backend:n,attrs:{shape:u.outputShape}});return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}const bMe={kernelName:Vw,backendName:"webgl",kernelFunc:Dae};const vMe="return float(a > b);",wMe=`
  return vec4(greaterThan(a, b));
`,SMe=Ko({opSnippet:vMe,packedOpSnippet:wMe,cpuKernelImpl:wLe,dtype:"bool"}),CMe={kernelName:qw,backendName:"webgl",kernelFunc:SMe};const kMe="return float(a >= b);",BMe=`
  return vec4(greaterThanEqual(a, b));
`,jMe=Ko({opSnippet:kMe,packedOpSnippet:BMe,dtype:"bool",cpuKernelImpl:SLe}),EMe={kernelName:wx,backendName:"webgl",kernelFunc:jMe};function IMe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Fae(r,!0,n)}const NMe={kernelName:wE,backendName:"webgl",kernelFunc:IMe};const TMe="return float(!isnan(x) && !isinf(x));",_Me=Gr({opSnippet:TMe,dtype:"bool"}),RMe={kernelName:Cx,backendName:"webgl",kernelFunc:_Me};const OMe="return float(isinf(x));",FMe=Gr({opSnippet:OMe,dtype:"bool"}),DMe={kernelName:kx,backendName:"webgl",kernelFunc:FMe};const LMe="return float(isnan(x));",$Me=Gr({opSnippet:LMe,dtype:"bool"}),PMe={kernelName:Bx,backendName:"webgl",kernelFunc:$Me};const zMe="return float(a < b);",UMe=`
  return vec4(lessThan(a, b));
`,MMe=Ko({opSnippet:zMe,packedOpSnippet:UMe,cpuKernelImpl:CLe,dtype:"bool"}),QMe={kernelName:Kw,backendName:"webgl",kernelFunc:MMe};const HMe="return float(a <= b);",WMe=`
  return vec4(lessThanEqual(a, b));
`,VMe=Ko({opSnippet:HMe,packedOpSnippet:WMe,cpuKernelImpl:kLe,dtype:"bool"}),qMe={kernelName:Xw,backendName:"webgl",kernelFunc:VMe};function GMe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=BLe(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const KMe={kernelName:CE,backendName:"webgl",kernelFunc:GMe};const XMe=fb+`
  return x < 0.0 ? 0./0. : log(x);
`,YMe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,JMe=Gr({opSnippet:XMe,packedOpSnippet:YMe,cpuKernelImpl:jLe}),ZMe={kernelName:jx,backendName:"webgl",kernelFunc:JMe};const e9e=fb+`
  return log(1.0 + x);
`,t9e=Gr({opSnippet:e9e}),n9e={kernelName:Ex,backendName:"webgl",kernelFunc:t9e};const r9e="return float(a >= 1.0 && b >= 1.0);",s9e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,i9e=Ko({opSnippet:r9e,packedOpSnippet:s9e,dtype:"bool"}),a9e={kernelName:Yw,backendName:"webgl",kernelFunc:i9e};const o9e="return float(!(x >= 1.0));",l9e=Gr({opSnippet:o9e}),c9e={kernelName:Jw,backendName:"webgl",kernelFunc:l9e};const u9e="return float(a >= 1.0 || b >= 1.0);",d9e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,f9e=Ko({opSnippet:u9e,packedOpSnippet:d9e,dtype:"bool"}),h9e={kernelName:Zw,backendName:"webgl",kernelFunc:f9e};class A9e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const a=n,l=e[3]-1;this.outputShape=e;let c;const u=`float(${r}) + float(${s}) * sum`;i===.5?c=`inversesqrt(${u})`:i===1?c=`1.0/(${u})`:c=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${c};
        setOutput(val);
      }
    `}}class p9e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,l=e[3]-1;this.outputShape=e;let c;const u=`float(${r}) + float(${s}) * sum`;i===.5?c=`inversesqrt(${u})`:i===1?c=`1.0/(${u})`:c=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${c};
        setOutput(result);
      }
    `}}const m9e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:l,beta:c}=r,u=Ye().getBool("WEBGL_PACK_NORMALIZATION")?new p9e(s.shape,i,a,l,c):new A9e(s.shape,i,a,l,c);return n.runWebGLProgram(u,[s],s.dtype)},g9e={kernelName:e5,backendName:"webgl",kernelFunc:m9e};class y9e{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}const x9e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:l,bias:c,alpha:u,beta:d}=r,f=new y9e(s.shape,l,c,u,d);return n.runWebGLProgram(f,[s,i,a],s.dtype)},b9e={kernelName:kE,backendName:"webgl",kernelFunc:x9e};function v9e(t,e,n,r){const s=it(e),a=it(t.shape)/s,l=qt({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),c=M0(l,t.dtype,"max",r),u=qt({inputs:{x:c},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(c),u}function Lae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,l=s.shape.length,c=Ar(i,s.shape);let u=c;const d=Yi(u,l),f=d!=null,A=n.shouldExecuteOnCPU([s]);let m=s;if(f){if(A){const B=n.texData.get(m.dataId).values,k=new Array(l);for(let O=0;O<k.length;O++)k[O]=s.shape[d[O]];const j=aP(B,s.shape,s.dtype,d,k);m=n.makeTensorInfo(k,s.dtype);const I=n.texData.get(m.dataId);I.values=j}else m=oI(s,d,n);u=Sa(u.length,l)}qo("max",u,l);const[g,y]=bo(m.shape,u);let x=g;a&&(x=wa(g,c));let v;if(A){const B=n.texData.get(m.dataId).values,k=ELe(B,it(y),x,s.dtype);v=n.makeTensorInfo(x,s.dtype);const j=n.texData.get(v.dataId);j.values=k}else v=v9e(m,y,x,n);return f&&n.disposeIntermediateTensorInfo(m),v}const w9e={kernelName:t5,backendName:"webgl",kernelFunc:Lae};const S9e=oP+`
  return max(a, b);
`,C9e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+U0+`
  return result;
`,k9e=Ko({opSnippet:S9e,packedOpSnippet:C9e,cpuKernelImpl:ILe}),B9e={kernelName:Ix,backendName:"webgl",kernelFunc:k9e};function j9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;cS(s,"maxPool");const{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r,u=1;ce(Vo(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=md(s.shape,i,a,u,l,c);if(d.filterWidth===1&&d.filterHeight===1&&vr(d.inShape,d.outShape))return Mc({inputs:{x:s},backend:n});const f=new q2(d,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const E9e={kernelName:n5,backendName:"webgl",kernelFunc:j9e};function I9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=[1,1,1],f=GA(s.shape,i,a,d,l,u,c),A=new cP(f,"max",!1);return n.runWebGLProgram(A,[s],s.dtype)}const N9e={kernelName:r5,backendName:"webgl",kernelFunc:I9e};class T9e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,l=i-1-e.padInfo.top,c=a-1-e.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class _9e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=c-1-e.padInfo.front,A=u-1-e.padInfo.top,m=d-1-e.padInfo.left,g=c*u*d-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${A}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${d} +
                  wR * ${d} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function R9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=[1,1,1],A=GA(a.shape,l,c,f,u,d),m=new cP(A,"max",!0),g=n.runWebGLProgram(m,[a],a.dtype),y=new _9e(A),x=n.runWebGLProgram(y,[s,g],a.dtype);return n.disposeIntermediateTensorInfo(g),x}const O9e={kernelName:jE,backendName:"webgl",kernelFunc:R9e};function F9e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,l=i;cS([i,a],"maxPoolGrad");const{filterSize:c,strides:u,pad:d,dimRoundingMode:f}=r,A=md(l.shape,c,u,1,d,f),m=!0,g=new q2(A,"max",m),y=n.runWebGLProgram(g,[l],l.dtype),x=new T9e(A),v=n.runWebGLProgram(x,[s,y],l.dtype);return n.disposeIntermediateTensorInfo(y),v}const D9e={kernelName:BE,backendName:"webgl",kernelFunc:F9e};function L9e(t,e,n,r){let s=new q2(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new q2(n,"max",!0,!0,e);const a=r.runWebGLProgram(s,[t],"float32");return[i,a]}const $9e={kernelName:EE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:l}=e,c=n;ce(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];ce(Vo(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const d=md(r.shape,s,i,u,a),[f,A]=L9e(r,l,d,c);return[f,A]}};function P9e(t,e,n,r){const s=it(e),a=it(t.shape)/s,l=qt({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),c=M0(l,"float32","mean",r),u=qt({inputs:{x:c},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(c),u}const z9e={kernelName:s5,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,a=n,l=r.shape.length,c=Ar(i,r.shape);let u=c;const d=Yi(u,l),f=d!=null,A=a.shouldExecuteOnCPU([r]),m=[];let g=r;if(f){if(A){const k=a.texData.get(g.dataId).values,j=new Array(l);for(let F=0;F<j.length;F++)j[F]=r.shape[d[F]];const I=aP(k,r.shape,r.dtype,d,j);g=a.makeTensorInfo(j,r.dtype);const O=a.texData.get(g.dataId);O.values=I}else g=oI(r,d,a);m.push(g),u=Sa(u.length,l)}qo("sum",u,l);const[y,x]=bo(g.shape,u);let v=y;s&&(v=wa(y,c));const w=P9e(g,x,v,a);for(const B of m)a.disposeIntermediateTensorInfo(B);return w}};function U9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,l=s.shape.length,c=Ar(i,s.shape);let u=c;const d=Yi(u,l);let f=s;d!=null&&(f=Ol({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Sa(u.length,s.shape.length)),qo("min",u,l);const[A,m]=bo(f.shape,u),g=it(m),y=qt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),x=M0(y,y.dtype,"min",n);let v;if(a){const w=wa(A,c);v=qt({inputs:{x},backend:n,attrs:{shape:w}})}else v=qt({inputs:{x},backend:n,attrs:{shape:A}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),d!=null&&n.disposeIntermediateTensorInfo(f),v}const M9e={kernelName:i5,backendName:"webgl",kernelFunc:U9e};const Q9e=oP+`
  return min(a, b);
`,H9e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+U0+`
  return result;
`,W9e=Ko({opSnippet:Q9e,packedOpSnippet:H9e,cpuKernelImpl:NLe}),V9e={kernelName:Nx,backendName:"webgl",kernelFunc:W9e};class q9e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((d,f)=>d[0]+e[f]+d[1]);const s=e.length,i=Fs(s),a=n.map(d=>d[0]).join(","),l=n.map((d,f)=>d[0]+e[f]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${l});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${c}));
      }
    `}}class G9e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const s=e.length,i=Fs(s),a=n.map(g=>g[0]).join(","),l=n.map((g,y)=>g[0]+e[y]).join(","),c=Tl("rc",s),u=Tl("source",s),d=`${c[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,A=r==="reflect"?0:1;let m="";if(s===1){const g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${A};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${A};
        }
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${c[s-1]} += 1;
        if(${d}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${A}) +
                gte * ((end - 1) * 2 - source + ${A});
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${c[s-1]} += 1;
        if(${d}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${c[s-2]} += 1;
        if(${c[s-2]} < ${this.outputShape[s-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${c[s-1]} += 1;
          if(${d}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${l});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}const K9e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,a=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new G9e(r.shape,s,i):new q9e(r.shape,s,i);return e.runWebGLProgram(a,[r],r.dtype)},X9e={kernelName:a5,backendName:"webgl",kernelFunc:K9e};const Y9e=`if (b == 0.0) return NAN;
  return mod(a, b);`,J9e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+U0+`
  return result;
`,Z9e=Ko({opSnippet:Y9e,packedOpSnippet:J9e}),e7e={kernelName:Tx,backendName:"webgl",kernelFunc:Z9e};class t7e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}const n7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,r7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,$ae=Ko({opSnippet:n7e,packedOpSnippet:r7e,checkOutOfBounds:!0}),s7e={kernelName:px,backendName:"webgl",kernelFunc:$ae};const _H="return a - b;",Pae=Ko({opSnippet:_H,packedOpSnippet:_H,supportsComplex:!0,cpuKernelImpl:YLe}),i7e={kernelName:qx,backendName:"webgl",kernelFunc:Pae};function zae(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=Ar([i],s.shape),l=Lae({inputs:{x:s},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),c=wa(l.shape,a),u=qt({inputs:{x:l},backend:n,attrs:{shape:c}}),d=Pae({inputs:{a:s,b:u},backend:n}),f=Oae({inputs:{x:d},backend:n}),A=lI({inputs:{x:f},backend:n,attrs:{axis:a,keepDims:!1}}),m=qt({inputs:{x:A},backend:n,attrs:{shape:c}}),g=$ae({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(m),g}const a7e={kernelName:C5,backendName:"webgl",kernelFunc:zae};function o7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:l}=r,c=l?s:zae({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=c.shape[0],d=c.shape[1],f=new t7e(u,d,i),A=[[a]],m=n.runWebGLProgram(f,[c],"int32",A);return l||n.disposeIntermediateTensorInfo(c),m}const l7e={kernelName:IE,backendName:"webgl",kernelFunc:o7e};const c7e=yd+`
  return -x;
`,u7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function d7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[a,l]=_Le(i.values,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,a)}let s;return Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Xp(r.shape,u7e):s=new th(r.shape,c7e),n.runWebGLProgram(s,[r],r.dtype)}const f7e={kernelName:o5,backendName:"webgl",kernelFunc:d7e};const h7e=$3;function A7e(t){cu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:f}=h7e(u,d,a,l,c);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const p7e={kernelName:NE,backendName:"webgl",kernelFunc:A7e};const m7e=P3;function g7e(t){cu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,padToMaxOutputSize:u}=r,d=n.readSync(s.dataId),f=n.readSync(i.dataId),{selectedIndices:A,validOutputs:m}=m7e(d,f,a,l,c,u);return[n.makeTensorInfo([A.length],"int32",new Int32Array(A)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const y7e={kernelName:TE,backendName:"webgl",kernelFunc:g7e};const x7e=z3;function b7e(t){cu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=r,d=n.readSync(s.dataId),f=n.readSync(i.dataId),A=a,m=l,g=c,y=u,{selectedIndices:x,selectedScores:v}=x7e(d,f,A,m,g,y);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const v7e={kernelName:_E,backendName:"webgl",kernelFunc:b7e};class w7e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}const S7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:l,offValue:c}=r,u=it(s.shape),d=new w7e(u,a,l,c),f=qt({inputs:{x:s},backend:n,attrs:{shape:[u]}}),A=n.runWebGLProgram(d,[f],i);n.disposeIntermediateTensorInfo(f);const m=[...s.shape,a],g=qt({inputs:{x:A},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(A),g},C7e={kernelName:u5,backendName:"webgl",kernelFunc:S7e};function b4(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=dS({inputs:{input:r},backend:n}),i=b4({inputs:{x:s},backend:n}),a=cI({inputs:{input:r},backend:n}),l=b4({inputs:{x:a},backend:n}),c=Qm({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return fS({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const k7e={kernelName:E5,backendName:"webgl",kernelFunc:b4};function Uae(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=dS({inputs:{input:r},backend:n}),i=Uae({inputs:{x:s},backend:n}),a=cI({inputs:{input:r},backend:n}),l=b4({inputs:{x:a},backend:n}),c=Qm({inputs:{real:i,imag:l},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}else return fS({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const B7e={kernelName:c5,backendName:"webgl",kernelFunc:Uae};function j7e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return lF({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(d=>{Wo(i,d.shape,"All tensors passed to stack must have matching shapes"),ce(a===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=[],c=e.map(d=>{const f=lF({inputs:{input:d},backend:n,attrs:{dim:s}});return l.push(f),f}),u=Bae({inputs:c,backend:n,attrs:{axis:s}});return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const E7e={kernelName:d5,backendName:"webgl",kernelFunc:j7e};class I7e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=Fs(s),a=n.map(u=>u[0]).join(","),l=n.map((u,d)=>u[0]+e[d]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${l});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${c}));
        }
      }
    `}}class N7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,x)=>y[0]+e[x]+y[1]);const s=e.length,i=Fs(s),a=n.map(y=>y[0]).join(","),l=n.map((y,x)=>y[0]+e[x]).join(","),c=Tl("rc",s),u=Tl("source",s),d=`${c[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,A=[`${i} rc = outputLoc;`,`${c[s-1]} += 1;
       if(${d}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${c[s-2]} += 1;
       if(${c[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${c[s-1]} += 1;
         if(${d}) {`],m=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,x=s===1?2:4;y<x;y++)g+=`
        ${A[y]}
        if (${m}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${f});
        }
      `;g+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${l});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}const Mae=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;if(it(s.shape)===0){const u=i.map((d,f)=>d[0]+s.shape[f]+d[1]);return fS({backend:n,attrs:{shape:u,value:a,dtype:s.dtype}})}const l=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new N7e(s.shape,i,a):new I7e(s.shape,i,a),c=[[a]];return n.runWebGLProgram(l,[s],s.dtype,c)},T7e={kernelName:f5,backendName:"webgl",kernelFunc:Mae};const _7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,R7e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+U0+`
  return result;
`,O7e=Ko({opSnippet:_7e,packedOpSnippet:R7e}),F7e={kernelName:Rx,backendName:"webgl",kernelFunc:O7e};function D7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,l=s.shape.length,c=[],u=Ar(i,s.shape);let d=u;const f=Yi(d,l);let A=s;f!=null&&(A=Ol({inputs:{x:s},backend:n,attrs:{perm:f}}),d=Sa(d.length,l),c.push(A)),qo("prod",d,l);let m;if(n.shouldExecuteOnCPU([A])){const g=n.texData.get(A.dataId).values,{outVals:y,outShape:x,outDtype:v}=OLe(A.shape,A.dtype,g,d);m=n.makeTensorInfo(x,v,y)}else{const[g,y]=bo(A.shape,d),x=it(y),v=qt({inputs:{x:A},backend:n,attrs:{shape:[-1,x]}}),w=s3(s.dtype),B=M0(v,w,"prod",n);m=qt({inputs:{x:B},backend:n,attrs:{shape:g}}),c.push(v),c.push(B)}if(a){c.push(m);const g=wa(m.shape,u);m=qt({inputs:{x:m},backend:n,attrs:{shape:g}})}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const L7e={kernelName:A5,backendName:"webgl",kernelFunc:D7e};function $7e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:l}=r,c=s.map(v=>n.readSync(v.dataId)),u=s.map(v=>v.shape),d=n.readSync(i.dataId),f=n.readSync(a.dataId),[A,m,g]=FLe(c,u,d,i.shape,i.dtype,f,a.shape,l),y=A.map(v=>n.makeTensorInfo([v.length],"int32",v)),x=n.makeTensorInfo(g,i.dtype,m);return y.concat([x])}const P7e={kernelName:RE,backendName:"webgl",kernelFunc:$7e};function z7e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),[u,d]=DLe(a,r.shape,r.dtype,l,s.shape,c,i.shape),f=n.makeTensorInfo([u.length],"int32",u),A=n.makeTensorInfo([d.length],r.dtype,d);return[f,A]}const U7e={kernelName:OE,backendName:"webgl",kernelFunc:z7e};function M7e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:l}=e,{rowPartitionTypes:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),f=n.readSync(a.dataId),A=l.map(x=>n.readSync(x.dataId)),m=l.map(x=>x.shape),[g,y]=LLe(u,s.shape,d,i.shape,i.dtype,f,a.shape,A,m,c);return n.makeTensorInfo(g,i.dtype,y)}const Q7e={kernelName:FE,backendName:"webgl",kernelFunc:M7e};const Qae=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:a}=n,l=$Le(r,s,i,a);return e.makeTensorInfo([l.length],a,l)},H7e={kernelName:DE,backendName:"webgl",kernelFunc:Qae};const W7e="return 1.0 / x;",V7e=Gr({opSnippet:W7e}),q7e={kernelName:Ox,backendName:"webgl",kernelFunc:V7e};const G7e=yd+`
  return (x < 0.0) ? 0.0 : x;
`,K7e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X7e=Gr({opSnippet:G7e,packedOpSnippet:K7e}),Y7e={kernelName:Fx,backendName:"webgl",kernelFunc:X7e};const J7e=yd+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Z7e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,eQe=Gr({opSnippet:J7e,packedOpSnippet:Z7e}),tQe={kernelName:Dx,backendName:"webgl",kernelFunc:eQe};class nQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,r,u];const d=[s&&n>1?l-1:l,s&&r>1?c-1:c],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let A;i?A="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":A="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${A};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}class rQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,r,u];const d=[s&&n>1?l-1:l,s&&r>1?c-1:c],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let A;i?A="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":A="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${A};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}function sQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:l}=r,[c,u]=l,d=Ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rQe(s.shape,c,u,i,a):new nQe(s.shape,c,u,i,a);return n.runWebGLProgram(d,[s],"float32")}const iQe={kernelName:g5,backendName:"webgl",kernelFunc:sQe};class aQe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,l]=e,c=[r&&a>1?s-1:s,r&&l>1?i-1:i],u=[r&&a>1?a-1:a,r&&l>1?l-1:l],d=c[0]/u[0],f=c[1]/u[1],A=1/d,m=1/f,g=Math.ceil(A)*2+2,y=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${A});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function oQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,l=new aQe(i.shape,s.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const lQe={kernelName:PE,backendName:"webgl",kernelFunc:oQe};class cQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,r,u];const d=[s&&n>1?l-1:l,s&&r>1?c-1:c],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],A=s?"0.5":"0.0";let m;i?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${A})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}class uQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,l,c,u]=e;this.outputShape=[a,n,r,u];const d=[s&&n>1?l-1:l,s&&r>1?c-1:c],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],A=s?"0.5":"0.0";let m;i?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${A})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}function dQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:l}=r,[c,u]=l,d=Ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uQe(s.shape,c,u,i,a):new cQe(s.shape,c,u,i,a);return n.runWebGLProgram(d,[s],s.dtype)}const fQe={kernelName:m5,backendName:"webgl",kernelFunc:dQe};class hQe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,l]=e,c=[r&&a>1?s-1:s,r&&l>1?i-1:i],u=[r&&a>1?a-1:a,r&&l>1?l-1:l],d=c[0]/u[0],f=c[1]/u[1],A=1/d,m=1/f,g=Math.ceil(A)*2+2,y=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${A});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${c[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${c[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function AQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,l=new hQe(i.shape,s.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const pQe={kernelName:$E,backendName:"webgl",kernelFunc:AQe};class mQe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=l=>n.indexOf(l)!==-1&&e[l]!==1?`${e[l]} - coords[${l}] - 1`:`coords[${l}]`,i=e.map((l,c)=>s(c)).join(","),a=Fs(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}class gQe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Tl("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,l=Fs(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(s.slice())};
          if(${i}){
            result.g = ${u(s.slice())};
          }
          if(${a}) {
            result.b = ${d(s.slice())};
            if(${i}) {
              result.a = ${f(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function c(g){return A(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",A(g)}function d(g){return g[r-2]="("+g[r-2]+" + 1)",A(g)}function f(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",A(g)}function A(g){const y=e.map((w,B)=>m(B,g)),x=y.join(","),v=y.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${v}))`}function m(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}function yQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,a=s.shape.length,l=Ar(i,s.shape);if(a===0)return Mc({inputs:{x:s},backend:n});const c=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gQe(s.shape,l):new mQe(s.shape,l);return n.runWebGLProgram(c,[s],s.dtype)}const xQe={kernelName:y5,backendName:"webgl",kernelFunc:yQe};class bQe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const vQe={kernelName:n3,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,l=n,c=new bQe(r.shape,i),[u,d]=i$(a,r.shape[1],r.shape[2]),f=[[u,d,Math.sin(s),Math.cos(s)]];return l.runWebGLProgram(c,[r],r.dtype,f)}};const wQe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,SQe=Gr({opSnippet:wQe}),CQe={kernelName:Lx,backendName:"webgl",kernelFunc:SQe};const kQe="return inversesqrt(x);",BQe=Gr({opSnippet:kQe,cpuKernelImpl:PLe}),jQe={kernelName:$x,backendName:"webgl",kernelFunc:BQe};class uP{constructor(e,n,r,s,i,a,l=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const u=Fs(i.length),d=Fs(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const A=`getIndices(${f})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let y="";c&&(y="coords[0], coords[1]");const x=`getDefaultValue(${y})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${A});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${x}, sum, float(found)));
        }
      `}}class EQe{constructor(e,n,r,s,i,a,l=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const u=Fs(i.length),d=Fs(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const A=`getIndices(${f})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let y="";c&&(y="coords[0], coords[1]");const x=`getDefaultValue(${y})`,v=n>1?"strides[j]":"strides",w=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${A});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${x}, sum, found));
        }
      `}}function IQe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=zm(i,s,a),A=[f/u,u];if(f===0)return n.makeTensorInfo(a,s.dtype);const m=qt({inputs:{x:s},backend:n,attrs:{shape:[c,l]}}),g=qt({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0]));let x;Ye().getBool("WEBGL_PACK")?x=new EQe(c,l,m.shape.length,g.shape.length,d,A):x=new uP(c,l,m.shape.length,g.shape.length,d,A);const v=n.runWebGLProgram(x,[g,m,y],g.dtype),w=qt({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),w}const NQe={kernelName:zE,backendName:"webgl",kernelFunc:IQe};class TQe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Ye().getNumber("WEBGL_VERSION")===2?i:a,c=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${c} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}function _Qe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,l=new TQe(s.shape[0],s.shape[1],i.shape[1],a),c=[[s.shape[1]]];return n.runWebGLProgram(l,[s,i],"int32",c)}const RQe={kernelName:ME,backendName:"webgl",kernelFunc:_Qe};class OQe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],u=[];for(let d=0;d<n.length;d++)u.push(`${l[d]}`),d<e&&c.push(`${l[d]}`);s=c.join(),i=u.join()}const a=Fs(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}function FQe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,a=new OQe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(a,[r,s,i],ec(s.dtype,i.dtype))}const DQe={kernelName:x5,backendName:"webgl",kernelFunc:FQe};const LQe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${W3};
  float scale = ${V3};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,$Qe=Gr({opSnippet:LQe}),PQe={kernelName:Px,backendName:"webgl",kernelFunc:$Qe};const zQe=fb+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,UQe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MQe=Gr({opSnippet:zQe,packedOpSnippet:UQe,cpuKernelImpl:ULe}),QQe={kernelName:Qx,backendName:"webgl",kernelFunc:MQe};const HQe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,WQe=Gr({opSnippet:HQe}),VQe={kernelName:Mx,backendName:"webgl",kernelFunc:WQe};const qQe=fb+`
  return sin(x);
`,GQe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${U0}
  return result;
`,KQe=Gr({opSnippet:qQe,packedOpSnippet:GQe}),XQe={kernelName:zx,backendName:"webgl",kernelFunc:KQe};const YQe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,JQe=Gr({opSnippet:YQe}),ZQe={kernelName:Ux,backendName:"webgl",kernelFunc:JQe};const eHe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,tHe=Gr({opSnippet:eHe}),nHe={kernelName:Hx,backendName:"webgl",kernelFunc:tHe};const rHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;ce(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const l=i.reduce((v,w)=>v*w),c=[[0,0]];c.push(...a);for(let v=1+i.length;v<s.shape.length;++v)c.push([0,0]);const u=[],d=Mae({inputs:{x:s},backend:n,attrs:{paddings:c,constantValue:0}}),f=X5(d.shape,i,l,!1),A=Y5(f.length,i.length,!1),m=J5(d.shape,i,l,!1),g=qt({inputs:{x:d},backend:n,attrs:{shape:f}}),y=Ol({inputs:{x:g},backend:n,attrs:{perm:A}}),x=qt({inputs:{x:y},backend:n,attrs:{shape:m}});return u.push(d),u.push(g),u.push(y),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),x},sHe={kernelName:w5,backendName:"webgl",kernelFunc:rHe};function iHe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const l=n.readSync(r.dataId),c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(a.dataId)[0],[f,A,m,g,y]=QLe(l,r.shape,r.dtype,c,s.dtype,u,d);return[n.makeTensorInfo(A,r.dtype,f),n.makeTensorInfo([A[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(x=>Number(x)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const aHe={kernelName:QE,backendName:"webgl",kernelFunc:iHe};function oHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.readSync(s.dataId)),l=n.readSync(r.dataId),c=Array.from(n.readSync(i.dataId)),[u,d,f]=HLe(l,r.shape,r.dtype,a,c);return[n.makeTensorInfo(d,r.dtype,u),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const lHe={kernelName:HE,backendName:"webgl",kernelFunc:oHe};function cHe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),[u,d]=hae(a,r.shape,r.dtype,l,c,!0);return n.makeTensorInfo(d,r.dtype,u)}const uHe={kernelName:WE,backendName:"webgl",kernelFunc:cHe};function dHe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),[u,d]=hae(a,r.shape,r.dtype,l,c);return n.makeTensorInfo(d,r.dtype,u)}const fHe={kernelName:VE,backendName:"webgl",kernelFunc:dHe};function hHe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:l}=r,{sliceRank:c,numUpdates:u,sliceSize:d,strides:f,outputSize:A}=zm(i,s,l),m=!1;if(i.dtype==="string"){const v=n.bufferSync(s),w=n.bufferSync(i),B=TA(n.readSync(a.dataId)[0]),k=zLe(v,w,l,A,d,u,c,f,B,m);return n.makeTensorInfo(l,k.dtype,k.values)}const g=new uP(u,c,s.shape.length,i.shape.length,f,[A,1],m),y=n.runWebGLProgram(g,[i,s,a],i.dtype),x=qt({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(y),x}const AHe={kernelName:qE,backendName:"webgl",kernelFunc:hHe};function pHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,l=Ar(a,s.shape)[0],c=b$(s,i,l),u=s.shape.length,d=new Array(u).fill(0),f=s.shape.slice();return c.map(A=>{const m=[...f];m[l]=A;const g=hb({inputs:{x:s},backend:n,attrs:{begin:d,size:m}});return d[l]+=A,g})}const mHe={kernelName:S5,backendName:"webgl",kernelFunc:pHe};const RH="return sqrt(x);",gHe=Gr({opSnippet:RH,packedOpSnippet:RH,cpuKernelImpl:WLe}),yHe={kernelName:Wx,backendName:"webgl",kernelFunc:gHe};const xHe="return x * x;",bHe=Gr({opSnippet:xHe}),vHe={kernelName:GE,backendName:"webgl",kernelFunc:bHe};const OH="return (a - b) * (a - b);",wHe=Ko({opSnippet:OH,packedOpSnippet:OH}),SHe={kernelName:Vx,backendName:"webgl",kernelFunc:wHe};function CHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),a=FA(i),l=VLe(a,"string",r);return n.makeTensorInfo(s.shape,"string",l)}const kHe={kernelName:k5,backendName:"webgl",kernelFunc:CHe};function BHe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=yd+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new th(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const jHe={kernelName:Yx,backendName:"webgl",kernelFunc:BHe};class EHe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=Fs(r.length),a=Fs(r.length);let l="";if(s===1)l="coords * strides + begin";else{let c=0;l=r.map((u,d)=>(c++,r.length===1?`coords * strides[${d}] + begin[${d}]`:`coords[${c-1}] * strides[${d}] + begin[${d}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}}function IHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:l,beginMask:c,endMask:u,ellipsisMask:d,newAxisMask:f,shrinkAxisMask:A}=r,{finalShapeSparse:m,finalShape:g,isIdentity:y,sliceDim0:x,isSimpleSlice:v,begin:w,end:B,strides:k}=t$(s.shape,i,a,l,c,u,d,f,A);let j;if(y)j=qt({inputs:{x:s},backend:n,attrs:{shape:g}});else if(x||v){ce(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const O=JL(w,B,k),F=hb({inputs:{x:s},backend:n,attrs:{begin:w,size:O}});j=qt({inputs:{x:F},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(F)}else if(n.shouldExecuteOnCPU([s])){const F=n.readSync(s.dataId),D=cr(s.shape,s.dtype,F),T=qLe(m,D,k,w);j=n.makeTensorInfo(g,s.dtype,T.values)}else{const F=new EHe(w,k,m);j=n.runWebGLProgram(F,[s],s.dtype)}const I=qt({inputs:{x:j},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(j),I}const NHe={kernelName:KE,backendName:"webgl",kernelFunc:IHe};function THe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:l,padWidth:c,preserveShortSequences:u}=r,{data:d,dataSplits:f}=e,A=n.readSync(d.dataId),m=n.readSync(f.dataId),[g,y]=GLe(A,m,s,i,a,l,c,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(f.shape,"int32",y)]}const _He={kernelName:XE,backendName:"webgl",kernelFunc:THe};function RHe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const l=n.readSync(i.dataId),c=n.readSync(a.dataId)[0],[u,d,f]=KLe(l,c,s),A=d.length;return[n.makeTensorInfo([A,2],"int32",u),n.makeTensorInfo([A],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const OHe={kernelName:YE,backendName:"webgl",kernelFunc:RHe};function FHe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),l=XLe(a,s);return n.makeTensorInfo(i.shape,"int32",l)}const DHe={kernelName:JE,backendName:"webgl",kernelFunc:FHe};const LHe="return tan(x);",$He=Gr({opSnippet:LHe}),PHe={kernelName:Gx,backendName:"webgl",kernelFunc:$He};const zHe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,UHe=Gr({opSnippet:zHe}),MHe={kernelName:Kx,backendName:"webgl",kernelFunc:UHe};function QHe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:a}=e,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=zm(a,i,s.shape),A=[f/u,u];if(f===0)return n.makeTensorInfo(s.shape,i.dtype);const m=qt({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=qt({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),y=qt({inputs:{x:s},backend:n,attrs:{shape:A}}),x=new uP(c,l,m.shape.length,g.shape.length,d,A,!1,!0),v=n.runWebGLProgram(x,[g,m,y],y.dtype),w=qt({inputs:{x:v},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),w}const HHe={kernelName:UE,backendName:"webgl",kernelFunc:QHe};class WHe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const s=Fs(this.rank),i=VHe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function VHe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}function Hae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const c=n.readSync(s.dataId),u=s.dtype==="string"?c.map(A=>TA(A)):c,d=cr(s.shape,s.dtype,u),f=JLe(d,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const a=new WHe(s.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const qHe={kernelName:Xx,backendName:"webgl",kernelFunc:Hae};class GHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class KHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}function dg(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function FH(t){let e=1;for(;e<t;)e*=2;return e}function XHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r,l=Ye().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=Ye().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,d=u[u.length-1];if(n.shouldExecuteOnCPU([s])||d<l||i>c){const T=n.readSync(s.dataId),[N,P]=ZLe(T,u,s.dtype,i,a);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(d===1)return[s,fS({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(s.dataId),A=f!==null&&f.isPacked,m=A?n.unpackTensor(s):s,y=it(u)/d,x=qt({inputs:{x:m},attrs:{shape:[y,d]},backend:n});A&&dg(n,m);const v=FH(i),w=FH(d);let B=null;const k=()=>B===null?[x,x]:[x,B],j=(T,N,P)=>{const z=k(),U=new GHe(P),q=[[d],[B===null?1:0],[Number.NEGATIVE_INFINITY],[T],[N]],Z=B;B=n.runWebGLProgram(U,z,"int32",q),dg(n,Z)};for(let T=1;T<v;T*=2){const N=T*2;for(let P=T;P>=1;P/=2)j(N,P,[y,w])}for(let T=w;T>v;T/=2){const N=k(),P=new KHe([y,T/2]),U=[[d],[B===null?1:0],[v]],ee=B;B=n.runWebGLProgram(P,N,"int32",U),dg(n,ee);const q=v/2,Z=q*2;for(let G=q;G>=1;G/=2)j(Z,G,B.shape)}let I=B;B=hb({inputs:{x:B},backend:n,attrs:{begin:0,size:[y,i]}}),dg(n,I);let O=Dae({inputs:{x,indices:B},backend:n,attrs:{axis:1,batchDims:1}});dg(n,x);const F=u.slice(0,-1);F.push(i),I=B,B=qt({inputs:{x:B},attrs:{shape:F},backend:n}),dg(n,I);const D=O;return O=qt({inputs:{x:O},attrs:{shape:F},backend:n}),dg(n,D),[O,B]}const YHe={kernelName:ZE,backendName:"webgl",kernelFunc:XHe};class JHe{constructor(e,n,r,s,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const l=r==="nearest"?1:2;let c;switch(s){case"constant":c=1;break;case"reflect":c=2;break;case"wrap":c=3;break;case"nearest":c=4;break;default:c=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${c} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}function ZHe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:l,fillValue:c,outputShape:u}=r,[d,f,A,m]=s.shape,[g,y]=u??[f,A],x=[d,g,y,m],v=new JHe(f,A,a,l,c,x);return n.runWebGLProgram(v,[s,i],"float32")}const eWe={kernelName:e3,backendName:"webgl",kernelFunc:ZHe};function tWe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;cS(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:l,outputShape:c,indices:u}=e$e(a,s,i.shape,i.dtype);return[r.makeTensorInfo(c,i.dtype,l),r.makeTensorInfo([u.length],"int32",u)]}const nWe={kernelName:t3,backendName:"webgl",kernelFunc:tWe};function rWe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s,l=a.shape.length,c=s.shape[i],u=new Array(l-1);let d=0;for(let y=0;y<l;y++)y!==i&&(u[d++]=a.shape[y]);const f=[],A=new Array(l).fill(0),m=a.shape.slice();m[i]=1;const g=new Array(c);for(let y=0;y<g.length;y++){A[i]=y;const x=hb({inputs:{x:a},backend:n,attrs:{begin:A,size:m}}),v=qt({inputs:{x},backend:n,attrs:{shape:u}});g[y]=v,f.push(x)}return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const sWe={kernelName:B5,backendName:"webgl",kernelFunc:rWe};class iWe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,a=e.numSegments,l=a*Math.ceil(i/r);this.outputShape=[s,l];const c="0.0",u="sumValue",d=Math.floor(r/4)*4,f=r%4,A=`
        sumValue += dot(values, segFilter);
    `;let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${c};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${A}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${A}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${A}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${A}
        }
        setOutput(${u});
      }
    `}}function aWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r,l=s.shape.length,c=[];let u=0;const d=Yi([u],l);let f=s;d!=null&&(f=Ol({inputs:{x:s},backend:n,attrs:{perm:d}}),c.push(f),u=Sa(1,l)[0]);const A=vne(f.shape,u,a),m=it([f.shape[u]]),g=qt({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}});c.push(g);const y=s3(s.dtype),x=(k,j,I,O,F)=>{const D=k.shape[0],T=k.shape[1],N=bne(T,F),P={windowSize:N,inSize:T,batchSize:D,numSegments:F},z=new iWe(P,j),U=n.compileAndRun(z,[k,I],O);if(c.push(U),U.shape[1]===F)return U;const ee=Qae({backend:n,attrs:{start:0,stop:F,step:1,dtype:"float32"}}),q=Hae({inputs:{x:ee},backend:n,attrs:{reps:[T/N]}});return c.push(ee),c.push(q),x(U,j,q,O,F)},v=x(g,"unsortedSegmentSum",i,y,a),w=qt({inputs:{x:v},backend:n,attrs:{shape:A}});let B=w;if(d!=null){c.push(w);const k=Lm(d);B=Ol({inputs:{x:B},backend:n,attrs:{perm:k}})}return c.forEach(k=>n.disposeIntermediateTensorInfo(k)),B}const oWe={kernelName:j5,backendName:"webgl",kernelFunc:aWe};const lWe=[W$e,q$e,X$e,Z$e,tPe,sPe,aPe,lPe,fPe,APe,gPe,bPe,SPe,jPe,NPe,_Pe,OPe,$Pe,zPe,MPe,VPe,ZPe,tze,ize,oze,hze,pze,xze,E$e,wze,jze,Tze,Lze,zze,Mze,Hze,Vze,Xze,Zze,nUe,sUe,aUe,lUe,dUe,hUe,gUe,xUe,wUe,kUe,jUe,TUe,FUe,PUe,MUe,WUe,VUe,GUe,XUe,JUe,eMe,nMe,aMe,cMe,fMe,AMe,gMe,bMe,CMe,EMe,j$e,NMe,kze,RMe,DMe,PMe,N$e,QMe,qMe,KMe,ZMe,n9e,a9e,c9e,h9e,g9e,b9e,w9e,B9e,E9e,N9e,O9e,D9e,$9e,z9e,M9e,V9e,X9e,e7e,l7e,R$e,f7e,p7e,y7e,v7e,cze,C7e,B7e,E7e,T7e,F7e,_$e,L7e,P7e,U7e,Q7e,H7e,uze,s7e,q7e,Y7e,tQe,F$e,iQe,lQe,fQe,pQe,xQe,vQe,CQe,jQe,NQe,RQe,DQe,PQe,QQe,VQe,XQe,ZQe,YPe,a7e,nHe,sHe,aHe,lHe,uHe,fHe,AHe,mHe,yHe,vHe,SHe,kHe,jHe,NHe,_He,OHe,DHe,i7e,M$e,PHe,MHe,HHe,qHe,YHe,eWe,Q$e,nWe,sWe,oWe,k7e];for(const t of lWe)r3(t);var t2={exports:{}};const cWe=nD(HNe),uWe=nD(p4e);var dWe=t2.exports,DH;function fWe(){return DH||(DH=1,(function(t,e){(function(n,r){r(e,cWe,uWe)})(dWe,(function(n,r,s){const i={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class a{constructor(c,u){this.modelPath=u||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(c)}/model.json`}getPrefix(c){return c==="lite_mobilenet_v2"?`ssd${c}`:`ssd_${c}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const c=s.zeros([1,300,300,3],"int32"),u=await this.model.executeAsync(c);await Promise.all(u.map((d=>d.data()))),u.map((d=>d.dispose())),c.dispose()}async infer(c,u,d){const f=s.tidy((()=>(c instanceof s.Tensor||(c=s.browser.fromPixels(c)),s.expandDims(c)))),A=f.shape[1],m=f.shape[2],g=await this.model.executeAsync(f),y=g[0].dataSync(),x=g[1].dataSync();f.dispose(),s.dispose(g);const[v,w]=this.calculateMaxScores(y,g[0].shape[1],g[0].shape[2]),B=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const k=s.tidy((()=>{const I=s.tensor2d(x,[g[1].shape[1],g[1].shape[3]]);return s.image.nonMaxSuppression(I,v,u,d,d)})),j=k.dataSync();return k.dispose(),B!==s.getBackend()&&s.setBackend(B),this.buildDetectedObjects(m,A,x,v,j,w)}buildDetectedObjects(c,u,d,f,A,m){const g=A.length,y=[];for(let x=0;x<g;x++){const v=[];for(let I=0;I<4;I++)v[I]=d[4*A[x]+I];const w=v[0]*u,B=v[1]*c,k=v[2]*u,j=v[3]*c;v[0]=B,v[1]=w,v[2]=j-B,v[3]=k-w,y.push({bbox:v,class:i[m[A[x]]+1].displayName,score:f[A[x]]})}return y}calculateMaxScores(c,u,d){const f=[],A=[];for(let m=0;m<u;m++){let g=Number.MIN_VALUE,y=-1;for(let x=0;x<d;x++)c[m*d+x]>g&&(g=c[m*d+x],y=x);f[m]=g,A[m]=y}return[f,A]}async detect(c,u=20,d=.5){return this.infer(c,u,d)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=a,n.load=async function(l={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const c=l.base||"lite_mobilenet_v2",u=l.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(c)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${c}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const d=new a(c,u);return await d.load(),d},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})}))})(t2,t2.exports)),t2.exports}var Wae=fWe();const hWe="http://localhost:8000/api";function Vae({problemId:t,code:e,language:n,onRunComplete:r,showRunButton:s=!0,isGlobalTest:i=!1}){const[a,l]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState("all"),A=async()=>{if(!(!e?.trim()||!t)){l(!0),u(null);try{const v=await Xe.post(`${hWe}/run-with-tests`,{problemId:t,code:e,language:n,isGlobalTest:i});u(v.data),r&&r(v.data)}catch(v){u({success:!1,error:v.response?.data?.error||"Execution failed"})}finally{l(!1)}}},m=()=>{if(!c?.testResults)return[];switch(d){case"passed":return c.testResults.filter(v=>v.passed);case"failed":return c.testResults.filter(v=>!v.passed);default:return c.testResults}},g=c?.testResults?.filter(v=>v.passed).length||0,y=c?.testResults?.length||0;c?.testResults?.filter(v=>!v.isHidden);const x=c?.testResults?.filter(v=>v.isHidden)||[];return o.jsxs("div",{children:[s&&o.jsx("button",{onClick:A,disabled:a||!e?.trim(),style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:a||!e?.trim()?"not-allowed":"pointer",opacity:a||!e?.trim()?.6:1},children:a?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-small"}),"Running Tests..."]}):o.jsxs(o.Fragment,{children:[o.jsx(dd,{size:16}),"Run with Test Cases"]})}),!c&&!a&&o.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(59, 130, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[o.jsx(w7,{size:40,style:{marginBottom:"0.75rem",color:"#3b82f6",opacity:.7}}),o.jsx("div",{style:{color:"var(--text-main)",fontWeight:500,marginBottom:"0.5rem"},children:"Ready to Test"}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:'Click "Run with Test Cases" to execute your code against all test cases'})]}),c&&!c.success&&c.error&&o.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx(Pn,{size:18,color:"#ef4444"}),o.jsx("span",{style:{fontWeight:600,color:"#ef4444"},children:"Execution Error"})]}),o.jsx("pre",{style:{margin:0,fontSize:"0.8rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:c.error})]}),c&&c.testResults&&o.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{padding:"1rem",background:g===y?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1))":"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[g===y?o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ul,{size:24,color:"white"})}):o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #f97316, #ea580c)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Lg,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:g===y?"#10b981":"#f97316"},children:g===y?"All Tests Passed!":`${g}/${y} Tests Passed`}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["Score: ",c.score||0," / ",c.totalPoints||0," points"]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#10b981",fontWeight:600},children:[o.jsx(Nn,{size:16})," ",g]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Passed"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ef4444",fontWeight:600},children:[o.jsx(kr,{size:16})," ",y-g]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Failed"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#8b5cf6",fontWeight:600},children:[o.jsx(Zg,{size:16})," ",x.length]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Hidden"})]})]})]}),o.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border-color)"},children:["all","passed","failed"].map(v=>o.jsx("button",{onClick:()=>f(v),style:{flex:1,padding:"0.75rem",background:d===v?"var(--bg-card)":"transparent",border:"none",borderBottom:d===v?"2px solid var(--primary)":"2px solid transparent",color:d===v?"var(--primary)":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,textTransform:"capitalize"},children:v==="all"?`All (${y})`:v==="passed"?`Passed (${g})`:`Failed (${y-g})`},v))}),o.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto"},children:[m().map((v,w)=>o.jsx(AWe,{result:v,index:w+1},v.testCaseId||w)),m().length===0&&o.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No test cases in this category"})]})]}),c&&(!c.testResults||c.testResults.length===0)&&!c.error&&o.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"var(--bg-dark)",borderRadius:"12px",color:"var(--text-muted)"},children:[o.jsx(w7,{size:40,style:{marginBottom:"0.5rem",opacity:.5}}),o.jsx("div",{children:"No test cases found for this problem"}),o.jsx("div",{style:{fontSize:"0.8rem",marginTop:"0.25rem"},children:"Ask your mentor to add test cases"})]})]})}function AWe({result:t,index:e}){const[n,r]=C.useState(!t.passed);return o.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)",background:t.passed?"transparent":"rgba(239, 68, 68, 0.03)"},children:[o.jsxs("div",{onClick:()=>!t.isHidden&&r(!n),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:t.isHidden?"default":"pointer",transition:"background 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.passed?o.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Nn,{size:14,color:"#10b981"})}):o.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(kr,{size:14,color:"#ef4444"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:["Test Case ",e]}),t.isHidden&&o.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:"rgba(139, 92, 246, 0.2)",color:"#a78bfa",borderRadius:"4px",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(Zg,{size:10})," Hidden"]})]}),t.description&&o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.15rem"},children:t.description})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.executionTime&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(ls,{size:12})," ",t.executionTime,"ms"]}),o.jsxs("span",{style:{padding:"0.25rem 0.5rem",background:t.passed?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:t.passed?"#10b981":"#ef4444",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:[t.points||0," pts"]})]})]}),!t.isHidden&&n&&o.jsxs("div",{style:{padding:"0 1rem 1rem 3.5rem",display:"grid",gap:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input"}),o.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"var(--bg-card)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:String(t.input??"(no input)")})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output"}),o.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px",fontSize:"0.8rem",color:"#10b981",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:"1px solid rgba(16, 185, 129, 0.2)"},children:String(t.expectedOutput||t.expected_output||"(empty)")})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Your Output"}),o.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:t.passed?"rgba(30, 41, 59, 0.4)":"rgba(239, 68, 68, 0.05)",borderRadius:"6px",fontSize:"0.8rem",color:t.passed?"#e2e8f0":"#ef4444",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:`1px solid ${t.passed?"rgba(255, 255, 255, 0.05)":"rgba(239, 68, 68, 0.1)"}`},children:String(t.actualOutput||t.output||"(no output)")})]})]}),t.isHidden&&o.jsx("div",{style:{padding:"0 1rem 0.75rem 3.5rem",fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:t.passed?" Your code passed this hidden test case":" Your code failed this hidden test case. Details are hidden."})]})}var m_={exports:{}},LH;function pWe(){return LH||(LH=1,(function(t,e){var n=void 0,r=function(s){return n||(n=new Promise(function(i,a){var l=typeof s<"u"?s:{},c=l.onAbort;l.onAbort=function(L){a(new Error(L)),c&&c(L)},l.postRun=l.postRun||[],l.postRun.push(function(){i(l)}),t=void 0;var u;u||=typeof l<"u"?l:{};var d=typeof window=="object",f=typeof WorkerGlobalScope<"u",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function L(qe,St){switch(typeof St){case"boolean":Jc(qe,St?1:0);break;case"number":Ti(qe,St);break;case"string":Yc(qe,St,-1,-1);break;case"object":if(St===null)fa(qe);else if(St.length!=null){var Vt=Sd(St,wd);$l(qe,Vt,St.length,-1),Ln(Vt)}else Nu(qe,"Wrong API use : tried to return a value of an unknown type ("+St+").",-1);break;default:fa(qe)}}function V(qe,St){for(var Vt=[],En=0;En<qe;En+=1){var Mn=ye(St+4*En,"i32"),Sr=Tr(Mn);if(Sr===1||Sr===2)Mn=na(Mn);else if(Sr===3)Mn=hi(Mn);else if(Sr===4){Sr=Mn,Mn=Ks(Sr),Sr=xs(Sr);for(var _i=new Uint8Array(Mn),bs=0;bs<Mn;bs+=1)_i[bs]=T[Sr+bs];Mn=_i}else Mn=null;Vt.push(Mn)}return Vt}function se(qe,St){this.Qa=qe,this.db=St,this.Oa=1,this.lb=[]}function pe(qe,St){if(this.db=St,St=Ut(qe)+1,this.eb=uc(St),this.eb===null)throw Error("Unable to allocate memory for the SQL string");en(qe,N,this.eb,St),this.kb=this.eb,this.Za=this.pb=null}function Re(qe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),qe!=null){var St=this.filename,Vt="/",En=St;if(Vt&&(Vt=typeof Vt=="string"?Vt:Ls(Vt),En=St?_e(Vt+"/"+St):Vt),St=xn(!0,!0),En=da(En,St),qe){if(typeof qe=="string"){Vt=Array(qe.length);for(var Mn=0,Sr=qe.length;Mn<Sr;++Mn)Vt[Mn]=qe.charCodeAt(Mn);qe=Vt}st(En,St|146),Vt=Pt(En,577),ci(Vt,qe,0,qe.length,0),Gt(Vt),st(En,St)}}this.handleError(kn(this.filename,Ge)),this.db=ye(Ge,"i32"),Pl(this.db),this.fb={},this.Sa={}}var Ge=Ni(4),At=u.cwrap,kn=At("sqlite3_open","number",["string","number"]),_n=At("sqlite3_close_v2","number",["number"]),Qn=At("sqlite3_exec","number",["number","string","number","number","number"]),Nr=At("sqlite3_changes","number",["number"]),ii=At("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Bd=At("sqlite3_sql","string",["number"]),jd=At("sqlite3_normalized_sql","string",["number"]),dc=At("sqlite3_prepare_v2","number",["number","number","number","number","number"]),qc=At("sqlite3_bind_text","number",["number","number","number","number","number"]),Iu=At("sqlite3_bind_blob","number",["number","number","number","number","number"]),Lh=At("sqlite3_bind_double","number",["number","number","number"]),Gc=At("sqlite3_bind_int","number",["number","number","number"]),Kc=At("sqlite3_bind_parameter_index","number",["number","string"]),lp=At("sqlite3_step","number",["number"]),Xc=At("sqlite3_errmsg","string",["number"]),cp=At("sqlite3_column_count","number",["number"]),M=At("sqlite3_data_count","number",["number"]),ae=At("sqlite3_column_double","number",["number","number"]),Se=At("sqlite3_column_text","string",["number","number"]),Oe=At("sqlite3_column_blob","number",["number","number"]),Qe=At("sqlite3_column_bytes","number",["number","number"]),bt=At("sqlite3_column_type","number",["number","number"]),Tt=At("sqlite3_column_name","string",["number","number"]),dn=At("sqlite3_reset","number",["number"]),Bn=At("sqlite3_clear_bindings","number",["number"]),Vn=At("sqlite3_finalize","number",["number"]),er=At("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Tr=At("sqlite3_value_type","number",["number"]),Ks=At("sqlite3_value_bytes","number",["number"]),hi=At("sqlite3_value_text","string",["number"]),xs=At("sqlite3_value_blob","number",["number"]),na=At("sqlite3_value_double","number",["number"]),Ti=At("sqlite3_result_double","",["number","number"]),fa=At("sqlite3_result_null","",["number"]),Yc=At("sqlite3_result_text","",["number","string","number","number"]),$l=At("sqlite3_result_blob","",["number","number","number","number"]),Jc=At("sqlite3_result_int","",["number","number"]),Nu=At("sqlite3_result_error","",["number","string","number"]),Ed=At("sqlite3_aggregate_context","number",["number","number"]),Pl=At("RegisterExtensionFunctions","number",["number"]),Al=At("sqlite3_update_hook","number",["number","number","number"]);se.prototype.bind=function(qe){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(qe)?this.Cb(qe):qe!=null&&typeof qe=="object"?this.Db(qe):!0},se.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var qe=lp(this.Qa);switch(qe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(qe)}},se.prototype.wb=function(qe){return qe==null&&(qe=this.Oa,this.Oa+=1),ae(this.Qa,qe)},se.prototype.Gb=function(qe){if(qe==null&&(qe=this.Oa,this.Oa+=1),qe=Se(this.Qa,qe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(qe)},se.prototype.Hb=function(qe){return qe==null&&(qe=this.Oa,this.Oa+=1),Se(this.Qa,qe)},se.prototype.getBlob=function(qe){qe==null&&(qe=this.Oa,this.Oa+=1);var St=Qe(this.Qa,qe);qe=Oe(this.Qa,qe);for(var Vt=new Uint8Array(St),En=0;En<St;En+=1)Vt[En]=T[qe+En];return Vt},se.prototype.get=function(qe,St){St=St||{},qe!=null&&this.bind(qe)&&this.step(),qe=[];for(var Vt=M(this.Qa),En=0;En<Vt;En+=1)switch(bt(this.Qa,En)){case 1:var Mn=St.useBigInt?this.Gb(En):this.wb(En);qe.push(Mn);break;case 2:qe.push(this.wb(En));break;case 3:qe.push(this.Hb(En));break;case 4:qe.push(this.getBlob(En));break;default:qe.push(null)}return qe},se.prototype.getColumnNames=function(){for(var qe=[],St=cp(this.Qa),Vt=0;Vt<St;Vt+=1)qe.push(Tt(this.Qa,Vt));return qe},se.prototype.getAsObject=function(qe,St){qe=this.get(qe,St),St=this.getColumnNames();for(var Vt={},En=0;En<St.length;En+=1)Vt[St[En]]=qe[En];return Vt},se.prototype.getSQL=function(){return Bd(this.Qa)},se.prototype.getNormalizedSQL=function(){return jd(this.Qa)},se.prototype.run=function(qe){return qe!=null&&this.bind(qe),this.step(),this.reset()},se.prototype.sb=function(qe,St){St==null&&(St=this.Oa,this.Oa+=1),qe=fn(qe);var Vt=Sd(qe,wd);this.lb.push(Vt),this.db.handleError(qc(this.Qa,St,Vt,qe.length-1,0))},se.prototype.Bb=function(qe,St){St==null&&(St=this.Oa,this.Oa+=1);var Vt=Sd(qe,wd);this.lb.push(Vt),this.db.handleError(Iu(this.Qa,St,Vt,qe.length,0))},se.prototype.rb=function(qe,St){St==null&&(St=this.Oa,this.Oa+=1),this.db.handleError((qe===(qe|0)?Gc:Lh)(this.Qa,St,qe))},se.prototype.Eb=function(qe){qe==null&&(qe=this.Oa,this.Oa+=1),Iu(this.Qa,qe,0,0,0)},se.prototype.tb=function(qe,St){switch(St==null&&(St=this.Oa,this.Oa+=1),typeof qe){case"string":this.sb(qe,St);return;case"number":this.rb(qe,St);return;case"bigint":this.sb(qe.toString(),St);return;case"boolean":this.rb(qe+0,St);return;case"object":if(qe===null){this.Eb(St);return}if(qe.length!=null){this.Bb(qe,St);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+qe+")."},se.prototype.Db=function(qe){var St=this;return Object.keys(qe).forEach(function(Vt){var En=Kc(St.Qa,Vt);En!==0&&St.tb(qe[Vt],En)}),!0},se.prototype.Cb=function(qe){for(var St=0;St<qe.length;St+=1)this.tb(qe[St],St+1);return!0},se.prototype.reset=function(){return this.freemem(),Bn(this.Qa)===0&&dn(this.Qa)===0},se.prototype.freemem=function(){for(var qe;(qe=this.lb.pop())!==void 0;)Ln(qe)},se.prototype.free=function(){this.freemem();var qe=Vn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,qe},pe.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var qe=fi(),St=Ni(4);at(Ge),at(St);try{this.db.handleError(dc(this.db.db,this.kb,-1,Ge,St)),this.kb=ye(St,"i32");var Vt=ye(Ge,"i32");return Vt===0?(this.mb(),{done:!0}):(this.Za=new se(Vt,this.db),this.db.fb[Vt]=this.Za,{value:this.Za,done:!1})}catch(En){throw this.pb=nt(this.kb),this.mb(),En}finally{Eu(qe)}},pe.prototype.mb=function(){Ln(this.eb),this.eb=null},pe.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:nt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(pe.prototype[Symbol.iterator]=function(){return this}),Re.prototype.run=function(qe,St){if(!this.db)throw"Database closed";if(St){qe=this.prepare(qe,St);try{qe.step()}finally{qe.free()}}else this.handleError(Qn(this.db,qe,0,0,Ge));return this},Re.prototype.exec=function(qe,St,Vt){if(!this.db)throw"Database closed";var En=fi(),Mn=null;try{var Sr=el(qe),_i=Ni(4);for(qe=[];ye(Sr,"i8")!==0;){at(Ge),at(_i),this.handleError(dc(this.db,Sr,-1,Ge,_i));var bs=ye(Ge,"i32");if(Sr=ye(_i,"i32"),bs!==0){var Ai=null;for(Mn=new se(bs,this),St!=null&&Mn.bind(St);Mn.step();)Ai===null&&(Ai={columns:Mn.getColumnNames(),values:[]},qe.push(Ai)),Ai.values.push(Mn.get(null,Vt));Mn.free()}}return qe}catch(za){throw Mn&&Mn.free(),za}finally{Eu(En)}},Re.prototype.each=function(qe,St,Vt,En,Mn){typeof St=="function"&&(En=Vt,Vt=St,St=void 0),qe=this.prepare(qe,St);try{for(;qe.step();)Vt(qe.getAsObject(null,Mn))}finally{qe.free()}if(typeof En=="function")return En()},Re.prototype.prepare=function(qe,St){if(at(Ge),this.handleError(ii(this.db,qe,-1,Ge,0)),qe=ye(Ge,"i32"),qe===0)throw"Nothing to prepare";var Vt=new se(qe,this);return St!=null&&Vt.bind(St),this.fb[qe]=Vt},Re.prototype.iterateStatements=function(qe){return new pe(qe,this)},Re.prototype.export=function(){Object.values(this.fb).forEach(function(St){St.free()}),Object.values(this.Sa).forEach(di),this.Sa={},this.handleError(_n(this.db));var qe=Co(this.filename);return this.handleError(kn(this.filename,Ge)),this.db=ye(Ge,"i32"),Pl(this.db),qe},Re.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(qe){qe.free()}),Object.values(this.Sa).forEach(di),this.Sa={},this.Ya&&(di(this.Ya),this.Ya=void 0),this.handleError(_n(this.db)),Ir("/"+this.filename),this.db=null)},Re.prototype.handleError=function(qe){if(qe===0)return null;throw qe=Xc(this.db),Error(qe)},Re.prototype.getRowsModified=function(){return Nr(this.db)},Re.prototype.create_function=function(qe,St){Object.prototype.hasOwnProperty.call(this.Sa,qe)&&(di(this.Sa[qe]),delete this.Sa[qe]);var Vt=no(function(En,Mn,Sr){Mn=V(Mn,Sr);try{var _i=St.apply(null,Mn)}catch(bs){Nu(En,bs,-1);return}L(En,_i)},"viii");return this.Sa[qe]=Vt,this.handleError(er(this.db,qe,St.length,1,0,Vt,0,0,0)),this},Re.prototype.create_aggregate=function(qe,St){var Vt=St.init||function(){return null},En=St.finalize||function(Ai){return Ai},Mn=St.step;if(!Mn)throw"An aggregate function must have a step function in "+qe;var Sr={};Object.hasOwnProperty.call(this.Sa,qe)&&(di(this.Sa[qe]),delete this.Sa[qe]),St=qe+"__finalize",Object.hasOwnProperty.call(this.Sa,St)&&(di(this.Sa[St]),delete this.Sa[St]);var _i=no(function(Ai,za,Id){var ra=Ed(Ai,1);Object.hasOwnProperty.call(Sr,ra)||(Sr[ra]=Vt()),za=V(za,Id),za=[Sr[ra]].concat(za);try{Sr[ra]=Mn.apply(null,za)}catch(zl){delete Sr[ra],Nu(Ai,zl,-1)}},"viii"),bs=no(function(Ai){var za=Ed(Ai,1);try{var Id=En(Sr[za])}catch(ra){delete Sr[za],Nu(Ai,ra,-1);return}L(Ai,Id),delete Sr[za]},"vi");return this.Sa[qe]=_i,this.Sa[St]=bs,this.handleError(er(this.db,qe,Mn.length-1,1,0,0,_i,bs,0)),this},Re.prototype.updateHook=function(qe){this.Ya&&(Al(this.db,0,0),di(this.Ya),this.Ya=void 0),qe&&(this.Ya=no(function(St,Vt,En,Mn,Sr){switch(Vt){case 18:St="insert";break;case 23:St="update";break;case 9:St="delete";break;default:throw"unknown operationCode in updateHook callback: "+Vt}if(En=En?Le(N,En):"",Mn=Mn?Le(N,Mn):"",Sr>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";qe(St,En,Mn,Number(Sr))},"viiiij"),Al(this.db,this.Ya,0))},u.Database=Re};var m={...u},g="./this.program",y=(L,V)=>{throw V},x="",v,w;if(A){var B=EO;x=__dirname+"/",w=L=>(L=G(L)?new URL(L):L,B.readFileSync(L)),v=async L=>(L=G(L)?new URL(L):L,B.readFileSync(L,void 0)),!u.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=u,y=(L,V)=>{throw process.exitCode=L,V}}else(d||f)&&(f?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),x=x.startsWith("blob:")?"":x.slice(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1),f&&(w=L=>{var V=new XMLHttpRequest;return V.open("GET",L,!1),V.responseType="arraybuffer",V.send(null),new Uint8Array(V.response)}),v=async L=>{if(G(L))return new Promise((se,pe)=>{var Re=new XMLHttpRequest;Re.open("GET",L,!0),Re.responseType="arraybuffer",Re.onload=()=>{Re.status==200||Re.status==0&&Re.response?se(Re.response):pe(Re.status)},Re.onerror=pe,Re.send(null)});var V=await fetch(L,{credentials:"same-origin"});if(V.ok)return V.arrayBuffer();throw Error(V.status+" : "+V.url)});var k=u.print||console.log.bind(console),j=u.printErr||console.error.bind(console);Object.assign(u,m),m=null,u.thisProgram&&(g=u.thisProgram);var I=u.wasmBinary,O,F=!1,D,T,N,P,z,U,ee,q,Z,G=L=>L.startsWith("file://");function ne(){var L=O.buffer;u.HEAP8=T=new Int8Array(L),u.HEAP16=P=new Int16Array(L),u.HEAPU8=N=new Uint8Array(L),u.HEAPU16=new Uint16Array(L),u.HEAP32=z=new Int32Array(L),u.HEAPU32=U=new Uint32Array(L),u.HEAPF32=ee=new Float32Array(L),u.HEAPF64=Z=new Float64Array(L),u.HEAP64=q=new BigInt64Array(L),u.HEAPU64=new BigUint64Array(L)}var K=0,H=null;function Q(L){throw u.onAbort?.(L),L="Aborted("+L+")",j(L),F=!0,new WebAssembly.RuntimeError(L+". Build with -sASSERTIONS for more info.")}var X;async function re(L){if(!I)try{var V=await v(L);return new Uint8Array(V)}catch{}if(L==X&&I)L=new Uint8Array(I);else if(w)L=w(L);else throw"both async and sync fetching of the wasm failed";return L}async function le(L,V){try{var se=await re(L);return await WebAssembly.instantiate(se,V)}catch(pe){j(`failed to asynchronously prepare wasm: ${pe}`),Q(pe)}}async function Ae(L){var V=X;if(!I&&typeof WebAssembly.instantiateStreaming=="function"&&!G(V)&&!A)try{var se=fetch(V,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(se,L)}catch(pe){j(`wasm streaming compile failed: ${pe}`),j("falling back to ArrayBuffer instantiation")}return le(V,L)}class xe{name="ExitStatus";constructor(V){this.message=`Program terminated with exit(${V})`,this.status=V}}var Be=L=>{for(;0<L.length;)L.shift()(u)},me=[],ve=[],je=()=>{var L=u.preRun.shift();ve.unshift(L)};function ye(L,V="i8"){switch(V.endsWith("*")&&(V="*"),V){case"i1":return T[L];case"i8":return T[L];case"i16":return P[L>>1];case"i32":return z[L>>2];case"i64":return q[L>>3];case"float":return ee[L>>2];case"double":return Z[L>>3];case"*":return U[L>>2];default:Q(`invalid type for getValue: ${V}`)}}var ze=u.noExitRuntime||!0;function at(L){var V="i32";switch(V.endsWith("*")&&(V="*"),V){case"i1":T[L]=0;break;case"i8":T[L]=0;break;case"i16":P[L>>1]=0;break;case"i32":z[L>>2]=0;break;case"i64":q[L>>3]=BigInt(0);break;case"float":ee[L>>2]=0;break;case"double":Z[L>>3]=0;break;case"*":U[L>>2]=0;break;default:Q(`invalid type for setValue: ${V}`)}}var ie=typeof TextDecoder<"u"?new TextDecoder:void 0,Le=(L,V=0,se=NaN)=>{var pe=V+se;for(se=V;L[se]&&!(se>=pe);)++se;if(16<se-V&&L.buffer&&ie)return ie.decode(L.subarray(V,se));for(pe="";V<se;){var Re=L[V++];if(Re&128){var Ge=L[V++]&63;if((Re&224)==192)pe+=String.fromCharCode((Re&31)<<6|Ge);else{var At=L[V++]&63;Re=(Re&240)==224?(Re&15)<<12|Ge<<6|At:(Re&7)<<18|Ge<<12|At<<6|L[V++]&63,65536>Re?pe+=String.fromCharCode(Re):(Re-=65536,pe+=String.fromCharCode(55296|Re>>10,56320|Re&1023))}}else pe+=String.fromCharCode(Re)}return pe},nt=(L,V)=>L?Le(N,L,V):"",Et=(L,V)=>{for(var se=0,pe=L.length-1;0<=pe;pe--){var Re=L[pe];Re==="."?L.splice(pe,1):Re===".."?(L.splice(pe,1),se++):se&&(L.splice(pe,1),se--)}if(V)for(;se;se--)L.unshift("..");return L},_e=L=>{var V=L.charAt(0)==="/",se=L.slice(-1)==="/";return(L=Et(L.split("/").filter(pe=>!!pe),!V).join("/"))||V||(L="."),L&&se&&(L+="/"),(V?"/":"")+L},ht=L=>{var V=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(L).slice(1);return L=V[0],V=V[1],!L&&!V?".":(V&&=V.slice(0,-1),L+V)},ot=L=>L&&L.match(/([^\/]+|\/)\/*$/)[1],$t=()=>{if(A){var L=EO;return V=>L.randomFillSync(V)}return V=>crypto.getRandomValues(V)},kt=L=>{(kt=$t())(L)},Ht=(...L)=>{for(var V="",se=!1,pe=L.length-1;-1<=pe&&!se;pe--){if(se=0<=pe?L[pe]:"/",typeof se!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!se)return"";V=se+"/"+V,se=se.charAt(0)==="/"}return V=Et(V.split("/").filter(Re=>!!Re),!se).join("/"),(se?"/":"")+V||"."},Sn=[],Ut=L=>{for(var V=0,se=0;se<L.length;++se){var pe=L.charCodeAt(se);127>=pe?V++:2047>=pe?V+=2:55296<=pe&&57343>=pe?(V+=4,++se):V+=3}return V},en=(L,V,se,pe)=>{if(!(0<pe))return 0;var Re=se;pe=se+pe-1;for(var Ge=0;Ge<L.length;++Ge){var At=L.charCodeAt(Ge);if(55296<=At&&57343>=At){var kn=L.charCodeAt(++Ge);At=65536+((At&1023)<<10)|kn&1023}if(127>=At){if(se>=pe)break;V[se++]=At}else{if(2047>=At){if(se+1>=pe)break;V[se++]=192|At>>6}else{if(65535>=At){if(se+2>=pe)break;V[se++]=224|At>>12}else{if(se+3>=pe)break;V[se++]=240|At>>18,V[se++]=128|At>>12&63}V[se++]=128|At>>6&63}V[se++]=128|At&63}}return V[se]=0,se-Re},fn=(L,V)=>{var se=Array(Ut(L)+1);return L=en(L,se,0,se.length),V&&(se.length=L),se},Qt=[];function rn(L,V){Qt[L]={input:[],output:[],cb:V},Wn(L,Yt)}var Yt={open(L){var V=Qt[L.node.rdev];if(!V)throw new dt(43);L.tty=V,L.seekable=!1},close(L){L.tty.cb.fsync(L.tty)},fsync(L){L.tty.cb.fsync(L.tty)},read(L,V,se,pe){if(!L.tty||!L.tty.cb.xb)throw new dt(60);for(var Re=0,Ge=0;Ge<pe;Ge++){try{var At=L.tty.cb.xb(L.tty)}catch{throw new dt(29)}if(At===void 0&&Re===0)throw new dt(6);if(At==null)break;Re++,V[se+Ge]=At}return Re&&(L.node.atime=Date.now()),Re},write(L,V,se,pe){if(!L.tty||!L.tty.cb.qb)throw new dt(60);try{for(var Re=0;Re<pe;Re++)L.tty.cb.qb(L.tty,V[se+Re])}catch{throw new dt(29)}return pe&&(L.node.mtime=L.node.ctime=Date.now()),Re}},sn={xb(){e:{if(!Sn.length){var L=null;if(A){var V=Buffer.alloc(256),se=0,pe=process.stdin.fd;try{se=B.readSync(pe,V,0,256)}catch(Re){if(Re.toString().includes("EOF"))se=0;else throw Re}0<se&&(L=V.slice(0,se).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(L=window.prompt("Input: "),L!==null&&(L+=`
`));if(!L){L=null;break e}Sn=fn(L,!0)}L=Sn.shift()}return L},qb(L,V){V===null||V===10?(k(Le(L.output)),L.output=[]):V!=0&&L.output.push(V)},fsync(L){0<L.output?.length&&(k(Le(L.output)),L.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Fn={qb(L,V){V===null||V===10?(j(Le(L.output)),L.output=[]):V!=0&&L.output.push(V)},fsync(L){0<L.output?.length&&(j(Le(L.output)),L.output=[])}},Ft={Wa:null,Xa(){return Ft.createNode(null,"/",16895,0)},createNode(L,V,se,pe){if((se&61440)===24576||(se&61440)===4096)throw new dt(63);return Ft.Wa||(Ft.Wa={dir:{node:{Ta:Ft.La.Ta,Ua:Ft.La.Ua,lookup:Ft.La.lookup,hb:Ft.La.hb,rename:Ft.La.rename,unlink:Ft.La.unlink,rmdir:Ft.La.rmdir,readdir:Ft.La.readdir,symlink:Ft.La.symlink},stream:{Va:Ft.Ma.Va}},file:{node:{Ta:Ft.La.Ta,Ua:Ft.La.Ua},stream:{Va:Ft.Ma.Va,read:Ft.Ma.read,write:Ft.Ma.write,ib:Ft.Ma.ib,jb:Ft.Ma.jb}},link:{node:{Ta:Ft.La.Ta,Ua:Ft.La.Ua,readlink:Ft.La.readlink},stream:{}},ub:{node:{Ta:Ft.La.Ta,Ua:Ft.La.Ua},stream:Cn}}),se=$s(L,V,se,pe),wr(se.mode)?(se.La=Ft.Wa.dir.node,se.Ma=Ft.Wa.dir.stream,se.Na={}):(se.mode&61440)===32768?(se.La=Ft.Wa.file.node,se.Ma=Ft.Wa.file.stream,se.Ra=0,se.Na=null):(se.mode&61440)===40960?(se.La=Ft.Wa.link.node,se.Ma=Ft.Wa.link.stream):(se.mode&61440)===8192&&(se.La=Ft.Wa.ub.node,se.Ma=Ft.Wa.ub.stream),se.atime=se.mtime=se.ctime=Date.now(),L&&(L.Na[V]=se,L.atime=L.mtime=L.ctime=se.atime),se},Sb(L){return L.Na?L.Na.subarray?L.Na.subarray(0,L.Ra):new Uint8Array(L.Na):new Uint8Array(0)},La:{Ta(L){var V={};return V.dev=(L.mode&61440)===8192?L.id:1,V.ino=L.id,V.mode=L.mode,V.nlink=1,V.uid=0,V.gid=0,V.rdev=L.rdev,wr(L.mode)?V.size=4096:(L.mode&61440)===32768?V.size=L.Ra:(L.mode&61440)===40960?V.size=L.link.length:V.size=0,V.atime=new Date(L.atime),V.mtime=new Date(L.mtime),V.ctime=new Date(L.ctime),V.blksize=4096,V.blocks=Math.ceil(V.size/V.blksize),V},Ua(L,V){for(var se of["mode","atime","mtime","ctime"])V[se]!=null&&(L[se]=V[se]);V.size!==void 0&&(V=V.size,L.Ra!=V&&(V==0?(L.Na=null,L.Ra=0):(se=L.Na,L.Na=new Uint8Array(V),se&&L.Na.set(se.subarray(0,Math.min(V,L.Ra))),L.Ra=V)))},lookup(){throw Ft.vb},hb(L,V,se,pe){return Ft.createNode(L,V,se,pe)},rename(L,V,se){try{var pe=Bs(V,se)}catch{}if(pe){if(wr(L.mode))for(var Re in pe.Na)throw new dt(55);Ji(pe)}delete L.parent.Na[L.name],V.Na[se]=L,L.name=se,V.ctime=V.mtime=L.parent.ctime=L.parent.mtime=Date.now()},unlink(L,V){delete L.Na[V],L.ctime=L.mtime=Date.now()},rmdir(L,V){var se=Bs(L,V),pe;for(pe in se.Na)throw new dt(55);delete L.Na[V],L.ctime=L.mtime=Date.now()},readdir(L){return[".","..",...Object.keys(L.Na)]},symlink(L,V,se){return L=Ft.createNode(L,V,41471,0),L.link=se,L},readlink(L){if((L.mode&61440)!==40960)throw new dt(28);return L.link}},Ma:{read(L,V,se,pe,Re){var Ge=L.node.Na;if(Re>=L.node.Ra)return 0;if(L=Math.min(L.node.Ra-Re,pe),8<L&&Ge.subarray)V.set(Ge.subarray(Re,Re+L),se);else for(pe=0;pe<L;pe++)V[se+pe]=Ge[Re+pe];return L},write(L,V,se,pe,Re,Ge){if(V.buffer===T.buffer&&(Ge=!1),!pe)return 0;if(L=L.node,L.mtime=L.ctime=Date.now(),V.subarray&&(!L.Na||L.Na.subarray)){if(Ge)return L.Na=V.subarray(se,se+pe),L.Ra=pe;if(L.Ra===0&&Re===0)return L.Na=V.slice(se,se+pe),L.Ra=pe;if(Re+pe<=L.Ra)return L.Na.set(V.subarray(se,se+pe),Re),pe}Ge=Re+pe;var At=L.Na?L.Na.length:0;if(At>=Ge||(Ge=Math.max(Ge,At*(1048576>At?2:1.125)>>>0),At!=0&&(Ge=Math.max(Ge,256)),At=L.Na,L.Na=new Uint8Array(Ge),0<L.Ra&&L.Na.set(At.subarray(0,L.Ra),0)),L.Na.subarray&&V.subarray)L.Na.set(V.subarray(se,se+pe),Re);else for(Ge=0;Ge<pe;Ge++)L.Na[Re+Ge]=V[se+Ge];return L.Ra=Math.max(L.Ra,Re+pe),pe},Va(L,V,se){if(se===1?V+=L.position:se===2&&(L.node.mode&61440)===32768&&(V+=L.node.Ra),0>V)throw new dt(28);return V},ib(L,V,se,pe,Re){if((L.node.mode&61440)!==32768)throw new dt(43);if(L=L.node.Na,Re&2||!L||L.buffer!==T.buffer){Re=!0,pe=65536*Math.ceil(V/65536);var Ge=Dh(65536,pe);if(Ge&&N.fill(0,Ge,Ge+pe),pe=Ge,!pe)throw new dt(48);L&&((0<se||se+V<L.length)&&(L.subarray?L=L.subarray(se,se+V):L=Array.prototype.slice.call(L,se,se+V)),T.set(L,pe))}else Re=!1,pe=L.byteOffset;return{Kb:pe,Ab:Re}},jb(L,V,se,pe){return Ft.Ma.write(L,V,0,pe,se,!1),0}}},xn=(L,V)=>{var se=0;return L&&(se|=365),V&&(se|=146),se},ke=null,$e={},yt=[],Ct=1,_t=null,Lt=!1,zt=!0,Jt={},dt=class{name="ErrnoError";constructor(L){this.Pa=L}},pr=class{gb={};node=null;get flags(){return this.gb.flags}set flags(L){this.gb.flags=L}get position(){return this.gb.position}set position(L){this.gb.position=L}},Kr=class{La={};Ma={};ab=null;constructor(L,V,se,pe){L||=this,this.parent=L,this.Xa=L.Xa,this.id=Ct++,this.name=V,this.mode=se,this.rdev=pe,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(L){L?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(L){L?this.mode|=146:this.mode&=-147}};function Hn(L,V={}){if(!L)throw new dt(44);V.nb??(V.nb=!0),L.charAt(0)==="/"||(L="//"+L);var se=0;e:for(;40>se;se++){L=L.split("/").filter(kn=>!!kn);for(var pe=ke,Re="/",Ge=0;Ge<L.length;Ge++){var At=Ge===L.length-1;if(At&&V.parent)break;if(L[Ge]!==".")if(L[Ge]==="..")Re=ht(Re),pe=pe.parent;else{Re=_e(Re+"/"+L[Ge]);try{pe=Bs(pe,L[Ge])}catch(kn){if(kn?.Pa===44&&At&&V.Jb)return{path:Re};throw kn}if(!pe.ab||At&&!V.nb||(pe=pe.ab.root),(pe.mode&61440)===40960&&(!At||V.$a)){if(!pe.La.readlink)throw new dt(52);pe=pe.La.readlink(pe),pe.charAt(0)==="/"||(pe=ht(Re)+"/"+pe),L=pe+"/"+L.slice(Ge+1).join("/");continue e}}}return{path:Re,node:pe}}throw new dt(32)}function Ls(L){for(var V;;){if(L===L.parent)return L=L.Xa.zb,V?L[L.length-1]!=="/"?`${L}/${V}`:L+V:L;V=V?`${L.name}/${V}`:L.name,L=L.parent}}function cn(L,V){for(var se=0,pe=0;pe<V.length;pe++)se=(se<<5)-se+V.charCodeAt(pe)|0;return(L+se>>>0)%_t.length}function Ji(L){var V=cn(L.parent.id,L.name);if(_t[V]===L)_t[V]=L.bb;else for(V=_t[V];V;){if(V.bb===L){V.bb=L.bb;break}V=V.bb}}function Bs(L,V){var se=wr(L.mode)?(se=Er(L,"x"))?se:L.La.lookup?0:2:54;if(se)throw new dt(se);for(se=_t[cn(L.id,V)];se;se=se.bb){var pe=se.name;if(se.parent.id===L.id&&pe===V)return se}return L.La.lookup(L,V)}function $s(L,V,se,pe){return L=new Kr(L,V,se,pe),V=cn(L.parent.id,L.name),L.bb=_t[V],_t[V]=L}function wr(L){return(L&61440)===16384}function ts(L){var V=["r","w","rw"][L&3];return L&512&&(V+="w"),V}function Er(L,V){if(zt)return 0;if(!V.includes("r")||L.mode&292){if(V.includes("w")&&!(L.mode&146)||V.includes("x")&&!(L.mode&73))return 2}else return 2;return 0}function Bt(L,V){if(!wr(L.mode))return 54;try{return Bs(L,V),20}catch{}return Er(L,"wx")}function Bi(L,V,se){try{var pe=Bs(L,V)}catch(Re){return Re.Pa}if(L=Er(L,"wx"))return L;if(se){if(!wr(pe.mode))return 54;if(pe===pe.parent||Ls(pe)==="/")return 10}else if(wr(pe.mode))return 31;return 0}function ys(L){if(!L)throw new dt(63);return L}function Jn(L){if(L=yt[L],!L)throw new dt(8);return L}function ns(L,V=-1){if(L=Object.assign(new pr,L),V==-1)e:{for(V=0;4096>=V;V++)if(!yt[V])break e;throw new dt(33)}return L.fd=V,yt[V]=L}function ji(L,V=-1){return L=ns(L,V),L.Ma?.Rb?.(L),L}function ft(L,V,se){var pe=L?.Ma.Ua;L=pe?L:V,pe??=V.La.Ua,ys(pe),pe(L,se)}var Cn={open(L){L.Ma=$e[L.node.rdev].Ma,L.Ma.open?.(L)},Va(){throw new dt(70)}};function Wn(L,V){$e[L]={Ma:V}}function Xn(L,V){var se=V==="/";if(se&&ke)throw new dt(10);if(!se&&V){var pe=Hn(V,{nb:!1});if(V=pe.path,pe=pe.node,pe.ab)throw new dt(10);if(!wr(pe.mode))throw new dt(54)}V={type:L,Wb:{},zb:V,Ib:[]},L=L.Xa(V),L.Xa=V,V.root=L,se?ke=L:pe&&(pe.ab=V,pe.Xa&&pe.Xa.Ib.push(V))}function sr(L,V,se){var pe=Hn(L,{parent:!0}).node;if(L=ot(L),!L)throw new dt(28);if(L==="."||L==="..")throw new dt(20);var Re=Bt(pe,L);if(Re)throw new dt(Re);if(!pe.La.hb)throw new dt(63);return pe.La.hb(pe,L,V,se)}function da(L,V=438){return sr(L,V&4095|32768,0)}function Hr(L,V=511){return sr(L,V&1023|16384,0)}function cs(L,V,se){typeof se>"u"&&(se=V,V=438),sr(L,V|8192,se)}function zr(L,V){if(!Ht(L))throw new dt(44);var se=Hn(V,{parent:!0}).node;if(!se)throw new dt(44);V=ot(V);var pe=Bt(se,V);if(pe)throw new dt(pe);if(!se.La.symlink)throw new dt(63);se.La.symlink(se,V,L)}function Zi(L){var V=Hn(L,{parent:!0}).node;L=ot(L);var se=Bs(V,L),pe=Bi(V,L,!0);if(pe)throw new dt(pe);if(!V.La.rmdir)throw new dt(63);if(se.ab)throw new dt(10);V.La.rmdir(V,L),Ji(se)}function Ir(L){var V=Hn(L,{parent:!0}).node;if(!V)throw new dt(44);L=ot(L);var se=Bs(V,L),pe=Bi(V,L,!1);if(pe)throw new dt(pe);if(!V.La.unlink)throw new dt(63);if(se.ab)throw new dt(10);V.La.unlink(V,L),Ji(se)}function si(L,V){return L=Hn(L,{$a:!V}).node,ys(L.La.Ta)(L)}function rs(L,V,se,pe){ft(L,V,{mode:se&4095|V.mode&-4096,ctime:Date.now(),Fb:pe})}function st(L,V){L=typeof L=="string"?Hn(L,{$a:!0}).node:L,rs(null,L,V)}function gt(L,V,se){if(wr(V.mode))throw new dt(31);if((V.mode&61440)!==32768)throw new dt(28);var pe=Er(V,"w");if(pe)throw new dt(pe);ft(L,V,{size:se,timestamp:Date.now()})}function Pt(L,V,se=438){if(L==="")throw new dt(44);if(typeof V=="string"){var pe={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[V];if(typeof pe>"u")throw Error(`Unknown file open mode: ${V}`);V=pe}if(se=V&64?se&4095|32768:0,typeof L=="object")pe=L;else{var Re=L.endsWith("/");L=Hn(L,{$a:!(V&131072),Jb:!0}),pe=L.node,L=L.path}var Ge=!1;if(V&64)if(pe){if(V&128)throw new dt(20)}else{if(Re)throw new dt(31);pe=sr(L,se|511,0),Ge=!0}if(!pe)throw new dt(44);if((pe.mode&61440)===8192&&(V&=-513),V&65536&&!wr(pe.mode))throw new dt(54);if(!Ge&&(Re=pe?(pe.mode&61440)===40960?32:wr(pe.mode)&&(ts(V)!=="r"||V&576)?31:Er(pe,ts(V)):44))throw new dt(Re);return V&512&&!Ge&&(Re=pe,Re=typeof Re=="string"?Hn(Re,{$a:!0}).node:Re,gt(null,Re,0)),V&=-131713,Re=ns({node:pe,path:Ls(pe),flags:V,seekable:!0,position:0,Ma:pe.Ma,Lb:[],error:!1}),Re.Ma.open&&Re.Ma.open(Re),Ge&&st(pe,se&511),!u.logReadFiles||V&1||L in Jt||(Jt[L]=1),Re}function Gt(L){if(L.fd===null)throw new dt(8);L.ob&&(L.ob=null);try{L.Ma.close&&L.Ma.close(L)}catch(V){throw V}finally{yt[L.fd]=null}L.fd=null}function Tn(L,V,se){if(L.fd===null)throw new dt(8);if(!L.seekable||!L.Ma.Va)throw new dt(70);if(se!=0&&se!=1&&se!=2)throw new dt(28);L.position=L.Ma.Va(L,V,se),L.Lb=[]}function mr(L,V,se,pe,Re){if(0>pe||0>Re)throw new dt(28);if(L.fd===null)throw new dt(8);if((L.flags&2097155)===1)throw new dt(8);if(wr(L.node.mode))throw new dt(31);if(!L.Ma.read)throw new dt(28);var Ge=typeof Re<"u";if(!Ge)Re=L.position;else if(!L.seekable)throw new dt(70);return V=L.Ma.read(L,V,se,pe,Re),Ge||(L.position+=V),V}function ci(L,V,se,pe,Re){if(0>pe||0>Re)throw new dt(28);if(L.fd===null)throw new dt(8);if((L.flags&2097155)===0)throw new dt(8);if(wr(L.node.mode))throw new dt(31);if(!L.Ma.write)throw new dt(28);L.seekable&&L.flags&1024&&Tn(L,0,2);var Ge=typeof Re<"u";if(!Ge)Re=L.position;else if(!L.seekable)throw new dt(70);return V=L.Ma.write(L,V,se,pe,Re,void 0),Ge||(L.position+=V),V}function Co(L){var V,se=Pt(L,se||0);L=si(L).size;var pe=new Uint8Array(L);return mr(se,pe,0,L,0),V=pe,Gt(se),V}function Ei(L,V,se){L=_e("/dev/"+L);var pe=xn(!!V,!!se);Ei.yb??(Ei.yb=64);var Re=Ei.yb++<<8|0;Wn(Re,{open(Ge){Ge.seekable=!1},close(){se?.buffer?.length&&se(10)},read(Ge,At,kn,_n){for(var Qn=0,Nr=0;Nr<_n;Nr++){try{var ii=V()}catch{throw new dt(29)}if(ii===void 0&&Qn===0)throw new dt(6);if(ii==null)break;Qn++,At[kn+Nr]=ii}return Qn&&(Ge.node.atime=Date.now()),Qn},write(Ge,At,kn,_n){for(var Qn=0;Qn<_n;Qn++)try{se(At[kn+Qn])}catch{throw new dt(29)}return _n&&(Ge.node.mtime=Ge.node.ctime=Date.now()),Qn}}),cs(L,pe,Re)}var jn={};function ko(L,V,se){if(V.charAt(0)==="/")return V;if(L=L===-100?"/":Jn(L).path,V.length==0){if(!se)throw new dt(44);return L}return L+"/"+V}function ui(L,V){z[L>>2]=V.dev,z[L+4>>2]=V.mode,U[L+8>>2]=V.nlink,z[L+12>>2]=V.uid,z[L+16>>2]=V.gid,z[L+20>>2]=V.rdev,q[L+24>>3]=BigInt(V.size),z[L+32>>2]=4096,z[L+36>>2]=V.blocks;var se=V.atime.getTime(),pe=V.mtime.getTime(),Re=V.ctime.getTime();return q[L+40>>3]=BigInt(Math.floor(se/1e3)),U[L+48>>2]=se%1e3*1e6,q[L+56>>3]=BigInt(Math.floor(pe/1e3)),U[L+64>>2]=pe%1e3*1e6,q[L+72>>3]=BigInt(Math.floor(Re/1e3)),U[L+80>>2]=Re%1e3*1e6,q[L+88>>3]=BigInt(V.ino),0}var ea=void 0,ju=()=>{var L=z[+ea>>2];return ea+=4,L},ja=0,ta=[0,31,60,91,121,152,182,213,244,274,305,335],Ii=[0,31,59,90,120,151,181,212,243,273,304,334],cc={},Oh=L=>{D=L,ze||0<ja||(u.onExit?.(L),F=!0),y(L,new xe(L))},Fh=L=>{if(!F)try{if(L(),!(ze||0<ja))try{D=L=D,Oh(L)}catch(V){V instanceof xe||V=="unwind"||y(1,V)}}catch(V){V instanceof xe||V=="unwind"||y(1,V)}},Ea={},If=()=>{if(!bd){var L={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},V;for(V in Ea)Ea[V]===void 0?delete L[V]:L[V]=Ea[V];var se=[];for(V in L)se.push(`${V}=${L[V]}`);bd=se}return bd},bd,el=L=>{var V=Ut(L)+1,se=Ni(V);return en(L,N,se,V),se},vd=(L,V,se,pe)=>{var Re={string:Qn=>{var Nr=0;return Qn!=null&&Qn!==0&&(Nr=el(Qn)),Nr},array:Qn=>{var Nr=Ni(Qn.length);return T.set(Qn,Nr),Nr}};L=u["_"+L];var Ge=[],At=0;if(pe)for(var kn=0;kn<pe.length;kn++){var _n=Re[se[kn]];_n?(At===0&&(At=fi()),Ge[kn]=_n(pe[kn])):Ge[kn]=pe[kn]}return se=L(...Ge),se=(function(Qn){return At!==0&&Eu(At),V==="string"?Qn?Le(N,Qn):"":V==="boolean"?!!Qn:Qn})(se)},wd=0,Sd=(L,V)=>(V=V==1?Ni(L.length):uc(L.length),L.subarray||L.slice||(L=new Uint8Array(L)),N.set(L,V),V),Ll,Cd=[],hl,di=L=>{Ll.delete(hl.get(L)),hl.set(L,null),Cd.push(L)},no=(L,V)=>{if(!Ll){Ll=new WeakMap;var se=hl.length;if(Ll)for(var pe=0;pe<0+se;pe++){var Re=hl.get(pe);Re&&Ll.set(Re,pe)}}if(se=Ll.get(L)||0)return se;if(Cd.length)se=Cd.pop();else{try{hl.grow(1)}catch(_n){throw _n instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":_n}se=hl.length-1}try{hl.set(se,L)}catch(_n){if(!(_n instanceof TypeError))throw _n;if(typeof WebAssembly.Function=="function"){var Ge=WebAssembly.Function;pe={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},Re={parameters:[],results:V[0]=="v"?[]:[pe[V[0]]]};for(var At=1;At<V.length;++At)Re.parameters.push(pe[V[At]]);V=new Ge(Re,L)}else{pe=[1],Re=V.slice(0,1),V=V.slice(1),At={i:127,p:127,j:126,f:125,d:124,e:111},pe.push(96);var kn=V.length;128>kn?pe.push(kn):pe.push(kn%128|128,kn>>7);for(Ge of V)pe.push(At[Ge]);Re=="v"?pe.push(0):pe.push(1,At[Re]),V=[0,97,115,109,1,0,0,0,1],Ge=pe.length,128>Ge?V.push(Ge):V.push(Ge%128|128,Ge>>7),V.push(...pe),V.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),V=new WebAssembly.Module(new Uint8Array(V)),V=new WebAssembly.Instance(V,{e:{f:L}}).exports.f}hl.set(se,V)}return Ll.set(L,se),se};_t=Array(4096),Xn(Ft,"/"),Hr("/tmp"),Hr("/home"),Hr("/home/web_user"),(function(){Hr("/dev"),Wn(259,{read:()=>0,write:(pe,Re,Ge,At)=>At,Va:()=>0}),cs("/dev/null",259),rn(1280,sn),rn(1536,Fn),cs("/dev/tty",1280),cs("/dev/tty1",1536);var L=new Uint8Array(1024),V=0,se=()=>(V===0&&(kt(L),V=L.byteLength),L[--V]);Ei("random",se),Ei("urandom",se),Hr("/dev/shm"),Hr("/dev/shm/tmp")})(),(function(){Hr("/proc");var L=Hr("/proc/self");Hr("/proc/self/fd"),Xn({Xa(){var V=$s(L,"fd",16895,73);return V.Ma={Va:Ft.Ma.Va},V.La={lookup(se,pe){se=+pe;var Re=Jn(se);return se={parent:null,Xa:{zb:"fake"},La:{readlink:()=>Re.path},id:se+1},se.parent=se},readdir(){return Array.from(yt.entries()).filter(([,se])=>se).map(([se])=>se.toString())}},V}},"/proc/self/fd")})(),Ft.vb=new dt(44),Ft.vb.stack="<generic error, no stack>";var Vc={a:(L,V,se,pe)=>Q(`Assertion failed: ${L?Le(N,L):""}, at: `+[V?V?Le(N,V):"":"unknown filename",se,pe?pe?Le(N,pe):"":"unknown function"]),i:function(L,V){try{return L=L?Le(N,L):"",st(L,V),0}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},L:function(L,V,se){try{if(V=V?Le(N,V):"",V=ko(L,V),se&-8)return-28;var pe=Hn(V,{$a:!0}).node;return pe?(L="",se&4&&(L+="r"),se&2&&(L+="w"),se&1&&(L+="x"),L&&Er(pe,L)?-2:0):-44}catch(Re){if(typeof jn>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Pa}},j:function(L,V){try{var se=Jn(L);return rs(se,se.node,V,!1),0}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Pa}},h:function(L){try{var V=Jn(L);return ft(V,V.node,{timestamp:Date.now(),Fb:!1}),0}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},b:function(L,V,se){ea=se;try{var pe=Jn(L);switch(V){case 0:var Re=ju();if(0>Re)break;for(;yt[Re];)Re++;return ji(pe,Re).fd;case 1:case 2:return 0;case 3:return pe.flags;case 4:return Re=ju(),pe.flags|=Re,0;case 12:return Re=ju(),P[Re+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(Ge){if(typeof jn>"u"||Ge.name!=="ErrnoError")throw Ge;return-Ge.Pa}},g:function(L,V){try{var se=Jn(L),pe=se.node,Re=se.Ma.Ta;L=Re?se:pe,Re??=pe.La.Ta,ys(Re);var Ge=Re(L);return ui(V,Ge)}catch(At){if(typeof jn>"u"||At.name!=="ErrnoError")throw At;return-At.Pa}},H:function(L,V){V=-9007199254740992>V||9007199254740992<V?NaN:Number(V);try{if(isNaN(V))return 61;var se=Jn(L);if(0>V||(se.flags&2097155)===0)throw new dt(28);return gt(se,se.node,V),0}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Pa}},G:function(L,V){try{if(V===0)return-28;var se=Ut("/")+1;return V<se?-68:(en("/",N,L,V),se)}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Pa}},K:function(L,V){try{return L=L?Le(N,L):"",ui(V,si(L,!0))}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},C:function(L,V,se){try{return V=V?Le(N,V):"",V=ko(L,V),Hr(V,se),0}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Pa}},J:function(L,V,se,pe){try{V=V?Le(N,V):"";var Re=pe&256;return V=ko(L,V,pe&4096),ui(se,Re?si(V,!0):si(V))}catch(Ge){if(typeof jn>"u"||Ge.name!=="ErrnoError")throw Ge;return-Ge.Pa}},x:function(L,V,se,pe){ea=pe;try{V=V?Le(N,V):"",V=ko(L,V);var Re=pe?ju():0;return Pt(V,se,Re).fd}catch(Ge){if(typeof jn>"u"||Ge.name!=="ErrnoError")throw Ge;return-Ge.Pa}},v:function(L,V,se,pe){try{if(V=V?Le(N,V):"",V=ko(L,V),0>=pe)return-28;var Re=Hn(V).node;if(!Re)throw new dt(44);if(!Re.La.readlink)throw new dt(28);var Ge=Re.La.readlink(Re),At=Math.min(pe,Ut(Ge)),kn=T[se+At];return en(Ge,N,se,pe+1),T[se+At]=kn,At}catch(_n){if(typeof jn>"u"||_n.name!=="ErrnoError")throw _n;return-_n.Pa}},u:function(L){try{return L=L?Le(N,L):"",Zi(L),0}catch(V){if(typeof jn>"u"||V.name!=="ErrnoError")throw V;return-V.Pa}},f:function(L,V){try{return L=L?Le(N,L):"",ui(V,si(L))}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},r:function(L,V,se){try{return V=V?Le(N,V):"",V=ko(L,V),se===0?Ir(V):se===512?Zi(V):Q("Invalid flags passed to unlinkat"),0}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return-pe.Pa}},q:function(L,V,se){try{V=V?Le(N,V):"",V=ko(L,V,!0);var pe=Date.now(),Re,Ge;if(se){var At=U[se>>2]+4294967296*z[se+4>>2],kn=z[se+8>>2];kn==1073741823?Re=pe:kn==1073741822?Re=null:Re=1e3*At+kn/1e6,se+=16,At=U[se>>2]+4294967296*z[se+4>>2],kn=z[se+8>>2],kn==1073741823?Ge=pe:kn==1073741822?Ge=null:Ge=1e3*At+kn/1e6}else Ge=Re=pe;if((Ge??Re)!==null){L=Re;var _n=Hn(V,{$a:!0}).node;ys(_n.La.Ua)(_n,{atime:L,mtime:Ge})}return 0}catch(Qn){if(typeof jn>"u"||Qn.name!=="ErrnoError")throw Qn;return-Qn.Pa}},m:()=>Q(""),l:()=>{ze=!1,ja=0},A:function(L,V){L=-9007199254740992>L||9007199254740992<L?NaN:Number(L),L=new Date(1e3*L),z[V>>2]=L.getSeconds(),z[V+4>>2]=L.getMinutes(),z[V+8>>2]=L.getHours(),z[V+12>>2]=L.getDate(),z[V+16>>2]=L.getMonth(),z[V+20>>2]=L.getFullYear()-1900,z[V+24>>2]=L.getDay();var se=L.getFullYear();z[V+28>>2]=(se%4!==0||se%100===0&&se%400!==0?Ii:ta)[L.getMonth()]+L.getDate()-1|0,z[V+36>>2]=-(60*L.getTimezoneOffset()),se=new Date(L.getFullYear(),6,1).getTimezoneOffset();var pe=new Date(L.getFullYear(),0,1).getTimezoneOffset();z[V+32>>2]=(se!=pe&&L.getTimezoneOffset()==Math.min(pe,se))|0},y:function(L,V,se,pe,Re,Ge,At){Re=-9007199254740992>Re||9007199254740992<Re?NaN:Number(Re);try{if(isNaN(Re))return 61;var kn=Jn(pe);if((V&2)!==0&&(se&2)===0&&(kn.flags&2097155)!==2)throw new dt(2);if((kn.flags&2097155)===1)throw new dt(2);if(!kn.Ma.ib)throw new dt(43);if(!L)throw new dt(28);var _n=kn.Ma.ib(kn,L,Re,V,se),Qn=_n.Kb;return z[Ge>>2]=_n.Ab,U[At>>2]=Qn,0}catch(Nr){if(typeof jn>"u"||Nr.name!=="ErrnoError")throw Nr;return-Nr.Pa}},z:function(L,V,se,pe,Re,Ge){Ge=-9007199254740992>Ge||9007199254740992<Ge?NaN:Number(Ge);try{var At=Jn(Re);if(se&2){if(se=Ge,(At.node.mode&61440)!==32768)throw new dt(43);if(!(pe&2)){var kn=N.slice(L,L+V);At.Ma.jb&&At.Ma.jb(At,kn,se,V,pe)}}}catch(_n){if(typeof jn>"u"||_n.name!=="ErrnoError")throw _n;return-_n.Pa}},n:(L,V)=>{if(cc[L]&&(clearTimeout(cc[L].id),delete cc[L]),!V)return 0;var se=setTimeout(()=>{delete cc[L],Fh(()=>Nf(L,performance.now()))},V);return cc[L]={id:se,Xb:V},0},B:(L,V,se,pe)=>{var Re=new Date().getFullYear(),Ge=new Date(Re,0,1).getTimezoneOffset();Re=new Date(Re,6,1).getTimezoneOffset(),U[L>>2]=60*Math.max(Ge,Re),z[V>>2]=+(Ge!=Re),V=At=>{var kn=Math.abs(At);return`UTC${0<=At?"-":"+"}${String(Math.floor(kn/60)).padStart(2,"0")}${String(kn%60).padStart(2,"0")}`},L=V(Ge),V=V(Re),Re<Ge?(en(L,N,se,17),en(V,N,pe,17)):(en(L,N,pe,17),en(V,N,se,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:L=>{var V=N.length;if(L>>>=0,2147483648<L)return!1;for(var se=1;4>=se;se*=2){var pe=V*(1+.2/se);pe=Math.min(pe,L+100663296);e:{pe=(Math.min(2147483648,65536*Math.ceil(Math.max(L,pe)/65536))-O.buffer.byteLength+65535)/65536|0;try{O.grow(pe),ne();var Re=1;break e}catch{}Re=void 0}if(Re)return!0}return!1},E:(L,V)=>{var se=0;return If().forEach((pe,Re)=>{var Ge=V+se;for(Re=U[L+4*Re>>2]=Ge,Ge=0;Ge<pe.length;++Ge)T[Re++]=pe.charCodeAt(Ge);T[Re]=0,se+=pe.length+1}),0},F:(L,V)=>{var se=If();U[L>>2]=se.length;var pe=0;return se.forEach(Re=>pe+=Re.length+1),U[V>>2]=pe,0},e:function(L){try{var V=Jn(L);return Gt(V),0}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return se.Pa}},p:function(L,V){try{var se=Jn(L);return T[V]=se.tty?2:wr(se.mode)?3:(se.mode&61440)===40960?7:4,P[V+2>>1]=0,q[V+8>>3]=BigInt(0),q[V+16>>3]=BigInt(0),0}catch(pe){if(typeof jn>"u"||pe.name!=="ErrnoError")throw pe;return pe.Pa}},w:function(L,V,se,pe){try{e:{var Re=Jn(L);L=V;for(var Ge,At=V=0;At<se;At++){var kn=U[L>>2],_n=U[L+4>>2];L+=8;var Qn=mr(Re,T,kn,_n,Ge);if(0>Qn){var Nr=-1;break e}if(V+=Qn,Qn<_n)break;typeof Ge<"u"&&(Ge+=Qn)}Nr=V}return U[pe>>2]=Nr,0}catch(ii){if(typeof jn>"u"||ii.name!=="ErrnoError")throw ii;return ii.Pa}},D:function(L,V,se,pe){V=-9007199254740992>V||9007199254740992<V?NaN:Number(V);try{if(isNaN(V))return 61;var Re=Jn(L);return Tn(Re,V,se),q[pe>>3]=BigInt(Re.position),Re.ob&&V===0&&se===0&&(Re.ob=null),0}catch(Ge){if(typeof jn>"u"||Ge.name!=="ErrnoError")throw Ge;return Ge.Pa}},I:function(L){try{var V=Jn(L);return V.Ma?.fsync?V.Ma.fsync(V):0}catch(se){if(typeof jn>"u"||se.name!=="ErrnoError")throw se;return se.Pa}},t:function(L,V,se,pe){try{e:{var Re=Jn(L);L=V;for(var Ge,At=V=0;At<se;At++){var kn=U[L>>2],_n=U[L+4>>2];L+=8;var Qn=ci(Re,T,kn,_n,Ge);if(0>Qn){var Nr=-1;break e}if(V+=Qn,Qn<_n)break;typeof Ge<"u"&&(Ge+=Qn)}Nr=V}return U[pe>>2]=Nr,0}catch(ii){if(typeof jn>"u"||ii.name!=="ErrnoError")throw ii;return ii.Pa}},k:Oh},mn;(async function(){function L(se){return mn=se.exports,O=mn.M,ne(),hl=mn.O,K--,u.monitorRunDependencies?.(K),K==0&&H&&(se=H,H=null,se()),mn}K++,u.monitorRunDependencies?.(K);var V={a:Vc};return u.instantiateWasm?new Promise(se=>{u.instantiateWasm(V,(pe,Re)=>{L(pe),se(pe.exports)})}):(X??=u.locateFile?u.locateFile("sql-wasm.wasm",x):x+"sql-wasm.wasm",L((await Ae(V)).instance))})(),u._sqlite3_free=L=>(u._sqlite3_free=mn.P)(L),u._sqlite3_value_text=L=>(u._sqlite3_value_text=mn.Q)(L),u._sqlite3_prepare_v2=(L,V,se,pe,Re)=>(u._sqlite3_prepare_v2=mn.R)(L,V,se,pe,Re),u._sqlite3_step=L=>(u._sqlite3_step=mn.S)(L),u._sqlite3_reset=L=>(u._sqlite3_reset=mn.T)(L),u._sqlite3_exec=(L,V,se,pe,Re)=>(u._sqlite3_exec=mn.U)(L,V,se,pe,Re),u._sqlite3_finalize=L=>(u._sqlite3_finalize=mn.V)(L),u._sqlite3_column_name=(L,V)=>(u._sqlite3_column_name=mn.W)(L,V),u._sqlite3_column_text=(L,V)=>(u._sqlite3_column_text=mn.X)(L,V),u._sqlite3_column_type=(L,V)=>(u._sqlite3_column_type=mn.Y)(L,V),u._sqlite3_errmsg=L=>(u._sqlite3_errmsg=mn.Z)(L),u._sqlite3_clear_bindings=L=>(u._sqlite3_clear_bindings=mn._)(L),u._sqlite3_value_blob=L=>(u._sqlite3_value_blob=mn.$)(L),u._sqlite3_value_bytes=L=>(u._sqlite3_value_bytes=mn.aa)(L),u._sqlite3_value_double=L=>(u._sqlite3_value_double=mn.ba)(L),u._sqlite3_value_int=L=>(u._sqlite3_value_int=mn.ca)(L),u._sqlite3_value_type=L=>(u._sqlite3_value_type=mn.da)(L),u._sqlite3_result_blob=(L,V,se,pe)=>(u._sqlite3_result_blob=mn.ea)(L,V,se,pe),u._sqlite3_result_double=(L,V)=>(u._sqlite3_result_double=mn.fa)(L,V),u._sqlite3_result_error=(L,V,se)=>(u._sqlite3_result_error=mn.ga)(L,V,se),u._sqlite3_result_int=(L,V)=>(u._sqlite3_result_int=mn.ha)(L,V),u._sqlite3_result_int64=(L,V)=>(u._sqlite3_result_int64=mn.ia)(L,V),u._sqlite3_result_null=L=>(u._sqlite3_result_null=mn.ja)(L),u._sqlite3_result_text=(L,V,se,pe)=>(u._sqlite3_result_text=mn.ka)(L,V,se,pe),u._sqlite3_aggregate_context=(L,V)=>(u._sqlite3_aggregate_context=mn.la)(L,V),u._sqlite3_column_count=L=>(u._sqlite3_column_count=mn.ma)(L),u._sqlite3_data_count=L=>(u._sqlite3_data_count=mn.na)(L),u._sqlite3_column_blob=(L,V)=>(u._sqlite3_column_blob=mn.oa)(L,V),u._sqlite3_column_bytes=(L,V)=>(u._sqlite3_column_bytes=mn.pa)(L,V),u._sqlite3_column_double=(L,V)=>(u._sqlite3_column_double=mn.qa)(L,V),u._sqlite3_bind_blob=(L,V,se,pe,Re)=>(u._sqlite3_bind_blob=mn.ra)(L,V,se,pe,Re),u._sqlite3_bind_double=(L,V,se)=>(u._sqlite3_bind_double=mn.sa)(L,V,se),u._sqlite3_bind_int=(L,V,se)=>(u._sqlite3_bind_int=mn.ta)(L,V,se),u._sqlite3_bind_text=(L,V,se,pe,Re)=>(u._sqlite3_bind_text=mn.ua)(L,V,se,pe,Re),u._sqlite3_bind_parameter_index=(L,V)=>(u._sqlite3_bind_parameter_index=mn.va)(L,V),u._sqlite3_sql=L=>(u._sqlite3_sql=mn.wa)(L),u._sqlite3_normalized_sql=L=>(u._sqlite3_normalized_sql=mn.xa)(L),u._sqlite3_changes=L=>(u._sqlite3_changes=mn.ya)(L),u._sqlite3_close_v2=L=>(u._sqlite3_close_v2=mn.za)(L),u._sqlite3_create_function_v2=(L,V,se,pe,Re,Ge,At,kn,_n)=>(u._sqlite3_create_function_v2=mn.Aa)(L,V,se,pe,Re,Ge,At,kn,_n),u._sqlite3_update_hook=(L,V,se)=>(u._sqlite3_update_hook=mn.Ba)(L,V,se),u._sqlite3_open=(L,V)=>(u._sqlite3_open=mn.Ca)(L,V);var uc=u._malloc=L=>(uc=u._malloc=mn.Da)(L),Ln=u._free=L=>(Ln=u._free=mn.Ea)(L);u._RegisterExtensionFunctions=L=>(u._RegisterExtensionFunctions=mn.Fa)(L);var Dh=(L,V)=>(Dh=mn.Ga)(L,V),Nf=(L,V)=>(Nf=mn.Ha)(L,V),Eu=L=>(Eu=mn.Ia)(L),Ni=L=>(Ni=mn.Ja)(L),fi=()=>(fi=mn.Ka)();u.stackSave=()=>fi(),u.stackRestore=L=>Eu(L),u.stackAlloc=L=>Ni(L),u.cwrap=(L,V,se,pe)=>{var Re=!se||se.every(Ge=>Ge==="number"||Ge==="boolean");return V!=="string"&&Re&&!pe?u["_"+L]:(...Ge)=>vd(L,V,se,Ge)},u.addFunction=no,u.removeFunction=di,u.UTF8ToString=nt,u.ALLOC_NORMAL=wd,u.allocate=Sd,u.allocateUTF8OnStack=el;function kd(){function L(){if(u.calledRun=!0,!F){if(!u.noFSInit&&!Lt){var V,se;Lt=!0,pe??=u.stdin,V??=u.stdout,se??=u.stderr,pe?Ei("stdin",pe):zr("/dev/tty","/dev/stdin"),V?Ei("stdout",null,V):zr("/dev/tty","/dev/stdout"),se?Ei("stderr",null,se):zr("/dev/tty1","/dev/stderr"),Pt("/dev/stdin",0),Pt("/dev/stdout",1),Pt("/dev/stderr",1)}if(mn.N(),zt=!1,u.onRuntimeInitialized?.(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var pe=u.postRun.shift();me.unshift(pe)}Be(me)}}if(0<K)H=kd;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)je();Be(ve),0<K?H=kd:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),L()},1)):L()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return kd(),l}),n)};t.exports=r,t.exports.default=r})(m_)),m_.exports}var mWe=pWe();const qae=oc(mWe);function Gae({query:t,schemaContext:e}){const[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,l]=C.useState(null),[c,u]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const x=await qae({locateFile:v=>`/${v}`});l(x),u(!1)}catch(x){console.error("Failed to initialize SQL.js:",x),u(!1)}})()},[]);const d=async()=>{if(!(!t?.trim()||!a)){r(!0),i(null);try{const y=new a.Database;e?.trim()&&y.run(e);const x=y.exec(t);if(x.length>0){const v=x[0];i({success:!0,output:"Success",parsedData:{columns:v.columns,rows:v.values}})}else i({success:!0,output:"Query executed successfully. No rows returned.",parsedData:{columns:[],rows:[]}});y.close()}catch(y){i({success:!1,error:y.message||"Execution failed"})}finally{r(!1)}}},f=y=>{navigator.clipboard.writeText(y)},A=()=>{if(!s?.parsedData)return{columns:[],rows:[]};const{columns:y,rows:x}=s.parsedData;return{columns:y||[],rows:x||[]}},{columns:m,rows:g}=A();return o.jsxs("div",{style:{marginTop:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:o.jsx("button",{onClick:d,disabled:n||!t?.trim()||c,style:{fontSize:"0.85rem",padding:"0.6rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"8px",cursor:n||!t?.trim()||c?"not-allowed":"pointer",opacity:n||!t?.trim()||c?.6:1,fontWeight:500},children:c?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-small"}),"Initializing..."]}):n?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-small"}),"Running..."]}):o.jsxs(o.Fragment,{children:[o.jsx(hD,{size:16}),"Run & Visualize"]})})}),!c&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.75rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.4rem 0.75rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx(wi,{size:12}),"WASM Sandbox Active"]})]}),s&&o.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",borderBottom:"1px solid var(--border-color)",background:"var(--bg-card)"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:s.success?o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:16,color:"#10b981"}),o.jsx("span",{style:{fontWeight:500,color:"#10b981"},children:"Results"})]}):o.jsxs(o.Fragment,{children:[o.jsx(kr,{size:16,color:"#ef4444"}),o.jsx("span",{style:{fontWeight:500,color:"#ef4444"},children:"Error"})]})}),s.success&&g.length>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[g.length," row(s) returned"]}),o.jsxs("button",{onClick:()=>f(s.output||""),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.3rem 0.6rem",fontSize:"0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"4px",color:"var(--text-muted)",cursor:"pointer"},children:[o.jsx(iZ,{size:12})," Copy"]})]})]}),o.jsx("div",{style:{padding:"1rem"},children:s.success?o.jsx(o.Fragment,{children:m.length>0&&g.length>0?o.jsx("div",{style:{overflowX:"auto",maxHeight:"350px"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[o.jsx("thead",{children:o.jsx("tr",{style:{background:"rgba(59, 130, 246, 0.1)",position:"sticky",top:0},children:m.map((y,x)=>o.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",fontWeight:600,color:"#3b82f6",whiteSpace:"nowrap"},children:y},x))})}),o.jsx("tbody",{children:g.map((y,x)=>o.jsx("tr",{style:{background:x%2===0?"transparent":"rgba(255,255,255,0.02)"},children:y.map((v,w)=>o.jsx("td",{style:{padding:"0.6rem 1rem",borderBottom:"1px solid var(--border-color)",color:v===null||v===""?"var(--text-muted)":"var(--text-main)"},children:v===null?"NULL":v},w))},x))})]})}):o.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)",fontStyle:"italic"},children:"Query executed successfully. No rows returned."})}):o.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:o.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:s.error||s.output||"Unknown error"})})})]})]})}function gWe(t){if(!t||!t.trim())return{tables:[]};const e=[],n=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?[`"']?(\w+)[`"']?\s*\(([\s\S]*?)\)\s*;/gi;let r;for(;(r=n.exec(t))!==null;){const s=r[1],i=r[2],a=[],l=i.match(/PRIMARY\s+KEY\s*\(([^)]+)\)/i),c=l?l[1].split(",").map(m=>m.trim().replace(/[`"']/g,"").toLowerCase()):[],u=/FOREIGN\s+KEY\s*\(\s*[`"']?(\w+)[`"']?\s*\)\s*REFERENCES\s+[`"']?(\w+)[`"']?\s*\(\s*[`"']?(\w+)[`"']?\s*\)/gi,d={};let f;for(;(f=u.exec(i))!==null;)d[f[1].toLowerCase()]={table:f[2],column:f[3]};const A=i.split(`
`).map(m=>m.trim().replace(/,\s*$/,"")).filter(m=>m.length>0);for(const m of A){if(/^\s*(PRIMARY\s+KEY|FOREIGN\s+KEY|UNIQUE|CHECK|CONSTRAINT|INDEX|KEY\s)/i.test(m))continue;const g=m.match(/^[`"']?(\w+)[`"']?\s+(\w+(?:\s*\([^)]*\))?)\s*(.*)?$/i);if(!g)continue;const y=g[1],x=g[2],v=g[3]||"",w=c.includes(y.toLowerCase())||/PRIMARY\s+KEY/i.test(v),B=d.hasOwnProperty(y.toLowerCase());a.push({name:y,type:x,isPrimaryKey:w,isForeignKey:B,isNotNull:/NOT\s+NULL/i.test(v),isAutoIncrement:/AUTO_INCREMENT|AUTOINCREMENT/i.test(v),defaultValue:v.match(/DEFAULT\s+([^\s,]+)/i)?.[1]||null,references:B?d[y.toLowerCase()]:null})}a.length>0&&e.push({name:s,columns:a})}return{tables:e}}function yWe(t){const e=(t||"").toLowerCase();return e.includes("int")||e.includes("decimal")||e.includes("float")||e.includes("double")||e.includes("numeric")?o.jsx(sO,{size:12,color:"#f59e0b"}):e.includes("char")||e.includes("text")||e.includes("varchar")?o.jsx(Fye,{size:12,color:"#3b82f6"}):e.includes("date")||e.includes("time")||e.includes("timestamp")?o.jsx(k1,{size:12,color:"#8b5cf6"}):e.includes("bool")?o.jsx(oO,{size:12,color:"#10b981"}):o.jsx(sO,{size:12,color:"#64748b"})}function Kae({schema:t}){const[e,n]=C.useState(null),[r,s]=C.useState({});C.useEffect(()=>{if(t){const l=gWe(t);if(n(l),l.tables){const c={};l.tables.forEach(u=>c[u.name]=!0),s(c)}}},[t]);const i=l=>{s(c=>({...c,[l]:!c[l]}))};if(!e||!e.tables||e.tables.length===0)return o.jsxs("div",{className:"glass",style:{padding:"2rem",textAlign:"center",borderRadius:"16px"},children:[o.jsx(wi,{size:32,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem"},children:"No schema detected for this problem."})]});const a=[];return e.tables.forEach(l=>{l.columns.forEach(c=>{c.isForeignKey&&c.references&&a.push({from:l.name,fromCol:c.name,to:c.references.table,toCol:c.references.column})})}),o.jsxs("div",{className:"sql-visualizer animate-fadeIn",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",borderRadius:"10px",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:o.jsx(wi,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Database Map"}),o.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:["Interactive Entity Relationship View  ",e.tables.length," table(s) detected"]})]}),o.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:" Local Parse"})]}),a.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.08)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"#a78bfa",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Relationships"}),a.map((l,c)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"0.25rem"},children:[o.jsx("span",{style:{fontWeight:600,color:"#3b82f6"},children:l.from}),o.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",l.fromCol]}),o.jsx("span",{style:{color:"#f59e0b"},children:""}),o.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:l.to}),o.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",l.toCol]})]},c))]}),o.jsx("div",{className:"er-diagram-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:e.tables.map(l=>o.jsxs("div",{className:"glass table-card",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid var(--glass-border)",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",background:"var(--glass-bg)",transition:"all 0.3s ease"},children:[o.jsxs("div",{onClick:()=>i(l.name),style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderBottom:r[l.name]?"1px solid var(--glass-border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(hD,{size:18,color:"#3b82f6"}),o.jsx("span",{style:{fontWeight:700,fontSize:"1rem",letterSpacing:"-0.01em"},children:l.name}),o.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",background:"rgba(255,255,255,0.05)",padding:"0.15rem 0.5rem",borderRadius:"10px"},children:[l.columns.length," cols"]})]}),r[l.name]?o.jsx(Am,{size:16}):o.jsx(EA,{size:16})]}),r[l.name]&&o.jsx("div",{className:"table-columns",style:{padding:"0.5rem 0"},children:l.columns.map((c,u)=>o.jsxs("div",{className:"column-row",style:{padding:"0.6rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",borderBottom:u===l.columns.length-1?"none":"1px solid rgba(255,255,255,0.03)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.isPrimaryKey?o.jsx(iO,{size:14,color:"#f59e0b",title:"Primary Key"}):c.isForeignKey?o.jsx(B0e,{size:14,color:"#10b981",title:`FK  ${c.references?.table}`}):yWe(c.type),o.jsx("span",{style:{fontWeight:c.isPrimaryKey||c.isForeignKey?600:400},children:c.name}),c.isPrimaryKey&&o.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"PK"}),c.isForeignKey&&o.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"FK"}),c.isNotNull&&o.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"NN"})]}),o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem",fontFamily:"monospace"},children:c.type?.toLowerCase()})]},u))})]},l.name))}),o.jsx("style",{children:`
                .table-card:hover {
                    transform: translateY(-5px);
                    border-color: var(--primary);
                    box-shadow: 0 15px 35px rgba(59, 130, 246, 0.15);
                }
                .column-row:hover {
                    background: rgba(255, 255, 255, 0.05);
                }
                .sql-visualizer {
                    padding: 1.5rem;
                    background: rgba(15, 23, 42, 0.2);
                    border-radius: 20px;
                    border: 1px solid var(--border-color);
                }
            `})]})}function xWe(t){if(!t||!t.trim())return[];const e=t.trim(),n=[],r=e.replace(/\s+/g," "),s=r.match(/FROM\s+(.+?)(?:\s+WHERE|\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),i=r.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),a=r.match(/GROUP\s+BY\s+(.+?)(?:\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),l=r.match(/HAVING\s+(.+?)(?:\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),c=r.match(/ORDER\s+BY\s+(.+?)(?:\s+LIMIT|\s*;?\s*$)/i),u=r.match(/LIMIT\s+(\d+)/i),d=s?s[1].trim():null;if(!d)return n.push({stepName:"Execute",description:"Run the full query",query:e}),n;if(n.push({stepName:"1. FROM (Base Data)",description:`Load all rows from: ${d}`,query:`SELECT * FROM ${d};`}),i&&n.push({stepName:"2. WHERE (Filter)",description:`Apply filter: ${i[1].trim()}`,query:`SELECT * FROM ${d} WHERE ${i[1].trim()};`}),a){const g=a[1].trim();let y=`SELECT ${g}, COUNT(*) as count FROM ${d}`;i&&(y+=` WHERE ${i[1].trim()}`),y+=` GROUP BY ${g}`,l&&(y+=` HAVING ${l[1].trim()}`),y+=";",n.push({stepName:"3. GROUP BY (Aggregate)",description:`Group rows by: ${g}${l?` with HAVING: ${l[1].trim()}`:""}`,query:y})}let f=r.replace(/\s*ORDER\s+BY\s+.+?(?=\s+LIMIT|\s*;?\s*$)/i,"").replace(/\s*LIMIT\s+\d+/i,"").replace(/;?\s*$/,";");f!==e.replace(/;?\s*$/,";")&&n.push({stepName:`${a?"4":i?"3":"2"}. SELECT (Projection)`,description:"Apply column selection and expressions",query:f}),(c||u)&&n.push({stepName:`${n.length+1}. Final Result`,description:`${c?`Sort by: ${c[1].trim()}`:""}${u?` | Limit: ${u[1]}`:""}`,query:e.replace(/;?\s*$/,";")});const A=n[n.length-1]?.query?.replace(/;\s*$/,"").trim().toLowerCase(),m=e.replace(/;\s*$/,"").trim().toLowerCase();return A!==m&&n.push({stepName:`${n.length+1}. Final Result`,description:"Complete query output",query:e.replace(/;?\s*$/,";")}),n}function Xae({query:t,schema:e}){const[n,r]=C.useState([]),[s,i]=C.useState(0),[a,l]=C.useState(!1),[c,u]=C.useState({}),[d,f]=C.useState(null),[A,m]=C.useState(null),[g,y]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const j=await qae({locateFile:I=>`/${I}`});m(j),y(!0)}catch(j){console.error("Failed to init SQL.js:",j)}})()},[]);const x=(k,j)=>{try{const I=k.exec(j);return I.length>0?{columns:I[0].columns,rows:I[0].values}:{columns:[],rows:[]}}catch(I){return{error:I.message}}},v=()=>{if(!(!t||!A)){l(!0),f(null),u({});try{const k=xWe(t);if(k.length===0){f("Could not break down the query. Make sure it is a valid SELECT statement."),l(!1);return}r(k),i(0);const j=new A.Database;e?.trim()&&j.run(e);const I={};for(let O=0;O<k.length;O++)I[O]=x(j,k[O].query);u(I),j.close()}catch(k){f(k.message||"Failed to analyze query.")}finally{l(!1)}}},w=()=>{s<n.length-1&&i(s+1)},B=()=>{s>0&&i(s-1)};return o.jsxs("div",{className:"sql-debugger-panel animate-fadeIn",children:[o.jsxs("div",{className:"debugger-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.25rem",borderBottom:"1px solid var(--border-color)",background:"rgba(59, 130, 246, 0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(Gl,{size:20,color:"#3b82f6"}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:"Step-Wise Debugger"}),o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Trace query logic layer by layer"})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[g&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx(wi,{size:12})," WASM"]}),o.jsxs("button",{onClick:v,disabled:a||!g,style:{padding:"0.6rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:a||!g?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",opacity:a||!g?.6:1},children:[o.jsx(dd,{size:16})," ",n.length>0?"Restart Trace":"Trace Query"]})]})]}),d&&o.jsxs("div",{style:{padding:"1rem 1.25rem",background:"rgba(239, 68, 68, 0.1)",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(nO,{size:16,color:"#ef4444"}),o.jsx("span",{style:{fontSize:"0.85rem",color:"#f87171"},children:d})]}),o.jsxs("div",{className:"debugger-content",style:{display:"grid",gridTemplateColumns:"300px 1fr",minHeight:"400px"},children:[o.jsxs("div",{className:"steps-sidebar",style:{borderRight:"1px solid var(--border-color)",background:"rgba(0,0,0,0.1)"},children:[n.map((k,j)=>o.jsxs("div",{onClick:()=>i(j),style:{padding:"1rem 1.25rem",borderBottom:"1px solid rgba(255,255,255,0.03)",cursor:"pointer",background:s===j?"rgba(59, 130, 246, 0.15)":"transparent",position:"relative",display:"flex",alignItems:"flex-start",gap:"0.75rem",transition:"background 0.2s"},children:[o.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:c[j]?.error?"#ef4444":j<=s?"#10b981":"var(--bg-dark)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:800,color:"white",marginTop:"2px",flexShrink:0},children:c[j]?.error?"!":j<s?o.jsx(Jge,{size:14}):j+1}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:k.stepName}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:k.description}),c[j]&&!c[j].error&&o.jsxs("div",{style:{fontSize:"0.65rem",color:"#10b981",marginTop:"3px"},children:[c[j].rows.length," row(s)"]})]}),s===j&&o.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"60%",background:"#3b82f6",borderRadius:"3px 0 0 3px"}})]},j)),n.length===0&&o.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.85rem"},children:[o.jsx(ua,{size:32,style:{marginBottom:"1rem",opacity:.2}}),o.jsx("p",{children:'Click "Trace Query" to analyze SQL logic steps.'})]})]}),o.jsx("div",{className:"result-area",style:{display:"flex",flexDirection:"column"},children:n.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"step-query-info",style:{padding:"1rem 1.5rem",background:"rgba(0,0,0,0.2)"},children:[o.jsx("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#10b981",fontWeight:700,marginBottom:"0.5rem"},children:"Current Operation Query"}),o.jsx("div",{style:{background:"#020617",padding:"0.75rem 1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.85rem",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.05)",whiteSpace:"pre-wrap"},children:n[s]?.query})]}),o.jsx("div",{className:"step-data-preview",style:{flex:1,padding:"1.5rem",overflow:"auto"},children:c[s]?.error?o.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:o.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:c[s].error})}):c[s]?o.jsx("div",{className:"debugger-table-container",children:c[s].columns.length>0&&c[s].rows.length>0?o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[o.jsx("thead",{children:o.jsx("tr",{style:{background:"rgba(255,255,255,0.05)"},children:c[s].columns.map((k,j)=>o.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",color:"#3b82f6",fontWeight:600},children:k},j))})}),o.jsx("tbody",{children:c[s].rows.map((k,j)=>o.jsx("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:k.map((I,O)=>o.jsx("td",{style:{padding:"0.75rem",color:I===null?"var(--text-muted)":"var(--text-main)"},children:I===null?"NULL":String(I)},O))},j))})]}):o.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Query executed successfully. No rows returned."})}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[o.jsx(nO,{size:32}),o.jsx("p",{style:{marginTop:"1rem"},children:"No data for this step."})]})}),o.jsxs("div",{className:"debugger-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Step ",s+1," of ",n.length]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[s>0&&o.jsx("button",{onClick:B,style:{padding:"0.5rem 1.25rem",background:"rgba(255,255,255,0.05)",color:"var(--text-main)",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Previous"}),s<n.length-1&&o.jsxs("button",{onClick:w,style:{padding:"0.5rem 1.25rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next Step ",o.jsx(yye,{size:16})]})]})]})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,padding:"3rem",textAlign:"center"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:o.jsx(Gl,{size:32,color:"#3b82f6"})}),o.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Ready to Debug"}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",maxWidth:"400px"},children:"The debugger will break your SQL query into physical execution steps so you can see how data flows through JOINs and WHERE clauses."})]})})]}),o.jsx("style",{children:`
                .sql-debugger-panel {
                    border-radius: 20px;
                    overflow: hidden;
                    background: var(--bg-card);
                    border: 1px solid var(--border-color);
                    box-shadow: var(--glass-shadow);
                }
                .debugger-table-container {
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                    overflow: hidden;
                    background: #020617;
                }
            `})]})}const bh=Object.create(null);bh.open="0";bh.close="1";bh.ping="2";bh.pong="3";bh.message="4";bh.upgrade="5";bh.noop="6";const xB=Object.create(null);Object.keys(bh).forEach(t=>{xB[bh[t]]=t});const cF={type:"error",data:"parser error"},Yae=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Jae=typeof ArrayBuffer=="function",Zae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,dP=({type:t,data:e},n,r)=>Yae&&e instanceof Blob?n?r(e):$H(e,r):Jae&&(e instanceof ArrayBuffer||Zae(e))?n?r(e):$H(new Blob([e]),r):r(bh[t]+(e||"")),$H=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function PH(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let g_;function bWe(t,e){if(Yae&&t.data instanceof Blob)return t.data.arrayBuffer().then(PH).then(e);if(Jae&&(t.data instanceof ArrayBuffer||Zae(t.data)))return e(PH(t.data));dP(t,!1,n=>{g_||(g_=new TextEncoder),e(g_.encode(n))})}const zH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<zH.length;t++)n2[zH.charCodeAt(t)]=t;const vWe=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=n2[t.charCodeAt(r)],a=n2[t.charCodeAt(r+1)],l=n2[t.charCodeAt(r+2)],c=n2[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},wWe=typeof ArrayBuffer=="function",fP=(t,e)=>{if(typeof t!="string")return{type:"message",data:eoe(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:SWe(t.substring(1),e)}:xB[n]?t.length>1?{type:xB[n],data:t.substring(1)}:{type:xB[n]}:cF},SWe=(t,e)=>{if(wWe){const n=vWe(t);return eoe(n,e)}else return{base64:!0,data:t}},eoe=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,toe="",CWe=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{dP(i,!1,l=>{r[a]=l,++s===n&&e(r.join(toe))})})},kWe=(t,e)=>{const n=t.split(toe),r=[];for(let s=0;s<n.length;s++){const i=fP(n[s],e);if(r.push(i),i.type==="error")break}return r};function BWe(){return new TransformStream({transform(t,e){bWe(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let y_;function XC(t){return t.reduce((e,n)=>e+n.length,0)}function YC(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function jWe(t,e){y_||(y_=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(XC(n)<1)break;const c=YC(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(XC(n)<2)break;const c=YC(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(XC(n)<8)break;const c=YC(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(cF);break}s=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(XC(n)<s)break;const c=YC(n,s);l.enqueue(fP(i?c:y_.decode(c),e)),r=0}if(s===0||s>t){l.enqueue(cF);break}}}})}const noe=4;function Xa(t){if(t)return EWe(t)}function EWe(t){for(var e in Xa.prototype)t[e]=Xa.prototype[e];return t}Xa.prototype.on=Xa.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Xa.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Xa.prototype.off=Xa.prototype.removeListener=Xa.prototype.removeAllListeners=Xa.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Xa.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Xa.prototype.emitReserved=Xa.prototype.emit;Xa.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Xa.prototype.hasListeners=function(t){return!!this.listeners(t).length};const uI=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ju=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),IWe="arraybuffer";function roe(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const NWe=Ju.setTimeout,TWe=Ju.clearTimeout;function dI(t,e){e.useNativeTimers?(t.setTimeoutFn=NWe.bind(Ju),t.clearTimeoutFn=TWe.bind(Ju)):(t.setTimeoutFn=Ju.setTimeout.bind(Ju),t.clearTimeoutFn=Ju.clearTimeout.bind(Ju))}const _We=1.33;function RWe(t){return typeof t=="string"?OWe(t):Math.ceil((t.byteLength||t.size)*_We)}function OWe(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function soe(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function FWe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function DWe(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class LWe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class hP extends Xa{constructor(e){super(),this.writable=!1,dI(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new LWe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=fP(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=FWe(e);return n.length?"?"+n:""}}class $We extends hP{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};kWe(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,CWe(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=soe()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let ioe=!1;try{ioe=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PWe=ioe;function zWe(){}class UWe extends $We{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class uh extends Xa{constructor(e,n,r){super(),this.createRequest=e,dI(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=roe(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=uh.requestsCount++,uh.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zWe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete uh.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}uh.requestsCount=0;uh.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",UH);else if(typeof addEventListener=="function"){const t="onpagehide"in Ju?"pagehide":"unload";addEventListener(t,UH,!1)}}function UH(){for(let t in uh.requests)uh.requests.hasOwnProperty(t)&&uh.requests[t].abort()}const MWe=(function(){const t=aoe({xdomain:!1});return t&&t.responseType!==null})();class QWe extends UWe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=MWe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new uh(aoe,this.uri(),e)}}function aoe(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||PWe))return new XMLHttpRequest}catch{}if(!e)try{return new Ju[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ooe=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class HWe extends hP{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=ooe?{}:roe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;dP(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&uI(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=soe()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const x_=Ju.WebSocket||Ju.MozWebSocket;class WWe extends HWe{createSocket(e,n,r){return ooe?new x_(e,n,r):n?new x_(e,n):new x_(e)}doWrite(e,n){this.ws.send(n)}}class VWe extends hP{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=jWe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=BWe();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&uI(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const qWe={websocket:WWe,webtransport:VWe,polling:QWe},GWe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,KWe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uF(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=GWe.exec(t||""),i={},a=14;for(;a--;)i[KWe[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=XWe(i,i.path),i.queryKey=YWe(i,i.query),i}function XWe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function YWe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const dF=typeof addEventListener=="function"&&typeof removeEventListener=="function",bB=[];dF&&addEventListener("offline",()=>{bB.forEach(t=>t())},!1);class om extends Xa{constructor(e,n){if(super(),this.binaryType=IWe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=uF(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=uF(n.host).host);dI(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=DWe(this.opts.query)),dF&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bB.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=noe,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&om.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",om.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=RWe(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,uI(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(om.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),dF&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=bB.indexOf(this._offlineEventListener);r!==-1&&bB.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}om.protocol=noe;class JWe extends om{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;om.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;om.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const A=new Error("probe error");A.transport=n.name,this.emitReserved("upgradeError",A)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const a=f=>{const A=new Error("probe error: "+f);A.transport=n.name,i(),this.emitReserved("upgradeError",A)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){n&&f.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let ZWe=class extends JWe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>qWe[s]).filter(s=>!!s)),super(e,r)}};function eVe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=uF(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const tVe=typeof ArrayBuffer=="function",nVe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,loe=Object.prototype.toString,rVe=typeof Blob=="function"||typeof Blob<"u"&&loe.call(Blob)==="[object BlobConstructor]",sVe=typeof File=="function"||typeof File<"u"&&loe.call(File)==="[object FileConstructor]";function AP(t){return tVe&&(t instanceof ArrayBuffer||nVe(t))||rVe&&t instanceof Blob||sVe&&t instanceof File}function vB(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(vB(t[n]))return!0;return!1}if(AP(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return vB(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&vB(t[n]))return!0;return!1}function iVe(t){const e=[],n=t.data,r=t;return r.data=fF(n,e),r.attachments=e.length,{packet:r,buffers:e}}function fF(t,e){if(!t)return t;if(AP(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=fF(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=fF(t[r],e));return n}return t}function aVe(t,e){return t.data=hF(t.data,e),delete t.attachments,t}function hF(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=hF(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=hF(t[n],e));return t}const oVe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var qr;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(qr||(qr={}));class lVe{constructor(e){this.replacer=e}encode(e){return(e.type===qr.EVENT||e.type===qr.ACK)&&vB(e)?this.encodeAsBinary({type:e.type===qr.EVENT?qr.BINARY_EVENT:qr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===qr.BINARY_EVENT||e.type===qr.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=iVe(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}class pP extends Xa{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===qr.BINARY_EVENT;r||n.type===qr.BINARY_ACK?(n.type=r?qr.EVENT:qr.ACK,this.reconstructor=new cVe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(AP(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(qr[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===qr.BINARY_EVENT||r.type===qr.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(pP.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case qr.CONNECT:return MH(n);case qr.DISCONNECT:return n===void 0;case qr.CONNECT_ERROR:return typeof n=="string"||MH(n);case qr.EVENT:case qr.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&oVe.indexOf(n[0])===-1);case qr.ACK:case qr.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class cVe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=aVe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function MH(t){return Object.prototype.toString.call(t)==="[object Object]"}const uVe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pP,Encoder:lVe,get PacketType(){return qr}},Symbol.toStringTag,{value:"Module"}));function Xd(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const dVe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class coe extends Xa{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Xd(e,"open",this.onopen.bind(this)),Xd(e,"packet",this.onpacket.bind(this)),Xd(e,"error",this.onerror.bind(this)),Xd(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(dVe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:qr.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),a.id=d}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,l)=>a?s(a):r(l);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>(this._queue[0],s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qr.EVENT:case qr.BINARY_EVENT:this.onevent(e);break;case qr.ACK:case qr.BINARY_ACK:this.onack(e);break;case qr.DISCONNECT:this.ondisconnect();break;case qr.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:qr.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ab(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ab.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Ab.prototype.reset=function(){this.attempts=0};Ab.prototype.setMin=function(t){this.ms=t};Ab.prototype.setMax=function(t){this.max=t};Ab.prototype.setJitter=function(t){this.jitter=t};class AF extends Xa{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,dI(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ab({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||uVe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ZWe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Xd(n,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=Xd(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Xd(e,"ping",this.onping.bind(this)),Xd(e,"data",this.ondata.bind(this)),Xd(e,"error",this.onerror.bind(this)),Xd(e,"close",this.onclose.bind(this)),Xd(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){uI(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new coe(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Cv={};function wB(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=eVe(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Cv[s]&&i in Cv[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new AF(r,e):(Cv[s]||(Cv[s]=new AF(r,e)),c=Cv[s]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(wB,{Manager:AF,Socket:coe,io:wB,connect:wB});class fVe{constructor(){this.socket=null,this.isConnected=!1}connect(){if(this.socket)return this.socket;const e="http://localhost:8000";return this.socket=wB(e,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,transports:["websocket","polling"]}),this.socket.on("connect",()=>{console.log(" Connected to WebSocket"),this.isConnected=!0}),this.socket.on("disconnect",()=>{console.log(" Disconnected from WebSocket"),this.isConnected=!1}),this.socket.on("connect_error",n=>{console.error(" WebSocket connection error:",n)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinMonitoring(e,n,r=null){this.socket||this.connect(),this.socket.emit("join_monitoring",{userId:e,role:n,mentorId:r})}emitSubmissionStarted(e,n,r,s,i,a=!1){this.socket||this.connect(),this.socket.emit("submission_started",{studentId:e,studentName:n,problemId:r,problemTitle:s,mentorId:i,isProctored:a})}emitSubmissionCompleted(e,n,r,s,i,a,l){this.socket||this.connect(),this.socket.emit("submission_completed",{studentId:e,studentName:n,problemId:r,problemTitle:s,mentorId:i,status:a,score:l})}emitProctoringViolation(e,n,r,s,i){this.socket||this.connect(),this.socket.emit("proctoring_violation",{studentId:e,studentName:n,violationType:r,severity:s,mentorId:i})}emitProgressUpdate(e,n,r,s){this.socket||this.connect(),this.socket.emit("progress_update",{studentId:e,problemId:n,progress:r,mentorId:s})}emitTestFailed(e,n,r,s,i){this.socket||this.connect(),this.socket.emit("test_failed",{studentId:e,studentName:n,problemId:r,testname:s,mentorId:i})}onLiveUpdate(e){this.socket||this.connect(),this.socket.on("live_update",e)}onLiveAlert(e){this.socket||this.connect(),this.socket.on("live_alert",e)}onMonitoringConnected(e){this.socket||this.connect(),this.socket.on("monitoring_connected",e)}removeListener(e){this.socket&&this.socket.off(e)}emit(e,n){this.socket||this.connect(),this.socket.emit(e,n)}on(e,n){this.socket||this.connect(),this.socket.on(e,n)}}const as=new fVe,b_="http://localhost:8000/api",fg={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}},QH={aptitude:{label:"Aptitude",icon:Zr},verbal:{label:"Verbal",icon:qi},logical:{label:"Logical",icon:Gl},coding:{label:"Coding",icon:Lr},sql:{label:"SQL",icon:wi}};function hVe(t,e){const n=[...t];let r=n.length;const s=()=>(e=(e*9301+49297)%233280,e/233280);for(;r--;){const i=Math.floor(s()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function AVe(t,e){let n=0;const r=`${t}-${e}`;for(let s=0;s<r.length;s++)n=(n<<5)-n+r.charCodeAt(s)|0;return Math.abs(n)}function pVe({test:t,user:e,onClose:n,onComplete:r}){const[s,i]=C.useState(0),[a,l]=C.useState(0),[c,u]=C.useState({}),[d,f]=C.useState((t.duration||180)*60),[A,m]=C.useState(0),[g,y]=C.useState(!1),[x,v]=C.useState(""),[w,B]=C.useState(!1),[k,j]=C.useState(null),[I,O]=C.useState(!1),[F,D]=C.useState(!1),[T,N]=C.useState({}),[P,z]=C.useState(""),[U,ee]=C.useState(!1),[q,Z]=C.useState(!0),[G,ne]=C.useState(350),K=C.useRef(null),H=C.useRef(!1),[Q,X]=C.useState({}),[re,le]=C.useState({}),[Ae,xe]=C.useState({}),[Be,me]=C.useState({}),[ve,je]=C.useState("validator"),ye=C.useRef(null),ze=C.useRef(c),at=C.useRef(A),ie=C.useRef(d),Le=C.useRef(!1),nt=t.proctoring||{},[Et,_e]=C.useState(!1),[ht,ot]=C.useState(!1),[$t,kt]=C.useState(null),[Ht,Sn]=C.useState(!1),[Ut,en]=C.useState(0),[fn,Qt]=C.useState(!1),[rn,Yt]=C.useState(!1),[sn,Fn]=C.useState(nt.enabled&&nt.enableVideoAudio),[Ft,xn]=C.useState(!1),[ke,$e]=C.useState(0),[yt,Ct]=C.useState(0),_t=C.useRef(null),Lt=C.useRef(null),zt=C.useRef(null),Jt=C.useRef(null),dt=C.useRef(null),pr=C.useRef(0),Kr=C.useRef(0),Hn=C.useRef(0),[Ls,cn]=C.useState(0),Ji=C.useRef(0),Bs=C.useRef(!1),$s=C.useMemo(()=>{const st=t.questionsBySection||{};return["aptitude","verbal","logical","coding","sql"].filter(gt=>(st[gt]&&st[gt].length)>0)},[t.questionsBySection]),wr=C.useMemo(()=>{const st=t.questionsBySection||{},gt=AVe(e.id,t.id),Pt=[];return $s.forEach(Gt=>{const Tn=(st[Gt]||[]).map(mr=>({...mr,section:Gt}));Pt.push(...hVe(Tn,gt+Gt.length))}),Pt},[t.questionsBySection,$s,e.id,t.id]),ts=$s[s]||$s[0],Er=wr.filter(st=>st.section===ts),Bt=Er[a],Bi=wr.length;C.useEffect(()=>{ze.current=c},[c]),C.useEffect(()=>{at.current=A},[A]),C.useEffect(()=>{ie.current=d},[d]),C.useEffect(()=>{const st=async()=>{try{!document.fullscreenElement&&!Le.current&&await document.documentElement.requestFullscreen()}catch{}};st();const gt=()=>{!document.fullscreenElement&&!Le.current&&nt.enabled&&(v(" Fullscreen mode required! Re-entering..."),y(!0),setTimeout(()=>{Le.current||st(),y(!1)},1500))};return document.addEventListener("fullscreenchange",gt),t&&e&&as.emitSubmissionStarted(e.id,e.name||e.email,t.id,t.title,null,t.proctoring?.enabled||!1),()=>{document.removeEventListener("fullscreenchange",gt),document.fullscreenElement&&!Le.current&&document.exitFullscreen().catch(()=>{})}},[]),C.useEffect(()=>{if(!(k||!Bi))return ye.current=setInterval(()=>{f(st=>st<=1?(clearInterval(ye.current),sr(!0),0):st-1)},1e3),()=>clearInterval(ye.current)},[k,Bi]);const ys=t.maxTabSwitches??3;C.useEffect(()=>{const st=()=>{document.hidden&&!k&&m(gt=>{const Pt=gt+1;return as.emitProctoringViolation(e.id,e.name||e.email,"window_switch",Pt>=ys?"critical":"warning",null),Pt>=ys?(v(`Disqualified: max tab switches (${Pt}) exceeded.`),y(!0),setTimeout(()=>sr(!0),2e3)):(v(`Tab switch detected (${Pt}/${ys}).`),y(!0),setTimeout(()=>y(!1),3e3)),Pt})};return document.addEventListener("visibilitychange",st),()=>document.removeEventListener("visibilitychange",st)},[k,ys]);const Jn=async()=>{try{const st=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240},audio:!0});if(kt(st),_e(!0),ot(!0),Qt(!0),Yt(!1),_t.current&&(_t.current.srcObject=st,_t.current.play().catch(()=>{})),nt.detectCameraBlocking&&(zt.current=setInterval(ji,1500)),nt.detectPhoneUsage||nt.detectCameraBlocking)try{await _D();const gt=await Wae.load();Jt.current=gt,dt.current=setInterval(ns,3e3)}catch(gt){console.warn("Failed to load object detector:",gt)}return!0}catch(st){return console.error("Camera access denied:",st),Yt(!0),Qt(!1),!1}};C.useEffect(()=>{if(!(nt.enabled&&nt.enableVideoAudio))return(!nt.enabled||!nt.enableVideoAudio)&&(Qt(!0),Fn(!1)),()=>{zt.current&&clearInterval(zt.current),dt.current&&clearInterval(dt.current),$t&&$t.getTracks().forEach(st=>st.stop())}},[nt.enabled,nt.enableVideoAudio]),C.useEffect(()=>{Bs.current=Ht},[Ht]);const ns=C.useCallback(async()=>{if(!(!Jt.current||!_t.current||_t.current.readyState!==4))try{const st=await Jt.current.detect(_t.current);nt.detectPhoneUsage&&(st.find(Gt=>Gt.class==="cell phone"&&Gt.score>.6)?(xn(!0),$e(Gt=>{const Tn=Gt+1;return Kr.current=Tn,v(` Mobile Phone Detected! (${Tn})`),y(!0),setTimeout(()=>y(!1),3e3),as.emitProctoringViolation(e.id,e.name||e.email,"phone_detected",Tn>=3?"critical":"warning",null),Tn})):xn(!1)),!st.find(Pt=>Pt.class==="person"&&Pt.score>.5)&&!Bs.current&&cn(Pt=>{const Gt=Pt+1;return Ji.current=Gt,Gt%3===0&&as.emitProctoringViolation(e.id,e.name||e.email,"face_not_detected",Gt>=9?"critical":"warning",null),Gt})}catch(st){console.error("Detection error:",st)}},[nt.detectPhoneUsage]),ji=C.useCallback(()=>{if(!_t.current||!Lt.current)return;const st=_t.current,gt=Lt.current;if(st.readyState<2||st.videoWidth===0)return;const Pt=gt.getContext("2d");gt.width=st.videoWidth||320,gt.height=st.videoHeight||240,Pt.drawImage(st,0,0,gt.width,gt.height);const Tn=Pt.getImageData(0,0,gt.width,gt.height).data;let mr=0,ci=0,Co=gt.width*gt.height;for(let ui=0;ui<Tn.length;ui+=4){const ea=(Tn[ui]+Tn[ui+1]+Tn[ui+2])/3;mr+=ea,ea<15&&ci++}const Ei=mr/Co,jn=ci/Co,ko=Ei<25||jn>.85;ko&&!Bs.current?(Bs.current=!0,Sn(!0),en(ui=>{const ea=ui+1;return pr.current=ea,v(` Camera blocked detected! Please uncover your camera. (${ea})`),y(!0),as.emitProctoringViolation(e.id,e.name||e.email,"camera_blocked",ea>=3?"critical":"warning",null),ea})):!ko&&Bs.current&&(Bs.current=!1,Sn(!1),y(!1))},[e]);C.useEffect(()=>{if(!nt.enabled||!nt.disableCopyPaste)return;const st=Gt=>{Gt.preventDefault(),Ct(Tn=>{const mr=Tn+1;return Hn.current=mr,v(` Copy attempt blocked! (${mr})`),y(!0),setTimeout(()=>y(!1),2e3),as.emitProctoringViolation(e.id,e.name||e.email,"copy_attempt",mr>=5?"critical":"warning",null),mr})},gt=Gt=>{Gt.preventDefault(),Ct(Tn=>{const mr=Tn+1;return Hn.current=mr,v(` Paste attempt blocked! (${mr})`),y(!0),setTimeout(()=>y(!1),2e3),as.emitProctoringViolation(e.id,e.name||e.email,"paste_attempt",mr>=5?"critical":"warning",null),mr})},Pt=Gt=>Gt.preventDefault();return document.addEventListener("copy",st),document.addEventListener("paste",gt),document.addEventListener("contextmenu",Pt),()=>{document.removeEventListener("copy",st),document.removeEventListener("paste",gt),document.removeEventListener("contextmenu",Pt)}},[nt.enabled,nt.disableCopyPaste]),C.useEffect(()=>{pr.current=Ut},[Ut]),C.useEffect(()=>{Kr.current=ke},[ke]),C.useEffect(()=>{Hn.current=yt},[yt]),C.useEffect(()=>{Ji.current=Ls},[Ls]);const ft=(st,gt)=>{u(Pt=>({...Pt,[st]:gt}))};C.useEffect(()=>{if(!Bt)return;if(Bt.questionType==="coding"||Bt.questionType==="sql"||Bt.type==="coding"||Bt.type==="SQL"){const gt=Bt.type==="SQL"||Bt.questionType==="sql"?"SQL":Bt.testCases?.language||"Python";if(!Be[Bt.id]){const Pt=Object.keys(fg).find(Gt=>Gt.toLowerCase()===gt.toLowerCase())||"Python";if(me(Gt=>({...Gt,[Bt.id]:Pt})),c[Bt.id]===void 0){const Gt=fg[Pt].defaultCode;u(Tn=>({...Tn,[Bt.id]:Gt}))}}}},[Bt?.id,Bt?.questionType,Bt?.starterCode,Bt?.testCases?.language]);const Cn=(st,gt)=>{c[st]&&(c[st],fg[Be[st]]?.defaultCode),me(Pt=>({...Pt,[st]:gt})),u(Pt=>({...Pt,[st]:fg[gt].defaultCode}))},Wn=async(st,gt,Pt,Gt)=>{N(Tn=>({...Tn,[st]:"Running..."})),X(Tn=>({...Tn,[st]:"output"}));try{const Tn=await Xe.post(`${b_}/run`,{code:gt,language:Pt,problemId:st,sqlSchema:Gt,stdin:re[st]||""});let mr=Tn.data.output||"";Tn.data.stderr&&(mr=mr?`${mr}

--- Errors ---
${Tn.data.stderr}`:Tn.data.stderr),N(ci=>({...ci,[st]:mr||Tn.data.error||"No output"}))}catch(Tn){N(mr=>({...mr,[st]:"Error: "+(Tn.response?.data?.error||Tn.message)}))}finally{D(!1)}},Xn=async()=>{if(Bt){ee(!0);try{const st=Bt.type==="SQL"||Bt.questionType==="sql",gt=Be[Bt.id]||(st?"SQL":"Python"),Pt=await Xe.post(`${b_}/hints`,{problemDescription:Bt.question,currentCode:c[Bt.id]||"",language:gt});z(Pt.data.hint)}catch{z("Unable to generate hint at this time.")}finally{ee(!1)}}},sr=async(st=!1)=>{if(!w&&!(!st&&Bi>0&&Object.keys(c).length<Bi&&!window.confirm(`You have ${Bi-Object.keys(c).length} unanswered. Submit anyway?`))){if(Le.current=!0,B(!0),$t&&$t.getTracks().forEach(gt=>gt.stop()),zt.current&&clearInterval(zt.current),dt.current&&clearInterval(dt.current),document.fullscreenElement)try{await document.exitFullscreen()}catch{}try{const gt=(t.duration||120)*60-ie.current;console.log("[Submit] Sending submission..."),e&&t&&as.emitSubmissionCompleted(e.id,e.name||e.email,t.id,t.title,null,"success",Math.round(Object.keys(ze.current).length/Bi*100));const Pt=await Xe.post(`${b_}/global-tests/${t.id}/submit`,{studentId:e.id,answers:ze.current,selectedLanguages:Be,timeSpent:gt,tabSwitches:at.current,copyPasteAttempts:Hn.current,cameraBlockedCount:pr.current,phoneDetectionCount:Kr.current,faceMissingCount:Ji.current,proctoringEnabled:nt.enabled||!1});console.log("[Submit] Response received:",JSON.stringify(Pt.data).substring(0,500));const Gt=Pt.data.submission||Pt.data;console.log("[Submit] submissionResult status:",Gt?.status,"score:",Gt?.score,"sectionScores:",JSON.stringify(Gt?.sectionScores)),Gt?(await new Promise(Tn=>setTimeout(Tn,200)),console.log("[Submit] Submission successful, returning to test list..."),B(!1),n(),r&&r(Gt)):(console.error("[Submit] No submission data in response"),B(!1),alert("Test submitted but no result data received. Please refresh the page."))}catch(gt){console.error("[Submit] Error:",gt),B(!1),alert(gt.response?.data?.error||"Submit failed. Please try again.")}}},da=st=>{const gt=Math.floor(st/60),Pt=st%60;return`${String(gt).padStart(2,"0")}:${String(Pt).padStart(2,"0")}`},Hr=()=>{a<Er.length-1?l(st=>st+1):s<$s.length-1&&(i(s+1),l(0))},cs=()=>{if(a>0)l(st=>st-1);else if(s>0){const st=$s[s-1],gt=wr.filter(Pt=>Pt.section===st).length;i(s-1),l(gt-1)}};if(I&&k){const st=k.sectionScores||{},gt=k.status==="passed";return o.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[o.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                    @keyframes confetti { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-100px) rotate(720deg); opacity: 0; } }
                `}),o.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${gt?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${gt?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[o.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:gt?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${gt?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:gt?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${gt?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:gt?"pulse 2s ease-in-out infinite":"none"},children:gt?o.jsx(_l,{size:40,color:"white"}):o.jsx(kr,{size:40,color:"white"})}),o.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:gt?" Congratulations!":"Test Completed"}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:gt?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),o.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[o.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:gt?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${gt?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[o.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:gt?"#10b981":"#ef4444",lineHeight:1},children:[k.score??k.overallPercentage,"%"]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),o.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[k.correctCount||0,"/",k.totalQuestions||0]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),o.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gl,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(st).map(([Pt,Gt])=>{const Tn=Gt>=70?"#10b981":Gt>=50?"#f59e0b":"#ef4444";return o.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:Tn},children:[Gt,"%"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:Pt})]},Pt)})})]}),o.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:o.jsx("button",{type:"button",onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:Pt=>Pt.target.style.transform="translateY(-2px)",onMouseOut:Pt=>Pt.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})}if(wr.length===0)return o.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"white"},children:["No questions available.",o.jsx("button",{onClick:n,style:{marginLeft:"1rem",padding:"0.5rem",cursor:"pointer"},children:"Close"})]});const zr=Bt?.questionType==="sql"||Bt?.questionType==="SQL"||Bt?.language==="SQL"||Bt?.type==="SQL",Zi=(Bt?.questionType==="coding"||Bt?.type==="coding"||!!Bt?.language)&&!zr,Ir=Be[Bt?.id]||(zr?"SQL":"Python"),si=Zi||zr?c[Bt?.id]??fg[Ir]?.defaultCode??"":"",rs=C.useMemo(()=>{if(!Bt)return{input:"N/A",output:"N/A"};if(Bt.sampleInput!==void 0&&Bt.expectedOutput!==void 0)return{input:String(Bt.sampleInput),output:String(Bt.expectedOutput)};if(Bt.testCases){if(Bt.questionType==="sql"||Bt.type==="SQL"){let Pt="N/A";if(Array.isArray(Bt.testCases)){const Gt=Bt.testCases[0];Gt&&(Pt=Gt.expected_output||Gt.expectedOutput||"N/A")}else Bt.testCases&&(Pt=Bt.testCases.expectedOutput||"N/A");return{input:"N/A",output:String(Pt)}}const st=Array.isArray(Bt.testCases)?Bt.testCases:Bt.testCases.cases||[],gt=st.find(Pt=>!Pt.isHidden)||st[0];if(gt){const Pt=gt.input??gt.sampleInput??"(empty)",Gt=gt.expected_output??gt.expectedOutput??"(empty)";return{input:String(Pt),output:String(Gt)}}}return{input:"N/A",output:"N/A"}},[Bt]);return o.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[g&&o.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,padding:"0.75rem 2rem",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#1f2937",textAlign:"center",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",boxShadow:"0 4px 20px rgba(245, 158, 11, 0.4)",animation:"slideDown 0.3s ease-out"},children:[o.jsx("style",{children:"@keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }"}),o.jsx(Pn,{size:20}),o.jsx("span",{style:{fontWeight:600},children:x})]}),w&&o.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.95)",zIndex:1e5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1.5rem"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",border:"4px solid rgba(139, 92, 246, 0.2)",borderTopColor:"#8b5cf6",animation:"spin 1s linear infinite"}}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),o.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.5rem",fontWeight:700},children:"Submitting Your Test..."}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"0.95rem"},children:"Please wait while we evaluate your answers"}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out infinite"}}),o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.2s infinite"}}),o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.4s infinite"}})]}),o.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }"})]}),sn&&nt.enabled&&nt.enableVideoAudio&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.98)",zIndex:100001,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b, #0f172a)",borderRadius:"20px",padding:"3rem",maxWidth:"500px",width:"100%",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(h2,{size:40,color:"#8b5cf6"})}),o.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.75rem",fontWeight:700,marginBottom:"0.75rem"},children:"Camera Access Required"}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"1rem",lineHeight:1.6},children:"This is a proctored test. You must allow camera and microphone access to continue."})]}),o.jsx("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"2rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[o.jsx(Vs,{size:20,color:"#f59e0b",style:{flexShrink:0,marginTop:"2px"}}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"#fbbf24",lineHeight:1.5},children:[o.jsx("strong",{children:"Proctoring features enabled:"}),o.jsxs("ul",{style:{margin:"0.5rem 0 0",paddingLeft:"1.25rem"},children:[nt.enableVideoAudio&&o.jsx("li",{children:"Camera & Audio monitoring"}),nt.detectCameraBlocking&&o.jsx("li",{children:"Camera obstruction detection"}),nt.detectPhoneUsage&&o.jsx("li",{children:"Phone usage detection"}),nt.disableCopyPaste&&o.jsx("li",{children:"Copy/Paste disabled"})]})]})]})}),rn&&o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(Pn,{size:20,color:"#ef4444"}),o.jsx("div",{style:{color:"#fca5a5",fontSize:"0.9rem"},children:"Camera access was denied. Please allow camera access in your browser settings and try again."})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[o.jsx("button",{onClick:n,style:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"rgba(255,255,255,0.7)",fontSize:"1rem",fontWeight:600,cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:async()=>{await Jn()&&Fn(!1)},style:{flex:2,padding:"1rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontSize:"1rem",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},children:[o.jsx(h2,{size:20})," Allow Camera & Start Test"]})]})]})}),Ht&&nt.enabled&&nt.detectCameraBlocking&&!sn&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(239, 68, 68, 0.95)",zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:o.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"20px",padding:"3rem",textAlign:"center",maxWidth:"500px"},children:[o.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",animation:"pulse 1.5s ease-in-out infinite"},children:o.jsx(sB,{size:50,color:"white"})}),o.jsx("h2",{style:{margin:0,color:"white",fontSize:"2rem",fontWeight:700,marginBottom:"1rem"},children:"Camera Blocked!"}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",lineHeight:1.6,marginBottom:"1.5rem"},children:"Your camera appears to be covered or obstructed. Please uncover your camera to continue the test."}),o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:20,color:"white"}),o.jsxs("span",{style:{color:"white",fontWeight:600},children:["Violations logged: ",Ut]})]})]})}),o.jsxs("header",{style:{padding:"0.75rem 2rem",borderBottom:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",paddingRight:"1.5rem",borderRight:"1px solid rgba(139,92,246,0.2)"},children:[o.jsx(Qo,{size:20,color:"#8b5cf6"}),o.jsx("span",{style:{fontWeight:700,fontSize:"1.1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Assessment"})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:$s.map((st,gt)=>{const Pt=QH[st]?.icon||Gl,Gt=s===gt;return o.jsxs("button",{type:"button",onClick:()=>{i(gt),l(0)},style:{padding:"0.5rem 1rem",borderRadius:10,border:Gt?"1px solid rgba(139,92,246,0.5)":"1px solid transparent",background:Gt?"linear-gradient(135deg, rgba(139,92,246,0.25), rgba(99,102,241,0.15))":"transparent",color:Gt?"#a78bfa":"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:Gt?600:500,display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},children:[o.jsx(Pt,{size:14}),QH[st]?.label||st]},st)})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[nt.enabled&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px"},children:[o.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"#fca5a5",fontWeight:600,letterSpacing:"0.5px"},children:"PROCTORED"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(139,92,246,0.1)",borderRadius:"8px",border:"1px solid rgba(139,92,246,0.2)"},children:[o.jsx(Nn,{size:14,color:"#a78bfa"}),o.jsxs("span",{style:{color:"#a78bfa",fontSize:"0.85rem",fontWeight:600},children:[Object.keys(c).length,"/",Bi]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:d<300?"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))":"linear-gradient(135deg, rgba(16,185,129,0.2), rgba(5,150,105,0.1))",borderRadius:10,border:`1px solid ${d<300?"rgba(239,68,68,0.4)":"rgba(16,185,129,0.4)"}`,boxShadow:d<300?"0 0 20px rgba(239,68,68,0.2)":"none"},children:[o.jsx(ls,{size:16,color:d<300?"#ef4444":"#10b981"}),o.jsx("span",{style:{fontVariantNumeric:"tabular-nums",color:d<300?"#fca5a5":"#6ee7b7",fontWeight:700,fontSize:"1rem"},children:da(d)})]})]})]}),o.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[o.jsx("div",{style:{width:"300px",background:"linear-gradient(180deg, rgba(15,23,42,0.95) 0%, rgba(30,41,59,0.9) 100%)",borderRight:"1px solid rgba(139,92,246,0.15)",display:"flex",flexDirection:"column",backdropFilter:"blur(12px)"},children:o.jsxs("div",{style:{flex:1,padding:"1.25rem",overflowY:"auto"},children:[nt.enabled&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))",border:"1px solid rgba(239,68,68,0.3)",borderRadius:10,padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#fca5a5",fontWeight:600,fontSize:"0.8rem",marginBottom:"1rem",letterSpacing:"0.5px"},children:[o.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),"PROCTORED MODE"]}),nt.enableVideoAudio&&o.jsxs("div",{style:{position:"relative",borderRadius:12,overflow:"hidden",border:"2px solid rgba(139,92,246,0.3)",background:"#000",marginBottom:"1rem",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:[o.jsx("video",{ref:_t,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",display:"block",transform:"scaleX(-1)",aspectRatio:"4/3",objectFit:"cover"}}),o.jsxs("div",{style:{position:"absolute",bottom:8,left:8,display:"flex",gap:4},children:[o.jsx("div",{style:{padding:5,borderRadius:"50%",background:Et?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:o.jsx(h2,{size:10,color:"white"})}),o.jsx("div",{style:{padding:5,borderRadius:"50%",background:ht?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:o.jsx(Uj,{size:10,color:"white"})})]}),o.jsxs("div",{style:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:20,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#10b981",animation:"pulse 2s infinite"}}),o.jsx("span",{style:{fontSize:"0.6rem",color:"white",fontWeight:600},children:"REC"})]})]}),o.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"0.8rem",background:"rgba(30,41,59,0.4)",padding:"1rem",borderRadius:12,border:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[o.jsx("span",{children:"Tab Switches:"}),o.jsxs("span",{style:{color:A>0?"#f59e0b":"#10b981",fontWeight:700},children:[A,"/",ys]})]}),nt.detectCameraBlocking&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[o.jsx("span",{children:"Cam Blocks:"}),o.jsx("span",{style:{color:Ut>0?"#ef4444":"#10b981",fontWeight:700},children:Ut})]}),nt.detectPhoneUsage&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[o.jsx("span",{children:"Phone Detected:"}),o.jsx("span",{style:{color:ke>0?"#ef4444":"#10b981",fontWeight:700},children:ke})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[o.jsx("span",{children:"Face Missing:"}),o.jsx("span",{style:{color:Ls>0?"#f59e0b":"#10b981",fontWeight:700},children:Ls})]})]}),o.jsxs("div",{style:{marginTop:"1.5rem"},children:[o.jsxs("h4",{style:{color:"rgba(239,68,68,0.9)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:14})," Proctoring Rules"]}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.75rem",color:"#94a3b8",lineHeight:1.6,display:"flex",flexDirection:"column",gap:"0.4rem"},children:[o.jsx("li",{children:"Do not switch tabs or windows."}),nt.enableVideoAudio&&o.jsx("li",{children:"Keep your camera and microphone on."}),nt.enforceFullscreen&&o.jsx("li",{children:"Do not exit fullscreen mode."}),nt.detectCameraBlocking&&o.jsx("li",{children:"Ensure your face is always visible."}),nt.detectPhoneUsage&&o.jsx("li",{children:"No mobile phones allowed."})]})]})]}),o.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:16})," Question Palette"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:Er.map((st,gt)=>o.jsx("button",{onClick:()=>l(gt),style:{width:36,height:36,borderRadius:8,border:a===gt?"2px solid #3b82f6":"1px solid rgba(139,92,246,0.3)",background:c[Er[gt].id]?"linear-gradient(135deg, #10b981, #06b6d4)":a===gt?"rgba(59,130,246,0.3)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem"},children:gt+1},gt))})]})}),!Zi&&!zr?o.jsx(o.Fragment,{children:o.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto",display:"flex",flexDirection:"column",maxWidth:"900px",margin:"0 auto",width:"100%"},children:[o.jsxs("div",{style:{marginBottom:"1rem",fontSize:"1rem",color:"#8b5cf6",fontWeight:600},children:["Question ",a+1," OF ",Er.length]}),o.jsx("h2",{style:{fontSize:"1.25rem",color:"white",lineHeight:1.6,marginBottom:"2rem"},children:Bt?.question}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(Bt?.options||[]).map((st,gt)=>o.jsxs("button",{onClick:()=>ft(Bt.id,st),style:{padding:"1.25rem",textAlign:"left",borderRadius:12,border:`1px solid ${c[Bt.id]===st?"#8b5cf6":"rgba(255,255,255,0.1)"}`,background:c[Bt.id]===st?"rgba(139,92,246,0.1)":"rgba(255,255,255,0.02)",color:"white",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s"},children:[o.jsx("div",{style:{width:28,height:28,borderRadius:"50%",border:"1px solid rgba(255,255,255,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",background:c[Bt.id]===st?"#8b5cf6":"transparent"},children:String.fromCharCode(65+gt)}),st]},gt))}),o.jsxs("div",{style:{marginTop:"auto",paddingTop:"2rem",display:"flex",justifyContent:"space-between"},children:[o.jsxs("button",{onClick:cs,disabled:s===0&&a===0,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(B1,{size:20})," Previous"]}),o.jsxs("button",{onClick:Hr,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"linear-gradient(135deg, #3b82f6, #6366f1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next ",o.jsx(hm,{size:20})]})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{width:"35%",minWidth:"350px",maxWidth:"450px",borderRight:"1px solid #334155",display:"flex",flexDirection:"column",background:"#0f172a"},children:o.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{background:"rgba(139, 92, 246, 0.15)",padding:"0.6rem",borderRadius:"10px"},children:o.jsx(qi,{size:20,color:"#8b5cf6"})}),o.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.2rem",fontWeight:700},children:"Problem Statement"})]}),o.jsx("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",background:Bt.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.1)":Bt.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.1)":"rgba(16, 185, 129, 0.1)",color:Bt.difficulty?.toLowerCase()==="hard"?"#ef4444":Bt.difficulty?.toLowerCase()==="medium"?"#f59e0b":"#10b981",border:`1px solid ${Bt.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.2)":Bt.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.2)":"rgba(16, 185, 129, 0.2)"}`},children:Bt.difficulty||"Medium"})]}),o.jsx("div",{style:{color:"#94a3b8",lineHeight:1.8,fontSize:"1rem",letterSpacing:"-0.01em"},children:Bt.question}),zr&&o.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#60a5fa"},children:[o.jsx(wi,{size:18}),o.jsx("span",{style:{fontWeight:700,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Database Schema"})]}),o.jsxs("div",{style:{background:"#0f172a",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.3)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderBottom:"1px solid rgba(59, 130, 246, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",fontFamily:"monospace"},children:"schema.sql"}),o.jsx(wi,{size:12,color:"rgba(255,255,255,0.3)"})]}),o.jsx("pre",{style:{margin:0,padding:"1.25rem",fontSize:"0.85rem",color:"#93c5fd",overflowX:"auto",whiteSpace:"pre-wrap",fontFamily:'"Fira Code", "Source Code Pro", monospace',lineHeight:1.6},children:Bt.sqlSchema||Bt.starterCode||"No schema provided"})]})]}),rs.output&&rs.output!=="N/A"&&o.jsxs("div",{style:{marginTop:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[o.jsx(Br,{size:16}),o.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"}),o.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(16, 185, 129, 0.6)",marginLeft:"auto"},children:"Your query should produce this result"})]}),o.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(6, 182, 212, 0.05))",borderRadius:"12px",border:"1px solid rgba(16, 185, 129, 0.25)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:rs.output.includes("|")?o.jsx("div",{style:{overflowX:"auto"},children:o.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem"},children:o.jsx("tbody",{children:rs.output.split(`
`).filter(Boolean).map((st,gt)=>{const Pt=st.split("|").map(Tn=>Tn.trim()),Gt=gt===0&&Pt.every(Tn=>/^[a-zA-Z_\s]+$/.test(Tn));return o.jsx("tr",{style:{background:Gt?"rgba(16, 185, 129, 0.15)":gt%2===0?"transparent":"rgba(255,255,255,0.02)"},children:Pt.map((Tn,mr)=>Gt?o.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",color:"#10b981",fontWeight:700,borderBottom:"2px solid rgba(16, 185, 129, 0.3)",whiteSpace:"nowrap"},children:Tn},mr):o.jsx("td",{style:{padding:"0.65rem 1rem",color:"#4ade80",borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:Tn},mr))},gt)})})})}):o.jsx("pre",{style:{margin:0,padding:"1rem",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem",color:"#4ade80",whiteSpace:"pre-wrap",lineHeight:1.6},children:rs.output})}),o.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(NA,{size:14,color:"#f59e0b"}),o.jsx("span",{style:{fontSize:"0.75rem",color:"#fbbf24"},children:"Tip: Your output should match both the data values and ordering. Column headers may vary."})]})]})]}),!zr&&o.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#94a3b8"},children:[o.jsx(qi,{size:16}),o.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sample Input"})]}),o.jsx("div",{style:{background:"#1e293b",padding:"1rem",borderRadius:"10px",border:"1px solid #334155",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#e2e8f0",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"},children:rs.input})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[o.jsx(Nn,{size:16}),o.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"})]}),o.jsx("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1rem",borderRadius:"10px",border:"1px solid rgba(16, 185, 129, 0.2)",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#4ade80",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:rs.output})]})]}),o.jsxs("div",{style:{marginTop:"2rem"},children:[o.jsxs("button",{onClick:Xn,disabled:U,style:{width:"100%",padding:"0.75rem",background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",color:"#fbbf24",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(NA,{size:16})," ",U?"Loading...":"Get AI Hint"]}),P&&o.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.2)",color:"#4ade80",borderRadius:10,fontSize:"0.9rem"},children:[" ",P]})]})]})}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"linear-gradient(180deg, #111827 0%, #0f172a 100%)"},children:[o.jsxs("div",{style:{padding:"0.65rem 1.25rem",borderBottom:"1px solid rgba(59, 130, 246, 0.15)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(180deg, rgba(31, 41, 55, 0.6) 0%, rgba(31, 41, 55, 0.3) 100%)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lr,{size:14,color:"#3b82f6"}),o.jsx("div",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Language"})]}),o.jsx("select",{value:Ir,onChange:st=>Cn(Bt.id,st.target.value),disabled:zr,style:{background:"rgba(30, 41, 59, 0.8)",color:"#f3f4f6",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:zr?"default":"pointer",fontSize:"0.85rem",outline:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:Object.keys(fg).map(st=>o.jsx("option",{value:st,disabled:zr&&st!=="SQL",children:st},st))})]}),!zr&&o.jsx("button",{onClick:()=>Wn(Bt.id,si,Ir,Bt.sqlSchema),disabled:F,style:{padding:"0.5rem 1.25rem",background:F?"#374151":"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:F?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.6rem",boxShadow:F?"none":"0 4px 10px rgba(37, 99, 235, 0.3)",transition:"all 0.2s",fontSize:"0.9rem"},children:F?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin",style:{width:14,height:14,border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%"}}),"Running..."]}):o.jsxs(o.Fragment,{children:[o.jsx(dd,{size:16,fill:"white"})," Run Code"]})})]}),o.jsxs("div",{style:{flex:1,position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsx("div",{style:{flex:1,position:"relative",minHeight:"200px"},children:o.jsx(kw,{height:"100%",defaultLanguage:zr?"sql":"python",language:fg[Ir]?.monacoLang||"python",theme:"vs-dark",value:si,onChange:st=>u(gt=>({...gt,[Bt.id]:st||""})),options:{minimap:{enabled:!1},fontSize:14,padding:{top:16}}})}),o.jsxs("div",{ref:K,style:{height:q?`${G}px`:"40px",flex:0,minHeight:q?"400px":"40px",transition:H.current?"none":"height 0.25s cubic-bezier(0.4, 0, 0.2, 1)",borderTop:"2px solid rgba(59, 130, 246, 0.3)",background:"linear-gradient(180deg, #0a0f1a 0%, #020617 100%)",display:"flex",flexDirection:"column",flexShrink:0,position:"relative",overflow:"hidden",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},children:[q&&o.jsx("div",{onMouseDown:st=>{st.preventDefault(),st.stopPropagation(),H.current=!0;const gt=st.clientY,Pt=G;document.body.style.cursor="ns-resize",document.body.style.userSelect="none";const Gt=mr=>{mr.preventDefault();const ci=gt-mr.clientY,Co=Math.min(Math.max(Pt+ci,120),600);ne(Co)},Tn=()=>{H.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",Gt),document.removeEventListener("mouseup",Tn)};document.addEventListener("mousemove",Gt),document.addEventListener("mouseup",Tn)},style:{position:"absolute",top:"-4px",left:0,right:0,height:"12px",cursor:"ns-resize",background:"transparent",zIndex:20,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{width:"60px",height:"5px",background:"linear-gradient(90deg, transparent, #3b82f6, transparent)",borderRadius:"3px",opacity:.7,transition:"opacity 0.2s, width 0.2s"},onMouseEnter:st=>{st.target.style.opacity="1",st.target.style.width="80px"},onMouseLeave:st=>{st.target.style.opacity="0.7",st.target.style.width="60px"}})}),!q&&o.jsxs("div",{onClick:()=>Z(!0),style:{flex:1,display:"flex",alignItems:"center",padding:"0 1.5rem",cursor:"pointer",background:"linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",gap:"0.75rem",color:"#94a3b8",fontSize:"0.85rem",justifyContent:"space-between",borderTop:"1px solid rgba(59, 130, 246, 0.2)",transition:"background 0.2s"},onMouseEnter:st=>st.currentTarget.style.background="linear-gradient(180deg, #1e293b 0%, #334155 100%)",onMouseLeave:st=>st.currentTarget.style.background="linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{padding:"0.35rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"6px",display:"flex",alignItems:"center"},children:o.jsx(Am,{size:16,color:"#3b82f6"})}),o.jsx("span",{style:{fontWeight:600},children:"Console & Test Results"})]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("kbd",{style:{padding:"2px 6px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"0.7rem"},children:"Click"}),"to expand"]})]}),zr&&q&&o.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{padding:"0.75rem 1.25rem",background:"#0f172a",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",gap:"1.25rem"},children:[o.jsxs("button",{onClick:()=>je("validator"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="validator"?"#3b82f6":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="validator"?"#3b82f6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[o.jsx(Vs,{size:16})," Validator"]}),o.jsxs("button",{onClick:()=>je("visualizer"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="visualizer"?"#8b5cf6":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="visualizer"?"#8b5cf6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[o.jsx(wi,{size:16})," ER Diagram"]}),o.jsxs("button",{onClick:()=>je("debugger"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="debugger"?"#10b981":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="debugger"?"#10b981":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[o.jsx(Gl,{size:16})," Debugger"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",fontWeight:500,textTransform:"uppercase"},children:"Advanced SQL Tools"}),o.jsx("button",{onClick:()=>Z(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b"},children:o.jsx(EA,{size:18})})]})]}),o.jsxs("div",{style:{flex:1,overflow:"auto",padding:"1.5rem",background:"radial-gradient(circle at top left, rgba(30,41,59,0.2), transparent)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[ve==="validator"&&o.jsx(Gae,{query:si,schemaContext:Bt.sqlSchema||Bt.starterCode}),ve==="visualizer"&&o.jsx(Kae,{schema:Bt.sqlSchema||Bt.starterCode}),ve==="debugger"&&o.jsx(Xae,{query:si,schema:Bt.sqlSchema||Bt.starterCode})]})]}),!zr&&q&&o.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(59, 130, 246, 0.1)",background:"linear-gradient(180deg, rgba(15, 23, 42, 0.8) 0%, rgba(15, 23, 42, 0.5) 100%)",justifyContent:"space-between",paddingRight:"1rem"},children:[o.jsx("div",{style:{display:"flex"},children:["input","output","tests"].map(st=>{const gt=(Q[Bt.id]||"input")===st;return o.jsxs("button",{onClick:()=>X(Pt=>({...Pt,[Bt.id]:st})),style:{padding:"1rem 1.5rem",background:gt?"rgba(30, 41, 59, 0.8)":"transparent",border:"none",borderBottom:gt?`3px solid ${st==="input"?"#f59e0b":st==="output"?"#3b82f6":"#10b981"}`:"3px solid transparent",color:gt?st==="input"?"#fbbf24":st==="output"?"#60a5fa":"#4ade80":"#94a3b8",cursor:"pointer",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.2s"},children:[st==="input"&&o.jsxs(o.Fragment,{children:[o.jsx(qi,{size:14})," Custom Input"]}),st==="output"&&o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:14})," Output ",o.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:T[Bt.id]?"#10b981":"transparent",marginLeft:4}})]}),st==="tests"&&o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:14})," Test Cases",Ae[Bt.id]&&o.jsxs("span",{style:{fontSize:"0.7rem",background:"rgba(255,255,255,0.1)",padding:"1px 6px",borderRadius:4,marginLeft:4},children:[Ae[Bt.id].passed,"/",Ae[Bt.id].total]})]})]},st)})}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:o.jsx("button",{onClick:()=>Z(!1),title:"Collapse",style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"4px"},children:o.jsx(EA,{size:18})})})]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",padding:"1.5rem"},children:[(Q[Bt.id]||"input")==="input"&&o.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:o.jsx("textarea",{value:re[Bt.id]||"",onChange:st=>le(gt=>({...gt,[Bt.id]:st.target.value})),placeholder:"Enter custom input here...",style:{width:"100%",flex:1,background:"rgba(15, 23, 42, 0.6)",color:"#e2e8f0",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"1.25rem",fontFamily:"monospace",resize:"none",outline:"none",fontSize:"0.9rem",lineHeight:"1.6"}})}),(Q[Bt.id]||"input")==="output"&&o.jsx("div",{style:{padding:"1.5rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflow:"auto",maxHeight:"100%",lineHeight:"1.6"},children:T[Bt.id]||"No output yet. Run your code to see results."}),(Q[Bt.id]||"input")==="tests"&&o.jsx("div",{style:{padding:"1.5rem",overflow:"auto",flex:1,display:"flex",flexDirection:"column",gap:"1.5rem"},children:o.jsx(Vae,{problemId:Bt.id,code:si,language:Ir,isGlobalTest:!0,onRunComplete:st=>{if(st?.testResults){const gt=st.testResults.filter(Gt=>Gt.passed).length,Pt=st.testResults.length;if(xe(Gt=>({...Gt,[Bt.id]:{passed:gt,total:Pt}})),e&&as){const Gt=Math.round(gt/Pt*100);as.emitProgressUpdate(e.id,Bt.id,Gt,null)}}}})})]})]})]})]})]})]})]}),o.jsxs("div",{style:{padding:"0.75rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsxs("span",{style:{fontSize:"0.85rem",color:"#64748b"},children:["Question ",wr.indexOf(Bt)+1," of ",Bi]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:cs,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:[o.jsx(B1,{size:16})," Prev"]}),o.jsxs("button",{onClick:Hr,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:["Next ",o.jsx(hm,{size:16})]})]})]}),o.jsxs("button",{onClick:()=>sr(!1),disabled:w,style:{padding:"0.75rem 2rem",borderRadius:12,border:"none",background:w?"#374151":"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontWeight:700,cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:w?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",transition:"all 0.2s",fontSize:"0.95rem"},children:[o.jsx($c,{size:18})," ",w?"Submitting...":"Submit Test"]})]}),o.jsx("canvas",{ref:Lt,style:{display:"none"}})]})}const mVe="http://localhost:8000/api";function mP({submission:t,onClose:e,isStudentView:n=!1}){const[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(null);if(C.useEffect(()=>{t?.id&&Xe.get(`${mVe}/aptitude-submissions/${t.id}`).then(d=>{a(d.data),s(!1)}).catch(d=>{console.error("Failed to load submission details:",d),c("Failed to load submission details"),s(!1)})},[t?.id]),!t)return null;const u=i||t;return o.jsx("div",{className:"modal-overlay",onClick:e,children:o.jsxs("div",{className:"modal-content",onClick:d=>d.stopPropagation(),style:{maxWidth:"950px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:u.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Zr,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0},children:"Aptitude Test Report"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:n?"Your Results":u.studentName})]})]}),o.jsx("button",{onClick:e,className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto"},children:r?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{style:{color:"var(--text-muted)",marginTop:"1rem"},children:"Loading report details..."})]}):l?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx(Pn,{size:48,color:"#ef4444",style:{marginBottom:"1rem"}}),o.jsx("p",{style:{color:"#ef4444"},children:l})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{margin:0,color:"var(--primary)"},children:u.testTitle}),o.jsxs("p",{style:{color:"var(--text-muted)",margin:"0.5rem 0 0"},children:["Submitted: ",new Date(u.submittedAt).toLocaleString()]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:u.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${u.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:u.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[u.score,"%"]}),o.jsx("div",{style:{color:"var(--text-muted)",marginTop:"0.5rem"},children:"Overall Score"})]}),o.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:u.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${u.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.status==="passed"?o.jsx(Nn,{size:28,color:"#10b981"}):o.jsx(kr,{size:28,color:"#ef4444"}),o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:u.status==="passed"?"#10b981":"#ef4444"},children:u.status==="passed"?"PASSED":"FAILED"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:u.totalQuestions||0}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Questions"})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:u.correctCount||0}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:(u.totalQuestions||0)-(u.correctCount||0)}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Incorrect"})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(u.tabSwitches||0)>0?"#f59e0b":"#10b981"},children:u.tabSwitches||0}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[o.jsx(Pn,{size:12,style:{marginRight:"4px",verticalAlign:"middle"}}),"Violations"]})]}),o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:u.timeSpent?`${Math.floor(u.timeSpent/60)}m ${u.timeSpent%60}s`:"N/A"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[o.jsx(ls,{size:12,style:{marginRight:"4px",verticalAlign:"middle"}}),"Time Spent"]})]})]}),(u.tabSwitches||0)>0&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[o.jsx(Pn,{size:24,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.9rem"},children:["The student switched tabs/windows ",u.tabSwitches," time(s) during the test."]})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),u.questionResults&&u.questionResults.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:u.questionResults.map((d,f)=>o.jsxs("div",{style:{padding:"1.25rem",background:d.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${d.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:d.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:d.isCorrect?"":""}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",f+1]}),d.category&&o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:d.category})]}),o.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,lineHeight:1.5},children:d.question})]})]}),o.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:d.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${d.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)",minWidth:"120px"},children:n?"Your Answer:":"Student Answer:"}),o.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:d.isCorrect?"#10b981":"#ef4444"},children:d.userAnswer||"(Not answered)"})]}),!d.isCorrect&&o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)",minWidth:"120px"},children:"Correct Answer:"}),o.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:d.correctAnswer})]}),d.explanation&&o.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:" Explanation"}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",lineHeight:1.5},children:d.explanation})]})]})]},f))}):o.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"rgba(71, 85, 105, 0.1)",borderRadius:"12px",color:"var(--text-muted)"},children:[o.jsx(Br,{size:32,style:{opacity:.5,marginBottom:"0.5rem"}}),o.jsx("p",{style:{margin:0},children:"No question details available"})]})]})]})})]})})}function Xy(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,[])).next())})}function Yy(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var gVe=function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()},pF=function(t){return{startEndTensor:t,startPoint:Gn(t,[0,0],[-1,2]),endPoint:Gn(t,[0,2],[-1,2])}},yVe=function(t,e){var n=Ne(t.startPoint,e),r=Ne(t.endPoint,e),s=O5([n,r],1);return pF(s)};var xVe={strides:[8,16],anchors:[2,6]},HH=6;function bVe(t,e,n){for(var r=[],s=0;s<n.strides.length;s++)for(var i=n.strides[s],a=Math.floor((e+i-1)/i),l=Math.floor((t+i-1)/i),c=n.anchors[s],u=0;u<a;u++)for(var d=i*(u+.5),f=0;f<l;f++)for(var A=i*(f+.5),m=0;m<c;m++)r.push([A,d]);return r}function vVe(t,e,n){var r=Gn(t,[0,1],[-1,2]),s=Nt(r,e),i=Gn(t,[0,3],[-1,2]),a=un(i,n),l=un(s,n),c=un(a,2),u=Kt(l,c),d=Nt(l,c),f=Ne(u,n),A=Ne(d,n),m=1;return O5([f,A],m)}function wVe(t){return t instanceof Dr?[t.shape[0],t.shape[1]]:[t.height,t.width]}function WH(t,e){var n,r,s;if(t.topLeft instanceof Dr&&t.bottomRight instanceof Dr){var i=He(function(){return[Gi([Gn(Kt(e-1,t.topLeft),0,1),Gn(t.topLeft,1,1)]),Gi([Kt(e-1,Gn(t.bottomRight,0,1)),Gn(t.bottomRight,1,1)])]}),a=i[0],l=i[1];n=a,r=l,t.landmarks!=null&&(s=He(function(){var y=Kt(qa([e-1,0]),t.landmarks),x=qa([1,-1]),v=Ne(y,x);return v}))}else{var c=t.topLeft,u=c[0],d=c[1],f=t.bottomRight,A=f[0],m=f[1];n=[e-1-u,d],r=[e-1-A,m],t.landmarks!=null&&(s=t.landmarks.map(function(y){return[e-1-y[0],y[1]]}))}var g={topLeft:n,bottomRight:r};return s!=null&&(g.landmarks=s),t.probability!=null&&(g.probability=t.probability instanceof Dr?t.probability.clone():t.probability),g}function VH(t,e){return He(function(){var n;return t.hasOwnProperty("box")?n=t.box:n=t,ud(yVe(n,e).startEndTensor)})}var SVe=(function(){function t(e,n,r,s,i,a){this.blazeFaceModel=e,this.width=n,this.height=r,this.maxFaces=s,this.anchorsData=bVe(n,r,xVe),this.anchors=sm(this.anchorsData),this.inputSizeData=[n,r],this.inputSize=qa([n,r]),this.iouThreshold=i,this.scoreThreshold=a}return t.prototype.getBoundingBoxes=function(e,n,r){return r===void 0&&(r=!0),Xy(this,void 0,void 0,function(){var s,i,a,l,c,u,d,f,A,m,g,y,x,v,w=this;return Yy(this,function(B){switch(B.label){case 0:return s=He(function(){var k=Au.resizeBilinear(e,[w.width,w.height]),j=Ne(Kt(un(k,255),.5),2),I=w.blazeFaceModel.predict(j),O=ud(I),F=vVe(O,w.anchors,w.inputSize),D=Gn(O,[0,0],[-1,1]),T=ud(cd(D));return[O,F,T]}),i=s[0],a=s[1],l=s[2],c=console.warn,console.warn=function(){},u=Au.nonMaxSuppression(a,l,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=c,[4,u.array()];case 1:return d=B.sent(),u.dispose(),f=d.map(function(k){return Gn(a,[k,0],[1,-1])}),n?[3,3]:[4,Promise.all(f.map(function(k){return Xy(w,void 0,void 0,function(){var j;return Yy(this,function(I){switch(I.label){case 0:return[4,k.array()];case 1:return j=I.sent(),k.dispose(),[2,j]}})})}))];case 2:f=B.sent(),B.label=3;case 3:for(A=e.shape[1],m=e.shape[2],n?g=un([m,A],this.inputSize):g=[m/this.inputSizeData[0],A/this.inputSizeData[1]],y=[],x=function(k){var j=f[k],I=He(function(){var O=j instanceof Dr?pF(j):pF(sm(j));if(!r)return O;var F=d[k],D;n?D=Gn(w.anchors,[F,0],[1,2]):D=w.anchorsData[F];var T=Fe(ud(Gn(i,[F,HH-1],[1,-1])),[HH,-1]),N=Gn(l,[F],[1]);return{box:O,landmarks:T,probability:N,anchor:D}});y.push(I)},v=0;v<f.length;v++)x(v);return a.dispose(),l.dispose(),i.dispose(),[2,{boxes:y,scaleFactor:g}]}})})},t.prototype.estimateFaces=function(e,n,r,s){return n===void 0&&(n=!1),r===void 0&&(r=!1),s===void 0&&(s=!0),Xy(this,void 0,void 0,function(){var i,a,l,c,u,d,f=this;return Yy(this,function(A){switch(A.label){case 0:return i=wVe(e),a=i[1],l=He(function(){return e instanceof Dr||(e=Mte(e)),Lo(Mt(e,"float32"),0)}),[4,this.getBoundingBoxes(l,n,s)];case 1:return c=A.sent(),u=c.boxes,d=c.scaleFactor,l.dispose(),n?[2,u.map(function(m){var g=VH(m,d),y={topLeft:Gn(g,[0],[2]),bottomRight:Gn(g,[2],[2])};if(s){var x=m,v=x.landmarks,w=x.probability,B=x.anchor,k=Ne(Nt(v,B),d);y.landmarks=k,y.probability=w}return r&&(y=WH(y,a)),y})]:[2,Promise.all(u.map(function(m){return Xy(f,void 0,void 0,function(){var g,y,w,x,v,w,B,k,j,I,O,F,D=this;return Yy(this,function(T){switch(T.label){case 0:return g=VH(m,d),s?[3,2]:[4,g.array()];case 1:return w=T.sent(),y={topLeft:w.slice(0,2),bottomRight:w.slice(2)},[3,4];case 2:return[4,Promise.all([m.landmarks,g,m.probability].map(function(N){return Xy(D,void 0,void 0,function(){return Yy(this,function(P){return[2,N.array()]})})}))];case 3:x=T.sent(),v=x[0],w=x[1],B=x[2],k=m.anchor,j=d,I=j[0],O=j[1],F=v.map(function(N){return[(N[0]+k[0])*I,(N[1]+k[1])*O]}),y={topLeft:w.slice(0,2),bottomRight:w.slice(2),landmarks:F,probability:B},gVe(m.box),m.landmarks.dispose(),m.probability.dispose(),T.label=4;case 4:return g.dispose(),r&&(y=WH(y,a)),[2,y]}})})}))]}})})},t.prototype.dispose=function(){this.blazeFaceModel.dispose(),this.anchors.dispose(),this.inputSize.dispose()},t})();var CVe="https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1";function kVe(t){var e={},n=e.maxFaces,r=n===void 0?10:n,s=e.inputWidth,i=s===void 0?128:s,a=e.inputHeight,l=a===void 0?128:a,c=e.iouThreshold,u=c===void 0?.3:c,d=e.scoreThreshold,f=d===void 0?.75:d,A=e.modelUrl;return Xy(this,void 0,void 0,function(){var m,g;return Yy(this,function(y){switch(y.label){case 0:return A==null?[3,2]:[4,nF(A)];case 1:return m=y.sent(),[3,4];case 2:return[4,nF(CVe,{fromTFHub:!0})];case 3:m=y.sent(),y.label=4;case 4:return g=new SVe(m,i,l,r,u,f),[2,g]}})})}const JC="http://localhost:8000/api",ZC={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function BVe({problem:t,user:e,onClose:n,onSubmitSuccess:r}){const[s,i]=C.useState(t.language),[a,l]=C.useState(ZC[t.language]?.defaultCode||""),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[A,m]=C.useState(""),[g,y]=C.useState(""),[x,v]=C.useState(!1),[w,B]=C.useState(!1),[k,j]=C.useState(""),[I,O]=C.useState("output"),[F,D]=C.useState([]),[T,N]=C.useState([]),[P,z]=C.useState(!1),U=C.useRef(null),[ee,q]=C.useState(0),[Z,G]=C.useState(0),[ne,K]=C.useState(!1),[H,Q]=C.useState(""),[X,re]=C.useState(!1),[le]=C.useState(Date.now()),[Ae,xe]=C.useState(!1),[Be,me]=C.useState(!1),[ve,je]=C.useState(null),[ye,ze]=C.useState(!1),[at,ie]=C.useState(0),[Le,nt]=C.useState(!1),[Et,_e]=C.useState(0),[ht,ot]=C.useState(!1),[$t,kt]=C.useState(!0),[Ht,Sn]=C.useState(!1),[Ut,en]=C.useState(0),[fn,Qt]=C.useState(0),[rn,Yt]=C.useState(0),sn=C.useRef(null),Fn=C.useRef(null),Ft=C.useRef(null),xn=C.useRef(!1),ke=C.useRef(!1),$e=C.useRef(null),yt=C.useRef(null),Ct=C.useRef(null),_t=C.useRef(null);C.useRef(!0);const Lt=t.proctoring||{},zt=Lt.maxTabSwitches||3;C.useEffect(()=>{setTimeout(()=>{U.current&&!document.fullscreenElement&&U.current.requestFullscreen().then(()=>{B(!0)}).catch(Wn=>{console.log("Fullscreen request failed:",Wn.message)})},100);const Cn=()=>{B(!!document.fullscreenElement)};if(document.addEventListener("fullscreenchange",Cn),t.testCases){const Wn=typeof t.testCases=="string"?JSON.parse(t.testCases):t.testCases;D(Array.isArray(Wn)?Wn:[])}return()=>{document.removeEventListener("fullscreenchange",Cn),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}},[]),C.useEffect(()=>(Lt.enabled&&Lt.videoAudio&&Jt(),()=>{Hn(),ve&&ve.getTracks().forEach(ft=>ft.stop())}),[]);const Jt=async()=>{try{const ft=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"},audio:!0});je(ft),xe(!0),me(!0),sn.current&&(sn.current.srcObject=ft),Kr(),cn(),(Lt.enableFaceDetection||Lt.detectMultipleFaces||Lt.trackFaceLookaway)&&wr()}catch(ft){console.error("Failed to access camera/microphone:",ft),Q(" Camera/Microphone access required for proctoring"),K(!0)}},dt=()=>{Hn(),Bs(),Bi(),ve&&(ve.getTracks().forEach(ft=>{ft.stop(),console.log(` Stopped ${ft.kind} track`)}),je(null)),sn.current&&(sn.current.srcObject=null),xe(!1),me(!1)},pr=()=>{dt(),n()},Kr=()=>{const ft=document.createElement("canvas");ft.width=64,ft.height=48,Fn.current=ft,Ft.current=setInterval(()=>{Ls()},3e3)},Hn=()=>{Ft.current&&(clearInterval(Ft.current),Ft.current=null)},Ls=()=>{if(!sn.current||!Fn.current)return;const ft=sn.current,Cn=Fn.current,Wn=Cn.getContext("2d");Wn.drawImage(ft,0,0,Cn.width,Cn.height);const sr=Wn.getImageData(0,0,Cn.width,Cn.height).data;let da=0,Hr=0,cs={r:0,g:0,b:0};const zr=sr.length/4;for(let gt=0;gt<sr.length;gt+=4){const Pt=sr[gt],Gt=sr[gt+1],Tn=sr[gt+2],mr=(Pt+Gt+Tn)/3;da+=mr,cs.r+=Pt,cs.g+=Gt,cs.b+=Tn,mr<30&&Hr++}const Zi=da/zr,Ir=Hr/zr,si={r:cs.r/zr,g:cs.g/zr,b:cs.b/zr};let rs=0;for(let gt=0;gt<sr.length;gt+=4){const Pt=sr[gt],Gt=sr[gt+1],Tn=sr[gt+2];rs+=Math.abs(Pt-si.r)+Math.abs(Gt-si.g)+Math.abs(Tn-si.b)}rs=rs/zr/3;const st=Ir>.9||Zi<15||rs<8;console.log(`Camera check - Brightness: ${Zi.toFixed(1)}, Variance: ${rs.toFixed(1)}, Dark%: ${(Ir*100).toFixed(1)}%, Blocked: ${st}`),st&&!xn.current?(xn.current=!0,ze(!0),ie(gt=>{const Pt=gt+1;return as.emitProctoringViolation(e.id,e.name||e.email,"camera_blocked","critical",t.mentorId),Q(` Camera obstruction detected! (${Pt} times) Please uncover your camera.`),K(!0),Pt})):!st&&xn.current&&(xn.current=!1,ze(!1),K(!1))},cn=async()=>{try{console.log(" Loading object detection model..."),await _D();const ft=await Wae.load({base:"lite_mobilenet_v2"});$e.current=ft,ot(!0),console.log(" Object detection model loaded"),Ji()}catch(ft){console.error("Failed to load object detection model:",ft)}},Ji=()=>{yt.current=setInterval(()=>{$s()},2e3)},Bs=()=>{yt.current&&(clearInterval(yt.current),yt.current=null)},$s=async()=>{if(!sn.current||!$e.current){console.log(" Phone detection skipped - video or model not ready");return}if(sn.current.readyState<2){console.log(" Video not ready yet, readyState:",sn.current.readyState);return}try{const ft=await $e.current.detect(sn.current);console.log(" Detection ran, found:",ft.length,"objects:",ft.map(Xn=>`${Xn.class}(${(Xn.score*100).toFixed(0)}%)`).join(", "));const Cn=ft.filter(Xn=>["cell phone","laptop","book","remote"].includes(Xn.class)&&Xn.score>.4),Wn=Cn.some(Xn=>Xn.class==="cell phone"&&Xn.score>.4);Cn.length>0&&console.log(" Suspicious objects detected:",Cn.map(Xn=>`${Xn.class} (${(Xn.score*100).toFixed(0)}%)`)),Wn&&!ke.current?(ke.current=!0,nt(!0),_e(Xn=>{const sr=Xn+1;return as.emitProctoringViolation(e.id,e.name||e.email,"phone_detected",sr>2?"critical":"warning",t.mentorId),Q(` Mobile phone detected! (${sr} times) Remove all electronic devices from view.`),K(!0),sr})):!Wn&&ke.current&&(ke.current=!1,nt(!1),setTimeout(()=>{!ke.current&&!xn.current&&K(!1)},3e3))}catch(ft){console.error("Phone detection error:",ft)}},wr=async()=>{try{console.log(" Loading BlazeFace model...");const ft=await kVe();Ct.current=ft,console.log(" BlazeFace model loaded successfully"),Bt()}catch(ft){console.error(" Failed to load BlazeFace model:",ft)}},ts=ft=>{if(!ft||!ft.start||!ft.end)return!1;const[Cn,Wn]=ft.start,[Xn,sr]=ft.end,da=(Cn+Xn)/2,Hr=(Wn+sr)/2,cs=sn.current.videoWidth/2,zr=sn.current.videoHeight/2,Zi=Math.abs(da-cs),Ir=Math.abs(Hr-zr),si=150;return Zi>si||Ir>si},Er=async()=>{if(!(!sn.current||!Ct.current))try{const ft=await Ct.current.estimateFaces(sn.current,!1);console.log(` Face detection result: ${ft.length} face(s)`),ft.length===0?Lt.enableFaceDetection&&(kt(!1),Qt(Cn=>(as.emitProctoringViolation(e.id,e.name||e.email,"face_not_detected","warning",t.mentorId),Cn+1)),console.log(" Face not detected")):ft.length===1?(kt(!0),Sn(!1),console.log(" Single face detected"),Lt.trackFaceLookaway&&ts(ft[0])&&(en(Cn=>(as.emitProctoringViolation(e.id,e.name||e.email,"face_lookaway","warning",t.mentorId),Cn+1)),console.log(" Face is off-center (looking away)"))):ft.length>=2&&Lt.detectMultipleFaces&&(kt(!0),Sn(!0),Yt(Cn=>(as.emitProctoringViolation(e.id,e.name||e.email,"multiple_faces","critical",t.mentorId),Cn+1)),Q(` Multiple people detected! (${ft.length} faces) - Automatic violation!`),K(!0),console.log(" Multiple faces detected - CHEATING"))}catch(ft){console.error(" Face detection inference failed:",ft),kt(!1)}},Bt=()=>{if(!Ct.current){console.error(" Face detector not loaded yet");return}_t.current=setInterval(()=>{Er()},1e3),console.log(" Face detection started (1s intervals)")},Bi=()=>{_t.current&&(clearInterval(_t.current),_t.current=null,console.log(" Face detection stopped"))};C.useEffect(()=>{if(!Lt.enabled||!Lt.trackTabSwitches)return;const ft=()=>{document.hidden&&!X?q(Cn=>{const Wn=Cn+1;return as.emitProctoringViolation(e.id,e.name||e.email,"window_switch",Wn>=zt?"critical":"warning",t.mentorId),Wn>=zt?(Q(` Maximum tab switches reached (${Wn}/${zt}). This will be reported.`),K(!0),re(!0)):(Q(` Tab switch detected! (${Wn}/${zt}) ${zt-Wn} more will be flagged!`),K(!0),setTimeout(()=>K(!1),4e3)),Wn}):document.hidden||U.current&&!document.fullscreenElement&&setTimeout(()=>{U.current?.requestFullscreen().catch(()=>{})},100)};return document.addEventListener("visibilitychange",ft),()=>document.removeEventListener("visibilitychange",ft)},[Lt,X,zt]),C.useEffect(()=>{if(!Lt.enabled||!Lt.disableCopyPaste)return;const ft=Wn=>{(Wn.type==="paste"||Wn.ctrlKey&&(Wn.key==="v"||Wn.key==="c"))&&(Wn.preventDefault(),G(Xn=>(as.emitProctoringViolation(e.id,e.name||e.email,"copy_attempt","warning",t.mentorId),Xn+1)),Q(" Copy/Paste is disabled for this problem!"),K(!0),setTimeout(()=>K(!1),3e3))},Cn=Wn=>{Wn.preventDefault()};return document.addEventListener("paste",ft),document.addEventListener("keydown",ft),document.addEventListener("contextmenu",Cn),()=>{document.removeEventListener("paste",ft),document.removeEventListener("keydown",ft),document.removeEventListener("contextmenu",Cn)}},[Lt]);const ys=async()=>{f(!0),m("");try{const ft=await Xe.post(`${JC}/run`,{code:a,language:t.language,problemId:t.id,sqlSchema:t.sqlSchema,stdin:k});m(ft.data.output||ft.data.error||"No output"),O("output"),(ft.data.error||ft.data.output?.includes("FAILED")||ft.data.output?.includes("Error"))&&as.emitTestFailed(e.id,e.name||e.email,t.id,`Run Test - ${t.title}`,t.mentorId)}catch(ft){const Cn="Error running code: "+(ft.response?.data?.error||ft.message);m(Cn),O("output"),as.emitTestFailed(e.id,e.name||e.email,t.id,`Run Error - ${t.title}`,t.mentorId)}finally{f(!1)}},Jn=async()=>{v(!0);try{const ft=await Xe.post(`${JC}/hints`,{problemDescription:t.description,currentCode:a,language:s});y(ft.data.hint)}catch{y("Unable to generate hint at this time.")}finally{v(!1)}},ns=async()=>{if(!F||F.length===0){alert("No test cases available for this problem");return}z(!0),N([]);try{const ft=[];for(let Wn=0;Wn<F.length;Wn++){const Xn=F[Wn];try{const sr=await Xe.post(`${JC}/run`,{code:a,language:t.language,problemId:t.id,sqlSchema:t.sqlSchema,stdin:Xn.input||Xn.stdin||""}),da=(Xn.expectedOutput||Xn.expected_output||"").trim(),Hr=(sr.data.output||"").trim(),cs=Hr===da&&!sr.data.error;ft.push({testNumber:Wn+1,input:Xn.input||Xn.stdin||"N/A",expected:da,actual:Hr,passed:cs,error:sr.data.error||null})}catch(sr){ft.push({testNumber:Wn+1,input:Xn.input||Xn.stdin||"N/A",expected:Xn.expectedOutput||Xn.expected_output||"N/A",actual:"ERROR",passed:!1,error:sr.response?.data?.error||sr.message})}}N(ft),O("tests"),ft.every(Wn=>Wn.passed)&&as.emitTestSuccess(e.id,e.name||e.email,t.id,`All ${ft.length} tests passed - ${t.title}`,t.mentorId)}catch(ft){alert("Error running tests: "+ft.message)}finally{z(!1)}},ji=async()=>{if(!a.trim()){alert("Please write some code before submitting");return}u(!0);const ft=Math.round((Date.now()-le)/1e3);as.emitSubmissionStarted(e.id,e.name||e.email,t.id,t.title,t.mentorId,Lt.enabled||!1);try{const Cn=await Xe.post(`${JC}/submissions/proctored`,{studentId:e.id,problemId:t.id,code:a,language:s,submissionType:"editor",tabSwitches:ee,copyPasteAttempts:Z,cameraBlockedCount:at,phoneDetectionCount:Et,faceNotDetectedCount:fn,multipleFacesDetectionCount:rn,faceLookawayCount:Ut,timeSpent:ft,proctored:Lt.enabled});as.emitSubmissionCompleted(e.id,e.name||e.email,t.id,t.title,t.mentorId,Cn.data?.status||"success",Cn.data?.score||100),dt(),r&&r(Cn.data),n()}catch(Cn){as.emitSubmissionCompleted(e.id,e.name||e.email,t.id,t.title,t.mentorId,"error",0),console.error("Submission error:",{status:Cn.response?.status,data:Cn.response?.data,message:Cn.message});const Xn=`Submission failed: ${Cn.response?.data?.details||Cn.response?.data?.error||Cn.message}. Please check your code and try again.`;alert(Xn)}finally{u(!1)}};return o.jsxs("div",{ref:U,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[ne&&o.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:X?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #f59e0b, #d97706)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(Pn,{size:24}),o.jsx("span",{style:{fontWeight:600},children:H})]}),o.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:o.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[o.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,o.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}})," PROCTORED MODE"]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"Coding"}),o.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),ee>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",ee," violations"]}),Z>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",Z," copy attempts"]}),at>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",at," cam blocks"]}),Et>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",Et," phone detected"]}),fn>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",fn," face missing"]}),rn>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",rn," multi-face"]}),Ut>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",Ut," lookaway"]})]})]})}),Lt.videoAudio&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginRight:"1rem"},children:[o.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:ye?"rgba(239, 68, 68, 0.2)":Ae?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${ye?"#ef4444":Ae?"#10b981":"#ef4444"}`},children:ye?o.jsx(sB,{size:16,color:"#ef4444"}):Ae?o.jsx(h2,{size:16,color:"#10b981"}):o.jsx(sB,{size:16,color:"#ef4444"})}),o.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:Be?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${Be?"#10b981":"#ef4444"}`},children:Be?o.jsx(Uj,{size:16,color:"#10b981"}):o.jsx(cZ,{size:16,color:"#ef4444"})})]}),o.jsx("button",{onClick:pr,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),o.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[o.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a",display:"flex",flexDirection:"column"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),o.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?o.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"#06b6d4"},children:""}),o.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),o.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"#10b981"},children:""}),o.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),o.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&o.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):o.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[o.jsx("div",{style:{marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),o.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||"N/A"}),o.jsx("div",{style:{marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),o.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),o.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(NA,{size:16})," Need Help?"]}),o.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),o.jsxs("button",{onClick:Jn,disabled:x,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[o.jsx(NA,{size:16})," ",x?"Getting Hints...":"Get AI Hints"]}),g&&o.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.2)",fontSize:"0.85rem",color:"#4ade80"},children:[" ",g]})]}),o.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:16})," Proctoring Rules"]}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[o.jsx("li",{children:"Do not switch tabs or windows"}),o.jsx("li",{children:"Do not exit fullscreen mode"}),o.jsx("li",{children:"All violations are recorded"}),o.jsx("li",{children:"3+ violations may result in disqualification"})]})]}),Lt.videoAudio&&o.jsxs("div",{style:{marginTop:"2rem",padding:"0.75rem",background:"rgba(0,0,0,0.3)",borderRadius:"0.75rem",border:"1px solid #334155",position:"relative"},children:[o.jsx("video",{ref:sn,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",background:"#000",border:ye?"3px solid #ef4444":"2px solid #10b981",opacity:ye?.5:1}}),ye&&o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(239, 68, 68, 0.9)",padding:"0.5rem 1rem",borderRadius:"8px",color:"white",fontWeight:600,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(sB,{size:14})," CAMERA BLOCKED"]}),o.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.7rem",color:ye?"#ef4444":"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[!ye&&o.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",animation:"pulse 1s infinite"}}),ye?" Uncover your camera!":ht?" AI Monitoring Active":" Loading AI..."]})]})]}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b",minHeight:0},children:[o.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[o.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),o.jsx("select",{value:s,onChange:ft=>{const Cn=ft.target.value;i(Cn),l(ZC[Cn]?.defaultCode||"")},disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer",opacity:t.type==="SQL"||t.language==="SQL"?.7:1},children:Object.keys(ZC).map(ft=>o.jsx("option",{value:ft,children:ft},ft))})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsxs("button",{onClick:ys,disabled:d||c,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[o.jsx(dd,{size:16})," ",d?"Running...":"Run Code"]}),o.jsxs("button",{onClick:ji,disabled:d||c,style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:c?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[o.jsx($c,{size:16})," ",c?"Submitting...":"Submit"]})]})]}),o.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:o.jsx(kw,{height:"100%",language:ZC[s]?.monacoLang||"python",theme:"vs-dark",value:a,onChange:ft=>l(ft||""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),o.jsxs("div",{style:{flex:"0 0 280px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",minHeight:0},children:[o.jsx("div",{style:{display:"flex",borderBottom:"1px solid #334155",background:"#0f172a"},children:["input","output","tests"].map(ft=>o.jsxs("button",{onClick:()=>O(ft),style:{padding:"0.75rem 1.25rem",background:I===ft?"#1e293b":"transparent",border:"none",borderBottom:I===ft?`2px solid ${ft==="input"?"#f59e0b":ft==="output"?"#3b82f6":"#06b6d4"}`:"2px solid transparent",color:I===ft?ft==="input"?"#fbbf24":ft==="output"?"#60a5fa":"#06b6d4":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[ft==="input"&&o.jsx(o.Fragment,{children:" Custom Input"}),ft==="output"&&o.jsxs(o.Fragment,{children:[" Output ",A&&o.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:A.includes("Error")?"#ef4444":"#10b981"}})]}),ft==="tests"&&o.jsx(o.Fragment,{children:" Test Cases"})]},ft))}),I==="input"&&o.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[o.jsx("textarea",{value:k,onChange:ft=>j(ft.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",height:"calc(100% - 30px)",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"none",outline:"none"}}),o.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:' This input will be passed as stdin when you click "Run Code"'})]}),I==="output"&&o.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto"},children:o.jsx("div",{style:{fontFamily:"monospace",color:A.includes("Error")?"#ef4444":"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap"},children:A||" Run your code to see output here"})}),I==="tests"&&o.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"},children:T.length===0?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:ns,disabled:P||d,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.6rem 1.2rem",borderRadius:"6px",marginBottom:"1rem",cursor:P?"not-allowed":"pointer",fontWeight:600,fontSize:"0.9rem"},children:P?" Running All Tests...":" Run All Tests"}),o.jsx("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:t.type==="SQL"||t.language==="SQL"?o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{style:{color:"#06b6d4"},children:" Database Schema:"}),o.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema||"Schema not provided"})]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#10b981"},children:" Expected Result:"}),o.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult||"Expected result not provided"})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{style:{color:"#f59e0b"},children:" Sample Input:"}),o.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sampleInput||"N/A"})]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#10b981"},children:" Expected Output:"}),o.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedOutput||"N/A"})]})]})})]}):o.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:[o.jsx("button",{onClick:ns,disabled:P||d,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",marginBottom:"1rem",cursor:P?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem"},children:P?" Running...":" Run Tests Again"}),o.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#1e293b",borderRadius:"6px"},children:[o.jsx("strong",{style:{color:"#06b6d4"},children:"Test Results: "}),o.jsxs("span",{style:{color:T.every(ft=>ft.passed)?"#10b981":"#ef4444"},children:[T.filter(ft=>ft.passed).length,"/",T.length," passed"]})]}),T.map((ft,Cn)=>o.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:ft.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${ft.passed?"#10b981":"#ef4444"}`,borderRadius:"6px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:ft.passed?"":""}),o.jsxs("strong",{style:{color:ft.passed?"#10b981":"#ef4444"},children:["Test ",ft.testNumber]})]}),o.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx("strong",{style:{color:"#94a3b8"},children:"Input:"}),o.jsx("code",{style:{color:"#cbd5e1",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:ft.input})]}),o.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx("strong",{style:{color:"#10b981"},children:"Expected:"}),o.jsx("code",{style:{color:"#4ade80",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:ft.expected})]}),o.jsxs("div",{style:{fontSize:"0.75rem"},children:[o.jsx("strong",{style:{color:ft.passed?"#10b981":"#ef4444"},children:"Actual:"}),o.jsx("code",{style:{color:ft.passed?"#4ade80":"#ef4444",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:ft.error?`ERROR: ${ft.error}`:ft.actual})]})]},Cn))]})})]})]})]}),o.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}const v_="http://localhost:8000";function jVe({attemptId:t,attemptData:e,onComplete:n,onFailed:r}){const[s,i]=C.useState([]),[a,l]=C.useState({}),[c,u]=C.useState(0),[d,f]=C.useState(0),[A,m]=C.useState(null),[g,y]=C.useState(!0),[x,v]=C.useState(!1),[w,B]=C.useState(null),[k,j]=C.useState(""),[I,O]=C.useState(0),[F,D]=C.useState(!1),T=C.useRef(null);C.useEffect(()=>(P(),()=>{T.current&&clearInterval(T.current)}),[]),C.useEffect(()=>{const ne=()=>{document.hidden&&O(K=>{const H=K+1;return N("tab_switch",`Tab switch detected (count: ${H})`,H>3?"high":"medium"),H})};return document.addEventListener("visibilitychange",ne),()=>document.removeEventListener("visibilitychange",ne)},[]);const N=async(ne,K,H="low")=>{try{await Xe.post(`${v_}/api/skill-tests/proctoring/log`,{attemptId:t,testStage:"mcq",eventType:ne,details:K,severity:H})}catch{}},P=async()=>{try{const{data:ne}=await Xe.post(`${v_}/api/skill-tests/mcq/start/${t}`);i(ne.questions||[]),l(ne.existing_answers||{});let K;ne.end_time&&(K=new Date(ne.end_time)),(!K||isNaN(K.getTime()))&&(K=new Date(Date.now()+1800*1e3)),m(K),T.current=setInterval(()=>{const Q=Math.max(0,Math.floor((K-new Date)/1e3));f(Q),Q<=0&&(clearInterval(T.current),ee(!0))},1e3),y(!1)}catch(ne){j(ne.response?.data?.error||ne.message),y(!1)}},z=(ne,K)=>{l(H=>({...H,[String(ne)]:K}))},U=()=>{if(s.length-Object.keys(a).length>0){D(!0);return}ee(!1)},ee=async(ne=!1)=>{if(!x){D(!1),v(!0),T.current&&clearInterval(T.current);try{const{data:K}=await Xe.post(`${v_}/api/skill-tests/mcq/submit`,{attemptId:t,answers:a});B(K),K.passed?setTimeout(()=>n(K),2e3):setTimeout(()=>r(),3e3)}catch(K){j(K.response?.data?.error||K.message),v(!1)}}},q=ne=>{const K=Math.floor(ne/60),H=ne%60;return`${K.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`};if(g)return o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading MCQ questions..."});if(w)return o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:w.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:w.passed?o.jsx(Nn,{size:40,color:"#22c55e"}):o.jsx(kr,{size:40,color:"#ef4444"})}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:w.passed?"MCQ Passed!":"MCQ Failed"}),o.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Score: ",w.correct,"/",w.total," (",Math.round(w.score),"%)"]}),o.jsx("p",{style:{fontSize:"14px",color:w.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:w.passed?"Proceeding to Coding section...":"Assessment ended. Generating report..."})]});const Z=s[c],G=Object.keys(a).length;return o.jsxs("div",{style:{paddingBottom:"80px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"20px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"MCQ Test"}),o.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[G,"/",s.length," answered"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",background:d<60?"rgba(239,68,68,0.15)":d<300?"rgba(245,158,11,0.15)":"rgba(16,185,129,0.15)",borderRadius:"20px",fontWeight:700,fontSize:"16px",color:d<60?"#f87171":d<300?"#fbbf24":"#34d399"},children:[o.jsx(ls,{size:16})," ",q(d)]}),o.jsxs("button",{onClick:U,disabled:x,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:x?.6:1},children:[o.jsx($c,{size:14})," Submit All"]})]}),I>0&&o.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",padding:"8px 16px",marginBottom:"16px",fontSize:"12px",color:"#fbbf24",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Vs,{size:14})," Warning: ",I," tab switch(es) detected. This is being monitored."]}),k&&o.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:k}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"20px"},children:s.map((ne,K)=>{const H=a[String(ne.id)]!==void 0,Q=K===c;return o.jsx("button",{onClick:()=>u(K),style:{width:"34px",height:"34px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:Q?"#8b5cf6":H?"#22c55e":"#334155",color:Q||H?"white":"#94a3b8"},children:K+1},K)})}),Z&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"24px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[o.jsxs("span",{style:{fontSize:"13px",color:"#8b5cf6",fontWeight:600},children:["Question ",c+1," of ",s.length]}),Z.difficulty&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:Z.difficulty==="hard"?"#fee2e2":Z.difficulty==="medium"?"#fef3c7":"#dcfce7",color:Z.difficulty==="hard"?"#dc2626":Z.difficulty==="medium"?"#d97706":"#16a34a"},children:Z.difficulty})]}),o.jsx("p",{style:{fontSize:"16px",fontWeight:600,marginBottom:"20px",lineHeight:1.5,color:"#f1f5f9"},children:Z.question}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(Z.options||[]).map((ne,K)=>{const H=String.fromCharCode(65+K),Q=a[String(Z.id)]===H;return o.jsxs("button",{onClick:()=>z(Z.id,H),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"10px",cursor:"pointer",background:Q?"rgba(139,92,246,0.15)":"#0f172a",border:Q?"2px solid #8b5cf6":"1px solid #475569",textAlign:"left",fontSize:"14px",transition:"all 0.15s",color:"#e2e8f0"},children:[o.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:700,background:Q?"#8b5cf6":"#1e293b",color:Q?"white":"#94a3b8",flexShrink:0},children:H}),o.jsx("span",{children:ne})]},K)})}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px"},children:[o.jsxs("button",{onClick:()=>u(Math.max(0,c-1)),disabled:c===0,style:{padding:"8px 16px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"6px",opacity:c===0?.4:1},children:[o.jsx(B1,{size:14})," Previous"]}),o.jsxs("button",{onClick:()=>u(Math.min(s.length-1,c+1)),disabled:c===s.length-1,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:c===s.length-1?.4:1},children:["Next ",o.jsx(hm,{size:14})]})]})]}),F&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[o.jsx(Pn,{size:36,color:"#fbbf24",style:{marginBottom:"12px"}}),o.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Unanswered Questions"}),o.jsxs("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:["You have ",s.length-Object.keys(a).length," unanswered question(s). Submit anyway?"]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>D(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),o.jsx("button",{onClick:()=>ee(!1),style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit Anyway"})]})]})})]})}const kv="http://localhost:8000",qH=[{value:"python",label:"Python",monacoId:"python"},{value:"javascript",label:"JavaScript",monacoId:"javascript"},{value:"java",label:"Java",monacoId:"java"},{value:"c",label:"C",monacoId:"c"},{value:"cpp",label:"C++",monacoId:"cpp"}];function EVe({attemptId:t,attemptData:e,onComplete:n,onFailed:r}){const[s,i]=C.useState([]),[a,l]=C.useState(0),[c,u]=C.useState({}),[d,f]=C.useState({}),[A,m]=C.useState(""),[g,y]=C.useState(""),[x,v]=C.useState(!1),[w,B]=C.useState(null),[k,j]=C.useState(!1),[I,O]=C.useState(!1),[F,D]=C.useState(!1),[T,N]=C.useState(!1),[P,z]=C.useState({}),[U,ee]=C.useState(null),[q,Z]=C.useState(!0),[G,ne]=C.useState(""),[K,H]=C.useState(null),Q=C.useRef(null);C.useEffect(()=>{if(K!==null){if(K<=0){X();return}return Q.current=setInterval(()=>{H(ie=>ie<=1?(clearInterval(Q.current),X(),0):ie-1)},1e3),()=>clearInterval(Q.current)}},[K]);const X=()=>{alert("Time is up! Submitting your test automatically."),me()},re=ie=>{const Le=Math.floor(ie/60),nt=ie%60;return`${Le}:${nt<10?"0":""}${nt}`};C.useEffect(()=>{le()},[]);const le=async()=>{try{const{data:ie}=await Xe.post(`${kv}/api/skill-tests/coding/start/${t}`);i(ie.problems||[]),z(ie.existing_submissions||{});const Le={},nt={};(ie.problems||[]).forEach(Et=>{const _e="python";let ht="";Et.starter_code&&typeof Et.starter_code=="object"?ht=Et.starter_code[_e]||Ae(Et,_e):typeof Et.starter_code=="string"?ht=Et.starter_code:ht=Ae(Et,_e),Le[Et.id]=ht,nt[Et.id]=_e}),u(Le),f(nt),ie.duration_minutes&&H(ie.duration_minutes*60),Z(!1)}catch(ie){ne(ie.response?.data?.error||ie.message),Z(!1)}},Ae=(ie,Le)=>{const nt=ie.title||"Solution";return Le==="python"?`import sys

# ${nt}
def solution():
    # Write your code here
    pass

# !!! DO NOT EDIT BELOW THIS LINE !!!
if __name__ == '__main__':
    # Default driver code (fallback)
    lines = sys.stdin.read().split('\\n')
    # ... print(solution(...))
`:Le==="javascript"?`const fs = require('fs');

// ${nt}
function solution() {
    // Write your code here
}

// !!! DO NOT EDIT BELOW THIS LINE !!!
try {
    const input = fs.readFileSync(0, 'utf-8');
    // ... console.log(solution(...))
} catch (e) {}
`:Le==="java"?`import java.util.*;

public class Main {
    public static void solution() {
        // Write your code here
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        // ...
    }
}
`:Le==="c"?`#include <stdio.h>
#include <stdlib.h>

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:Le==="cpp"?`#include <iostream>
#include <vector>
#include <string>
using namespace std;

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:`// ${nt}
`},xe=async()=>{const ie=s[a];if(ie){j(!0),m(""),B(null);try{const{data:Le}=await Xe.post(`${kv}/api/skill-tests/coding/run`,{code:c[ie.id]||"",language:d[ie.id]||"python",input_data:g||" "});m(Le.success?Le.output||"No output":`Error:
${Le.error||Le.output||"Unknown error"}`)}catch(Le){m("Error: "+(Le.response?.data?.error||Le.message))}finally{j(!1)}}},Be=async()=>{const ie=s[a];if(ie){O(!0),B(null);try{const{data:Le}=await Xe.post(`${kv}/api/skill-tests/coding/submit`,{attemptId:t,problemId:ie.id,code:c[ie.id]||"",language:d[ie.id]||"python"});B(Le.test_results||[]),Le.all_passed&&z(nt=>({...nt,[String(ie.id)]:!0}))}catch(Le){ne(Le.response?.data?.error||Le.message)}finally{O(!1)}}},me=async()=>{N(!1),D(!0);try{const{data:ie}=await Xe.post(`${kv}/api/skill-tests/coding/finish/${t}`);ee(ie),ie.passed?setTimeout(()=>n(ie),2e3):setTimeout(()=>r(),3e3)}catch(ie){ne(ie.response?.data?.error||ie.message),D(!1)}},[ve,je]=C.useState(!1),ye=async()=>{je(!0),ne("");try{await Xe.post(`${kv}/api/skill-tests/coding/regenerate/${t}`),await le()}catch(ie){ne(ie.response?.data?.error||"Failed to regenerate. Please try again."),je(!1)}};if(q)return o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:[o.jsx(mA,{size:24,style:{animation:"spin 1s linear infinite",marginBottom:"8px"}})," Loading coding problems..."]});if(!q&&s.length===0&&!U)return o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsx(Lg,{size:48,color:"#64748b",style:{marginBottom:"16px"}}),o.jsx("h3",{style:{color:"#f1f5f9",margin:"0 0 8px"},children:"No Coding Problems Available"}),o.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",marginBottom:"20px"},children:"Problems couldn't be generated. Click below to regenerate them."}),G&&o.jsx("p",{style:{color:"#fca5a5",fontSize:"13px",marginBottom:"16px"},children:G}),o.jsx("button",{onClick:ye,disabled:ve,style:{padding:"10px 24px",background:ve?"#6d28d9":"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:ve?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"inline-flex",alignItems:"center",gap:"8px",opacity:ve?.7:1},children:ve?o.jsxs(o.Fragment,{children:[o.jsx(mA,{size:16,style:{animation:"spin 1s linear infinite"}})," Generating Problems..."]}):" Regenerate Problems"}),o.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]});if(U)return o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:U.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:U.passed?o.jsx(Nn,{size:40,color:"#22c55e"}):o.jsx(kr,{size:40,color:"#ef4444"})}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:U.passed?"Coding Passed!":"Coding Failed"}),o.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",U.solved,"/",U.total," (",Math.round(U.score),"%)"]}),o.jsx("p",{style:{fontSize:"14px",color:U.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:U.passed?"Proceeding to SQL section...":"Assessment ended. Generating report..."})]});const ze=s[a],at=Object.keys(P).length;return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"16px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(Lg,{size:20,color:"#8b5cf6"}),o.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"Coding Test"}),o.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[at,"/",s.length," solved"]}),K!==null&&o.jsxs("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:K<300?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.15)",color:K<300?"#fca5a5":"#60a5fa",border:"1px solid "+(K<300?"rgba(239,68,68,0.4)":"rgba(59,130,246,0.3)")},children:["Time Left: ",re(K)]})]}),o.jsx("button",{onClick:()=>N(!0),disabled:F,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",opacity:F?.6:1},children:F?"Submitting...":"Finish Coding "})]}),G&&o.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"10px",marginBottom:"12px",color:"#fca5a5",fontSize:"13px"},children:G}),o.jsx("div",{style:{display:"flex",gap:"6px",marginBottom:"12px"},children:s.map((ie,Le)=>{const nt=P[String(ie.id)];return o.jsxs("button",{onClick:()=>{l(Le),m(""),B(null)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:Le===a?"#8b5cf6":nt?"#22c55e":"#334155",color:Le===a||nt?"white":"#94a3b8"},children:["P",Le+1," ",nt?"":""]},Le)})}),ze&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",padding:"16px",overflowY:"auto",maxHeight:"600px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:700,color:"#f1f5f9"},children:ze.title}),ze.difficulty&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:ze.difficulty==="hard"?"rgba(239,68,68,0.15)":ze.difficulty==="medium"?"rgba(245,158,11,0.15)":"rgba(34,197,94,0.15)",color:ze.difficulty==="hard"?"#f87171":ze.difficulty==="medium"?"#fbbf24":"#34d399"},children:ze.difficulty})]}),o.jsx("p",{style:{fontSize:"14px",lineHeight:1.6,color:"#cbd5e1"},children:ze.description}),ze.examples&&ze.examples.length>0&&o.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",padding:"12px",borderRadius:"8px",border:"1px solid #334155"},children:[o.jsx("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:"#10b981",display:"flex",alignItems:"center",gap:"6px"},children:" Sample Input/Output"}),ze.examples.map((ie,Le)=>o.jsxs("div",{style:{background:"#1e293b",padding:"10px",borderRadius:"6px",marginBottom:"8px",fontSize:"12px",color:"#cbd5e1",fontFamily:"monospace"},children:[o.jsxs("div",{style:{marginBottom:"6px"},children:[o.jsx("strong",{style:{color:"#10b981"},children:"Input:"}),o.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:ie.input})]}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#10b981"},children:"Expected Output:"}),o.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:ie.output})]}),ie.explanation&&o.jsx("div",{style:{color:"#94a3b8",marginTop:"6px",fontSize:"11px"},children:o.jsxs("em",{children:[" ",ie.explanation]})})]},Le))]}),ze.constraints&&o.jsxs("div",{style:{marginTop:"16px"},children:[o.jsx("h4",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#94a3b8"},children:"Constraints:"}),o.jsx("p",{style:{fontSize:"13px",color:"#64748b"},children:ze.constraints})]}),w&&o.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",border:"2px solid #334155",borderRadius:"8px",padding:"12px"},children:[o.jsx("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:"#10b981",display:"flex",alignItems:"center",gap:"6px"},children:" Test Results"}),o.jsx("div",{style:{display:"grid",gap:"8px"},children:w.map((ie,Le)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px",background:ie.passed?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",border:`1px solid ${ie.passed?"#22c55e":"#ef4444"}`,borderRadius:"6px",fontSize:"12px",color:"#cbd5e1"},children:[ie.passed?o.jsx(Nn,{size:16,color:"#22c55e"}):o.jsx(kr,{size:16,color:"#ef4444"}),o.jsxs("span",{style:{flex:1},children:[o.jsxs("strong",{children:["Test Case ",Le+1,":"]})," ",ie.passed?" Passed":" Failed"]})]},Le))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[o.jsx("select",{value:d[ze.id]||"python",onChange:ie=>{const Le=ie.target.value;f(Et=>({...Et,[ze.id]:Le})),c[ze.id];let nt="";ze.starter_code&&typeof ze.starter_code=="object"&&ze.starter_code[Le]?nt=ze.starter_code[Le]:nt=Ae(ze,Le),u(Et=>({...Et,[ze.id]:nt}))},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",fontSize:"13px",background:"#0f172a",color:"#f1f5f9",fontWeight:600},children:qH.map(ie=>o.jsx("option",{value:ie.value,children:ie.label},ie.value))}),o.jsxs("button",{onClick:xe,disabled:k,style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:k?.6:1,transition:"all 0.2s"},children:[k?o.jsx(mA,{size:16,className:"animate-spin"}):o.jsx(dd,{size:16}),o.jsx("strong",{children:" Check Your Code"})]}),o.jsxs("button",{onClick:Be,disabled:I,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:I?.6:1,transition:"all 0.2s"},children:[I?o.jsx(mA,{size:16}):o.jsx($c,{size:16}),o.jsx("strong",{children:"Submit Solution"})]})]}),o.jsx("div",{style:{border:"1px solid #334155",borderRadius:"8px",overflow:"hidden",flex:1,minHeight:"400px"},children:o.jsx(kw,{height:"400px",language:qH.find(ie=>ie.value===(d[ze.id]||"python"))?.monacoId||"python",value:c[ze.id]||"",onChange:ie=>u(Le=>({...Le,[ze.id]:ie||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:10}}})}),o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>v(!x),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"#94a3b8",fontSize:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:x?"1px solid #334155":"none"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[" Custom Input ",g?"(has input)":""]}),o.jsx("span",{children:x?"":""})]}),x&&o.jsx("textarea",{value:g,onChange:ie=>y(ie.target.value),placeholder:"Enter custom input here (stdin)...",style:{width:"100%",minHeight:"70px",padding:"8px 12px",background:"#0f172a",color:"#f1f5f9",border:"none",fontSize:"13px",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box",outline:"none"}})]}),o.jsxs("div",{style:{background:"#0f172a",color:"#d4d4d4",padding:"12px",borderRadius:"8px",fontSize:"13px",fontFamily:"monospace",minHeight:"100px",maxHeight:"180px",overflowY:"auto",border:"2px solid #334155"},children:[o.jsxs("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:A?"#10b981":"#475569"}}),"OUTPUT TERMINAL"]}),o.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word",color:A?"#10b981":"#64748b"},children:A||"(Run your code to see output here...)"})]})]})]}),T&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[o.jsx($c,{size:36,color:"#8b5cf6",style:{marginBottom:"12px"}}),o.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Submit Coding?"}),o.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:"Submit your coding solutions? This will move to the SQL section."}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>N(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),o.jsx("button",{onClick:me,style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit"})]})]})})]})}const ek="http://localhost:8000";function IVe({attemptId:t,attemptData:e,onComplete:n,onFailed:r}){const[s,i]=C.useState([]),[a,l]=C.useState(0),[c,u]=C.useState({}),[d,f]=C.useState(null),[A,m]=C.useState(null),[g,y]=C.useState({}),[x,v]=C.useState(!1),[w,B]=C.useState(!1),[k,j]=C.useState(!1),[I,O]=C.useState(null),[F,D]=C.useState(!0),[T,N]=C.useState(null),[P,z]=C.useState(""),[U,ee]=C.useState(!1),[q,Z]=C.useState(!1),[G,ne]=C.useState(null),K=C.useRef(null);C.useEffect(()=>{if(G!==null){if(G<=0){H();return}return K.current=setInterval(()=>{ne(je=>je<=1?(clearInterval(K.current),H(),0):je-1)},1e3),()=>clearInterval(K.current)}},[G]);const H=()=>{alert("Time is up! Submitting your test automatically."),Ae()},Q=je=>{const ye=Math.floor(je/60),ze=je%60;return`${ye}:${ze<10?"0":""}${ze}`};C.useEffect(()=>{X()},[]);const X=async()=>{try{const{data:je}=await Xe.post(`${ek}/api/skill-tests/sql/start/${t}`);i(je.problems||[]),y(je.existing_submissions||{});const ye={};(je.problems||[]).forEach(ze=>{ye[ze.id]=""}),u(ye),je.duration_minutes&&ne(je.duration_minutes*60),D(!1)}catch(je){z(je.response?.data?.error||je.message),D(!1)}},re=async()=>{const je=s[a];if(je){v(!0),f(null),m(null);try{const{data:ye}=await Xe.post(`${ek}/api/skill-tests/sql/run`,{query:c[je.id]||"",attemptId:t});f(ye)}catch(ye){f({success:!1,error:ye.message})}finally{v(!1)}}},le=async()=>{const je=s[a];if(je){B(!0),m(null);try{const{data:ye}=await Xe.post(`${ek}/api/skill-tests/sql/evaluate`,{attemptId:t,problemId:je.id,query:c[je.id]||""});m(ye),ye.passed&&y(ze=>({...ze,[String(je.id)]:{passed:!0}}))}catch(ye){z(ye.response?.data?.error||ye.message)}finally{B(!1)}}},Ae=async()=>{Z(!1),j(!0);try{const{data:je}=await Xe.post(`${ek}/api/skill-tests/sql/finish/${t}`);O(je),ee(!0)}catch(je){z(je.response?.data?.error||je.message),j(!1)}},xe=()=>{I?.passed?n(I):r()};if(F)return o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading SQL problems..."});if(I)return o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:I.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:I.passed?o.jsx(Nn,{size:40,color:"#22c55e"}):o.jsx(kr,{size:40,color:"#ef4444"})}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:I.passed?"SQL Passed!":"SQL Failed"}),o.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",I.solved,"/",I.total," (",Math.round(I.score),"%)"]}),o.jsxs("div",{style:{marginTop:"32px"},children:[o.jsxs("button",{onClick:xe,style:{padding:"12px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"16px",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:[I.passed?"Continue to Interview":"View Report"," ",o.jsx(Dg,{size:18})]}),o.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"12px"},children:"Click to proceed to the next stage"})]})]});const Be=s[a],me=Object.values(g).filter(je=>je.passed).length,ve=`
 Available Tables:

employees (id, name, department, salary, hire_date, manager_id)
departments (id, name, budget, location)
projects (id, name, department_id, start_date, end_date, status)
orders (id, customer_name, product, quantity, price, order_date)
    `.trim();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"16px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx(wi,{size:20,color:"#8b5cf6"}),o.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"SQL Test"}),o.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[me,"/",s.length," solved"]}),G!==null&&o.jsxs("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:G<300?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.15)",color:G<300?"#fca5a5":"#60a5fa",border:"1px solid "+(G<300?"rgba(239,68,68,0.4)":"rgba(59,130,246,0.3)")},children:["Time Left: ",Q(G)]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:()=>N(T==="schema"?null:"schema"),style:{padding:"8px 14px",background:T==="schema"?"rgba(139,92,246,0.15)":"#334155",border:"1px solid "+(T==="schema"?"#8b5cf6":"#475569"),borderRadius:"8px",cursor:"pointer",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px",color:"#f1f5f9"},children:[o.jsx(hD,{size:14})," Schema"]}),o.jsxs("button",{onClick:()=>N(T==="expected"?null:"expected"),style:{padding:"8px 14px",background:T==="expected"?"rgba(16, 185, 129, 0.15)":"#334155",border:"1px solid "+(T==="expected"?"#10b981":"#475569"),borderRadius:"8px",cursor:"pointer",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px",color:"#f1f5f9"},children:[o.jsx(Br,{size:14})," Expected Output"]}),o.jsx("button",{onClick:()=>Z(!0),disabled:k,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",opacity:k?.6:1},children:k?"Submitting...":"Finish SQL "})]})]}),P&&o.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"10px",marginBottom:"12px",color:"#fca5a5",fontSize:"13px"},children:P}),T&&o.jsx("div",{style:{background:"#1e1e1e",color:"#d4d4d4",padding:"16px",borderRadius:"8px",marginBottom:"16px",fontSize:"13px",fontFamily:"monospace",whiteSpace:"pre-line",border:"1px solid #334155",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:T==="schema"?ve:o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"8px",color:"#10b981",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Br,{size:16})," Expected Result Structure"]}),s[a]?.expected_output_description&&o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("div",{style:{color:"#94a3b8",fontSize:"12px",marginBottom:"4px"},children:"Description:"}),o.jsx("div",{style:{color:"#e2e8f0"},children:s[a].expected_output_description})]}),s[a]?.expected_columns&&o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("div",{style:{color:"#94a3b8",fontSize:"12px",marginBottom:"4px"},children:"Required Columns:"}),o.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:s[a].expected_columns.map(je=>o.jsx("span",{style:{padding:"2px 8px",background:"rgba(96, 165, 250, 0.1)",border:"1px solid rgba(96, 165, 250, 0.2)",borderRadius:"4px",color:"#60a5fa"},children:je},je))})]}),s[a]?.expected_output&&o.jsxs("div",{children:[o.jsx("div",{style:{color:"#94a3b8",fontSize:"12px",marginBottom:"4px"},children:"Sample Data:"}),o.jsx("pre",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.05)",color:"#a7f3d0"},children:s[a].expected_output})]}),!s[a]?.expected_output_description&&!s[a]?.expected_columns&&!s[a]?.expected_output&&o.jsx("span",{style:{color:"#64748b",fontStyle:"italic"},children:"No expected output details available for this problem."})]})}),o.jsx("div",{style:{display:"flex",gap:"6px",marginBottom:"12px"},children:s.map((je,ye)=>{const ze=g[String(je.id)]?.passed;return o.jsxs("button",{onClick:()=>{l(ye),f(null),m(null)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:ye===a?"#8b5cf6":ze?"#22c55e":"#334155",color:ye===a||ze?"white":"#94a3b8"},children:["Q",ye+1," ",ze?"":""]},ye)})}),Be&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",padding:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 8px",fontSize:"16px",fontWeight:700,color:"#f1f5f9"},children:Be.title}),Be.difficulty&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,display:"inline-block",marginBottom:"12px",background:Be.difficulty==="hard"?"rgba(239,68,68,0.15)":Be.difficulty==="medium"?"rgba(245,158,11,0.15)":"rgba(34,197,94,0.15)",color:Be.difficulty==="hard"?"#f87171":Be.difficulty==="medium"?"#fbbf24":"#34d399"},children:Be.difficulty}),o.jsx("p",{style:{fontSize:"14px",lineHeight:1.6,color:"#cbd5e1"},children:Be.description}),Be.expected_output_description&&o.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"rgba(34,197,94,0.1)",borderRadius:"6px",fontSize:"13px",color:"#34d399"},children:[o.jsx("strong",{children:"Expected:"})," ",Be.expected_output_description]}),Be.expected_columns&&o.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"rgba(59,130,246,0.1)",borderRadius:"6px",fontSize:"13px",color:"#60a5fa"},children:[o.jsx("strong",{children:"Expected Columns:"})," ",Be.expected_columns.join(", ")]}),Be.hints&&o.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"rgba(245,158,11,0.1)",borderRadius:"6px",fontSize:"13px",color:"#fbbf24"},children:[o.jsx("strong",{children:"Hint:"})," ",Be.hints]}),A&&o.jsxs("div",{style:{marginTop:"16px",padding:"12px",borderRadius:"8px",background:A.passed?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",border:"1px solid "+(A.passed?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)")},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:600,color:A.passed?"#34d399":"#f87171"},children:[A.passed?o.jsx(Nn,{size:16,color:"#22c55e"}):o.jsx(kr,{size:16,color:"#ef4444"}),A.passed?"Query Correct!":"Query Incorrect"]}),A.feedback&&o.jsx("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#cbd5e1",lineHeight:1.5},children:A.feedback})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:re,disabled:x,style:{padding:"6px 14px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px",opacity:x?.6:1},children:[x?o.jsx(mA,{size:14}):o.jsx(dd,{size:14})," Run"]}),o.jsxs("button",{onClick:le,disabled:w,style:{padding:"6px 14px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px",opacity:w?.6:1},children:[w?o.jsx(mA,{size:14}):o.jsx($c,{size:14})," Submit"]})]}),o.jsx("div",{style:{border:"1px solid #334155",borderRadius:"8px",overflow:"hidden",minHeight:"220px"},children:o.jsx(kw,{height:"220px",language:"sql",value:c[Be.id]||"",onChange:je=>u(ye=>({...ye,[Be.id]:je||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:10}}})}),o.jsx("div",{style:{background:"#1e1e1e",color:"#d4d4d4",padding:"12px",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",minHeight:"160px",maxHeight:"300px",overflowY:"auto"},children:d?d.success?d.rows&&d.rows.length>0?o.jsxs("div",{style:{overflowX:"auto"},children:[o.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[o.jsx("thead",{children:o.jsx("tr",{children:d.columns.map(je=>o.jsx("th",{style:{padding:"4px 8px",borderBottom:"1px solid #444",textAlign:"left",color:"#93c5fd"},children:je},je))})}),o.jsx("tbody",{children:d.rows.slice(0,50).map((je,ye)=>o.jsx("tr",{children:d.columns.map(ze=>o.jsx("td",{style:{padding:"4px 8px",borderBottom:"1px solid #333"},children:je[ze]??"NULL"},ze))},ye))})]}),o.jsxs("div",{style:{marginTop:"8px",color:"#6b7280"},children:[d.rows.length," row(s) returned",d.rows.length>50&&" (showing first 50)"]})]}):o.jsx("span",{style:{color:"#22c55e"},children:d.message||"Query executed (no results)"}):o.jsxs("span",{style:{color:"#ef4444"},children:["Error: ",d.error]}):o.jsx("span",{style:{color:"#6b7280"},children:"Run your query to see results..."})})]})]}),q&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[o.jsx(wi,{size:36,color:"#8b5cf6",style:{marginBottom:"12px"}}),o.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Submit SQL?"}),o.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:"Submit your SQL solutions? This will move to the Interview section."}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>Z(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),o.jsx("button",{onClick:Ae,style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit"})]})]})})]})}function GH({state:t="idle",size:e=300}){const n={white:"#F8FAFC",silver:"#CBD5E1",dark:"#1E293B",blueWait:"#0EA5E9",blueActive:"#38BDF8",green:"#4ADE80",pink:"#F472B6"},s=t==="listening"?n.green:t==="thinking"?n.pink:t==="speaking"?n.blueActive:n.blueWait;return o.jsxs("div",{className:"avatar-container",style:{display:"flex",flexDirection:"column",alignItems:"center",filter:"drop-shadow(0 8px 24px rgba(14, 165, 233, 0.15))"},children:[o.jsxs("svg",{width:e,height:e*1.2,viewBox:"0 0 400 500",style:{overflow:"visible"},children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"bodyGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#FFFFFF"}),o.jsx("stop",{offset:"100%",stopColor:"#E2E8F0"})]}),o.jsxs("radialGradient",{id:"screenGrad",cx:"50%",cy:"40%",r:"80%",children:[o.jsx("stop",{offset:"0%",stopColor:"#334155"}),o.jsx("stop",{offset:"100%",stopColor:"#020617"})]}),o.jsxs("filter",{id:"blueGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"coloredBlur"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),o.jsx("g",{transform:"translate(200, 360)",children:o.jsxs("g",{children:[o.jsx("path",{d:"M-60 -20 Q-70 100 0 110 Q70 100 60 -20 L40 -40 Q0 -30 -40 -40 Z",fill:"url(#bodyGrad)",stroke:n.silver,strokeWidth:"2"}),o.jsx("path",{d:"M-20 0 L-20 60 M0 10 L0 70 M20 0 L20 60",stroke:s,strokeWidth:"4",strokeLinecap:"round",opacity:"0.8",filter:"url(#blueGlow)",children:t==="speaking"&&o.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"0.5s",repeatCount:"indefinite"})}),o.jsxs("g",{transform:"translate(0, -35)",children:[o.jsx("rect",{x:"-15",y:"-15",width:"30",height:"30",rx:"4",fill:n.dark}),o.jsx("rect",{x:"-15",y:"-10",width:"30",height:"4",fill:n.silver}),o.jsx("rect",{x:"-15",y:"0",width:"30",height:"4",fill:n.silver})]})]})}),o.jsxs("g",{transform:"translate(280.5, 340)",children:[o.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:n.silver}),o.jsx("circle",{cx:"0",cy:"0",r:"10",fill:n.dark}),o.jsxs("g",{children:[t==="idle"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"-5; 5; -5",dur:"3s",repeatCount:"indefinite"}),t==="speaking"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; 0; -10; 0",dur:"2s",repeatCount:"indefinite"}),o.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),o.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:n.dark,opacity:"0.5"}),o.jsxs("g",{transform:"translate(0, 60)",children:[o.jsx("circle",{cx:"0",cy:"0",r:"14",fill:n.silver}),o.jsxs("g",{transform:"rotate(-30)",children:[o.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),o.jsxs("g",{transform:"translate(0, 55)",children:[o.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),o.jsx("rect",{x:"-14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(-15)"}),o.jsx("rect",{x:"-5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),o.jsx("rect",{x:"5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),o.jsx("rect",{x:"14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(15)"})]})]})]})]})]}),o.jsxs("g",{transform:"translate(119.5, 340) scale(-1, 1)",children:[o.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:n.silver}),o.jsx("circle",{cx:"0",cy:"0",r:"10",fill:n.dark}),o.jsxs("g",{children:[t==="idle"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"5; -5; 5",dur:"3s",repeatCount:"indefinite"}),t==="speaking"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 10; 0; 5; 0",dur:"2.5s",repeatCount:"indefinite",delay:"0.5s"}),o.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),o.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:n.dark,opacity:"0.5"}),o.jsxs("g",{transform:"translate(0, 60)",children:[o.jsx("circle",{cx:"0",cy:"0",r:"14",fill:n.silver}),o.jsxs("g",{transform:"rotate(-30)",children:[o.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),o.jsxs("g",{transform:"translate(0, 55)",children:[o.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),o.jsx("rect",{x:"-5",y:"5",width:"10",height:"12",rx:"3",fill:"#E2E8F0"})]})]})]})]})]}),o.jsx("g",{transform:"translate(200, 240)",children:o.jsxs("g",{children:[t==="listening"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 5; 0; -2; 0",dur:"4s",repeatCount:"indefinite"}),t==="thinking"&&o.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; -15",dur:"1s",fill:"freeze"}),t==="speaking"&&o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0 0; 0 2; 0 0",dur:"0.2s",repeatCount:"indefinite",additive:"sum"}),o.jsx("path",{d:"M-80 0 C-80 -70 -50 -90 0 -90 C50 -90 80 -70 80 0 C80 60 50 80 0 80 C-50 80 -80 60 -80 0 Z",fill:"url(#bodyGrad)",stroke:"#CBD5E1",strokeWidth:"2"}),o.jsx("rect",{x:"-60",y:"-40",width:"120",height:"90",rx:"25",fill:"url(#screenGrad)",stroke:"#334155",strokeWidth:"2"}),o.jsx("line",{x1:"50",y1:"-75",x2:"70",y2:"-100",stroke:n.silver,strokeWidth:"4",strokeLinecap:"round"}),o.jsx("circle",{cx:"70",cy:"-100",r:"6",fill:s,filter:"url(#blueGlow)",children:o.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("path",{d:"M-82 -10 L-88 -10 L-88 30 L-82 30 Z",fill:n.silver}),o.jsx("rect",{x:"-92",y:"-15",width:"14",height:"50",rx:"4",fill:n.white,stroke:n.silver}),o.jsx("circle",{cx:"-85",cy:"10",r:"12",fill:n.dark}),o.jsx("circle",{cx:"-85",cy:"10",r:"6",fill:s,opacity:"0.7"})]}),o.jsxs("g",{children:[o.jsx("path",{d:"M82 -10 L88 -10 L88 30 L82 30 Z",fill:n.silver}),o.jsx("rect",{x:"78",y:"-15",width:"14",height:"50",rx:"4",fill:n.white,stroke:n.silver}),o.jsx("circle",{cx:"85",cy:"10",r:"12",fill:n.dark}),o.jsx("circle",{cx:"85",cy:"10",r:"6",fill:s,opacity:"0.7"})]}),o.jsxs("g",{transform:"translate(0, 5)",children:[o.jsxs("g",{transform:"translate(-25, -5)",children:[o.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:s,strokeWidth:"3",filter:"url(#blueGlow)"}),o.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),t==="idle"&&o.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),o.jsxs("g",{transform:"translate(25, -5)",children:[o.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:s,strokeWidth:"3",filter:"url(#blueGlow)"}),o.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),t==="idle"&&o.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),o.jsx("g",{transform:"translate(0, 30)",children:t==="speaking"?o.jsx("path",{d:"M-10 0 Q0 10 10 0",fill:"none",stroke:s,strokeWidth:"3",strokeLinecap:"round",children:o.jsx("animate",{attributeName:"d",values:"M-10 0 Q0 15 10 0; M-10 0 Q0 5 10 0; M-10 0 Q0 15 10 0",dur:"0.3s",repeatCount:"indefinite"})}):o.jsx("path",{d:"M-8 0 Q0 5 8 0",fill:"none",stroke:s,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8"})})]})]})})]}),o.jsxs("div",{style:{marginTop:"-30px",padding:"8px 20px",background:t==="speaking"?"rgba(56, 189, 248, 0.1)":"rgba(30, 41, 59, 0.8)",backdropFilter:"blur(4px)",borderRadius:"24px",border:`1px solid ${s}40`,display:"flex",alignItems:"center",gap:"8px",zIndex:10},children:[o.jsx("span",{style:{display:"block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:s,boxShadow:`0 0 10px ${s}`,animation:t==="speaking"?"pulse 1s infinite":"none"}}),o.jsx("span",{style:{color:"white",fontSize:"13px",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:t==="speaking"?"AI Interviewer":t==="listening"?"Listening...":t==="thinking"?"Thinking...":"Ready"})]}),o.jsx("style",{children:`
                    @keyframes pulse { 0% { opacity: 0.5; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } 100% { opacity: 0.5; transform: scale(0.8); } }
                `})]})}const KH="http://localhost:8000";function NVe({attemptId:t,attemptData:e,onComplete:n,onFailed:r}){const[s,i]=C.useState(""),[a,l]=C.useState(""),[c,u]=C.useState("medium"),[d,f]=C.useState(1),[A,m]=C.useState(5),[g,y]=C.useState(""),[x,v]=C.useState(null),[w,B]=C.useState("idle"),[k,j]=C.useState(!1),[I,O]=C.useState(!1),[F,D]=C.useState(!0),[T,N]=C.useState(!1),[P,z]=C.useState(null),[U,ee]=C.useState(!0),[q,Z]=C.useState([]),[G,ne]=C.useState(""),[K,H]=C.useState(null),Q=C.useRef(null),X=C.useRef(null),re=C.useRef(null);C.useEffect(()=>{if(K!==null){if(K<=0){le();return}return re.current=setInterval(()=>{H(ye=>ye<=1?(clearInterval(re.current),le(),0):ye-1)},1e3),()=>clearInterval(re.current)}},[K]);const le=()=>{alert("Time is up! Submitting your test automatically."),r()},Ae=ye=>{const ze=Math.floor(ye/60),at=ye%60;return`${ze}:${at<10?"0":""}${at}`};C.useEffect(()=>(X.current=window.speechSynthesis,xe(),()=>{ve(),X.current&&X.current.cancel()}),[]);const xe=async()=>{try{const{data:ye}=await Xe.post(`${KH}/api/skill-tests/interview/start/${t}`);i(ye.question),l(ye.category||""),u(ye.difficulty||"medium"),f(ye.question_number),m(ye.total_questions),ye.duration_minutes&&H(ye.duration_minutes*60),ee(!1),F&&Be(ye.question)}catch(ye){ne(ye.response?.data?.error||ye.message),ee(!1)}},Be=ye=>{if(!X.current||!F)return;X.current.cancel();const ze=new SpeechSynthesisUtterance(ye);ze.rate=.95,ze.pitch=1,ze.volume=.8,ze.onstart=()=>{O(!0),B("speaking")},ze.onend=()=>{O(!1),B("idle")},ze.onerror=()=>{O(!1),B("idle")},X.current.speak(ze)},me=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){ne("Speech recognition not supported in this browser. Please type your answer.");return}const ye=window.SpeechRecognition||window.webkitSpeechRecognition,ze=new ye;ze.continuous=!0,ze.interimResults=!0,ze.lang="en-US";let at=g;ze.onresult=ie=>{let Le="";for(let nt=ie.resultIndex;nt<ie.results.length;nt++)ie.results[nt].isFinal?at+=ie.results[nt][0].transcript+" ":Le+=ie.results[nt][0].transcript;y(at+Le)},ze.onend=()=>{j(!1),B("idle")},ze.onerror=ie=>{ie.error!=="no-speech"&&console.error("Speech error:",ie.error),j(!1),B("idle")},Q.current=ze,ze.start(),j(!0),B("listening"),X.current&&X.current.cancel()},ve=()=>{Q.current&&(Q.current.stop(),Q.current=null),j(!1),B("idle")},je=async()=>{if(!g.trim())return ne("Please provide an answer");N(!0),ne(""),v(null),B("thinking"),ve();try{const{data:ye}=await Xe.post(`${KH}/api/skill-tests/interview/answer`,{attemptId:t,answer:g.trim()});Z(ze=>[...ze,{question:s,answer:g.trim(),score:ye.score,feedback:ye.feedback}]),v({score:ye.score,feedback:ye.feedback}),ye.is_complete?(z({passed:ye.passed,overall_score:ye.overall_score,status:ye.status}),B("idle"),ye.passed?setTimeout(()=>n(ye),3e3):setTimeout(()=>r(),3e3)):setTimeout(()=>{i(ye.next_question),l(ye.next_category||""),u(ye.next_difficulty||"medium"),f(ye.question_number),y(""),v(null),B("idle"),F&&Be(ye.next_question)},3e3)}catch(ye){ne(ye.response?.data?.error||ye.message),B("idle")}finally{N(!1)}};return U?o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Starting AI Interview..."}):P?o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsx(GH,{state:"idle",size:160}),o.jsxs("div",{style:{marginTop:"20px"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:P.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:P.passed?o.jsx(Nn,{size:40,color:"#22c55e"}):o.jsx(kr,{size:40,color:"#ef4444"})}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:P.passed?"Interview Passed!":"Interview Not Passed"}),o.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Average Score: ",(P.overall_score||0).toFixed(1),"/10"]}),o.jsx("p",{style:{fontSize:"14px",color:P.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:P.passed?"Assessment complete! Generating report...":"Assessment ended. Generating report..."})]})]}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"24px"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[o.jsx(GH,{state:w,size:220}),K!==null&&o.jsxs("div",{style:{padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:600,background:K<300?"rgba(239,68,68,0.2)":"rgba(139,92,246,0.15)",color:K<300?"#fca5a5":"#a78bfa",border:"1px solid "+(K<300?"rgba(239,68,68,0.4)":"rgba(139,92,246,0.3)"),marginBottom:"8px"},children:["Time Left: ",Ae(K)]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("span",{style:{fontSize:"13px",fontWeight:700,color:"#8b5cf6"},children:["Question ",d,"/",A]}),a&&o.jsx("div",{style:{marginTop:"4px",padding:"2px 10px",borderRadius:"12px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",fontSize:"11px",fontWeight:600,display:"inline-block"},children:a})]}),o.jsxs("button",{onClick:()=>{const ye=!F;D(ye),!ye&&X.current&&X.current.cancel()},style:{padding:"8px 14px",background:F?"rgba(34,197,94,0.1)":"#334155",border:"1px solid "+(F?"rgba(34,197,94,0.3)":"#475569"),borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:"#f1f5f9",display:"flex",alignItems:"center",gap:"6px"},children:[F?o.jsx(C7,{size:14}):o.jsx(Wye,{size:14}),"Voice ",F?"On":"Off"]}),q.length>0&&o.jsxs("div",{style:{width:"100%",maxHeight:"200px",overflowY:"auto",background:"#0f172a",borderRadius:"8px",padding:"10px",fontSize:"11px"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"6px",color:"#94a3b8"},children:"Previous Answers"}),q.map((ye,ze)=>o.jsxs("div",{style:{marginBottom:"8px",padding:"6px",background:"#1e293b",borderRadius:"4px"},children:[o.jsxs("div",{style:{fontWeight:600,color:"#cbd5e1"},children:["Q",ze+1,": ",ye.question.slice(0,50),"..."]}),o.jsxs("div",{style:{color:ye.score>=7?"#22c55e":ye.score>=5?"#f59e0b":"#ef4444"},children:["Score: ",ye.score,"/10"]})]},ze))]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[G&&o.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"10px",color:"#fca5a5",fontSize:"13px"},children:G}),o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[o.jsx(qp,{size:18,color:"#8b5cf6"}),o.jsx("span",{style:{fontWeight:700,fontSize:"14px",color:"#8b5cf6"},children:"Interviewer"}),c&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",background:c==="hard"?"rgba(239,68,68,0.15)":c==="medium"?"rgba(245,158,11,0.15)":"rgba(34,197,94,0.15)",color:c==="hard"?"#f87171":c==="medium"?"#fbbf24":"#34d399"},children:c})]}),o.jsx("p",{style:{fontSize:"16px",lineHeight:1.6,color:"#f1f5f9",margin:0},children:s}),!I&&F&&o.jsxs("button",{onClick:()=>Be(s),style:{marginTop:"8px",background:"none",border:"none",cursor:"pointer",color:"#8b5cf6",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(C7,{size:14})," Replay"]})]}),x&&o.jsxs("div",{style:{background:x.score>=7?"rgba(34,197,94,0.1)":x.score>=5?"rgba(245,158,11,0.1)":"rgba(239,68,68,0.1)",border:"1px solid "+(x.score>=7?"rgba(34,197,94,0.3)":x.score>=5?"rgba(245,158,11,0.3)":"rgba(239,68,68,0.3)"),borderRadius:"10px",padding:"16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{fontWeight:700,fontSize:"14px",color:"#f1f5f9"},children:"Feedback"}),o.jsxs("span",{style:{fontWeight:700,fontSize:"16px",color:x.score>=7?"#22c55e":x.score>=5?"#d97706":"#ef4444"},children:[x.score,"/10"]})]}),o.jsx("p",{style:{fontSize:"13px",color:"#94a3b8",margin:0,lineHeight:1.5},children:x.feedback}),!P&&o.jsx("p",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:"Next question coming up..."})]}),!x&&!P&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:"#f1f5f9"},children:"Your Answer"}),o.jsxs("span",{style:{fontSize:"12px",color:"#64748b"},children:[g.split(/\s+/).filter(Boolean).length," words"]})]}),o.jsx("textarea",{value:g,onChange:ye=>y(ye.target.value),placeholder:"Type your answer or use the microphone...",rows:6,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #475569",fontSize:"14px",lineHeight:1.6,resize:"vertical",boxSizing:"border-box",background:k?"rgba(34,197,94,0.1)":"#0f172a",color:"#f1f5f9"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px"},children:[o.jsx("button",{onClick:k?ve:me,style:{padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",background:k?"#ef4444":"#22c55e",color:"white"},children:k?o.jsxs(o.Fragment,{children:[o.jsx(cZ,{size:16})," Stop Recording"]}):o.jsxs(o.Fragment,{children:[o.jsx(Uj,{size:16})," Start Speaking"]})}),o.jsx("button",{onClick:je,disabled:T||!g.trim(),style:{padding:"10px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",opacity:T||!g.trim()?.5:1},children:T?o.jsxs(o.Fragment,{children:[o.jsx(mA,{size:16})," Evaluating..."]}):o.jsxs(o.Fragment,{children:[o.jsx($c,{size:16})," Submit Answer"]})})]})]})]})]})}function uoe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=uoe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yr(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=uoe(t))&&(r&&(r+=" "),r+=e);return r}var TVe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function gP(t){if(typeof t!="string")return!1;var e=TVe;return e.includes(t)}var _Ve=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RVe=new Set(_Ve);function doe(t){return typeof t!="string"?!1:RVe.has(t)}function foe(t){return typeof t=="string"&&t.startsWith("data-")}function Ci(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(doe(n)||foe(n))&&(e[n]=t[n]);return e}function DA(t){if(t==null)return null;if(C.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ci(e)}return typeof t=="object"&&!Array.isArray(t)?Ci(t):null}function Ya(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(doe(n)||foe(n)||gP(n))&&(e[n]=t[n]);return e}function OVe(t){return t==null?null:C.isValidElement(t)?Ya(t.props):typeof t=="object"&&!Array.isArray(t)?Ya(t):null}var FVe=["children","width","height","viewBox","className","style","title","desc"];function mF(){return mF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mF.apply(null,arguments)}function DVe(t,e){if(t==null)return{};var n,r,s=LVe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function LVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yP=C.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:i,className:a,style:l,title:c,desc:u}=t,d=DVe(t,FVe),f=i||{width:r,height:s,x:0,y:0},A=yr("recharts-surface",a);return C.createElement("svg",mF({},Ya(d),{className:A,width:r,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),C.createElement("title",null,c),C.createElement("desc",null,u),n)}),$Ve=["children","className"];function gF(){return gF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gF.apply(null,arguments)}function PVe(t,e){if(t==null)return{};var n,r,s=zVe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function zVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ds=C.forwardRef((t,e)=>{var{children:n,className:r}=t,s=PVe(t,$Ve),i=yr("recharts-layer",r);return C.createElement("g",gF({className:i},Ya(s),{ref:e}),n)}),hoe=C.createContext(null),UVe=()=>C.useContext(hoe);function ai(t){return function(){return t}}const Aoe=Math.cos,v4=Math.sin,Cf=Math.sqrt,w4=Math.PI,fI=2*w4,yF=Math.PI,xF=2*yF,gg=1e-6,MVe=xF-gg;function poe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function QVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return poe;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class HVe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?poe:QVe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,a){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,l=this._y1,c=r-e,u=s-n,d=a-e,f=l-n,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(A>gg)if(!(Math.abs(f*c-u*d)>gg)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,g=s-l,y=c*c+u*u,x=m*m+g*g,v=Math.sqrt(y),w=Math.sqrt(A),B=i*Math.tan((yF-Math.acos((y+A-x)/(2*v*w)))/2),k=B/w,j=B/v;Math.abs(k-1)>gg&&this._append`L${e+k*d},${n+k*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=e+j*c},${this._y1=n+j*u}`}}arc(e,n,r,s,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=e+l,d=n+c,f=1^a,A=a?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>gg||Math.abs(this._y1-d)>gg)&&this._append`L${u},${d}`,r&&(A<0&&(A=A%xF+xF),A>MVe?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:A>gg&&this._append`A${r},${r},0,${+(A>=yF)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function xP(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new HVe(e)}function bP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function moe(t){this._context=t}moe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hI(t){return new moe(t)}function goe(t){return t[0]}function yoe(t){return t[1]}function xoe(t,e){var n=ai(!0),r=null,s=hI,i=null,a=xP(l);t=typeof t=="function"?t:t===void 0?goe:ai(t),e=typeof e=="function"?e:e===void 0?yoe:ai(e);function l(c){var u,d=(c=bP(c)).length,f,A=!1,m;for(r==null&&(i=s(m=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===A&&((A=!A)?i.lineStart():i.lineEnd()),A&&i.point(+t(f,u,c),+e(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:ai(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:ai(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ai(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(i=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=i=null:i=s(r=c),l):r},l}function tk(t,e,n){var r=null,s=ai(!0),i=null,a=hI,l=null,c=xP(u);t=typeof t=="function"?t:t===void 0?goe:ai(+t),e=typeof e=="function"?e:ai(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?yoe:ai(+n);function u(f){var A,m,g,y=(f=bP(f)).length,x,v=!1,w,B=new Array(y),k=new Array(y);for(i==null&&(l=a(w=c())),A=0;A<=y;++A){if(!(A<y&&s(x=f[A],A,f))===v)if(v=!v)m=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=A-1;g>=m;--g)l.point(B[g],k[g]);l.lineEnd(),l.areaEnd()}v&&(B[A]=+t(x,A,f),k[A]=+e(x,A,f),l.point(r?+r(x,A,f):B[A],n?+n(x,A,f):k[A]))}if(w)return l=null,w+""||null}function d(){return xoe().defined(s).curve(a).context(i)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ai(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ai(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ai(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ai(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ai(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ai(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:ai(!!f),u):s},u.curve=function(f){return arguments.length?(a=f,i!=null&&(l=a(i)),u):a},u.context=function(f){return arguments.length?(f==null?i=l=null:l=a(i=f),u):i},u}class boe{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function WVe(t){return new boe(t,!0)}function VVe(t){return new boe(t,!1)}const vP={draw(t,e){const n=Cf(e/w4);t.moveTo(n,0),t.arc(0,0,n,0,fI)}},qVe={draw(t,e){const n=Cf(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},voe=Cf(1/3),GVe=voe*2,KVe={draw(t,e){const n=Cf(e/GVe),r=n*voe;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},XVe={draw(t,e){const n=Cf(e),r=-n/2;t.rect(r,r,n,n)}},YVe=.8908130915292852,woe=v4(w4/10)/v4(7*w4/10),JVe=v4(fI/10)*woe,ZVe=-Aoe(fI/10)*woe,eqe={draw(t,e){const n=Cf(e*YVe),r=JVe*n,s=ZVe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const a=fI*i/5,l=Aoe(a),c=v4(a);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*s,c*r+l*s)}t.closePath()}},w_=Cf(3),tqe={draw(t,e){const n=-Cf(e/(w_*3));t.moveTo(0,n*2),t.lineTo(-w_*n,-n),t.lineTo(w_*n,-n),t.closePath()}},Wu=-.5,Vu=Cf(3)/2,bF=1/Cf(12),nqe=(bF/2+1)*3,rqe={draw(t,e){const n=Cf(e/nqe),r=n/2,s=n*bF,i=r,a=n*bF+n,l=-i,c=a;t.moveTo(r,s),t.lineTo(i,a),t.lineTo(l,c),t.lineTo(Wu*r-Vu*s,Vu*r+Wu*s),t.lineTo(Wu*i-Vu*a,Vu*i+Wu*a),t.lineTo(Wu*l-Vu*c,Vu*l+Wu*c),t.lineTo(Wu*r+Vu*s,Wu*s-Vu*r),t.lineTo(Wu*i+Vu*a,Wu*a-Vu*i),t.lineTo(Wu*l+Vu*c,Wu*c-Vu*l),t.closePath()}};function sqe(t,e){let n=null,r=xP(s);t=typeof t=="function"?t:ai(t||vP),e=typeof e=="function"?e:ai(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:ai(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:ai(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function S4(){}function C4(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Soe(t){this._context=t}Soe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iqe(t){return new Soe(t)}function Coe(t){this._context=t}Coe.prototype={areaStart:S4,areaEnd:S4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:C4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aqe(t){return new Coe(t)}function koe(t){this._context=t}koe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oqe(t){return new koe(t)}function Boe(t){this._context=t}Boe.prototype={areaStart:S4,areaEnd:S4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function lqe(t){return new Boe(t)}function XH(t){return t<0?-1:1}function YH(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),a=(n-t._y1)/(s||r<0&&-0),l=(i*s+a*r)/(r+s);return(XH(i)+XH(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(l))||0}function JH(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function S_(t,e,n){var r=t._x0,s=t._y0,i=t._x1,a=t._y1,l=(i-r)/3;t._context.bezierCurveTo(r+l,s+l*e,i-l,a-l*n,i,a)}function k4(t){this._context=t}k4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S_(this,this._t0,JH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,S_(this,JH(this,n=YH(this,t,e)),n);break;default:S_(this,this._t0,n=YH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function joe(t){this._context=new Eoe(t)}(joe.prototype=Object.create(k4.prototype)).point=function(t,e){k4.prototype.point.call(this,e,t)};function Eoe(t){this._context=t}Eoe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function cqe(t){return new k4(t)}function uqe(t){return new joe(t)}function Ioe(t){this._context=t}Ioe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=ZH(t),s=ZH(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ZH(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),a=new Array(n);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,a[e]-=r*a[e-1];for(s[n-1]=a[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function dqe(t){return new Ioe(t)}function AI(t,e){this._context=t,this._t=e}AI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function fqe(t){return new AI(t,.5)}function hqe(t){return new AI(t,0)}function Aqe(t){return new AI(t,1)}function m0(t,e){if((a=t.length)>1)for(var n=1,r,s,i=t[e[0]],a,l=i.length;n<a;++n)for(s=i,i=t[e[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function vF(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pqe(t,e){return t[e]}function mqe(t){const e=[];return e.key=t,e}function gqe(){var t=ai([]),e=vF,n=m0,r=pqe;function s(i){var a=Array.from(t.apply(this,arguments),mqe),l,c=a.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(a[l][u]=[0,+r(f,a[l].key,u,i)]).data=f;for(l=0,d=bP(e(a));l<c;++l)a[d[l]].index=l;return n(a,d),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:ai(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:ai(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?vF:typeof i=="function"?i:ai(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??m0,s):n},s}function yqe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,a;s<i;++s){for(a=n=0;n<r;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<r;++n)t[n][s][1]/=a}m0(t,e)}}function xqe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var a=0,l=0;a<s;++a)l+=t[a][n][1]||0;r[n][1]+=r[n][0]=-l/2}m0(t,e)}}function bqe(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,a;r<i;++r){for(var l=0,c=0,u=0;l<a;++l){for(var d=t[e[l]],f=d[r][1]||0,A=d[r-1][1]||0,m=(f-A)/2,g=0;g<l;++g){var y=t[e[g]],x=y[r][1]||0,v=y[r-1][1]||0;m+=x-v}c+=f,u+=m*f}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,m0(t,e)}}var C_={},k_={},eW;function vqe(){return eW||(eW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(k_)),k_}var B_={},tW;function Noe(){return tW||(tW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(B_)),B_}var j_={},nW;function wP(){return nW||(nW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(j_)),j_}var E_={},I_={},rW;function wqe(){return rW||(rW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(I_)),I_}var sW;function SP(){return sW||(sW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wqe(),n=wP();function r(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=e.toString(s);const i=[],a=s.length;if(a===0)return i;let l=0,c="",u="",d=!1;for(s.charCodeAt(0)===46&&(i.push(""),l++);l<a;){const f=s[l];u?f==="\\"&&l+1<a?(l++,c+=s[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,i.push(c),c=""):c+=f:f==="["?(d=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}t.toPath=r})(E_)),E_}var iW;function CP(){return iW||(iW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vqe(),n=Noe(),r=wP(),s=SP();function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?n.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return a(l,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function a(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=i})(C_)),C_}var N_,aW;function Sqe(){return aW||(aW=1,N_=CP().get),N_}var Cqe=Sqe();const g0=oc(Cqe);var kqe=4;function Yp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kqe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function la(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((s,i,a)=>{var l=n[a-1];return typeof l=="string"?s+l+i:l!==void 0?s+Yp(l)+i:s+i},"")}var Uo=t=>t===0?0:t>0?1:-1,pf=t=>typeof t=="number"&&t!=+t,y0=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,nn=t=>(typeof t=="number"||t instanceof Number)&&!pf(t),vh=t=>nn(t)||typeof t=="string",Bqe=0,K2=t=>{var e=++Bqe;return"".concat(t||"").concat(e)},Rl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nn(e)&&typeof e!="string")return r;var i;if(y0(e)){if(n==null)return r;var a=e.indexOf("%");i=n*parseFloat(e.slice(0,a))/100}else i=+e;return pf(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},Toe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Ts(t,e,n){return nn(t)&&nn(e)?Yp(t+n*(e-t)):e}function _oe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):g0(r,e))===n)}var Xi=t=>t===null||typeof t>"u",hS=t=>Xi(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Rc(t){return t!=null}function jh(){}var jqe=["type","size","sizeType"];function wF(){return wF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wF.apply(null,arguments)}function oW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oW(Object(n),!0).forEach(function(r){Eqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eqe(t,e,n){return(e=Iqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iqe(t){var e=Nqe(t,"string");return typeof e=="symbol"?e:e+""}function Nqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tqe(t,e){if(t==null)return{};var n,r,s=_qe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _qe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Roe={symbolCircle:vP,symbolCross:qVe,symbolDiamond:KVe,symbolSquare:XVe,symbolStar:eqe,symbolTriangle:tqe,symbolWye:rqe},Rqe=Math.PI/180,Oqe=t=>{var e="symbol".concat(hS(t));return Roe[e]||vP},Fqe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Rqe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Dqe=(t,e)=>{Roe["symbol".concat(hS(t))]=e},kP=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=Tqe(t,jqe),i=lW(lW({},s),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var A=Oqe(a),m=sqe().type(A).size(Fqe(n,r,a)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,f=Ya(i);return nn(u)&&nn(d)&&nn(n)?C.createElement("path",wF({},f,{className:yr("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};kP.registerSymbol=Dqe;var Ooe=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,BP=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{gP(s)&&(r[s]=(i=>n[s](n,i)))}),r},Lqe=(t,e,n)=>r=>(t(e,n,r),null),Q0=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var i=t[s];gP(s)&&typeof i=="function"&&(r||(r={}),r[s]=Lqe(i,e,n))}),r};function cW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cW(Object(n),!0).forEach(function(r){Pqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pqe(t,e,n){return(e=zqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zqe(t){var e=Uqe(t,"string");return typeof e=="symbol"?e:e+""}function Uqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ki(t,e){var n=$qe({},t),r=e,s=Object.keys(e),i=s.reduce((a,l)=>(a[l]===void 0&&r[l]!==void 0&&(a[l]=r[l]),a),n);return i}function B4(){return B4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B4.apply(null,arguments)}function uW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mqe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uW(Object(n),!0).forEach(function(r){Qqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qqe(t,e,n){return(e=Hqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hqe(t){var e=Wqe(t,"string");return typeof e=="symbol"?e:e+""}function Wqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gu=32,Vqe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function qqe(t){var{data:e,iconType:n,inactiveColor:r}=t,s=Gu/2,i=Gu/6,a=Gu/3,l=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var u;return C.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:s,x2:Gu,y2:s,className:"recharts-legend-icon"})}if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(Gu,"M").concat(2*a,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Gu/8,"h").concat(Gu,"v").concat(Gu*3/4,"h").concat(-Gu,"z"),className:"recharts-legend-icon"});if(C.isValidElement(e.legendIcon)){var d=Mqe({},e);return delete d.legendIcon,C.cloneElement(e.legendIcon,d)}return C.createElement(kP,{fill:l,cx:s,cy:s,size:Gu,sizeType:"diameter",type:c})}function Gqe(t){var{payload:e,iconSize:n,layout:r,formatter:s,inactiveColor:i,iconType:a}=t,l={x:0,y:0,width:Gu,height:Gu},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||s,m=yr({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?i:d.color,y=A?A(d.value,d,f):d.value;return C.createElement("li",B4({className:m,style:c,key:"legend-item-".concat(f)},Q0(t,d,f)),C.createElement(yP,{width:n,height:n,viewBox:l,style:u,"aria-label":"".concat(y," legend icon")},C.createElement(qqe,{data:d,iconType:a,inactiveColor:i})),C.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var Kqe=t=>{var e=ki(t,Vqe),{payload:n,layout:r,align:s}=e;if(!n||!n.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?s:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},C.createElement(Gqe,B4({},e,{payload:n})))},T_={},__={},dW;function Xqe(){return dW||(dW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let i=0;i<n.length;i++){const a=n[i],l=r(a,i,n);s.has(l)||s.set(l,a)}return Array.from(s.values())}t.uniqBy=e})(__)),__}var R_={},fW;function Yqe(){return fW||(fW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...s){return n.apply(this,s.slice(0,r))}}t.ary=e})(R_)),R_}var O_={},hW;function pI(){return hW||(hW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(O_)),O_}var F_={},D_={},L_={},AW;function Jqe(){return AW||(AW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(L_)),L_}var pW;function jP(){return pW||(pW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jqe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(D_)),D_}var $_={},mW;function Zqe(){return mW||(mW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})($_)),$_}var gW;function eGe(){return gW||(gW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jP(),n=Zqe();function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(F_)),F_}var P_={},z_={},yW;function tGe(){return yW||(yW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CP();function n(r){return function(s){return e.get(s,r)}}t.property=n})(z_)),z_}var U_={},M_={},Q_={},H_={},xW;function Foe(){return xW||(xW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(H_)),H_}var W_={},bW;function Doe(){return bW||(bW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(W_)),W_}var V_={},vW;function Loe(){return vW||(vW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(V_)),V_}var wW;function nGe(){return wW||(wW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Foe(),n=Doe(),r=Loe();function s(d,f,A){return typeof A!="function"?s(d,f,()=>{}):i(d,f,function m(g,y,x,v,w,B){const k=A(g,y,x,v,w,B);return k!==void 0?!!k:i(g,y,m,B)},new Map)}function i(d,f,A,m){if(f===d)return!0;switch(typeof f){case"object":return a(d,f,A,m);case"function":return Object.keys(f).length>0?i(d,{...f},A,m):r.isEqualsSameValueZero(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:r.isEqualsSameValueZero(d,f)}}function a(d,f,A,m){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,m);if(f instanceof Map)return l(d,f,A,m);if(f instanceof Set)return u(d,f,A,m);const g=Object.keys(f);if(d==null||n.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(m?.has(f))return m.get(f)===d;m?.set(f,d);try{for(let y=0;y<g.length;y++){const x=g[y];if(!n.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!A(d[x],f[x],x,d,f,m))return!1}return!0}finally{m?.delete(f)}}function l(d,f,A,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const x=d.get(g);if(A(x,y,g,d,f,m)===!1)return!1}return!0}function c(d,f,A,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const x=f[y];let v=!1;for(let w=0;w<d.length;w++){if(g.has(w))continue;const B=d[w];let k=!1;if(A(B,x,y,d,f,m)&&(k=!0),k){g.add(w),v=!0;break}}if(!v)return!1}return!0}function u(d,f,A,m){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,m):!1}t.isMatchWith=s,t.isSetMatch=u})(Q_)),Q_}var SW;function $oe(){return SW||(SW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nGe();function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n})(M_)),M_}var q_={},G_={},K_={},CW;function rGe(){return CW||(CW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(K_)),K_}var X_={},kW;function EP(){return kW||(kW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(X_)),X_}var Y_={},BW;function Poe(){return BW||(BW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",w="[object Uint16Array]",B="[object Uint32Array]",k="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",F="[object BigInt64Array]",D="[object Float32Array]",T="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=F,t.bigUint64ArrayTag=k,t.booleanTag=s,t.dataViewTag=y,t.dateTag=l,t.errorTag=g,t.float32ArrayTag=D,t.float64ArrayTag=T,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=O,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=w,t.uint32ArrayTag=B,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=v})(Y_)),Y_}var J_={},jW;function sGe(){return jW||(jW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(J_)),J_}var EW;function zoe(){return EW||(EW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rGe(),n=EP(),r=Poe(),s=Doe(),i=sGe();function a(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,m=new Map,g=void 0){const y=g?.(d,f,A,m);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const x=new Array(d.length);m.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,m,g);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;m.set(d,x);for(const[v,w]of d)x.set(v,l(w,v,A,m,g));return x}if(d instanceof Set){const x=new Set;m.set(d,x);for(const v of d)x.add(l(v,void 0,A,m,g));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,m,g);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,x),c(x,d,A,m,g),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return m.set(d,x),c(x,d,A,m,g),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return m.set(d,x),c(x,d,A,m,g),x}if(d instanceof Error){const x=new d.constructor;return m.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,A,m,g),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return m.set(d,x),c(x,d,A,m,g),x}if(d instanceof Number){const x=new Number(d.valueOf());return m.set(d,x),c(x,d,A,m,g),x}if(d instanceof String){const x=new String(d.valueOf());return m.set(d,x),c(x,d,A,m,g),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return m.set(d,x),c(x,d,A,m,g),x}return d}function c(d,f,A=d,m,g){const y=[...Object.keys(f),...e.getSymbols(f)];for(let x=0;x<y.length;x++){const v=y[x],w=Object.getOwnPropertyDescriptor(d,v);(w==null||w.writable)&&(d[v]=l(f[v],v,A,m,g))}}function u(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=l,t.copyProperties=c})(G_)),G_}var IW;function iGe(){return IW||(IW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zoe();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(q_)),q_}var NW;function aGe(){return NW||(NW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$oe(),n=iGe();function r(s){return s=n.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=r})(U_)),U_}var Z_={},eR={},tR={},TW;function oGe(){return TW||(TW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zoe(),n=EP(),r=Poe();function s(i,a){return e.cloneDeepWith(i,(l,c,u,d)=>{const f=a?.(l,c,u,d);if(f!==void 0)return f;if(typeof i=="object"){if(n.getTag(i)===r.objectTag&&typeof i.constructor!="function"){const A={};return d.set(i,A),e.copyProperties(A,i,u,d),A}switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new i.constructor(i?.valueOf());return e.copyProperties(A,i),A}case r.argumentsTag:{const A={};return e.copyProperties(A,i),A.length=i.length,A[Symbol.iterator]=i[Symbol.iterator],A}default:return}}})}t.cloneDeepWith=s})(tR)),tR}var _W;function lGe(){return _W||(_W=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oGe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(eR)),eR}var nR={},rR={},RW;function Uoe(){return RW||(RW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(rR)),rR}var sR={},OW;function cGe(){return OW||(OW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EP();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(sR)),sR}var FW;function uGe(){return FW||(FW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Noe(),n=Uoe(),r=cGe(),s=SP();function i(a,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=a;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=i})(nR)),nR}var DW;function dGe(){return DW||(DW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$oe(),n=wP(),r=lGe(),s=CP(),i=uGe();function a(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=a})(Z_)),Z_}var LW;function IP(){return LW||(LW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pI(),n=tGe(),r=aGe(),s=dGe();function i(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=i})(P_)),P_}var $W;function fGe(){return $W||($W=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xqe(),n=Yqe(),r=pI(),s=eGe(),i=IP();function a(l,c=r.identity){return s.isArrayLikeObject(l)?e.uniqBy(Array.from(l),n.ary(i.iteratee(c),1)):[]}t.uniqBy=a})(T_)),T_}var iR,PW;function hGe(){return PW||(PW=1,iR=fGe().uniqBy),iR}var AGe=hGe();const zW=oc(AGe);function Moe(t,e,n){return e===!0?zW(t,n):typeof e=="function"?zW(t,e):t}var aR={exports:{}},oR={},lR={exports:{}},cR={};var UW;function pGe(){if(UW)return cR;UW=1;var t=X1();function e(f,A){return f===A&&(f!==0||1/f===1/A)||f!==f&&A!==A}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function l(f,A){var m=A(),g=r({inst:{value:m,getSnapshot:A}}),y=g[0].inst,x=g[1];return i(function(){y.value=m,y.getSnapshot=A,c(y)&&x({inst:y})},[f,m,A]),s(function(){return c(y)&&x({inst:y}),f(function(){c(y)&&x({inst:y})})},[f]),a(m),m}function c(f){var A=f.getSnapshot;f=f.value;try{var m=A();return!n(f,m)}catch{return!0}}function u(f,A){return A()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return cR.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,cR}var MW;function mGe(){return MW||(MW=1,lR.exports=pGe()),lR.exports}var QW;function gGe(){if(QW)return oR;QW=1;var t=X1(),e=mGe();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return oR.useSyncExternalStoreWithSelector=function(u,d,f,A,m){var g=i(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=l(function(){function v(I){if(!w){if(w=!0,B=I,I=A(I),m!==void 0&&y.hasValue){var O=y.value;if(m(O,I))return k=O}return k=I}if(O=k,r(B,I))return O;var F=A(I);return m!==void 0&&m(O,F)?(B=I,O):(B=I,k=F)}var w=!1,B,k,j=f===void 0?null:f;return[function(){return v(d())},j===null?void 0:function(){return v(j())}]},[d,f,A,m]);var x=s(u,g[0],g[1]);return a(function(){y.hasValue=!0,y.value=x},[x]),c(x),x},oR}var HW;function yGe(){return HW||(HW=1,aR.exports=gGe()),aR.exports}var xGe=yGe(),NP=C.createContext(null),bGe=t=>t,Gs=()=>{var t=C.useContext(NP);return t?t.store.dispatch:bGe},SB=()=>{},vGe=()=>SB,wGe=(t,e)=>t===e;function Xt(t){var e=C.useContext(NP),n=C.useMemo(()=>e?r=>{if(r!=null)return t(r)}:SB,[e,t]);return xGe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:vGe,e?e.store.getState:SB,e?e.store.getState:SB,n,wGe)}function SGe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function CGe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function kGe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var WW=t=>Array.isArray(t)?t:[t];function BGe(t){const e=Array.isArray(t[0])?t[0]:t;return kGe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function jGe(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var EGe=class{constructor(t){this.value=t}deref(){return this.value}},IGe=typeof WeakRef<"u"?WeakRef:EGe,NGe=0,VW=1;function nk(){return{s:NGe,v:void 0,o:null,p:null}}function Qoe(t,e={}){let n=nk();const{resultEqualityCheck:r}=e;let s,i=0;function a(){let l=n;const{length:c}=arguments;for(let f=0,A=c;f<A;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let g=l.o;g===null&&(l.o=g=new WeakMap);const y=g.get(m);y===void 0?(l=nk(),g.set(m,l)):l=y}else{let g=l.p;g===null&&(l.p=g=new Map);const y=g.get(m);y===void 0?(l=nk(),g.set(m,l)):l=y}}const u=l;let d;if(l.s===VW)d=l.v;else if(d=t.apply(null,arguments),i++,r){const f=s?.deref?.()??s;f!=null&&r(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new IGe(d):d}return u.s=VW,u.v=d,d}return a.clearCache=()=>{n=nk(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function TGe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,a=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),SGe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:m=Qoe,argsMemoizeOptions:g=[]}=d,y=WW(A),x=WW(g),v=BGe(s),w=f(function(){return i++,u.apply(null,arguments)},...y),B=m(function(){a++;const j=jGe(v,arguments);return l=w.apply(null,j),l},...x);return Object.assign(B,{resultFunc:u,memoizedResultFunc:w,dependencies:v,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var Ve=TGe(Qoe),_Ge=Object.assign((t,e=Ve)=>{CGe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((a,l,c)=>(a[n[c]]=l,a),{}))},{withTypes:()=>_Ge}),uR={},dR={},fR={},qW;function RGe(){return qW||(qW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const a=e(r),l=e(s);if(a===l&&a===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?l-a:a-l}return 0};t.compareValues=n})(fR)),fR}var hR={},AR={},GW;function Hoe(){return GW||(GW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(AR)),AR}var KW;function OGe(){return KW||(KW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hoe(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||a!=null&&Object.hasOwn(a,i)}t.isKey=s})(hR)),hR}var XW;function FGe(){return XW||(XW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RGe(),n=OGe(),r=SP();function s(i,a,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let y=m;for(let x=0;x<g.length&&y!=null;++x)y=y[g[x]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<f.length;y++){const x=e.compareValues(m.criteria[y],g.criteria[y],l[y]);if(x!==0)return x}return 0}).map(m=>m.original)}t.orderBy=s})(dR)),dR}var pR={},YW;function DGe(){return YW||(YW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],i=Math.floor(r),a=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?a(d,c+1):s.push(d)}};return a(n,0),s}t.flatten=e})(pR)),pR}var mR={},JW;function Woe(){return JW||(JW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uoe(),n=jP(),r=Foe(),s=Loe();function i(a,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.isEqualsSameValueZero(c[l],a):!1}t.isIterateeCall=i})(mR)),mR}var ZW;function LGe(){return ZW||(ZW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FGe(),n=DGe(),r=Woe();function s(i,...a){const l=a.length;return l>1&&r.isIterateeCall(i,a[0],a[1])?a=[]:l>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(i,n.flatten(a),["asc"])}t.sortBy=s})(uR)),uR}var gR,eV;function $Ge(){return eV||(eV=1,gR=LGe().sortBy),gR}var PGe=$Ge();const mI=oc(PGe);var Voe=t=>t.legend.settings,zGe=t=>t.legend.size,UGe=t=>t.legend.payload,MGe=Ve([UGe,Voe],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?mI(r,n):r});function QGe(){return Xt(MGe)}var rk=1;function qoe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-e.height)>rk||Math.abs(a.left-e.left)>rk||Math.abs(a.top-e.top)>rk||Math.abs(a.width-e.width)>rk)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function al(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var HGe=typeof Symbol=="function"&&Symbol.observable||"@@observable",tV=HGe,yR=()=>Math.random().toString(36).substring(7).split("").join("."),WGe={INIT:`@@redux/INIT${yR()}`,REPLACE:`@@redux/REPLACE${yR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yR()}`},j4=WGe;function TP(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Goe(t,e,n){if(typeof t!="function")throw new Error(al(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(al(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(al(1));return n(Goe)(t,e)}let r=t,s=e,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((x,v)=>{a.set(v,x)}))}function d(){if(c)throw new Error(al(3));return s}function f(x){if(typeof x!="function")throw new Error(al(4));if(c)throw new Error(al(5));let v=!0;u();const w=l++;return a.set(w,x),function(){if(v){if(c)throw new Error(al(6));v=!1,u(),a.delete(w),i=null}}}function A(x){if(!TP(x))throw new Error(al(7));if(typeof x.type>"u")throw new Error(al(8));if(typeof x.type!="string")throw new Error(al(17));if(c)throw new Error(al(9));try{c=!0,s=r(s,x)}finally{c=!1}return(i=a).forEach(w=>{w()}),x}function m(x){if(typeof x!="function")throw new Error(al(10));r=x,A({type:j4.REPLACE})}function g(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(al(11));function w(){const k=v;k.next&&k.next(d())}return w(),{unsubscribe:x(w)}},[tV](){return this}}}return A({type:j4.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:m,[tV]:g}}function VGe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:j4.INIT})>"u")throw new Error(al(12));if(typeof n(void 0,{type:j4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(al(13))})}function Koe(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{VGe(n)}catch(i){s=i}return function(a={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<r.length;d++){const f=r[d],A=n[f],m=a[f],g=A(m,l);if(typeof g>"u")throw l&&l.type,new Error(al(14));u[f]=g,c=c||g!==m}return c=c||r.length!==Object.keys(a).length,c?u:a}}function E4(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function qGe(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(al(15))};const a={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=t.map(c=>c(a));return i=E4(...l)(s.dispatch),{...s,dispatch:i}}}function Xoe(t){return TP(t)&&"type"in t&&typeof t.type=="string"}var Yoe=Symbol.for("immer-nothing"),nV=Symbol.for("immer-draftable"),ac=Symbol.for("immer-state");function ef(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mu=Object,M1=mu.getPrototypeOf,I4="constructor",gI="prototype",SF="configurable",N4="enumerable",CB="writable",X2="value",LA=t=>!!t&&!!t[ac];function mf(t){return t?Joe(t)||xI(t)||!!t[nV]||!!t[I4]?.[nV]||bI(t)||vI(t):!1}var GGe=mu[gI][I4].toString(),rV=new WeakMap;function Joe(t){if(!t||!_P(t))return!1;const e=M1(t);if(e===null||e===mu[gI])return!0;const n=mu.hasOwnProperty.call(e,I4)&&e[I4];if(n===Object)return!0;if(!Jy(n))return!1;let r=rV.get(n);return r===void 0&&(r=Function.toString.call(n),rV.set(n,r)),r===GGe}function yI(t,e,n=!0){AS(t)===0?(n?Reflect.ownKeys(t):mu.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function AS(t){const e=t[ac];return e?e.type_:xI(t)?1:bI(t)?2:vI(t)?3:0}var sV=(t,e,n=AS(t))=>n===2?t.has(e):mu[gI].hasOwnProperty.call(t,e),CF=(t,e,n=AS(t))=>n===2?t.get(e):t[e],T4=(t,e,n,r=AS(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function KGe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var xI=Array.isArray,bI=t=>t instanceof Map,vI=t=>t instanceof Set,_P=t=>typeof t=="object",Jy=t=>typeof t=="function",xR=t=>typeof t=="boolean";function XGe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var dA=t=>t.copy_||t.base_,RP=t=>t.modified_?t.copy_:t.base_;function kF(t,e){if(bI(t))return new Map(t);if(vI(t))return new Set(t);if(xI(t))return Array[gI].slice.call(t);const n=Joe(t);if(e===!0||e==="class_only"&&!n){const r=mu.getOwnPropertyDescriptors(t);delete r[ac];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l[CB]===!1&&(l[CB]=!0,l[SF]=!0),(l.get||l.set)&&(r[a]={[SF]:!0,[CB]:!0,[N4]:l[N4],[X2]:t[a]})}return mu.create(M1(t),r)}else{const r=M1(t);if(r!==null&&n)return{...t};const s=mu.create(r);return mu.assign(s,t)}}function OP(t,e=!1){return wI(t)||LA(t)||!mf(t)||(AS(t)>1&&mu.defineProperties(t,{set:sk,add:sk,clear:sk,delete:sk}),mu.freeze(t),e&&yI(t,(n,r)=>{OP(r,!0)},!1)),t}function YGe(){ef(2)}var sk={[X2]:YGe};function wI(t){return t===null||!_P(t)?!0:mu.isFrozen(t)}var _4="MapSet",BF="Patches",iV="ArrayMethods",Zoe={};function x0(t){const e=Zoe[t];return e||ef(0,t),e}var aV=t=>!!Zoe[t],Y2,ele=()=>Y2,JGe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:aV(_4)?x0(_4):void 0,arrayMethodsPlugin_:aV(iV)?x0(iV):void 0});function oV(t,e){e&&(t.patchPlugin_=x0(BF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jF(t){EF(t),t.drafts_.forEach(ZGe),t.drafts_=null}function EF(t){t===Y2&&(Y2=t.parent_)}var lV=t=>Y2=JGe(Y2,t);function ZGe(t){const e=t[ac];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[ac].modified_&&(jF(e),ef(4)),mf(t)&&(t=uV(e,t));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(n[ac].base_,t,e)}else t=uV(e,n);return eKe(e,t,!0),jF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Yoe?t:void 0}function uV(t,e){if(wI(e))return e;const n=e[ac];if(!n)return R4(e,t.handledSet_,t);if(!SI(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);rle(n,t)}return n.copy_}function eKe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&OP(e,n)}function tle(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var SI=(t,e)=>t.scope_===e,tKe=[];function nle(t,e,n,r){const s=dA(t),i=t.type_;if(r!==void 0&&CF(s,r,i)===e){T4(s,r,n,i);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;yI(s,(c,u)=>{if(LA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const a=t.draftLocations_.get(e)??tKe;for(const l of a)T4(s,l,n,i)}function nKe(t,e,n){t.callbacks_.push(function(s){const i=e;if(!i||!SI(i,s))return;s.mapSetPlugin_?.fixSetContents(i);const a=RP(i);nle(t,i.draft_??i,a,n),rle(i,s)})}function rle(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const s=r.getPath(t);s&&r.generatePatches_(t,s,e)}tle(t)}}function rKe(t,e,n){const{scope_:r}=t;if(LA(n)){const s=n[ac];SI(s,r)&&s.callbacks_.push(function(){kB(t);const a=RP(s);nle(t,n,a,e)})}else mf(n)&&t.callbacks_.push(function(){const i=dA(t);t.type_===3?i.has(n)&&R4(n,r.handledSet_,r):CF(i,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&R4(CF(t.copy_,e,t.type_),r.handledSet_,r)})}function R4(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||LA(t)||e.has(t)||!mf(t)||wI(t)||(e.add(t),yI(t,(r,s)=>{if(LA(s)){const i=s[ac];if(SI(i,n)){const a=RP(i);T4(t,r,a,t.type_),tle(i)}}else mf(s)&&R4(s,e,n)})),t}function sKe(t,e){const n=xI(t),r={type_:n?1:0,scope_:e?e.scope_:ele(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=O4;n&&(s=[r],i=J2);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,[l,r]}var O4={get(t,e){if(e===ac)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const s=dA(t);if(!sV(s,e,t.type_))return iKe(t,s,e);const i=s[e];if(t.finalized_||!mf(i)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&XGe(e))return i;if(i===bR(t.base_,e)){kB(t);const a=t.type_===1?+e:e,l=NF(t.scope_,i,t,a);return t.copy_[a]=l}return i},has(t,e){return e in dA(t)},ownKeys(t){return Reflect.ownKeys(dA(t))},set(t,e,n){const r=sle(dA(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=bR(dA(t),e),i=s?.[ac];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(KGe(n,s)&&(n!==void 0||sV(t.base_,e,t.type_)))return!0;kB(t),IF(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),rKe(t,e,n)),!0},deleteProperty(t,e){return kB(t),bR(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),IF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=dA(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[CB]:!0,[SF]:t.type_!==1||e!=="length",[N4]:r[N4],[X2]:n[e]}},defineProperty(){ef(11)},getPrototypeOf(t){return M1(t.base_)},setPrototypeOf(){ef(12)}},J2={};for(let t in O4){let e=O4[t];J2[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}J2.deleteProperty=function(t,e){return J2.set.call(this,t,e,void 0)};J2.set=function(t,e,n){return O4.set.call(this,t[0],e,n,t[0])};function bR(t,e){const n=t[ac];return(n?dA(n):t)[e]}function iKe(t,e,n){const r=sle(e,n);return r?X2 in r?r[X2]:r.get?.call(t.draft_):void 0}function sle(t,e){if(!(e in t))return;let n=M1(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=M1(n)}}function IF(t){t.modified_||(t.modified_=!0,t.parent_&&IF(t.parent_))}function kB(t){t.copy_||(t.assigned_=new Map,t.copy_=kF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aKe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,s)=>{if(Jy(n)&&!Jy(r)){const a=r;r=n;const l=this;return function(u=a,...d){return l.produce(u,f=>r.call(this,f,...d))}}Jy(r)||ef(6),s!==void 0&&!Jy(s)&&ef(7);let i;if(mf(n)){const a=lV(this),l=NF(a,n,void 0);let c=!0;try{i=r(l),c=!1}finally{c?jF(a):EF(a)}return oV(a,s),cV(i,a)}else if(!n||!_P(n)){if(i=r(n),i===void 0&&(i=n),i===Yoe&&(i=void 0),this.autoFreeze_&&OP(i,!0),s){const a=[],l=[];x0(BF).generateReplacementPatches_(n,i,{patches_:a,inversePatches_:l}),s(a,l)}return i}else ef(1,n)},this.produceWithPatches=(n,r)=>{if(Jy(n))return(l,...c)=>this.produceWithPatches(l,u=>n(u,...c));let s,i;return[this.produce(n,r,(l,c)=>{s=l,i=c}),s,i]},xR(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),xR(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),xR(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){mf(e)||ef(8),LA(e)&&(e=lf(e));const n=lV(this),r=NF(n,e,void 0);return r[ac].isManual_=!0,EF(n),r}finishDraft(e,n){const r=e&&e[ac];(!r||!r.isManual_)&&ef(9);const{scope_:s}=r;return oV(s,n),cV(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const i=n[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(n=n.slice(r+1));const s=x0(BF).applyPatches_;return LA(e)?s(e,n):this.produce(e,i=>s(i,n))}};function NF(t,e,n,r){const[s,i]=bI(e)?x0(_4).proxyMap_(e,n):vI(e)?x0(_4).proxySet_(e,n):sKe(e,n);return(n?.scope_??ele()).drafts_.push(s),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?nKe(n,i,r):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),s}function lf(t){return LA(t)||ef(10,t),ile(t)}function ile(t){if(!mf(t)||wI(t))return t;const e=t[ac];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=kF(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=kF(t,!0);return yI(n,(s,i)=>{T4(n,s,ile(i))},r),e&&(e.finalized_=!1),n}var oKe=new aKe,ale=oKe.produce;function ole(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var lKe=ole(),cKe=ole,uKe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?E4:E4.apply(null,arguments)};function hd(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(bu(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Xoe(r)&&r.type===t,n}var lle=class r2 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,r2.prototype)}static get[Symbol.species](){return r2}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new r2(...e[0].concat(this)):new r2(...e.concat(this))}};function dV(t){return mf(t)?ale(t,()=>{}):t}function ik(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function dKe(t){return typeof t=="boolean"}var fKe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new lle;return n&&(dKe(n)?a.push(lKe):a.push(cKe(n.extraArgument))),a},cle="RTK_autoBatch",zi=()=>t=>({payload:t,meta:{[cle]:!0}}),fV=t=>e=>{setTimeout(e,t)},ule=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fV(10):t.type==="callback"?t.queueNotification:fV(t.timeout),u=()=>{a=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>s&&d(),A=r.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){try{return s=!d?.meta?.[cle],i=!s,i&&(a||(a=!0,c(u))),r.dispatch(d)}finally{s=!0}}})},hKe=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new lle(t);return r&&s.push(ule(typeof r=="object"?r:void 0)),s};function AKe(t){const e=fKe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(TP(n))l=Koe(n);else throw new Error(bu(1));let c;typeof r=="function"?c=r(e):c=e();let u=E4;s&&(u=uKe({trace:!1,...typeof s=="object"&&s}));const d=qGe(...c),f=hKe(d);let A=typeof a=="function"?a(f):f();const m=u(...A);return Goe(l,i,m)}function dle(t){const e={},n=[];let r;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(bu(28));if(l in e)throw new Error(bu(29));return e[l]=a,s},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function pKe(t){return typeof t=="function"}function mKe(t,e){let[n,r,s]=dle(e),i;if(pKe(t))i=()=>dV(t());else{const l=dV(t);i=()=>l}function a(l=i(),c){let u=[n[c.type],...r.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(LA(d)){const m=f(d,c);return m===void 0?d:m}else{if(mf(d))return ale(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return a.getInitialState=i,a}var gKe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",yKe=(t=21)=>{let e="",n=t;for(;n--;)e+=gKe[Math.random()*64|0];return e},xKe=Symbol.for("rtk-slice-createasyncthunk");function bKe(t,e){return`${t}/${e}`}function vKe({creators:t}={}){const e=t?.asyncThunk?.[xKe];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(bu(11));const a=(typeof r.reducers=="function"?r.reducers(SKe()):r.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(B,k){const j=typeof B=="string"?B:B.type;if(!j)throw new Error(bu(12));if(j in c.sliceCaseReducersByType)throw new Error(bu(13));return c.sliceCaseReducersByType[j]=k,u},addMatcher(B,k){return c.sliceMatchers.push({matcher:B,reducer:k}),u},exposeAction(B,k){return c.actionCreators[B]=k,u},exposeCaseReducer(B,k){return c.sliceCaseReducersByName[B]=k,u}};l.forEach(B=>{const k=a[B],j={reducerName:B,type:bKe(s,B),createNotation:typeof r.reducers=="function"};kKe(k)?jKe(j,k,u,e):CKe(j,k,u)});function d(){const[B={},k=[],j=void 0]=typeof r.extraReducers=="function"?dle(r.extraReducers):[r.extraReducers],I={...B,...c.sliceCaseReducersByType};return mKe(r.initialState,O=>{for(let F in I)O.addCase(F,I[F]);for(let F of c.sliceMatchers)O.addMatcher(F.matcher,F.reducer);for(let F of k)O.addMatcher(F.matcher,F.reducer);j&&O.addDefaultCase(j)})}const f=B=>B,A=new Map,m=new WeakMap;let g;function y(B,k){return g||(g=d()),g(B,k)}function x(){return g||(g=d()),g.getInitialState()}function v(B,k=!1){function j(O){let F=O[B];return typeof F>"u"&&k&&(F=ik(m,j,x)),F}function I(O=f){const F=ik(A,k,()=>new WeakMap);return ik(F,O,()=>{const D={};for(const[T,N]of Object.entries(r.selectors??{}))D[T]=wKe(N,O,()=>ik(m,O,x),k);return D})}return{reducerPath:B,getSelectors:I,get selectors(){return I(j)},selectSlice:j}}const w={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...v(i),injectInto(B,{reducerPath:k,...j}={}){const I=k??i;return B.inject({reducerPath:I,reducer:y},j),{...w,...v(I,!0)}}};return w}}function wKe(t,e,n,r){function s(i,...a){let l=e(i);return typeof l>"u"&&r&&(l=n()),t(l,...a)}return s.unwrapped=t,s}var Hc=vKe();function SKe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function CKe({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!BKe(r))throw new Error(bu(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?hd(t,a):hd(t))}function kKe(t){return t._reducerDefinitionType==="asyncThunk"}function BKe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function jKe({type:t,reducerName:e},n,r,s){if(!s)throw new Error(bu(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:c,settled:u,options:d}=n,f=s(t,i,d);r.exposeAction(e,f),a&&r.addCase(f.fulfilled,a),l&&r.addCase(f.pending,l),c&&r.addCase(f.rejected,c),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(e,{fulfilled:a||ak,pending:l||ak,rejected:c||ak,settled:u||ak})}function ak(){}var EKe="task",fle="listener",hle="completed",FP="cancelled",IKe=`task-${FP}`,NKe=`task-${hle}`,TF=`${fle}-${FP}`,TKe=`${fle}-${hle}`,CI=class{constructor(t){this.code=t,this.message=`${EKe} ${FP} (reason: ${t})`}name="TaskAbortError";message},DP=(t,e)=>{if(typeof t!="function")throw new TypeError(bu(32))},F4=()=>{},Ale=(t,e=F4)=>(t.catch(e),t),ple=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Hg=t=>{if(t.aborted)throw new CI(t.reason)};function mle(t,e){let n=F4;return new Promise((r,s)=>{const i=()=>s(new CI(t.reason));if(t.aborted){i();return}n=ple(t,i),e.finally(()=>n()).then(r,s)}).finally(()=>{n=F4})}var _Ke=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof CI?"cancelled":"rejected",error:n}}finally{e?.()}},D4=t=>e=>Ale(mle(t,e).then(n=>(Hg(t),n))),gle=t=>{const e=D4(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:m1}=Object,hV={},kI="listenerMiddleware",RKe=(t,e)=>{const n=r=>ple(t,()=>r.abort(t.reason));return(r,s)=>{DP(r);const i=new AbortController;n(i);const a=_Ke(async()=>{Hg(t),Hg(i.signal);const l=await r({pause:D4(i.signal),delay:gle(i.signal),signal:i.signal});return Hg(i.signal),l},()=>i.abort(NKe));return s?.autoJoin&&e.push(a.catch(F4)),{result:D4(t)(a),cancel(){i.abort(IKe)}}}},OKe=(t,e)=>{const n=async(r,s)=>{Hg(e);let i=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:r,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await mle(e,Promise.race(l));return Hg(e),c}finally{i()}};return(r,s)=>Ale(n(r,s))},yle=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=hd(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(bu(21));return DP(i),{predicate:s,type:e,effect:i}},xle=m1(t=>{const{type:e,predicate:n,effect:r}=yle(t);return{id:yKe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bu(22))}}},{withTypes:()=>xle}),AV=(t,e)=>{const{type:n,effect:r,predicate:s}=yle(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},_F=t=>{t.pending.forEach(e=>{e.abort(TF)})},FKe=(t,e)=>()=>{for(const n of e.keys())_F(n);t.clear()},pV=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},ble=m1(hd(`${kI}/add`),{withTypes:()=>ble}),DKe=hd(`${kI}/removeAll`),vle=m1(hd(`${kI}/remove`),{withTypes:()=>vle}),LKe=(...t)=>{console.error(`${kI}/error`,...t)},pS=(t={})=>{const e=new Map,n=new Map,r=m=>{const g=n.get(m)??0;n.set(m,g+1)},s=m=>{const g=n.get(m)??1;g===1?n.delete(m):n.set(m,g-1)},{extra:i,onError:a=LKe}=t;DP(a);const l=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),g=>{m.unsubscribe(),g?.cancelActive&&_F(m)}),c=m=>{const g=AV(e,m)??xle(m);return l(g)};m1(c,{withTypes:()=>c});const u=m=>{const g=AV(e,m);return g&&(g.unsubscribe(),m.cancelActive&&_F(g)),!!g};m1(u,{withTypes:()=>u});const d=async(m,g,y,x)=>{const v=new AbortController,w=OKe(c,v.signal),B=[];try{m.pending.add(v),r(m),await Promise.resolve(m.effect(g,m1({},y,{getOriginalState:x,condition:(k,j)=>w(k,j).then(Boolean),take:w,delay:gle(v.signal),pause:D4(v.signal),extra:i,signal:v.signal,fork:RKe(v.signal,B),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((k,j,I)=>{k!==v&&(k.abort(TF),I.delete(k))})},cancel:()=>{v.abort(TF),m.pending.delete(v)},throwIfCancelled:()=>{Hg(v.signal)}})))}catch(k){k instanceof CI||pV(a,k,{raisedBy:"effect"})}finally{await Promise.all(B),v.abort(TKe),s(m),m.pending.delete(v)}},f=FKe(e,n);return{middleware:m=>g=>y=>{if(!Xoe(y))return g(y);if(ble.match(y))return c(y.payload);if(DKe.match(y)){f();return}if(vle.match(y))return u(y.payload);let x=m.getState();const v=()=>{if(x===hV)throw new Error(bu(23));return x};let w;try{if(w=g(y),e.size>0){const B=m.getState(),k=Array.from(e.values());for(const j of k){let I=!1;try{I=j.predicate(y,B,x)}catch(O){I=!1,pV(a,O,{raisedBy:"predicate"})}I&&d(j,y,m,v)}}}finally{x=hV}return w},startListening:c,stopListening:u,clearListeners:f}};function bu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $Ke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},wle=Hc({name:"chartLayout",initialState:$Ke,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,s,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:PKe,setLayout:zKe,setChartSize:UKe,setScale:MKe}=wle.actions,QKe=wle.reducer;function Sle(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function br(t){return Number.isFinite(t)}function wh(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function mV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(n),!0).forEach(function(r){HKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HKe(t,e,n){return(e=WKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WKe(t){var e=VKe(t,"string");return typeof e=="symbol"?e:e+""}function VKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cs(t,e,n){return Xi(t)||Xi(e)?n:vh(e)?g0(t,e,n):typeof e=="function"?e(t):n}var qKe=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:i,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&i!=="center"&&nn(t[i]))return i1(i1({},t),{},{[i]:t[i]+(r||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&a!=="middle"&&nn(t[a]))return i1(i1({},t),{},{[a]:t[a]+(s||0)})}return t},kf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Cle=(t,e,n,r)=>{if(r)return t.map(l=>l.coordinate);var s,i,a=t.map(l=>(l.coordinate===e&&(s=!0),l.coordinate===n&&(i=!0),l.coordinate));return s||a.push(e),i||a.push(n),a},kle=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:i,scale:a,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:A,axisType:m}=t;if(!a)return null;var g=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,y=s==="category"&&a.bandwidth?a.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?Uo(i[0]-i[1])*2*y:y,f||A){var x=(f||A||[]).map((v,w)=>{var B=r?r.indexOf(v):v,k=a.map(B);return br(k)?{coordinate:k+y,value:v,offset:y,index:w}:null}).filter(Rc);return x}return c&&u?u.map((v,w)=>{var B=a.map(v);return br(B)?{coordinate:B+y,value:v,index:w,offset:y}:null}).filter(Rc):a.ticks&&d!=null?a.ticks(d).map((v,w)=>{var B=a.map(v);return br(B)?{coordinate:B+y,value:v,index:w,offset:y}:null}).filter(Rc):a.domain().map((v,w)=>{var B=a.map(v);return br(B)?{coordinate:B+y,value:r?r[v]:v,index:w,offset:y}:null}).filter(Rc)},GKe=(t,e)=>{if(!e||e.length!==2||!nn(e[0])||!nn(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),s=[t[0],t[1]];return(!nn(t[0])||t[0]<n)&&(s[0]=n),(!nn(t[1])||t[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s},KKe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,a=0,l=0;l<n;++l){var c=t[l],u=c?.[s];if(u!=null){var d=u[1],f=u[0],A=pf(d)?f:d;A>=0?(u[0]=i,i+=A,u[1]=i):(u[0]=a,a+=A,u[1]=a)}}}},XKe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,a=0;a<n;++a){var l=t[a],c=l?.[s];if(c!=null){var u=pf(c[1])?c[0]:c[1];u>=0?(c[0]=i,i+=u,c[1]=i):(c[0]=0,c[1]=0)}}}},YKe={sign:KKe,expand:yqe,none:m0,silhouette:xqe,wiggle:bqe,positive:XKe},JKe=(t,e,n)=>{var r,s=(r=YKe[n])!==null&&r!==void 0?r:m0,i=gqe().keys(e).value((l,c)=>Number(Cs(l,c,0))).order(vF).offset(s),a=i(t);return a.forEach((l,c)=>{l.forEach((u,d)=>{var f=Cs(t[d],e[c],0);Array.isArray(f)&&f.length===2&&nn(f[0])&&nn(f[1])&&(u[0]=f[0],u[1]=f[1])})}),a};function Ble(t){return t==null?void 0:String(t)}function gV(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:i,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Xi(s[e.dataKey])){var l=_oe(n,"value",s[e.dataKey]);if(l)return l.coordinate+r/2}return n!=null&&n[i]?n[i].coordinate+r/2:null}var c=Cs(s,Xi(a)?e.dataKey:a),u=e.scale.map(c);return nn(u)?u:null}var yV=t=>{var{axis:e,ticks:n,offset:r,bandSize:s,entry:i,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var l=Cs(i,e.dataKey,e.scale.domain()[a]);if(Xi(l))return null;var c=e.scale.map(l);return nn(c)?c-s/2+r:null},ZKe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]},eXe=t=>{var e=t.flat(2).filter(nn);return[Math.min(...e),Math.max(...e)]},tXe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],nXe=(t,e,n)=>{if(t!=null)return tXe(Object.keys(t).reduce((r,s)=>{var i=t[s];if(!i)return r;var{stackedData:a}=i,l=a.reduce((c,u)=>{var d=Sle(u,e,n),f=eXe(d);return!br(f[0])||!br(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},xV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jm=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=mI(e,d=>d.coordinate),i=1/0,a=1,l=s.length;a<l;a++){var c=s[a],u=s[a-1];i=Math.min((c?.coordinate||0)-(u?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function vV(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:i}=t;return i1(i1({},e),{},{dataKey:n,payload:r,value:s,name:i})}function Hm(t,e){if(t)return String(t);if(typeof e=="string")return e}var rXe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},sXe=(t,e)=>e==="centric"?t.angle:t.radius,tp=t=>t.layout.width,np=t=>t.layout.height,iXe=t=>t.layout.scale,jle=t=>t.layout.margin,BI=Ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),jI=Ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Ele="data-recharts-item-index",Ile="data-recharts-item-id",mS=60;function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){aXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aXe(t,e,n){return(e=oXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oXe(t){var e=lXe(t,"string");return typeof e=="symbol"?e:e+""}function lXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cXe=t=>t.brush.height;function uXe(t){var e=jI(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:mS;return n+s}return n},0)}function dXe(t){var e=jI(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:mS;return n+s}return n},0)}function fXe(t){var e=BI(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function hXe(t){var e=BI(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var vo=Ve([tp,np,jle,cXe,uXe,dXe,fXe,hXe,Voe,zGe],(t,e,n,r,s,i,a,l,c,u)=>{var d={left:(n.left||0)+s,right:(n.right||0)+i},f={top:(n.top||0)+a,bottom:(n.bottom||0)+l},A=ok(ok({},f),d),m=A.bottom;A.bottom+=r,A=qKe(A,c,u);var g=t-A.left-A.right,y=e-A.top-A.bottom;return ok(ok({brushBottom:m},A),{},{width:Math.max(g,0),height:Math.max(y,0)})}),AXe=Ve(vo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),LP=Ve(tp,np,(t,e)=>({x:0,y:0,width:t,height:e})),pXe=C.createContext(null),Xo=()=>C.useContext(pXe)!=null,EI=t=>t.brush,II=Ve([EI,vo,jle],(t,e,n)=>({height:t.height,x:nn(t.x)?t.x:e.left,y:nn(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:nn(t.width)?t.width:e.width})),vR={},wR={},SR={},SV;function mXe(){return SV||(SV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:i}={}){let a,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(n.apply(a,l),a=void 0,l=null)},f=()=>{u&&d(),y()};let A=null;const m=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},r)},g=()=>{A!==null&&(clearTimeout(A),A=null)},y=()=>{g(),a=void 0,l=null},x=()=>{d()},v=function(...w){if(s?.aborted)return;a=this,l=w;const B=A==null;m(),c&&B&&d()};return v.schedule=m,v.cancel=y,v.flush=x,s?.addEventListener("abort",y,{once:!0}),v}t.debounce=e})(SR)),SR}var CV;function gXe(){return CV||(CV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mXe();function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);a&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...y){d=r.apply(this,y),f=null},s,{edges:u}),m=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=r.apply(this,y),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,y),d)},g=()=>(A.flush(),d);return m.cancel=A.cancel,m.flush=g,m}t.debounce=n})(wR)),wR}var kV;function yXe(){return kV||(kV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gXe();function n(r,s=0,i={}){const{leading:a=!0,trailing:l=!0}=i;return e.debounce(r,s,{leading:a,maxWait:s,trailing:l})}t.throttle=n})(vR)),vR}var CR,BV;function xXe(){return BV||(BV=1,CR=yXe().throttle),CR}var bXe=xXe();const vXe=oc(bXe);var L4=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>s[a++]))}},nh={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Nle=(t,e,n)=>{var{width:r=nh.width,height:s=nh.height,aspect:i,maxHeight:a}=n,l=y0(r)?t:Number(r),c=y0(s)?e:Number(s);return i&&i>0&&(l?c=l/i:c&&(l=c*i),a&&c!=null&&c>a&&(c=a)),{calculatedWidth:l,calculatedHeight:c}},wXe={width:0,height:0,overflow:"visible"},SXe={width:0,overflowX:"visible"},CXe={height:0,overflowY:"visible"},kXe={},BXe=t=>{var{width:e,height:n}=t,r=y0(e),s=y0(n);return r&&s?wXe:r?SXe:s?CXe:kXe};function jXe(t){var{width:e,height:n,aspect:r}=t,s=e,i=n;return s===void 0&&i===void 0?(s=nh.width,i=nh.height):s===void 0?s=r&&r>0?void 0:nh.width:i===void 0&&(i=r&&r>0?void 0:nh.height),{width:s,height:i}}function RF(){return RF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RF.apply(null,arguments)}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){EXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EXe(t,e,n){return(e=IXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IXe(t){var e=NXe(t,"string");return typeof e=="symbol"?e:e+""}function NXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tle=C.createContext(nh.initialDimension);function TXe(t){return wh(t.width)&&wh(t.height)}function _le(t){var{children:e,width:n,height:r}=t,s=C.useMemo(()=>({width:n,height:r}),[n,r]);return TXe(s)?C.createElement(Tle.Provider,{value:s},e):null}var $P=()=>C.useContext(Tle),_Xe=C.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=nh.initialDimension,width:s,height:i,minWidth:a=nh.minWidth,minHeight:l,maxHeight:c,children:u,debounce:d=nh.debounce,id:f,className:A,onResize:m,style:g={}}=t,y=C.useRef(null),x=C.useRef();x.current=m,C.useImperativeHandle(e,()=>y.current);var[v,w]=C.useState({containerWidth:r.width,containerHeight:r.height}),B=C.useCallback((F,D)=>{w(T=>{var N=Math.round(F),P=Math.round(D);return T.containerWidth===N&&T.containerHeight===P?T:{containerWidth:N,containerHeight:P}})},[]);C.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return jh;var F=P=>{var z,U=P[0];if(U!=null){var{width:ee,height:q}=U.contentRect;B(ee,q),(z=x.current)===null||z===void 0||z.call(x,ee,q)}};d>0&&(F=vXe(F,d,{trailing:!0,leading:!1}));var D=new ResizeObserver(F),{width:T,height:N}=y.current.getBoundingClientRect();return B(T,N),D.observe(y.current),()=>{D.disconnect()}},[B,d]);var{containerWidth:k,containerHeight:j}=v;L4(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:I,calculatedHeight:O}=Nle(k,j,{width:s,height:i,aspect:n,maxHeight:c});return L4(I!=null&&I>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,O,s,i,a,l,n),C.createElement("div",{id:f?"".concat(f):void 0,className:yr("recharts-responsive-container",A),style:EV(EV({},g),{},{width:s,height:i,minWidth:a,minHeight:l,maxHeight:c}),ref:y},C.createElement("div",{style:BXe({width:s,height:i})},C.createElement(_le,{width:I,height:O},u)))}),Xl=C.forwardRef((t,e)=>{var n=$P();if(wh(n.width)&&wh(n.height))return t.children;var{width:r,height:s}=jXe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:i,calculatedHeight:a}=Nle(void 0,void 0,{width:r,height:s,aspect:t.aspect,maxHeight:t.maxHeight});return nn(i)&&nn(a)?C.createElement(_le,{width:i,height:a},t.children):C.createElement(_Xe,RF({},t,{width:r,height:s,ref:e}))});function PP(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var NI=()=>{var t,e=Xo(),n=Xt(AXe),r=Xt(II),s=(t=Xt(EI))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},RXe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Rle=()=>{var t;return(t=Xt(vo))!==null&&t!==void 0?t:RXe},zP=()=>Xt(tp),UP=()=>Xt(np),OXe=()=>Xt(t=>t.layout.margin),Pr=t=>t.layout.layoutType,H0=()=>Xt(Pr),MP=()=>{var t=H0();if(t==="horizontal"||t==="vertical")return t},QP=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Ole=()=>Xt(QP),FXe=()=>{var t=H0();return t!==void 0},gS=t=>{var e=Gs(),n=Xo(),{width:r,height:s}=t,i=$P(),a=r,l=s;return i&&(a=i.width>0?i.width:r,l=i.height>0?i.height:s),C.useEffect(()=>{!n&&wh(a)&&wh(l)&&e(UKe({width:a,height:l}))},[e,n,a,l]),null},Fle=Symbol.for("immer-nothing"),IV=Symbol.for("immer-draftable"),Cu=Symbol.for("immer-state");function tf(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Z2=Object.getPrototypeOf;function Q1(t){return!!t&&!!t[Cu]}function b0(t){return t?Dle(t)||Array.isArray(t)||!!t[IV]||!!t.constructor?.[IV]||yS(t)||_I(t):!1}var DXe=Object.prototype.constructor.toString(),NV=new WeakMap;function Dle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=NV.get(n);return r===void 0&&(r=Function.toString.call(n),NV.set(n,r)),r===DXe}function $4(t,e,n=!0){TI(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function TI(t){const e=t[Cu];return e?e.type_:Array.isArray(t)?1:yS(t)?2:_I(t)?3:0}function OF(t,e){return TI(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Lle(t,e,n){const r=TI(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function LXe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function yS(t){return t instanceof Map}function _I(t){return t instanceof Set}function yg(t){return t.copy_||t.base_}function FF(t,e){if(yS(t))return new Map(t);if(_I(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Dle(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Cu];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Z2(t),r)}else{const r=Z2(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function HP(t,e=!1){return RI(t)||Q1(t)||!b0(t)||(TI(t)>1&&Object.defineProperties(t,{set:lk,add:lk,clear:lk,delete:lk}),Object.freeze(t),e&&Object.values(t).forEach(n=>HP(n,!0))),t}function $Xe(){tf(2)}var lk={value:$Xe};function RI(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var PXe={};function v0(t){const e=PXe[t];return e||tf(0,t),e}var ew;function $le(){return ew}function zXe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TV(t,e){e&&(v0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function DF(t){LF(t),t.drafts_.forEach(UXe),t.drafts_=null}function LF(t){t===ew&&(ew=t.parent_)}function _V(t){return ew=zXe(ew,t)}function UXe(t){const e=t[Cu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function RV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Cu].modified_&&(DF(e),tf(4)),b0(t)&&(t=P4(e,t),e.parent_||z4(e,t)),e.patches_&&v0("Patches").generateReplacementPatches_(n[Cu].base_,t,e.patches_,e.inversePatches_)):t=P4(e,n,[]),DF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Fle?t:void 0}function P4(t,e,n){if(RI(e))return e;const r=t.immer_.shouldUseStrictIteration(),s=e[Cu];if(!s)return $4(e,(i,a)=>OV(t,s,e,i,a,n),r),e;if(s.scope_!==t)return e;if(!s.modified_)return z4(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,l=!1;s.type_===3&&(a=new Set(i),i.clear(),l=!0),$4(a,(c,u)=>OV(t,s,i,c,u,n,l),r),z4(t,i,!1),n&&t.patches_&&v0("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function OV(t,e,n,r,s,i,a){if(s==null||typeof s!="object"&&!a)return;const l=RI(s);if(!(l&&!a)){if(Q1(s)){const c=i&&e&&e.type_!==3&&!OF(e.assigned_,r)?i.concat(r):void 0,u=P4(t,s,c);if(Lle(n,r,u),Q1(u))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(b0(s)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===s&&l)return;P4(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(yS(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&z4(t,s)}}}function z4(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HP(e,n)}function MXe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:$le(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=WP;n&&(s=[r],i=tw);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,l}var WP={get(t,e){if(e===Cu)return t;const n=yg(t);if(!OF(n,e))return QXe(t,n,e);const r=n[e];return t.finalized_||!b0(r)?r:r===kR(t.base_,e)?(BR(t),t.copy_[e]=PF(r,t)):r},has(t,e){return e in yg(t)},ownKeys(t){return Reflect.ownKeys(yg(t))},set(t,e,n){const r=Ple(yg(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=kR(yg(t),e),i=s?.[Cu];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(LXe(n,s)&&(n!==void 0||OF(t.base_,e)))return!0;BR(t),$F(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return kR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,BR(t),$F(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=yg(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){tf(11)},getPrototypeOf(t){return Z2(t.base_)},setPrototypeOf(){tf(12)}},tw={};$4(WP,(t,e)=>{tw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tw.deleteProperty=function(t,e){return tw.set.call(this,t,e,void 0)};tw.set=function(t,e,n){return WP.set.call(this,t[0],e,n,t[0])};function kR(t,e){const n=t[Cu];return(n?yg(n):t)[e]}function QXe(t,e,n){const r=Ple(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Ple(t,e){if(!(e in t))return;let n=Z2(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Z2(n)}}function $F(t){t.modified_||(t.modified_=!0,t.parent_&&$F(t.parent_))}function BR(t){t.copy_||(t.copy_=FF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var HXe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(c=i,...u){return a.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&tf(6),r!==void 0&&typeof r!="function"&&tf(7);let s;if(b0(e)){const i=_V(this),a=PF(e,void 0);let l=!0;try{s=n(a),l=!1}finally{l?DF(i):LF(i)}return TV(i,r),RV(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===Fle&&(s=void 0),this.autoFreeze_&&HP(s,!0),r){const i=[],a=[];v0("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else tf(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,c=>e(c,...l));let r,s;return[this.produce(e,n,(a,l)=>{r=a,s=l}),r,s]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){b0(t)||tf(8),Q1(t)&&(t=WXe(t));const e=_V(this),n=PF(t,void 0);return n[Cu].isManual_=!0,LF(e),n}finishDraft(t,e){const n=t&&t[Cu];(!n||!n.isManual_)&&tf(9);const{scope_:r}=n;return TV(r,e),RV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=v0("Patches").applyPatches_;return Q1(t)?r(t,e):this.produce(t,s=>r(s,e))}};function PF(t,e){const n=yS(t)?v0("MapSet").proxyMap_(t,e):_I(t)?v0("MapSet").proxySet_(t,e):MXe(t,e);return(e?e.scope_:$le()).drafts_.push(n),n}function WXe(t){return Q1(t)||tf(10,t),zle(t)}function zle(t){if(!b0(t)||RI(t))return t;const e=t[Cu];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=FF(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=FF(t,!0);return $4(n,(s,i)=>{Lle(n,s,zle(i))},r),e&&(e.finalized_=!1),n}var VXe=new HXe;VXe.produce;var qXe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Ule=Hc({name:"legend",initialState:qXe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:zi()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,s=lf(t).payload.indexOf(n);s>-1&&(t.payload[s]=r)},prepare:zi()},removeLegendPayload:{reducer(t,e){var n=lf(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:zi()}}}),{setLegendSize:FV,setLegendSettings:GXe,addLegendPayload:Mle,replaceLegendPayload:Qle,removeLegendPayload:Hle}=Ule.actions,KXe=Ule.reducer,XXe=["contextPayload"];function zF(){return zF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zF.apply(null,arguments)}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function H1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){YXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YXe(t,e,n){return(e=JXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JXe(t){var e=ZXe(t,"string");return typeof e=="symbol"?e:e+""}function ZXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eYe(t,e){if(t==null)return{};var n,r,s=tYe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function tYe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nYe(t){return t.value}function rYe(t){var{contextPayload:e}=t,n=eYe(t,XXe),r=Moe(e,t.payloadUniqBy,nYe),s=H1(H1({},n),{},{payload:r});return C.isValidElement(t.content)?C.cloneElement(t.content,s):typeof t.content=="function"?C.createElement(t.content,s):C.createElement(Kqe,s)}function sYe(t,e,n,r,s,i){var{layout:a,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&a==="vertical"?u={left:((r||0)-i.width)/2}:u=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((s||0)-i.height)/2}:d=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),H1(H1({},u),d)}function iYe(t){var e=Gs();return C.useEffect(()=>{e(GXe(t))},[e,t]),null}function aYe(t){var e=Gs();return C.useEffect(()=>(e(FV(t)),()=>{e(FV({width:0,height:0}))}),[e,t]),null}function oYe(t,e,n,r){return t==="vertical"&&e!=null?{height:e}:t==="horizontal"?{width:n||r}:null}var lYe={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function VP(t){var e=ki(t,lYe),n=QGe(),r=UVe(),s=OXe(),{width:i,height:a,wrapperStyle:l,portal:c}=e,[u,d]=qoe([n]),f=zP(),A=UP();if(f==null||A==null)return null;var m=f-(s?.left||0)-(s?.right||0),g=oYe(e.layout,a,i,m),y=c?l:H1(H1({position:"absolute",width:g?.width||i||"auto",height:g?.height||a||"auto"},sYe(l,e,s,f,A,u)),l),x=c??r;if(x==null||n==null)return null;var v=C.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:d},C.createElement(iYe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&C.createElement(aYe,{width:u.width,height:u.height}),C.createElement(rYe,zF({},e,g,{margin:s,chartWidth:f,chartHeight:A,contextPayload:n})));return zj.createPortal(v,x)}VP.displayName="Legend";function UF(){return UF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UF.apply(null,arguments)}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){cYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cYe(t,e,n){return(e=uYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uYe(t){var e=dYe(t,"string");return typeof e=="symbol"?e:e+""}function dYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fYe(t){return Array.isArray(t)&&vh(t[0])&&vh(t[1])?t.join(" ~ "):t}var Ry={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},hYe=t=>{var{separator:e=Ry.separator,contentStyle:n,itemStyle:r,labelStyle:s=Ry.labelStyle,payload:i,formatter:a,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=Ry.accessibilityLayer}=t,m=()=>{if(i&&i.length){var j={padding:0,margin:0},I=(l?mI(i,l):i).map((O,F)=>{if(O.type==="none")return null;var D=O.formatter||a||fYe,{value:T,name:N}=O,P=T,z=N;if(D){var U=D(T,N,O,F,i);if(Array.isArray(U))[P,z]=U;else if(U!=null)P=U;else return null}var ee=Bv(Bv({},Ry.itemStyle),{},{color:O.color||Ry.itemStyle.color},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:ee},vh(z)?C.createElement("span",{className:"recharts-tooltip-item-name"},z):null,vh(z)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},P),C.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},g=Bv(Bv({},Ry.contentStyle),n),y=Bv({margin:0},s),x=!Xi(d),v=x?d:"",w=yr("recharts-default-tooltip",c),B=yr("recharts-tooltip-label",u);x&&f&&i!==void 0&&i!==null&&(v=f(d,i));var k=A?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",UF({className:w,style:g},k),C.createElement("p",{className:B,style:y},C.isValidElement(v)?v:"".concat(v)),m())},jv="recharts-tooltip-wrapper",AYe={visibility:"hidden"};function pYe(t){var{coordinate:e,translateX:n,translateY:r}=t;return yr(jv,{["".concat(jv,"-right")]:nn(n)&&e&&nn(e.x)&&n>=e.x,["".concat(jv,"-left")]:nn(n)&&e&&nn(e.x)&&n<e.x,["".concat(jv,"-bottom")]:nn(r)&&e&&nn(e.y)&&r>=e.y,["".concat(jv,"-top")]:nn(r)&&e&&nn(e.y)&&r<e.y})}function $V(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:s,position:i,reverseDirection:a,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(i&&nn(i[r]))return i[r];var d=n[r]-l-(s>0?s:0),f=n[r]+s;if(e[r])return a[r]?d:f;var A=c[r];if(A==null)return 0;if(a[r]){var m=d,g=A;return m<g?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var y=f+l,x=A+u;return y>x?Math.max(d,A):Math.max(f,A)}function mYe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function gYe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:s,position:i,reverseDirection:a,tooltipBox:l,useTranslate3d:c,viewBox:u}=t,d,f,A;return l.height>0&&l.width>0&&n?(f=$V({allowEscapeViewBox:e,coordinate:n,key:"x",offset:s,position:i,reverseDirection:a,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),A=$V({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:i,reverseDirection:a,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),d=mYe({translateX:f,translateY:A,useTranslate3d:c})):d=AYe,{cssProperties:d,cssClasses:pYe({translateX:f,translateY:A,coordinate:n})}}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ck(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){MF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MF(t,e,n){return(e=yYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yYe(t){var e=xYe(t,"string");return typeof e=="symbol"?e:e+""}function xYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bYe extends C.PureComponent{constructor(){super(...arguments),MF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),MF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:a,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:x,hasPortalFromProps:v}=this.props,w=typeof u=="number"?u:u.x,B=typeof u=="number"?u:u.y,{cssClasses:k,cssProperties:j}=gYe({allowEscapeViewBox:n,coordinate:a,offsetLeft:w,offsetTop:B,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:A,viewBox:m}),I=v?{}:ck(ck({transition:c&&e?"transform ".concat(r,"ms ").concat(s):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),O=ck(ck({},I),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},g);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:O,ref:x},i)}}var Wle=()=>{var t;return(t=Xt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function QF(){return QF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QF.apply(null,arguments)}function zV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function UV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zV(Object(n),!0).forEach(function(r){vYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vYe(t,e,n){return(e=wYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wYe(t){var e=SYe(t,"string");return typeof e=="symbol"?e:e+""}function SYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MV={curveBasisClosed:aqe,curveBasisOpen:oqe,curveBasis:iqe,curveBumpX:WVe,curveBumpY:VVe,curveLinearClosed:lqe,curveLinear:hI,curveMonotoneX:cqe,curveMonotoneY:uqe,curveNatural:dqe,curveStep:fqe,curveStepAfter:Aqe,curveStepBefore:hqe},U4=t=>br(t.x)&&br(t.y),QV=t=>t.base!=null&&U4(t.base)&&U4(t),Ev=t=>t.x,Iv=t=>t.y,CYe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(hS(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=MV["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return MV[n]||hI},HV={connectNulls:!1,type:"linear"},kYe=t=>{var{type:e=HV.type,points:n=[],baseLine:r,layout:s,connectNulls:i=HV.connectNulls}=t,a=CYe(e,s),l=i?n.filter(U4):n;if(Array.isArray(r)){var c,u=n.map((g,y)=>UV(UV({},g),{},{base:r[y]}));s==="vertical"?c=tk().y(Iv).x1(Ev).x0(g=>g.base.x):c=tk().x(Ev).y1(Iv).y0(g=>g.base.y);var d=c.defined(QV).curve(a),f=i?u.filter(QV):u;return d(f)}var A;s==="vertical"&&nn(r)?A=tk().y(Iv).x1(Ev).x0(r):nn(r)?A=tk().x(Ev).y1(Iv).y0(r):A=xoe().x(Ev).y(Iv);var m=A.defined(U4).curve(a);return m(l)},g1=t=>{var{className:e,points:n,path:r,pathRef:s}=t,i=H0();if((!n||!n.length)&&!r)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||i,connectNulls:t.connectNulls},l=n&&n.length?kYe(a):r;return C.createElement("path",QF({},Ci(t),BP(t),{className:yr("recharts-curve",e),d:l===null?void 0:l,ref:s}))},BYe=["x","y","top","left","width","height","className"];function HF(){return HF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HF.apply(null,arguments)}function WV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jYe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WV(Object(n),!0).forEach(function(r){EYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EYe(t,e,n){return(e=IYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IYe(t){var e=NYe(t,"string");return typeof e=="symbol"?e:e+""}function NYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TYe(t,e){if(t==null)return{};var n,r,s=_Ye(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _Ye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RYe=(t,e,n,r,s,i)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),OYe=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:i=0,height:a=0,className:l}=t,c=TYe(t,BYe),u=jYe({x:e,y:n,top:r,left:s,width:i,height:a},c);return!nn(e)||!nn(n)||!nn(i)||!nn(a)||!nn(r)||!nn(s)?null:C.createElement("path",HF({},Ya(u),{className:yr("recharts-cross",l),d:RYe(e,n,i,a,r,s)}))};function FYe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function VV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VV(Object(n),!0).forEach(function(r){DYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DYe(t,e,n){return(e=LYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LYe(t){var e=$Ye(t,"string");return typeof e=="symbol"?e:e+""}function $Ye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PYe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Vle=(t,e,n)=>t.map(r=>"".concat(PYe(r)," ").concat(e,"ms ").concat(n)).join(","),zYe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),nw=(t,e)=>Object.keys(e).reduce((n,r)=>qV(qV({},n),{},{[r]:t(r,e[r])}),{});function GV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(n),!0).forEach(function(r){UYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UYe(t,e,n){return(e=MYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MYe(t){var e=QYe(t,"string");return typeof e=="symbol"?e:e+""}function QYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M4=(t,e,n)=>t+(e-t)*n,WF=t=>{var{from:e,to:n}=t;return e!==n},qle=(t,e,n)=>{var r=nw((s,i)=>{if(WF(i)){var[a,l]=t(i.from,i.to,i.velocity);return uo(uo({},i),{},{from:a,velocity:l})}return i},e);return n<1?nw((s,i)=>WF(i)&&r[s]!=null?uo(uo({},i),{},{velocity:M4(i.velocity,r[s].velocity,n),from:M4(i.from,r[s].from,n)}):i,e):qle(t,r,n-1)};function HYe(t,e,n,r,s,i){var a,l=r.reduce((A,m)=>uo(uo({},A),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>nw((A,m)=>m.from,l),u=()=>!Object.values(l).filter(WF).length,d=null,f=A=>{a||(a=A);var m=A-a,g=m/n.dt;l=qle(n,l,g),s(uo(uo(uo({},t),e),c())),a=A,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function WYe(t,e,n,r,s,i,a){var l=null,c=s.reduce((f,A)=>{var m=t[A],g=e[A];return m==null||g==null?f:uo(uo({},f),{},{[A]:[m,g]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/r,m=nw((y,x)=>M4(...x,n(A)),c);if(i(uo(uo(uo({},t),e),m)),A<1)l=a.setTimeout(d);else{var g=nw((y,x)=>M4(...x,n(1)),c);i(uo(uo(uo({},t),e),g))}};return()=>(l=a.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const VYe=(t,e,n,r,s,i)=>{var a=zYe(t,e);return n==null?()=>(s(uo(uo({},t),e)),()=>{}):n.isStepper===!0?HYe(t,e,n,a,s,i):WYe(t,e,n,r,a,s,i)};var Q4=1e-4,Gle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Kle=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),KV=(t,e)=>n=>{var r=Gle(t,e);return Kle(r,n)},qYe=(t,e)=>n=>{var r=Gle(t,e),s=[...r.map((i,a)=>i*a).slice(1),0];return Kle(s,n)},GYe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var s=r.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},KYe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=GYe(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},XYe=(t,e,n,r)=>{var s=KV(t,n),i=KV(e,r),a=qYe(t,n),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var m=s(f)-d,g=a(f);if(Math.abs(m-d)<Q4||g<Q4)return i(f);f=l(f-m/g)}return i(f)};return c.isStepper=!1,c},XV=function(){return XYe(...KYe(...arguments))},YYe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,i=(a,l,c)=>{var u=-(a-l)*n,d=c*r,f=c+(u-d)*s/1e3,A=c*s/1e3+a;return Math.abs(A-l)<Q4&&Math.abs(f)<Q4?[l,0]:[A,f]};return i.isStepper=!0,i.dt=s,i},JYe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return XV(t);case"spring":return YYe();default:if(t.split("(")[0]==="cubic-bezier")return XV(t)}return typeof t=="function"?t:null};function ZYe(t){var e,n=()=>null,r=!1,s=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var l=a,[c,...u]=l;if(typeof c=="number"){s=t.setTimeout(i.bind(null,u),c);return}i(c),s=t.setTimeout(i.bind(null,u));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,s&&(s(),s=null),i(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class eJe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function tJe(){return ZYe(new eJe)}var nJe=C.createContext(tJe);function rJe(t,e){var n=C.useContext(nJe);return C.useMemo(()=>e??n(t),[t,e,n])}var sJe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xS={isSsr:sJe()},iJe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},YV={t:0},jR={t:1};function pb(t){var e=ki(t,iJe),{isActive:n,canBegin:r,duration:s,easing:i,begin:a,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=n==="auto"?!xS.isSsr:n,f=rJe(e.animationId,e.animationManager),[A,m]=C.useState(d?YV:jR),g=C.useRef(null);return C.useEffect(()=>{d||m(jR)},[d]),C.useEffect(()=>{if(!d||!r)return jh;var y=VYe(YV,jR,JYe(i),s,m,f.getTimeoutController()),x=()=>{g.current=y()};return f.start([c,a,x,s,l]),()=>{f.stop(),g.current&&g.current(),l()}},[d,r,s,i,a,c,l,f]),u(A.t)}function mb(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(K2(e)),r=C.useRef(t);return r.current!==t&&(n.current=K2(e),r.current=t),n.current}var aJe=["radius"],oJe=["radius"],JV,ZV,eq,tq,nq,rq,sq,iq,aq,oq;function lq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lq(Object(n),!0).forEach(function(r){lJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lJe(t,e,n){return(e=cJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cJe(t){var e=uJe(t,"string");return typeof e=="symbol"?e:e+""}function uJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H4(){return H4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H4.apply(null,arguments)}function uq(t,e){if(t==null)return{};var n,r,s=dJe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function dJe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var dq=(t,e,n,r,s)=>{var i=Yp(n),a=Yp(r),l=Math.min(Math.abs(i)/2,Math.abs(a)/2),c=a>=0?1:-1,u=i>=0?1:-1,d=a>=0&&i>=0||a<0&&i<0?1:0,f;if(l>0&&Array.isArray(s)){for(var A=[0,0,0,0],m=0,g=4;m<g;m++){var y,x=(y=s[m])!==null&&y!==void 0?y:0;A[m]=x>l?l:x}f=la(JV||(JV=Wf(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=la(ZV||(ZV=Wf(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=la(eq||(eq=Wf(["L ",",",""])),t+n-u*A[1],e),A[1]>0&&(f+=la(tq||(tq=Wf(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+n,e+c*A[1])),f+=la(nq||(nq=Wf(["L ",",",""])),t+n,e+r-c*A[2]),A[2]>0&&(f+=la(rq||(rq=Wf(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+n-u*A[2],e+r)),f+=la(sq||(sq=Wf(["L ",",",""])),t+u*A[3],e+r),A[3]>0&&(f+=la(iq||(iq=Wf(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+r-c*A[3])),f+="Z"}else if(l>0&&s===+s&&s>0){var v=Math.min(l,s);f=la(aq||(aq=Wf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*v,v,v,d,t+u*v,e,t+n-u*v,e,v,v,d,t+n,e+c*v,t+n,e+r-c*v,v,v,d,t+n-u*v,e+r,t+u*v,e+r,v,v,d,t,e+r-c*v)}else f=la(oq||(oq=Wf(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return f},fq={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xle=t=>{var e=ki(t,fq),n=C.useRef(null),[r,s]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&s(Z)}catch{}},[]);var{x:i,y:a,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=e,x=C.useRef(l),v=C.useRef(c),w=C.useRef(i),B=C.useRef(a),k=C.useMemo(()=>({x:i,y:a,width:l,height:c,radius:u}),[i,a,l,c,u]),j=mb(k,"rectangle-");if(i!==+i||a!==+a||l!==+l||c!==+c||l===0||c===0)return null;var I=yr("recharts-rectangle",d);if(!y){var O=Ya(e),{radius:F}=O,D=uq(O,aJe);return C.createElement("path",H4({},D,{x:Yp(i),y:Yp(a),width:Yp(l),height:Yp(c),radius:typeof u=="number"?u:void 0,className:I,d:dq(i,a,l,c,u)}))}var T=x.current,N=v.current,P=w.current,z=B.current,U="0px ".concat(r===-1?1:r,"px"),ee="".concat(r,"px 0px"),q=Vle(["strokeDasharray"],A,typeof f=="string"?f:fq.animationEasing);return C.createElement(pb,{animationId:j,key:j,canBegin:r>0,duration:A,easing:f,isActive:y,begin:m},Z=>{var G=Ts(T,l,Z),ne=Ts(N,c,Z),K=Ts(P,i,Z),H=Ts(z,a,Z);n.current&&(x.current=G,v.current=ne,w.current=K,B.current=H);var Q;g?Z>0?Q={transition:q,strokeDasharray:ee}:Q={strokeDasharray:U}:Q={strokeDasharray:ee};var X=Ya(e),{radius:re}=X,le=uq(X,oJe);return C.createElement("path",H4({},le,{radius:typeof u=="number"?u:void 0,className:I,d:dq(K,H,G,ne,u),ref:n,style:cq(cq({},Q),e.style)}))})};function hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hq(Object(n),!0).forEach(function(r){fJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fJe(t,e,n){return(e=hJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hJe(t){var e=AJe(t,"string");return typeof e=="symbol"?e:e+""}function AJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W4=Math.PI/180,V4=t=>t*Math.PI/180,pJe=t=>t*180/Math.PI,ms=(t,e,n,r)=>({x:t+Math.cos(-W4*r)*n,y:e+Math.sin(-W4*r)*n}),Yle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},mJe=(t,e)=>{var{x:n,y:r}=t,{x:s,y:i}=e;return Math.sqrt((n-s)**2+(r-i)**2)},gJe=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:i}=e,a=mJe({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var l=(n-s)/a,c=Math.acos(l);return r>i&&(c=2*Math.PI-c),{radius:a,angle:pJe(c),angleInRadian:c}},yJe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:e-i*360,endAngle:n-i*360}},xJe=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(s,i);return t+a*360},bJe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:s,angle:i}=gJe({x:n,y:r},e),{innerRadius:a,outerRadius:l}=e;if(s<a||s>l||s===0)return null;var{startAngle:c,endAngle:u}=yJe(e),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?Aq(Aq({},e),{},{radius:s,angle:xJe(d,e)}):null};function Jle(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:i}=t,a=ms(e,n,r,s),l=ms(e,n,r,i);return{points:[a,l],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}var pq,mq,gq,yq,xq,bq,vq;function VF(){return VF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VF.apply(null,arguments)}function Tg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var vJe=(t,e)=>{var n=Uo(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},uk=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:i,isExternal:a,cornerRadius:l,cornerIsExternal:c}=t,u=l*(a?1:-1)+r,d=Math.asin(l/u)/W4,f=c?s:s+i*d,A=ms(e,n,u,f),m=ms(e,n,r,f),g=c?s-i*d:s,y=ms(e,n,u*Math.cos(d*W4),g);return{center:A,circleTangency:m,lineTangency:y,theta:d}},Zle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a}=t,l=vJe(i,a),c=i+l,u=ms(e,n,s,i),d=ms(e,n,s,c),f=la(pq||(pq=Tg(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,s,s,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(r>0){var A=ms(e,n,r,i),m=ms(e,n,r,c);f+=la(mq||(mq=Tg(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,r,r,+(Math.abs(l)>180),+(i<=c),A.x,A.y)}else f+=la(gq||(gq=Tg(["L ",","," Z"])),e,n);return f},wJe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Uo(u-c),{circleTangency:f,lineTangency:A,theta:m}=uk({cx:e,cy:n,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:y,theta:x}=uk({cx:e,cy:n,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-m-x;if(v<0)return a?la(yq||(yq=Tg(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,i,i,i*2,i,i,-i*2):Zle({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:c,endAngle:u});var w=la(xq||(xq=Tg(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,i,i,+(d<0),f.x,f.y,s,s,+(v>180),+(d<0),g.x,g.y,i,i,+(d<0),y.x,y.y);if(r>0){var{circleTangency:B,lineTangency:k,theta:j}=uk({cx:e,cy:n,radius:r,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:I,lineTangency:O,theta:F}=uk({cx:e,cy:n,radius:r,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),D=l?Math.abs(c-u):Math.abs(c-u)-j-F;if(D<0&&i===0)return"".concat(w,"L").concat(e,",").concat(n,"Z");w+=la(bq||(bq=Tg(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),O.x,O.y,i,i,+(d<0),I.x,I.y,r,r,+(D>180),+(d>0),B.x,B.y,i,i,+(d<0),k.x,k.y)}else w+=la(vq||(vq=Tg(["L",",","Z"])),e,n);return w},SJe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ece=t=>{var e=ki(t,SJe),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(i<s||u===d)return null;var A=yr("recharts-sector",f),m=i-s,g=Rl(a,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=wJe({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=Zle({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),C.createElement("path",VF({},Ya(e),{className:A,d:y}))};function CJe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(Ooe(e)){if(t==="centric"){var{cx:r,cy:s,innerRadius:i,outerRadius:a,angle:l}=e,c=ms(r,s,i,l),u=ms(r,s,a,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Jle(e)}}var ER={},IR={},NR={},wq;function kJe(){return wq||(wq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hoe();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(NR)),NR}var Sq;function BJe(){return Sq||(Sq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kJe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(IR)),IR}var Cq;function jJe(){return Cq||(Cq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe(),n=BJe();function r(s,i,a){a&&typeof a!="number"&&e.isIterateeCall(s,i,a)&&(i=a=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),a=a===void 0?s<i?1:-1:n.toFinite(a);const l=Math.max(Math.ceil((i-s)/(a||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=a;return c}t.range=r})(ER)),ER}var TR,kq;function EJe(){return kq||(kq=1,TR=jJe().range),TR}var IJe=EJe();const tce=oc(IJe);function lm(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NJe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qP(t){let e,n,r;t.length!==2?(e=lm,n=(l,c)=>lm(t(l),c),r=(l,c)=>t(l)-c):(e=t===lm||t===NJe?t:TJe,n=t,r=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:s,center:a,right:i}}function TJe(){return 0}function nce(t){return t===null?NaN:+t}function*_Je(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const RJe=qP(lm),bS=RJe.right;qP(nce).center;class Bq extends Map{constructor(e,n=DJe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(jq(this,e))}has(e){return super.has(jq(this,e))}set(e,n){return super.set(OJe(this,e),n)}delete(e){return super.delete(FJe(this,e))}}function jq({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function OJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function FJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function DJe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function LJe(t=lm){if(t===lm)return rce;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function rce(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const $Je=Math.sqrt(50),PJe=Math.sqrt(10),zJe=Math.sqrt(2);function q4(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=$Je?10:i>=PJe?5:i>=zJe?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/a,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*a,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?q4(t,e,n*2):[l,c,u]}function qF(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,a]=r?q4(e,t,n):q4(t,e,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)c[u]=(i-u)/-a;else for(let u=0;u<l;++u)c[u]=(i-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(s+u)/-a;else for(let u=0;u<l;++u)c[u]=(s+u)*a;return c}function GF(t,e,n){return e=+e,t=+t,n=+n,q4(t,e,n)[2]}function KF(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?GF(e,t,n):GF(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function Eq(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Iq(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function sce(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?rce:LJe(s);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/c+A)),g=Math.min(r,Math.floor(e+(c-u)*f/c+A));sce(t,e,m,g,s)}const i=t[e];let a=n,l=r;for(Nv(t,n,e),s(t[r],i)>0&&Nv(t,n,r);a<l;){for(Nv(t,a,l),++a,--l;s(t[a],i)<0;)++a;for(;s(t[l],i)>0;)--l}s(t[n],i)===0?Nv(t,n,l):(++l,Nv(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Nv(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function UJe(t,e,n){if(t=Float64Array.from(_Je(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Iq(t);if(e>=1)return Eq(t);var r,s=(r-1)*e,i=Math.floor(s),a=Eq(sce(t,i).subarray(0,i+1)),l=Iq(t.subarray(i+1));return a+(l-a)*(s-i)}}function MJe(t,e,n=nce){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),a=+n(t[i],i,t),l=+n(t[i+1],i+1,t);return a+(l-a)*(s-i)}}function QJe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function xd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function rp(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const XF=Symbol("implicit");function GP(){var t=new Bq,e=[],n=[],r=XF;function s(i){let a=t.get(i);if(a===void 0){if(r!==XF)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new Bq;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return GP(e,n).unknown(r)},xd.apply(s,arguments),s}function KP(){var t=GP().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,a,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,m=s<r,g=m?s:r,y=m?r:s;i=(y-g)/Math.max(1,A-c+u*2),l&&(i=Math.floor(i)),g+=(y-g-i*(A-c))*d,a=i*(1-c),l&&(g=Math.round(g),a=Math.round(a));var x=QJe(A).map(function(v){return g+i*v});return n(m?x.reverse():x)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([r,s]=A,r=+r,s=+s,f()):[r,s]},t.rangeRound=function(A){return[r,s]=A,r=+r,s=+s,l=!0,f()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return KP(e(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},xd.apply(f(),arguments)}function ice(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ice(e())},t}function HJe(){return ice(KP.apply(null,arguments).paddingInner(1))}function XP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ace(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vS(){}var rw=.7,G4=1/rw,y1="\\s*([+-]?\\d+)\\s*",sw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WJe=/^#([0-9a-f]{3,8})$/,VJe=new RegExp(`^rgb\\(${y1},${y1},${y1}\\)$`),qJe=new RegExp(`^rgb\\(${dh},${dh},${dh}\\)$`),GJe=new RegExp(`^rgba\\(${y1},${y1},${y1},${sw}\\)$`),KJe=new RegExp(`^rgba\\(${dh},${dh},${dh},${sw}\\)$`),XJe=new RegExp(`^hsl\\(${sw},${dh},${dh}\\)$`),YJe=new RegExp(`^hsla\\(${sw},${dh},${dh},${sw}\\)$`),Nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XP(vS,iw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tq,formatHex:Tq,formatHex8:JJe,formatHsl:ZJe,formatRgb:_q,toString:_q});function Tq(){return this.rgb().formatHex()}function JJe(){return this.rgb().formatHex8()}function ZJe(){return oce(this).formatHsl()}function _q(){return this.rgb().formatRgb()}function iw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=WJe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Rq(e):n===3?new Oc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?dk(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?dk(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VJe.exec(t))?new Oc(e[1],e[2],e[3],1):(e=qJe.exec(t))?new Oc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GJe.exec(t))?dk(e[1],e[2],e[3],e[4]):(e=KJe.exec(t))?dk(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XJe.exec(t))?Dq(e[1],e[2]/100,e[3]/100,1):(e=YJe.exec(t))?Dq(e[1],e[2]/100,e[3]/100,e[4]):Nq.hasOwnProperty(t)?Rq(Nq[t]):t==="transparent"?new Oc(NaN,NaN,NaN,0):null}function Rq(t){return new Oc(t>>16&255,t>>8&255,t&255,1)}function dk(t,e,n,r){return r<=0&&(t=e=n=NaN),new Oc(t,e,n,r)}function eZe(t){return t instanceof vS||(t=iw(t)),t?(t=t.rgb(),new Oc(t.r,t.g,t.b,t.opacity)):new Oc}function YF(t,e,n,r){return arguments.length===1?eZe(t):new Oc(t,e,n,r??1)}function Oc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}XP(Oc,YF,ace(vS,{brighter(t){return t=t==null?G4:Math.pow(G4,t),new Oc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rw:Math.pow(rw,t),new Oc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Oc(Wg(this.r),Wg(this.g),Wg(this.b),K4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oq,formatHex:Oq,formatHex8:tZe,formatRgb:Fq,toString:Fq}));function Oq(){return`#${_g(this.r)}${_g(this.g)}${_g(this.b)}`}function tZe(){return`#${_g(this.r)}${_g(this.g)}${_g(this.b)}${_g((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fq(){const t=K4(this.opacity);return`${t===1?"rgb(":"rgba("}${Wg(this.r)}, ${Wg(this.g)}, ${Wg(this.b)}${t===1?")":`, ${t})`}`}function K4(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wg(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _g(t){return t=Wg(t),(t<16?"0":"")+t.toString(16)}function Dq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nf(t,e,n,r)}function oce(t){if(t instanceof nf)return new nf(t.h,t.s,t.l,t.opacity);if(t instanceof vS||(t=iw(t)),!t)return new nf;if(t instanceof nf)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,l=i-s,c=(i+s)/2;return l?(e===i?a=(n-r)/l+(n<r)*6:n===i?a=(r-e)/l+2:a=(e-n)/l+4,l/=c<.5?i+s:2-i-s,a*=60):l=c>0&&c<1?0:a,new nf(a,l,c,t.opacity)}function nZe(t,e,n,r){return arguments.length===1?oce(t):new nf(t,e,n,r??1)}function nf(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}XP(nf,nZe,ace(vS,{brighter(t){return t=t==null?G4:Math.pow(G4,t),new nf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rw:Math.pow(rw,t),new nf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Oc(_R(t>=240?t-240:t+120,s,r),_R(t,s,r),_R(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new nf(Lq(this.h),fk(this.s),fk(this.l),K4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=K4(this.opacity);return`${t===1?"hsl(":"hsla("}${Lq(this.h)}, ${fk(this.s)*100}%, ${fk(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lq(t){return t=(t||0)%360,t<0?t+360:t}function fk(t){return Math.max(0,Math.min(1,t||0))}function _R(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const YP=t=>()=>t;function rZe(t,e){return function(n){return t+n*e}}function sZe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function iZe(t){return(t=+t)==1?lce:function(e,n){return n-e?sZe(e,n,t):YP(isNaN(e)?n:e)}}function lce(t,e){var n=e-t;return n?rZe(t,n):YP(isNaN(t)?e:t)}const $q=(function t(e){var n=iZe(e);function r(s,i){var a=n((s=YF(s)).r,(i=YF(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),u=lce(s.opacity,i.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=t,r})(1);function aZe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function oZe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lZe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)s[a]=gb(t[a],e[a]);for(;a<n;++a)i[a]=e[a];return function(l){for(a=0;a<r;++a)i[a]=s[a](l);return i}}function cZe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function X4(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uZe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=gb(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var JF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RR=new RegExp(JF.source,"g");function dZe(t){return function(){return t}}function fZe(t){return function(e){return t(e)+""}}function hZe(t,e){var n=JF.lastIndex=RR.lastIndex=0,r,s,i,a=-1,l=[],c=[];for(t=t+"",e=e+"";(r=JF.exec(t))&&(s=RR.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),l[a]?l[a]+=i:l[++a]=i),(r=r[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:X4(r,s)})),n=RR.lastIndex;return n<e.length&&(i=e.slice(n),l[a]?l[a]+=i:l[++a]=i),l.length<2?c[0]?fZe(c[0].x):dZe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function gb(t,e){var n=typeof e,r;return e==null||n==="boolean"?YP(e):(n==="number"?X4:n==="string"?(r=iw(e))?(e=r,$q):hZe:e instanceof iw?$q:e instanceof Date?cZe:oZe(e)?aZe:Array.isArray(e)?lZe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uZe:X4)(t,e)}function JP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function AZe(t,e){e===void 0&&(e=t,t=gb);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[l](a-l)}}function pZe(t){return function(){return t}}function Y4(t){return+t}var Pq=[0,1];function Yl(t){return t}function ZF(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:pZe(isNaN(e)?NaN:.5)}function mZe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function gZe(t,e,n){var r=t[0],s=t[1],i=e[0],a=e[1];return s<r?(r=ZF(s,r),i=n(a,i)):(r=ZF(r,s),i=n(i,a)),function(l){return i(r(l))}}function yZe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=ZF(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(l){var c=bS(t,l,1,r)-1;return i[c](s[c](l))}}function wS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function OI(){var t=Pq,e=Pq,n=gb,r,s,i,a=Yl,l,c,u;function d(){var A=Math.min(t.length,e.length);return a!==Yl&&(a=mZe(t[0],t[A-1])),l=A>2?yZe:gZe,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?i:(c||(c=l(t.map(r),e,n)))(r(a(A)))}return f.invert=function(A){return a(s((u||(u=l(e,t.map(r),X4)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,Y4),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),n=JP,d()},f.clamp=function(A){return arguments.length?(a=A?!0:Yl,d()):a!==Yl},f.interpolate=function(A){return arguments.length?(n=A,d()):n},f.unknown=function(A){return arguments.length?(i=A,f):i},function(A,m){return r=A,s=m,d()}}function ZP(){return OI()(Yl,Yl)}function xZe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function J4(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function W1(t){return t=J4(Math.abs(t)),t?t[1]:NaN}function bZe(t,e){return function(n,r){for(var s=n.length,i=[],a=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=t[a=(a+1)%t.length];return i.reverse().join(e)}}function vZe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wZe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aw(t){if(!(e=wZe.exec(t)))throw new Error("invalid format: "+t);var e;return new ez({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}aw.prototype=ez.prototype;function ez(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ez.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SZe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var Z4;function CZe(t,e){var n=J4(t,e);if(!n)return Z4=void 0,t.toPrecision(e);var r=n[0],s=n[1],i=s-(Z4=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+J4(t,Math.max(0,e+i-1))[0]}function zq(t,e){var n=J4(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const Uq={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xZe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zq(t*100,e),r:zq,s:CZe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mq(t){return t}var Qq=Array.prototype.map,Hq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kZe(t){var e=t.grouping===void 0||t.thousands===void 0?Mq:bZe(Qq.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Mq:vZe(Qq.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=aw(f);var m=f.fill,g=f.align,y=f.sign,x=f.symbol,v=f.zero,w=f.width,B=f.comma,k=f.precision,j=f.trim,I=f.type;I==="n"?(B=!0,I="g"):Uq[I]||(k===void 0&&(k=12),j=!0,I="g"),(v||m==="0"&&g==="=")&&(v=!0,m="0",g="=");var O=(A&&A.prefix!==void 0?A.prefix:"")+(x==="$"?n:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),F=(x==="$"?r:/[%p]/.test(I)?a:"")+(A&&A.suffix!==void 0?A.suffix:""),D=Uq[I],T=/[defgprs%]/.test(I);k=k===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function N(P){var z=O,U=F,ee,q,Z;if(I==="c")U=D(P)+U,P="";else{P=+P;var G=P<0||1/P<0;if(P=isNaN(P)?c:D(Math.abs(P),k),j&&(P=SZe(P)),G&&+P==0&&y!=="+"&&(G=!1),z=(G?y==="("?y:l:y==="-"||y==="("?"":y)+z,U=(I==="s"&&!isNaN(P)&&Z4!==void 0?Hq[8+Z4/3]:"")+U+(G&&y==="("?")":""),T){for(ee=-1,q=P.length;++ee<q;)if(Z=P.charCodeAt(ee),48>Z||Z>57){U=(Z===46?s+P.slice(ee+1):P.slice(ee))+U,P=P.slice(0,ee);break}}}B&&!v&&(P=e(P,1/0));var ne=z.length+P.length+U.length,K=ne<w?new Array(w-ne+1).join(m):"";switch(B&&v&&(P=e(K+P,K.length?w-U.length:1/0),K=""),g){case"<":P=z+P+U+K;break;case"=":P=z+K+P+U;break;case"^":P=K.slice(0,ne=K.length>>1)+z+P+U+K.slice(ne);break;default:P=K+z+P+U;break}return i(P)}return N.toString=function(){return f+""},N}function d(f,A){var m=Math.max(-8,Math.min(8,Math.floor(W1(A)/3)))*3,g=Math.pow(10,-m),y=u((f=aw(f),f.type="f",f),{suffix:Hq[8+m/3]});return function(x){return y(g*x)}}return{format:u,formatPrefix:d}}var hk,tz,cce;BZe({thousands:",",grouping:[3],currency:["$",""]});function BZe(t){return hk=kZe(t),tz=hk.format,cce=hk.formatPrefix,hk}function jZe(t){return Math.max(0,-W1(Math.abs(t)))}function EZe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(W1(e)/3)))*3-W1(Math.abs(t)))}function IZe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,W1(e)-W1(t))+1}function uce(t,e,n,r){var s=KF(t,e,n),i;switch(r=aw(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=EZe(s,a))&&(r.precision=i),cce(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=IZe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=jZe(s))&&(r.precision=i-(r.type==="%")*2);break}}return tz(r)}function Wm(t){var e=t.domain;return t.ticks=function(n){var r=e();return qF(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return uce(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,a=r[s],l=r[i],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=GF(a,l,n),u===c)return r[s]=a,r[i]=l,e(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function dce(){var t=ZP();return t.copy=function(){return wS(t,dce())},xd.apply(t,arguments),Wm(t)}function fce(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Y4),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fce(t).unknown(e)},t=arguments.length?Array.from(t,Y4):[0,1],Wm(n)}function hce(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],a;return i<s&&(a=n,n=r,r=a,a=s,s=i,i=a),t[n]=e.floor(s),t[r]=e.ceil(i),t}function Wq(t){return Math.log(t)}function Vq(t){return Math.exp(t)}function NZe(t){return-Math.log(-t)}function TZe(t){return-Math.exp(-t)}function _Ze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function RZe(t){return t===10?_Ze:t===Math.E?Math.exp:e=>Math.pow(t,e)}function OZe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function qq(t){return(e,n)=>-t(-e,n)}function nz(t){const e=t(Wq,Vq),n=e.domain;let r=10,s,i;function a(){return s=OZe(r),i=RZe(r),n()[0]<0?(s=qq(s),i=qq(i),t(NZe,TZe)):t(Wq,Vq),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=s(u),m=s(d),g,y;const x=l==null?10:+l;let v=[];if(!(r%1)&&m-A<x){if(A=Math.floor(A),m=Math.ceil(m),u>0){for(;A<=m;++A)for(g=1;g<r;++g)if(y=A<0?g/i(-A):g*i(A),!(y<u)){if(y>d)break;v.push(y)}}else for(;A<=m;++A)for(g=r-1;g>=1;--g)if(y=A>0?g/i(-A):g*i(A),!(y<u)){if(y>d)break;v.push(y)}v.length*2<x&&(v=qF(u,d,x))}else v=qF(A,m,Math.min(m-A,x)).map(i);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=aw(c)).precision==null&&(c.trim=!0),c=tz(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(hce(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),e}function Ace(){const t=nz(OI()).domain([1,10]);return t.copy=()=>wS(t,Ace()).base(t.base()),xd.apply(t,arguments),t}function Gq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Kq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function rz(t){var e=1,n=t(Gq(e),Kq(e));return n.constant=function(r){return arguments.length?t(Gq(e=+r),Kq(e)):e},Wm(n)}function pce(){var t=rz(OI());return t.copy=function(){return wS(t,pce()).constant(t.constant())},xd.apply(t,arguments)}function Xq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function FZe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function DZe(t){return t<0?-t*t:t*t}function sz(t){var e=t(Yl,Yl),n=1;function r(){return n===1?t(Yl,Yl):n===.5?t(FZe,DZe):t(Xq(n),Xq(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Wm(e)}function iz(){var t=sz(OI());return t.copy=function(){return wS(t,iz()).exponent(t.exponent())},xd.apply(t,arguments),t}function LZe(){return iz.apply(null,arguments).exponent(.5)}function Yq(t){return Math.sign(t)*t*t}function $Ze(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mce(){var t=ZP(),e=[0,1],n=!1,r;function s(i){var a=$Ze(t(i));return isNaN(a)?r:n?Math.round(a):a}return s.invert=function(i){return t.invert(Yq(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,Y4)).map(Yq)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return mce(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},xd.apply(s,arguments),Wm(s)}function gce(){var t=[],e=[],n=[],r;function s(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=MJe(t,a/l);return i}function i(a){return a==null||isNaN(a=+a)?r:e[bS(n,a)]}return i.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(lm),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return gce().domain(t).range(e).unknown(r)},xd.apply(i,arguments)}function yce(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function a(c){return c!=null&&c<=c?s[bS(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},a.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(i=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return yce().domain([t,e]).range(s).unknown(i)},xd.apply(Wm(a),arguments)}function xce(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[bS(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return xce().domain(t).range(e).unknown(n)},xd.apply(s,arguments)}const OR=new Date,FR=new Date;function wo(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),l=s.ceil(i);return i-a<l-i?a:l},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<a)||!(l>0))return c;let u;do c.push(u=new Date(+i)),e(i,l),t(i);while(u<i&&i<a);return c},s.filter=i=>wo(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!i(a););else for(;--l>=0;)for(;e(a,1),!i(a););}),n&&(s.count=(i,a)=>(OR.setTime(+i),FR.setTime(+a),t(OR),t(FR),Math.floor(n(OR,FR))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?a=>r(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const ej=wo(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ej.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wo(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ej);ej.range;const gA=1e3,rd=gA*60,yA=rd*60,$A=yA*24,az=$A*7,Jq=$A*30,DR=$A*365,Rg=wo(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*gA)},(t,e)=>(e-t)/gA,t=>t.getUTCSeconds());Rg.range;const oz=wo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gA)},(t,e)=>{t.setTime(+t+e*rd)},(t,e)=>(e-t)/rd,t=>t.getMinutes());oz.range;const lz=wo(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*rd)},(t,e)=>(e-t)/rd,t=>t.getUTCMinutes());lz.range;const cz=wo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gA-t.getMinutes()*rd)},(t,e)=>{t.setTime(+t+e*yA)},(t,e)=>(e-t)/yA,t=>t.getHours());cz.range;const uz=wo(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*yA)},(t,e)=>(e-t)/yA,t=>t.getUTCHours());uz.range;const SS=wo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rd)/$A,t=>t.getDate()-1);SS.range;const FI=wo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$A,t=>t.getUTCDate()-1);FI.range;const bce=wo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$A,t=>Math.floor(t/$A));bce.range;function W0(t){return wo(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*rd)/az)}const DI=W0(0),tj=W0(1),PZe=W0(2),zZe=W0(3),V1=W0(4),UZe=W0(5),MZe=W0(6);DI.range;tj.range;PZe.range;zZe.range;V1.range;UZe.range;MZe.range;function V0(t){return wo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/az)}const LI=V0(0),nj=V0(1),QZe=V0(2),HZe=V0(3),q1=V0(4),WZe=V0(5),VZe=V0(6);LI.range;nj.range;QZe.range;HZe.range;q1.range;WZe.range;VZe.range;const dz=wo(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());dz.range;const fz=wo(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());fz.range;const PA=wo(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());PA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wo(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});PA.range;const zA=wo(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zA.range;function vce(t,e,n,r,s,i){const a=[[Rg,1,gA],[Rg,5,5*gA],[Rg,15,15*gA],[Rg,30,30*gA],[i,1,rd],[i,5,5*rd],[i,15,15*rd],[i,30,30*rd],[s,1,yA],[s,3,3*yA],[s,6,6*yA],[s,12,12*yA],[r,1,$A],[r,2,2*$A],[n,1,az],[e,1,Jq],[e,3,3*Jq],[t,1,DR]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return A?g.reverse():g}function c(u,d,f){const A=Math.abs(d-u)/f,m=qP(([,,x])=>x).right(a,A);if(m===a.length)return t.every(KF(u/DR,d/DR,f));if(m===0)return ej.every(Math.max(KF(u,d,f),1));const[g,y]=a[A/a[m-1][2]<a[m][2]/A?m-1:m];return g.every(y)}return[l,c]}const[qZe,GZe]=vce(zA,fz,LI,bce,uz,lz),[KZe,XZe]=vce(PA,dz,DI,SS,cz,oz);function LR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $R(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function YZe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,u=_v(s),d=Rv(s),f=_v(i),A=Rv(i),m=_v(a),g=Rv(a),y=_v(l),x=Rv(l),v=_v(c),w=Rv(c),B={a:Z,A:G,b:ne,B:K,c:null,d:sG,e:sG,f:vet,g:_et,G:Oet,H:yet,I:xet,j:bet,L:wce,m:wet,M:Cet,p:H,q:Q,Q:oG,s:lG,S:ket,u:Bet,U:jet,V:Eet,w:Iet,W:Net,x:null,X:null,y:Tet,Y:Ret,Z:Fet,"%":aG},k={a:X,A:re,b:le,B:Ae,c:null,d:iG,e:iG,f:Pet,g:Ket,G:Yet,H:Det,I:Let,j:$et,L:Cce,m:zet,M:Uet,p:xe,q:Be,Q:oG,s:lG,S:Met,u:Qet,U:Het,V:Wet,w:Vet,W:qet,x:null,X:null,y:Get,Y:Xet,Z:Jet,"%":aG},j={a:T,A:N,b:P,B:z,c:U,d:nG,e:nG,f:Aet,g:tG,G:eG,H:rG,I:rG,j:uet,L:het,m:cet,M:det,p:D,q:oet,Q:met,s:get,S:fet,u:net,U:ret,V:set,w:tet,W:iet,x:ee,X:q,y:tG,Y:eG,Z:aet,"%":pet};B.x=I(n,B),B.X=I(r,B),B.c=I(e,B),k.x=I(n,k),k.X=I(r,k),k.c=I(e,k);function I(me,ve){return function(je){var ye=[],ze=-1,at=0,ie=me.length,Le,nt,Et;for(je instanceof Date||(je=new Date(+je));++ze<ie;)me.charCodeAt(ze)===37&&(ye.push(me.slice(at,ze)),(nt=Zq[Le=me.charAt(++ze)])!=null?Le=me.charAt(++ze):nt=Le==="e"?" ":"0",(Et=ve[Le])&&(Le=Et(je,nt)),ye.push(Le),at=ze+1);return ye.push(me.slice(at,ze)),ye.join("")}}function O(me,ve){return function(je){var ye=Tv(1900,void 0,1),ze=F(ye,me,je+="",0),at,ie;if(ze!=je.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(ve&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(at=$R(Tv(ye.y,0,1)),ie=at.getUTCDay(),at=ie>4||ie===0?nj.ceil(at):nj(at),at=FI.offset(at,(ye.V-1)*7),ye.y=at.getUTCFullYear(),ye.m=at.getUTCMonth(),ye.d=at.getUTCDate()+(ye.w+6)%7):(at=LR(Tv(ye.y,0,1)),ie=at.getDay(),at=ie>4||ie===0?tj.ceil(at):tj(at),at=SS.offset(at,(ye.V-1)*7),ye.y=at.getFullYear(),ye.m=at.getMonth(),ye.d=at.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),ie="Z"in ye?$R(Tv(ye.y,0,1)).getUTCDay():LR(Tv(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(ie+5)%7:ye.w+ye.U*7-(ie+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,$R(ye)):LR(ye)}}function F(me,ve,je,ye){for(var ze=0,at=ve.length,ie=je.length,Le,nt;ze<at;){if(ye>=ie)return-1;if(Le=ve.charCodeAt(ze++),Le===37){if(Le=ve.charAt(ze++),nt=j[Le in Zq?ve.charAt(ze++):Le],!nt||(ye=nt(me,je,ye))<0)return-1}else if(Le!=je.charCodeAt(ye++))return-1}return ye}function D(me,ve,je){var ye=u.exec(ve.slice(je));return ye?(me.p=d.get(ye[0].toLowerCase()),je+ye[0].length):-1}function T(me,ve,je){var ye=m.exec(ve.slice(je));return ye?(me.w=g.get(ye[0].toLowerCase()),je+ye[0].length):-1}function N(me,ve,je){var ye=f.exec(ve.slice(je));return ye?(me.w=A.get(ye[0].toLowerCase()),je+ye[0].length):-1}function P(me,ve,je){var ye=v.exec(ve.slice(je));return ye?(me.m=w.get(ye[0].toLowerCase()),je+ye[0].length):-1}function z(me,ve,je){var ye=y.exec(ve.slice(je));return ye?(me.m=x.get(ye[0].toLowerCase()),je+ye[0].length):-1}function U(me,ve,je){return F(me,e,ve,je)}function ee(me,ve,je){return F(me,n,ve,je)}function q(me,ve,je){return F(me,r,ve,je)}function Z(me){return a[me.getDay()]}function G(me){return i[me.getDay()]}function ne(me){return c[me.getMonth()]}function K(me){return l[me.getMonth()]}function H(me){return s[+(me.getHours()>=12)]}function Q(me){return 1+~~(me.getMonth()/3)}function X(me){return a[me.getUTCDay()]}function re(me){return i[me.getUTCDay()]}function le(me){return c[me.getUTCMonth()]}function Ae(me){return l[me.getUTCMonth()]}function xe(me){return s[+(me.getUTCHours()>=12)]}function Be(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var ve=I(me+="",B);return ve.toString=function(){return me},ve},parse:function(me){var ve=O(me+="",!1);return ve.toString=function(){return me},ve},utcFormat:function(me){var ve=I(me+="",k);return ve.toString=function(){return me},ve},utcParse:function(me){var ve=O(me+="",!0);return ve.toString=function(){return me},ve}}}var Zq={"-":"",_:" ",0:"0"},Yo=/^\s*\d+/,JZe=/^%/,ZZe=/[\\^$*+?|[\]().{}]/g;function fs(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function eet(t){return t.replace(ZZe,"\\$&")}function _v(t){return new RegExp("^(?:"+t.map(eet).join("|")+")","i")}function Rv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function tet(t,e,n){var r=Yo.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function net(t,e,n){var r=Yo.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ret(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function set(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function iet(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function eG(t,e,n){var r=Yo.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tG(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function aet(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oet(t,e,n){var r=Yo.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function cet(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nG(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function uet(t,e,n){var r=Yo.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function rG(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function det(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function fet(t,e,n){var r=Yo.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function het(t,e,n){var r=Yo.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Aet(t,e,n){var r=Yo.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function pet(t,e,n){var r=JZe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function met(t,e,n){var r=Yo.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function get(t,e,n){var r=Yo.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function sG(t,e){return fs(t.getDate(),e,2)}function yet(t,e){return fs(t.getHours(),e,2)}function xet(t,e){return fs(t.getHours()%12||12,e,2)}function bet(t,e){return fs(1+SS.count(PA(t),t),e,3)}function wce(t,e){return fs(t.getMilliseconds(),e,3)}function vet(t,e){return wce(t,e)+"000"}function wet(t,e){return fs(t.getMonth()+1,e,2)}function Cet(t,e){return fs(t.getMinutes(),e,2)}function ket(t,e){return fs(t.getSeconds(),e,2)}function Bet(t){var e=t.getDay();return e===0?7:e}function jet(t,e){return fs(DI.count(PA(t)-1,t),e,2)}function Sce(t){var e=t.getDay();return e>=4||e===0?V1(t):V1.ceil(t)}function Eet(t,e){return t=Sce(t),fs(V1.count(PA(t),t)+(PA(t).getDay()===4),e,2)}function Iet(t){return t.getDay()}function Net(t,e){return fs(tj.count(PA(t)-1,t),e,2)}function Tet(t,e){return fs(t.getFullYear()%100,e,2)}function _et(t,e){return t=Sce(t),fs(t.getFullYear()%100,e,2)}function Ret(t,e){return fs(t.getFullYear()%1e4,e,4)}function Oet(t,e){var n=t.getDay();return t=n>=4||n===0?V1(t):V1.ceil(t),fs(t.getFullYear()%1e4,e,4)}function Fet(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fs(e/60|0,"0",2)+fs(e%60,"0",2)}function iG(t,e){return fs(t.getUTCDate(),e,2)}function Det(t,e){return fs(t.getUTCHours(),e,2)}function Let(t,e){return fs(t.getUTCHours()%12||12,e,2)}function $et(t,e){return fs(1+FI.count(zA(t),t),e,3)}function Cce(t,e){return fs(t.getUTCMilliseconds(),e,3)}function Pet(t,e){return Cce(t,e)+"000"}function zet(t,e){return fs(t.getUTCMonth()+1,e,2)}function Uet(t,e){return fs(t.getUTCMinutes(),e,2)}function Met(t,e){return fs(t.getUTCSeconds(),e,2)}function Qet(t){var e=t.getUTCDay();return e===0?7:e}function Het(t,e){return fs(LI.count(zA(t)-1,t),e,2)}function kce(t){var e=t.getUTCDay();return e>=4||e===0?q1(t):q1.ceil(t)}function Wet(t,e){return t=kce(t),fs(q1.count(zA(t),t)+(zA(t).getUTCDay()===4),e,2)}function Vet(t){return t.getUTCDay()}function qet(t,e){return fs(nj.count(zA(t)-1,t),e,2)}function Get(t,e){return fs(t.getUTCFullYear()%100,e,2)}function Ket(t,e){return t=kce(t),fs(t.getUTCFullYear()%100,e,2)}function Xet(t,e){return fs(t.getUTCFullYear()%1e4,e,4)}function Yet(t,e){var n=t.getUTCDay();return t=n>=4||n===0?q1(t):q1.ceil(t),fs(t.getUTCFullYear()%1e4,e,4)}function Jet(){return"+0000"}function aG(){return"%"}function oG(t){return+t}function lG(t){return Math.floor(+t/1e3)}var Oy,Bce,jce;Zet({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zet(t){return Oy=YZe(t),Bce=Oy.format,Oy.parse,jce=Oy.utcFormat,Oy.utcParse,Oy}function ett(t){return new Date(t)}function ttt(t){return t instanceof Date?+t:+new Date(+t)}function hz(t,e,n,r,s,i,a,l,c,u){var d=ZP(),f=d.invert,A=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),w=u("%b %d"),B=u("%B"),k=u("%Y");function j(I){return(c(I)<I?m:l(I)<I?g:a(I)<I?y:i(I)<I?x:r(I)<I?s(I)<I?v:w:n(I)<I?B:k)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,ttt)):A().map(ett)},d.ticks=function(I){var O=A();return t(O[0],O[O.length-1],I??10)},d.tickFormat=function(I,O){return O==null?j:u(O)},d.nice=function(I){var O=A();return(!I||typeof I.range!="function")&&(I=e(O[0],O[O.length-1],I??10)),I?A(hce(O,I)):d},d.copy=function(){return wS(d,hz(t,e,n,r,s,i,a,l,c,u))},d}function ntt(){return xd.apply(hz(KZe,XZe,PA,dz,DI,SS,cz,oz,Rg,Bce).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rtt(){return xd.apply(hz(qZe,GZe,zA,fz,LI,FI,uz,lz,Rg,jce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $I(){var t=0,e=1,n,r,s,i,a=Yl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(s===0?.5:(f=(i(f)-n)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(A){var m,g;return arguments.length?([m,g]=A,a=f(m,g),u):[a(0),a(1)]}}return u.range=d(gb),u.rangeRound=d(JP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,n=f(t),r=f(e),s=n===r?0:1/(r-n),u}}function Vm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ece(){var t=Wm($I()(Yl));return t.copy=function(){return Vm(t,Ece())},rp.apply(t,arguments)}function Ice(){var t=nz($I()).domain([1,10]);return t.copy=function(){return Vm(t,Ice()).base(t.base())},rp.apply(t,arguments)}function Nce(){var t=rz($I());return t.copy=function(){return Vm(t,Nce()).constant(t.constant())},rp.apply(t,arguments)}function Az(){var t=sz($I());return t.copy=function(){return Vm(t,Az()).exponent(t.exponent())},rp.apply(t,arguments)}function stt(){return Az.apply(null,arguments).exponent(.5)}function Tce(){var t=[],e=Yl;function n(r){if(r!=null&&!isNaN(r=+r))return e((bS(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(lm),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>UJe(t,i/r))},n.copy=function(){return Tce(e).domain(t)},rp.apply(n,arguments)}function PI(){var t=0,e=.5,n=1,r=1,s,i,a,l,c,u=Yl,d,f=!1,A;function m(y){return isNaN(y=+y)?A:(y=.5+((y=+d(y))-i)*(r*y<r*i?l:c),u(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,n]=y,s=d(t=+t),i=d(e=+e),a=d(n=+n),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),r=i<s?-1:1,m):[t,e,n]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(x){var v,w,B;return arguments.length?([v,w,B]=x,u=AZe(y,[v,w,B]),m):[u(0),u(.5),u(1)]}}return m.range=g(gb),m.rangeRound=g(JP),m.unknown=function(y){return arguments.length?(A=y,m):A},function(y){return d=y,s=y(t),i=y(e),a=y(n),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),r=i<s?-1:1,m}}function _ce(){var t=Wm(PI()(Yl));return t.copy=function(){return Vm(t,_ce())},rp.apply(t,arguments)}function Rce(){var t=nz(PI()).domain([.1,1,10]);return t.copy=function(){return Vm(t,Rce()).base(t.base())},rp.apply(t,arguments)}function Oce(){var t=rz(PI());return t.copy=function(){return Vm(t,Oce()).constant(t.constant())},rp.apply(t,arguments)}function pz(){var t=sz(PI());return t.copy=function(){return Vm(t,pz()).exponent(t.exponent())},rp.apply(t,arguments)}function itt(){return pz.apply(null,arguments).exponent(.5)}const s2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:KP,scaleDiverging:_ce,scaleDivergingLog:Rce,scaleDivergingPow:pz,scaleDivergingSqrt:itt,scaleDivergingSymlog:Oce,scaleIdentity:fce,scaleImplicit:XF,scaleLinear:dce,scaleLog:Ace,scaleOrdinal:GP,scalePoint:HJe,scalePow:iz,scaleQuantile:gce,scaleQuantize:yce,scaleRadial:mce,scaleSequential:Ece,scaleSequentialLog:Ice,scaleSequentialPow:Az,scaleSequentialQuantile:Tce,scaleSequentialSqrt:stt,scaleSequentialSymlog:Nce,scaleSqrt:LZe,scaleSymlog:pce,scaleThreshold:xce,scaleTime:ntt,scaleUtc:rtt,tickFormat:uce},Symbol.toStringTag,{value:"Module"}));var sp=t=>t.chartData,CS=Ve([sp],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Fce=(t,e,n,r)=>r?CS(t):sp(t),Dce=(t,e,n)=>n?CS(t):sp(t);function UA(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(br(e)&&br(n))return!0}return!1}function cG(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Lce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,i;if(br(n))s=n;else if(typeof n=="function")return;if(br(r))i=r;else if(typeof r=="function")return;var a=[s,i];if(UA(a))return a}}function att(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(UA(r))return cG(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,a,l;if(s==="auto")e!=null&&(a=Math.min(...e));else if(nn(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e?.[0]))}catch{}else if(typeof s=="string"&&xV.test(s)){var c=xV.exec(s);if(c==null||c[1]==null||e==null)a=void 0;else{var u=+c[1];a=e[0]-u}}else a=e?.[0];if(i==="auto")e!=null&&(l=Math.max(...e));else if(nn(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e?.[1]))}catch{}else if(typeof i=="string"&&bV.test(i)){var d=bV.exec(i);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e?.[1];var A=[a,l];if(UA(A))return e==null?A:cG(A,e,n)}}}var yb=1e9,ott={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gz,Hi=!0,Ad="[DecimalError] ",Vg=Ad+"Invalid argument: ",mz=Ad+"Exponent out of range: ",xb=Math.floor,xg=Math.pow,ltt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,du,Fo=1e7,xi=7,$ce=9007199254740991,rj=xb($ce/xi),pn={};pn.absoluteValue=pn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pn.comparedTo=pn.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};pn.decimalPlaces=pn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*xi;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};pn.dividedBy=pn.div=function(t){return wA(this,new this.constructor(t))};pn.dividedToIntegerBy=pn.idiv=function(t){var e=this,n=e.constructor;return ti(wA(e,new n(t),0,1),n.precision)};pn.equals=pn.eq=function(t){return!this.cmp(t)};pn.exponent=function(){return eo(this)};pn.greaterThan=pn.gt=function(t){return this.cmp(t)>0};pn.greaterThanOrEqualTo=pn.gte=function(t){return this.cmp(t)>=0};pn.isInteger=pn.isint=function(){return this.e>this.d.length-2};pn.isNegative=pn.isneg=function(){return this.s<0};pn.isPositive=pn.ispos=function(){return this.s>0};pn.isZero=function(){return this.s===0};pn.lessThan=pn.lt=function(t){return this.cmp(t)<0};pn.lessThanOrEqualTo=pn.lte=function(t){return this.cmp(t)<1};pn.logarithm=pn.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(du))throw Error(Ad+"NaN");if(n.s<1)throw Error(Ad+(n.s?"NaN":"-Infinity"));return n.eq(du)?new r(0):(Hi=!1,e=wA(ow(n,i),ow(t,i),i),Hi=!0,ti(e,s))};pn.minus=pn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Uce(e,t):Pce(e,(t.s=-t.s,t))};pn.modulo=pn.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Ad+"NaN");return n.s?(Hi=!1,e=wA(n,t,0,1).times(t),Hi=!0,n.minus(e)):ti(new r(n),s)};pn.naturalExponential=pn.exp=function(){return zce(this)};pn.naturalLogarithm=pn.ln=function(){return ow(this)};pn.negated=pn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pn.plus=pn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Pce(e,t):Uce(e,(t.s=-t.s,t))};pn.precision=pn.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Vg+t);if(e=eo(s)+1,r=s.d.length-1,n=r*xi+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};pn.squareRoot=pn.sqrt=function(){var t,e,n,r,s,i,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ad+"NaN")}for(t=eo(l),Hi=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=rh(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=xb((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=a=n+3;;)if(i=r,r=i.plus(wA(l,i,a+2)).times(.5),rh(i.d).slice(0,a)===(e=rh(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(ti(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(e!="9999")break;a+=4}return Hi=!0,ti(r,n)};pn.times=pn.mul=function(t){var e,n,r,s,i,a,l,c,u,d=this,f=d.constructor,A=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=A.length,u=m.length,c<u&&(i=A,A=m,m=i,a=c,c=u,u=a),i=[],a=c+u,r=a;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,s=c+r;s>r;)l=i[s]+m[r]*A[s-r-1]+e,i[s--]=l%Fo|0,e=l/Fo|0;i[s]=(i[s]+e)%Fo|0}for(;!i[--a];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Hi?ti(t,f.precision):t};pn.toDecimalPlaces=pn.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Sh(t,0,yb),e===void 0?e=r.rounding:Sh(e,0,8),ti(n,t+eo(n)+1,e))};pn.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=w0(r,!0):(Sh(t,0,yb),e===void 0?e=s.rounding:Sh(e,0,8),r=ti(new s(r),t+1,e),n=w0(r,!0,t+1)),n};pn.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?w0(s):(Sh(t,0,yb),e===void 0?e=i.rounding:Sh(e,0,8),r=ti(new i(s),t+eo(s)+1,e),n=w0(r.abs(),!1,t+eo(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};pn.toInteger=pn.toint=function(){var t=this,e=t.constructor;return ti(new e(t),eo(t)+1,e.rounding)};pn.toNumber=function(){return+this};pn.toPower=pn.pow=function(t){var e,n,r,s,i,a,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(du);if(l=new c(l),!l.s){if(t.s<1)throw Error(Ad+"Infinity");return l}if(l.eq(du))return l;if(r=c.precision,t.eq(du))return ti(l,r);if(e=t.e,n=t.d.length-1,a=e>=n,i=l.s,a){if((n=d<0?-d:d)<=$ce){for(s=new c(du),e=Math.ceil(r/xi+4),Hi=!1;n%2&&(s=s.times(l),dG(s.d,e)),n=xb(n/2),n!==0;)l=l.times(l),dG(l.d,e);return Hi=!0,t.s<0?new c(du).div(s):ti(s,r)}}else if(i<0)throw Error(Ad+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Hi=!1,s=t.times(ow(l,r+u)),Hi=!0,s=zce(s),s.s=i,s};pn.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=eo(s),r=w0(s,n<=i.toExpNeg||n>=i.toExpPos)):(Sh(t,1,yb),e===void 0?e=i.rounding:Sh(e,0,8),s=ti(new i(s),t,e),n=eo(s),r=w0(s,t<=n||n<=i.toExpNeg,t)),r};pn.toSignificantDigits=pn.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Sh(t,1,yb),e===void 0?e=r.rounding:Sh(e,0,8)),ti(new r(n),t,e)};pn.toString=pn.valueOf=pn.val=pn.toJSON=pn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=eo(t),n=t.constructor;return w0(t,e<=n.toExpNeg||e>=n.toExpPos)};function Pce(t,e){var n,r,s,i,a,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Hi?ti(e,f):e;if(c=t.d,u=e.d,a=t.e,s=e.e,c=c.slice(),i=a-s,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,s=a,l=c.length),a=Math.ceil(f/xi),l=a>l?a+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Fo|0,c[i]%=Fo;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Hi?ti(e,f):e}function Sh(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Vg+t)}function rh(t){var e,n,r,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)r=t[e]+"",n=xi-r.length,n&&(i+=Qp(n)),i+=r;a=t[e],r=a+"",n=xi-r.length,n&&(i+=Qp(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var wA=(function(){function t(r,s){var i,a=0,l=r.length;for(r=r.slice();l--;)i=r[l]*s+a,r[l]=i%Fo|0,a=i/Fo|0;return a&&r.unshift(a),r}function e(r,s,i,a){var l,c;if(i!=a)c=i>a?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,i){for(var a=0;i--;)r[i]-=a,a=r[i]<s[i]?1:0,r[i]=a*Fo+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,a){var l,c,u,d,f,A,m,g,y,x,v,w,B,k,j,I,O,F,D=r.constructor,T=r.s==s.s?1:-1,N=r.d,P=s.d;if(!r.s)return new D(r);if(!s.s)throw Error(Ad+"Division by zero");for(c=r.e-s.e,O=P.length,j=N.length,m=new D(T),g=m.d=[],u=0;P[u]==(N[u]||0);)++u;if(P[u]>(N[u]||0)&&--c,i==null?w=i=D.precision:a?w=i+(eo(r)-eo(s))+1:w=i,w<0)return new D(0);if(w=w/xi+2|0,u=0,O==1)for(d=0,P=P[0],w++;(u<j||d)&&w--;u++)B=d*Fo+(N[u]||0),g[u]=B/P|0,d=B%P|0;else{for(d=Fo/(P[0]+1)|0,d>1&&(P=t(P,d),N=t(N,d),O=P.length,j=N.length),k=O,y=N.slice(0,O),x=y.length;x<O;)y[x++]=0;F=P.slice(),F.unshift(0),I=P[0],P[1]>=Fo/2&&++I;do d=0,l=e(P,y,O,x),l<0?(v=y[0],O!=x&&(v=v*Fo+(y[1]||0)),d=v/I|0,d>1?(d>=Fo&&(d=Fo-1),f=t(P,d),A=f.length,x=y.length,l=e(f,y,A,x),l==1&&(d--,n(f,O<A?F:P,A))):(d==0&&(l=d=1),f=P.slice()),A=f.length,A<x&&f.unshift(0),n(y,f,x),l==-1&&(x=y.length,l=e(P,y,O,x),l<1&&(d++,n(y,O<x?F:P,x))),x=y.length):l===0&&(d++,y=[0]),g[u++]=d,l&&y[0]?y[x++]=N[k]||0:(y=[N[k]],x=1);while((k++<j||y[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,ti(m,a?i+eo(m)+1:i)}})();function zce(t,e){var n,r,s,i,a,l,c=0,u=0,d=t.constructor,f=d.precision;if(eo(t)>16)throw Error(mz+eo(t));if(!t.s)return new d(du);for(Hi=!1,l=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(xg(2,u))/Math.LN10*2+5|0,l+=r,n=s=i=new d(du),d.precision=l;;){if(s=ti(s.times(t),l),n=n.times(++c),a=i.plus(wA(s,n,l)),rh(a.d).slice(0,l)===rh(i.d).slice(0,l)){for(;u--;)i=ti(i.times(i),l);return d.precision=f,e==null?(Hi=!0,ti(i,f)):i}i=a}}function eo(t){for(var e=t.e*xi,n=t.d[0];n>=10;n/=10)e++;return e}function PR(t,e,n){if(e>t.LN10.sd())throw Hi=!0,n&&(t.precision=n),Error(Ad+"LN10 precision limit exceeded");return ti(new t(t.LN10),e)}function Qp(t){for(var e="";t--;)e+="0";return e}function ow(t,e){var n,r,s,i,a,l,c,u,d,f=1,A=10,m=t,g=m.d,y=m.constructor,x=y.precision;if(m.s<1)throw Error(Ad+(m.s?"NaN":"-Infinity"));if(m.eq(du))return new y(0);if(e==null?(Hi=!1,u=x):u=e,m.eq(10))return e==null&&(Hi=!0),PR(y,u);if(u+=A,y.precision=u,n=rh(g),r=n.charAt(0),i=eo(m),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=rh(m.d),r=n.charAt(0),f++;i=eo(m),r>1?(m=new y("0."+n),i++):m=new y(r+"."+n.slice(1))}else return c=PR(y,u+2,x).times(i+""),m=ow(new y(r+"."+n.slice(1)),u-A).plus(c),y.precision=x,e==null?(Hi=!0,ti(m,x)):m;for(l=a=m=wA(m.minus(du),m.plus(du),u),d=ti(m.times(m),u),s=3;;){if(a=ti(a.times(d),u),c=l.plus(wA(a,new y(s),u)),rh(c.d).slice(0,u)===rh(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(PR(y,u+2,x).times(i+""))),l=wA(l,new y(f),u),y.precision=x,e==null?(Hi=!0,ti(l,x)):l;l=c,s+=2}}function uG(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=xb(n/xi),t.d=[],r=(n+1)%xi,n<0&&(r+=xi),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=xi;r<s;)t.d.push(+e.slice(r,r+=xi));e=e.slice(r),r=xi-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Hi&&(t.e>rj||t.e<-rj))throw Error(mz+n)}else t.s=0,t.e=0,t.d=[0];return t}function ti(t,e,n){var r,s,i,a,l,c,u,d,f=t.d;for(a=1,i=f[0];i>=10;i/=10)a++;if(r=e-a,r<0)r+=xi,s=e,u=f[d=0];else{if(d=Math.ceil((r+1)/xi),i=f.length,d>=i)return t;for(u=i=f[d],a=1;i>=10;i/=10)a++;r%=xi,s=r-xi+a}if(n!==void 0&&(i=xg(10,a-s-1),l=u/i%10|0,c=e<0||f[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/xg(10,a-s):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(i=eo(t),f.length=1,e=e-i-1,f[0]=xg(10,(xi-e%xi)%xi),t.e=xb(-e/xi)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,i=1,d--):(f.length=d+1,i=xg(10,xi-r),f[d]=s>0?(u/xg(10,a-s)%xg(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Fo&&(f[0]=1,++t.e);break}else{if(f[d]+=i,f[d]!=Fo)break;f[d--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(Hi&&(t.e>rj||t.e<-rj))throw Error(mz+eo(t));return t}function Uce(t,e){var n,r,s,i,a,l,c,u,d,f,A=t.constructor,m=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Hi?ti(e,m):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,l=f.length):(n=f,r=u,l=c.length),s=Math.max(Math.ceil(m/xi),l)+2,a>s&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}a=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>a;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=Fo-1;--c[i],c[s]+=Fo}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Hi?ti(e,m):e):new A(0)}function w0(t,e,n){var r,s=eo(t),i=rh(t.d),a=i.length;return e?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Qp(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Qp(-s-1)+i,n&&(r=n-a)>0&&(i+=Qp(r))):s>=a?(i+=Qp(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+Qp(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=Qp(r))),t.s<0?"-"+i:i}function dG(t,e){if(t.length>e)return t.length=e,!0}function Mce(t){var e,n,r;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Vg+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return uG(a,i.toString())}else if(typeof i!="string")throw Error(Vg+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,ltt.test(i))uG(a,i);else throw Error(Vg+i)}if(s.prototype=pn,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Mce,s.config=s.set=ctt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function ctt(t){if(!t||typeof t!="object")throw Error(Ad+"Object expected");var e,n,r,s=["precision",1,yb,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(xb(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Vg+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Vg+n+": "+r);return this}var gz=Mce(ott);du=new gz(1);const Ns=gz;function Qce(t){var e;return t===0?e=1:e=Math.floor(new Ns(t).abs().log(10).toNumber())+1,e}function Hce(t,e,n){for(var r=new Ns(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var Wce=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},Vce=(t,e,n)=>{if(t.lte(0))return new Ns(0);var r=Qce(t.toNumber()),s=new Ns(10).pow(r),i=t.div(s),a=r!==1?.05:.1,l=new Ns(Math.ceil(i.div(a).toNumber())).add(n).mul(a),c=l.mul(s);return e?new Ns(c.toNumber()):new Ns(Math.ceil(c.toNumber()))},utt=(t,e,n)=>{var r=new Ns(1),s=new Ns(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new Ns(10).pow(Qce(t)-1),s=new Ns(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new Ns(Math.floor(t)))}else t===0?s=new Ns(Math.floor((e-1)/2)):n||(s=new Ns(Math.floor(t)));for(var a=Math.floor((e-1)/2),l=[],c=0;c<e;c++)l.push(s.add(new Ns(c-a).mul(r)).toNumber());return l},qce=function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ns(0),tickMin:new Ns(0),tickMax:new Ns(0)};var a=Vce(new Ns(n).sub(e).div(r-1),s,i),l;e<=0&&n>=0?l=new Ns(0):(l=new Ns(e).add(n).div(2),l=l.sub(new Ns(l).mod(a)));var c=Math.ceil(l.sub(e).div(a).toNumber()),u=Math.ceil(new Ns(n).sub(l).div(a).toNumber()),d=c+u+1;return d>r?qce(e,n,r,s,i+1):(d<r&&(u=n>0?u+(r-d):u,c=n>0?c:c+(r-d)),{step:a,tickMin:l.sub(new Ns(c).mul(a)),tickMax:l.add(new Ns(u).mul(a))})},dtt=function(e){var[n,r]=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(s,2),[l,c]=Wce([n,r]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...Array(s-1).fill(1/0)]:[...Array(s-1).fill(-1/0),c];return n>r?u.reverse():u}if(l===c)return utt(l,s,i);var{step:d,tickMin:f,tickMax:A}=qce(l,c,a,i,0),m=Hce(f,A.add(new Ns(.1).mul(d)),d);return n>r?m.reverse():m},ftt=function(e,n){var[r,s]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=Wce([r,s]);if(a===-1/0||l===1/0)return[r,s];if(a===l)return[a];var c=Math.max(n,2),u=Vce(new Ns(l).sub(a).div(c-1),i,0),d=[...Hce(new Ns(a),new Ns(l),u),l];return i===!1&&(d=d.map(f=>Math.round(f))),r>s?d.reverse():d},Gce=t=>t.rootProps.maxBarSize,htt=t=>t.rootProps.barGap,Kce=t=>t.rootProps.barCategoryGap,Att=t=>t.rootProps.barSize,kS=t=>t.rootProps.stackOffset,Xce=t=>t.rootProps.reverseStackOrder,yz=t=>t.options.chartName,xz=t=>t.rootProps.syncId,Yce=t=>t.rootProps.syncMethod,bz=t=>t.options.eventEmitter,ptt=t=>t.rootProps.baseValue,Wi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Pp={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:Wi.axis},Vd={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,tickLine:!0,type:"auto",zIndex:Wi.axis},zI=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function bb(t,e,n){if(n!=="auto")return n;if(t!=null)return kf(t,e)?"category":"number"}function fG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(n),!0).forEach(function(r){mtt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mtt(t,e,n){return(e=gtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gtt(t){var e=ytt(t,"string");return typeof e=="symbol"?e:e+""}function ytt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hG={allowDataOverflow:Pp.allowDataOverflow,allowDecimals:Pp.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Pp.angleAxisId,includeHidden:!1,name:void 0,reversed:Pp.reversed,scale:Pp.scale,tick:Pp.tick,tickCount:void 0,ticks:void 0,type:Pp.type,unit:void 0},AG={allowDataOverflow:Vd.allowDataOverflow,allowDecimals:Vd.allowDecimals,allowDuplicatedCategory:Vd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vd.radiusAxisId,includeHidden:Vd.includeHidden,name:void 0,reversed:Vd.reversed,scale:Vd.scale,tick:Vd.tick,tickCount:Vd.tickCount,ticks:void 0,type:Vd.type,unit:void 0},xtt=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},vb=Ve([xtt,QP],(t,e)=>{var n;if(t!=null)return t;var r=(n=bb(e,"angleAxis",hG.type))!==null&&n!==void 0?n:"category";return sj(sj({},hG),{},{type:r})}),btt=(t,e)=>t.polarAxis.radiusAxis[e],BS=Ve([btt,QP],(t,e)=>{var n;if(t!=null)return t;var r=(n=bb(e,"radiusAxis",AG.type))!==null&&n!==void 0?n:"category";return sj(sj({},AG),{},{type:r})}),UI=t=>t.polarOptions,vz=Ve([tp,np,vo],Yle),Jce=Ve([UI,vz],(t,e)=>{if(t!=null)return Rl(t.innerRadius,e,0)}),Zce=Ve([UI,vz],(t,e)=>{if(t!=null)return Rl(t.outerRadius,e,e*.8)}),vtt=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},eue=Ve([UI],vtt),wtt=Ve([vb,eue],zI),tue=Ve([vz,Jce,Zce],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]}),Stt=Ve([BS,tue],zI),wb=Ve([Pr,UI,Jce,Zce,tp,np],(t,e,n,r,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:l,startAngle:c,endAngle:u}=e;return{cx:Rl(a,s,s/2),cy:Rl(l,i,i/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),li=(t,e)=>e,jS=(t,e,n)=>n;function MI(t){return t?.id}function nue(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:s,dataKey:i}=n,a=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var d=MI(l);u.forEach((f,A)=>{var m=i==null||s?A:String(Cs(f,i,null)),g=Cs(f,l.dataKey,0),y;a.has(m)?y=a.get(m):y={},Object.assign(y,{[d]:g}),a.set(m,y)})}}),Array.from(a.values())}function QI(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var HI=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function WI(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Ctt(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Jo=t=>{var e=Pr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Sb=t=>t.tooltip.settings.axisId;function ktt(t){if(t in s2)return s2[t]();var e="scale".concat(hS(t));if(e in s2)return s2[e]()}function pG(t){var e=t.ticks,n=t.bandwidth,r=t.range(),s=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(i){function a(){return i.apply(this,arguments)}return a.toString=function(){return i.toString()},a})(()=>s),rangeMin:()=>s[0],rangeMax:()=>s[1],isInRange(i){var a=s[0],l=s[1];return a<=l?i>=a&&i<=l:i>=l&&i<=a},bandwidth:n?()=>n.call(t):void 0,ticks:e?i=>e.call(t,i):void 0,map:(i,a)=>{var l=t(i);if(l!=null){if(t.bandwidth&&a!==null&&a!==void 0&&a.position){var c=t.bandwidth();switch(a.position){case"middle":l+=c/2;break;case"end":l+=c;break}}return l}}}}function mG(t,e,n){if(typeof t=="function")return pG(t.copy().domain(e).range(n));if(t!=null){var r=ktt(t);if(r!=null)return r.domain(e).range(n),pG(r)}}var rue=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!UA(e)){for(var n,r,s=0;s<e.length;s++){var i=e[s];br(i)&&((n===void 0||i<n)&&(n=i),(r===void 0||i>r)&&(r=i))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function gG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ij(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(n),!0).forEach(function(r){Btt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Btt(t,e,n){return(e=jtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jtt(t){var e=Ett(t,"string");return typeof e=="symbol"?e:e+""}function Ett(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e8=[0,"auto"],Ro={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sue=(t,e)=>t.cartesianAxis.xAxis[e],ip=(t,e)=>{var n=sue(t,e);return n??Ro},Oo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:e8,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:mS},iue=(t,e)=>t.cartesianAxis.yAxis[e],ap=(t,e)=>{var n=iue(t,e);return n??Oo},Itt={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},wz=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Itt},Ba=(t,e,n)=>{switch(e){case"xAxis":return ip(t,n);case"yAxis":return ap(t,n);case"zAxis":return wz(t,n);case"angleAxis":return vb(t,n);case"radiusAxis":return BS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Ntt=(t,e,n)=>{switch(e){case"xAxis":return ip(t,n);case"yAxis":return ap(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},q0=(t,e,n)=>{switch(e){case"xAxis":return ip(t,n);case"yAxis":return ap(t,n);case"angleAxis":return vb(t,n);case"radiusAxis":return BS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},aue=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Sz(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var VI=t=>t.graphicalItems.cartesianItems,Ttt=Ve([li,jS],Sz),Cz=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),ES=Ve([VI,Ba,Ttt],Cz,{memoizeOptions:{resultEqualityCheck:WI}}),oue=Ve([ES],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(QI)),lue=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),_tt=Ve([ES],lue),kz=t=>t.map(e=>e.data).filter(Boolean).flat(1),Rtt=Ve([ES],kz,{memoizeOptions:{resultEqualityCheck:WI}}),Bz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},jz=Ve([Rtt,Fce],Bz),Ez=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Cs(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:Cs(s,r)}))):t.map(r=>({value:r})),qI=Ve([jz,Ba,ES],Ez);function cue(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function BB(t){if(vh(t)||t instanceof Date){var e=Number(t);if(br(e))return e}}function yG(t){if(Array.isArray(t)){var e=[BB(t[0]),BB(t[1])];return UA(e)?e:void 0}var n=BB(t);if(n!=null)return[n,n]}function MA(t){return t.map(BB).filter(Rc)}function Ott(t,e,n){return!n||typeof e!="number"||pf(e)?[]:n.length?MA(n.flatMap(r=>{var s=Cs(t,r.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!br(i)||!br(a)))return[e-i,e+a]})):[]}var So=t=>{var e=Jo(t),n=Sb(t);return q0(t,e,n)},IS=Ve([So],t=>t?.dataKey),Ftt=Ve([oue,Fce,So],nue),uue=(t,e,n,r)=>{var s={},i=e.reduce((a,l)=>{if(l.stackId==null)return a;var c=a[l.stackId];return c==null&&(c=[]),c.push(l),a[l.stackId]=c,a},s);return Object.fromEntries(Object.entries(i).map(a=>{var[l,c]=a,u=r?[...c].reverse():c,d=u.map(MI);return[l,{stackedData:JKe(t,d,n),graphicalItems:u}]}))},aj=Ve([Ftt,oue,kS,Xce],uue),due=(t,e,n,r)=>{var{dataStartIndex:s,dataEndIndex:i}=e;if(r==null&&n!=="zAxis"){var a=nXe(t,s,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},Dtt=Ve([Ba],t=>t.allowDataOverflow),Iz=t=>{var e;if(t==null||!("domain"in t))return e8;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=MA(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:e8},Nz=Ve([Ba],Iz),Tz=Ve([Nz,Dtt],Lce),Ltt=Ve([aj,sp,li,Tz],due,{memoizeOptions:{resultEqualityCheck:HI}}),GI=t=>t.errorBars,$tt=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>cue(n,r)),oj=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),l=Math.max(...i);return[a,l]}},_z=(t,e,n,r,s)=>{var i,a;if(n.length>0&&t.forEach(l=>{n.forEach(c=>{var u,d,f=(u=r[c.id])===null||u===void 0?void 0:u.filter(v=>cue(s,v)),A=Cs(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),m=Ott(l,A,f);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(a==null||y>a)&&(a=y)}var x=yG(A);x!=null&&(i=i==null?x[0]:Math.min(i,x[0]),a=a==null?x[1]:Math.max(a,x[1]))})}),e?.dataKey!=null&&t.forEach(l=>{var c=yG(Cs(l,e.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),a=a==null?c[1]:Math.max(a,c[1]))}),br(i)&&br(a))return[i,a]},Ptt=Ve([jz,Ba,_tt,GI,li],_z,{memoizeOptions:{resultEqualityCheck:HI}});function ztt(t){var{value:e}=t;if(vh(e)||e instanceof Date)return e}var Utt=(t,e,n)=>{var r=t.map(ztt).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Toe(r))?tce(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},fue=t=>t.referenceElements.dots,Cb=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Mtt=Ve([fue,li,jS],Cb),hue=t=>t.referenceElements.areas,Qtt=Ve([hue,li,jS],Cb),Aue=t=>t.referenceElements.lines,Htt=Ve([Aue,li,jS],Cb),pue=(t,e)=>{if(t!=null){var n=MA(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Wtt=Ve(Mtt,li,pue),mue=(t,e)=>{if(t!=null){var n=MA(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Vtt=Ve([Qtt,li],mue);function qtt(t){var e;if(t.x!=null)return MA([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:MA(n)}function Gtt(t){var e;if(t.y!=null)return MA([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:MA(n)}var gue=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?qtt(r):Gtt(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ktt=Ve([Htt,li],gue),Xtt=Ve(Wtt,Ktt,Vtt,(t,e,n)=>oj(t,n,e)),Rz=(t,e,n,r,s,i,a,l)=>{if(n!=null)return n;var c=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",u=c?oj(r,i,s):oj(i,s);return att(e,u,t.allowDataOverflow)},Ytt=Ve([Ba,Nz,Tz,Ltt,Ptt,Xtt,Pr,li],Rz,{memoizeOptions:{resultEqualityCheck:HI}}),Jtt=[0,1],Oz=(t,e,n,r,s,i,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:l,type:c}=t,u=kf(e,i);if(u&&l==null){var d;return tce(0,(d=n?.length)!==null&&d!==void 0?d:0)}return c==="category"?Utt(r,t,u):s==="expand"?Jtt:a}},Fz=Ve([Ba,Pr,jz,qI,kS,li,Ytt],Oz);function Ztt(t){return t in s2}var yue=(t,e,n)=>{if(t!=null){var{scale:r,type:s}=t;if(r==="auto")return s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":s==="category"?"band":"linear";if(typeof r=="string"){var i="scale".concat(hS(r));return Ztt(i)?i:"point"}}},Eh=Ve([Ba,aue,yz],yue);function KI(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?mG(t.scale,n,r):mG(e,n,r)}var Dz=(t,e,n)=>{var r=Iz(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&UA(t))return dtt(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&UA(t))return ftt(t,e.tickCount,e.allowDecimals)}},Lz=Ve([Fz,q0,Eh],Dz),$z=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&UA(e)&&Array.isArray(n)&&n.length>0){var s,i,a=e[0],l=(s=n[0])!==null&&s!==void 0?s:0,c=e[1],u=(i=n[n.length-1])!==null&&i!==void 0?i:0;return[Math.min(a,l),Math.max(c,u)]}return e},ent=Ve([Ba,Fz,Lz,li],$z),tnt=Ve(qI,Ba,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(MA(t.map(f=>f.value))).sort((f,A)=>f-A),s=r[0],i=r[r.length-1];if(s==null||i==null)return 1/0;var a=i-s;if(a===0)return 1/0;for(var l=0;l<r.length-1;l++){var c=r[l],u=r[l+1];if(!(c==null||u==null)){var d=u-c;n=Math.min(n,d)}}return n/a}}),xue=Ve(tnt,Pr,Kce,vo,(t,e,n,r,s)=>s,(t,e,n,r,s)=>{if(!br(t))return 0;var i=e==="vertical"?r.height:r.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var a=Rl(n,t*i),l=t*i/2;return l-a-(l-a)/i*a}return 0}),nnt=(t,e,n)=>{var r=ip(t,e);return r==null||typeof r.padding!="string"?0:xue(t,"xAxis",e,n,r.padding)},rnt=(t,e,n)=>{var r=ap(t,e);return r==null||typeof r.padding!="string"?0:xue(t,"yAxis",e,n,r.padding)},snt=Ve(ip,nnt,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),int=Ve(ap,rnt,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),ant=Ve([vo,snt,II,EI,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),ont=Ve([vo,Pr,int,II,EI,(t,e,n)=>n],(t,e,n,r,s,i)=>{var{padding:a}=s;return i?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),NS=(t,e,n,r)=>{var s;switch(e){case"xAxis":return ant(t,n,r);case"yAxis":return ont(t,n,r);case"zAxis":return(s=wz(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return eue(t);case"radiusAxis":return tue(t,n);default:return}},bue=Ve([Ba,NS],zI),lnt=Ve([Eh,ent],rue),XI=Ve([Ba,Eh,lnt,bue],KI);Ve([ES,GI,li],$tt);function vue(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var YI=(t,e)=>e,JI=(t,e,n)=>n,cnt=Ve(BI,YI,JI,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vue)),unt=Ve(jI,YI,JI,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vue)),wue=(t,e)=>({width:t.width,height:e.height}),dnt=(t,e)=>{var n=typeof e.width=="number"?e.width:mS;return{width:n,height:t.height}},Sue=Ve(vo,ip,wue),fnt=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},hnt=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Ant=Ve(np,vo,cnt,YI,JI,(t,e,n,r,s)=>{var i={},a;return n.forEach(l=>{var c=wue(e,l);a==null&&(a=fnt(e,r,t));var u=r==="top"&&!s||r==="bottom"&&s;i[l.id]=a-Number(u)*c.height,a+=(u?-1:1)*c.height}),i}),pnt=Ve(tp,vo,unt,YI,JI,(t,e,n,r,s)=>{var i={},a;return n.forEach(l=>{var c=dnt(e,l);a==null&&(a=hnt(e,r,t));var u=r==="left"&&!s||r==="right"&&s;i[l.id]=a-Number(u)*c.width,a+=(u?-1:1)*c.width}),i}),mnt=(t,e)=>{var n=ip(t,e);if(n!=null)return Ant(t,n.orientation,n.mirror)},gnt=Ve([vo,ip,mnt,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),ynt=(t,e)=>{var n=ap(t,e);if(n!=null)return pnt(t,n.orientation,n.mirror)},xnt=Ve([vo,ap,ynt,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),Cue=Ve(vo,ap,(t,e)=>{var n=typeof e.width=="number"?e.width:mS;return{width:n,height:t.height}}),xG=(t,e,n)=>{switch(e){case"xAxis":return Sue(t,n).width;case"yAxis":return Cue(t,n).height;default:return}},kue=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=n,l=kf(t,r),c=e.map(u=>u.value);if(a&&l&&i==="category"&&s&&Toe(c))return c}},TS=Ve([Pr,qI,Ba,li],kue),Pz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,a=kf(t,r);if(a&&(s==="number"||i!=="auto"))return e.map(l=>l.value)}},zz=Ve([Pr,qI,q0,li],Pz),bG=Ve([Pr,Ntt,Eh,XI,TS,zz,NS,Lz,li],(t,e,n,r,s,i,a,l,c)=>{if(e!=null){var u=kf(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:a,realScaleType:n,scale:r}}}),Bue=(t,e,n,r,s,i,a,l,c)=>{if(!(e==null||r==null)){var u=kf(t,c),{type:d,ticks:f,tickCount:A}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,g=d==="category"&&r.bandwidth?r.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Uo(i[0]-i[1])*2*g:g;var y=f||s;return y?y.map((x,v)=>{var w=a?a.indexOf(x):x,B=r.map(w);return br(B)?{index:v,coordinate:B+g,value:x,offset:g}:null}).filter(Rc):u&&l?l.map((x,v)=>{var w=r.map(x);return br(w)?{coordinate:w+g,value:x,index:v,offset:g}:null}).filter(Rc):r.ticks?r.ticks(A).map((x,v)=>{var w=r.map(x);return br(w)?{coordinate:w+g,value:x,index:v,offset:g}:null}).filter(Rc):r.domain().map((x,v)=>{var w=r.map(x);return br(w)?{coordinate:w+g,value:a?a[x]:x,index:v,offset:g}:null}).filter(Rc)}},jue=Ve([Pr,q0,Eh,XI,Lz,NS,TS,zz,li],Bue),Eue=(t,e,n,r,s,i,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=kf(t,a),{tickCount:c}=e,u=0;return u=a==="angleAxis"&&r?.length>=2?Uo(r[0]-r[1])*2*u:u,l&&i?i.map((d,f)=>{var A=n.map(d);return br(A)?{coordinate:A+u,value:d,index:f,offset:u}:null}).filter(Rc):n.ticks?n.ticks(c).map((d,f)=>{var A=n.map(d);return br(A)?{coordinate:A+u,value:d,index:f,offset:u}:null}).filter(Rc):n.domain().map((d,f)=>{var A=n.map(d);return br(A)?{coordinate:A+u,value:s?s[d]:d,index:f,offset:u}:null}).filter(Rc)}},Em=Ve([Pr,q0,XI,NS,TS,zz,li],Eue),Im=Ve(Ba,XI,(t,e)=>{if(!(t==null||e==null))return ij(ij({},t),{},{scale:e})}),bnt=Ve([Ba,Eh,Fz,bue],KI);Ve((t,e,n)=>wz(t,n),bnt,(t,e)=>{if(!(t==null||e==null))return ij(ij({},t),{},{scale:e})});var vnt=Ve([Pr,BI,jI],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Iue=t=>t.options.defaultTooltipEventType,Nue=t=>t.options.validateTooltipEventTypes;function Tue(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function Uz(t,e){var n=Iue(t),r=Nue(t);return Tue(e,n,r)}function wnt(t){return Xt(e=>Uz(e,t))}var _ue=(t,e)=>{var n,r=Number(e);if(!(pf(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Snt=t=>t.tooltip.settings,Vp={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Cnt={itemInteraction:{click:Vp,hover:Vp},axisInteraction:{click:Vp,hover:Vp},keyboardInteraction:Vp,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Rue=Hc({name:"tooltip",initialState:Cnt,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:zi()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,s=lf(t).tooltipItemPayloads.indexOf(n);s>-1&&(t.tooltipItemPayloads[s]=r)},prepare:zi()},removeTooltipEntrySettings:{reducer(t,e){var n=lf(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:zi()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:knt,replaceTooltipEntrySettings:Bnt,removeTooltipEntrySettings:jnt,setTooltipSettingsState:Ent,setActiveMouseOverItemIndex:Oue,mouseLeaveItem:Int,mouseLeaveChart:Fue,setActiveClickItemIndex:Nnt,setMouseOverAxisIndex:Due,setMouseClickAxisIndex:Tnt,setSyncInteraction:t8,setKeyboardInteraction:n8}=Rue.actions,_nt=Rue.reducer;function vG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(n),!0).forEach(function(r){Rnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rnt(t,e,n){return(e=Ont(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ont(t){var e=Fnt(t,"string");return typeof e=="symbol"?e:e+""}function Fnt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dnt(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Lnt(t){return t.index!=null}var Lue=(t,e,n,r)=>{if(e==null)return Vp;var s=Dnt(t,e,n);if(s==null)return Vp;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(Lnt(s)){if(i)return Ak(Ak({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Ak(Ak({},Vp),{},{coordinate:s.coordinate})};function $nt(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function Pnt(t,e){var n=$nt(t),r=e[0],s=e[1];if(n===void 0)return!1;var i=Math.min(r,s),a=Math.max(r,s);return n>=i&&n<=a}function znt(t,e,n){if(n==null||e==null)return!0;var r=Cs(t,e);return r==null||!UA(n)?!0:Pnt(r,n)}var Mz=(t,e,n,r)=>{var s=t?.index;if(s==null)return null;var i=Number(s);if(!br(i))return s;var a=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(a,Math.min(i,l)),u=e[c];return u==null||znt(u,n,r)?String(c):null},$ue=(t,e,n,r,s,i,a)=>{if(i!=null){var l=a[0],c=l?.getPosition(i);if(c!=null)return c;var u=s?.[Number(i)];if(u)return n==="horizontal"?{x:u.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:u.coordinate}}},Pue=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=t.itemInteraction.hover.graphicalItemId:s=t.itemInteraction.click.graphicalItemId,s==null&&r!=null){var i=t.tooltipItemPayloads[0];return i!=null?[i]:[]}return t.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===s})},zue=t=>t.options.tooltipPayloadSearcher,kb=t=>t.tooltip;function wG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(n),!0).forEach(function(r){Unt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Unt(t,e,n){return(e=Mnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mnt(t){var e=Qnt(t,"string");return typeof e=="symbol"?e:e+""}function Qnt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hnt(t,e){return t??e}var Uue=(t,e,n,r,s,i,a)=>{if(!(e==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=n,f=[];return t.reduce((A,m)=>{var g,{dataDefinedOnItem:y,settings:x}=m,v=Hnt(y,l),w=Array.isArray(v)?Sle(v,u,d):v,B=(g=x?.dataKey)!==null&&g!==void 0?g:r,k=x?.nameKey,j;if(r&&Array.isArray(w)&&!Array.isArray(w[0])&&a==="axis"?j=_oe(w,r,s):j=i(w,e,c,k),Array.isArray(j))j.forEach(O=>{var F=SG(SG({},x),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});A.push(vV({tooltipEntrySettings:F,dataKey:O.dataKey,payload:O.payload,value:Cs(O.payload,O.dataKey),name:O.name}))});else{var I;A.push(vV({tooltipEntrySettings:x,dataKey:B,payload:j,value:Cs(j,B),name:(I=Cs(j,k))!==null&&I!==void 0?I:x?.name}))}return A},f)}},Qz=Ve([So,aue,yz],yue),Wnt=Ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Vnt=Ve([Jo,Sb],Sz),Bb=Ve([Wnt,So,Vnt],Cz,{memoizeOptions:{resultEqualityCheck:WI}}),qnt=Ve([Bb],t=>t.filter(QI)),Gnt=Ve([Bb],kz,{memoizeOptions:{resultEqualityCheck:WI}}),jb=Ve([Gnt,sp],Bz),Knt=Ve([qnt,sp,So],nue),Hz=Ve([jb,So,Bb],Ez),Mue=Ve([So],Iz),Xnt=Ve([So],t=>t.allowDataOverflow),Que=Ve([Mue,Xnt],Lce),Ynt=Ve([Bb],t=>t.filter(QI)),Jnt=Ve([Knt,Ynt,kS,Xce],uue),Znt=Ve([Jnt,sp,Jo,Que],due),ert=Ve([Bb],lue),trt=Ve([jb,So,ert,GI,Jo],_z,{memoizeOptions:{resultEqualityCheck:HI}}),nrt=Ve([fue,Jo,Sb],Cb),rrt=Ve([nrt,Jo],pue),srt=Ve([hue,Jo,Sb],Cb),irt=Ve([srt,Jo],mue),art=Ve([Aue,Jo,Sb],Cb),ort=Ve([art,Jo],gue),lrt=Ve([rrt,ort,irt],oj),crt=Ve([So,Mue,Que,Znt,trt,lrt,Pr,Jo],Rz),_S=Ve([So,Pr,jb,Hz,kS,Jo,crt],Oz),urt=Ve([_S,So,Qz],Dz),drt=Ve([So,_S,urt,Jo],$z),Hue=t=>{var e=Jo(t),n=Sb(t),r=!1;return NS(t,e,n,r)},Wue=Ve([So,Hue],zI),Vue=Ve([So,Qz,drt,Wue],KI),frt=Ve([Pr,Hz,So,Jo],kue),hrt=Ve([Pr,Hz,So,Jo],Pz),Art=(t,e,n,r,s,i,a,l)=>{if(e){var{type:c}=e,u=kf(t,l);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=c==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=l==="angleAxis"&&s!=null&&s?.length>=2?Uo(s[0]-s[1])*2*f:f,u&&a?a.map((A,m)=>{var g=r.map(A);return br(g)?{coordinate:g+f,value:A,index:m,offset:f}:null}).filter(Rc):r.domain().map((A,m)=>{var g=r.map(A);return br(g)?{coordinate:g+f,value:i?i[A]:A,index:m,offset:f}:null}).filter(Rc)}}},op=Ve([Pr,So,Qz,Vue,Hue,frt,hrt,Jo],Art),Wz=Ve([Iue,Nue,Snt],(t,e,n)=>Tue(n.shared,t,e)),que=t=>t.tooltip.settings.trigger,Vz=t=>t.tooltip.settings.defaultIndex,RS=Ve([kb,Wz,que,Vz],Lue),Nm=Ve([RS,jb,IS,_S],Mz),Gue=Ve([op,Nm],_ue),qz=Ve([RS],t=>{if(t)return t.dataKey}),prt=Ve([RS],t=>{if(t)return t.graphicalItemId}),Kue=Ve([kb,Wz,que,Vz],Pue),mrt=Ve([tp,np,Pr,vo,op,Vz,Kue],$ue),grt=Ve([RS,mrt],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),yrt=Ve([RS],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),xrt=Ve([Kue,Nm,sp,IS,Gue,zue,Wz],Uue),brt=Ve([xrt],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function CG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(n),!0).forEach(function(r){vrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vrt(t,e,n){return(e=wrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wrt(t){var e=Srt(t,"string");return typeof e=="symbol"?e:e+""}function Srt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Crt=()=>Xt(So),krt=()=>{var t=Crt(),e=Xt(op),n=Xt(Vue);return jm(!t||!n?void 0:kG(kG({},t),{},{scale:n}),e)};function BG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(n),!0).forEach(function(r){Brt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Brt(t,e,n){return(e=jrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jrt(t){var e=Ert(t,"string");return typeof e=="symbol"?e:e+""}function Ert(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Irt=(t,e,n,r)=>{var s=e.find(i=>i&&i.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:s.coordinate}}return{x:0,y:0}},Nrt=(t,e,n,r)=>{var s=e.find(u=>u&&u.index===n);if(s){if(t==="centric"){var i=s.coordinate,{radius:a}=r;return Fy(Fy(Fy({},r),ms(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var l=s.coordinate,{angle:c}=r;return Fy(Fy(Fy({},r),ms(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Trt(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Xue=(t,e,n,r,s)=>{var i,a=(i=e?.length)!==null&&i!==void 0?i:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c,u,d,f,A,m=l>0?(c=n[l-1])===null||c===void 0?void 0:c.coordinate:(u=n[a-1])===null||u===void 0?void 0:u.coordinate,g=(d=n[l])===null||d===void 0?void 0:d.coordinate,y=l>=a-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(A=n[l+1])===null||A===void 0?void 0:A.coordinate,x=void 0;if(!(m==null||g==null||y==null))if(Uo(g-m)!==Uo(y-g)){var v=[];if(Uo(y-g)===Uo(s[1]-s[0])){x=y;var w=g+s[1]-s[0];v[0]=Math.min(w,(w+m)/2),v[1]=Math.max(w,(w+m)/2)}else{x=m;var B=y+s[1]-s[0];v[0]=Math.min(g,(B+g)/2),v[1]=Math.max(g,(B+g)/2)}var k=[Math.min(g,(x+g)/2),Math.max(g,(x+g)/2)];if(t>k[0]&&t<=k[1]||t>=v[0]&&t<=v[1]){var j;return(j=n[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(m,y),O=Math.max(m,y);if(t>(I+g)/2&&t<=(O+g)/2){var F;return(F=n[l])===null||F===void 0?void 0:F.index}}}else if(e)for(var D=0;D<a;D++){var T=e[D];if(T!=null){var N=e[D+1],P=e[D-1];if(D===0&&N!=null&&t<=(T.coordinate+N.coordinate)/2||D===a-1&&P!=null&&t>(T.coordinate+P.coordinate)/2||D>0&&D<a-1&&P!=null&&N!=null&&t>(T.coordinate+P.coordinate)/2&&t<=(T.coordinate+N.coordinate)/2)return T.index}}return-1},Yue=()=>Xt(yz),Gz=(t,e)=>e,Jue=(t,e,n)=>n,Kz=(t,e,n,r)=>r,_rt=Ve(op,t=>mI(t,e=>e.coordinate)),Xz=Ve([kb,Gz,Jue,Kz],Lue),Yz=Ve([Xz,jb,IS,_S],Mz),Rrt=(t,e,n)=>{if(e!=null){var r=kb(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Zue=Ve([kb,Gz,Jue,Kz],Pue),lj=Ve([tp,np,Pr,vo,op,Kz,Zue],$ue),Ort=Ve([Xz,lj],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),ede=Ve([op,Yz],_ue),Frt=Ve([Zue,Yz,sp,IS,ede,zue,Gz],Uue),Drt=Ve([Xz,Yz],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Lrt=(t,e,n,r,s,i,a)=>{if(!(!t||!n||!r||!s)&&Trt(t,a)){var l=rXe(t,e),c=Xue(l,i,s,n,r),u=Irt(e,s,c,t);return{activeIndex:String(c),activeCoordinate:u}}},$rt=(t,e,n,r,s,i,a)=>{if(!(!t||!r||!s||!i||!n)){var l=bJe(t,n);if(l){var c=sXe(l,e),u=Xue(c,a,i,r,s),d=Nrt(e,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},Prt=(t,e,n,r,s,i,a,l)=>{if(!(!t||!e||!r||!s||!i))return e==="horizontal"||e==="vertical"?Lrt(t,e,r,s,i,a,l):$rt(t,e,n,r,s,i,a)},zrt=Ve(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),Urt=Ve(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Wi)),n=Array.from(new Set(e));return n.sort((r,s)=>r-s)},{memoizeOptions:{resultEqualityCheck:Ctt}});function jG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jG(Object(n),!0).forEach(function(r){Mrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mrt(t,e,n){return(e=Qrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qrt(t){var e=Hrt(t,"string");return typeof e=="symbol"?e:e+""}function Hrt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wrt={},Vrt={zIndexMap:Object.values(Wi).reduce((t,e)=>EG(EG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Wrt)},qrt=new Set(Object.values(Wi));function Grt(t){return qrt.has(t)}var tde=Hc({name:"zIndex",initialState:Vrt,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:zi()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Grt(n)&&delete t.zIndexMap[n])},prepare:zi()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:s}=e.payload;t.zIndexMap[n]?s?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:s?void 0:r,panoramaElement:s?r:void 0}},prepare:zi()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:zi()}}}),{registerZIndexPortal:Krt,unregisterZIndexPortal:Xrt,registerZIndexPortalElement:Yrt,unregisterZIndexPortalElement:Jrt}=tde.actions,Zrt=tde.reducer;function Zo(t){var{zIndex:e,children:n}=t,r=FXe(),s=r&&e!==void 0&&e!==0,i=Xo(),a=Gs();C.useLayoutEffect(()=>s?(a(Krt({zIndex:e})),()=>{a(Xrt({zIndex:e}))}):jh,[a,e,s]);var l=Xt(c=>zrt(c,e,i));return s?l?zj.createPortal(n,l):null:n}function r8(){return r8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r8.apply(null,arguments)}function IG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(n),!0).forEach(function(r){est(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function est(t,e,n){return(e=tst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tst(t){var e=nst(t,"string");return typeof e=="symbol"?e:e+""}function nst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rst(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return C.isValidElement(e)?C.cloneElement(e,r):C.createElement(n,r)}function sst(t){var e,{coordinate:n,payload:r,index:s,offset:i,tooltipAxisBandSize:a,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=n,A=r,m=s;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,y,x;if(d==="ScatterChart")g=f,y=OYe,x=Wi.cursorLine;else if(d==="BarChart")g=FYe(l,f,i,a),y=Xle,x=Wi.cursorRectangle;else if(l==="radial"&&Ooe(f)){var{cx:v,cy:w,radius:B,startAngle:k,endAngle:j}=Jle(f);g={cx:v,cy:w,startAngle:k,endAngle:j,innerRadius:B,outerRadius:B},y=ece,x=Wi.cursorLine}else g={points:CJe(l,f,i)},y=g1,x=Wi.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,O=pk(pk(pk(pk({stroke:"#ccc",pointerEvents:"none"},i),g),DA(c)),{},{payload:A,payloadIndex:m,className:yr("recharts-tooltip-cursor",I)});return C.createElement(Zo,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},C.createElement(rst,{cursor:c,cursorComp:y,cursorProps:O}))}function ist(t){var e=krt(),n=Rle(),r=H0(),s=Yue();return e==null||n==null||r==null||s==null?null:C.createElement(sst,r8({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var nde=C.createContext(null),ast=()=>C.useContext(nde),zR={exports:{}},NG;function ost(){return NG||(NG=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,f||c,A),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,m=f.length,g=new Array(m);A<m;A++)g[A]=f[A].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,m,g){var y=n?n+u:u;if(!this._events[y])return!1;var x=this._events[y],v=arguments.length,w,B;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,A),!0;case 5:return x.fn.call(x.context,d,f,A,m),!0;case 6:return x.fn.call(x.context,d,f,A,m,g),!0}for(B=1,w=new Array(v-1);B<v;B++)w[B-1]=arguments[B];x.fn.apply(x.context,w)}else{var k=x.length,j;for(B=0;B<k;B++)switch(x[B].once&&this.removeListener(u,x[B].fn,void 0,!0),v){case 1:x[B].fn.call(x[B].context);break;case 2:x[B].fn.call(x[B].context,d);break;case 3:x[B].fn.call(x[B].context,d,f);break;case 4:x[B].fn.call(x[B].context,d,f,A);break;default:if(!w)for(j=1,w=new Array(v-1);j<v;j++)w[j-1]=arguments[j];x[B].fn.apply(x[B].context,w)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!A||g.once)&&(!f||g.context===f)&&a(this,m);else{for(var y=0,x=[],v=g.length;y<v;y++)(g[y].fn!==d||A&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[m]=x.length===1?x[0]:x:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(zR)),zR.exports}var lst=ost();const cst=oc(lst);var lw=new cst,s8="recharts.syncEvent.tooltip",TG="recharts.syncEvent.brush",ZI=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!pf(n))return t[n]}},ust={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},rde=Hc({name:"options",initialState:ust,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dst=rde.reducer,{createEventEmitter:fst}=rde.actions;function hst(t){return t.tooltip.syncInteraction}var Ast={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sde=Hc({name:"chartData",initialState:Ast,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:_G,setDataStartEndIndexes:pst,setComputedData:Ovt}=sde.actions,mst=sde.reducer,gst=["x","y"];function RG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RG(Object(n),!0).forEach(function(r){yst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yst(t,e,n){return(e=xst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xst(t){var e=bst(t,"string");return typeof e=="symbol"?e:e+""}function bst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vst(t,e){if(t==null)return{};var n,r,s=wst(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function wst(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sst(){var t=Xt(xz),e=Xt(bz),n=Gs(),r=Xt(Yce),s=Xt(op),i=H0(),a=NI(),l=Xt(c=>c.rootProps.className);C.useEffect(()=>{if(t==null)return jh;var c=(u,d,f)=>{if(e!==f&&t===u){if(r==="index"){var A;if(a&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,x=vst(m,gst),{x:v,y:w,width:B,height:k}=d.payload.sourceViewBox,j=Dy(Dy({},x),{},{x:a.x+(B?(g-v)/B:0)*a.width,y:a.y+(k?(y-w)/k:0)*a.height});n(Dy(Dy({},d),{},{payload:Dy(Dy({},d.payload),{},{coordinate:j})}))}else n(d);return}if(s!=null){var I;if(typeof r=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},F=r(s,O);I=s[F]}else r==="value"&&(I=s.find(q=>String(q.value)===d.payload.label));var{coordinate:D}=d.payload;if(I==null||d.payload.active===!1||D==null||a==null){n(t8({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:T,y:N}=D,P=Math.min(T,a.x+a.width),z=Math.min(N,a.y+a.height),U={x:i==="horizontal"?I.coordinate:P,y:i==="horizontal"?z:I.coordinate},ee=t8({active:d.payload.active,coordinate:U,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(ee)}}};return lw.on(s8,c),()=>{lw.off(s8,c)}},[l,n,e,t,r,s,i,a])}function Cst(){var t=Xt(xz),e=Xt(bz),n=Gs();C.useEffect(()=>{if(t==null)return jh;var r=(s,i,a)=>{e!==a&&t===s&&n(pst(i))};return lw.on(TG,r),()=>{lw.off(TG,r)}},[n,e,t])}function kst(){var t=Gs();C.useEffect(()=>{t(fst())},[t]),Sst(),Cst()}function Bst(t,e,n,r,s,i){var a=Xt(m=>Rrt(m,t,e)),l=Xt(bz),c=Xt(xz),u=Xt(Yce),d=Xt(hst),f=d?.active,A=NI();C.useEffect(()=>{if(!f&&c!=null&&l!=null){var m=t8({active:i,coordinate:n,dataKey:a,index:s,label:typeof r=="number"?String(r):r,sourceViewBox:A,graphicalItemId:void 0});lw.emit(s8,c,m,l)}},[f,n,a,s,r,l,c,u,i,A])}function OG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function FG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(n),!0).forEach(function(r){jst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jst(t,e,n){return(e=Est(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Est(t){var e=Ist(t,"string");return typeof e=="symbol"?e:e+""}function Ist(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nst(t){return t.dataKey}function Tst(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(hYe,e)}var DG=[],_st={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Jl(t){var e,n,r=ki(t,_st),{active:s,allowEscapeViewBox:i,animationDuration:a,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:x,cursor:v,shared:w,trigger:B,defaultIndex:k,portal:j,axisId:I}=r,O=Gs(),F=typeof k=="number"?String(k):k;C.useEffect(()=>{O(Ent({shared:w,trigger:B,axisId:I,active:s,defaultIndex:F}))},[O,w,B,I,s,F]);var D=NI(),T=Wle(),N=wnt(w),{activeIndex:P,isActive:z}=(e=Xt(xe=>Drt(xe,N,B,F)))!==null&&e!==void 0?e:{},U=Xt(xe=>Frt(xe,N,B,F)),ee=Xt(xe=>ede(xe,N,B,F)),q=Xt(xe=>Ort(xe,N,B,F)),Z=U,G=ast(),ne=(n=s??z)!==null&&n!==void 0?n:!1,[K,H]=qoe([Z,ne]),Q=N==="axis"?ee:void 0;Bst(N,B,q,Q,P,ne);var X=j??G;if(X==null||D==null||N==null)return null;var re=Z??DG;ne||(re=DG),u&&re.length&&(re=Moe(re.filter(xe=>xe.value!=null&&(xe.hide!==!0||r.includeHidden)),A,Nst));var le=re.length>0,Ae=C.createElement(bYe,{allowEscapeViewBox:i,animationDuration:a,animationEasing:l,isAnimationActive:d,active:ne,coordinate:q,hasPayload:le,offset:f,position:m,reverseDirection:g,useTranslate3d:y,viewBox:D,wrapperStyle:x,lastBoundingBox:K,innerRef:H,hasPortalFromProps:!!j},Tst(c,FG(FG({},r),{},{payload:re,label:Q,active:ne,activeIndex:P,coordinate:q,accessibilityLayer:T})));return C.createElement(C.Fragment,null,zj.createPortal(Ae,X),ne&&C.createElement(ist,{cursor:v,tooltipEventType:N,coordinate:q,payload:re,index:P}))}var gf=t=>null;gf.displayName="Cell";function Rst(t,e,n){return(e=Ost(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ost(t){var e=Fst(t,"string");return typeof e=="symbol"?e:e+""}function Fst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Dst{constructor(e){Rst(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function LG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lst(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(n),!0).forEach(function(r){$st(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $st(t,e,n){return(e=Pst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pst(t){var e=zst(t,"string");return typeof e=="symbol"?e:e+""}function zst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ust={cacheSize:2e3,enableCache:!0},ide=Lst({},Ust),$G=new Dst(ide.cacheSize),Mst={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PG="recharts_measurement_span";function Qst(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(l)}var zG=(t,e)=>{try{var n=document.getElementById(PG);n||(n=document.createElement("span"),n.setAttribute("id",PG),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Mst,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},m2=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xS.isSsr)return{width:0,height:0};if(!ide.enableCache)return zG(e,n);var r=Qst(e,n),s=$G.get(r);if(s)return s;var i=zG(e,n);return $G.set(r,i),i},ade;function Hst(t,e,n){return(e=Wst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wst(t){var e=Vst(t,"string");return typeof e=="symbol"?e:e+""}function Vst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qst=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Gst=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Kst={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Xst=["cm","mm","pt","pc","in","Q","px"];function Yst(t){return Xst.includes(t)}var a1="NaN";function Jst(t,e){return t*Kst[e]}class ol{static parse(e){var n,[,r,s]=(n=Gst.exec(e))!==null&&n!==void 0?n:[];return r==null?ol.NaN:new ol(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,pf(e)&&(this.unit=""),n!==""&&!qst.test(n)&&(this.num=NaN,this.unit=""),Yst(n)&&(this.num=Jst(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ol(NaN,""):new ol(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ol(NaN,""):new ol(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ol(NaN,""):new ol(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ol(NaN,""):new ol(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return pf(this.num)}}ade=ol;Hst(ol,"NaN",new ade(NaN,""));function ode(t){if(t==null||t.includes(a1))return a1;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,i]=(n=UG.exec(e))!==null&&n!==void 0?n:[],a=ol.parse(r??""),l=ol.parse(i??""),c=s==="*"?a.multiply(l):a.divide(l);if(c.isNaN())return a1;e=e.replace(UG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=MG.exec(e))!==null&&u!==void 0?u:[],m=ol.parse(d??""),g=ol.parse(A??""),y=f==="+"?m.add(g):m.subtract(g);if(y.isNaN())return a1;e=e.replace(MG,y.toString())}return e}var QG=/\(([^()]*)\)/;function Zst(t){for(var e=t,n;(n=QG.exec(e))!=null;){var[,r]=n;e=e.replace(QG,ode(r))}return e}function eit(t){var e=t.replace(/\s+/g,"");return e=Zst(e),e=ode(e),e}function tit(t){try{return eit(t)}catch{return a1}}function UR(t){var e=tit(t.slice(5,-1));return e===a1?"":e}var nit=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],rit=["dx","dy","angle","className","breakAll"];function i8(){return i8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i8.apply(null,arguments)}function HG(t,e){if(t==null)return{};var n,r,s=sit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function sit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lde=/[ \f\n\r\t\v\u2028\u2029]+/,cde=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Xi(e)||(n?s=e.toString().split(""):s=e.toString().split(lde));var i=s.map(l=>({word:l,width:m2(l,r).width})),a=n?0:m2("",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}};function iit(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var ude=(t,e,n,r)=>t.reduce((s,i)=>{var{word:a,width:l}=i,c=s[s.length-1];if(c&&l!=null&&(e==null||r||c.width+l+n<Number(e)))c.words.push(a),c.width+=l+n;else{var u={words:[a],width:l};s.push(u)}return s},[]),dde=t=>t.reduce((e,n)=>e.width>n.width?e:n),ait="",WG=(t,e,n,r,s,i,a,l)=>{var c=t.slice(0,e),u=cde({breakAll:n,style:r,children:c+ait});if(!u)return[!1,[]];var d=ude(u.wordsWithComputedWidth,i,a,l),f=d.length>s||dde(d).width>Number(i);return[f,d]},oit=(t,e,n,r,s)=>{var{maxLines:i,children:a,style:l,breakAll:c}=t,u=nn(i),d=String(a),f=ude(e,r,n,s);if(!u||s)return f;var A=f.length>i||dde(f).width>Number(r);if(!A)return f;for(var m=0,g=d.length-1,y=0,x;m<=g&&y<=d.length-1;){var v=Math.floor((m+g)/2),w=v-1,[B,k]=WG(d,w,c,l,i,r,n,s),[j]=WG(d,v,c,l,i,r,n,s);if(!B&&!j&&(m=v+1),B&&j&&(g=v-1),!B&&j){x=k;break}y++}return x||f},VG=t=>{var e=Xi(t)?[]:t.toString().split(lde);return[{words:e,width:void 0}]},lit=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:a}=t;if((e||n)&&!xS.isSsr){var l,c,u=cde({breakAll:i,children:r,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return VG(r);return oit({breakAll:i,children:r,maxLines:a,style:s},l,c,e,!!n)}return VG(r)},fde="#808080",cit={angle:0,breakAll:!1,capHeight:"0.71em",fill:fde,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Eb=C.forwardRef((t,e)=>{var n=ki(t,cit),{x:r,y:s,lineHeight:i,capHeight:a,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=n,f=HG(n,nit),A=C.useMemo(()=>lit({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:m,dy:g,angle:y,className:x,breakAll:v}=f,w=HG(f,rit);if(!vh(r)||!vh(s)||A.length===0)return null;var B=Number(r)+(nn(m)?m:0),k=Number(s)+(nn(g)?g:0);if(!br(B)||!br(k))return null;var j;switch(d){case"start":j=UR("calc(".concat(a,")"));break;case"middle":j=UR("calc(".concat((A.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:j=UR("calc(".concat(A.length-1," * -").concat(i,")"));break}var I=[],O=A[0];if(c&&O!=null){var F=O.width,{width:D}=f;I.push("scale(".concat(nn(D)&&nn(F)?D/F:1,")"))}return y&&I.push("rotate(".concat(y,", ").concat(B,", ").concat(k,")")),I.length&&(w.transform=I.join(" ")),C.createElement("text",i8({},Ya(w),{ref:e,x:B,y:k,className:yr("recharts-text",x),textAnchor:u,fill:l.includes("url")?fde:l}),A.map((T,N)=>{var P=T.words.join(v?"":" ");return C.createElement("tspan",{x:B,dy:N===0?j:i,key:"".concat(P,"-").concat(N)},P)}))});Eb.displayName="Text";function qG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(n),!0).forEach(function(r){uit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uit(t,e,n){return(e=dit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dit(t){var e=fit(t,"string");return typeof e=="symbol"?e:e+""}function fit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hit=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:s}=t,{x:i,y:a,height:l,upperWidth:c,lowerWidth:u}=PP(e),d=i,f=i+(c-u)/2,A=(d+f)/2,m=(c+u)/2,g=d+c/2,y=l>=0?1:-1,x=y*r,v=y>0?"end":"start",w=y>0?"start":"end",B=c>=0?1:-1,k=B*r,j=B>0?"end":"start",I=B>0?"start":"end",O=s;if(n==="top"){var F={x:d+c/2,y:a-x,horizontalAnchor:"middle",verticalAnchor:v};return O&&(F.height=Math.max(a-O.y,0),F.width=c),F}if(n==="bottom"){var D={x:f+u/2,y:a+l+x,horizontalAnchor:"middle",verticalAnchor:w};return O&&(D.height=Math.max(O.y+O.height-(a+l),0),D.width=u),D}if(n==="left"){var T={x:A-k,y:a+l/2,horizontalAnchor:j,verticalAnchor:"middle"};return O&&(T.width=Math.max(T.x-O.x,0),T.height=l),T}if(n==="right"){var N={x:A+m+k,y:a+l/2,horizontalAnchor:I,verticalAnchor:"middle"};return O&&(N.width=Math.max(O.x+O.width-N.x,0),N.height=l),N}var P=O?{width:m,height:l}:{};return n==="insideLeft"?Vf({x:A+k,y:a+l/2,horizontalAnchor:I,verticalAnchor:"middle"},P):n==="insideRight"?Vf({x:A+m-k,y:a+l/2,horizontalAnchor:j,verticalAnchor:"middle"},P):n==="insideTop"?Vf({x:d+c/2,y:a+x,horizontalAnchor:"middle",verticalAnchor:w},P):n==="insideBottom"?Vf({x:f+u/2,y:a+l-x,horizontalAnchor:"middle",verticalAnchor:v},P):n==="insideTopLeft"?Vf({x:d+k,y:a+x,horizontalAnchor:I,verticalAnchor:w},P):n==="insideTopRight"?Vf({x:d+c-k,y:a+x,horizontalAnchor:j,verticalAnchor:w},P):n==="insideBottomLeft"?Vf({x:f+k,y:a+l-x,horizontalAnchor:I,verticalAnchor:v},P):n==="insideBottomRight"?Vf({x:f+u-k,y:a+l-x,horizontalAnchor:j,verticalAnchor:v},P):n&&typeof n=="object"&&(nn(n.x)||y0(n.x))&&(nn(n.y)||y0(n.y))?Vf({x:i+Rl(n.x,m),y:a+Rl(n.y,l),horizontalAnchor:"end",verticalAnchor:"end"},P):Vf({x:g,y:a+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},P)},Ait=["labelRef"],pit=["content"];function GG(t,e){if(t==null)return{};var n,r,s=mit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function mit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KG(Object(n),!0).forEach(function(r){git(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function git(t,e,n){return(e=yit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yit(t){var e=xit(t,"string");return typeof e=="symbol"?e:e+""}function xit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pA.apply(null,arguments)}var hde=C.createContext(null),bit=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:s,width:i,height:a,children:l}=t,c=C.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:s,width:i,height:a}),[e,n,r,s,i,a]);return C.createElement(hde.Provider,{value:c},l)},Ade=()=>{var t=C.useContext(hde),e=NI();return t||(e?PP(e):void 0)},pde=C.createContext(null),vit=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a,clockWise:l,children:c}=t,u=C.useMemo(()=>({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a,clockWise:l}),[e,n,r,s,i,a,l]);return C.createElement(pde.Provider,{value:u},c)},mde=()=>{var t=C.useContext(pde),e=Xt(wb);return t||e},wit=t=>{var{value:e,formatter:n}=t,r=Xi(t.children)?e:t.children;return typeof n=="function"?n(r):r},Jz=t=>t!=null&&typeof t=="function",Sit=(t,e)=>{var n=Uo(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Cit=(t,e,n,r,s)=>{var{offset:i,className:a}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:m}=s,g=(u+d)/2,y=Sit(f,A),x=y>=0?1:-1,v,w;switch(e){case"insideStart":v=f+x*i,w=m;break;case"insideEnd":v=A-x*i,w=!m;break;case"end":v=A+x*i,w=m;break;default:throw new Error("Unsupported position ".concat(e))}w=y<=0?w:!w;var B=ms(l,c,g,v),k=ms(l,c,g,v+(w?1:-1)*359),j="M".concat(B.x,",").concat(B.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(k.x,",").concat(k.y),I=Xi(t.id)?K2("recharts-radial-line-"):t.id;return C.createElement("text",pA({},r,{dominantBaseline:"central",className:yr("recharts-radial-bar-label",a)}),C.createElement("defs",null,C.createElement("path",{id:I,d:j})),C.createElement("textPath",{xlinkHref:"#".concat(I)},n))},kit=(t,e,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(n==="outside"){var{x:d,y:f}=ms(r,s,a+e,u);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var A=(i+a)/2,{x:m,y:g}=ms(r,s,A,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},jB=t=>t!=null&&"cx"in t&&nn(t.cx),Bit={angle:0,offset:5,zIndex:Wi.label,position:"middle",textBreakAll:!1};function jit(t){if(!jB(t))return t;var{cx:e,cy:n,outerRadius:r}=t,s=r*2;return{x:e-r,y:n-r,width:s,upperWidth:s,lowerWidth:s,height:s}}function Hp(t){var e=ki(t,Bit),{viewBox:n,parentViewBox:r,position:s,value:i,children:a,content:l,className:c="",textBreakAll:u,labelRef:d}=e,f=mde(),A=Ade(),m=s==="center"?A:f??A,g,y,x;n==null?g=m:jB(n)?g=n:g=PP(n);var v=jit(g);if(!g||Xi(i)&&Xi(a)&&!C.isValidElement(l)&&typeof l!="function")return null;var w=i2(i2({},e),{},{viewBox:g});if(C.isValidElement(l)){var{labelRef:B}=w,k=GG(w,Ait);return C.cloneElement(l,k)}if(typeof l=="function"){var{content:j}=w,I=GG(w,pit);if(y=C.createElement(l,I),C.isValidElement(y))return y}else y=wit(e);var O=Ya(e);if(jB(g)){if(s==="insideStart"||s==="insideEnd"||s==="end")return Cit(e,s,y,O,g);x=kit(g,e.offset,e.position)}else{if(!v)return null;var F=hit({viewBox:v,position:s,offset:e.offset,parentViewBox:jB(r)?void 0:r});x=i2(i2({x:F.x,y:F.y,textAnchor:F.horizontalAnchor,verticalAnchor:F.verticalAnchor},F.width!==void 0?{width:F.width}:{}),F.height!==void 0?{height:F.height}:{})}return C.createElement(Zo,{zIndex:e.zIndex},C.createElement(Eb,pA({ref:d,className:yr("recharts-label",c)},O,x,{textAnchor:iit(O.textAnchor)?O.textAnchor:x.textAnchor,breakAll:u}),y))}Hp.displayName="Label";var gde=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?C.createElement(Hp,pA({key:"label-implicit"},r)):vh(t)?C.createElement(Hp,pA({key:"label-implicit",value:t},r)):C.isValidElement(t)?t.type===Hp?C.cloneElement(t,i2({key:"label-implicit"},r)):C.createElement(Hp,pA({key:"label-implicit",content:t},r)):Jz(t)?C.createElement(Hp,pA({key:"label-implicit",content:t},r)):t&&typeof t=="object"?C.createElement(Hp,pA({},t,{key:"label-implicit"},r)):null};function Eit(t){var{label:e,labelRef:n}=t,r=Ade();return gde(e,r,n)||null}function Iit(t){var{label:e}=t,n=mde();return gde(e,n)||null}var MR={},QR={},XG;function Nit(){return XG||(XG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(QR)),QR}var HR={},YG;function Tit(){return YG||(YG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(HR)),HR}var JG;function _it(){return JG||(JG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nit(),n=Tit(),r=jP();function s(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=s})(MR)),MR}var WR,ZG;function Rit(){return ZG||(ZG=1,WR=_it().last),WR}var Oit=Rit();const yde=oc(Oit);var Fit=["valueAccessor"],Dit=["dataKey","clockWise","id","textBreakAll","zIndex"];function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cj.apply(null,arguments)}function eK(t,e){if(t==null)return{};var n,r,s=Lit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Lit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $it=t=>Array.isArray(t.value)?yde(t.value):t.value,xde=C.createContext(void 0),Zz=xde.Provider,bde=C.createContext(void 0),Pit=bde.Provider;function zit(){return C.useContext(xde)}function Uit(){return C.useContext(bde)}function EB(t){var{valueAccessor:e=$it}=t,n=eK(t,Fit),{dataKey:r,clockWise:s,id:i,textBreakAll:a,zIndex:l}=n,c=eK(n,Dit),u=zit(),d=Uit(),f=u||d;return!f||!f.length?null:C.createElement(Zo,{zIndex:l??Wi.label},C.createElement(Ds,{className:"recharts-label-list"},f.map((A,m)=>{var g,y=Xi(r)?e(A,m):Cs(A.payload,r),x=Xi(i)?{}:{id:"".concat(i,"-").concat(m)};return C.createElement(Hp,cj({key:"label-".concat(m)},Ya(A),c,x,{fill:(g=n.fill)!==null&&g!==void 0?g:A.fill,parentViewBox:A.parentViewBox,value:y,textBreakAll:a,viewBox:A.viewBox,index:m,zIndex:0}))})))}EB.displayName="LabelList";function eN(t){var{label:e}=t;return e?e===!0?C.createElement(EB,{key:"labelList-implicit"}):C.isValidElement(e)||Jz(e)?C.createElement(EB,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(EB,cj({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Mit=["points","className","baseLinePoints","connectNulls"],tK;function o1(){return o1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o1.apply(null,arguments)}function Qit(t,e){if(t==null)return{};var n,r,s=Hit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Hit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wit(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var nK=t=>t!=null&&t.x===+t.x&&t.y===+t.y,Vit=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];e.forEach(a=>{var l=n[n.length-1];nK(a)?l&&l.push(a):l&&l.length>0&&n.push([])});var r=e[0],s=n[n.length-1];nK(r)&&s&&s.push(r);var i=n[n.length-1];return i&&i.length<=0&&(n=n.slice(0,-1)),n},g2=(t,e)=>{var n=Vit(t);e&&(n=[n.reduce((s,i)=>[...s,...i],[])]);var r=n.map(s=>s.reduce((i,a,l)=>la(tK||(tK=Wit(["","","",",",""])),i,l===0?"M":"L",a.x,a.y),"")).join("");return n.length===1?"".concat(r,"Z"):r},qit=(t,e,n)=>{var r=g2(t,n);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(g2(Array.from(e).reverse(),n).slice(1))},vde=t=>{var{points:e,className:n,baseLinePoints:r,connectNulls:s}=t,i=Qit(t,Mit);if(!e||!e.length)return null;var a=yr("recharts-polygon",n);if(r&&r.length){var l=i.stroke&&i.stroke!=="none",c=qit(e,r,s);return C.createElement("g",{className:a},C.createElement("path",o1({},Ya(i),{fill:c.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:c})),l?C.createElement("path",o1({},Ya(i),{fill:"none",d:g2(e,s)})):null,l?C.createElement("path",o1({},Ya(i),{fill:"none",d:g2(r,s)})):null)}var u=g2(e,s);return C.createElement("path",o1({},Ya(i),{fill:u.slice(-1)==="Z"?i.fill:"none",className:a,d:u}))};function a8(){return a8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a8.apply(null,arguments)}var eU=t=>{var{cx:e,cy:n,r,className:s}=t,i=yr("recharts-dot",s);return nn(e)&&nn(n)&&nn(r)?C.createElement("circle",a8({},Ci(t),BP(t),{className:i,cx:e,cy:n,r})):null},tU=t=>t.graphicalItems.polarItems,Git=Ve([li,jS],Sz),tN=Ve([tU,Ba,Git],Cz),Kit=Ve([tN],kz),nN=Ve([Kit,CS],Bz),wde=Ve([nN,Ba,tN],Ez);Ve([nN,Ba,tN],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var i,a=Cs(r,(i=e.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Cs(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var rK=()=>{},Xit=Ve([nN,Ba,tN,GI,li],_z),Yit=Ve([Ba,Nz,Tz,rK,Xit,rK,Pr,li],Rz),Sde=Ve([Ba,Pr,nN,wde,kS,li,Yit],Oz),Cde=Ve([Sde,q0,Eh],Dz),Jit=Ve([Ba,Sde,Cde,li],$z),Zit=Ve([Eh,Jit],rue),nU=(t,e,n)=>{switch(e){case"angleAxis":return vb(t,n);case"radiusAxis":return BS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rU=(t,e,n)=>{switch(e){case"angleAxis":return wtt(t,n);case"radiusAxis":return Stt(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Ib=Ve([nU,Eh,Zit,rU],KI),kde=Ve([Pr,wde,q0,li],Pz),Nb=Ve([Pr,nU,Eh,Ib,Cde,rU,TS,kde,li],Bue),eat=Ve([Nb],t=>{if(t){var e=new Map;return t.forEach(n=>{var r=(n.coordinate+360)%360;e.has(r)||e.set(r,n)}),Array.from(e.values())}});Ve([Pr,nU,Ib,rU,TS,kde,li],Eue);var tat=(t,e)=>Nb(t,"angleAxis",e,!1),nat=Ve([tat],t=>{if(t)return t.map(e=>e.coordinate)}),rat=(t,e)=>Nb(t,"radiusAxis",e,!1),sat=Ve([rat],t=>{if(t)return t.map(e=>e.coordinate)}),iat=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius","zIndex"];function aat(t,e){if(t==null)return{};var n,r,s=oat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function oat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(null,arguments)}function sK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sK(Object(n),!0).forEach(function(r){lat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lat(t,e,n){return(e=cat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cat(t){var e=uat(t,"string");return typeof e=="symbol"?e:e+""}function uat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dat=(t,e,n,r)=>{var s="";return r.forEach((i,a)=>{var l=ms(e,n,t,i);a?s+="L ".concat(l.x,",").concat(l.y):s+="M ".concat(l.x,",").concat(l.y)}),s+="Z",s},fat=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,polarAngles:i,radialLines:a}=t;if(!i||!i.length||!a)return null;var l=rN({stroke:"#ccc"},Ci(t));return C.createElement("g",{className:"recharts-polar-grid-angle"},i.map(c=>{var u=ms(e,n,r,c),d=ms(e,n,s,c);return C.createElement("line",rf({key:"line-".concat(c)},l,{x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},iK=t=>{var{cx:e,cy:n,radius:r}=t,s=rN({stroke:"#ccc",fill:"none"},Ci(t));return C.createElement("circle",rf({},s,{className:yr("recharts-polar-grid-concentric-circle",t.className),cx:e,cy:n,r}))},aK=t=>{var{radius:e}=t,n=rN({stroke:"#ccc",fill:"none"},Ci(t));return C.createElement("path",rf({},n,{className:yr("recharts-polar-grid-concentric-polygon",t.className),d:dat(e,t.cx,t.cy,t.polarAngles)}))},hat=t=>{var{polarRadius:e,gridType:n}=t;if(!e||!e.length)return null;var r=Math.max(...e),s=t.fill&&t.fill!=="none";return C.createElement("g",{className:"recharts-polar-grid-concentric"},s&&n==="circle"&&C.createElement(iK,rf({},t,{radius:r})),s&&n!=="circle"&&C.createElement(aK,rf({},t,{radius:r})),e.map((i,a)=>{var l=a;return n==="circle"?C.createElement(iK,rf({key:l},t,{fill:"none",radius:i})):C.createElement(aK,rf({key:l},t,{fill:"none",radius:i}))}))},Aat={angleAxisId:0,radiusAxisId:0,gridType:"polygon",radialLines:!0,zIndex:Wi.grid},sU=t=>{var e,n,r,s,i,a,l,c,u=ki(t,Aat),{gridType:d,radialLines:f,angleAxisId:A,radiusAxisId:m,cx:g,cy:y,innerRadius:x,outerRadius:v,polarAngles:w,polarRadius:B,zIndex:k}=u,j=aat(u,iat),I=Xt(wb),O=Xt(z=>nat(z,A)),F=Xt(z=>sat(z,m)),D=Array.isArray(w)?w:O,T=Array.isArray(B)?B:F;if(D==null||T==null)return null;var N=rN({cx:(e=(n=I?.cx)!==null&&n!==void 0?n:g)!==null&&e!==void 0?e:0,cy:(r=(s=I?.cy)!==null&&s!==void 0?s:y)!==null&&r!==void 0?r:0,innerRadius:(i=(a=I?.innerRadius)!==null&&a!==void 0?a:x)!==null&&i!==void 0?i:0,outerRadius:(l=(c=I?.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0,polarAngles:D,polarRadius:T,zIndex:k},j),{outerRadius:P}=N;return P<=0?null:C.createElement(Zo,{zIndex:N.zIndex},C.createElement("g",{className:"recharts-polar-grid"},C.createElement(hat,rf({gridType:d,radialLines:f},N,{polarAngles:D,polarRadius:T})),C.createElement(fat,rf({gridType:d,radialLines:f},N,{polarAngles:D,polarRadius:T}))))};sU.displayName="PolarGrid";var VR={},qR={},oK;function pat(){return oK||(oK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){if(n.length===0)return;let s=n[0],i=r(s,0,n);for(let a=1;a<n.length;a++){const l=n[a],c=r(l,a,n);c>i&&(i=c,s=l)}return s}t.maxBy=e})(qR)),qR}var lK;function mat(){return lK||(lK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pat(),n=pI(),r=IP();function s(i,a){if(i!=null)return e.maxBy(Array.from(i),r.iteratee(a??n.identity))}t.maxBy=s})(VR)),VR}var GR,cK;function gat(){return cK||(cK=1,GR=mat().maxBy),GR}var yat=gat();const xat=oc(yat);var KR={},XR={},uK;function bat(){return uK||(uK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){if(n.length===0)return;let s=n[0],i=r(s,0,n);for(let a=1;a<n.length;a++){const l=n[a],c=r(l,a,n);c<i&&(i=c,s=l)}return s}t.minBy=e})(XR)),XR}var dK;function vat(){return dK||(dK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bat(),n=pI(),r=IP();function s(i,a){if(i!=null)return e.minBy(Array.from(i),r.iteratee(a??n.identity))}t.minBy=s})(KR)),KR}var YR,fK;function wat(){return fK||(fK=1,YR=vat().minBy),YR}var Sat=wat();const Cat=oc(Sat);var kat={radiusAxis:{},angleAxis:{}},Bde=Hc({name:"polarAxis",initialState:kat,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Bat,removeRadiusAxis:jat,addAngleAxis:Eat,removeAngleAxis:Iat}=Bde.actions,Nat=Bde.reducer;function sN(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Tat=["type"],_at=["cx","cy","angle","axisLine"],Rat=["angle","tickFormatter","stroke","tick"];function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cw.apply(null,arguments)}function hK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hK(Object(n),!0).forEach(function(r){Oat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oat(t,e,n){return(e=Fat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fat(t){var e=Dat(t,"string");return typeof e=="symbol"?e:e+""}function Dat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iU(t,e){if(t==null)return{};var n,r,s=Lat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Lat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $at="radiusAxis";function Pat(t){var e=Gs(),n=Ole(),r=C.useMemo(()=>{var{type:s}=t,i=iU(t,Tat),a=bb(n,"radiusAxis",s);if(a!=null)return sf(sf({},i),{},{type:a})},[t,n]);return C.useEffect(()=>r==null?jh:(e(Bat(r)),()=>{e(jat(r))}),[e,r]),null}var zat=(t,e,n,r)=>{var{coordinate:s}=t;return ms(n,r,s,e)},Uat=t=>{var e;switch(t){case"left":e="end";break;case"right":e="start";break;default:e="middle";break}return e},Mat=(t,e,n,r)=>{var s=xat(r,a=>a.coordinate||0),i=Cat(r,a=>a.coordinate||0);return{cx:e,cy:n,startAngle:t,endAngle:t,innerRadius:i?.coordinate||0,outerRadius:s?.coordinate||0,clockWise:!1}},Qat=(t,e)=>{var{cx:n,cy:r,angle:s,axisLine:i}=t,a=iU(t,_at),l=e.reduce((f,A)=>[Math.min(f[0],A.coordinate),Math.max(f[1],A.coordinate)],[1/0,-1/0]),c=ms(n,r,l[0],s),u=ms(n,r,l[1],s),d=sf(sf(sf({},Ci(a)),{},{fill:"none"},Ci(i)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return C.createElement("line",cw({className:"recharts-polar-radius-axis-line"},d))},Hat=(t,e,n)=>{var r;return C.isValidElement(t)?r=C.cloneElement(t,e):typeof t=="function"?r=t(e):r=C.createElement(Eb,cw({},e,{className:"recharts-polar-radius-axis-tick-value"}),n),r},Wat=(t,e)=>{var{angle:n,tickFormatter:r,stroke:s,tick:i}=t,a=iU(t,Rat),l=Uat(t.orientation),c=Ci(a),u=DA(i),d=e.map((f,A)=>{var m=zat(f,t.angle,t.cx,t.cy),g=sf(sf(sf(sf({textAnchor:l,transform:"rotate(".concat(90-n,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:s},u),{},{index:A},m),{},{payload:f});return C.createElement(Ds,cw({className:yr("recharts-polar-radius-axis-tick",sN(i)),key:"tick-".concat(f.coordinate)},Q0(t,f,A)),Hat(i,g,r?r(f.value,A):f.value))});return C.createElement(Ds,{className:"recharts-polar-radius-axis-ticks"},d)},Vat=t=>{var{radiusAxisId:e}=t,n=Xt(wb),r=Xt(c=>Ib(c,"radiusAxis",e)),s=Xt(c=>Nb(c,"radiusAxis",e,!1));if(n==null||!s||!s.length||r==null)return null;var i=sf(sf({},t),{},{scale:r},n),{tick:a,axisLine:l}=i;return C.createElement(Zo,{zIndex:i.zIndex},C.createElement(Ds,{className:yr("recharts-polar-radius-axis",$at,i.className)},l&&Qat(i,s),a&&Wat(i,s),C.createElement(vit,Mat(i.angle,i.cx,i.cy,s),C.createElement(Iit,{label:i.label}),i.children)))};function aU(t){var e=ki(t,Vd);return C.createElement(C.Fragment,null,C.createElement(Pat,{domain:e.domain,id:e.radiusAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDataOverflow:e.allowDataOverflow,reversed:e.reversed,includeHidden:e.includeHidden,allowDecimals:e.allowDecimals,ticks:e.ticks,tickCount:e.tickCount,tick:e.tick}),C.createElement(Vat,e))}aU.displayName="PolarRadiusAxis";var qat=["children","type"];function S0(){return S0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S0.apply(null,arguments)}function AK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AK(Object(n),!0).forEach(function(r){Gat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gat(t,e,n){return(e=Kat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kat(t){var e=Xat(t,"string");return typeof e=="symbol"?e:e+""}function Xat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yat(t,e){if(t==null)return{};var n,r,s=Jat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Jat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pK=1e-5,Zat=Math.cos(V4(45)),eot="angleAxis";function tot(t){var e=Gs(),n=Ole(),r=C.useMemo(()=>{var{children:a,type:l}=t,c=Yat(t,qat),u=bb(n,"angleAxis",l);if(u!=null)return ed(ed({},c),{},{type:u})},[t,n]),s=Xt(a=>vb(a,r?.id)),i=r===s;return C.useEffect(()=>r==null?jh:(e(Eat(r)),()=>{e(Iat(r))}),[e,r]),i?t.children:null}var not=(t,e)=>{var{cx:n,cy:r,radius:s,orientation:i,tickSize:a}=e,l=a||8,c=ms(n,r,s,t.coordinate),u=ms(n,r,s+(i==="inner"?-1:1)*l,t.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},rot=(t,e)=>{var n=Math.cos(V4(-t.coordinate));return n>pK?e==="outer"?"start":"end":n<-pK?e==="outer"?"end":"start":"middle"},sot=t=>{var e=Math.cos(V4(-t.coordinate)),n=Math.sin(V4(-t.coordinate));return Math.abs(e)<=Zat?n>0?"start":"end":"middle"},iot=t=>{var{cx:e,cy:n,radius:r,axisLineType:s,axisLine:i,ticks:a}=t;if(!i)return null;var l=ed(ed({},Ci(t)),{},{fill:"none"},Ci(i));if(s==="circle")return C.createElement(eU,S0({className:"recharts-polar-angle-axis-line"},l,{cx:e,cy:n,r}));var c=a.map(u=>ms(e,n,r,u.coordinate));return C.createElement(vde,S0({className:"recharts-polar-angle-axis-line"},l,{points:c}))},aot=t=>{var{tick:e,tickProps:n,value:r}=t;return e?C.isValidElement(e)?C.cloneElement(e,n):typeof e=="function"?e(n):C.createElement(Eb,S0({},n,{className:"recharts-polar-angle-axis-tick-value"}),r):null},oot=t=>{var{tick:e,tickLine:n,tickFormatter:r,stroke:s,ticks:i}=t,a=Ci(t),l=DA(e),c=ed(ed({},a),{},{fill:"none"},Ci(n)),u=i.map((d,f)=>{var A=not(d,t),m=rot(d,t.orientation),g=sot(d),y=ed(ed(ed({},a),{},{textAnchor:m,verticalAnchor:g,stroke:"none",fill:s},l),{},{index:f,payload:d,x:A.x2,y:A.y2});return C.createElement(Ds,S0({className:yr("recharts-polar-angle-axis-tick",sN(e)),key:"tick-".concat(d.coordinate)},Q0(t,d,f)),n&&C.createElement("line",S0({className:"recharts-polar-angle-axis-tick-line"},c,A)),C.createElement(aot,{tick:e,tickProps:y,value:r?r(d.value,f):d.value}))});return C.createElement(Ds,{className:"recharts-polar-angle-axis-ticks"},u)},lot=t=>{var{angleAxisId:e}=t,n=Xt(wb),r=Xt(l=>Ib(l,"angleAxis",e)),s=Xo(),i=Xt(l=>eat(l,"angleAxis",e,s));if(n==null||!i||!i.length||r==null)return null;var a=ed(ed(ed({},t),{},{scale:r},n),{},{radius:n.outerRadius,ticks:i});return C.createElement(Zo,{zIndex:a.zIndex},C.createElement(Ds,{className:yr("recharts-polar-angle-axis",eot,a.className)},C.createElement(iot,a),C.createElement(oot,a)))};function oU(t){var e=ki(t,Pp);return C.createElement(tot,{id:e.angleAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:e.reversed,includeHidden:!1,allowDecimals:e.allowDecimals,tickCount:e.tickCount,ticks:e.ticks,tick:e.tick,domain:e.domain},C.createElement(lot,e))}oU.displayName="PolarAngleAxis";function mK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mK(Object(n),!0).forEach(function(r){cot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cot(t,e,n){return(e=uot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uot(t){var e=dot(t,"string");return typeof e=="symbol"?e:e+""}function dot(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fot=(t,e)=>e,lU=Ve([tU,fot],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),hot=[],cU=(t,e,n)=>n?.length===0?hot:n,jde=Ve([CS,lU,cU],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var s;if(e?.data!=null&&e.data.length>0?s=e.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(i=>gK(gK({},e.presentationProps),i.props))),s!=null)return s}}),Aot=Ve([jde,lU,cU],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,s)=>{var i,a=Cs(r,e.nameKey,e.name),l;return n!=null&&(i=n[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?l=r.fill:l=e.fill,{value:Hm(a,e.dataKey),color:l,payload:r,type:e.legendType}})}),pot=Ve([jde,lU,cU,vo],(t,e,n,r)=>{if(!(e==null||t==null))return Alt({offset:r,pieSettings:e,displayedData:t,cells:n})}),JR={exports:{}},Hs={};var yK;function mot(){if(yK)return Hs;yK=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),A=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(y){if(typeof y=="object"&&y!==null){var x=y.$$typeof;switch(x){case t:switch(y=y.type,y){case n:case s:case r:case c:case u:case A:return y;default:switch(y=y&&y.$$typeof,y){case a:case l:case f:case d:return y;case i:return y;default:return x}}case e:return x}}}return Hs.ContextConsumer=i,Hs.ContextProvider=a,Hs.Element=t,Hs.ForwardRef=l,Hs.Fragment=n,Hs.Lazy=f,Hs.Memo=d,Hs.Portal=e,Hs.Profiler=s,Hs.StrictMode=r,Hs.Suspense=c,Hs.SuspenseList=u,Hs.isContextConsumer=function(y){return g(y)===i},Hs.isContextProvider=function(y){return g(y)===a},Hs.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},Hs.isForwardRef=function(y){return g(y)===l},Hs.isFragment=function(y){return g(y)===n},Hs.isLazy=function(y){return g(y)===f},Hs.isMemo=function(y){return g(y)===d},Hs.isPortal=function(y){return g(y)===e},Hs.isProfiler=function(y){return g(y)===s},Hs.isStrictMode=function(y){return g(y)===r},Hs.isSuspense=function(y){return g(y)===c},Hs.isSuspenseList=function(y){return g(y)===u},Hs.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===r||y===c||y===u||typeof y=="object"&&y!==null&&(y.$$typeof===f||y.$$typeof===d||y.$$typeof===a||y.$$typeof===i||y.$$typeof===l||y.$$typeof===m||y.getModuleId!==void 0)},Hs.typeOf=g,Hs}var xK;function got(){return xK||(xK=1,JR.exports=mot()),JR.exports}var yot=got(),bK=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",vK=null,ZR=null,Ede=t=>{if(t===vK&&Array.isArray(ZR))return ZR;var e=[];return C.Children.forEach(t,n=>{Xi(n)||(yot.isFragment(n)?e=e.concat(Ede(n.props.children)):e.push(n))}),ZR=e,vK=t,e};function uU(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(s=>bK(s)):r=[bK(e)],Ede(t).forEach(s=>{var i=g0(s,"type.displayName")||g0(s,"type.name");i&&r.indexOf(i)!==-1&&n.push(s)}),n}var Ide=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,e6={},wK;function xot(){return wK||(wK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(e6)),e6}var t6,SK;function bot(){return SK||(SK=1,t6=xot().isPlainObject),t6}var vot=bot();const wot=oc(vot);var CK,kK,BK,jK,EK;function IK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function NK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IK(Object(n),!0).forEach(function(r){Sot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sot(t,e,n){return(e=Cot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cot(t){var e=kot(t,"string");return typeof e=="symbol"?e:e+""}function kot(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uj(){return uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uj.apply(null,arguments)}function Ov(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var TK=(t,e,n,r,s)=>{var i=n-r,a;return a=la(CK||(CK=Ov(["M ",",",""])),t,e),a+=la(kK||(kK=Ov(["L ",",",""])),t+n,e),a+=la(BK||(BK=Ov(["L ",",",""])),t+n-i/2,e+s),a+=la(jK||(jK=Ov(["L ",",",""])),t+n-i/2-r,e+s),a+=la(EK||(EK=Ov(["L ",","," Z"])),t,e),a},Bot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jot=t=>{var e=ki(t,Bot),{x:n,y:r,upperWidth:s,lowerWidth:i,height:a,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=C.useRef(null),[m,g]=C.useState(-1),y=C.useRef(s),x=C.useRef(i),v=C.useRef(a),w=C.useRef(n),B=C.useRef(r),k=mb(t,"trapezoid-");if(C.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var U=A.current.getTotalLength();U&&g(U)}catch{}},[]),n!==+n||r!==+r||s!==+s||i!==+i||a!==+a||s===0&&i===0||a===0)return null;var j=yr("recharts-trapezoid",l);if(!f)return C.createElement("g",null,C.createElement("path",uj({},Ya(e),{className:j,d:TK(n,r,s,i,a)})));var I=y.current,O=x.current,F=v.current,D=w.current,T=B.current,N="0px ".concat(m===-1?1:m,"px"),P="".concat(m,"px 0px"),z=Vle(["strokeDasharray"],u,c);return C.createElement(pb,{animationId:k,key:k,canBegin:m>0,duration:u,easing:c,isActive:f,begin:d},U=>{var ee=Ts(I,s,U),q=Ts(O,i,U),Z=Ts(F,a,U),G=Ts(D,n,U),ne=Ts(T,r,U);A.current&&(y.current=ee,x.current=q,v.current=Z,w.current=G,B.current=ne);var K=U>0?{transition:z,strokeDasharray:P}:{strokeDasharray:N};return C.createElement("path",uj({},Ya(e),{className:j,d:TK(G,ne,ee,q,Z),ref:A,style:NK(NK({},K),e.style)}))})},Eot=["option","shapeType","activeClassName"];function Iot(t,e){if(t==null)return{};var n,r,s=Not(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Not(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(n),!0).forEach(function(r){Tot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tot(t,e,n){return(e=_ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ot(t){var e=Rot(t,"string");return typeof e=="symbol"?e:e+""}function Rot(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oot(t,e){return dj(dj({},e),t)}function Fot(t,e){return t==="symbols"}function RK(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return C.createElement(Xle,n);case"trapezoid":return C.createElement(jot,n);case"sector":return C.createElement(ece,n);case"symbols":if(Fot(e))return C.createElement(kP,n);break;case"curve":return C.createElement(g1,n);default:return null}}function Dot(t){return C.isValidElement(t)?t.props:t}function Nde(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,s=Iot(t,Eot),i;if(C.isValidElement(e))i=C.cloneElement(e,dj(dj({},s),Dot(e)));else if(typeof e=="function")i=e(s,s.index);else if(wot(e)&&typeof e!="boolean"){var a=Oot(e,s);i=C.createElement(RK,{shapeType:n,elementProps:a})}else{var l=s;i=C.createElement(RK,{shapeType:n,elementProps:l})}return s.isActive?C.createElement(Ds,{className:r},i):i}var dU=(t,e,n)=>{var r=Gs();return(s,i)=>a=>{t?.(s,i,a),r(Oue({activeIndex:String(i),activeDataKey:e,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}},fU=t=>{var e=Gs();return(n,r)=>s=>{t?.(n,r,s),e(Int())}},hU=(t,e,n)=>{var r=Gs();return(s,i)=>a=>{t?.(s,i,a),r(Nnt({activeIndex:String(i),activeDataKey:e,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}};function iN(t){var{tooltipEntrySettings:e}=t,n=Gs(),r=Xo(),s=C.useRef(null);return C.useLayoutEffect(()=>{r||(s.current===null?n(knt(e)):s.current!==e&&n(Bnt({prev:s.current,next:e})),s.current=e)},[e,n,r]),C.useLayoutEffect(()=>()=>{s.current&&(n(jnt(s.current)),s.current=null)},[n]),null}function Tde(t){var{legendPayload:e}=t,n=Gs(),r=Xo(),s=C.useRef(null);return C.useLayoutEffect(()=>{r||(s.current===null?n(Mle(e)):s.current!==e&&n(Qle({prev:s.current,next:e})),s.current=e)},[n,r,e]),C.useLayoutEffect(()=>()=>{s.current&&(n(Hle(s.current)),s.current=null)},[n]),null}function _de(t){var{legendPayload:e}=t,n=Gs(),r=Xt(Pr),s=C.useRef(null);return C.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(s.current===null?n(Mle(e)):s.current!==e&&n(Qle({prev:s.current,next:e})),s.current=e)},[n,r,e]),C.useLayoutEffect(()=>()=>{s.current&&(n(Hle(s.current)),s.current=null)},[n]),null}var n6,Lot=()=>{var[t]=C.useState(()=>K2("uid-"));return t},$ot=(n6=Dpe.useId)!==null&&n6!==void 0?n6:Lot;function Pot(t,e){var n=$ot();return e||(t?"".concat(t,"-").concat(n):n)}var zot=C.createContext(void 0),aN=t=>{var{id:e,type:n,children:r}=t,s=Pot("recharts-".concat(n),e);return C.createElement(zot.Provider,{value:s},r(s))},Uot={cartesianItems:[],polarItems:[]},Rde=Hc({name:"graphicalItems",initialState:Uot,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:zi()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,s=lf(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},prepare:zi()},removeCartesianGraphicalItem:{reducer(t,e){var n=lf(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:zi()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:zi()},removePolarGraphicalItem:{reducer(t,e){var n=lf(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:zi()}}}),{addCartesianGraphicalItem:Mot,replaceCartesianGraphicalItem:Qot,removeCartesianGraphicalItem:Hot,addPolarGraphicalItem:Wot,removePolarGraphicalItem:Vot}=Rde.actions,qot=Rde.reducer,Got=t=>{var e=Gs(),n=C.useRef(null);return C.useLayoutEffect(()=>{n.current===null?e(Mot(t)):n.current!==t&&e(Qot({prev:n.current,next:t})),n.current=t},[e,t]),C.useLayoutEffect(()=>()=>{n.current&&(e(Hot(n.current)),n.current=null)},[e]),null},Ode=C.memo(Got);function Fde(t){var e=Gs();return C.useLayoutEffect(()=>(e(Wot(t)),()=>{e(Vot(t))}),[e,t]),null}var Kot=["key"],Xot=["onMouseEnter","onClick","onMouseLeave"],Yot=["id"],Jot=["id"];function OK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OK(Object(n),!0).forEach(function(r){Zot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zot(t,e,n){return(e=elt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function elt(t){var e=tlt(t,"string");return typeof e=="symbol"?e:e+""}function tlt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tm.apply(null,arguments)}function oN(t,e){if(t==null)return{};var n,r,s=nlt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function nlt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rlt(t){var e=C.useMemo(()=>uU(t.children,gf),[t.children]),n=Xt(r=>Aot(r,t.id,e));return n==null?null:C.createElement(_de,{legendPayload:n})}var slt=C.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:s,strokeWidth:i,fill:a,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:r.map(A=>A.tooltipPayload),getPosition:A=>{var m;return(m=r[Number(A)])===null||m===void 0?void 0:m.tooltipPosition},settings:{stroke:s,strokeWidth:i,fill:a,dataKey:e,nameKey:n,name:Hm(l,e),hide:c,type:u,color:a,unit:"",graphicalItemId:d}};return C.createElement(iN,{tooltipEntrySettings:f})}),ilt=(t,e)=>t>e?"start":t<e?"end":"middle",alt=(t,e,n)=>Rl(typeof e=="function"?e(t):e,n,n*.8),olt=(t,e,n)=>{var{top:r,left:s,width:i,height:a}=e,l=Yle(i,a),c=s+Rl(t.cx,i,i/2),u=r+Rl(t.cy,a,a/2),d=Rl(t.innerRadius,l,0),f=alt(n,t.outerRadius,l),A=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},llt=(t,e)=>{var n=Uo(e-t),r=Math.min(Math.abs(e-t),360);return n*r},clt=(t,e)=>{if(C.isValidElement(t))return C.cloneElement(t,e);if(typeof t=="function")return t(e);var n=yr("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,s=oN(e,Kot);return C.createElement(g1,Tm({},s,{type:"linear",className:n}))},ult=(t,e,n)=>{if(C.isValidElement(t))return C.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),C.isValidElement(r)))return r;var s=yr("recharts-pie-label-text",sN(t));return C.createElement(Eb,Tm({},e,{alignmentBaseline:"middle",className:s}),r)};function dlt(t){var{sectors:e,props:n,showLabels:r}=t,{label:s,labelLine:i,dataKey:a}=n;if(!r||!s||!e)return null;var l=Ci(n),c=DA(s),u=DA(i),d=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,f=e.map((A,m)=>{var g=(A.startAngle+A.endAngle)/2,y=ms(A.cx,A.cy,A.outerRadius+d,g),x=va(va(va(va({},l),A),{},{stroke:"none"},c),{},{index:m,textAnchor:ilt(y.x,A.cx)},y),v=va(va(va(va({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:m,points:[ms(A.cx,A.cy,A.outerRadius,g),y],key:"line"});return C.createElement(Zo,{zIndex:Wi.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(m)},C.createElement(Ds,null,i&&clt(i,v),ult(s,x,Cs(A,a))))});return C.createElement(Ds,{className:"recharts-pie-labels"},f)}function flt(t){var{sectors:e,props:n,showLabels:r}=t,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?C.createElement(eN,{label:s}):C.createElement(dlt,{sectors:e,props:n,showLabels:r})}function hlt(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:s,shape:i,id:a}=t,l=Xt(Nm),c=Xt(qz),u=Xt(prt),{onMouseEnter:d,onClick:f,onMouseLeave:A}=s,m=oN(s,Xot),g=dU(d,s.dataKey,a),y=fU(A),x=hU(f,s.dataKey,a);return e==null||e.length===0?null:C.createElement(C.Fragment,null,e.map((v,w)=>{if(v?.startAngle===0&&v?.endAngle===0&&e.length!==1)return null;var B=u==null||u===a,k=String(w)===l&&(c==null||s.dataKey===c)&&B,j=l?r:null,I=n&&k?n:j,O=va(va({},v),{},{stroke:v.stroke,tabIndex:-1,[Ele]:w,[Ile]:a});return C.createElement(Ds,Tm({key:"sector-".concat(v?.startAngle,"-").concat(v?.endAngle,"-").concat(v.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Q0(m,v,w),{onMouseEnter:g(v,w),onMouseLeave:y(v,w),onClick:x(v,w)}),C.createElement(Nde,Tm({option:i??I,index:w,shapeType:"sector",isActive:k},O)))}))}function Alt(t){var e,{pieSettings:n,displayedData:r,cells:s,offset:i}=t,{cornerRadius:a,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=n,A=Math.abs(n.minAngle),m=llt(l,c),g=Math.abs(m),y=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,x=r.filter(I=>Cs(I,u,0)!==0).length,v=(g>=360?x:x-1)*y,w=g-x*A-v,B=r.reduce((I,O)=>{var F=Cs(O,u,0);return I+(nn(F)?F:0)},0),k;if(B>0){var j;k=r.map((I,O)=>{var F=Cs(I,u,0),D=Cs(I,d,O),T=olt(n,i,I),N=(nn(F)?F:0)/B,P,z=va(va({},I),s&&s[O]&&s[O].props);O?P=j.endAngle+Uo(m)*y*(F!==0?1:0):P=l;var U=P+Uo(m)*((F!==0?A:0)+N*w),ee=(P+U)/2,q=(T.innerRadius+T.outerRadius)/2,Z=[{name:D,value:F,payload:z,dataKey:u,type:f,graphicalItemId:n.id}],G=ms(T.cx,T.cy,q,ee);return j=va(va(va(va({},n.presentationProps),{},{percent:N,cornerRadius:typeof a=="string"?parseFloat(a):a,name:D,tooltipPayload:Z,midAngle:ee,middleRadius:q,tooltipPosition:G},z),T),{},{value:F,dataKey:u,startAngle:P,endAngle:U,payload:z,paddingAngle:Uo(m)*y}),j})}return k}function plt(t){var{showLabels:e,sectors:n,children:r}=t,s=C.useMemo(()=>!e||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,e]);return C.createElement(Pit,{value:e?s:void 0},r)}function mlt(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:s,isAnimationActive:i,animationBegin:a,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,m=mb(e,"recharts-pie-"),g=n.current,[y,x]=C.useState(!1),v=C.useCallback(()=>{typeof A=="function"&&A(),x(!1)},[A]),w=C.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return C.createElement(plt,{showLabels:!y,sectors:s},C.createElement(pb,{animationId:m,begin:a,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:v,key:m},B=>{var k,j=[],I=s&&s[0],O=(k=I?.startAngle)!==null&&k!==void 0?k:0;return s?.forEach((F,D)=>{var T=g&&g[D],N=D>0?g0(F,"paddingAngle",0):0;if(T){var P=Ts(T.endAngle-T.startAngle,F.endAngle-F.startAngle,B),z=va(va({},F),{},{startAngle:O+N,endAngle:O+P+N});j.push(z),O=z.endAngle}else{var{endAngle:U,startAngle:ee}=F,q=Ts(0,U-ee,B),Z=va(va({},F),{},{startAngle:O+N,endAngle:O+q+N});j.push(Z),O=Z.endAngle}}),n.current=j,C.createElement(Ds,null,C.createElement(hlt,{sectors:j,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:r}))}),C.createElement(flt,{showLabels:!y,sectors:s,props:e}),e.children)}var glt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Wi.area};function ylt(t){var{id:e}=t,n=oN(t,Yot),{hide:r,className:s,rootTabIndex:i}=t,a=C.useMemo(()=>uU(t.children,gf),[t.children]),l=Xt(d=>pot(d,e,a)),c=C.useRef(null),u=yr("recharts-pie",s);return r||l==null?(c.current=null,C.createElement(Ds,{tabIndex:i,className:u})):C.createElement(Zo,{zIndex:t.zIndex},C.createElement(slt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),C.createElement(Ds,{tabIndex:i,className:u},C.createElement(mlt,{props:va(va({},n),{},{sectors:l}),previousSectorsRef:c,id:e})))}function OS(t){var e=ki(t,glt),{id:n}=e,r=oN(e,Jot),s=Ci(r);return C.createElement(aN,{id:n,type:"pie"},i=>C.createElement(C.Fragment,null,C.createElement(Fde,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s,maxRadius:e.maxRadius}),C.createElement(rlt,Tm({},r,{id:i})),C.createElement(ylt,Tm({},r,{id:i}))))}OS.displayName="Pie";var xlt=["points"];function FK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FK(Object(n),!0).forEach(function(r){blt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function blt(t,e,n){return(e=vlt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vlt(t){var e=wlt(t,"string");return typeof e=="symbol"?e:e+""}function wlt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fj(){return fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fj.apply(null,arguments)}function Slt(t,e){if(t==null)return{};var n,r,s=Clt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Clt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function klt(t){var{option:e,dotProps:n,className:r}=t;if(C.isValidElement(e))return C.cloneElement(e,n);if(typeof e=="function")return e(n);var s=yr(r,typeof e!="boolean"?e.className:""),i=n??{},{points:a}=i,l=Slt(i,xlt);return C.createElement(eU,fj({},l,{className:s}))}function Blt(t,e){return t==null?!1:e?!0:t.length===1}function Dde(t){var{points:e,dot:n,className:r,dotClassName:s,dataKey:i,baseProps:a,needClip:l,clipPathId:c,zIndex:u=Wi.scatter}=t;if(!Blt(e,n))return null;var d=Ide(n),f=OVe(n),A=e.map((g,y)=>{var x,v,w=r6(r6(r6({r:3},a),f),{},{index:y,cx:(x=g.x)!==null&&x!==void 0?x:void 0,cy:(v=g.y)!==null&&v!==void 0?v:void 0,dataKey:i,value:g.value,payload:g.payload,points:e});return C.createElement(klt,{key:"dot-".concat(y),option:n,dotProps:w,className:s})}),m={};return l&&c!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),C.createElement(Zo,{zIndex:u},C.createElement(Ds,fj({className:r},m),A))}function DK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DK(Object(n),!0).forEach(function(r){jlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jlt(t,e,n){return(e=Elt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Elt(t){var e=Ilt(t,"string");return typeof e=="symbol"?e:e+""}function Ilt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lde=0,Nlt={xAxis:{},yAxis:{},zAxis:{}},$de=Hc({name:"cartesianAxis",initialState:Nlt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:zi()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:zi()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:zi()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:zi()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:zi()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:zi()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:zi()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:zi()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:zi()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,s=t.yAxis[n];if(s){var i,a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==s.width&&Math.abs(r-((i=a[0])!==null&&i!==void 0?i:0))<=1)return;var l=[...a,r].slice(-3);t.yAxis[n]=LK(LK({},s),{},{width:r,widthHistory:l})}}}}),{addXAxis:Tlt,replaceXAxis:_lt,removeXAxis:Rlt,addYAxis:Olt,replaceYAxis:Flt,removeYAxis:Dlt,addZAxis:Fvt,replaceZAxis:Dvt,removeZAxis:Lvt,updateYAxisWidth:Llt}=$de.actions,$lt=$de.reducer,Plt=Ve([vo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),zlt=Ve([Plt,tp,np],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),AU=()=>Xt(zlt),Ult=()=>Xt(brt);function $K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function s6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(n),!0).forEach(function(r){Mlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mlt(t,e,n){return(e=Qlt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qlt(t){var e=Hlt(t,"string");return typeof e=="symbol"?e:e+""}function Hlt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wlt=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:i,clipPath:a}=t;if(s===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=s6(s6(s6({},l),DA(s)),BP(s)),u;return C.isValidElement(s)?u=C.cloneElement(s,c):typeof s=="function"?u=s(c):u=C.createElement(eU,c),C.createElement(Ds,{className:"recharts-active-dot",clipPath:a},u)};function o8(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s,clipPath:i,zIndex:a=Wi.activeDot}=t,l=Xt(Nm),c=Ult();if(e==null||c==null)return null;var u=e.find(d=>c.includes(d.payload));return Xi(u)?null:C.createElement(Zo,{zIndex:a},C.createElement(Wlt,{point:u,childIndex:Number(l),mainColor:n,dataKey:s,activeDot:r,clipPath:i}))}function PK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PK(Object(n),!0).forEach(function(r){Vlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vlt(t,e,n){return(e=qlt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qlt(t){var e=Glt(t,"string");return typeof e=="symbol"?e:e+""}function Glt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pde=(t,e)=>Ib(t,"radiusAxis",e),Klt=Ve([Pde],t=>{if(t!=null)return{scale:t}}),Xlt=Ve([BS,Pde],(t,e)=>{if(!(t==null||e==null))return hj(hj({},t),{},{scale:e})}),Ylt=(t,e,n,r)=>Nb(t,"radiusAxis",e,r),zde=(t,e,n)=>vb(t,n),Ude=(t,e,n)=>Ib(t,"angleAxis",n),Jlt=Ve([zde,Ude],(t,e)=>{if(!(t==null||e==null))return hj(hj({},t),{},{scale:e})}),Zlt=(t,e,n,r)=>Nb(t,"angleAxis",n,r),ect=Ve([zde,Ude,wb],(t,e,n)=>{if(!(n==null||e==null))return{scale:e,type:t.type,dataKey:t.dataKey,cx:n.cx,cy:n.cy}}),tct=(t,e,n,r,s)=>s,nct=Ve([Pr,Xlt,Ylt,Jlt,Zlt],(t,e,n,r,s)=>kf(t,"radiusAxis")?jm(e,n,!1):jm(r,s,!1)),rct=Ve([tU,tct],(t,e)=>{if(t!=null){var n=t.find(r=>r.type==="radar"&&e===r.id);return n?.dataKey}}),sct=Ve([Klt,ect,CS,rct,nct],(t,e,n,r,s)=>{var{chartData:i,dataStartIndex:a,dataEndIndex:l}=n;if(!(t==null||e==null||i==null||s==null||r==null)){var c=i.slice(a,l+1);return Act({radiusAxis:t,angleAxis:e,displayedData:c,dataKey:r,bandSize:s})}}),ict=["id"];function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uw.apply(null,arguments)}function zK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zK(Object(n),!0).forEach(function(r){act(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function act(t,e,n){return(e=oct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oct(t){var e=lct(t,"string");return typeof e=="symbol"?e:e+""}function lct(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cct(t,e){if(t==null)return{};var n,r,s=uct(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function uct(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pU(t,e){return t&&t!=="none"?t:e}var dct=t=>{var{dataKey:e,name:n,stroke:r,fill:s,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:pU(r,s),value:Hm(n,e),payload:t}]},fct=C.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:s,name:i,hide:a,tooltipType:l,id:c}=t,u={dataDefinedOnItem:void 0,getPosition:jh,settings:{stroke:n,strokeWidth:r,fill:s,nameKey:void 0,dataKey:e,name:Hm(i,e),hide:a,type:l,color:pU(n,s),unit:"",graphicalItemId:c}};return C.createElement(iN,{tooltipEntrySettings:u})});function hct(t){var{points:e,props:n}=t,{dot:r,dataKey:s}=n,{id:i}=n,a=cct(n,ict),l=Ci(a);return C.createElement(Dde,{points:e,dot:r,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:s,baseProps:l})}function Act(t){var{radiusAxis:e,angleAxis:n,displayedData:r,dataKey:s,bandSize:i}=t,{cx:a,cy:l}=n,c=!1,u=[],d=n.type!=="number"?i??0:0;r.forEach((A,m)=>{var g,y,x=Cs(A,n.dataKey,m),v=Cs(A,s),w=((g=n.scale.map(x))!==null&&g!==void 0?g:0)+d,B=Array.isArray(v)?yde(v):v,k=Xi(B)?0:(y=e.scale.map(B))!==null&&y!==void 0?y:0;Array.isArray(v)&&v.length>=2&&(c=!0),u.push(Fc(Fc({},ms(a,l,k,w)),{},{name:x,value:v,cx:a,cy:l,radius:k,angle:w,payload:A}))});var f=[];return c&&u.forEach(A=>{if(Array.isArray(A.value)){var m,g=A.value[0],y=Xi(g)?0:(m=e.scale.map(g))!==null&&m!==void 0?m:0;f.push(Fc(Fc({},A),{},{radius:y},ms(a,l,y,A.angle)))}else f.push(A)}),{points:u,isRange:c,baseLinePoints:f}}function pct(t){var{showLabels:e,points:n,children:r}=t,s=n.map(i=>{var a,l={x:i.x,y:i.y,width:0,lowerWidth:0,upperWidth:0,height:0};return Fc(Fc({},l),{},{value:(a=i.value)!==null&&a!==void 0?a:"",payload:i.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return C.createElement(Zz,{value:e?s:void 0},r)}function mct(t){var{points:e,baseLinePoints:n,props:r}=t;if(e==null)return null;var{shape:s,isRange:i,connectNulls:a}=r,l=d=>{var{onMouseEnter:f}=r;f&&f(r,d)},c=d=>{var{onMouseLeave:f}=r;f&&f(r,d)},u;return C.isValidElement(s)?u=C.cloneElement(s,Fc(Fc({},r),{},{points:e})):typeof s=="function"?u=s(Fc(Fc({},r),{},{points:e})):u=C.createElement(vde,uw({},Ya(r),{onMouseEnter:l,onMouseLeave:c,points:e,baseLinePoints:i?n:void 0,connectNulls:a})),C.createElement(Ds,{className:"recharts-radar-polygon"},u,C.createElement(hct,{props:r,points:e}))}var UK=(t,e,n)=>(r,s)=>{var i=t&&t[Math.floor(s*e)];return i?Fc(Fc({},r),{},{x:Ts(i.x,r.x,n),y:Ts(i.y,r.y,n)}):Fc(Fc({},r),{},{x:Ts(r.cx,r.x,n),y:Ts(r.cy,r.y,n)})};function gct(t){var{props:e,previousPointsRef:n,previousBaseLinePointsRef:r}=t,{points:s,baseLinePoints:i,isAnimationActive:a,animationBegin:l,animationDuration:c,animationEasing:u,onAnimationEnd:d,onAnimationStart:f}=e,A=n.current,m=r.current,g=A?A.length/s.length:1,y=m?m.length/i.length:1,x=mb(e,"recharts-radar-"),[v,w]=C.useState(!1),B=!v,k=C.useCallback(()=>{typeof d=="function"&&d(),w(!1)},[d]),j=C.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return C.createElement(pct,{showLabels:B,points:s},C.createElement(pb,{animationId:x,begin:l,duration:c,isActive:a,easing:u,key:"radar-".concat(x),onAnimationEnd:k,onAnimationStart:j},I=>{var O=I===1?s:s.map(UK(A,g,I)),F=I===1?i:i?.map(UK(m,y,I));return I>0&&(n.current=O,r.current=F),C.createElement(mct,{points:O,baseLinePoints:F,props:e})}),C.createElement(eN,{label:e.label}),e.children)}function yct(t){var e=C.useRef(void 0),n=C.useRef(void 0);return C.createElement(gct,{props:t,previousPointsRef:e,previousBaseLinePointsRef:n})}var xct={activeDot:!0,angleAxisId:0,animationBegin:0,animationDuration:1500,animationEasing:"ease",dot:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",radiusAxisId:0,zIndex:Wi.area};function bct(t){var{hide:e,className:n,points:r}=t;if(e)return null;var s=yr("recharts-radar",n);return C.createElement(Zo,{zIndex:t.zIndex},C.createElement(Ds,{className:s},C.createElement(yct,t)),C.createElement(o8,{points:r,mainColor:pU(t.stroke,t.fill),itemDataKey:t.dataKey,activeDot:t.activeDot}))}function vct(t){var e=Xo(),n=Xt(r=>sct(r,t.radiusAxisId,t.angleAxisId,e,t.id));return n?.points==null?null:C.createElement(bct,uw({},t,{points:n?.points,baseLinePoints:n?.baseLinePoints,isRange:n?.isRange}))}function mU(t){var e=ki(t,xct);return C.createElement(aN,{id:e.id,type:"radar"},n=>C.createElement(C.Fragment,null,C.createElement(Fde,{type:"radar",id:n,data:void 0,dataKey:e.dataKey,hide:e.hide,angleAxisId:e.angleAxisId,radiusAxisId:e.radiusAxisId}),C.createElement(_de,{legendPayload:dct(e)}),C.createElement(fct,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:n}),C.createElement(vct,uw({},e,{id:n}))))}mU.displayName="Radar";var MK=(t,e,n)=>{var r=n??t;if(!Xi(r))return Rl(r,e,0)},wct=(t,e,n)=>{var r={},s=t.filter(QI),i=t.filter(u=>u.stackId==null),a=s.reduce((u,d)=>{var f=u[d.stackId];return f==null&&(f=[]),f.push(d),u[d.stackId]=f,u},r),l=Object.entries(a).map(u=>{var d,[f,A]=u,m=A.map(y=>y.dataKey),g=MK(e,n,(d=A[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:m,barSize:g}}),c=i.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=MK(e,n,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function QK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QK(Object(n),!0).forEach(function(r){Sct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sct(t,e,n){return(e=Cct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cct(t){var e=kct(t,"string");return typeof e=="symbol"?e:e+""}function kct(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bct(t,e,n,r,s){var i,a=r.length;if(!(a<1)){var l=Rl(t,n,0,!0),c,u=[];if(br((i=r[0])===null||i===void 0?void 0:i.barSize)){var d=!1,f=n/a,A=r.reduce((w,B)=>w+(B.barSize||0),0);A+=(a-1)*l,A>=n&&(A-=(a-1)*l,l=0),A>=n&&f>0&&(d=!0,f*=.9,A=a*f);var m=(n-A)/2>>0,g={offset:m-l,size:0};c=r.reduce((w,B)=>{var k,j={stackId:B.stackId,dataKeys:B.dataKeys,position:{offset:g.offset+g.size+l,size:d?f:(k=B.barSize)!==null&&k!==void 0?k:0}},I=[...w,j];return g=j.position,I},u)}else{var y=Rl(e,n,0,!0);n-2*y-(a-1)*l<=0&&(l=0);var x=(n-2*y-(a-1)*l)/a;x>1&&(x>>=0);var v=br(s)?Math.min(x,s):x;c=r.reduce((w,B,k)=>[...w,{stackId:B.stackId,dataKeys:B.dataKeys,position:{offset:y+(x+l)*k+(x-v)/2,size:v}}],u)}return c}}var jct=(t,e,n,r,s,i,a)=>{var l=Xi(a)?e:a,c=Bct(n,r,s!==i?s:i,t,l);return s!==i&&c!=null&&(c=c.map(u=>mk(mk({},u),{},{position:mk(mk({},u.position),{},{offset:u.position.offset-s/2})}))),c},Ect=(t,e)=>{var n=MI(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var s=t[r];if(s){var{stackedData:i}=s;if(i)return i.find(a=>a.key===n)}}}},Ict=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function Nct(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&br(t.zIndex)?t.zIndex:e}var Mde=t=>{var{chartData:e}=t,n=Gs(),r=Xo();return C.useEffect(()=>r?()=>{}:(n(_G(e)),()=>{n(_G(void 0))}),[e,n,r]),null},HK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Qde=Hc({name:"brush",initialState:HK,reducers:{setBrushSettings(t,e){return e.payload==null?HK:e.payload}}}),{setBrushSettings:$vt}=Qde.actions,Tct=Qde.reducer;function _ct(t){return(t%180+180)%180}var Rct=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=_ct(s),a=i*Math.PI/180,l=Math.atan(r/n),c=a>l&&a<Math.PI-l?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},Oct={dots:[],areas:[],lines:[]},Hde=Hc({name:"referenceElements",initialState:Oct,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=lf(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=lf(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=lf(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Pvt,removeDot:zvt,addArea:Uvt,removeArea:Mvt,addLine:Qvt,removeLine:Hvt}=Hde.actions,Fct=Hde.reducer,Dct=C.createContext(void 0),Lct=t=>{var{children:e}=t,[n]=C.useState("".concat(K2("recharts"),"-clip")),r=AU();if(r==null)return null;var{x:s,y:i,width:a,height:l}=r;return C.createElement(Dct.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:s,y:i,height:l,width:a}))),e)};function Wde(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var s=t[r];s!==void 0&&n.push(s)}return n}function $ct(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Rct(r,n)}function Pct(t,e,n){var r=n==="width",{x:s,y:i,width:a,height:l}=t;return e===1?{start:r?s:i,end:r?s+a:i+l}:{start:r?s+a:i+l,end:r?s:i}}function dw(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function zct(t,e){return Wde(t,e+1)}function Uct(t,e,n,r,s){for(var i=(r||[]).slice(),{start:a,end:l}=e,c=0,u=1,d=a,f=function(){var g=r?.[c];if(g===void 0)return{v:Wde(r,u)};var y=c,x,v=()=>(x===void 0&&(x=n(g,y)),x),w=g.coordinate,B=c===0||dw(t,w,v,d,l);B||(c=0,d=a,u+=1),B&&(d=w+t*(v()/2+s),c+=u)},A;u<=i.length;)if(A=f(),A)return A.v;return[]}function Mct(t,e,n,r,s){var i=(r||[]).slice(),a=i.length;if(a===0)return[];for(var{start:l,end:c}=e,u=1;u<=a;u++){for(var d=(a-1)%u,f=l,A=!0,m=function(){var k=r[y];if(k==null)return 0;var j=y,I,O=()=>(I===void 0&&(I=n(k,j)),I),F=k.coordinate,D=y===d||dw(t,F,O,f,c);if(!D)return A=!1,1;D&&(f=F+t*(O()/2+s))},g,y=d;y<a&&(g=m(),!(g!==0&&g===1));y+=u);if(A){for(var x=[],v=d;v<a;v+=u){var w=r[v];w!=null&&x.push(w)}return x}}return[]}function WK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Sl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WK(Object(n),!0).forEach(function(r){Qct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qct(t,e,n){return(e=Hct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hct(t){var e=Wct(t,"string");return typeof e=="symbol"?e:e+""}function Wct(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vct(t,e,n,r,s){for(var i=(r||[]).slice(),a=i.length,{start:l}=e,{end:c}=e,u=function(A){var m=i[A];if(m==null)return 1;var g=m,y,x=()=>(y===void 0&&(y=n(m,A)),y);if(A===a-1){var v=t*(g.coordinate+t*x()/2-c);i[A]=g=Sl(Sl({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else i[A]=g=Sl(Sl({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=dw(t,g.tickCoord,x,l,c);w&&(c=g.tickCoord-t*(x()/2+s),i[A]=Sl(Sl({},g),{},{isShow:!0}))}},d=a-1;d>=0;d--)u(d);return i}function qct(t,e,n,r,s,i){var a=(r||[]).slice(),l=a.length,{start:c,end:u}=e;if(i){var d=r[l-1];if(d!=null){var f=n(d,l-1),A=t*(d.coordinate+t*f/2-u);if(a[l-1]=d=Sl(Sl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var m=dw(t,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-t*(f/2+s),a[l-1]=Sl(Sl({},d),{},{isShow:!0}))}}}for(var g=i?l-1:l,y=function(w){var B=a[w];if(B==null)return 1;var k=B,j,I=()=>(j===void 0&&(j=n(B,w)),j);if(w===0){var O=t*(k.coordinate-t*I()/2-c);a[w]=k=Sl(Sl({},k),{},{tickCoord:O<0?k.coordinate-O*t:k.coordinate})}else a[w]=k=Sl(Sl({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var F=dw(t,k.tickCoord,I,c,u);F&&(c=k.tickCoord+t*(I()/2+s),a[w]=Sl(Sl({},k),{},{isShow:!0}))}},x=0;x<g;x++)y(x);return a}function gU(t,e,n){var{tick:r,ticks:s,viewBox:i,minTickGap:a,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!s||!s.length||!r)return[];if(nn(c)||xS.isSsr){var A;return(A=zct(s,nn(c)?c:0))!==null&&A!==void 0?A:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",y=d&&g==="width"?m2(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=(j,I)=>{var O=typeof u=="function"?u(j.value,I):j.value;return g==="width"?$ct(m2(O,{fontSize:e,letterSpacing:n}),y,f):m2(O,{fontSize:e,letterSpacing:n})[g]},v=s[0],w=s[1],B=s.length>=2&&v!=null&&w!=null?Uo(w.coordinate-v.coordinate):1,k=Pct(i,B,g);return c==="equidistantPreserveStart"?Uct(B,k,x,s,a):c==="equidistantPreserveEnd"?Mct(B,k,x,s,a):(c==="preserveStart"||c==="preserveStartEnd"?m=qct(B,k,x,s,a,c==="preserveStartEnd"):m=Vct(B,k,x,s,a),m.filter(j=>j.isShow))}var Gct=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=t,a=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>a&&(a=f.width)}});var l=n?n.getBoundingClientRect().width:0,c=s+i,u=a+c+l+(n?r:0);return Math.round(u)}return 0},Kct=["axisLine","width","height","className","hide","ticks","axisType"];function Xct(t,e){if(t==null)return{};var n,r,s=Yct(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Yct(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C0.apply(null,arguments)}function VK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VK(Object(n),!0).forEach(function(r){Jct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jct(t,e,n){return(e=Zct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zct(t){var e=eut(t,"string");return typeof e=="symbol"?e:e+""}function eut(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SA={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Wi.axis};function tut(t){var{x:e,y:n,width:r,height:s,orientation:i,mirror:a,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=ba(ba(ba({},c),Ci(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!a||i==="bottom"&&a);u=ba(ba({},u),{},{x1:e,y1:n+d*s,x2:e+r,y2:n+d*s})}else{var f=+(i==="left"&&!a||i==="right"&&a);u=ba(ba({},u),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+s})}return C.createElement("line",C0({},u,{className:yr("recharts-cartesian-axis-line",g0(l,"className"))}))}function nut(t,e,n,r,s,i,a,l,c){var u,d,f,A,m,g,y=l?-1:1,x=t.tickSize||a,v=nn(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":u=d=t.coordinate,A=n+ +!l*s,f=A-y*x,g=f-y*c,m=v;break;case"left":f=A=t.coordinate,d=e+ +!l*r,u=d-y*x,m=u-y*c,g=v;break;case"right":f=A=t.coordinate,d=e+ +l*r,u=d+y*x,m=u+y*c,g=v;break;default:u=d=t.coordinate,A=n+ +l*s,f=A+y*x,g=f+y*c,m=v;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:m,y:g}}}function rut(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function sut(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function iut(t){var{option:e,tickProps:n,value:r}=t,s,i=yr(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))s=C.cloneElement(e,ba(ba({},n),{},{className:i}));else if(typeof e=="function")s=e(ba(ba({},n),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=yr(a,sN(e))),s=C.createElement(Eb,C0({},n,{className:a}),r)}return s}var aut=C.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:s,stroke:i,tickFormatter:a,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:m,width:g,height:y,tickSize:x,tickMargin:v,fontSize:w,letterSpacing:B,getTicksConfig:k,events:j,axisType:I}=t,O=gU(ba(ba({},k),{},{ticks:n}),w,B),F=rut(d,f),D=sut(d,f),T=Ci(k),N=DA(r),P={};typeof s=="object"&&(P=s);var z=ba(ba({},T),{},{fill:"none"},P),U=O.map(Z=>ba({entry:Z},nut(Z,A,m,g,y,d,x,f,v))),ee=U.map(Z=>{var{entry:G,line:ne}=Z;return C.createElement(Ds,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},s&&C.createElement("line",C0({},z,ne,{className:yr("recharts-cartesian-axis-tick-line",g0(s,"className"))})))}),q=U.map((Z,G)=>{var ne,K,{entry:H,tick:Q}=Z,X=ba(ba(ba(ba({verticalAnchor:D},T),{},{textAnchor:F,stroke:"none",fill:i},Q),{},{index:G,payload:H,visibleTicksCount:O.length,tickFormatter:a,padding:c},u),{},{angle:(ne=(K=u?.angle)!==null&&K!==void 0?K:T.angle)!==null&&ne!==void 0?ne:0}),re=ba(ba({},X),N);return C.createElement(Ds,C0({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},Q0(j,H,G)),r&&C.createElement(iut,{option:r,tickProps:re,value:"".concat(typeof a=="function"?a(H.value,G):H.value).concat(l||"")}))});return C.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},q.length>0&&C.createElement(Zo,{zIndex:Wi.label},C.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},q)),ee.length>0&&C.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},ee))}),out=C.forwardRef((t,e)=>{var{axisLine:n,width:r,height:s,className:i,hide:a,ticks:l,axisType:c}=t,u=Xct(t,Kct),[d,f]=C.useState(""),[A,m]=C.useState(""),g=C.useRef(null);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return Gct({ticks:g.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=C.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=v;var w=v[0];if(w){var B=window.getComputedStyle(w),k=B.fontSize,j=B.letterSpacing;(k!==d||j!==A)&&(f(k),m(j))}}},[d,A]);return a||r!=null&&r<=0||s!=null&&s<=0?null:C.createElement(Zo,{zIndex:t.zIndex},C.createElement(Ds,{className:yr("recharts-cartesian-axis",i)},C.createElement(tut,{x:t.x,y:t.y,width:r,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ci(t)}),C.createElement(aut,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),C.createElement(bit,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},C.createElement(Eit,{label:t.label,labelRef:t.labelRef}),t.children)))}),yU=C.forwardRef((t,e)=>{var n=ki(t,SA);return C.createElement(out,C0({},n,{ref:e}))});yU.displayName="CartesianAxis";var lut=["x1","y1","x2","y2","key"],cut=["offset"],uut=["xAxisId","yAxisId"],dut=["xAxisId","yAxisId"];function qK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function El(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qK(Object(n),!0).forEach(function(r){fut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fut(t,e,n){return(e=hut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hut(t){var e=Aut(t,"string");return typeof e=="symbol"?e:e+""}function Aut(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Og.apply(null,arguments)}function Aj(t,e){if(t==null)return{};var n,r,s=put(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function put(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mut=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:a,ry:l}=t;return C.createElement("rect",{x:r,y:s,ry:l,width:i,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Vde(t){var{option:e,lineItemProps:n}=t,r;if(C.isValidElement(e))r=C.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var s,{x1:i,y1:a,x2:l,y2:c,key:u}=n,d=Aj(n,lut),f=(s=Ci(d))!==null&&s!==void 0?s:{},{offset:A}=f,m=Aj(f,cut);r=C.createElement("line",Og({},m,{x1:i,y1:a,x2:l,y2:c,fill:"none",key:u}))}return r}function gut(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,l=Aj(t,uut),c=s.map((u,d)=>{var f=El(El({},l),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(d),index:d});return C.createElement(Vde,{key:"line-".concat(d),option:r,lineItemProps:f})});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function yut(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,l=Aj(t,dut),c=s.map((u,d)=>{var f=El(El({},l),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(d),index:d});return C.createElement(Vde,{option:r,lineItemProps:f,key:"line-".concat(d)})});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function xut(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:i,height:a,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,A)=>f-A);s!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=u[A+1],g=m==null,y=g?s+a-f:m-f;if(y<=0)return null;var x=A%e.length;return C.createElement("rect",{key:"react-".concat(A),y:f,x:r,height:y,width:i,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function but(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:a,height:l,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,A)=>f-A);s!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=u[A+1],g=m==null,y=g?s+a-f:m-f;if(y<=0)return null;var x=A%n.length;return C.createElement("rect",{key:"react-".concat(A),x:f,y:i,width:y,height:l,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var vut=(t,e)=>{var{xAxis:n,width:r,height:s,offset:i}=t;return Cle(gU(El(El(El({},SA),n),{},{ticks:kle(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,e)},wut=(t,e)=>{var{yAxis:n,width:r,height:s,offset:i}=t;return Cle(gU(El(El(El({},SA),n),{},{ticks:kle(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,e)},Sut={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Wi.grid};function CA(t){var e=zP(),n=UP(),r=Rle(),s=El(El({},ki(t,Sut)),{},{x:nn(t.x)?t.x:r.left,y:nn(t.y)?t.y:r.top,width:nn(t.width)?t.width:r.width,height:nn(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:a,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:A,verticalValues:m}=s,g=Xo(),y=Xt(D=>bG(D,"xAxis",i,g)),x=Xt(D=>bG(D,"yAxis",a,g));if(!wh(u)||!wh(d)||!nn(l)||!nn(c))return null;var v=s.verticalCoordinatesGenerator||vut,w=s.horizontalCoordinatesGenerator||wut,{horizontalPoints:B,verticalPoints:k}=s;if((!B||!B.length)&&typeof w=="function"){var j=A&&A.length,I=w({yAxis:x?El(El({},x),{},{ticks:j?A:x.ticks}):void 0,width:e??u,height:n??d,offset:r},j?!0:f);L4(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(B=I)}if((!k||!k.length)&&typeof v=="function"){var O=m&&m.length,F=v({xAxis:y?El(El({},y),{},{ticks:O?m:y.ticks}):void 0,width:e??u,height:n??d,offset:r},O?!0:f);L4(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(k=F)}return C.createElement(Zo,{zIndex:s.zIndex},C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(mut,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),C.createElement(xut,Og({},s,{horizontalPoints:B})),C.createElement(but,Og({},s,{verticalPoints:k})),C.createElement(gut,Og({},s,{offset:r,horizontalPoints:B,xAxis:y,yAxis:x})),C.createElement(yut,Og({},s,{offset:r,verticalPoints:k,xAxis:y,yAxis:x}))))}CA.displayName="CartesianGrid";var Cut={},qde=Hc({name:"errorBars",initialState:Cut,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:s}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?s:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:Wvt,replaceErrorBar:Vvt,removeErrorBar:qvt}=qde.actions,kut=qde.reducer,But=["children"];function jut(t,e){if(t==null)return{};var n,r,s=Eut(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Eut(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Iut={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Nut=C.createContext(Iut);function Tut(t){var{children:e}=t,n=jut(t,But);return C.createElement(Nut.Provider,{value:n},e)}function xU(t,e){var n,r,s=Xt(u=>ip(u,t)),i=Xt(u=>ap(u,e)),a=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:Ro.allowDataOverflow,l=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Oo.allowDataOverflow,c=a||l;return{needClip:c,needClipX:a,needClipY:l}}function Gde(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=AU(),{needClipX:i,needClipY:a,needClip:l}=xU(e,n);if(!l||!s)return null;var{x:c,y:u,width:d,height:f}=s;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:i?c:c-d/2,y:a?u:u-f/2,width:i?d:d*2,height:a?f:f*2}))}function _ut(t){var e=DA(t),n=3,r=2;if(e!=null){var{r:s,strokeWidth:i}=e,a=Number(s),l=Number(i);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(l)||l<0)&&(l=r),{r:a,strokeWidth:l}}return{r:n,strokeWidth:r}}var i6={exports:{}},a6={};var GK;function Rut(){if(GK)return a6;GK=1;var t=X1();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return a6.useSyncExternalStoreWithSelector=function(c,u,d,f,A){var m=s(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function x(j){if(!v){if(v=!0,w=j,j=f(j),A!==void 0&&g.hasValue){var I=g.value;if(A(I,j))return B=I}return B=j}if(I=B,n(w,j))return I;var O=f(j);return A!==void 0&&A(I,O)?(w=j,I):(w=j,B=O)}var v=!1,w,B,k=d===void 0?null:d;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,d,f,A]);var y=r(c,m[0],m[1]);return i(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},a6}var KK;function Out(){return KK||(KK=1,i6.exports=Rut()),i6.exports}Out();function Fut(t){t()}function Dut(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Fut(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var XK={notify(){},get:()=>[]};function Lut(t,e){let n,r=XK,s=0,i=!1;function a(y){d();const x=r.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){r.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){s++,n||(n=t.subscribe(c),r=Dut())}function f(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=XK)}function A(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const g={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:m,getListeners:()=>r};return g}var $ut=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Put=$ut(),zut=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Uut=zut(),Mut=()=>Put||Uut?C.useLayoutEffect:C.useEffect,Qut=Mut();function YK(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Hut(t,e){if(YK(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!YK(t[n[s]],e[n[s]]))return!1;return!0}var Wut=Symbol.for("react-redux-context"),Vut=typeof globalThis<"u"?globalThis:{};function qut(){if(!C.createContext)return{};const t=Vut[Wut]??=new Map;let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var Gut=qut();function Kut(t){const{children:e,context:n,serverState:r,store:s}=t,i=C.useMemo(()=>{const c=Lut(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),a=C.useMemo(()=>s.getState(),[s]);Qut(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||Gut;return C.createElement(l.Provider,{value:i},e)}var Xut=Kut,Yut=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Jut(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function lN(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Yut.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Hut(t[r],e[r]))return!1}else if(!Jut(t[r],e[r]))return!1;return!0}function Ih(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Lde}function Nh(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Lde}var Kde=(t,e,n)=>Im(t,"xAxis",Ih(t,e),n),Xde=(t,e,n)=>Em(t,"xAxis",Ih(t,e),n),Yde=(t,e,n)=>Im(t,"yAxis",Nh(t,e),n),Jde=(t,e,n)=>Em(t,"yAxis",Nh(t,e),n),Zut=Ve([Pr,Kde,Yde,Xde,Jde],(t,e,n,r,s)=>kf(t,"xAxis")?jm(e,r,!1):jm(n,s,!1)),edt=(t,e)=>e,Zde=Ve([VI,edt],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),efe=t=>{var e=Pr(t),n=kf(e,"xAxis");return n?"yAxis":"xAxis"},tdt=(t,e)=>{var n=efe(t);return n==="yAxis"?Nh(t,e):Ih(t,e)},ndt=(t,e,n)=>aj(t,efe(t),tdt(t,e),n),rdt=Ve([Zde,ndt],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,s=MI(t);if(!(r==null||s==null)){var i=(n=e[r])===null||n===void 0?void 0:n.stackedData,a=i?.find(l=>l.key===s);if(a!=null)return a.map(l=>[l[0],l[1]])}}}),sdt=Ve([Pr,Kde,Yde,Xde,Jde,rdt,Dce,Zut,Zde,ptt],(t,e,n,r,s,i,a,l,c,u)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:A}=a;if(!(c==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||s==null||r.length===0||s.length===0||l==null)){var{data:m}=c,g;if(m&&m.length>0?g=m:g=d?.slice(f,A+1),g!=null)return Sdt({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataStartIndex:f,areaSettings:c,stackedData:i,displayedData:g,chartBaseValue:u,bandSize:l})}}),idt=["id"],adt=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qg.apply(null,arguments)}function tfe(t,e){if(t==null)return{};var n,r,s=odt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function odt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function l1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JK(Object(n),!0).forEach(function(r){ldt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ldt(t,e,n){return(e=cdt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cdt(t){var e=udt(t,"string");return typeof e=="symbol"?e:e+""}function udt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pj(t,e){return t&&t!=="none"?t:e}var ddt=t=>{var{dataKey:e,name:n,stroke:r,fill:s,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:pj(r,s),value:Hm(n,e),payload:t}]},fdt=C.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:l,unit:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n,getPosition:jh,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:Hm(a,e),hide:l,type:u,color:pj(r,i),unit:c,graphicalItemId:d}};return C.createElement(iN,{tooltipEntrySettings:f})});function hdt(t){var{clipPathId:e,points:n,props:r}=t,{needClip:s,dot:i,dataKey:a}=r,l=Ci(r);return C.createElement(Dde,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:l,needClip:s,clipPathId:e})}function Adt(t){var{showLabels:e,children:n,points:r}=t,s=r.map(i=>{var a,l,c={x:(a=i.x)!==null&&a!==void 0?a:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return l1(l1({},c),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return C.createElement(Zz,{value:e?s:void 0},n)}function ZK(t){var{points:e,baseLine:n,needClip:r,clipPathId:s,props:i}=t,{layout:a,type:l,stroke:c,connectNulls:u,isRange:d}=i,{id:f}=i,A=tfe(i,idt),m=Ci(A),g=Ya(A);return C.createElement(C.Fragment,null,e?.length>1&&C.createElement(Ds,{clipPath:r?"url(#clipPath-".concat(s,")"):void 0},C.createElement(g1,qg({},g,{id:f,points:e,connectNulls:u,type:l,baseLine:n,layout:a,stroke:"none",className:"recharts-area-area"})),c!=="none"&&C.createElement(g1,qg({},m,{className:"recharts-area-curve",layout:a,type:l,connectNulls:u,fill:"none",points:e})),c!=="none"&&d&&C.createElement(g1,qg({},m,{className:"recharts-area-curve",layout:a,type:l,connectNulls:u,fill:"none",points:n}))),C.createElement(hdt,{points:e,props:A,clipPathId:s}))}function pdt(t){var e,n,{alpha:r,baseLine:s,points:i,strokeWidth:a}=t,l=(e=i[0])===null||e===void 0?void 0:e.y,c=(n=i[i.length-1])===null||n===void 0?void 0:n.y;if(!br(l)||!br(c))return null;var u=r*Math.abs(l-c),d=Math.max(...i.map(f=>f.x||0));return nn(s)?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(...s.map(f=>f.x||0),d)),nn(d)?C.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}function mdt(t){var e,n,{alpha:r,baseLine:s,points:i,strokeWidth:a}=t,l=(e=i[0])===null||e===void 0?void 0:e.x,c=(n=i[i.length-1])===null||n===void 0?void 0:n.x;if(!br(l)||!br(c))return null;var u=r*Math.abs(l-c),d=Math.max(...i.map(f=>f.y||0));return nn(s)?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(...s.map(f=>f.y||0),d)),nn(d)?C.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}function gdt(t){var{alpha:e,layout:n,points:r,baseLine:s,strokeWidth:i}=t;return n==="vertical"?C.createElement(pdt,{alpha:e,points:r,baseLine:s,strokeWidth:i}):C.createElement(mdt,{alpha:e,points:r,baseLine:s,strokeWidth:i})}function ydt(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:i}=t,{points:a,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:A,onAnimationEnd:m}=r,g=C.useMemo(()=>({points:a,baseLine:l}),[a,l]),y=mb(g,"recharts-area-"),x=MP(),[v,w]=C.useState(!1),B=!v,k=C.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),j=C.useCallback(()=>{typeof A=="function"&&A(),w(!0)},[A]);if(x==null)return null;var I=s.current,O=i.current;return C.createElement(Adt,{showLabels:B,points:a},r.children,C.createElement(pb,{animationId:y,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:k,onAnimationStart:j,key:y},F=>{if(I){var D=I.length/a.length,T=F===1?a:a.map((P,z)=>{var U=Math.floor(z*D);if(I[U]){var ee=I[U];return l1(l1({},P),{},{x:Ts(ee.x,P.x,F),y:Ts(ee.y,P.y,F)})}return P}),N;return nn(l)?N=Ts(O,l,F):Xi(l)||pf(l)?N=Ts(O,0,F):N=l.map((P,z)=>{var U=Math.floor(z*D);if(Array.isArray(O)&&O[U]){var ee=O[U];return l1(l1({},P),{},{x:Ts(ee.x,P.x,F),y:Ts(ee.y,P.y,F)})}return P}),F>0&&(s.current=T,i.current=N),C.createElement(ZK,{points:T,baseLine:N,needClip:e,clipPathId:n,props:r})}return F>0&&(s.current=a,i.current=l),C.createElement(Ds,null,c&&C.createElement("defs",null,C.createElement("clipPath",{id:"animationClipPath-".concat(n)},C.createElement(gdt,{alpha:F,points:a,baseLine:l,layout:x,strokeWidth:r.strokeWidth}))),C.createElement(Ds,{clipPath:"url(#animationClipPath-".concat(n,")")},C.createElement(ZK,{points:a,baseLine:l,needClip:e,clipPathId:n,props:r})))}),C.createElement(eN,{label:r.label}))}function xdt(t){var{needClip:e,clipPathId:n,props:r}=t,s=C.useRef(null),i=C.useRef();return C.createElement(ydt,{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:i})}class bdt extends C.PureComponent{render(){var{hide:e,dot:n,points:r,className:s,top:i,left:a,needClip:l,xAxisId:c,yAxisId:u,width:d,height:f,id:A,baseLine:m,zIndex:g}=this.props;if(e)return null;var y=yr("recharts-area",s),x=A,{r:v,strokeWidth:w}=_ut(n),B=Ide(n),k=v*2+w,j=l?"url(#clipPath-".concat(B?"":"dots-").concat(x,")"):void 0;return C.createElement(Zo,{zIndex:g},C.createElement(Ds,{className:y},l&&C.createElement("defs",null,C.createElement(Gde,{clipPathId:x,xAxisId:c,yAxisId:u}),!B&&C.createElement("clipPath",{id:"clipPath-dots-".concat(x)},C.createElement("rect",{x:a-k/2,y:i-k/2,width:d+k,height:f+k}))),C.createElement(xdt,{needClip:l,clipPathId:x,props:this.props})),C.createElement(o8,{points:r,mainColor:pj(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(m)&&C.createElement(o8,{points:m,mainColor:pj(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var nfe={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Wi.area};function vdt(t){var e,n=ki(t,nfe),{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:f,isAnimationActive:A,legendType:m,stroke:g,xAxisId:y,yAxisId:x}=n,v=tfe(n,adt),w=H0(),B=Yue(),{needClip:k}=xU(y,x),j=Xo(),{points:I,isRange:O,baseLine:F}=(e=Xt(U=>sdt(U,t.id,j)))!==null&&e!==void 0?e:{},D=AU();if(w!=="horizontal"&&w!=="vertical"||D==null||B!=="AreaChart"&&B!=="ComposedChart")return null;var{height:T,width:N,x:P,y:z}=D;return!I||!I.length?null:C.createElement(bdt,qg({},v,{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:a,baseLine:F,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:T,hide:f,layout:w,isAnimationActive:A==="auto"?!xS.isSsr:A,isRange:O,legendType:m,needClip:k,points:I,stroke:g,width:N,left:P,top:z,xAxisId:y,yAxisId:x}))}var wdt=(t,e,n,r,s)=>{var i=n??e;if(nn(i))return i;var a=t==="horizontal"?s:r,l=a.scale.domain();if(a.type==="number"){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return i==="dataMin"?u:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Sdt(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:s,layout:i,chartBaseValue:a,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:A,bandSize:m}=t,g=s&&s.length,y=wdt(i,a,n,l,c),x=i==="horizontal",v=!1,w=u.map((k,j)=>{var I,O,F,D;if(g)D=s[d+j];else{var T=Cs(k,r);Array.isArray(T)?(D=T,v=!0):D=[y,T]}var N=(I=(O=D)===null||O===void 0?void 0:O[1])!==null&&I!==void 0?I:null,P=N==null||g&&!e&&Cs(k,r)==null;if(x){var z;return{x:gV({axis:l,ticks:f,bandSize:m,entry:k,index:j}),y:P?null:(z=c.scale.map(N))!==null&&z!==void 0?z:null,value:D,payload:k}}return{x:P?null:(F=l.scale.map(N))!==null&&F!==void 0?F:null,y:gV({axis:c,ticks:A,bandSize:m,entry:k,index:j}),value:D,payload:k}}),B;return g||v?B=w.map(k=>{var j,I=Array.isArray(k.value)?k.value[0]:null;if(x){var O;return{x:k.x,y:I!=null&&k.y!=null&&(O=c.scale.map(I))!==null&&O!==void 0?O:null,payload:k.payload}}return{x:I!=null&&(j=l.scale.map(I))!==null&&j!==void 0?j:null,y:k.y,payload:k.payload}}):B=x?c.scale.map(y):l.scale.map(y),{points:w,baseLine:B??0,isRange:v}}function Cdt(t){var e=ki(t,nfe),n=Xo();return C.createElement(aN,{id:e.id,type:"area"},r=>C.createElement(C.Fragment,null,C.createElement(Tde,{legendPayload:ddt(e)}),C.createElement(fdt,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),C.createElement(Ode,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Ble(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),C.createElement(vdt,qg({},e,{id:r}))))}var cN=C.memo(Cdt,lN);cN.displayName="Area";var kdt="Invariant failed";function Bdt(t,e){throw new Error(kdt)}function l8(){return l8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l8.apply(null,arguments)}function mj(t){return C.createElement(Nde,l8({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var jdt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,s)=>{if(nn(e))return e;var i=nn(r)||Xi(r);return i?e(r,s):(i||Bdt(),n)}},Edt=(t,e,n)=>n,Idt=(t,e)=>e,FS=Ve([VI,Idt],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Ndt=Ve([FS],t=>t?.maxBarSize),Tdt=(t,e,n,r)=>r,_dt=Ve([Pr,VI,Ih,Nh,Edt],(t,e,n,r,s)=>e.filter(i=>t==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Rdt=(t,e,n)=>{var r=Pr(t),s=Ih(t,e),i=Nh(t,e);if(!(s==null||i==null))return r==="horizontal"?aj(t,"yAxis",i,n):aj(t,"xAxis",s,n)},Odt=(t,e)=>{var n=Pr(t),r=Ih(t,e),s=Nh(t,e);if(!(r==null||s==null))return n==="horizontal"?xG(t,"xAxis",r):xG(t,"yAxis",s)},Fdt=Ve([_dt,Att,Odt],wct),Ddt=(t,e,n)=>{var r,s,i=FS(t,e);if(i==null)return 0;var a=Ih(t,e),l=Nh(t,e);if(a==null||l==null)return 0;var c=Pr(t),u=Gce(t),{maxBarSize:d}=i,f=Xi(d)?u:d,A,m;return c==="horizontal"?(A=Im(t,"xAxis",a,n),m=Em(t,"xAxis",a,n)):(A=Im(t,"yAxis",l,n),m=Em(t,"yAxis",l,n)),(r=(s=jm(A,m,!0))!==null&&s!==void 0?s:f)!==null&&r!==void 0?r:0},rfe=(t,e,n)=>{var r=Pr(t),s=Ih(t,e),i=Nh(t,e);if(!(s==null||i==null)){var a,l;return r==="horizontal"?(a=Im(t,"xAxis",s,n),l=Em(t,"xAxis",s,n)):(a=Im(t,"yAxis",i,n),l=Em(t,"yAxis",i,n)),jm(a,l)}},Ldt=Ve([Fdt,Gce,htt,Kce,Ddt,rfe,Ndt],jct),$dt=(t,e,n)=>{var r=Ih(t,e);if(r!=null)return Im(t,"xAxis",r,n)},Pdt=(t,e,n)=>{var r=Nh(t,e);if(r!=null)return Im(t,"yAxis",r,n)},zdt=(t,e,n)=>{var r=Ih(t,e);if(r!=null)return Em(t,"xAxis",r,n)},Udt=(t,e,n)=>{var r=Nh(t,e);if(r!=null)return Em(t,"yAxis",r,n)},Mdt=Ve([Ldt,FS],Ict),Qdt=Ve([Rdt,FS],Ect),Hdt=Ve([vo,LP,$dt,Pdt,zdt,Udt,Mdt,Pr,Dce,rfe,Qdt,FS,Tdt],(t,e,n,r,s,i,a,l,c,u,d,f,A)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(f==null||a==null||e==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||s==null||i==null||u==null)){var{data:x}=f,v;if(x!=null&&x.length>0?v=x:v=m?.slice(g,y+1),v!=null)return yft({layout:l,barSettings:f,pos:a,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,stackedData:d,displayedData:v,offset:t,cells:A,dataStartIndex:g})}}),Wdt=["index"];function c8(){return c8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c8.apply(null,arguments)}function Vdt(t,e){if(t==null)return{};var n,r,s=qdt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function qdt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sfe=C.createContext(void 0),Gdt=t=>{var e=C.useContext(sfe);if(e!=null)return e.stackId;if(t!=null)return Ble(t)},Kdt=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Xdt=t=>{var e=C.useContext(sfe);if(e!=null){var{stackId:n}=e;return"url(#".concat(Kdt(n,t),")")}},ife=t=>{var{index:e}=t,n=Vdt(t,Wdt),r=Xdt(e);return C.createElement(Ds,c8({className:"recharts-bar-stack-layer",clipPath:r},n))},Ydt=["onMouseEnter","onMouseLeave","onClick"],Jdt=["value","background","tooltipPosition"],Zdt=["id"],eft=["onMouseEnter","onClick","onMouseLeave"];function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QA.apply(null,arguments)}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(r){tft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tft(t,e,n){return(e=nft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nft(t){var e=rft(t,"string");return typeof e=="symbol"?e:e+""}function rft(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gj(t,e){if(t==null)return{};var n,r,s=sft(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function sft(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ift=t=>{var{dataKey:e,name:n,fill:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:Hm(n,e),payload:t}]},aft=C.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:s,name:i,hide:a,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,getPosition:jh,settings:{stroke:n,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:Hm(i,e),hide:a,type:c,color:s,unit:l,graphicalItemId:u}};return C.createElement(iN,{tooltipEntrySettings:d})});function oft(t){var e=Xt(Nm),{data:n,dataKey:r,background:s,allOtherBarProps:i}=t,{onMouseEnter:a,onMouseLeave:l,onClick:c}=i,u=gj(i,Ydt),d=dU(a,r,i.id),f=fU(l),A=hU(c,r,i.id);if(!s||n==null)return null;var m=DA(s);return C.createElement(Zo,{zIndex:Nct(s,Wi.barBackground)},n.map((g,y)=>{var{value:x,background:v,tooltipPosition:w}=g,B=gj(g,Jdt);if(!v)return null;var k=d(g,y),j=f(g,y),I=A(g,y),O=Vl(Vl(Vl(Vl(Vl({option:s,isActive:String(y)===e},B),{},{fill:"#eee"},v),m),Q0(u,g,y)),{},{onMouseEnter:k,onMouseLeave:j,onClick:I,dataKey:r,index:y,className:"recharts-bar-background-rectangle"});return C.createElement(mj,QA({key:"background-bar-".concat(y)},O))}))}function lft(t){var{showLabels:e,children:n,rects:r}=t,s=r?.map(i=>{var a={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Vl(Vl({},a),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:a,fill:i.fill})});return C.createElement(Zz,{value:e?s:void 0},n)}function cft(t){var{shape:e,activeBar:n,baseProps:r,entry:s,index:i,dataKey:a}=t,l=Xt(Nm),c=Xt(qz),u=n&&String(i)===l&&(c==null||a===c),d=u?n:e;return u?C.createElement(Zo,{zIndex:Wi.activeBar},C.createElement(ife,{index:i},C.createElement(mj,QA({},r,{name:String(r.name)},s,{isActive:u,option:d,index:i,dataKey:a})))):C.createElement(mj,QA({},r,{name:String(r.name)},s,{isActive:u,option:d,index:i,dataKey:a}))}function uft(t){var{shape:e,baseProps:n,entry:r,index:s,dataKey:i}=t;return C.createElement(mj,QA({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:s,dataKey:i}))}function dft(t){var e,{data:n,props:r}=t,s=(e=Ci(r))!==null&&e!==void 0?e:{},{id:i}=s,a=gj(s,Zdt),{shape:l,dataKey:c,activeBar:u}=r,{onMouseEnter:d,onClick:f,onMouseLeave:A}=r,m=gj(r,eft),g=dU(d,c,i),y=fU(A),x=hU(f,c,i);return n?C.createElement(C.Fragment,null,n.map((v,w)=>C.createElement(ife,QA({index:w,key:"rectangle-".concat(v?.x,"-").concat(v?.y,"-").concat(v?.value,"-").concat(w),className:"recharts-bar-rectangle"},Q0(m,v,w),{onMouseEnter:g(v,w),onMouseLeave:y(v,w),onClick:x(v,w)}),u?C.createElement(cft,{shape:l,activeBar:u,baseProps:a,entry:v,index:w,dataKey:c}):C.createElement(uft,{shape:l,baseProps:a,entry:v,index:w,dataKey:c})))):null}function fft(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:s,isAnimationActive:i,animationBegin:a,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=n.current,A=mb(e,"recharts-bar-"),[m,g]=C.useState(!1),y=!m,x=C.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=C.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return C.createElement(lft,{showLabels:y,rects:r},C.createElement(pb,{animationId:A,begin:a,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},w=>{var B=w===1?r:r?.map((k,j)=>{var I=f&&f[j];if(I)return Vl(Vl({},k),{},{x:Ts(I.x,k.x,w),y:Ts(I.y,k.y,w),width:Ts(I.width,k.width,w),height:Ts(I.height,k.height,w)});if(s==="horizontal"){var O=Ts(0,k.height,w),F=Ts(k.stackedBarStart,k.y,w);return Vl(Vl({},k),{},{y:F,height:O})}var D=Ts(0,k.width,w),T=Ts(k.stackedBarStart,k.x,w);return Vl(Vl({},k),{},{width:D,x:T})});return w>0&&(n.current=B??null),B==null?null:C.createElement(Ds,null,C.createElement(dft,{props:e,data:B}))}),C.createElement(eN,{label:e.label}),e.children)}function hft(t){var e=C.useRef(null);return C.createElement(fft,{previousRectanglesRef:e,props:t})}var afe=0,Aft=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Cs(t,e)}};class pft extends C.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:s,xAxisId:i,yAxisId:a,needClip:l,background:c,id:u}=this.props;if(e||n==null)return null;var d=yr("recharts-bar",s),f=u;return C.createElement(Ds,{className:d,id:u},l&&C.createElement("defs",null,C.createElement(Gde,{clipPathId:f,xAxisId:i,yAxisId:a})),C.createElement(Ds,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},C.createElement(oft,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),C.createElement(hft,this.props)))}}var mft={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:afe,xAxisId:0,yAxisId:0,zIndex:Wi.bar};function gft(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=xU(e,n),A=H0(),m=Xo(),g=uU(t.children,gf),y=Xt(w=>Hdt(w,t.id,m,g));if(A!=="vertical"&&A!=="horizontal")return null;var x,v=y?.[0];return v==null||v.height==null||v.width==null?x=0:x=A==="vertical"?v.height/2:v.width/2,C.createElement(Tut,{xAxisId:e,yAxisId:n,data:y,dataPointFormatter:Aft,errorBarOffset:x},C.createElement(pft,QA({},t,{layout:A,needClip:f,data:y,xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function yft(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:s,bandSize:i,xAxis:a,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:m,parentViewBox:g,dataStartIndex:y}=t,x=e==="horizontal"?l:a,v=d?x.scale.domain():null,w=ZKe({numericAxis:x}),B=x.scale.map(w);return f.map((k,j)=>{var I,O,F,D,T,N;if(d){var P=d[j+y];if(P==null)return null;I=GKe(P,v)}else I=Cs(k,n),Array.isArray(I)||(I=[w,I]);var z=jdt(r,afe)(I[1],j);if(e==="horizontal"){var U,ee=l.scale.map(I[0]),q=l.scale.map(I[1]);if(ee==null||q==null)return null;O=yV({axis:a,ticks:c,bandSize:i,offset:s.offset,entry:k,index:j}),F=(U=q??ee)!==null&&U!==void 0?U:void 0,D=s.size;var Z=ee-q;if(T=pf(Z)?0:Z,N={x:O,y:A.top,width:D,height:A.height},Math.abs(z)>0&&Math.abs(T)<Math.abs(z)){var G=Uo(T||z)*(Math.abs(z)-Math.abs(T));F-=G,T+=G}}else{var ne=a.scale.map(I[0]),K=a.scale.map(I[1]);if(ne==null||K==null)return null;if(O=ne,F=yV({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:k,index:j}),D=K-ne,T=s.size,N={x:A.left,y:F,width:A.width,height:T},Math.abs(z)>0&&Math.abs(D)<Math.abs(z)){var H=Uo(D||z)*(Math.abs(z)-Math.abs(D));D+=H}}if(O==null||F==null||D==null||T==null)return null;var Q=Vl(Vl({},k),{},{stackedBarStart:B,x:O,y:F,width:D,height:T,value:d?I:I[1],payload:k,background:N,tooltipPosition:{x:O+D/2,y:F+T/2},parentViewBox:g},m&&m[j]&&m[j].props);return Q}).filter(Boolean)}function xft(t){var e=ki(t,mft),n=Gdt(e.stackId),r=Xo();return C.createElement(aN,{id:e.id,type:"bar"},s=>C.createElement(C.Fragment,null,C.createElement(Tde,{legendPayload:ift(e)}),C.createElement(aft,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:s}),C.createElement(Ode,{type:"bar",id:s,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),C.createElement(Zo,{zIndex:e.zIndex},C.createElement(gft,QA({},e,{id:s})))))}var cm=C.memo(xft,lN);cm.displayName="Bar";var bft=["domain","range"],vft=["domain","range"];function tX(t,e){if(t==null)return{};var n,r,s=wft(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function wft(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nX(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ofe(t,e){if(t===e)return!0;var{domain:n,range:r}=t,s=tX(t,bft),{domain:i,range:a}=e,l=tX(e,vft);return!nX(n,i)||!nX(r,a)?!1:lN(s,l)}var Sft=["type"],Cft=["dangerouslySetInnerHTML","ticks","scale"],kft=["id","scale"];function u8(){return u8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u8.apply(null,arguments)}function rX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rX(Object(n),!0).forEach(function(r){Bft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bft(t,e,n){return(e=jft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jft(t){var e=Eft(t,"string");return typeof e=="symbol"?e:e+""}function Eft(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d8(t,e){if(t==null)return{};var n,r,s=Ift(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ift(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Nft(t){var e=Gs(),n=C.useRef(null),r=MP(),{type:s}=t,i=d8(t,Sft),a=bb(r,"xAxis",s),l=C.useMemo(()=>{if(a!=null)return sX(sX({},i),{},{type:a})},[i,a]);return C.useLayoutEffect(()=>{l!=null&&(n.current===null?e(Tlt(l)):n.current!==l&&e(_lt({prev:n.current,next:l})),n.current=l)},[l,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(Rlt(n.current)),n.current=null)},[e]),null}var Tft=t=>{var{xAxisId:e,className:n}=t,r=Xt(LP),s=Xo(),i="xAxis",a=Xt(v=>jue(v,i,e,s)),l=Xt(v=>Sue(v,e)),c=Xt(v=>gnt(v,e)),u=Xt(v=>sue(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,m=d8(t,Cft),{id:g,scale:y}=u,x=d8(u,kft);return C.createElement(yU,u8({},m,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:yr("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:a,axisType:i}))},_ft={allowDataOverflow:Ro.allowDataOverflow,allowDecimals:Ro.allowDecimals,allowDuplicatedCategory:Ro.allowDuplicatedCategory,angle:Ro.angle,axisLine:SA.axisLine,height:Ro.height,hide:!1,includeHidden:Ro.includeHidden,interval:Ro.interval,label:!1,minTickGap:Ro.minTickGap,mirror:Ro.mirror,orientation:Ro.orientation,padding:Ro.padding,reversed:Ro.reversed,scale:Ro.scale,tick:Ro.tick,tickCount:Ro.tickCount,tickLine:SA.tickLine,tickSize:SA.tickSize,type:Ro.type,xAxisId:0},Rft=t=>{var e=ki(t,_ft);return C.createElement(C.Fragment,null,C.createElement(Nft,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),C.createElement(Tft,e))},fh=C.memo(Rft,ofe);fh.displayName="XAxis";var Oft=["type"],Fft=["dangerouslySetInnerHTML","ticks","scale"],Dft=["id","scale"];function f8(){return f8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f8.apply(null,arguments)}function iX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iX(Object(n),!0).forEach(function(r){Lft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lft(t,e,n){return(e=$ft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ft(t){var e=Pft(t,"string");return typeof e=="symbol"?e:e+""}function Pft(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h8(t,e){if(t==null)return{};var n,r,s=zft(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function zft(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Uft(t){var e=Gs(),n=C.useRef(null),r=MP(),{type:s}=t,i=h8(t,Oft),a=bb(r,"yAxis",s),l=C.useMemo(()=>{if(a!=null)return aX(aX({},i),{},{type:a})},[a,i]);return C.useLayoutEffect(()=>{l!=null&&(n.current===null?e(Olt(l)):n.current!==l&&e(Flt({prev:n.current,next:l})),n.current=l)},[l,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(Dlt(n.current)),n.current=null)},[e]),null}function Mft(t){var{yAxisId:e,className:n,width:r,label:s}=t,i=C.useRef(null),a=C.useRef(null),l=Xt(LP),c=Xo(),u=Gs(),d="yAxis",f=Xt(I=>Cue(I,e)),A=Xt(I=>xnt(I,e)),m=Xt(I=>jue(I,d,e,c)),g=Xt(I=>iue(I,e));if(C.useLayoutEffect(()=>{if(!(r!=="auto"||!f||Jz(s)||C.isValidElement(s)||g==null)){var I=i.current;if(I){var O=I.getCalculatedWidth();Math.round(f.width)!==Math.round(O)&&u(Llt({id:e,width:O}))}}},[m,f,u,s,e,r,g]),f==null||A==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:x,scale:v}=t,w=h8(t,Fft),{id:B,scale:k}=g,j=h8(g,Dft);return C.createElement(yU,f8({},w,j,{ref:i,labelRef:a,x:A.x,y:A.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:yr("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:m,axisType:d}))}var Qft={allowDataOverflow:Oo.allowDataOverflow,allowDecimals:Oo.allowDecimals,allowDuplicatedCategory:Oo.allowDuplicatedCategory,angle:Oo.angle,axisLine:SA.axisLine,hide:!1,includeHidden:Oo.includeHidden,interval:Oo.interval,label:!1,minTickGap:Oo.minTickGap,mirror:Oo.mirror,orientation:Oo.orientation,padding:Oo.padding,reversed:Oo.reversed,scale:Oo.scale,tick:Oo.tick,tickCount:Oo.tickCount,tickLine:SA.tickLine,tickSize:SA.tickSize,type:Oo.type,width:Oo.width,yAxisId:0},Hft=t=>{var e=ki(t,Qft);return C.createElement(C.Fragment,null,C.createElement(Uft,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),C.createElement(Mft,e))},hh=C.memo(Hft,ofe);hh.displayName="YAxis";var Wft=(t,e)=>e,bU=Ve([Wft,Pr,wb,Jo,Wue,op,_rt,vo],Prt),vU=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},lfe=hd("mouseClick"),cfe=pS();cfe.startListening({actionCreator:lfe,effect:(t,e)=>{var n=t.payload,r=bU(e.getState(),vU(n));r?.activeIndex!=null&&e.dispatch(Tnt({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var A8=hd("mouseMove"),ufe=pS(),gk=null;ufe.startListening({actionCreator:A8,effect:(t,e)=>{var n=t.payload;gk!==null&&cancelAnimationFrame(gk);var r=vU(n);gk=requestAnimationFrame(()=>{var s=e.getState(),i=Uz(s,s.tooltip.settings.shared);if(i==="axis"){var a=bU(s,r);a?.activeIndex!=null?e.dispatch(Due({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(Fue())}gk=null})}});function Vft(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var oX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},dfe=Hc({name:"rootProps",initialState:oX,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:oX.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),qft=dfe.reducer,{updateOptions:Gft}=dfe.actions,Kft=null,Xft={updatePolarOptions:(t,e)=>e.payload},ffe=Hc({name:"polarOptions",initialState:Kft,reducers:Xft}),{updatePolarOptions:Yft}=ffe.actions,Jft=ffe.reducer,hfe=hd("keyDown"),Afe=hd("focus"),wU=pS();wU.startListening({actionCreator:hfe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=Mz(s,jb(n),IS(n),_S(n)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var c=op(n);if(i==="Enter"){var u=lj(n,"axis","hover",String(s.index));e.dispatch(n8({active:!s.active,activeIndex:s.index,activeCoordinate:u}));return}var d=vnt(n),f=d==="left-to-right"?1:-1,A=i==="ArrowRight"?1:-1,m=l+A*f;if(!(c==null||m>=c.length||m<0)){var g=lj(n,"axis","hover",String(m));e.dispatch(n8({active:!0,activeIndex:m.toString(),activeCoordinate:g}))}}}}}});wU.startListening({actionCreator:Afe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",a=lj(n,"axis","hover",String(i));e.dispatch(n8({active:!0,activeIndex:i,activeCoordinate:a}))}}}});var qu=hd("externalEvent"),pfe=pS(),o6=new Map;pfe.startListening({actionCreator:qu,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var s=r.type,i=o6.get(s);i!==void 0&&cancelAnimationFrame(i);var a=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:grt(l),activeDataKey:qz(l),activeIndex:Nm(l),activeLabel:Gue(l),activeTooltipIndex:Nm(l),isTooltipActive:yrt(l)};n(c,r)}finally{o6.delete(s)}});o6.set(s,a)}}});var Zft=Ve([kb],t=>t.tooltipItemPayloads),eht=Ve([Zft,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(i=>i.settings.graphicalItemId===n);if(r!=null){var{getPosition:s}=r;if(s!=null)return s(e)}}}),mfe=hd("touchMove"),gfe=pS();gfe.startListening({actionCreator:mfe,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),s=Uz(r,r.tooltip.settings.shared);if(s==="axis"){var i=n.touches[0];if(i==null)return;var a=bU(r,vU({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(Due({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Ele),f=(l=u.getAttribute(Ile))!==null&&l!==void 0?l:void 0,A=Bb(r).find(y=>y.id===f);if(d==null||A==null||f==null)return;var{dataKey:m}=A,g=eht(r,d,f);e.dispatch(Oue({activeDataKey:m,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:f}))}}}});var tht=Koe({brush:Tct,cartesianAxis:$lt,chartData:mst,errorBars:kut,graphicalItems:qot,layout:QKe,legend:KXe,options:dst,polarAxis:Nat,polarOptions:Jft,referenceElements:Fct,rootProps:qft,tooltip:_nt,zIndex:Zrt}),nht=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return AKe({reducer:tht,preloadedState:e,middleware:r=>{var s;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([cfe.middleware,ufe.middleware,wU.middleware,pfe.middleware,gfe.middleware])},enhancers:r=>{var s=r;return typeof r=="function"&&(s=r()),s.concat(ule({type:"raf"}))},devTools:{serialize:{replacer:Vft},name:"recharts-".concat(n)}})};function yfe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=Xo(),i=C.useRef(null);if(s)return n;i.current==null&&(i.current=nht(e,r));var a=NP;return C.createElement(Xut,{context:a,store:i.current},n)}function rht(t){var{layout:e,margin:n}=t,r=Gs(),s=Xo();return C.useEffect(()=>{s||(r(zKe(e)),r(PKe(n)))},[r,s,e,n]),null}var xfe=C.memo(rht,lN);function bfe(t){var e=Gs();return C.useEffect(()=>{e(Gft(t))},[e,t]),null}function lX(t){var{zIndex:e,isPanorama:n}=t,r=C.useRef(null),s=Gs();return C.useLayoutEffect(()=>(r.current&&s(Yrt({zIndex:e,element:r.current,isPanorama:n})),()=>{s(Jrt({zIndex:e,isPanorama:n}))}),[s,e,n]),C.createElement("g",{tabIndex:-1,ref:r})}function cX(t){var{children:e,isPanorama:n}=t,r=Xt(Urt);if(!r||r.length===0)return e;var s=r.filter(a=>a<0),i=r.filter(a=>a>0);return C.createElement(C.Fragment,null,s.map(a=>C.createElement(lX,{key:a,zIndex:a,isPanorama:n})),e,i.map(a=>C.createElement(lX,{key:a,zIndex:a,isPanorama:n})))}var sht=["children"];function iht(t,e){if(t==null)return{};var n,r,s=aht(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function aht(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(null,arguments)}var oht={width:"100%",height:"100%",display:"block"},lht=C.forwardRef((t,e)=>{var n=zP(),r=UP(),s=Wle();if(!wh(n)||!wh(r))return null;var{children:i,otherAttributes:a,title:l,desc:c}=t,u,d;return a!=null&&(typeof a.tabIndex=="number"?u=a.tabIndex:u=s?0:void 0,typeof a.role=="string"?d=a.role:d=s?"application":void 0),C.createElement(yP,yj({},a,{title:l,desc:c,role:d,tabIndex:u,width:n,height:r,style:oht,ref:e}),i)}),cht=t=>{var{children:e}=t,n=Xt(II);if(!n)return null;var{width:r,height:s,y:i,x:a}=n;return C.createElement(yP,{width:r,height:s,x:a,y:i},e)},uX=C.forwardRef((t,e)=>{var{children:n}=t,r=iht(t,sht),s=Xo();return s?C.createElement(cht,null,C.createElement(cX,{isPanorama:!0},n)):C.createElement(lht,yj({ref:e},r),C.createElement(cX,{isPanorama:!1},n))});function uht(){var t=Gs(),[e,n]=C.useState(null),r=Xt(iXe);return C.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;br(i)&&i!==r&&t(MKe(i))}},[e,t,r]),n}function dX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dX(Object(n),!0).forEach(function(r){fht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fht(t,e,n){return(e=hht(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hht(t){var e=Aht(t,"string");return typeof e=="symbol"?e:e+""}function Aht(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(null,arguments)}var pht=()=>(kst(),null);function xj(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var mht=C.forwardRef((t,e)=>{var n,r,s=C.useRef(null),[i,a]=C.useState({containerWidth:xj((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:xj((r=t.style)===null||r===void 0?void 0:r.height)}),l=C.useCallback((u,d)=>{a(f=>{var A=Math.round(u),m=Math.round(d);return f.containerWidth===A&&f.containerHeight===m?f:{containerWidth:A,containerHeight:m}})},[]),c=C.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=g=>{var y=g[0];if(y!=null){var{width:x,height:v}=y.contentRect;l(x,v)}},m=new ResizeObserver(A);m.observe(u),s.current=m}},[e,l]);return C.useEffect(()=>()=>{var u=s.current;u?.disconnect()},[l]),C.createElement(C.Fragment,null,C.createElement(gS,{width:i.containerWidth,height:i.containerHeight}),C.createElement("div",um({ref:c},t)))}),ght=C.forwardRef((t,e)=>{var{width:n,height:r}=t,[s,i]=C.useState({containerWidth:xj(n),containerHeight:xj(r)}),a=C.useCallback((c,u)=>{i(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=C.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();a(u,d)}},[e,a]);return C.createElement(C.Fragment,null,C.createElement(gS,{width:s.containerWidth,height:s.containerHeight}),C.createElement("div",um({ref:l},t)))}),yht=C.forwardRef((t,e)=>{var{width:n,height:r}=t;return C.createElement(C.Fragment,null,C.createElement(gS,{width:n,height:r}),C.createElement("div",um({ref:e},t)))}),xht=C.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?C.createElement(ght,um({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?C.createElement(yht,um({},t,{width:n,height:r,ref:e})):C.createElement(C.Fragment,null,C.createElement(gS,{width:n,height:r}),C.createElement("div",um({ref:e},t)))});function bht(t){return t?mht:xht}var vht=C.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:x,width:v,responsive:w,dispatchTouchEvents:B=!0}=t,k=C.useRef(null),j=Gs(),[I,O]=C.useState(null),[F,D]=C.useState(null),T=uht(),N=$P(),P=N?.width>0?N.width:v,z=N?.height>0?N.height:s,U=C.useCallback(me=>{T(me),typeof e=="function"&&e(me),O(me),D(me),me!=null&&(k.current=me)},[T,e,O,D]),ee=C.useCallback(me=>{j(lfe(me)),j(qu({handler:i,reactEvent:me}))},[j,i]),q=C.useCallback(me=>{j(A8(me)),j(qu({handler:u,reactEvent:me}))},[j,u]),Z=C.useCallback(me=>{j(Fue()),j(qu({handler:d,reactEvent:me}))},[j,d]),G=C.useCallback(me=>{j(A8(me)),j(qu({handler:f,reactEvent:me}))},[j,f]),ne=C.useCallback(()=>{j(Afe())},[j]),K=C.useCallback(me=>{j(hfe(me.key))},[j]),H=C.useCallback(me=>{j(qu({handler:a,reactEvent:me}))},[j,a]),Q=C.useCallback(me=>{j(qu({handler:l,reactEvent:me}))},[j,l]),X=C.useCallback(me=>{j(qu({handler:c,reactEvent:me}))},[j,c]),re=C.useCallback(me=>{j(qu({handler:A,reactEvent:me}))},[j,A]),le=C.useCallback(me=>{j(qu({handler:y,reactEvent:me}))},[j,y]),Ae=C.useCallback(me=>{B&&j(mfe(me)),j(qu({handler:g,reactEvent:me}))},[j,B,g]),xe=C.useCallback(me=>{j(qu({handler:m,reactEvent:me}))},[j,m]),Be=bht(w);return C.createElement(nde.Provider,{value:I},C.createElement(hoe.Provider,{value:F},C.createElement(Be,{width:P??x?.width,height:z??x?.height,className:yr("recharts-wrapper",r),style:dht({position:"relative",cursor:"default",width:P,height:z},x),onClick:ee,onContextMenu:H,onDoubleClick:Q,onFocus:ne,onKeyDown:K,onMouseDown:X,onMouseEnter:q,onMouseLeave:Z,onMouseMove:G,onMouseUp:re,onTouchEnd:xe,onTouchMove:Ae,onTouchStart:le,ref:U},C.createElement(pht,null),n)))}),wht=["width","height","responsive","children","className","style","compact","title","desc"];function Sht(t,e){if(t==null)return{};var n,r,s=Cht(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Cht(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vfe=C.forwardRef((t,e)=>{var{width:n,height:r,responsive:s,children:i,className:a,style:l,compact:c,title:u,desc:d}=t,f=Sht(t,wht),A=Ci(f);return c?C.createElement(C.Fragment,null,C.createElement(gS,{width:n,height:r}),C.createElement(uX,{otherAttributes:A,title:u,desc:d},i)):C.createElement(vht,{className:a,style:l,width:n,height:r,responsive:s??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement(uX,{otherAttributes:A,title:u,desc:d,ref:e},C.createElement(Lct,null,i)))});function p8(){return p8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p8.apply(null,arguments)}var kht={top:5,right:5,bottom:5,left:5},Bht={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:kht,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},wfe=C.forwardRef(function(e,n){var r,s=ki(e.categoricalChartProps,Bht),{chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return C.createElement(yfe,{preloadedState:{options:d},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:i},C.createElement(Mde,{chartData:u.data}),C.createElement(xfe,{layout:s.layout,margin:s.margin}),C.createElement(bfe,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),C.createElement(vfe,p8({},s,{ref:n})))}),jht=["axis","item"],G1=C.forwardRef((t,e)=>C.createElement(wfe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jht,tooltipPayloadSearcher:ZI,categoricalChartProps:t,ref:e}));function Eht(t){var e=Gs();return C.useEffect(()=>{e(Yft(t))},[e,t]),null}var Iht=["layout"];function m8(){return m8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m8.apply(null,arguments)}function Nht(t,e){if(t==null)return{};var n,r,s=Tht(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Tht(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _ht={top:5,right:5,bottom:5,left:5},SU={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:_ht,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Sfe=C.forwardRef(function(e,n){var r,s=ki(e.categoricalChartProps,SU),{layout:i}=s,a=Nht(s,Iht),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return C.createElement(yfe,{preloadedState:{options:f},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:l},C.createElement(Mde,{chartData:s.data}),C.createElement(xfe,{layout:i,margin:s.margin}),C.createElement(bfe,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),C.createElement(Eht,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),C.createElement(vfe,m8({},a,{ref:n})))});function fX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fX(Object(n),!0).forEach(function(r){Rht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rht(t,e,n){return(e=Oht(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oht(t){var e=Fht(t,"string");return typeof e=="symbol"?e:e+""}function Fht(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dht=["item"],Lht=hX(hX({},SU),{},{layout:"centric",startAngle:0,endAngle:360}),uN=C.forwardRef((t,e)=>{var n=ki(t,Lht);return C.createElement(Sfe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Dht,tooltipPayloadSearcher:ZI,categoricalChartProps:n,ref:e})});function AX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AX(Object(n),!0).forEach(function(r){$ht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ht(t,e,n){return(e=Pht(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pht(t){var e=zht(t,"string");return typeof e=="symbol"?e:e+""}function zht(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uht=["axis"],Mht=pX(pX({},SU),{},{layout:"centric",startAngle:90,endAngle:-270}),Cfe=C.forwardRef((t,e)=>{var n=ki(t,Mht);return C.createElement(Sfe,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Uht,tooltipPayloadSearcher:ZI,categoricalChartProps:n,ref:e})}),Qht=["axis"],CU=C.forwardRef((t,e)=>C.createElement(wfe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Qht,tooltipPayloadSearcher:ZI,categoricalChartProps:t,ref:e}));const Hht="http://localhost:8000";function kfe({attemptId:t,onBack:e,initialData:n=null,isEmbedded:r=!1}){const[s,i]=C.useState(n),[a,l]=C.useState(!n),[c,u]=C.useState("");C.useEffect(()=>{!n&&t&&d()},[t,n]);const d=async()=>{try{l(!0);const{data:w}=await Xe.get(`${Hht}/api/skill-tests/report/${t}`);i(w)}catch(w){u(w.response?.data?.error||w.message)}finally{l(!1)}};if(a)return o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",color:"#94a3b8",gap:"10px"},children:[o.jsx(ua,{className:"animate-spin"})," Generating comprehensive report..."]});if(c)return o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#ef4444"},children:c});const f=s?.attempt||s,A=s?.violations||s?.proctoring_logs||[];if(!f||!f.id)return o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Report data unavailable"});const m=f.overall_status==="completed",g=f.report&&typeof f.report=="object"?f.report:{},y=g.performance_metrics?[{subject:"Accuracy",A:g.performance_metrics.accuracy||0,fullMark:100},{subject:"Speed",A:g.performance_metrics.speed||0,fullMark:100},{subject:"Completeness",A:g.performance_metrics.completeness||0,fullMark:100},{subject:"Code Quality",A:g.performance_metrics.code_quality||0,fullMark:100},{subject:"Best Practices",A:g.performance_metrics.best_practices||(g.performance_metrics.code_quality?g.performance_metrics.code_quality-5:0),fullMark:100}]:[];let x=[];g.concept_mastery?x=Object.entries(g.concept_mastery).map(([w,B])=>({name:w,score:B})).sort((w,B)=>B.score-w.score).slice(0,8):g.skill_ratings&&(x=Object.entries(g.skill_ratings).map(([w,B])=>({name:w,score:B*10})));const v=[{key:"mcq",label:"MCQ Test",icon:o.jsx(Zr,{size:18}),score:Number(f.mcq_score||0),status:f.mcq_status,color:"#8b5cf6"},{key:"coding",label:"Coding Test",icon:o.jsx(Lg,{size:18}),score:Number(f.coding_score||0),status:f.coding_status,color:"#3b82f6"},{key:"sql",label:"SQL Test",icon:o.jsx(wi,{size:18}),score:Number(f.sql_score||0),status:f.sql_status,color:"#10b981"},{key:"interview",label:"AI Interview",icon:o.jsx(qp,{size:18}),score:Number(f.interview_score||0),status:f.interview_status,isOutOf10:!0,color:"#f59e0b"}];return o.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Inter, sans-serif"},children:[!r&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[o.jsxs("button",{onClick:e,style:{padding:"8px 16px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(Nge,{size:16})," Back"]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:"Detailed Skill Report"}),o.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#94a3b8"},children:["Generated on ",new Date(f.created_at).toLocaleDateString()]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px",marginBottom:"32px"},children:[o.jsxs("div",{style:{background:m?"linear-gradient(135deg, rgba(34,197,94,0.15), rgba(6,95,70,0.2))":"linear-gradient(135deg, rgba(239,68,68,0.15), rgba(153,27,27,0.2))",border:"1px solid "+(m?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)"),borderRadius:"16px",padding:"32px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",border:`2px solid ${m?"#22c55e":"#ef4444"}`},children:m?o.jsx(_l,{size:40,color:"#22c55e"}):o.jsx(ua,{size:40,color:"#ef4444"})}),o.jsx("h2",{style:{margin:"0 0 4px",fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:m?"Excellent Work!":"Needs Improvement"}),o.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:700,background:m?"#22c55e":"#ef4444",color:"white",marginTop:"8px"},children:f.overall_status==="completed"?"PASSED":f.mcq_status==="failed"?"MCQ FAILED":f.coding_status==="failed"?"CODING FAILED":f.sql_status==="failed"?"SQL FAILED":f.interview_status==="failed"?"INTERVIEW FAILED":"NOT PASSED"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:v.map(w=>{w.status==="completed"||w.status,!w.status||w.status;const B=w.isOutOf10?(w.score||0)*10:w.score||0;return o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"4px",background:"#334155"},children:o.jsx("div",{style:{width:`${B}%`,height:"100%",background:w.color,transition:"width 1s ease-out"}})}),o.jsx("div",{style:{marginBottom:"12px",color:w.color,background:`${w.color}15`,padding:"8px",borderRadius:"10px"},children:w.icon}),o.jsx("div",{style:{fontSize:"13px",color:"#cbd5e1",fontWeight:600},children:w.label}),o.jsxs("div",{style:{fontSize:"20px",fontWeight:800,color:"#f1f5f9",marginTop:"4px"},children:[w.isOutOf10?(w.score||0).toFixed(1):Math.round(w.score||0),o.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:500},children:w.isOutOf10?"/10":"%"})]})]},w.key)})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px"},children:[o.jsxs("h3",{style:{margin:"0 0 16px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Zr,{color:"#8b5cf6",size:20})," AI Assessment Summary"]}),o.jsx("div",{style:{fontSize:"14px",lineHeight:"1.7",color:"#cbd5e1"},children:g.summary||g.overall_assessment||"No summary available."}),g.behavioral_analysis&&o.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"rgba(59,130,246,0.1)",borderRadius:"12px",border:"1px solid rgba(59,130,246,0.2)"},children:[o.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",fontWeight:700,color:"#60a5fa"},children:"Behavioral Analysis"}),o.jsx("p",{style:{margin:0,fontSize:"13px",color:"#cbd5e1"},children:g.behavioral_analysis})]})]}),o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center"},children:[o.jsx("h3",{style:{margin:"0 0 8px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",alignSelf:"flex-start"},children:"Performance Metrics"}),y.length>0?o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(Cfe,{cx:"50%",cy:"50%",outerRadius:"75%",data:y,children:[o.jsx(sU,{stroke:"#475569"}),o.jsx(oU,{dataKey:"subject",tick:{fill:"#94a3b8",fontSize:11}}),o.jsx(aU,{angle:30,domain:[0,100],tick:!1,axisLine:!1}),o.jsx(mU,{name:"Performance",dataKey:"A",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.4}),o.jsx(Jl,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",color:"#f1f5f9"}}),o.jsx(VP,{})]})}):o.jsx("div",{style:{color:"#64748b",fontStyle:"italic",marginTop:"40px"},children:"Not enough data for metrics"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px"},children:[o.jsx("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:"Concept Mastery"}),x.length>0?o.jsx(Xl,{width:"100%",height:300,children:o.jsxs(G1,{data:x,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),o.jsx(fh,{type:"number",domain:[0,100],stroke:"#64748b",ticCount:5}),o.jsx(hh,{dataKey:"name",type:"category",width:100,stroke:"#94a3b8",fontSize:11}),o.jsx(Jl,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",color:"#f1f5f9"}}),o.jsx(cm,{dataKey:"score",fill:"#10b981",radius:[0,4,4,0],children:x.map((w,B)=>o.jsx(gf,{fill:w.score>=80?"#10b981":w.score>=60?"#f59e0b":"#ef4444"},`cell-${B}`))})]})}):o.jsx("div",{style:{color:"#64748b"},children:"No concept data available"})]}),o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",overflowY:"auto",maxHeight:"400px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Br,{color:"#ef4444",size:20})," Skill Gap Analysis"]}),g.skill_gap_analysis?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.skill_gap_analysis.map((w,B)=>o.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{fontWeight:700,color:"#f1f5f9"},children:w.skill}),o.jsxs("div",{style:{fontSize:"11px",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{style:{color:"#94a3b8"},children:w.current_level}),o.jsx(hm,{size:12,color:"#64748b"}),o.jsx("span",{style:{color:"#22c55e",fontWeight:700},children:w.target_level})]})]}),o.jsx("p",{style:{margin:0,fontSize:"13px",color:"#cbd5e1",lineHeight:"1.5"},children:w.gap_description})]},B))}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[g.weaknesses&&g.weaknesses.map((w,B)=>o.jsxs("div",{style:{padding:"12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px",color:"#fca5a5",fontSize:"13px"},children:[" ",w]},B)),!g.weaknesses&&o.jsx("div",{style:{color:"#94a3b8"},children:"No specific gap analysis available."})]})]})]}),g.section_feedback&&o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(j2,{color:"#8b5cf6",size:24})," Section-wise Detailed Feedback"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[{key:"mcq",label:"MCQ Analysis",icon:o.jsx(Zr,{size:18}),color:"#8b5cf6"},{key:"coding",label:"Coding Analysis",icon:o.jsx(Lg,{size:18}),color:"#3b82f6"},{key:"sql",label:"SQL Analysis",icon:o.jsx(wi,{size:18}),color:"#10b981"},{key:"interview",label:"Interview Analysis",icon:o.jsx(qp,{size:18}),color:"#f59e0b"}].map(w=>g.section_feedback[w.key]&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px"},children:[o.jsxs("h4",{style:{margin:"0 0 12px",fontSize:"15px",fontWeight:700,color:w.color,display:"flex",alignItems:"center",gap:"8px"},children:[w.icon," ",w.label]}),o.jsx("p",{style:{margin:0,fontSize:"13px",lineHeight:"1.7",color:"#cbd5e1"},children:g.section_feedback[w.key]})]},w.key))})]}),g.skill_wise_scores&&Object.keys(g.skill_wise_scores).length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(vu,{color:"#f59e0b",size:20})," Skill-wise Assessment"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"12px"},children:Object.entries(g.skill_wise_scores).sort((w,B)=>B[1]-w[1]).map(([w,B],k)=>o.jsxs("div",{style:{padding:"14px 16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"13px",fontWeight:700,color:"#f1f5f9",textTransform:"capitalize"},children:w}),o.jsxs("span",{style:{fontSize:"13px",fontWeight:800,color:B>=80?"#22c55e":B>=60?"#f59e0b":"#ef4444"},children:[B,"%"]})]}),o.jsx("div",{style:{width:"100%",height:"6px",background:"#334155",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${B}%`,height:"100%",borderRadius:"3px",background:B>=80?"linear-gradient(90deg, #22c55e, #10b981)":B>=60?"linear-gradient(90deg, #f59e0b, #eab308)":"linear-gradient(90deg, #ef4444, #dc2626)",transition:"width 1s ease-out"}})})]},k))})]}),g.mcq_question_analysis&&g.mcq_question_analysis.length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Zr,{color:"#8b5cf6",size:20})," MCQ Question-wise Analysis"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:g.mcq_question_analysis.map((w,B)=>o.jsxs("div",{style:{padding:"14px 16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${w.correct?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)"}`,display:"flex",gap:"12px",alignItems:"flex-start"},children:[o.jsx("div",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:w.correct?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"2px"},children:w.correct?o.jsx(Nn,{size:16,color:"#22c55e"}):o.jsx(kr,{size:16,color:"#ef4444"})}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[o.jsxs("span",{style:{fontSize:"13px",fontWeight:700,color:"#f1f5f9"},children:["Q",B+1,": ",w.question_summary]}),w.skill&&o.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"10px",background:"rgba(139,92,246,0.15)",color:"#a78bfa"},children:w.skill})]}),o.jsx("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8",lineHeight:"1.5"},children:w.feedback})]})]},B))})]}),g.coding_problem_analysis&&g.coding_problem_analysis.length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(Lg,{color:"#3b82f6",size:20})," Coding Problem-wise Feedback"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.coding_problem_analysis.map((w,B)=>o.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${w.solved?"rgba(59,130,246,0.3)":"rgba(245,158,11,0.3)"}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9"},children:w.problem_title||`Problem ${B+1}`}),o.jsx("span",{style:{fontSize:"10px",fontWeight:700,padding:"3px 10px",borderRadius:"10px",background:w.solved?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:w.solved?"#22c55e":"#ef4444"},children:w.solved?" Solved":" Not Solved"})]}),o.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:w.feedback}),w.improvement_tip&&o.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.15)",fontSize:"12px",color:"#93c5fd"},children:[" ",o.jsx("strong",{children:"Tip:"})," ",w.improvement_tip]})]},B))})]}),g.sql_problem_analysis&&g.sql_problem_analysis.length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(wi,{color:"#10b981",size:20})," SQL Problem-wise Feedback"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.sql_problem_analysis.map((w,B)=>o.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${w.solved?"rgba(16,185,129,0.3)":"rgba(245,158,11,0.3)"}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9"},children:w.problem_title||`SQL Problem ${B+1}`}),o.jsx("span",{style:{fontSize:"10px",fontWeight:700,padding:"3px 10px",borderRadius:"10px",background:w.solved?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:w.solved?"#22c55e":"#ef4444"},children:w.solved?" Correct":" Incorrect"})]}),o.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:w.feedback}),w.improvement_tip&&o.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(16,185,129,0.08)",border:"1px solid rgba(16,185,129,0.15)",fontSize:"12px",color:"#6ee7b7"},children:[" ",o.jsx("strong",{children:"Tip:"})," ",w.improvement_tip]})]},B))})]}),g.interview_feedback&&g.interview_feedback.length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(qp,{color:"#f59e0b",size:20})," Interview Question-wise Feedback"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.interview_feedback.map((w,B)=>{const k=(w.score||0)>=7?"#22c55e":(w.score||0)>=5?"#f59e0b":"#ef4444";return o.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsxs("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9",flex:1},children:["Q",B+1,": ",w.question_summary]}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:800,color:k,minWidth:"50px",textAlign:"right"},children:[w.score||0,"/10"]})]}),o.jsx("div",{style:{width:"100%",height:"4px",background:"#334155",borderRadius:"2px",marginBottom:"10px"},children:o.jsx("div",{style:{width:`${(w.score||0)/10*100}%`,height:"100%",borderRadius:"2px",background:k,transition:"width 1s ease-out"}})}),o.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:w.feedback}),w.improvement_tip&&o.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.15)",fontSize:"12px",color:"#fbbf24"},children:[" ",o.jsx("strong",{children:"Improve:"})," ",w.improvement_tip]})]},B)})})]}),g.roadmap&&o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(k1,{color:"#3b82f6",size:24})," Personalized Improvement Roadmap"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:g.roadmap.map((w,B)=>o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px",position:"relative"},children:[o.jsxs("div",{style:{position:"absolute",top:"-10px",left:"20px",background:"#3b82f6",color:"white",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"10px"},children:["Week ",w.week]}),o.jsx("h4",{style:{marginTop:"12px",marginBottom:"12px",fontSize:"16px",fontWeight:700,color:"#93c5fd"},children:w.focus_area}),o.jsx("ul",{style:{margin:0,paddingLeft:"16px",color:"#cbd5e1",fontSize:"13px"},children:w.action_items.map((k,j)=>o.jsx("li",{style:{marginBottom:"6px"},children:k},j))})]},B))})]}),A&&A.length>0&&o.jsxs("div",{style:{background:"#1e293b",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[o.jsxs("h3",{style:{margin:"0 0 16px",fontSize:"18px",fontWeight:700,display:"flex",alignItems:"center",gap:"8px",color:"#f87171"},children:[o.jsx(Vs,{size:20})," Proctoring Violations (",A.length,")"]}),o.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:A.map((w,B)=>o.jsxs("div",{style:{padding:"10px 14px",borderRadius:"8px",marginBottom:"6px",background:w.severity==="high"?"rgba(239,68,68,0.1)":"rgba(245,158,11,0.1)",fontSize:"13px",display:"flex",justifyContent:"space-between",color:"#cbd5e1"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:w.event_type})," during ",w.test_stage]}),o.jsx("span",{style:{opacity:.7},children:new Date(w.created_at).toLocaleTimeString()})]},B))})]})]})}const yk="http://localhost:8000";function Wht({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState("list"),[f,A]=C.useState(""),[m,g]=C.useState(!1),[y,x]=C.useState(null),[v,w]=C.useState(""),[B,k]=C.useState(!1),[j,I]=C.useState(null),[O,F]=C.useState(null),D=C.useRef(null),T=C.useRef(null),[N,P]=C.useState({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!1}),[z,U]=C.useState(null),ee=C.useRef(null),q=C.useRef(null),Z=C.useRef(null),G=C.useRef(null),[ne,K]=C.useState(!1),H=C.useRef(0),[Q,X]=C.useState(null);C.useEffect(()=>{xe(),re()},[]);const re=async()=>{try{const _e=()=>new Promise(ot=>{if(window.cocoSsd)return ot();let $t=0;const kt=setInterval(()=>{$t+=200,(window.cocoSsd||$t>3e4)&&(clearInterval(kt),ot())},200)});if(console.log(" Waiting for TensorFlow.js & COCO-SSD scripts..."),await _e(),!window.cocoSsd){console.error(" COCO-SSD scripts failed to load from CDN");return}console.log(" Scripts ready. Loading COCO-SSD model weights...");const ht=await window.cocoSsd.load({base:"mobilenet_v2"});X(ht),K(!0),console.log(" AI Proctoring Model loaded successfully!");try{const ot=document.createElement("canvas");ot.width=64,ot.height=64,await ht.detect(ot),console.log(" Model warmed up and ready for real-time detection")}catch{}}catch(_e){console.error("Model load error:",_e)}};C.useEffect(()=>()=>{y&&y.getTracks().forEach(_e=>_e.stop())},[y]),C.useEffect(()=>{const _e=()=>{const ht=!!document.fullscreenElement;g(ht),!ht&&i&&u!=="list"&&u!=="report"&&G.current?.("fullscreen_exit","Student exited fullscreen mode","high")};return document.addEventListener("fullscreenchange",_e),()=>document.removeEventListener("fullscreenchange",_e)},[i,u]);const le=C.useCallback((_e,ht,ot)=>{U({title:_e,message:ht,severity:ot}),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>U(null),4e3)},[]),Ae=C.useCallback(async(_e,ht,ot="medium")=>{if(!(!i||l?.proctoring_enabled===!1))try{await Xe.post(`${yk}/api/skill-tests/proctoring/log`,{attemptId:i,testStage:u,eventType:_e,details:ht,severity:ot}),P(Ht=>({...Ht,violationCount:Ht.violationCount+1,tabSwitchCount:_e==="tab_switch"?Ht.tabSwitchCount+1:Ht.tabSwitchCount,fullscreenExits:_e==="fullscreen_exit"?Ht.fullscreenExits+1:Ht.fullscreenExits,phoneDetections:_e==="phone_detected"?Ht.phoneDetections+1:Ht.phoneDetections,cameraBlocks:_e==="camera_blocked"?Ht.cameraBlocks+1:Ht.cameraBlocks}));const kt={tab_switch:{title:" Tab Switch Detected!",msg:"Switching tabs is monitored. Return to your test immediately."},fullscreen_exit:{title:" Fullscreen Exited!",msg:"You must stay in fullscreen mode. Please re-enter fullscreen."},camera_blocked:{title:" Camera Blocked!",msg:"Your camera appears to be covered or blocked. Please uncover it."},phone_detected:{title:" Suspicious Activity!",msg:"Device or object detected near camera. Keep your area clear."}}[_e]||{title:" Violation!",msg:ht};le(kt.title,kt.msg,ot)}catch{}},[i,u,l,le]);C.useEffect(()=>{G.current=Ae},[Ae]),C.useEffect(()=>{if(!i||u==="list"||u==="report"||l?.proctoring_enabled===!1)return;const _e=ht=>{ht.preventDefault()};return window.addEventListener("copy",_e),window.addEventListener("paste",_e),window.addEventListener("cut",_e),window.addEventListener("contextmenu",_e),()=>{window.removeEventListener("copy",_e),window.removeEventListener("paste",_e),window.removeEventListener("cut",_e),window.removeEventListener("contextmenu",_e)}},[i,u,l]),C.useEffect(()=>{const _e=()=>{document.hidden&&i&&u!=="list"&&u!=="report"&&G.current?.("tab_switch","Student switched tabs or minimized window","high")};return document.addEventListener("visibilitychange",_e),()=>document.removeEventListener("visibilitychange",_e)},[i,u]),C.useEffect(()=>{P(_e=>({..._e,cameraActive:!!y}))},[y]),C.useEffect(()=>{if(!y||!i||u==="list"||u==="report"){Z.current&&(clearInterval(Z.current),Z.current=null);return}const _e=document.createElement("canvas");_e.width=640,_e.height=480;const ht=_e.getContext("2d");q.current=_e;const ot=document.createElement("video");ot.srcObject=y,ot.muted=!0,ot.playsInline=!0,ot.width=640,ot.height=480,ot.play().catch(Ut=>console.warn("Video play error:",Ut));let $t=0;const kt=20,Ht=3,Sn=8e3;return Z.current=setInterval(async()=>{try{if(!ot||ot.paused||ot.ended||ot.readyState<2||!ht)return;try{ht.drawImage(ot,0,0,640,480);const en=ht.getImageData(0,0,640,480).data;let fn=0;for(let rn=0;rn<en.length;rn+=16)fn+=en[rn]*.299+en[rn+1]*.587+en[rn+2]*.114;fn/(en.length/16)<kt?($t++,$t===Ht&&(G.current?.("camera_blocked","Camera appears to be covered","high"),$t=0)):$t=0}catch{return}if(Q&&ot.readyState>=2)try{const Ut=await Q.detect(ot),en=Ut.filter(sn=>sn.class!=="person");en.length>0&&console.log(" AI:",en.map(sn=>`${sn.class}(${(sn.score*100).toFixed(0)}%)`).join(", "));const fn=["cell phone","remote","laptop","mouse","tablet"],Qt=Ut.find(sn=>fn.includes(sn.class)&&sn.score>=.4);if(Qt){const sn=Date.now();sn-H.current>Sn&&(H.current=sn,console.warn(` SUSPICIOUS DEVICE: ${Qt.class} (${(Qt.score*100).toFixed(0)}%)`),G.current?.("phone_detected",`Suspicious activity: ${Qt.class} detected (${(Qt.score*100).toFixed(0)}% confidence)`,"high"))}const rn=Ut.filter(sn=>["book","keyboard"].includes(sn.class)&&sn.score>.45);if(rn.length>0){console.warn(" Suspicious:",rn.map(Fn=>`${Fn.class}(${(Fn.score*100).toFixed(0)}%)`).join(", "));const sn=Date.now();sn-H.current>Sn&&(H.current=sn,G.current?.("phone_detected",`${rn[0].class} detected`,"medium"))}const Yt=Ut.filter(sn=>sn.class==="person"&&sn.score>.35);Yt.length>1&&G.current?.("phone_detected",`Multiple people detected (${Yt.length} persons)`,"high")}catch(Ut){console.warn("Detection error:",Ut.message)}}catch(Ut){console.error(Ut)}},500),()=>{Z.current&&(clearInterval(Z.current),Z.current=null),ot.pause(),ot.srcObject=null}},[y,i,u,Q]),C.useEffect(()=>()=>{ee.current&&clearTimeout(ee.current),Z.current&&clearInterval(Z.current)},[]);const xe=async()=>{try{s(!0);const{data:_e}=await Xe.get(`${yk}/api/skill-tests/student/available`,{params:{studentId:t?.id||t?.email||"student"}});n(_e)}catch(_e){A(_e.response?.data?.error||_e.message)}finally{s(!1)}},Be=_e=>{const ht=e.find(ot=>ot.id===_e);if(ht&&ht.proctoring_enabled===!1){ze(_e);return}I(_e),F(null),k(!0),w("")},me=_e=>{let ht=!0;for(const ot of e)if(ot.my_attempts?.find(kt=>kt.id===_e)){ot.proctoring_enabled===!1&&(ht=!1);break}if(!ht){at(_e);return}F(_e),I(null),k(!0),w("")},ve=async()=>{try{const _e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});return x(_e),w(""),T.current&&(T.current.srcObject=_e),!0}catch{return w("Camera access denied. Please allow camera access and try again."),!1}},je=async()=>{try{return D.current&&!document.fullscreenElement&&await D.current.requestFullscreen(),g(!0),!0}catch{return!1}},ye=async()=>{await je(),k(!1),j?await ze(j):O&&await at(O),I(null),F(null)},ze=async _e=>{try{A("");const{data:ht}=await Xe.post(`${yk}/api/skill-tests/${_e}/start`,{studentId:t?.id||t?.email||"student",studentName:t?.name||t?.username||"Student"});a(ht.attemptId),await ie(ht.attemptId)}catch(ht){A(ht.response?.data?.error||ht.message)}},at=async _e=>{try{A(""),a(_e),await ie(_e)}catch(ht){A(ht.response?.data?.error||ht.message)}},ie=async _e=>{try{const{data:ht}=await Xe.get(`${yk}/api/skill-tests/attempt/${_e}`);c(ht),ht.overall_status==="completed"||ht.overall_status==="failed"?d("report"):d(ht.current_stage||"mcq")}catch(ht){A(ht.message)}},Le=async _e=>{a(_e),await ie(_e),d("report")},nt=async(_e,ht)=>{await ie(i),setTimeout(()=>{document.fullscreenElement||(D.current||document.documentElement).requestFullscreen().catch(()=>{console.warn("Could not re-enter fullscreen after stage change")})},200)},Et=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),y&&(y.getTracks().forEach(_e=>_e.stop()),x(null)),a(null),c(null),d("list"),xe()};if(B)return o.jsx("div",{ref:D,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:o.jsxs("div",{style:{maxWidth:"500px",width:"100%",background:"#1e293b",borderRadius:"20px",padding:"40px",border:"1px solid #334155",textAlign:"center"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",margin:"0 auto 20px",background:"rgba(139,92,246,0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Vs,{size:32,color:"#8b5cf6"})}),o.jsx("h2",{style:{fontSize:"22px",fontWeight:800,margin:"0 0 8px",color:"#f1f5f9"},children:"Proctoring Setup"}),o.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:"0 0 28px"},children:"This test requires camera access and fullscreen mode for proctoring."}),o.jsx("div",{style:{width:"240px",height:"180px",margin:"0 auto 20px",borderRadius:"12px",overflow:"hidden",border:"2px solid "+(y?"#22c55e":"#475569"),background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center"},children:y?o.jsx("video",{ref:T,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}):o.jsx(rB,{size:40,color:"#475569"})}),v&&o.jsx("div",{style:{fontSize:"12px",color:"#fca5a5",margin:"0 0 16px",padding:"8px 12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:v}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"24px"},children:[o.jsx("button",{onClick:ve,style:{padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",background:y?"rgba(16,185,129,0.15)":"rgba(59,130,246,0.15)",color:y?"#34d399":"#60a5fa",border:"1px solid "+(y?"rgba(16,185,129,0.3)":"rgba(59,130,246,0.3)")},children:y?o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:16})," Camera Enabled"]}):o.jsxs(o.Fragment,{children:[o.jsx(rB,{size:16})," Enable Camera"]})}),o.jsxs("div",{style:{textAlign:"left",fontSize:"13px",padding:"12px 16px",background:"#0f172a",borderRadius:"10px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:y?"#34d399":"#94a3b8"},children:[y?o.jsx(Nn,{size:14}):o.jsx(kr,{size:14})," Camera access"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"#94a3b8"},children:[o.jsx(qv,{size:14})," Fullscreen will activate on start"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#94a3b8"},children:[o.jsx(K0e,{size:14})," Tab switches are monitored"]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>{k(!1),I(null),F(null)},style:{flex:1,padding:"12px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Cancel"}),o.jsxs("button",{onClick:ye,disabled:!y,style:{flex:2,padding:"12px",background:y?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"#334155",color:y?"white":"#64748b",border:"none",borderRadius:"10px",cursor:y?"pointer":"not-allowed",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:y?"0 2px 10px rgba(139,92,246,0.3)":"none"},children:[o.jsx(dd,{size:16})," Start Assessment"]})]})]})});if(i&&l){const _e=["mcq","coding","sql","interview"],ht=_e.indexOf(l.current_stage);return u==="report"?o.jsx(kfe,{attemptId:i,onBack:Et}):o.jsxs("div",{ref:D,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",overflow:"hidden"},children:[o.jsx("style",{children:"@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }"}),y&&o.jsxs("div",{style:{width:"260px",minWidth:"260px",background:"#0b1120",borderRight:"1px solid #1e293b",display:"flex",flexDirection:"column",padding:"12px",gap:"10px",height:"100vh",position:"sticky",top:0},children:[o.jsxs("div",{style:{width:"100%",aspectRatio:"3/4",borderRadius:"12px",overflow:"hidden",border:"2px solid #8b5cf6",boxShadow:"0 4px 20px rgba(139,92,246,0.2)",background:"#000",position:"relative"},children:[o.jsx("video",{ref:ot=>{ot&&y&&(ot.srcObject=y)},autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),o.jsxs("div",{style:{position:"absolute",top:"6px",left:"6px",background:"rgba(239,68,68,0.9)",borderRadius:"4px",padding:"2px 8px",fontSize:"10px",color:"white",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"white",animation:"blink 1s infinite"}}),"REC"]})]}),o.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:700,color:"#94a3b8",marginBottom:"8px"},children:[o.jsx(Vs,{size:13,color:"#8b5cf6"})," Proctoring"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[o.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:ne?"rgba(34,197,94,0.1)":"rgba(234,179,8,0.1)",color:ne?"#22c55e":"#eab308",border:`1px solid ${ne?"rgba(34,197,94,0.2)":"rgba(234,179,8,0.2)"}`,display:"flex",alignItems:"center",gap:"5px"},children:[o.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:ne?"#22c55e":"#eab308",boxShadow:`0 0 6px ${ne?"#22c55e":"#eab308"}`,animation:ne?"none":"blink 1s infinite"}}),ne?" AI Active":" AI Loading..."]}),o.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:"rgba(16,185,129,0.1)",color:"#10b981",border:"1px solid rgba(16,185,129,0.2)",display:"flex",alignItems:"center",gap:"5px"},children:[o.jsx(rB,{size:10})," Camera ON"]})]})]}),o.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[o.jsx("div",{style:{fontSize:"10px",fontWeight:700,color:"#64748b",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Monitoring"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[o.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(y7,{size:10})," Tab Switches"]}),o.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.tabSwitchCount>0?"#fbbf24":"#64748b"},children:N.tabSwitchCount})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[o.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(aO,{size:10})," Phone"]}),o.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.phoneDetections>0?"#fbbf24":"#64748b"},children:N.phoneDetections})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[o.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(qv,{size:10})," FS Exits"]}),o.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.fullscreenExits>0?"#fbbf24":"#64748b"},children:N.fullscreenExits})]}),N.violationCount>0&&o.jsxs("div",{style:{marginTop:"4px",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:700,background:"rgba(239,68,68,0.1)",color:"#fca5a5",border:"1px solid rgba(239,68,68,0.2)",display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[o.jsx(Pn,{size:10})," ",N.violationCount," Violations"]})]})]})]}),o.jsx("div",{style:{flex:1,overflow:"auto",height:"100vh"},children:o.jsxs("div",{style:{padding:"12px 20px",paddingBottom:"80px"},children:[o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:l.test_title||l.title||"Skill Test"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!m&&o.jsxs("button",{onClick:je,style:{padding:"6px 12px",background:"rgba(245,158,11,0.15)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"11px",color:"#fbbf24",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(qv,{size:13})," Re-enter Fullscreen"]}),o.jsx("button",{onClick:Et,style:{padding:"6px 14px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:"#94a3b8"},children:" Exit Test"})]})]}),o.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:_e.map((ot,$t)=>{const kt=l[`${ot}_status`]||(ot==="interview"?l.interview_status:"pending");let Ht="#334155";return kt==="completed"||kt==="passed"?Ht="#22c55e":kt==="failed"?Ht="#ef4444":kt==="in_progress"?Ht="#f59e0b":$t===ht&&(Ht="#3b82f6"),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"3px"},children:[o.jsx("div",{style:{width:"100%",height:"5px",borderRadius:"3px",background:Ht}}),o.jsx("span",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",color:$t===ht?"#60a5fa":"#64748b"},children:ot==="mcq"?"MCQ":ot.charAt(0).toUpperCase()+ot.slice(1)})]},ot)})}),l.proctoring_enabled!==!1&&!y&&o.jsxs("div",{style:{display:"flex",gap:"10px",padding:"8px 14px",background:"#1e293b",borderRadius:"8px",border:"1px solid #334155",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600},children:[o.jsx(Vs,{size:13,color:"#8b5cf6"}),o.jsx("span",{style:{color:"#94a3b8"},children:"Proctoring:"})]}),o.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"auto"},children:[o.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[o.jsx(y7,{size:9})," Tabs: ",o.jsx("span",{style:{color:N.tabSwitchCount>0?"#fbbf24":"#94a3b8"},children:N.tabSwitchCount})]}),o.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[o.jsx(aO,{size:9})," Phone: ",o.jsx("span",{style:{color:N.phoneDetections>0?"#fbbf24":"#94a3b8"},children:N.phoneDetections})]}),o.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[o.jsx(qv,{size:9})," FS: ",o.jsx("span",{style:{color:N.fullscreenExits>0?"#fbbf24":"#94a3b8"},children:N.fullscreenExits})]})]})]})]}),u==="mcq"&&o.jsx(jVe,{attemptId:i,attemptData:l,onComplete:ot=>nt(),onFailed:()=>{ie(i),d("report")}}),u==="coding"&&o.jsx(EVe,{attemptId:i,attemptData:l,onComplete:ot=>nt(),onFailed:()=>{ie(i),d("report")}}),u==="sql"&&o.jsx(IVe,{attemptId:i,attemptData:l,onComplete:ot=>nt(),onFailed:()=>{ie(i),d("report")}}),u==="interview"&&o.jsx(NVe,{attemptId:i,attemptData:l,onComplete:ot=>nt(),onFailed:()=>{ie(i),d("report")}})]})}),z&&o.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,minWidth:"320px",maxWidth:"400px",background:z.severity==="high"?"#ef4444":"#f59e0b",color:"white",padding:"20px",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease-out",display:"flex",gap:"16px",alignItems:"flex-start"},children:[o.jsx("style",{children:`
                            @keyframes slideIn { from { transform: translate(-50%, -40px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
                        `}),o.jsx(Pn,{size:24,style:{marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:800,fontSize:"18px",marginBottom:"4px"},children:z.title}),o.jsx("div",{style:{fontSize:"14px",opacity:.9,lineHeight:"1.4"},children:z.message})]})]})]})}return o.jsxs("div",{style:{padding:"24px",maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:o.jsx(Zr,{size:22,color:"white"})}),o.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:"Skill Assessments"})]}),f&&o.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:[o.jsx(Pn,{size:16,style:{verticalAlign:"middle",marginRight:"6px"}}),f]}),r?o.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading available tests..."}):e.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8"},children:[o.jsx(Zr,{size:48,style:{marginBottom:"12px",opacity:.5}}),o.jsx("p",{style:{fontSize:"16px",color:"#e2e8f0"},children:"No skill tests available yet"}),o.jsx("p",{style:{fontSize:"13px"},children:"Tests will appear here when your admin creates them"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.map(_e=>{_e.my_attempts?.[0];const ht=_e.my_attempts?.some(kt=>kt.overall_status==="completed"),ot=_e.my_attempts?.some(kt=>kt.overall_status==="in_progress"),$t=_e.my_attempts?.find(kt=>kt.overall_status==="in_progress");return o.jsx("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"box-shadow 0.2s"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{margin:"0 0 6px",fontSize:"17px",fontWeight:700,color:"#f1f5f9"},children:_e.title}),_e.description&&o.jsx("p",{style:{margin:"0 0 10px",color:"#94a3b8",fontSize:"13px"},children:_e.description}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginBottom:"10px"},children:(_e.skills&&Array.isArray(_e.skills)?_e.skills:[]).map(kt=>o.jsx("span",{style:{padding:"2px 8px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",borderRadius:"12px",fontSize:"11px",border:"1px solid rgba(139,92,246,0.25)"},children:kt},kt))}),o.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#94a3b8",flexWrap:"wrap"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Br,{size:13})," MCQ: ",_e.mcq_count," | Coding: ",_e.coding_count," | SQL: ",_e.sql_count," | Interview: ",_e.interview_count]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(ls,{size:13})," ",_e.mcq_duration_minutes,"min MCQ"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(uZ,{size:13})," ",_e.attempts_used||0,"/",_e.attempt_limit," attempts"]})]}),_e.my_attempts&&_e.my_attempts.length>0&&o.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#0f172a",borderRadius:"8px"},children:[o.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#e2e8f0"},children:"Previous Attempts:"}),o.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"4px",flexWrap:"wrap"},children:_e.my_attempts.map(kt=>o.jsxs("button",{onClick:()=>{kt.overall_status==="in_progress"?me(kt.id):Le(kt.id)},style:{padding:"4px 10px",borderRadius:"16px",fontSize:"11px",cursor:"pointer",border:"none",fontWeight:600,background:kt.overall_status==="completed"?"rgba(16,185,129,0.15)":kt.overall_status==="failed"?"rgba(239,68,68,0.15)":"rgba(245,158,11,0.15)",color:kt.overall_status==="completed"?"#34d399":kt.overall_status==="failed"?"#fca5a5":"#fbbf24"},children:["#",kt.attempt_number,": ",kt.overall_status==="in_progress"?`In Progress (${kt.current_stage})`:kt.overall_status,kt.overall_status!=="in_progress"&&` - MCQ: ${Math.round(kt.mcq_score)}%`]},kt.id))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginLeft:"16px"},children:[ot&&o.jsxs("button",{onClick:()=>me($t.id),style:{padding:"10px 20px",background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[o.jsx(dd,{size:16})," Resume"]}),_e.can_attempt&&o.jsxs("button",{onClick:()=>Be(_e.id),style:{padding:"10px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[o.jsx(Dg,{size:16})," ",_e.attempts_used>0?"Retry":"Start Test"]}),!_e.can_attempt&&!ot&&o.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic"},children:ht?" Completed":"No attempts left"})]})]})},_e.id)})})]})}const Fv="http://localhost:8000";function Bfe({user:t,isAdmin:e=!1}){const[n,r]=C.useState([]),[s,i]=C.useState(!0),[a,l]=C.useState(""),[c,u]=C.useState(null),[d,f]=C.useState("all"),[A,m]=C.useState({}),[g,y]=C.useState(!1),[x,v]=C.useState(!1);C.useEffect(()=>{w()},[]);const w=async()=>{try{i(!0);const F=e?`${Fv}/api/skill-tests/admin/all-submissions`:`${Fv}/api/skill-tests/student/submissions?studentId=${encodeURIComponent(t?.id||t?.userId||t?.email||"")}`,{data:D}=await Xe.get(F);r(D)}catch(F){l(F.response?.data?.error||F.message)}finally{i(!1)}},B=async F=>{if(c===F){u(null);return}if(u(F),!A[F])try{y(!0);const{data:D}=await Xe.get(`${Fv}/api/skill-tests/report/${F}`);m(T=>({...T,[F]:D}))}catch(D){console.error("Failed to fetch report details",D)}finally{y(!1)}},k=async()=>{if(window.confirm(` Are you sure you want to DELETE ALL skill test submissions?

This will permanently remove all student attempts, reports, and proctoring logs.

This action CANNOT be undone!`))try{v(!0);const{data:F}=await Xe.delete(`${Fv}/api/skill-tests/admin/reset-all-submissions`);alert(` ${F.message}`),r([]),m({}),u(null)}catch(F){alert(" Reset failed: "+(F.response?.data?.error||F.message))}finally{v(!1)}},j=async(F,D)=>{if(F.stopPropagation(),!!window.confirm("Delete this submission? This action cannot be undone."))try{await Xe.delete(`${Fv}/api/skill-tests/admin/submission/${D}`),r(T=>T.filter(N=>N.id!==D)),c===D&&u(null),delete A[D]}catch(T){alert(" Delete failed: "+(T.response?.data?.error||T.message))}},I=d==="all"?n:d==="passed"?n.filter(F=>F.overall_status==="completed"):d==="failed"?n.filter(F=>F.overall_status==="failed"):n.filter(F=>F.overall_status==="in_progress"),O={total:n.length,passed:n.filter(F=>F.overall_status==="completed").length,failed:n.filter(F=>F.overall_status==="failed").length,inProgress:n.filter(F=>F.overall_status==="in_progress").length};return s?o.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8"},children:[o.jsx(mA,{size:32,style:{animation:"spin 1s linear infinite"}}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),o.jsx("p",{style:{marginTop:"12px",fontSize:"14px"},children:"Loading submissions..."})]}):o.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:o.jsx(qi,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:800,color:"#f1f5f9"},children:e?"All Skill Test Submissions":"My Skill Test Submissions"}),o.jsx("p",{style:{margin:0,fontSize:"13px",color:"#9ca3af"},children:e?"View all student assessment results":"View your assessment results & reports"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[o.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",background:"#1e293b",border:"1px solid #334155",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",fontWeight:600},children:"PASSED"}),o.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#22c55e"},children:O.passed})]}),o.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",background:"#1e293b",border:"1px solid #334155",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",fontWeight:600},children:"FAILED"}),o.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#ef4444"},children:O.failed})]}),e&&n.length>0&&o.jsxs("button",{onClick:k,disabled:x,style:{padding:"10px 18px",borderRadius:"10px",border:"1px solid rgba(239,68,68,0.3)",background:"rgba(239,68,68,0.1)",color:"#f87171",cursor:x?"not-allowed":"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:x?.5:1},onMouseEnter:F=>{F.target.style.background="rgba(239,68,68,0.2)"},onMouseLeave:F=>{F.target.style.background="rgba(239,68,68,0.1)"},children:[o.jsx(uZ,{size:15,style:x?{animation:"spin 1s linear infinite"}:{}}),x?"Resetting...":"Reset All"]})]})]}),o.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",padding:"4px",background:"#1e293b",borderRadius:"12px",width:"fit-content",border:"1px solid #334155"},children:["all","passed","failed","in_progress"].map(F=>o.jsx("button",{onClick:()=>f(F),style:{padding:"8px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:600,textTransform:"capitalize",background:d===F?"#334155":"transparent",color:d===F?"white":"#94a3b8",transition:"all 0.2s"},children:F.replace("_"," ")},F))}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:I.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#64748b",background:"#1e293b",borderRadius:"16px",border:"1px solid #334155"},children:[o.jsx(qi,{size:48,style:{opacity:.2,marginBottom:"16px"}}),o.jsx("p",{children:"No submissions found for this filter."})]}):I.map(F=>{const D=c===F.id,T=F.overall_status==="completed"?"#22c55e":F.overall_status==="failed"?"#ef4444":"#f59e0b",N=F.overall_status==="completed"?"rgba(34,197,94,0.1)":F.overall_status==="failed"?"rgba(239,68,68,0.1)":"rgba(245,158,11,0.1)";return o.jsxs("div",{style:{background:"#1e293b",border:`1px solid ${D?"#64748b":"#334155"}`,borderRadius:"16px",padding:"20px",transition:"all 0.2s",boxShadow:D?"0 4px 20px rgba(0,0,0,0.2)":"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>B(F.id),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:N,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${T}`},children:F.overall_status==="completed"?o.jsx(Nn,{size:24,color:T}):F.overall_status==="failed"?o.jsx(kr,{size:24,color:T}):o.jsx(ls,{size:24,color:T})}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:F.title}),o.jsxs("span",{style:{fontSize:"11px",padding:"2px 8px",borderRadius:"10px",background:"#334155",color:"#94a3b8"},children:["#",F.attempt_number]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"6px",fontSize:"13px",color:"#94a3b8"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(k1,{size:13})," ",new Date(F.created_at).toLocaleDateString()]}),F.student_name&&e&&o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#e2e8f0",fontWeight:600},children:[o.jsx(ua,{size:13})," ",F.student_name]})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"2px"},children:"Total Score"}),o.jsxs("div",{style:{fontSize:"20px",fontWeight:800,color:"#f1f5f9"},children:[Math.round((Number(F.mcq_score||0)+Number(F.coding_score||0)+Number(F.sql_score||0)+Number(F.interview_score||0)*10)/4),"%"]})]}),e&&o.jsx("div",{onClick:P=>j(P,F.id),style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(239,68,68,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#f87171",cursor:"pointer",transition:"all 0.2s",border:"1px solid rgba(239,68,68,0.2)"},onMouseEnter:P=>{P.currentTarget.style.background="rgba(239,68,68,0.25)"},onMouseLeave:P=>{P.currentTarget.style.background="rgba(239,68,68,0.1)"},title:"Delete this submission",children:o.jsx(po,{size:15})}),o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#334155",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8"},children:D?o.jsx(Am,{size:20}):o.jsx(EA,{size:20})})]})]}),D&&o.jsx("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #334155"},children:g&&!A[F.id]?o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[o.jsx(mA,{size:24,style:{animation:"spin 1s linear infinite"}})," Loading detailed report..."]}):o.jsx(kfe,{attemptId:F.id,initialData:A[F.id],isEmbedded:!0})})]},F.id)})})]})}const Vht="modulepreload",qht=function(t){return"/"+t},mX={},l6=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(n.map(u=>{if(u=qht(u),u in mX)return;mX[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const A=document.createElement("link");if(A.rel=d?"stylesheet":Vht,d||(A.as="script"),A.crossOrigin="",A.href=u,l&&A.setAttribute("nonce",l),document.head.appendChild(A),d)return new Promise((m,g)=>{A.addEventListener("load",m),A.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function _s(t){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(t)}var yf=Uint8Array,gu=Uint16Array,kU=Int32Array,BU=new yf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jU=new yf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gX=new yf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jfe=function(t,e){for(var n=new gu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new kU(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Efe=jfe(BU,2),Ght=Efe.b,g8=Efe.r;Ght[28]=258,g8[258]=28;var Kht=jfe(jU,0),yX=Kht.r,y8=new gu(32768);for(var bi=0;bi<32768;++bi){var Lp=(bi&43690)>>1|(bi&21845)<<1;Lp=(Lp&52428)>>2|(Lp&13107)<<2,Lp=(Lp&61680)>>4|(Lp&3855)<<4,y8[bi]=((Lp&65280)>>8|(Lp&255)<<8)>>1}var y2=(function(t,e,n){for(var r=t.length,s=0,i=new gu(e);s<r;++s)t[s]&&++i[t[s]-1];var a=new gu(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var l;if(n){l=new gu(1<<e);var c=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],f=a[t[s]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[y8[f]>>c]=u}else for(l=new gu(r),s=0;s<r;++s)t[s]&&(l[s]=y8[a[t[s]-1]++]>>15-t[s]);return l}),k0=new yf(288);for(var bi=0;bi<144;++bi)k0[bi]=8;for(var bi=144;bi<256;++bi)k0[bi]=9;for(var bi=256;bi<280;++bi)k0[bi]=7;for(var bi=280;bi<288;++bi)k0[bi]=8;var bj=new yf(32);for(var bi=0;bi<32;++bi)bj[bi]=5;var Xht=y2(k0,9,0),Yht=y2(bj,5,0),Ife=function(t){return(t+7)/8|0},Jht=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new yf(t.subarray(e,n))},rA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Dv=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},c6=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:Tfe,l:0};if(s==1){var a=new yf(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(j,I){return j.f-I.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};d!=s-1;)l=n[n[u].f<n[f].f?u++:f++],c=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=i[0].s,r=1;r<s;++r)i[r].s>A&&(A=i[r].s);var m=new gu(A+1),g=x8(n[d-1],m,0);if(g>e){var r=0,y=0,x=g-e,v=1<<x;for(i.sort(function(I,O){return m[O.s]-m[I.s]||I.f-O.f});r<s;++r){var w=i[r].s;if(m[w]>e)y+=v-(1<<g-m[w]),m[w]=e;else break}for(y>>=x;y>0;){var B=i[r].s;m[B]<e?y-=1<<e-m[B]++-1:++r}for(;r>=0&&y;--r){var k=i[r].s;m[k]==e&&(--m[k],++y)}g=e}return{t:new yf(m),l:g}},x8=function(t,e,n){return t.s==-1?Math.max(x8(t.l,e,n+1),x8(t.r,e,n+1)):e[t.s]=n},xX=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new gu(++e),r=0,s=t[0],i=1,a=function(c){n[r++]=c},l=1;l<=e;++l)if(t[l]==s&&l!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[l]}return{c:n.subarray(0,r),n:e}},Lv=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Nfe=function(t,e,n){var r=n.length,s=Ife(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},bX=function(t,e,n,r,s,i,a,l,c,u,d){rA(e,d++,n),++s[256];for(var f=c6(s,15),A=f.t,m=f.l,g=c6(i,15),y=g.t,x=g.l,v=xX(A),w=v.c,B=v.n,k=xX(y),j=k.c,I=k.n,O=new gu(19),F=0;F<w.length;++F)++O[w[F]&31];for(var F=0;F<j.length;++F)++O[j[F]&31];for(var D=c6(O,7),T=D.t,N=D.l,P=19;P>4&&!T[gX[P-1]];--P);var z=u+5<<3,U=Lv(s,k0)+Lv(i,bj)+a,ee=Lv(s,A)+Lv(i,y)+a+14+3*P+Lv(O,T)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&z<=U&&z<=ee)return Nfe(e,d,t.subarray(c,c+u));var q,Z,G,ne;if(rA(e,d,1+(ee<U)),d+=2,ee<U){q=y2(A,m,0),Z=A,G=y2(y,x,0),ne=y;var K=y2(T,N,0);rA(e,d,B-257),rA(e,d+5,I-1),rA(e,d+10,P-4),d+=14;for(var F=0;F<P;++F)rA(e,d+3*F,T[gX[F]]);d+=3*P;for(var H=[w,j],Q=0;Q<2;++Q)for(var X=H[Q],F=0;F<X.length;++F){var re=X[F]&31;rA(e,d,K[re]),d+=T[re],re>15&&(rA(e,d,X[F]>>5&127),d+=X[F]>>12)}}else q=Xht,Z=k0,G=Yht,ne=bj;for(var F=0;F<l;++F){var le=r[F];if(le>255){var re=le>>18&31;Dv(e,d,q[re+257]),d+=Z[re+257],re>7&&(rA(e,d,le>>23&31),d+=BU[re]);var Ae=le&31;Dv(e,d,G[Ae]),d+=ne[Ae],Ae>3&&(Dv(e,d,le>>5&8191),d+=jU[Ae])}else Dv(e,d,q[le]),d+=Z[le]}return Dv(e,d,q[256]),d+Z[256]},Zht=new kU([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tfe=new yf(0),eAt=function(t,e,n,r,s,i){var a=i.z||t.length,l=new yf(r+a+5*(1+Math.ceil(a/7e3))+s),c=l.subarray(r,l.length-s),u=i.l,d=(i.r||0)&7;if(e){d&&(c[0]=i.r>>3);for(var f=Zht[e-1],A=f>>13,m=f&8191,g=(1<<n)-1,y=i.p||new gu(32768),x=i.h||new gu(g+1),v=Math.ceil(n/3),w=2*v,B=function(at){return(t[at]^t[at+1]<<v^t[at+2]<<w)&g},k=new kU(25e3),j=new gu(288),I=new gu(32),O=0,F=0,D=i.i||0,T=0,N=i.w||0,P=0;D+2<a;++D){var z=B(D),U=D&32767,ee=x[z];if(y[U]=ee,x[z]=U,N<=D){var q=a-D;if((O>7e3||T>24576)&&(q>423||!u)){d=bX(t,c,0,k,j,I,F,T,P,D-P,d),T=O=F=0,P=D;for(var Z=0;Z<286;++Z)j[Z]=0;for(var Z=0;Z<30;++Z)I[Z]=0}var G=2,ne=0,K=m,H=U-ee&32767;if(q>2&&z==B(D-H))for(var Q=Math.min(A,q)-1,X=Math.min(32767,D),re=Math.min(258,q);H<=X&&--K&&U!=ee;){if(t[D+G]==t[D+G-H]){for(var le=0;le<re&&t[D+le]==t[D+le-H];++le);if(le>G){if(G=le,ne=H,le>Q)break;for(var Ae=Math.min(H,le-2),xe=0,Z=0;Z<Ae;++Z){var Be=D-H+Z&32767,me=y[Be],ve=Be-me&32767;ve>xe&&(xe=ve,ee=Be)}}}U=ee,ee=y[U],H+=U-ee&32767}if(ne){k[T++]=268435456|g8[G]<<18|yX[ne];var je=g8[G]&31,ye=yX[ne]&31;F+=BU[je]+jU[ye],++j[257+je],++I[ye],N=D+G,++O}else k[T++]=t[D],++j[t[D]]}}for(D=Math.max(D,N);D<a;++D)k[T++]=t[D],++j[t[D]];d=bX(t,c,u,k,j,I,F,T,P,D-P,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=x,i.p=y,i.i=D,i.w=N)}else{for(var D=i.w||0;D<a+u;D+=65535){var ze=D+65535;ze>=a&&(c[d/8|0]=u,ze=a),d=Nfe(c,d+1,t.subarray(D,ze))}i.i=a}return Jht(l,0,r+Ife(d)+s)},_fe=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,a=0;a!=i;){for(var l=Math.min(a+2655,i);a<l;++a)s+=r+=n[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},tAt=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new yf(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return eAt(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},Rfe=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},nAt=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=_fe();s.p(e.dictionary),Rfe(t,2,s.d())}};function b8(t,e){e||(e={});var n=_fe();n.p(t);var r=tAt(t,e,e.dictionary?6:2,4);return nAt(r,e),Rfe(r,r.length-4,n.d()),r}var rAt=typeof TextDecoder<"u"&&new TextDecoder,sAt=0;try{rAt.decode(Tfe,{stream:!0}),sAt=1}catch{}function iAt(t){if(Array.isArray(t))return t}function aAt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function vX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function oAt(t,e){if(t){if(typeof t=="string")return vX(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vX(t,e):void 0}}function lAt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(t,e){return iAt(t)||aAt(t,e)||oAt(t,e)||lAt()}function SX(t,e="utf8"){return new TextDecoder(e).decode(t)}const cAt=new TextEncoder;function uAt(t){return cAt.encode(t)}const dAt=1024*8,fAt=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),u6={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class EU{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=dAt,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const s=n.offset?n.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof EU)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=u6[n].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+r);if(this.littleEndian===fAt&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+r));l.reverse();const c=new u6[n](l.buffer);return this.offset+=r,c.reverse(),c}const a=new u6[n](i);return this.offset+=r,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return SX(this.readBytes(e))}decodeText(e=1,n="utf8"){return SX(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(uAt(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Tb(t){let e=t.length;for(;--e>=0;)t[e]=0}const hAt=3,AAt=258,Ofe=29,pAt=256,mAt=pAt+1+Ofe,Ffe=30,gAt=512,yAt=new Array((mAt+2)*2);Tb(yAt);const xAt=new Array(Ffe*2);Tb(xAt);const bAt=new Array(gAt);Tb(bAt);const vAt=new Array(AAt-hAt+1);Tb(vAt);const wAt=new Array(Ofe);Tb(wAt);const SAt=new Array(Ffe);Tb(SAt);const CAt=(t,e,n,r)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do s=s+e[r++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var v8=CAt;const kAt=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},BAt=new Uint32Array(kAt()),jAt=(t,e,n,r)=>{const s=BAt,i=r+n;t^=-1;for(let a=r;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var qf=jAt,w8={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Dfe={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const EAt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var IAt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)EAt(n,r)&&(t[r]=n[r])}}return t},NAt=t=>{let e=0;for(let r=0,s=t.length;r<s;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,s=0,i=t.length;r<i;r++){let a=t[r];n.set(a,s),s+=a.length}return n},Lfe={assign:IAt,flattenChunks:NAt};let $fe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$fe=!1}const fw=new Uint8Array(256);for(let t=0;t<256;t++)fw[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;fw[254]=fw[254]=1;var TAt=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,s,i,a=t.length,l=0;for(s=0;s<a;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(l),i=0,s=0;i<l;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};const _At=(t,e)=>{if(e<65534&&t.subarray&&$fe)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var RAt=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let a=t[r++];if(a<128){i[s++]=a;continue}let l=fw[a];if(l>4){i[s++]=65533,r+=l-1;continue}for(a&=l===2?31:l===3?15:7;l>1&&r<n;)a=a<<6|t[r++]&63,l--;if(l>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return _At(i,s)},OAt=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+fw[t[n]]>e?n:e},S8={string2buf:TAt,buf2string:RAt,utf8border:OAt};function FAt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var DAt=FAt;const xk=16209,LAt=16191;var $At=function(e,n){let r,s,i,a,l,c,u,d,f,A,m,g,y,x,v,w,B,k,j,I,O,F,D,T;const N=e.state;r=e.next_in,D=e.input,s=r+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(n-e.avail_out),l=i+(e.avail_out-257),c=N.dmax,u=N.wsize,d=N.whave,f=N.wnext,A=N.window,m=N.hold,g=N.bits,y=N.lencode,x=N.distcode,v=(1<<N.lenbits)-1,w=(1<<N.distbits)-1;e:do{g<15&&(m+=D[r++]<<g,g+=8,m+=D[r++]<<g,g+=8),B=y[m&v];t:for(;;){if(k=B>>>24,m>>>=k,g-=k,k=B>>>16&255,k===0)T[i++]=B&65535;else if(k&16){j=B&65535,k&=15,k&&(g<k&&(m+=D[r++]<<g,g+=8),j+=m&(1<<k)-1,m>>>=k,g-=k),g<15&&(m+=D[r++]<<g,g+=8,m+=D[r++]<<g,g+=8),B=x[m&w];n:for(;;){if(k=B>>>24,m>>>=k,g-=k,k=B>>>16&255,k&16){if(I=B&65535,k&=15,g<k&&(m+=D[r++]<<g,g+=8,g<k&&(m+=D[r++]<<g,g+=8)),I+=m&(1<<k)-1,I>c){e.msg="invalid distance too far back",N.mode=xk;break e}if(m>>>=k,g-=k,k=i-a,I>k){if(k=I-k,k>d&&N.sane){e.msg="invalid distance too far back",N.mode=xk;break e}if(O=0,F=A,f===0){if(O+=u-k,k<j){j-=k;do T[i++]=A[O++];while(--k);O=i-I,F=T}}else if(f<k){if(O+=u+f-k,k-=f,k<j){j-=k;do T[i++]=A[O++];while(--k);if(O=0,f<j){k=f,j-=k;do T[i++]=A[O++];while(--k);O=i-I,F=T}}}else if(O+=f-k,k<j){j-=k;do T[i++]=A[O++];while(--k);O=i-I,F=T}for(;j>2;)T[i++]=F[O++],T[i++]=F[O++],T[i++]=F[O++],j-=3;j&&(T[i++]=F[O++],j>1&&(T[i++]=F[O++]))}else{O=i-I;do T[i++]=T[O++],T[i++]=T[O++],T[i++]=T[O++],j-=3;while(j>2);j&&(T[i++]=T[O++],j>1&&(T[i++]=T[O++]))}}else if((k&64)===0){B=x[(B&65535)+(m&(1<<k)-1)];continue n}else{e.msg="invalid distance code",N.mode=xk;break e}break}}else if((k&64)===0){B=y[(B&65535)+(m&(1<<k)-1)];continue t}else if(k&32){N.mode=LAt;break e}else{e.msg="invalid literal/length code",N.mode=xk;break e}break}}while(r<s&&i<l);j=g>>3,r-=j,g-=j<<3,m&=(1<<g)-1,e.next_in=r,e.next_out=i,e.avail_in=r<s?5+(s-r):5-(r-s),e.avail_out=i<l?257+(l-i):257-(i-l),N.hold=m,N.bits=g};const Ly=15,CX=852,kX=592,BX=0,d6=1,jX=2,PAt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),zAt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),UAt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),MAt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),QAt=(t,e,n,r,s,i,a,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,m=0,g=0,y=0,x=0,v=0,w=0,B,k,j,I,O,F=null,D;const T=new Uint16Array(Ly+1),N=new Uint16Array(Ly+1);let P=null,z,U,ee;for(u=0;u<=Ly;u++)T[u]=0;for(d=0;d<r;d++)T[e[n+d]]++;for(m=c,A=Ly;A>=1&&T[A]===0;A--);if(m>A&&(m=A),A===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&T[f]===0;f++);for(m<f&&(m=f),x=1,u=1;u<=Ly;u++)if(x<<=1,x-=T[u],x<0)return-1;if(x>0&&(t===BX||A!==1))return-1;for(N[1]=0,u=1;u<Ly;u++)N[u+1]=N[u]+T[u];for(d=0;d<r;d++)e[n+d]!==0&&(a[N[e[n+d]]++]=d);if(t===BX?(F=P=a,D=20):t===d6?(F=PAt,P=zAt,D=257):(F=UAt,P=MAt,D=0),w=0,d=0,u=f,O=i,g=m,y=0,j=-1,v=1<<m,I=v-1,t===d6&&v>CX||t===jX&&v>kX)return 1;for(;;){z=u-y,a[d]+1<D?(U=0,ee=a[d]):a[d]>=D?(U=P[a[d]-D],ee=F[a[d]-D]):(U=96,ee=0),B=1<<u-y,k=1<<g,f=k;do k-=B,s[O+(w>>y)+k]=z<<24|U<<16|ee|0;while(k!==0);for(B=1<<u-1;w&B;)B>>=1;if(B!==0?(w&=B-1,w+=B):w=0,d++,--T[u]===0){if(u===A)break;u=e[n+a[d]]}if(u>m&&(w&I)!==j){for(y===0&&(y=m),O+=f,g=u-y,x=1<<g;g+y<A&&(x-=T[g+y],!(x<=0));)g++,x<<=1;if(v+=1<<g,t===d6&&v>CX||t===jX&&v>kX)return 1;j=w&I,s[j]=m<<24|g<<16|O-i|0}}return w!==0&&(s[O+w]=u-y<<24|64<<16|0),l.bits=m,0};var x2=QAt;const HAt=0,Pfe=1,zfe=2,{Z_FINISH:EX,Z_BLOCK:WAt,Z_TREES:bk,Z_OK:B0,Z_STREAM_END:VAt,Z_NEED_DICT:qAt,Z_STREAM_ERROR:pd,Z_DATA_ERROR:Ufe,Z_MEM_ERROR:Mfe,Z_BUF_ERROR:GAt,Z_DEFLATED:IX}=Dfe,dN=16180,NX=16181,TX=16182,_X=16183,RX=16184,OX=16185,FX=16186,DX=16187,LX=16188,$X=16189,vj=16190,sA=16191,f6=16192,PX=16193,h6=16194,zX=16195,UX=16196,MX=16197,QX=16198,vk=16199,wk=16200,HX=16201,WX=16202,VX=16203,qX=16204,GX=16205,A6=16206,KX=16207,XX=16208,Li=16209,Qfe=16210,Hfe=16211,KAt=852,XAt=592,YAt=15,JAt=YAt,YX=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function ZAt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const G0=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<dN||e.mode>Hfe?1:0},Wfe=t=>{if(G0(t))return pd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=dN,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(KAt),e.distcode=e.distdyn=new Int32Array(XAt),e.sane=1,e.back=-1,B0},Vfe=t=>{if(G0(t))return pd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Wfe(t)},qfe=(t,e)=>{let n;if(G0(t))return pd;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?pd:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Vfe(t))},Gfe=(t,e)=>{if(!t)return pd;const n=new ZAt;t.state=n,n.strm=t,n.window=null,n.mode=dN;const r=qfe(t,e);return r!==B0&&(t.state=null),r},ept=t=>Gfe(t,JAt);let JX=!0,p6,m6;const tpt=t=>{if(JX){p6=new Int32Array(512),m6=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(x2(Pfe,t.lens,0,288,p6,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;x2(zfe,t.lens,0,32,m6,0,t.work,{bits:5}),JX=!1}t.lencode=p6,t.lenbits=9,t.distcode=m6,t.distbits=5},Kfe=(t,e,n,r)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(e.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},npt=(t,e)=>{let n,r,s,i,a,l,c,u,d,f,A,m,g,y,x=0,v,w,B,k,j,I,O,F;const D=new Uint8Array(4);let T,N;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(G0(t)||!t.output||!t.input&&t.avail_in!==0)return pd;n=t.state,n.mode===sA&&(n.mode=f6),a=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,f=l,A=c,F=B0;e:for(;;)switch(n.mode){case dN:if(n.wrap===0){n.mode=f6;break}for(;d<16;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,D[0]=u&255,D[1]=u>>>8&255,n.check=qf(n.check,D,2,0),u=0,d=0,n.mode=NX;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Li;break}if((u&15)!==IX){t.msg="unknown compression method",n.mode=Li;break}if(u>>>=4,d-=4,O=(u&15)+8,n.wbits===0&&(n.wbits=O),O>15||O>n.wbits){t.msg="invalid window size",n.mode=Li;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?$X:sA,u=0,d=0;break;case NX:for(;d<16;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==IX){t.msg="unknown compression method",n.mode=Li;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Li;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,n.check=qf(n.check,D,2,0)),u=0,d=0,n.mode=TX;case TX:for(;d<32;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,n.check=qf(n.check,D,4,0)),u=0,d=0,n.mode=_X;case _X:for(;d<16;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,n.check=qf(n.check,D,2,0)),u=0,d=0,n.mode=RX;case RX:if(n.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,n.check=qf(n.check,D,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=OX;case OX:if(n.flags&1024&&(m=n.length,m>l&&(m=l),m&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+m),O)),n.flags&512&&n.wrap&4&&(n.check=qf(n.check,r,m,i)),l-=m,i+=m,n.length-=m),n.length))break e;n.length=0,n.mode=FX;case FX:if(n.flags&2048){if(l===0)break e;m=0;do O=r[i+m++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O));while(O&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=qf(n.check,r,m,i)),l-=m,i+=m,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=DX;case DX:if(n.flags&4096){if(l===0)break e;m=0;do O=r[i+m++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O));while(O&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=qf(n.check,r,m,i)),l-=m,i+=m,O)break e}else n.head&&(n.head.comment=null);n.mode=LX;case LX:if(n.flags&512){for(;d<16;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Li;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=sA;break;case $X:for(;d<32;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}t.adler=n.check=YX(u),u=0,d=0,n.mode=vj;case vj:if(n.havedict===0)return t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=l,n.hold=u,n.bits=d,qAt;t.adler=n.check=1,n.mode=sA;case sA:if(e===WAt||e===bk)break e;case f6:if(n.last){u>>>=d&7,d-=d&7,n.mode=A6;break}for(;d<3;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=PX;break;case 1:if(tpt(n),n.mode=vk,e===bk){u>>>=2,d-=2;break e}break;case 2:n.mode=UX;break;case 3:t.msg="invalid block type",n.mode=Li}u>>>=2,d-=2;break;case PX:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Li;break}if(n.length=u&65535,u=0,d=0,n.mode=h6,e===bk)break e;case h6:n.mode=zX;case zX:if(m=n.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;s.set(r.subarray(i,i+m),a),l-=m,i+=m,c-=m,a+=m,n.length-=m;break}n.mode=sA;break;case UX:for(;d<14;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Li;break}n.have=0,n.mode=MX;case MX:for(;n.have<n.ncode;){for(;d<3;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.lens[P[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},F=x2(HAt,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,F){t.msg="invalid code lengths set",n.mode=Li;break}n.have=0,n.mode=QX;case QX:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[u&(1<<n.lenbits)-1],v=x>>>24,w=x>>>16&255,B=x&65535,!(v<=d);){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(B<16)u>>>=v,d-=v,n.lens[n.have++]=B;else{if(B===16){for(N=v+2;d<N;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(u>>>=v,d-=v,n.have===0){t.msg="invalid bit length repeat",n.mode=Li;break}O=n.lens[n.have-1],m=3+(u&3),u>>>=2,d-=2}else if(B===17){for(N=v+3;d<N;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}u>>>=v,d-=v,O=0,m=3+(u&7),u>>>=3,d-=3}else{for(N=v+7;d<N;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}u>>>=v,d-=v,O=0,m=11+(u&127),u>>>=7,d-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Li;break}for(;m--;)n.lens[n.have++]=O}}if(n.mode===Li)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Li;break}if(n.lenbits=9,T={bits:n.lenbits},F=x2(Pfe,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,F){t.msg="invalid literal/lengths set",n.mode=Li;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},F=x2(zfe,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,F){t.msg="invalid distances set",n.mode=Li;break}if(n.mode=vk,e===bk)break e;case vk:n.mode=wk;case wk:if(l>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=l,n.hold=u,n.bits=d,$At(t,A),a=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,n.mode===sA&&(n.back=-1);break}for(n.back=0;x=n.lencode[u&(1<<n.lenbits)-1],v=x>>>24,w=x>>>16&255,B=x&65535,!(v<=d);){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(w&&(w&240)===0){for(k=v,j=w,I=B;x=n.lencode[I+((u&(1<<k+j)-1)>>k)],v=x>>>24,w=x>>>16&255,B=x&65535,!(k+v<=d);){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}u>>>=k,d-=k,n.back+=k}if(u>>>=v,d-=v,n.back+=v,n.length=B,w===0){n.mode=GX;break}if(w&32){n.back=-1,n.mode=sA;break}if(w&64){t.msg="invalid literal/length code",n.mode=Li;break}n.extra=w&15,n.mode=HX;case HX:if(n.extra){for(N=n.extra;d<N;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=WX;case WX:for(;x=n.distcode[u&(1<<n.distbits)-1],v=x>>>24,w=x>>>16&255,B=x&65535,!(v<=d);){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if((w&240)===0){for(k=v,j=w,I=B;x=n.distcode[I+((u&(1<<k+j)-1)>>k)],v=x>>>24,w=x>>>16&255,B=x&65535,!(k+v<=d);){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}u>>>=k,d-=k,n.back+=k}if(u>>>=v,d-=v,n.back+=v,w&64){t.msg="invalid distance code",n.mode=Li;break}n.offset=B,n.extra=w&15,n.mode=VX;case VX:if(n.extra){for(N=n.extra;d<N;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Li;break}n.mode=qX;case qX:if(c===0)break e;if(m=A-c,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Li;break}m>n.wnext?(m-=n.wnext,g=n.wsize-m):g=n.wnext-m,m>n.length&&(m=n.length),y=n.window}else y=s,g=a-n.offset,m=n.length;m>c&&(m=c),c-=m,n.length-=m;do s[a++]=y[g++];while(--m);n.length===0&&(n.mode=wk);break;case GX:if(c===0)break e;s[a++]=n.length,c--,n.mode=wk;break;case A6:if(n.wrap){for(;d<32;){if(l===0)break e;l--,u|=r[i++]<<d,d+=8}if(A-=c,t.total_out+=A,n.total+=A,n.wrap&4&&A&&(t.adler=n.check=n.flags?qf(n.check,s,A,a-A):v8(n.check,s,A,a-A)),A=c,n.wrap&4&&(n.flags?u:YX(u))!==n.check){t.msg="incorrect data check",n.mode=Li;break}u=0,d=0}n.mode=KX;case KX:if(n.wrap&&n.flags){for(;d<32;){if(l===0)break e;l--,u+=r[i++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Li;break}u=0,d=0}n.mode=XX;case XX:F=VAt;break e;case Li:F=Ufe;break e;case Qfe:return Mfe;case Hfe:default:return pd}return t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=l,n.hold=u,n.bits=d,(n.wsize||A!==t.avail_out&&n.mode<Li&&(n.mode<A6||e!==EX))&&Kfe(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,n.total+=A,n.wrap&4&&A&&(t.adler=n.check=n.flags?qf(n.check,s,A,t.next_out-A):v8(n.check,s,A,t.next_out-A)),t.data_type=n.bits+(n.last?64:0)+(n.mode===sA?128:0)+(n.mode===vk||n.mode===h6?256:0),(f===0&&A===0||e===EX)&&F===B0&&(F=GAt),F},rpt=t=>{if(G0(t))return pd;let e=t.state;return e.window&&(e.window=null),t.state=null,B0},spt=(t,e)=>{if(G0(t))return pd;const n=t.state;return(n.wrap&2)===0?pd:(n.head=e,e.done=!1,B0)},ipt=(t,e)=>{const n=e.length;let r,s,i;return G0(t)||(r=t.state,r.wrap!==0&&r.mode!==vj)?pd:r.mode===vj&&(s=1,s=v8(s,e,n,0),s!==r.check)?Ufe:(i=Kfe(t,e,n,n),i?(r.mode=Qfe,Mfe):(r.havedict=1,B0))};var apt=Vfe,opt=qfe,lpt=Wfe,cpt=ept,upt=Gfe,dpt=npt,fpt=rpt,hpt=spt,Apt=ipt,ppt="pako inflate (from Nodeca project)",fA={inflateReset:apt,inflateReset2:opt,inflateResetKeep:lpt,inflateInit:cpt,inflateInit2:upt,inflate:dpt,inflateEnd:fpt,inflateGetHeader:hpt,inflateSetDictionary:Apt,inflateInfo:ppt};function mpt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gpt=mpt;const Xfe=Object.prototype.toString,{Z_NO_FLUSH:ypt,Z_FINISH:xpt,Z_OK:hw,Z_STREAM_END:g6,Z_NEED_DICT:y6,Z_STREAM_ERROR:bpt,Z_DATA_ERROR:ZX,Z_MEM_ERROR:vpt}=Dfe;function DS(t){this.options=Lfe.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DAt,this.strm.avail_out=0;let n=fA.inflateInit2(this.strm,e.windowBits);if(n!==hw)throw new Error(w8[n]);if(this.header=new gpt,fA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=S8.string2buf(e.dictionary):Xfe.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=fA.inflateSetDictionary(this.strm,e.dictionary),n!==hw)))throw new Error(w8[n])}DS.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,a,l;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?xpt:ypt,Xfe.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=fA.inflate(n,a),i===y6&&s&&(i=fA.inflateSetDictionary(n,s),i===hw?i=fA.inflate(n,a):i===ZX&&(i=y6));n.avail_in>0&&i===g6&&n.state.wrap>0&&t[n.next_in]!==0;)fA.inflateReset(n),i=fA.inflate(n,a);switch(i){case bpt:case ZX:case y6:case vpt:return this.onEnd(i),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||i===g6))if(this.options.to==="string"){let c=S8.utf8border(n.output,n.next_out),u=n.next_out-c,d=S8.buf2string(n.output,c);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(c,c+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===hw&&l===0)){if(i===g6)return i=fA.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};DS.prototype.onData=function(t){this.chunks.push(t)};DS.prototype.onEnd=function(t){t===hw&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Lfe.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function wpt(t,e){const n=new DS(e);if(n.push(t),n.err)throw n.msg||w8[n.err];return n.result}var Spt=DS,Cpt=wpt,kpt={Inflate:Spt,inflate:Cpt};const{Inflate:Bpt,inflate:jpt}=kpt;var eY=Bpt,Ept=jpt;const Yfe=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;Yfe[t]=e}const tY=4294967295;function Ipt(t,e,n){let r=t;for(let s=0;s<n;s++)r=Yfe[(r^e[s])&255]^r>>>8;return r}function Npt(t,e){return(Ipt(tY,t,e)^tY)>>>0}function nY(t,e,n){const r=t.readUint32(),s=Npt(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function Jfe(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function Zfe(t,e,n,r){let s=0;for(;s<r;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-r]&255}function ehe(t,e,n,r){let s=0;if(n.length===0)for(;s<r;s++)e[s]=t[s];else for(;s<r;s++)e[s]=t[s]+n[s]&255}function the(t,e,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(n[i]>>1)&255;for(;i<r;i++)e[i]=t[i]+(e[i-s]+n[i]>>1)&255}}function nhe(t,e,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+n[i]&255;for(;i<r;i++)e[i]=t[i]+Tpt(e[i-s],n[i],n[i-s])&255}}function Tpt(t,e,n){const r=t+e-n,s=Math.abs(r-t),i=Math.abs(r-e),a=Math.abs(r-n);return s<=i&&s<=a?t:i<=a?e:n}function _pt(t,e,n,r,s,i){switch(t){case 0:Jfe(e,n,s);break;case 1:Zfe(e,n,s,i);break;case 2:ehe(e,n,r,s);break;case 3:the(e,n,r,s,i);break;case 4:nhe(e,n,r,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Rpt=new Uint16Array([255]),Opt=new Uint8Array(Rpt.buffer),Fpt=Opt[0]===255;function Dpt(t){const{data:e,width:n,height:r,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*s,c=new Uint8Array(r*n*l);let u=0;for(let d=0;d<7;d++){const f=a[d],A=Math.ceil((n-f.x)/f.xStep),m=Math.ceil((r-f.y)/f.yStep);if(A<=0||m<=0)continue;const g=A*l,y=new Uint8Array(g);for(let x=0;x<m;x++){const v=e[u++],w=e.subarray(u,u+g);u+=g;const B=new Uint8Array(g);_pt(v,w,B,y,g,l),y.set(B);for(let k=0;k<A;k++){const j=f.x+k*f.xStep,I=f.y+x*f.yStep;if(!(j>=n||I>=r))for(let O=0;O<l;O++)c[(I*n+j)*l+O]=B[k*l+O]}}}if(i===16){const d=new Uint16Array(c.buffer);if(Fpt)for(let f=0;f<d.length;f++)d[f]=Lpt(d[f]);return d}else return c}function Lpt(t){return(t&255)<<8|t>>8&255}const $pt=new Uint16Array([255]),Ppt=new Uint8Array($pt.buffer),zpt=Ppt[0]===255,Upt=new Uint8Array(0);function rY(t){const{data:e,width:n,height:r,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,l=Math.ceil(i/8*s*n),c=new Uint8Array(r*l);let u=Upt,d=0,f,A;for(let m=0;m<r;m++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(m*l,(m+1)*l),e[d]){case 0:Jfe(f,A,l);break;case 1:Zfe(f,A,l,a);break;case 2:ehe(f,A,u,l);break;case 3:the(f,A,u,l,a);break;case 4:nhe(f,A,u,l,a);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(i===16){const m=new Uint16Array(c.buffer);if(zpt)for(let g=0;g<m.length;g++)m[g]=Mpt(m[g]);return m}else return c}function Mpt(t){return(t&255)<<8|t>>8&255}const IB=Uint8Array.of(137,80,78,71,13,10,26,10);function sY(t){if(!Qpt(t.readBytes(IB.length)))throw new Error("wrong PNG signature")}function Qpt(t){if(t.length<IB.length)return!1;for(let e=0;e<IB.length;e++)if(t[e]!==IB[e])return!1;return!0}const Hpt="tEXt",Wpt=0,rhe=new TextDecoder("latin1");function Vpt(t){if(Gpt(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const qpt=/^[\u0000-\u00FF]*$/;function Gpt(t){if(!qpt.test(t))throw new Error("invalid latin1 text")}function Kpt(t,e,n){const r=she(e);t[r]=Xpt(e,n-r.length-1)}function she(t){for(t.mark();t.readByte()!==Wpt;);const e=t.offset;t.reset();const n=rhe.decode(t.readBytes(e-t.offset-1));return t.skip(1),Vpt(n),n}function Xpt(t,e){return rhe.decode(t.readBytes(e))}const iu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},x6={UNKNOWN:-1,DEFLATE:0},iY={UNKNOWN:-1,ADAPTIVE:0},b6={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Sk={NONE:0,BACKGROUND:1,PREVIOUS:2},v6={SOURCE:0,OVER:1};class Ypt extends EU{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new eY,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=x6.UNKNOWN,this._filterMethod=iY.UNKNOWN,this._interlaceMethod=b6.UNKNOWN,this._colorType=iu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(sY(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(sY(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Hpt:Kpt(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?nY(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?nY(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Jpt(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case iu.GREYSCALE:r=1;break;case iu.TRUECOLOUR:r=3;break;case iu.INDEXED_COLOUR:r=1;break;case iu.GREYSCALE_ALPHA:r=2;break;case iu.TRUECOLOUR_ALPHA:r=4;break;case iu.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==x6.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let s=0;s<n;s++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case iu.GREYSCALE:case iu.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case iu.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case iu.UNKNOWN:case iu.GREYSCALE_ALPHA:case iu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=she(this),r=this.readUint8();if(r!==x6.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const s=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Ept(s)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=rY({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(r,s,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case Sk.NONE:break;case Sk.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const a=(s*e.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)r.data[a+l]=0}break;case Sk.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,s=(i,a)=>{const l=((i+n.yOffset)*this._png.width+n.xOffset+a)*this._png.channels,c=(i*n.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case v6.SOURCE:for(let i=0;i<n.height;i++)for(let a=0;a<n.width;a++){const{index:l,frameIndex:c}=s(i,a);for(let u=0;u<this._png.channels;u++)e.data[l+u]=n.data[c+u]}break;case v6.OVER:for(let i=0;i<n.height;i++)for(let a=0;a<n.width;a++){const{index:l,frameIndex:c}=s(i,a);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/r,f=u%(this._png.channels-1)===0?1:n.data[c+u],A=Math.floor(d*f+(1-d)*e.data[l+u]);e.data[l+u]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==iY.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===b6.NO_INTERLACE)this._png.data=rY({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===b6.ADAM7)this._png.data=Dpt({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Sk.NONE,blendOp:v6.SOURCE,data:e}),this._inflator=new eY,this._writingDataChunks=!1}}function Jpt(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var aY;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(aY||(aY={}));function Zpt(t,e){return new Ypt(t,e).decode()}var nr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function w6(){nr.console&&typeof nr.console.log=="function"&&nr.console.log.apply(nr.console,arguments)}var Zs={log:w6,warn:function(t){nr.console&&(typeof nr.console.warn=="function"?nr.console.warn.apply(nr.console,arguments):w6.call(null,arguments))},error:function(t){nr.console&&(typeof nr.console.error=="function"?nr.console.error.apply(nr.console,arguments):w6(t))}};function S6(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){bg(r.response,e,n)},r.onerror=function(){Zs.error("could not download file")},r.send()}function oY(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ck(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bg=nr.saveAs||((typeof window>"u"?"undefined":_s(window))!=="object"||window!==nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=nr.URL||nr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?oY(s.href)?S6(t,e,n):Ck(s,s.target="_blank"):Ck(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Ck(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(oY(t))S6(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Ck(r)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:_s(i)!=="object"&&(Zs.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return S6(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(nr.HTMLElement)||nr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":_s(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},l.readAsDataURL(t)}else{var c=nr.URL||nr.webkitURL,u=c.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function ihe(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var NB=nr.atob.bind(nr),lY=nr.btoa.bind(nr);function C6(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=yl(n,r,s,i,e[0],7,-680876936),i=yl(i,n,r,s,e[1],12,-389564586),s=yl(s,i,n,r,e[2],17,606105819),r=yl(r,s,i,n,e[3],22,-1044525330),n=yl(n,r,s,i,e[4],7,-176418897),i=yl(i,n,r,s,e[5],12,1200080426),s=yl(s,i,n,r,e[6],17,-1473231341),r=yl(r,s,i,n,e[7],22,-45705983),n=yl(n,r,s,i,e[8],7,1770035416),i=yl(i,n,r,s,e[9],12,-1958414417),s=yl(s,i,n,r,e[10],17,-42063),r=yl(r,s,i,n,e[11],22,-1990404162),n=yl(n,r,s,i,e[12],7,1804603682),i=yl(i,n,r,s,e[13],12,-40341101),s=yl(s,i,n,r,e[14],17,-1502002290),n=xl(n,r=yl(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=xl(i,n,r,s,e[6],9,-1069501632),s=xl(s,i,n,r,e[11],14,643717713),r=xl(r,s,i,n,e[0],20,-373897302),n=xl(n,r,s,i,e[5],5,-701558691),i=xl(i,n,r,s,e[10],9,38016083),s=xl(s,i,n,r,e[15],14,-660478335),r=xl(r,s,i,n,e[4],20,-405537848),n=xl(n,r,s,i,e[9],5,568446438),i=xl(i,n,r,s,e[14],9,-1019803690),s=xl(s,i,n,r,e[3],14,-187363961),r=xl(r,s,i,n,e[8],20,1163531501),n=xl(n,r,s,i,e[13],5,-1444681467),i=xl(i,n,r,s,e[2],9,-51403784),s=xl(s,i,n,r,e[7],14,1735328473),n=bl(n,r=xl(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=bl(i,n,r,s,e[8],11,-2022574463),s=bl(s,i,n,r,e[11],16,1839030562),r=bl(r,s,i,n,e[14],23,-35309556),n=bl(n,r,s,i,e[1],4,-1530992060),i=bl(i,n,r,s,e[4],11,1272893353),s=bl(s,i,n,r,e[7],16,-155497632),r=bl(r,s,i,n,e[10],23,-1094730640),n=bl(n,r,s,i,e[13],4,681279174),i=bl(i,n,r,s,e[0],11,-358537222),s=bl(s,i,n,r,e[3],16,-722521979),r=bl(r,s,i,n,e[6],23,76029189),n=bl(n,r,s,i,e[9],4,-640364487),i=bl(i,n,r,s,e[12],11,-421815835),s=bl(s,i,n,r,e[15],16,530742520),n=vl(n,r=bl(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=vl(i,n,r,s,e[7],10,1126891415),s=vl(s,i,n,r,e[14],15,-1416354905),r=vl(r,s,i,n,e[5],21,-57434055),n=vl(n,r,s,i,e[12],6,1700485571),i=vl(i,n,r,s,e[3],10,-1894986606),s=vl(s,i,n,r,e[10],15,-1051523),r=vl(r,s,i,n,e[1],21,-2054922799),n=vl(n,r,s,i,e[8],6,1873313359),i=vl(i,n,r,s,e[15],10,-30611744),s=vl(s,i,n,r,e[6],15,-1560198380),r=vl(r,s,i,n,e[13],21,1309151649),n=vl(n,r,s,i,e[4],6,-145523070),i=vl(i,n,r,s,e[11],10,-1120210379),s=vl(s,i,n,r,e[2],15,718787259),r=vl(r,s,i,n,e[9],21,-343485551),t[0]=Jp(n,t[0]),t[1]=Jp(r,t[1]),t[2]=Jp(s,t[2]),t[3]=Jp(i,t[3])}function fN(t,e,n,r,s,i){return e=Jp(Jp(e,t),Jp(r,i)),Jp(e<<s|e>>>32-s,n)}function yl(t,e,n,r,s,i,a){return fN(e&n|~e&r,t,e,s,i,a)}function xl(t,e,n,r,s,i,a){return fN(e&r|n&~r,t,e,s,i,a)}function bl(t,e,n,r,s,i,a){return fN(e^n^r,t,e,s,i,a)}function vl(t,e,n,r,s,i,a){return fN(n^(e|~r),t,e,s,i,a)}function ahe(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)C6(r,emt(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(C6(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,C6(r,s),r}function emt(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var cY="0123456789abcdef".split("");function tmt(t){for(var e="",n=0;n<4;n++)e+=cY[t>>8*n+4&15]+cY[t>>8*n&15];return e}function nmt(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function C8(t){return ahe(t).map(nmt).join("")}var rmt=(function(t){for(var e=0;e<t.length;e++)t[e]=tmt(t[e]);return t.join("")})(ahe("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jp(t,e){if(rmt){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function k8(t,e){var n,r,s,i;if(t!==n){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+a.charCodeAt(c))%256,l[c]=l[u],l[u]=d}n=t,r=l}else l=r;var f=e.length,A=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[A=(A+1)%256]))%256,l[A]=l[m],l[m]=d,a=l[(l[A]+l[m])%256],g+=String.fromCharCode(e.charCodeAt(c)^a);return g}var uY={print:4,modify:8,copy:16,"annot-forms":32};function Zy(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(l){if(uY.perm!==void 0)throw new Error("Invalid permission: "+l);s+=uY[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=C8(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=k8(this.encryptionKey,this.padding)}function e1(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[r]}return e}function dY(t){if(_s(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var a=e[n][i];try{a[0].apply(t,r)}catch(l){nr.console&&Zs.error("jsPDF PubSub Error",l.message,l)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function wj(t){if(!(this instanceof wj))return new wj(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ohe(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Bg(t,e,n,r,s){if(!(this instanceof Bg))return new Bg(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ohe.call(this,r,s)}function c1(t,e,n,r,s){if(!(this instanceof c1))return new c1(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ohe.call(this,r,s)}function Rn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],l=1,c=16,u="S",d=null;_s(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},m={internal:{},__private__:{}};m.__private__.PubSub=dY;var g="1.3",y=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(M){g=M};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return x};var v=m.__private__.getPageFormat=function(M){return x[M]};s=s||"a4";var w="compat",B="advanced",k=w;function j(){this.saveGraphicsState(),ie(new cn(rn,0,0,-rn,0,Xc()*rn).toString()+" cm"),this.setFontSize(this.getFontSize()/rn),u="n",k=B}function I(){this.restoreGraphicsState(),u="S",k=w}var O=m.__private__.combineFontStyleAndFontWeight=function(M,ae){if(M=="bold"&&ae=="normal"||M=="bold"&&ae==400||M=="normal"&&ae=="italic"||M=="bold"&&ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ae&&(M=ae==400||ae==="normal"?M==="italic"?"italic":"normal":ae!=700&&ae!=="bold"||M!=="normal"?(ae==700?"bold":ae)+""+M:"bold"),M};m.advancedAPI=function(M){var ae=k===w;return ae&&j.call(this),typeof M!="function"||(M(this),ae&&I.call(this)),this},m.compatAPI=function(M){var ae=k===B;return ae&&I.call(this),typeof M!="function"||(M(this),ae&&j.call(this)),this},m.isAdvancedAPI=function(){return k===B};var F,D=function(M){if(k!==B)throw new Error(M+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(M,ae){var Se=e||ae;if(isNaN(M)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return M.toFixed(Se).replace(/0+$/,"")};F=m.hpf=m.__private__.hpf=typeof c=="number"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return T(M,c)}:c==="smart"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return T(M,M>-1&&M<1?16:5)}:function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return T(M,16)};var N=m.f2=m.__private__.f2=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f2");return T(M,2)},P=m.__private__.f3=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f3");return T(M,3)},z=m.scale=m.__private__.scale=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.scale");return k===w?M*rn:k===B?M:void 0},U=function(M){return z((function(ae){return k===w?Xc()-ae:k===B?ae:void 0})(M))};m.__private__.setPrecision=m.setPrecision=function(M){typeof parseInt(M,10)=="number"&&(e=parseInt(M,10))};var ee,q="00000000000000000000000000000000",Z=m.__private__.getFileId=function(){return q},G=m.__private__.setFileId=function(M){return q=M!==void 0&&/^[a-fA-F0-9]{32}$/.test(M)?M.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ta=new Zy(d.userPermissions,d.userPassword,d.ownerPassword,q)),q};m.setFileId=function(M){return G(M),this},m.getFileId=function(){return Z()};var ne=m.__private__.convertDateToPDFDate=function(M){var ae=M.getTimezoneOffset(),Se=ae<0?"+":"-",Oe=Math.floor(Math.abs(ae/60)),Qe=Math.abs(ae%60),bt=[Se,re(Oe),"'",re(Qe),"'"].join("");return["D:",M.getFullYear(),re(M.getMonth()+1),re(M.getDate()),re(M.getHours()),re(M.getMinutes()),re(M.getSeconds()),bt].join("")},K=m.__private__.convertPDFDateToDate=function(M){var ae=parseInt(M.substr(2,4),10),Se=parseInt(M.substr(6,2),10)-1,Oe=parseInt(M.substr(8,2),10),Qe=parseInt(M.substr(10,2),10),bt=parseInt(M.substr(12,2),10),Tt=parseInt(M.substr(14,2),10);return new Date(ae,Se,Oe,Qe,bt,Tt,0)},H=m.__private__.setCreationDate=function(M){var ae;if(M===void 0&&(M=new Date),M instanceof Date)ae=ne(M);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(M))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ae=M}return ee=ae},Q=m.__private__.getCreationDate=function(M){var ae=ee;return M==="jsDate"&&(ae=K(ee)),ae};m.setCreationDate=function(M){return H(M),this},m.getCreationDate=function(M){return Q(M)};var X,re=m.__private__.padd2=function(M){return("0"+parseInt(M)).slice(-2)},le=m.__private__.padd2Hex=function(M){return("00"+(M=M.toString())).substr(M.length)},Ae=0,xe=[],Be=[],me=0,ve=[],je=[],ye=!1,ze=Be;m.__private__.setCustomOutputDestination=function(M){ye=!0,ze=M};var at=function(M){ye||(ze=M)};m.__private__.resetCustomOutputDestination=function(){ye=!1,ze=Be};var ie=m.__private__.out=function(M){return M=M.toString(),me+=M.length+1,ze.push(M),ze},Le=m.__private__.write=function(M){return ie(arguments.length===1?M.toString():Array.prototype.join.call(arguments," "))},nt=m.__private__.getArrayBuffer=function(M){for(var ae=M.length,Se=new ArrayBuffer(ae),Oe=new Uint8Array(Se);ae--;)Oe[ae]=M.charCodeAt(ae);return Se},Et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Et};var _e=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(M){return _e=k===B?M/rn:M,this};var ht,ot=m.__private__.getFontSize=m.getFontSize=function(){return k===w?_e:_e*rn},$t=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(M){return $t=M,this},m.__private__.getR2L=m.getR2L=function(){return $t};var kt,Ht=m.__private__.setZoomMode=function(M){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(M))ht=M;else if(isNaN(M)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(M)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+M+'" is not recognized.');ht=M}else ht=parseInt(M,10)};m.__private__.getZoomMode=function(){return ht};var Sn,Ut=m.__private__.setPageMode=function(M){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(M)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+M+'" is not recognized.');kt=M};m.__private__.getPageMode=function(){return kt};var en=m.__private__.setLayoutMode=function(M){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(M)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+M+'" is not recognized.');Sn=M};m.__private__.getLayoutMode=function(){return Sn},m.__private__.setDisplayMode=m.setDisplayMode=function(M,ae,Se){return Ht(M),en(ae),Ut(Se),this};var fn={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(M){if(Object.keys(fn).indexOf(M)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return fn[M]},m.__private__.getDocumentProperties=function(){return fn},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(M){for(var ae in fn)fn.hasOwnProperty(ae)&&M[ae]&&(fn[ae]=M[ae]);return this},m.__private__.setDocumentProperty=function(M,ae){if(Object.keys(fn).indexOf(M)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return fn[M]=ae};var Qt,rn,Yt,sn,Fn,Ft={},xn={},ke=[],$e={},yt={},Ct={},_t={},Lt=null,zt=0,Jt=[],dt=new dY(m),pr=t.hotfixes||[],Kr={},Hn={},Ls=[],cn=function M(ae,Se,Oe,Qe,bt,Tt){if(!(this instanceof M))return new M(ae,Se,Oe,Qe,bt,Tt);isNaN(ae)&&(ae=1),isNaN(Se)&&(Se=0),isNaN(Oe)&&(Oe=0),isNaN(Qe)&&(Qe=1),isNaN(bt)&&(bt=0),isNaN(Tt)&&(Tt=0),this._matrix=[ae,Se,Oe,Qe,bt,Tt]};Object.defineProperty(cn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(cn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(cn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(cn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(cn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(cn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(cn.prototype,"a",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(cn.prototype,"b",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(cn.prototype,"c",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(cn.prototype,"d",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(cn.prototype,"e",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(cn.prototype,"f",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(cn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(cn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(cn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(cn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),cn.prototype.join=function(M){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(M)},cn.prototype.multiply=function(M){var ae=M.sx*this.sx+M.shy*this.shx,Se=M.sx*this.shy+M.shy*this.sy,Oe=M.shx*this.sx+M.sy*this.shx,Qe=M.shx*this.shy+M.sy*this.sy,bt=M.tx*this.sx+M.ty*this.shx+this.tx,Tt=M.tx*this.shy+M.ty*this.sy+this.ty;return new cn(ae,Se,Oe,Qe,bt,Tt)},cn.prototype.decompose=function(){var M=this.sx,ae=this.shy,Se=this.shx,Oe=this.sy,Qe=this.tx,bt=this.ty,Tt=Math.sqrt(M*M+ae*ae),dn=(M/=Tt)*Se+(ae/=Tt)*Oe;Se-=M*dn,Oe-=ae*dn;var Bn=Math.sqrt(Se*Se+Oe*Oe);return dn/=Bn,M*(Oe/=Bn)<ae*(Se/=Bn)&&(M=-M,ae=-ae,dn=-dn,Tt=-Tt),{scale:new cn(Tt,0,0,Bn,0,0),translate:new cn(1,0,0,1,Qe,bt),rotate:new cn(M,ae,-ae,M,0,0),skew:new cn(1,0,dn,1,0,0)}},cn.prototype.toString=function(M){return this.join(" ")},cn.prototype.inversed=function(){var M=this.sx,ae=this.shy,Se=this.shx,Oe=this.sy,Qe=this.tx,bt=this.ty,Tt=1/(M*Oe-ae*Se),dn=Oe*Tt,Bn=-ae*Tt,Vn=-Se*Tt,er=M*Tt;return new cn(dn,Bn,Vn,er,-dn*Qe-Vn*bt,-Bn*Qe-er*bt)},cn.prototype.applyToPoint=function(M){var ae=M.x*this.sx+M.y*this.shx+this.tx,Se=M.x*this.shy+M.y*this.sy+this.ty;return new Nr(ae,Se)},cn.prototype.applyToRectangle=function(M){var ae=this.applyToPoint(M),Se=this.applyToPoint(new Nr(M.x+M.w,M.y+M.h));return new ii(ae.x,ae.y,Se.x-ae.x,Se.y-ae.y)},cn.prototype.clone=function(){var M=this.sx,ae=this.shy,Se=this.shx,Oe=this.sy,Qe=this.tx,bt=this.ty;return new cn(M,ae,Se,Oe,Qe,bt)},m.Matrix=cn;var Ji=m.matrixMult=function(M,ae){return ae.multiply(M)},Bs=new cn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Bs;var $s=function(M,ae){if(!yt[M]){var Se=(ae instanceof Bg?"Sh":"P")+(Object.keys($e).length+1).toString(10);ae.id=Se,yt[M]=Se,$e[Se]=ae,dt.publish("addPattern",ae)}};m.ShadingPattern=Bg,m.TilingPattern=c1,m.addShadingPattern=function(M,ae){return D("addShadingPattern()"),$s(M,ae),this},m.beginTilingPattern=function(M){D("beginTilingPattern()"),jd(M.boundingBox[0],M.boundingBox[1],M.boundingBox[2]-M.boundingBox[0],M.boundingBox[3]-M.boundingBox[1],M.matrix)},m.endTilingPattern=function(M,ae){D("endTilingPattern()"),ae.stream=je[X].join(`
`),$s(M,ae),dt.publish("endTilingPattern",ae),Ls.pop().restore()};var wr,ts=m.__private__.newObject=function(){var M=Er();return Bt(M,!0),M},Er=m.__private__.newObjectDeferred=function(){return Ae++,xe[Ae]=function(){return me},Ae},Bt=function(M,ae){return ae=typeof ae=="boolean"&&ae,xe[M]=me,ae&&ie(M+" 0 obj"),M},Bi=m.__private__.newAdditionalObject=function(){var M={objId:Er(),content:""};return ve.push(M),M},ys=Er(),Jn=Er(),ns=m.__private__.decodeColorString=function(M){var ae=M.split(" ");if(ae.length!==2||ae[1]!=="g"&&ae[1]!=="G")ae.length!==5||ae[4]!=="k"&&ae[4]!=="K"||(ae=[(1-ae[0])*(1-ae[3]),(1-ae[1])*(1-ae[3]),(1-ae[2])*(1-ae[3]),"r"]);else{var Se=parseFloat(ae[0]);ae=[Se,Se,Se,"r"]}for(var Oe="#",Qe=0;Qe<3;Qe++)Oe+=("0"+Math.floor(255*parseFloat(ae[Qe])).toString(16)).slice(-2);return Oe},ji=m.__private__.encodeColorString=function(M){var ae;typeof M=="string"&&(M={ch1:M});var Se=M.ch1,Oe=M.ch2,Qe=M.ch3,bt=M.ch4,Tt=M.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var dn=new ihe(Se);if(dn.ok)Se=dn.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var Bn=parseInt(Se.substr(1),16);Se=Bn>>16&255,Oe=Bn>>8&255,Qe=255&Bn}if(Oe===void 0||bt===void 0&&Se===Oe&&Oe===Qe)ae=typeof Se=="string"?Se+" "+Tt[0]:M.precision===2?N(Se/255)+" "+Tt[0]:P(Se/255)+" "+Tt[0];else if(bt===void 0||_s(bt)==="object"){if(bt&&!isNaN(bt.a)&&bt.a===0)return["1.","1.","1.",Tt[1]].join(" ");ae=typeof Se=="string"?[Se,Oe,Qe,Tt[1]].join(" "):M.precision===2?[N(Se/255),N(Oe/255),N(Qe/255),Tt[1]].join(" "):[P(Se/255),P(Oe/255),P(Qe/255),Tt[1]].join(" ")}else ae=typeof Se=="string"?[Se,Oe,Qe,bt,Tt[2]].join(" "):M.precision===2?[N(Se),N(Oe),N(Qe),N(bt),Tt[2]].join(" "):[P(Se),P(Oe),P(Qe),P(bt),Tt[2]].join(" ");return ae},ft=m.__private__.getFilters=function(){return a},Cn=m.__private__.putStream=function(M){var ae=(M=M||{}).data||"",Se=M.filters||ft(),Oe=M.alreadyAppliedFilters||[],Qe=M.addLength1||!1,bt=ae.length,Tt=M.objectId,dn=function(na){return na};if(d!==null&&Tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(dn=ta.encryptor(Tt,0));var Bn={};Se===!0&&(Se=["FlateEncode"]);var Vn=M.additionalKeyValues||[],er=(Bn=Rn.API.processDataByFilters!==void 0?Rn.API.processDataByFilters(ae,Se):{data:ae,reverseChain:[]}).reverseChain+(Array.isArray(Oe)?Oe.join(" "):Oe.toString());if(Bn.data.length!==0&&(Vn.push({key:"Length",value:Bn.data.length}),Qe===!0&&Vn.push({key:"Length1",value:bt})),er.length!=0)if(er.split("/").length-1==1)Vn.push({key:"Filter",value:er});else{Vn.push({key:"Filter",value:"["+er+"]"});for(var Tr=0;Tr<Vn.length;Tr+=1)if(Vn[Tr].key==="DecodeParms"){for(var Ks=[],hi=0;hi<Bn.reverseChain.split("/").length-1;hi+=1)Ks.push("null");Ks.push(Vn[Tr].value),Vn[Tr].value="["+Ks.join(" ")+"]"}}ie("<<");for(var xs=0;xs<Vn.length;xs++)ie("/"+Vn[xs].key+" "+Vn[xs].value);ie(">>"),Bn.data.length!==0&&(ie("stream"),ie(dn(Bn.data)),ie("endstream"))},Wn=m.__private__.putPage=function(M){var ae=M.number,Se=M.data,Oe=M.objId,Qe=M.contentsObjId;Bt(Oe,!0),ie("<</Type /Page"),ie("/Parent "+M.rootDictionaryObjId+" 0 R"),ie("/Resources "+M.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(F(M.mediaBox.bottomLeftX))+" "+parseFloat(F(M.mediaBox.bottomLeftY))+" "+F(M.mediaBox.topRightX)+" "+F(M.mediaBox.topRightY)+"]"),M.cropBox!==null&&ie("/CropBox ["+F(M.cropBox.bottomLeftX)+" "+F(M.cropBox.bottomLeftY)+" "+F(M.cropBox.topRightX)+" "+F(M.cropBox.topRightY)+"]"),M.bleedBox!==null&&ie("/BleedBox ["+F(M.bleedBox.bottomLeftX)+" "+F(M.bleedBox.bottomLeftY)+" "+F(M.bleedBox.topRightX)+" "+F(M.bleedBox.topRightY)+"]"),M.trimBox!==null&&ie("/TrimBox ["+F(M.trimBox.bottomLeftX)+" "+F(M.trimBox.bottomLeftY)+" "+F(M.trimBox.topRightX)+" "+F(M.trimBox.topRightY)+"]"),M.artBox!==null&&ie("/ArtBox ["+F(M.artBox.bottomLeftX)+" "+F(M.artBox.bottomLeftY)+" "+F(M.artBox.topRightX)+" "+F(M.artBox.topRightY)+"]"),typeof M.userUnit=="number"&&M.userUnit!==1&&ie("/UserUnit "+M.userUnit),dt.publish("putPage",{objId:Oe,pageContext:Jt[ae],pageNumber:ae,page:Se}),ie("/Contents "+Qe+" 0 R"),ie(">>"),ie("endobj");var bt=Se.join(`
`);return k===B&&(bt+=`
Q`),Bt(Qe,!0),Cn({data:bt,filters:ft(),objectId:Qe}),ie("endobj"),Oe},Xn=m.__private__.putPages=function(){var M,ae,Se=[];for(M=1;M<=zt;M++)Jt[M].objId=Er(),Jt[M].contentsObjId=Er();for(M=1;M<=zt;M++)Se.push(Wn({number:M,data:je[M],objId:Jt[M].objId,contentsObjId:Jt[M].contentsObjId,mediaBox:Jt[M].mediaBox,cropBox:Jt[M].cropBox,bleedBox:Jt[M].bleedBox,trimBox:Jt[M].trimBox,artBox:Jt[M].artBox,userUnit:Jt[M].userUnit,rootDictionaryObjId:ys,resourceDictionaryObjId:Jn}));Bt(ys,!0),ie("<</Type /Pages");var Oe="/Kids [";for(ae=0;ae<zt;ae++)Oe+=Se[ae]+" 0 R ";ie(Oe+"]"),ie("/Count "+zt),ie(">>"),ie("endobj"),dt.publish("postPutPages")},sr=function(M){dt.publish("putFont",{font:M,out:ie,newObject:ts,putStream:Cn}),M.isAlreadyPutted!==!0&&(M.objectNumber=ts(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+e1(M.postScriptName)),ie("/Subtype /Type1"),typeof M.encoding=="string"&&ie("/Encoding /"+M.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},da=function(M){M.objectNumber=ts();var ae=[];ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Form"}),ae.push({key:"BBox",value:"["+[F(M.x),F(M.y),F(M.x+M.width),F(M.y+M.height)].join(" ")+"]"}),ae.push({key:"Matrix",value:"["+M.matrix.toString()+"]"});var Se=M.pages[1].join(`
`);Cn({data:Se,additionalKeyValues:ae,objectId:M.objectNumber}),ie("endobj")},Hr=function(M,ae){ae||(ae=21);var Se=ts(),Oe=(function(Tt,dn){var Bn,Vn=[],er=1/(dn-1);for(Bn=0;Bn<1;Bn+=er)Vn.push(Bn);if(Vn.push(1),Tt[0].offset!=0){var Tr={offset:0,color:Tt[0].color};Tt.unshift(Tr)}if(Tt[Tt.length-1].offset!=1){var Ks={offset:1,color:Tt[Tt.length-1].color};Tt.push(Ks)}for(var hi="",xs=0,na=0;na<Vn.length;na++){for(Bn=Vn[na];Bn>Tt[xs+1].offset;)xs++;var Ti=Tt[xs].offset,fa=(Bn-Ti)/(Tt[xs+1].offset-Ti),Yc=Tt[xs].color,$l=Tt[xs+1].color;hi+=le(Math.round((1-fa)*Yc[0]+fa*$l[0]).toString(16))+le(Math.round((1-fa)*Yc[1]+fa*$l[1]).toString(16))+le(Math.round((1-fa)*Yc[2]+fa*$l[2]).toString(16))}return hi.trim()})(M.colors,ae),Qe=[];Qe.push({key:"FunctionType",value:"0"}),Qe.push({key:"Domain",value:"[0.0 1.0]"}),Qe.push({key:"Size",value:"["+ae+"]"}),Qe.push({key:"BitsPerSample",value:"8"}),Qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cn({data:Oe,additionalKeyValues:Qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),ie("endobj"),M.objectNumber=ts(),ie("<< /ShadingType "+M.type),ie("/ColorSpace /DeviceRGB");var bt="/Coords ["+F(parseFloat(M.coords[0]))+" "+F(parseFloat(M.coords[1]))+" ";M.type===2?bt+=F(parseFloat(M.coords[2]))+" "+F(parseFloat(M.coords[3])):bt+=F(parseFloat(M.coords[2]))+" "+F(parseFloat(M.coords[3]))+" "+F(parseFloat(M.coords[4]))+" "+F(parseFloat(M.coords[5])),ie(bt+="]"),M.matrix&&ie("/Matrix ["+M.matrix.toString()+"]"),ie("/Function "+Se+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},cs=function(M,ae){var Se=Er(),Oe=ts();ae.push({resourcesOid:Se,objectOid:Oe}),M.objectNumber=Oe;var Qe=[];Qe.push({key:"Type",value:"/Pattern"}),Qe.push({key:"PatternType",value:"1"}),Qe.push({key:"PaintType",value:"1"}),Qe.push({key:"TilingType",value:"1"}),Qe.push({key:"BBox",value:"["+M.boundingBox.map(F).join(" ")+"]"}),Qe.push({key:"XStep",value:F(M.xStep)}),Qe.push({key:"YStep",value:F(M.yStep)}),Qe.push({key:"Resources",value:Se+" 0 R"}),M.matrix&&Qe.push({key:"Matrix",value:"["+M.matrix.toString()+"]"}),Cn({data:M.stream,additionalKeyValues:Qe,objectId:M.objectNumber}),ie("endobj")},zr=function(M){for(var ae in M.objectNumber=ts(),ie("<<"),M)switch(ae){case"opacity":ie("/ca "+N(M[ae]));break;case"stroke-opacity":ie("/CA "+N(M[ae]))}ie(">>"),ie("endobj")},Zi=function(M){Bt(M.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ae in ie("/Font <<"),Ft)Ft.hasOwnProperty(ae)&&(f===!1||f===!0&&A.hasOwnProperty(ae))&&ie("/"+ae+" "+Ft[ae].objectNumber+" 0 R");ie(">>")})(),(function(){if(Object.keys($e).length>0){for(var ae in ie("/Shading <<"),$e)$e.hasOwnProperty(ae)&&$e[ae]instanceof Bg&&$e[ae].objectNumber>=0&&ie("/"+ae+" "+$e[ae].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),ie(">>")}})(),(function(ae){if(Object.keys($e).length>0){for(var Se in ie("/Pattern <<"),$e)$e.hasOwnProperty(Se)&&$e[Se]instanceof m.TilingPattern&&$e[Se].objectNumber>=0&&$e[Se].objectNumber<ae&&ie("/"+Se+" "+$e[Se].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),ie(">>")}})(M.objectOid),(function(){if(Object.keys(Ct).length>0){var ae;for(ae in ie("/ExtGState <<"),Ct)Ct.hasOwnProperty(ae)&&Ct[ae].objectNumber>=0&&ie("/"+ae+" "+Ct[ae].objectNumber+" 0 R");dt.publish("putGStateDict"),ie(">>")}})(),(function(){for(var ae in ie("/XObject <<"),Kr)Kr.hasOwnProperty(ae)&&Kr[ae].objectNumber>=0&&ie("/"+ae+" "+Kr[ae].objectNumber+" 0 R");dt.publish("putXobjectDict"),ie(">>")})(),ie(">>"),ie("endobj")},Ir=function(M){xn[M.fontName]=xn[M.fontName]||{},xn[M.fontName][M.fontStyle]=M.id},si=function(M,ae,Se,Oe,Qe){var bt={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:M,fontName:ae,fontStyle:Se,encoding:Oe,isStandardFont:Qe||!1,metadata:{}};return dt.publish("addFont",{font:bt,instance:this}),Ft[bt.id]=bt,Ir(bt),bt.id},rs=m.__private__.pdfEscape=m.pdfEscape=function(M,ae){return(function(Se,Oe){var Qe,bt,Tt,dn,Bn,Vn,er,Tr,Ks;if(Tt=(Oe=Oe||{}).sourceEncoding||"Unicode",Bn=Oe.outputEncoding,(Oe.autoencode||Bn)&&Ft[Qt].metadata&&Ft[Qt].metadata[Tt]&&Ft[Qt].metadata[Tt].encoding&&(dn=Ft[Qt].metadata[Tt].encoding,!Bn&&Ft[Qt].encoding&&(Bn=Ft[Qt].encoding),!Bn&&dn.codePages&&(Bn=dn.codePages[0]),typeof Bn=="string"&&(Bn=dn[Bn]),Bn)){for(er=!1,Vn=[],Qe=0,bt=Se.length;Qe<bt;Qe++)(Tr=Bn[Se.charCodeAt(Qe)])?Vn.push(String.fromCharCode(Tr)):Vn.push(Se[Qe]),Vn[Qe].charCodeAt(0)>>8&&(er=!0);Se=Vn.join("")}for(Qe=Se.length;er===void 0&&Qe!==0;)Se.charCodeAt(Qe-1)>>8&&(er=!0),Qe--;if(!er)return Se;for(Vn=Oe.noBOM?[]:[254,255],Qe=0,bt=Se.length;Qe<bt;Qe++){if((Ks=(Tr=Se.charCodeAt(Qe))>>8)>>8)throw new Error("Character at position "+Qe+" of string '"+Se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vn.push(Ks),Vn.push(Tr-(Ks<<8))}return String.fromCharCode.apply(void 0,Vn)})(M,ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},st=m.__private__.beginPage=function(M){je[++zt]=[],Jt[zt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(M[0]),topRightY:Number(M[1])}},Gt(zt),at(je[X])},gt=function(M,ae){var Se,Oe,Qe;switch(n=ae||n,typeof M=="string"&&(Se=v(M.toLowerCase()),Array.isArray(Se)&&(Oe=Se[0],Qe=Se[1])),Array.isArray(M)&&(Oe=M[0]*rn,Qe=M[1]*rn),isNaN(Oe)&&(Oe=s[0],Qe=s[1]),(Oe>14400||Qe>14400)&&(Zs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Oe=Math.min(14400,Oe),Qe=Math.min(14400,Qe)),s=[Oe,Qe],n.substr(0,1)){case"l":Qe>Oe&&(s=[Qe,Oe]);break;case"p":Oe>Qe&&(s=[Qe,Oe])}st(s),Ln(mn),ie(V),kn!==0&&ie(kn+" J"),_n!==0&&ie(_n+" j"),dt.publish("addPage",{pageNumber:zt})},Pt=function(M){M>0&&M<=zt&&(je.splice(M,1),Jt.splice(M,1),zt--,X>zt&&(X=zt),this.setPage(X))},Gt=function(M){M>0&&M<=zt&&(X=M)},Tn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return je.length-1},mr=function(M,ae,Se){var Oe,Qe=void 0;return Se=Se||{},M=M!==void 0?M:Ft[Qt].fontName,ae=ae!==void 0?ae:Ft[Qt].fontStyle,Oe=M.toLowerCase(),xn[Oe]!==void 0&&xn[Oe][ae]!==void 0?Qe=xn[Oe][ae]:xn[M]!==void 0&&xn[M][ae]!==void 0?Qe=xn[M][ae]:Se.disableWarning===!1&&Zs.warn("Unable to look up font label for font '"+M+"', '"+ae+"'. Refer to getFontList() for available fonts."),Qe||Se.noFallback||(Qe=xn.times[ae])==null&&(Qe=xn.times.normal),Qe},ci=m.__private__.putInfo=function(){var M=ts(),ae=function(Oe){return Oe};for(var Se in d!==null&&(ae=ta.encryptor(M,0)),ie("<<"),ie("/Producer ("+rs(ae("jsPDF "+Rn.version))+")"),fn)fn.hasOwnProperty(Se)&&fn[Se]&&ie("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+rs(ae(fn[Se]))+")");ie("/CreationDate ("+rs(ae(ee))+")"),ie(">>"),ie("endobj")},Co=m.__private__.putCatalog=function(M){var ae=(M=M||{}).rootDictionaryObjId||ys;switch(ts(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+ae+" 0 R"),ht||(ht="fullwidth"),ht){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+ht;Se.substr(Se.length-1)==="%"&&(ht=parseInt(ht)/100),typeof ht=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+N(ht)+"]")}switch(Sn||(Sn="continuous"),Sn){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}kt&&ie("/PageMode /"+kt),dt.publish("putCatalog"),ie(">>"),ie("endobj")},Ei=m.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(Ae+1)),ie("/Root "+Ae+" 0 R"),ie("/Info "+(Ae-1)+" 0 R"),d!==null&&ie("/Encrypt "+ta.oid+" 0 R"),ie("/ID [ <"+q+"> <"+q+"> ]"),ie(">>")},jn=m.__private__.putHeader=function(){ie("%PDF-"+g),ie("%")},ko=m.__private__.putXRef=function(){var M="0000000000";ie("xref"),ie("0 "+(Ae+1)),ie("0000000000 65535 f ");for(var ae=1;ae<=Ae;ae++)typeof xe[ae]=="function"?ie((M+xe[ae]()).slice(-10)+" 00000 n "):xe[ae]!==void 0?ie((M+xe[ae]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},ui=m.__private__.buildDocument=function(){var M;Ae=0,me=0,Be=[],xe=[],ve=[],ys=Er(),Jn=Er(),at(Be),dt.publish("buildDocument"),jn(),Xn(),(function(){dt.publish("putAdditionalObjects");for(var Se=0;Se<ve.length;Se++){var Oe=ve[Se];Bt(Oe.objId,!0),ie(Oe.content),ie("endobj")}dt.publish("postPutAdditionalObjects")})(),M=[],(function(){for(var Se in Ft)Ft.hasOwnProperty(Se)&&(f===!1||f===!0&&A.hasOwnProperty(Se))&&sr(Ft[Se])})(),(function(){var Se;for(Se in Ct)Ct.hasOwnProperty(Se)&&zr(Ct[Se])})(),(function(){for(var Se in Kr)Kr.hasOwnProperty(Se)&&da(Kr[Se])})(),(function(Se){var Oe;for(Oe in $e)$e.hasOwnProperty(Oe)&&($e[Oe]instanceof Bg?Hr($e[Oe]):$e[Oe]instanceof c1&&cs($e[Oe],Se))})(M),dt.publish("putResources"),M.forEach(Zi),Zi({resourcesOid:Jn,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources"),d!==null&&(ta.oid=ts(),ie("<<"),ie("/Filter /Standard"),ie("/V "+ta.v),ie("/R "+ta.r),ie("/U <"+ta.toHexString(ta.U)+">"),ie("/O <"+ta.toHexString(ta.O)+">"),ie("/P "+ta.P),ie(">>"),ie("endobj")),ci(),Co();var ae=me;return ko(),Ei(),ie("startxref"),ie(""+ae),ie("%%EOF"),at(je[X]),Be.join(`
`)},ea=m.__private__.getBlob=function(M){return new Blob([nt(M)],{type:"application/pdf"})},ju=m.output=m.__private__.output=(wr=function(M,ae){switch(typeof(ae=ae||{})=="string"?ae={filename:ae}:ae.filename=ae.filename||"generated.pdf",M){case void 0:return ui();case"save":m.save(ae.filename);break;case"arraybuffer":return nt(ui());case"blob":return ea(ui());case"bloburi":case"bloburl":if(nr.URL!==void 0&&typeof nr.URL.createObjectURL=="function")return nr.URL&&nr.URL.createObjectURL(ea(ui()))||void 0;Zs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",Oe=ui();try{Se=lY(Oe)}catch{Se=lY(unescape(encodeURIComponent(Oe)))}return"data:application/pdf;filename="+ae.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ae.pdfObjectUrl&&(Qe=ae.pdfObjectUrl,bt="");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Qe+'"'+bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ae)+");<\/script></body></html>",dn=nr.open();return dn!==null&&dn.document.write(Tt),dn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ae.filename+'" width="500px" height="400px" /></body></html>',Vn=nr.open();if(Vn!==null){Vn.document.write(Bn);var er=this;Vn.document.documentElement.querySelector("#pdfViewer").onload=function(){Vn.document.title=ae.filename,Vn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(er.output("bloburl"))}}return Vn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ae)+'"></iframe></body></html>',Ks=nr.open();if(Ks!==null&&(Ks.document.write(Tr),Ks.document.title=ae.filename),Ks||typeof safari>"u")return Ks;break;case"datauri":case"dataurl":return nr.document.location.href=this.output("datauristring",ae);default:return null}},wr.foo=function(){try{return wr.apply(this,arguments)}catch(Se){var M=Se.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var ae="Error in function "+M.split(`
`)[0].split("<")[0]+": "+Se.message;if(!nr.console)throw new Error(ae);nr.console.error(ae,Se),nr.alert&&alert(ae)}},wr.foo.bar=wr,wr.foo),ja=function(M){return Array.isArray(pr)===!0&&pr.indexOf(M)>-1};switch(r){case"pt":rn=1;break;case"mm":rn=72/25.4;break;case"cm":rn=72/2.54;break;case"in":rn=72;break;case"px":rn=ja("px_scaling")==1?.75:96/72;break;case"pc":case"em":rn=12;break;case"ex":rn=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rn=r}var ta=null;H(),G();var Ii=m.__private__.getPageInfo=m.getPageInfo=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[M].objId,pageNumber:M,pageContext:Jt[M]}},cc=m.__private__.getPageInfoByObjId=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ae in Jt)if(Jt[ae].objId===M)break;return Ii(ae)},Oh=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Jt[X].objId,pageNumber:X,pageContext:Jt[X]}};m.addPage=function(){return gt.apply(this,arguments),this},m.setPage=function(){return Gt.apply(this,arguments),at.call(this,je[X]),this},m.insertPage=function(M){return this.addPage(),this.movePage(X,M),this},m.movePage=function(M,ae){var Se,Oe;if(M>ae){Se=je[M],Oe=Jt[M];for(var Qe=M;Qe>ae;Qe--)je[Qe]=je[Qe-1],Jt[Qe]=Jt[Qe-1];je[ae]=Se,Jt[ae]=Oe,this.setPage(ae)}else if(M<ae){Se=je[M],Oe=Jt[M];for(var bt=M;bt<ae;bt++)je[bt]=je[bt+1],Jt[bt]=Jt[bt+1];je[ae]=Se,Jt[ae]=Oe,this.setPage(ae)}return this},m.deletePage=function(){return Pt.apply(this,arguments),this},m.__private__.text=m.text=function(M,ae,Se,Oe,Qe){var bt,Tt,dn,Bn,Vn,er,Tr,Ks,hi,xs=(Oe=Oe||{}).scope||this;if(typeof M=="number"&&typeof ae=="number"&&(typeof Se=="string"||Array.isArray(Se))){var na=Se;Se=ae,ae=M,M=na}if(arguments[3]instanceof cn==0?(dn=arguments[4],Bn=arguments[5],_s(Tr=arguments[3])==="object"&&Tr!==null||(typeof dn=="string"&&(Bn=dn,dn=null),typeof Tr=="string"&&(Bn=Tr,Tr=null),typeof Tr=="number"&&(dn=Tr,Tr=null),Oe={flags:Tr,angle:dn,align:Bn})):(D("The transform parameter of text() with a Matrix value"),hi=Qe),isNaN(ae)||isNaN(Se)||M==null)throw new Error("Invalid arguments passed to jsPDF.text");if(M.length===0)return xs;var Ti,fa="",Yc=typeof Oe.lineHeightFactor=="number"?Oe.lineHeightFactor:Vc,$l=xs.internal.scaleFactor;function Jc(ss){return ss=ss.split("	").join(Array(Oe.TabLen||9).join(" ")),rs(ss,Tr)}function Nu(ss){for(var Wr,Ps=ss.concat(),ia=[],Du=Ps.length;Du--;)typeof(Wr=Ps.shift())=="string"?ia.push(Wr):Array.isArray(ss)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?ia.push(Wr[0]):ia.push([Wr[0],Wr[1],Wr[2]]);return ia}function Ed(ss,Wr){var Ps;if(typeof ss=="string")Ps=Wr(ss)[0];else if(Array.isArray(ss)){for(var ia,Du,eu=ss.concat(),Ph=[],Gm=eu.length;Gm--;)typeof(ia=eu.shift())=="string"?Ph.push(Wr(ia)[0]):Array.isArray(ia)&&typeof ia[0]=="string"&&(Du=Wr(ia[0],ia[1],ia[2]),Ph.push([Du[0],Du[1],Du[2]]));Ps=Ph}return Ps}var Pl=!1,Al=!0;if(typeof M=="string")Pl=!0;else if(Array.isArray(M)){var qe=M.concat();Tt=[];for(var St,Vt=qe.length;Vt--;)(typeof(St=qe.shift())!="string"||Array.isArray(St)&&typeof St[0]!="string")&&(Al=!1);Pl=Al}if(Pl===!1)throw new Error('Type of text must be string or Array. "'+M+'" is not recognized.');typeof M=="string"&&(M=M.match(/[\r?\n]/)?M.split(/\r\n|\r|\n/g):[M]);var En=_e/xs.internal.scaleFactor,Mn=En*(Yc-1);switch(Oe.baseline){case"bottom":Se-=Mn;break;case"top":Se+=En-Mn;break;case"hanging":Se+=En-2*Mn;break;case"middle":Se+=En/2-Mn}if((er=Oe.maxWidth||0)>0&&(typeof M=="string"?M=xs.splitTextToSize(M,er):Object.prototype.toString.call(M)==="[object Array]"&&(M=M.reduce(function(ss,Wr){return ss.concat(xs.splitTextToSize(Wr,er))},[]))),bt={text:M,x:ae,y:Se,options:Oe,mutex:{pdfEscape:rs,activeFontKey:Qt,fonts:Ft,activeFontSize:_e}},dt.publish("preProcessText",bt),M=bt.text,dn=(Oe=bt.options).angle,hi instanceof cn==0&&dn&&typeof dn=="number"){dn*=Math.PI/180,Oe.rotationDirection===0&&(dn=-dn),k===B&&(dn=-dn);var Sr=Math.cos(dn),_i=Math.sin(dn);hi=new cn(Sr,_i,-_i,Sr,0,0)}else dn&&dn instanceof cn&&(hi=dn);k!==B||hi||(hi=Bs),(Vn=Oe.charSpace||Ge)!==void 0&&(fa+=F(z(Vn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ks=Oe.horizontalScale)!==void 0&&(fa+=F(100*Ks)+` Tz
`),Oe.lang;var bs=-1,Ai=Oe.renderingMode!==void 0?Oe.renderingMode:Oe.stroke,za=xs.internal.getCurrentPageInfo().pageContext;switch(Ai){case 0:case!1:case"fill":bs=0;break;case 1:case!0:case"stroke":bs=1;break;case 2:case"fillThenStroke":bs=2;break;case 3:case"invisible":bs=3;break;case 4:case"fillAndAddForClipping":bs=4;break;case 5:case"strokeAndAddPathForClipping":bs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bs=6;break;case 7:case"addToPathForClipping":bs=7}var Id=za.usedRenderingMode!==void 0?za.usedRenderingMode:-1;bs!==-1?fa+=bs+` Tr
`:Id!==-1&&(fa+=`0 Tr
`),bs!==-1&&(za.usedRenderingMode=bs),Bn=Oe.align||"left";var ra,zl=_e*Yc,Nd=xs.internal.pageSize.getWidth(),qm=Ft[Qt];Vn=Oe.charSpace||Ge,er=Oe.maxWidth||0,Tr=Object.assign({autoencode:!0,noBOM:!0},Oe.flags);var Zc=[],Tf=function(ss){return xs.getStringUnitWidth(ss,{font:qm,charSpace:Vn,fontSize:_e,doKerning:!1})*_e/$l};if(Object.prototype.toString.call(M)==="[object Array]"){var pl;Tt=Nu(M),Bn!=="left"&&(ra=Tt.map(Tf));var tl,Tu=0;if(Bn==="right"){ae-=ra[0],M=[],Vt=Tt.length;for(var _u=0;_u<Vt;_u++)_u===0?(tl=Ni(ae),pl=fi(Se)):(tl=z(Tu-ra[_u]),pl=-zl),M.push([Tt[_u],tl,pl]),Tu=ra[_u]}else if(Bn==="center"){ae-=ra[0]/2,M=[],Vt=Tt.length;for(var Td=0;Td<Vt;Td++)Td===0?(tl=Ni(ae),pl=fi(Se)):(tl=z((Tu-ra[Td])/2),pl=-zl),M.push([Tt[Td],tl,pl]),Tu=ra[Td]}else if(Bn==="left"){M=[],Vt=Tt.length;for(var up=0;up<Vt;up++)M.push(Tt[up])}else if(Bn==="justify"&&qm.encoding==="Identity-H"){M=[],Vt=Tt.length,er=er!==0?er:Nd;for(var dp=0,sa=0;sa<Vt;sa++)if(pl=sa===0?fi(Se):-zl,tl=sa===0?Ni(ae):dp,sa<Vt-1){var Y0=z((er-ra[sa])/(Tt[sa].split(" ").length-1)),Ru=Tt[sa].split(" ");M.push([Ru[0]+" ",tl,pl]),dp=0;for(var Ou=1;Ou<Ru.length;Ou++){var ro=(Tf(Ru[Ou-1]+" "+Ru[Ou])-Tf(Ru[Ou]))*$l+Y0;Ou==Ru.length-1?M.push([Ru[Ou],ro,0]):M.push([Ru[Ou]+" ",ro,0]),dp-=ro}}else M.push([Tt[sa],tl,pl]);M.push(["",dp,0])}else{if(Bn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(M=[],Vt=Tt.length,er=er!==0?er:Nd,sa=0;sa<Vt;sa++){pl=sa===0?fi(Se):-zl,tl=sa===0?Ni(ae):0;var _d=Tt[sa].split(" ").length-1,fp=_d>0?(er-ra[sa])/_d:0;sa<Vt-1?Zc.push(F(z(fp))):Zc.push(0),M.push([Tt[sa],tl,pl])}}}(typeof Oe.R2L=="boolean"?Oe.R2L:$t)===!0&&(M=Ed(M,function(ss,Wr,Ps){return[ss.split("").reverse().join(""),Wr,Ps]})),bt={text:M,x:ae,y:Se,options:Oe,mutex:{pdfEscape:rs,activeFontKey:Qt,fonts:Ft,activeFontSize:_e}},dt.publish("postProcessText",bt),M=bt.text,Ti=bt.mutex.isHex||!1;var hp=Ft[Qt].encoding;hp!=="WinAnsiEncoding"&&hp!=="StandardEncoding"||(M=Ed(M,function(ss,Wr,Ps){return[Jc(ss),Wr,Ps]})),Tt=Nu(M),M=[];for(var Rd,Od,Fu,$h=Array.isArray(Tt[0])?1:0,Ul="",Fd=function(ss,Wr,Ps){var ia="";return Ps instanceof cn?(Ps=typeof Oe.angle=="number"?Ji(Ps,new cn(1,0,0,1,ss,Wr)):Ji(new cn(1,0,0,1,ss,Wr),Ps),k===B&&(Ps=Ji(new cn(1,0,0,-1,0,0),Ps)),ia=Ps.join(" ")+` Tm
`):ia=F(ss)+" "+F(Wr)+` Td
`,ia},Bo=0;Bo<Tt.length;Bo++){switch(Ul="",$h){case 1:Fu=(Ti?"<":"(")+Tt[Bo][0]+(Ti?">":")"),Rd=parseFloat(Tt[Bo][1]),Od=parseFloat(Tt[Bo][2]);break;case 0:Fu=(Ti?"<":"(")+Tt[Bo]+(Ti?">":")"),Rd=Ni(ae),Od=fi(Se)}Zc!==void 0&&Zc[Bo]!==void 0&&(Ul=Zc[Bo]+` Tw
`),Bo===0?M.push(Ul+Fd(Rd,Od,hi)+Fu):$h===0?M.push(Ul+Fu):$h===1&&M.push(Ul+Fd(Rd,Od,hi)+Fu)}M=$h===0?M.join(` Tj
T* `):M.join(` Tj
`),M+=` Tj
`;var fc=`BT
/`;return fc+=Qt+" "+_e+` Tf
`,fc+=F(_e*Yc)+` TL
`,fc+=pe+`
`,fc+=fa,fc+=M,ie(fc+="ET"),A[Qt]=!0,xs};var Fh=m.__private__.clip=m.clip=function(M){return ie(M==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Fh("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ie("n"),this};var Ea=m.__private__.isValidStyle=function(M){var ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(M)!==-1&&(ae=!0),ae};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(M){return Ea(M)&&(u=M),this};var If=m.__private__.getStyle=m.getStyle=function(M){var ae=u;switch(M){case"D":case"S":ae="S";break;case"F":ae="f";break;case"FD":case"DF":ae="B";break;case"f":case"f*":case"B":case"B*":ae=M}return ae},bd=m.close=function(){return ie("h"),this};m.stroke=function(){return ie("S"),this},m.fill=function(M){return el("f",M),this},m.fillEvenOdd=function(M){return el("f*",M),this},m.fillStroke=function(M){return el("B",M),this},m.fillStrokeEvenOdd=function(M){return el("B*",M),this};var el=function(M,ae){_s(ae)==="object"?Sd(ae,M):ie(M)},vd=function(M){M===null||k===B&&M===void 0||(M=If(M),ie(M))};function wd(M,ae,Se,Oe,Qe){var bt=new c1(ae||this.boundingBox,Se||this.xStep,Oe||this.yStep,this.gState,Qe||this.matrix);bt.stream=this.stream;var Tt=M+"$$"+this.cloneIndex+++"$$";return $s(Tt,bt),bt}var Sd=function(M,ae){var Se=yt[M.key],Oe=$e[Se];if(Oe instanceof Bg)ie("q"),ie(Ll(ae)),Oe.gState&&m.setGState(Oe.gState),ie(M.matrix.toString()+" cm"),ie("/"+Se+" sh"),ie("Q");else if(Oe instanceof c1){var Qe=new cn(1,0,0,-1,0,Xc());M.matrix&&(Qe=Qe.multiply(M.matrix||Bs),Se=wd.call(Oe,M.key,M.boundingBox,M.xStep,M.yStep,Qe).id),ie("q"),ie("/Pattern cs"),ie("/"+Se+" scn"),Oe.gState&&m.setGState(Oe.gState),ie(ae),ie("Q")}},Ll=function(M){switch(M){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Cd=m.moveTo=function(M,ae){return ie(F(z(M))+" "+F(U(ae))+" m"),this},hl=m.lineTo=function(M,ae){return ie(F(z(M))+" "+F(U(ae))+" l"),this},di=m.curveTo=function(M,ae,Se,Oe,Qe,bt){return ie([F(z(M)),F(U(ae)),F(z(Se)),F(U(Oe)),F(z(Qe)),F(U(bt)),"c"].join(" ")),this};m.__private__.line=m.line=function(M,ae,Se,Oe,Qe){if(isNaN(M)||isNaN(ae)||isNaN(Se)||isNaN(Oe)||!Ea(Qe))throw new Error("Invalid arguments passed to jsPDF.line");return k===w?this.lines([[Se-M,Oe-ae]],M,ae,[1,1],Qe||"S"):this.lines([[Se-M,Oe-ae]],M,ae,[1,1]).stroke()},m.__private__.lines=m.lines=function(M,ae,Se,Oe,Qe,bt){var Tt,dn,Bn,Vn,er,Tr,Ks,hi,xs,na,Ti,fa;if(typeof M=="number"&&(fa=Se,Se=ae,ae=M,M=fa),Oe=Oe||[1,1],bt=bt||!1,isNaN(ae)||isNaN(Se)||!Array.isArray(M)||!Array.isArray(Oe)||!Ea(Qe)||typeof bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cd(ae,Se),Tt=Oe[0],dn=Oe[1],Vn=M.length,na=ae,Ti=Se,Bn=0;Bn<Vn;Bn++)(er=M[Bn]).length===2?(na=er[0]*Tt+na,Ti=er[1]*dn+Ti,hl(na,Ti)):(Tr=er[0]*Tt+na,Ks=er[1]*dn+Ti,hi=er[2]*Tt+na,xs=er[3]*dn+Ti,na=er[4]*Tt+na,Ti=er[5]*dn+Ti,di(Tr,Ks,hi,xs,na,Ti));return bt&&bd(),vd(Qe),this},m.path=function(M){for(var ae=0;ae<M.length;ae++){var Se=M[ae],Oe=Se.c;switch(Se.op){case"m":Cd(Oe[0],Oe[1]);break;case"l":hl(Oe[0],Oe[1]);break;case"c":di.apply(this,Oe);break;case"h":bd()}}return this},m.__private__.rect=m.rect=function(M,ae,Se,Oe,Qe){if(isNaN(M)||isNaN(ae)||isNaN(Se)||isNaN(Oe)||!Ea(Qe))throw new Error("Invalid arguments passed to jsPDF.rect");return k===w&&(Oe=-Oe),ie([F(z(M)),F(U(ae)),F(z(Se)),F(z(Oe)),"re"].join(" ")),vd(Qe),this},m.__private__.triangle=m.triangle=function(M,ae,Se,Oe,Qe,bt,Tt){if(isNaN(M)||isNaN(ae)||isNaN(Se)||isNaN(Oe)||isNaN(Qe)||isNaN(bt)||!Ea(Tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-M,Oe-ae],[Qe-Se,bt-Oe],[M-Qe,ae-bt]],M,ae,[1,1],Tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(M,ae,Se,Oe,Qe,bt,Tt){if(isNaN(M)||isNaN(ae)||isNaN(Se)||isNaN(Oe)||isNaN(Qe)||isNaN(bt)||!Ea(Tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dn=4/3*(Math.SQRT2-1);return Qe=Math.min(Qe,.5*Se),bt=Math.min(bt,.5*Oe),this.lines([[Se-2*Qe,0],[Qe*dn,0,Qe,bt-bt*dn,Qe,bt],[0,Oe-2*bt],[0,bt*dn,-Qe*dn,bt,-Qe,bt],[2*Qe-Se,0],[-Qe*dn,0,-Qe,-bt*dn,-Qe,-bt],[0,2*bt-Oe],[0,-bt*dn,Qe*dn,-bt,Qe,-bt]],M+Qe,ae,[1,1],Tt,!0),this},m.__private__.ellipse=m.ellipse=function(M,ae,Se,Oe,Qe){if(isNaN(M)||isNaN(ae)||isNaN(Se)||isNaN(Oe)||!Ea(Qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var bt=4/3*(Math.SQRT2-1)*Se,Tt=4/3*(Math.SQRT2-1)*Oe;return Cd(M+Se,ae),di(M+Se,ae-Tt,M+bt,ae-Oe,M,ae-Oe),di(M-bt,ae-Oe,M-Se,ae-Tt,M-Se,ae),di(M-Se,ae+Tt,M-bt,ae+Oe,M,ae+Oe),di(M+bt,ae+Oe,M+Se,ae+Tt,M+Se,ae),vd(Qe),this},m.__private__.circle=m.circle=function(M,ae,Se,Oe){if(isNaN(M)||isNaN(ae)||isNaN(Se)||!Ea(Oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(M,ae,Se,Se,Oe)},m.setFont=function(M,ae,Se){return Se&&(ae=O(ae,Se)),Qt=mr(M,ae,{disableWarning:!1}),this};var no=m.__private__.getFont=m.getFont=function(){return Ft[mr.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var M,ae,Se={};for(M in xn)if(xn.hasOwnProperty(M))for(ae in Se[M]=[],xn[M])xn[M].hasOwnProperty(ae)&&Se[M].push(ae);return Se},m.addFont=function(M,ae,Se,Oe,Qe){var bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&bt.indexOf(arguments[3])!==-1?Qe=arguments[3]:arguments[3]&&bt.indexOf(arguments[3])==-1&&(Se=O(Se,Oe)),si.call(this,M,ae,Se,Qe=Qe||"Identity-H")};var Vc,mn=t.lineWidth||.200025,uc=m.__private__.getLineWidth=m.getLineWidth=function(){return mn},Ln=m.__private__.setLineWidth=m.setLineWidth=function(M){return mn=M,ie(F(z(M))+" w"),this};m.__private__.setLineDash=Rn.API.setLineDash=Rn.API.setLineDashPattern=function(M,ae){if(M=M||[],ae=ae||0,isNaN(ae)||!Array.isArray(M))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return M=M.map(function(Se){return F(z(Se))}).join(" "),ae=F(z(ae)),ie("["+M+"] "+ae+" d"),this};var Dh=m.__private__.getLineHeight=m.getLineHeight=function(){return _e*Vc};m.__private__.getLineHeight=m.getLineHeight=function(){return _e*Vc};var Nf=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(M){return typeof(M=M||1.15)=="number"&&(Vc=M),this},Eu=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Vc};Nf(t.lineHeight);var Ni=m.__private__.getHorizontalCoordinate=function(M){return z(M)},fi=m.__private__.getVerticalCoordinate=function(M){return k===B?M:Jt[X].mediaBox.topRightY-Jt[X].mediaBox.bottomLeftY-z(M)},kd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(M){return F(Ni(M))},L=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(M){return F(fi(M))},V=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ns(V)},m.__private__.setStrokeColor=m.setDrawColor=function(M,ae,Se,Oe){return V=ji({ch1:M,ch2:ae,ch3:Se,ch4:Oe,pdfColorType:"draw",precision:2}),ie(V),this};var se=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ns(se)},m.__private__.setFillColor=m.setFillColor=function(M,ae,Se,Oe){return se=ji({ch1:M,ch2:ae,ch3:Se,ch4:Oe,pdfColorType:"fill",precision:2}),ie(se),this};var pe=t.textColor||"0 g",Re=m.__private__.getTextColor=m.getTextColor=function(){return ns(pe)};m.__private__.setTextColor=m.setTextColor=function(M,ae,Se,Oe){return pe=ji({ch1:M,ch2:ae,ch3:Se,ch4:Oe,pdfColorType:"text",precision:3}),this};var Ge=t.charSpace,At=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ge||0)};m.__private__.setCharSpace=m.setCharSpace=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ge=M,this};var kn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(M){var ae=m.CapJoinStyles[M];if(ae===void 0)throw new Error("Line cap style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kn=ae,ie(ae+" J"),this};var _n=0;m.__private__.setLineJoin=m.setLineJoin=function(M){var ae=m.CapJoinStyles[M];if(ae===void 0)throw new Error("Line join style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _n=ae,ie(ae+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(M){if(M=M||0,isNaN(M))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(F(z(M))+" M"),this},m.GState=wj,m.setGState=function(M){(M=typeof M=="string"?Ct[_t[M]]:Qn(null,M)).equals(Lt)||(ie("/"+M.id+" gs"),Lt=M)};var Qn=function(M,ae){if(!M||!_t[M]){var Se=!1;for(var Oe in Ct)if(Ct.hasOwnProperty(Oe)&&Ct[Oe].equals(ae)){Se=!0;break}if(Se)ae=Ct[Oe];else{var Qe="GS"+(Object.keys(Ct).length+1).toString(10);Ct[Qe]=ae,ae.id=Qe}return M&&(_t[M]=ae.id),dt.publish("addGState",ae),ae}};m.addGState=function(M,ae){return Qn(M,ae),this},m.saveGraphicsState=function(){return ie("q"),ke.push({key:Qt,size:_e,color:pe}),this},m.restoreGraphicsState=function(){ie("Q");var M=ke.pop();return Qt=M.key,_e=M.size,pe=M.color,Lt=null,this},m.setCurrentTransformationMatrix=function(M){return ie(M.toString()+" cm"),this},m.comment=function(M){return ie("#"+M),this};var Nr=function(M,ae){var Se=M||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(bt){isNaN(bt)||(Se=parseFloat(bt))}});var Oe=ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Oe},set:function(bt){isNaN(bt)||(Oe=parseFloat(bt))}});var Qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Qe},set:function(bt){Qe=bt.toString()}}),this},ii=function(M,ae,Se,Oe){Nr.call(this,M,ae),this.type="rect";var Qe=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Qe},set:function(Tt){isNaN(Tt)||(Qe=parseFloat(Tt))}});var bt=Oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return bt},set:function(Tt){isNaN(Tt)||(bt=parseFloat(Tt))}}),this},Bd=function(){this.page=zt,this.currentPage=X,this.pages=je.slice(0),this.pagesContext=Jt.slice(0),this.x=Yt,this.y=sn,this.matrix=Fn,this.width=qc(X),this.height=Lh(X),this.outputDestination=ze,this.id="",this.objectNumber=-1};Bd.prototype.restore=function(){zt=this.page,X=this.currentPage,Jt=this.pagesContext,je=this.pages,Yt=this.x,sn=this.y,Fn=this.matrix,Iu(X,this.width),Gc(X,this.height),ze=this.outputDestination};var jd=function(M,ae,Se,Oe,Qe){Ls.push(new Bd),zt=X=0,je=[],Yt=M,sn=ae,Fn=Qe,st([Se,Oe])};for(var dc in m.beginFormObject=function(M,ae,Se,Oe,Qe){return jd(M,ae,Se,Oe,Qe),this},m.endFormObject=function(M){return(function(ae){if(Hn[ae])Ls.pop().restore();else{var Se=new Bd,Oe="Xo"+(Object.keys(Kr).length+1).toString(10);Se.id=Oe,Hn[ae]=Oe,Kr[Oe]=Se,dt.publish("addFormObject",Se),Ls.pop().restore()}})(M),this},m.doFormObject=function(M,ae){var Se=Kr[Hn[M]];return ie("q"),ie(ae.toString()+" cm"),ie("/"+Se.id+" Do"),ie("Q"),this},m.getFormObject=function(M){var ae=Kr[Hn[M]];return{x:ae.x,y:ae.y,width:ae.width,height:ae.height,matrix:ae.matrix}},m.save=function(M,ae){return M=M||"generated.pdf",(ae=ae||{}).returnPromise=ae.returnPromise||!1,ae.returnPromise===!1?(bg(ea(ui()),M),typeof bg.unload=="function"&&nr.setTimeout&&setTimeout(bg.unload,911),this):new Promise(function(Se,Oe){try{var Qe=bg(ea(ui()),M);typeof bg.unload=="function"&&nr.setTimeout&&setTimeout(bg.unload,911),Se(Qe)}catch(bt){Oe(bt.message)}})},Rn.API)Rn.API.hasOwnProperty(dc)&&(dc==="events"&&Rn.API.events.length?(function(M,ae){var Se,Oe,Qe;for(Qe=ae.length-1;Qe!==-1;Qe--)Se=ae[Qe][0],Oe=ae[Qe][1],M.subscribe.apply(M,[Se].concat(typeof Oe=="function"?[Oe]:Oe))})(dt,Rn.API.events):m[dc]=Rn.API[dc]);function qc(M){return Jt[M].mediaBox.topRightX-Jt[M].mediaBox.bottomLeftX}function Iu(M,ae){Jt[M].mediaBox.topRightX=ae+Jt[M].mediaBox.bottomLeftX}function Lh(M){return Jt[M].mediaBox.topRightY-Jt[M].mediaBox.bottomLeftY}function Gc(M,ae){Jt[M].mediaBox.topRightY=ae+Jt[M].mediaBox.bottomLeftY}var Kc=m.getPageWidth=function(M){return qc(M=M||X)/rn},lp=m.setPageWidth=function(M,ae){Iu(M,ae*rn)},Xc=m.getPageHeight=function(M){return Lh(M=M||X)/rn},cp=m.setPageHeight=function(M,ae){Gc(M,ae*rn)};return m.internal={pdfEscape:rs,getStyle:If,getFont:no,getFontSize:ot,getCharSpace:At,getTextColor:Re,getLineHeight:Dh,getLineHeightFactor:Eu,getLineWidth:uc,write:Le,getHorizontalCoordinate:Ni,getVerticalCoordinate:fi,getCoordinateString:kd,getVerticalCoordinateString:L,collections:{},newObject:ts,newAdditionalObject:Bi,newObjectDeferred:Er,newObjectDeferredBegin:Bt,getFilters:ft,putStream:Cn,events:dt,scaleFactor:rn,pageSize:{getWidth:function(){return Kc(X)},setWidth:function(M){lp(X,M)},getHeight:function(){return Xc(X)},setHeight:function(M){cp(X,M)}},encryptionOptions:d,encryption:ta,getEncryptor:function(M){return d!==null?ta.encryptor(M,0):function(ae){return ae}},output:ju,getNumberOfPages:Tn,get pages(){return je},out:ie,f2:N,f3:P,getPageInfo:Ii,getPageInfoByObjId:cc,getCurrentPageInfo:Oh,getPDFVersion:y,Point:Nr,Rectangle:ii,Matrix:cn,hasHotfix:ja},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Kc(X)},set:function(M){lp(X,M)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Xc(X)},set:function(M){cp(X,M)},enumerable:!0,configurable:!0}),(function(M){for(var ae=0,Se=Et.length;ae<Se;ae++){var Oe=si.call(this,M[ae][0],M[ae][1],M[ae][2],Et[ae][3],!0);f===!1&&(A[Oe]=!0);var Qe=M[ae][0].split("-");Ir({id:Oe,fontName:Qe[0],fontStyle:Qe[1]||""})}dt.publish("addFonts",{fonts:Ft,dictionary:xn})}).call(m,Et),Qt="F1",gt(s,n),dt.publish("initialized"),m}Zy.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Zy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zy.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Zy.prototype.processOwnerPassword=function(t,e){return k8(C8(e).substr(0,5),t)},Zy.prototype.encryptor=function(t,e){var n=C8(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return k8(n,r)}},wj.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||_s(t)!==_s(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Rn.API={events:[]},Rn.version="4.1.0";var xa=Rn.API,IU=1,K0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$y=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sj=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var n=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},or=function(t){return t.toFixed(2)},$p=function(t){return t.toFixed(5)};xa.__acroform__={};var Wc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},fY=function(t){return t*IU},Kf=function(t){var e=new che,n=vn.internal.getHeight(t)||0,r=vn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(or(r)),Number(or(n))],e},smt=xa.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},imt=xa.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},amt=xa.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Oa=xa.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return amt(t,e-1)},Fa=xa.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return smt(t,e-1)},Da=xa.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return imt(t,e-1)},omt=xa.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],l=t[3],c={};return c.lowerLeft_X=n(s)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=n(s+a)||0,c.upperRight_Y=r(i)||0,[Number(or(c.lowerLeft_X)),Number(or(c.lowerLeft_Y)),Number(or(c.upperRight_X)),Number(or(c.upperRight_Y))]},lmt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=B8(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+or(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Kf(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},B8=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(N){return N.split(`
`)}):s.map(function(N){return[N]});var i=n,a=vn.internal.getHeight(t)||0;a=a<0?-a:a;var l=vn.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(N,P,z){if(N+1<s.length){var U=P+" "+s[N+1][0];return kk(U,t,z).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var u,d,f=kk("3",t,i).height,A=t.multiline?a-i:(a-f)/2,m=A+=2,g=0,y=0,x=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+kk(e,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",w=0,B=0;B<s.length;B++)if(s.hasOwnProperty(B)){var k=!1;if(s[B].length!==1&&x!==s[B].length-1){if((f+2)*(w+2)+2>a)continue e;v+=s[B][x],k=!0,y=B,B--}else{v=(v+=s[B][x]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var j=parseInt(B),I=c(j,v,i),O=B>=s.length-1;if(I&&!O){v+=" ",x=0;continue}if(I||O){if(O)y=j;else if(t.multiline&&(f+2)*(w+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(w+2)+2>a)continue e;y=j}}for(var F="",D=g;D<=y;D++){var T=s[D];if(t.multiline){if(D===y){F+=T[x]+" ",x=(x+1)%T.length;continue}if(D===g){F+=T[T.length-1]+" ";continue}}F+=T[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=kk(F,t,i).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=or(u)+" "+or(m)+` Td
`,e+="("+K0(F)+`) Tj
`,e+=-or(u)+` 0 Td
`,m=-(i+2),d=0,g=k?y:y+1,w++,v=""}break}return r.text=e,r.fontSize=i,r},kk=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},cmt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},umt=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},dmt=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Bf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(cmt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");IU=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new uhe,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&umt(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],u=l.Rect;if(l.Rect&&(l.Rect=omt(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=vn.createDefaultAppearanceStream(l),_s(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=lmt(l);c.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var m=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var g=m[a];typeof g=="function"&&(g=g.call(s,l)),f+="/"+a+" "+g+" ",s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(s,l)),f+="/"+a+" "+g,s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&(function(y,x){for(var v in y)if(y.hasOwnProperty(v)){var w=v,B=y[v];x.internal.newObjectDeferredBegin(B.objId,!0),_s(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete y[w]}})(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},lhe=xa.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),_s(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)==="/"?s+="/"+Sj(t[i].substr(1)):(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+K0(r(t[i].toString()))+")")}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},k6=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+K0(r(t))+")"},sh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sh.prototype.toString=function(){return this.objId+" 0 R"},sh.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},sh.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:lhe(s,this.objId,this.scope)}):s instanceof sh?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var che=function(){sh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Wc(che,sh);var uhe=function(){sh.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+K0(n(t))+")"}},set:function(n){t=n}})};Wc(uhe,sh);var Bf=function t(){sh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Oa(e,3)},set:function(v){v?this.F=Fa(e,3):this.F=Da(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Cj)return;i="FieldObject"+t.FieldNum++}var v=function(w){return w};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+K0(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/IU:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Cj||this instanceof Gg))return k6(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Do==0?k6(A,this.objId,this.scope):A},set:function(v){v=v.toString(),A=this instanceof Do==0?v.substr(0,1)==="("?$y(v.substr(1,v.length-2)):$y(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Do==1?$y(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof Do==1?"/"+Sj(v):v}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Do==0?k6(m,this.objId,this.scope):m},set:function(v){v=v.toString(),m=this instanceof Do==0?v.substr(0,1)==="("?$y(v.substr(1,v.length-2)):$y(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Do==1?$y(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Do==1?"/"+Sj(v):v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(v){v=!!v,y=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(v){g=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,1)},set:function(v){v?this.Ff=Fa(this.Ff,1):this.Ff=Da(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,2)},set:function(v){v?this.Ff=Fa(this.Ff,2):this.Ff=Da(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,3)},set:function(v){v?this.Ff=Fa(this.Ff,3):this.Ff=Da(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');x=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(x){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};Wc(Bf,sh);var x1=function(){Bf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lhe(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=(function(i,a,l){l||(l=1);for(var c,u=[];c=a.exec(i);)u.push(c[l]);return u})(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,18)},set:function(n){n?this.Ff=Fa(this.Ff,18):this.Ff=Da(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Fa(this.Ff,19):this.Ff=Da(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,20)},set:function(n){n?(this.Ff=Fa(this.Ff,20),e.sort()):this.Ff=Da(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,22)},set:function(n){n?this.Ff=Fa(this.Ff,22):this.Ff=Da(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,23)},set:function(n){n?this.Ff=Fa(this.Ff,23):this.Ff=Da(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,27)},set:function(n){n?this.Ff=Fa(this.Ff,27):this.Ff=Da(this.Ff,27)}}),this.hasAppearanceStream=!1};Wc(x1,Bf);var b1=function(){x1.call(this),this.fontName="helvetica",this.combo=!1};Wc(b1,x1);var v1=function(){b1.call(this),this.combo=!0};Wc(v1,b1);var TB=function(){v1.call(this),this.edit=!0};Wc(TB,v1);var Do=function(){Bf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,15)},set:function(n){n?this.Ff=Fa(this.Ff,15):this.Ff=Da(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,16)},set:function(n){n?this.Ff=Fa(this.Ff,16):this.Ff=Da(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,17)},set:function(n){n?this.Ff=Fa(this.Ff,17):this.Ff=Da(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,26)},set:function(n){n?this.Ff=Fa(this.Ff,26):this.Ff=Da(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+K0(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){_s(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+Sj(n)}})};Wc(Do,Bf);var _B=function(){Do.call(this),this.pushButton=!0};Wc(_B,Do);var w1=function(){Do.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Wc(w1,Do);var Cj=function(){var t,e;Bf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+K0(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){_s(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wc(Cj,Bf),w1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},w1.prototype.createOption=function(t){var e=new Cj;return e.Parent=this,e.optionName=t,this.Kids.push(e),fmt.call(this.scope,e),e};var RB=function(){Do.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vn.CheckBox.createAppearanceStream()};Wc(RB,Do);var Gg=function(){Bf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,13)},set:function(e){e?this.Ff=Fa(this.Ff,13):this.Ff=Da(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,21)},set:function(e){e?this.Ff=Fa(this.Ff,21):this.Ff=Da(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,23)},set:function(e){e?this.Ff=Fa(this.Ff,23):this.Ff=Da(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,24)},set:function(e){e?this.Ff=Fa(this.Ff,24):this.Ff=Da(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,25)},set:function(e){e?this.Ff=Fa(this.Ff,25):this.Ff=Da(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,26)},set:function(e){e?this.Ff=Fa(this.Ff,26):this.Ff=Da(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wc(Gg,Bf);var OB=function(){Gg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Oa(this.Ff,14)},set:function(t){t?this.Ff=Fa(this.Ff,14):this.Ff=Da(this.Ff,14)}}),this.password=!0};Wc(OB,Gg);var vn={CheckBox:{createAppearanceStream:function(){return{N:{On:vn.CheckBox.YesNormal},D:{On:vn.CheckBox.YesPushDown,Off:vn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=B8(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+or(vn.internal.getWidth(t))+" "+or(vn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+or(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Kf(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=vn.internal.getHeight(t),a=vn.internal.getWidth(t),l=B8(t,t.caption);return s.push("1 g"),s.push("0 0 "+or(a)+" "+or(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+or(a-1)+" "+or(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+or(l.fontSize)+" Tf "+r),s.push(l.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+or(vn.internal.getWidth(t))+" "+or(vn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:vn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=vn.RadioButton.Circle.YesNormal,e.D[t]=vn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Kf(t);e.scope=t.scope;var n=[],r=vn.internal.getWidth(t)<=vn.internal.getHeight(t)?vn.internal.getWidth(t)/4:vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=vn.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$p(vn.internal.getWidth(t)/2)+" "+$p(vn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=[],r=vn.internal.getWidth(t)<=vn.internal.getHeight(t)?vn.internal.getWidth(t)/4:vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*vn.internal.Bezier_C).toFixed(5)),a=Number((r*vn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$p(vn.internal.getWidth(t)/2)+" "+$p(vn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$p(vn.internal.getWidth(t)/2)+" "+$p(vn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=[],r=vn.internal.getWidth(t)<=vn.internal.getHeight(t)?vn.internal.getWidth(t)/4:vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*vn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$p(vn.internal.getWidth(t)/2)+" "+$p(vn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:vn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=vn.RadioButton.Cross.YesNormal,e.D[t]=vn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Kf(t);e.scope=t.scope;var n=[],r=vn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+or(vn.internal.getWidth(t)-2)+" "+or(vn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(or(r.x1.x)+" "+or(r.x1.y)+" m"),n.push(or(r.x2.x)+" "+or(r.x2.y)+" l"),n.push(or(r.x4.x)+" "+or(r.x4.y)+" m"),n.push(or(r.x3.x)+" "+or(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=vn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+or(vn.internal.getWidth(t))+" "+or(vn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+or(vn.internal.getWidth(t)-2)+" "+or(vn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(or(n.x1.x)+" "+or(n.x1.y)+" m"),r.push(or(n.x2.x)+" "+or(n.x2.y)+" l"),r.push(or(n.x4.x)+" "+or(n.x4.y)+" m"),r.push(or(n.x3.x)+" "+or(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Kf(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+or(vn.internal.getWidth(t))+" "+or(vn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};vn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=vn.internal.getWidth(t),n=vn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},vn.internal.getWidth=function(t){var e=0;return _s(t)==="object"&&(e=fY(t.Rect[2])),e},vn.internal.getHeight=function(t){var e=0;return _s(t)==="object"&&(e=fY(t.Rect[3])),e};var fmt=xa.addField=function(t){if(dmt(this,t),!(t instanceof Bf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};xa.AcroFormChoiceField=x1,xa.AcroFormListBox=b1,xa.AcroFormComboBox=v1,xa.AcroFormEditBox=TB,xa.AcroFormButton=Do,xa.AcroFormPushButton=_B,xa.AcroFormRadioButton=w1,xa.AcroFormCheckBox=RB,xa.AcroFormTextField=Gg,xa.AcroFormPasswordField=OB,xa.AcroFormAppearance=vn,xa.AcroForm={ChoiceField:x1,ListBox:b1,ComboBox:v1,EditBox:TB,Button:Do,PushButton:_B,RadioButton:w1,CheckBox:RB,TextField:Gg,PasswordField:OB,Appearance:vn},Rn.AcroForm={ChoiceField:x1,ListBox:b1,ComboBox:v1,EditBox:TB,Button:Do,PushButton:_B,RadioButton:w1,CheckBox:RB,TextField:Gg,PasswordField:OB,Appearance:vn};Rn.AcroForm;function dhe(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(N,P){var z,U,ee,q,Z,G=n;if((P=P||n)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(I(N))for(Z in r)for(ee=r[Z],z=0;z<ee.length;z+=1){for(q=!0,U=0;U<ee[z].length;U+=1)if(ee[z][U]!==void 0&&ee[z][U]!==N[U]){q=!1;break}if(q===!0){G=Z;break}}else for(Z in r)for(ee=r[Z],z=0;z<ee.length;z+=1){for(q=!0,U=0;U<ee[z].length;U+=1)if(ee[z][U]!==void 0&&ee[z][U]!==N.charCodeAt(U)){q=!1;break}if(q===!0){G=Z;break}}return G===n&&P!==n&&(G=P),G},i=function N(P){for(var z=this.internal.write,U=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:P.width}),q.push({key:"Height",value:P.height}),P.colorSpace===v.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===v.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var Z="",G=0,ne=P.transparency.length;G<ne;G++)Z+=P.transparency[G]+" "+P.transparency[G]+" ";q.push({key:"Mask",value:"["+Z+"]"})}P.sMask!==void 0&&q.push({key:"SMask",value:P.objectId+1+" 0 R"});var K=P.filter!==void 0?["/"+P.filter]:void 0;if(U({data:P.data,additionalKeyValues:q,alreadyAppliedFilters:K,objectId:P.objectId}),z("endobj"),"sMask"in P&&P.sMask!==void 0){var H,Q=(H=P.sMaskBitsPerComponent)!==null&&H!==void 0?H:P.bitsPerComponent,X={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:Q,data:P.sMask};"filter"in P&&(X.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(Q," /Columns ").concat(P.width),X.filter=P.filter),N.call(this,X)}if(P.colorSpace===v.INDEXED){var re=this.internal.newObject();U({data:F(new Uint8Array(P.palette)),objectId:re}),z("endobj")}},a=function(){var N=this.internal.collections[e+"images"];for(var P in N)i.call(this,N[P])},l=function(){var N,P=this.internal.collections[e+"images"],z=this.internal.write;for(var U in P)z("/I"+(N=P[U]).index,N.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var N=this.internal.collections[e+"images"];return c.call(this),N},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(N){return typeof t["process"+N.toUpperCase()]=="function"},A=function(N){return _s(N)==="object"&&N.nodeType===1},m=function(N,P){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var z=""+N.getAttribute("src");if(z.indexOf("data:image/")===0)return NB(unescape(z).split("base64,").pop());var U=t.loadFile(z,!0);if(U!==void 0)return U}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ee;switch(P){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;default:ee="image/jpeg"}return NB(N.toDataURL(ee,1).split("base64,").pop())}},g=function(N){var P=this.internal.collections[e+"images"];if(P){for(var z in P)if(N===P[z].alias)return P[z]}},y=function(N,P,z){return N||P||(N=-96,P=-96),N<0&&(N=-1*z.width*72/N/this.internal.scaleFactor),P<0&&(P=-1*z.height*72/P/this.internal.scaleFactor),N===0&&(N=P*z.width/z.height),P===0&&(P=N*z.height/z.width),[N,P]},x=function(N,P,z,U,ee,q){var Z=y.call(this,z,U,ee),G=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,K=u.call(this);if(z=Z[0],U=Z[1],K[ee.index]=ee,q){q*=Math.PI/180;var H=Math.cos(q),Q=Math.sin(q),X=function(le){return le.toFixed(4)},re=[X(H),X(Q),X(-1*Q),X(H),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,G(N),ne(P+U),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([G(z),"0","0",G(U),"0","0","cm"].join(" "))):this.internal.write([G(z),"0","0",G(U),G(N),ne(P+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=t.__addimage__.sHashCode=function(N){var P,z,U=0;if(typeof N=="string")for(z=N.length,P=0;P<z;P++)U=(U<<5)-U+N.charCodeAt(P),U|=0;else if(I(N))for(z=N.byteLength/2,P=0;P<z;P++)U=(U<<5)-U+N[P],U|=0;return U},k=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var P=!0;return N.length===0&&(P=!1),N.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(P=!1),P},j=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var P=N.indexOf(",");return P<0?null:N.substring(0,P).trim().endsWith("base64")?N.substring(P+1):null};t.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},O=t.__addimage__.binaryStringToUint8Array=function(N){for(var P=N.length,z=new Uint8Array(P),U=0;U<P;U++)z[U]=N.charCodeAt(U);return z},F=t.__addimage__.arrayBufferToBinaryString=function(N){for(var P="",z=I(N)?N:new Uint8Array(N),U=0;U<z.length;U+=8192)P+=String.fromCharCode.apply(null,z.subarray(U,U+8192));return P};t.addImage=function(){var N,P,z,U,ee,q,Z,G,ne;if(typeof arguments[1]=="number"?(P=n,z=arguments[1],U=arguments[2],ee=arguments[3],q=arguments[4],Z=arguments[5],G=arguments[6],ne=arguments[7]):(P=arguments[1],z=arguments[2],U=arguments[3],ee=arguments[4],q=arguments[5],Z=arguments[6],G=arguments[7],ne=arguments[8]),_s(N=arguments[0])==="object"&&!A(N)&&"imageData"in N){var K=N;N=K.imageData,P=K.format||P||n,z=K.x||z||0,U=K.y||U||0,ee=K.w||K.width||ee,q=K.h||K.height||q,Z=K.alias||Z,G=K.compression||G,ne=K.rotation||K.angle||ne}var H=this.internal.getFilters();if(G===void 0&&H.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(z)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var Q=D.call(this,N,P,Z,G);return x.call(this,z,U,ee,q,Q,ne),this};var D=function(N,P,z,U){var ee,q,Z;if(typeof N=="string"&&s(N)===n){N=unescape(N);var G=T(N,!1);(G!==""||(G=t.loadFile(N,!0))!==void 0)&&(N=G)}if(A(N)&&(N=m(N,P)),P=s(N,P),!f(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((Z=z)==null||Z.length===0)&&(z=(function(ne){return typeof ne=="string"||I(ne)?B(ne):I(ne.data)?B(ne.data):null})(N)),(ee=g.call(this,z))||(N instanceof Uint8Array||P==="RGBA"||(q=N,N=O(N)),ee=this["process"+P.toUpperCase()](N,d.call(this),z,(function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:w.NONE})(U),q)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},T=t.__addimage__.convertBase64ToBinaryString=function(N,P){P=typeof P!="boolean"||P;var z,U="";if(typeof N=="string"){var ee;z=(ee=j(N))!==null&&ee!==void 0?ee:N;try{U=NB(z)}catch(q){if(P)throw k(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(N){var P,z,U="";if(A(N)&&(N=m(N)),typeof N=="string"&&s(N)===n&&((U=T(N,!1))===""&&(U=t.loadFile(N)||""),N=U),z=s(N),!f(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(N instanceof Uint8Array||(N=O(N)),!(P=this["process"+z.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=z,P}})(Rn.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Rn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){r=u[A];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(y.objId),w=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(v(r.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(v(w))+") >>",y.content=i;var B=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(g(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var I=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+I+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:u(r),w:c(n+s),h:u(r+i)},options:a,type:"link"})},t.textWithLink=function(n,r,s,i){var a,l,c=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(n,l).length;a=Math.ceil(u*d)}else l=c,a=u;return this.text(n,r,s,i),s+=.2*u,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,s-u,l,a,i),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(Rn.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(y){var x=0,v=n,w="",B=0;for(x=0;x<y.length;x+=1)v[y.charCodeAt(x)]!==void 0?(B++,typeof(v=v[y.charCodeAt(x)])=="number"&&(w+=String.fromCharCode(v),v=n,B=0),x===y.length-1&&(v=n,w+=y.charAt(x-(B-1)),x-=B-1,B=0)):(v=n,w+=y.charAt(x-B),x-=B,B=0);return w};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(y,x,v){return a(y)?i(y)===!1?-1:!u(y)||!a(x)&&!a(v)||!a(v)&&l(x)||l(y)&&!a(x)||l(y)&&c(x)||l(y)&&l(x)?0:d(y)&&a(x)&&!l(x)&&a(v)&&u(v)?3:l(y)||!a(v)?1:2:-1},m=function(y){var x=0,v=0,w=0,B="",k="",j="",I=(y=y||"").split("\\s+"),O=[];for(x=0;x<I.length;x+=1){for(O.push(""),v=0;v<I[x].length;v+=1)B=I[x][v],k=I[x][v-1],j=I[x][v+1],a(B)?(w=A(B,k,j),O[x]+=w!==-1?String.fromCharCode(e[B.charCodeAt(0)][w]):B):O[x]+=B;O[x]=f(O[x])}return O.join(" ")},g=t.__arabicParser__.processArabic=t.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(x)){var w=0;for(v=[],w=0;w<x.length;w+=1)Array.isArray(x[w])?v.push([m(x[w][0]),x[w][1],x[w][2]]):v.push([m(x[w])]);y=v}else y=m(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",g])})(Rn.API),Rn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Rn.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(y){A=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(y){g=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,y=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(B,k){return B.concat(x.splitTextToSize(k,v))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(y=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=y);return m!==0&&(g=c.length),{w:m/=A,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,g,y,x,v=[],w=[],B=[],k={},j={},I=[],O=[],F=(A=A||{}).autoSize||!1,D=A.printHeaders!==!1,T=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,N=A.margins||Object.assign({width:this.getPageWidth()},e),P=typeof A.padding=="number"?A.padding:3,z=A.headerBackgroundColor||"#c8c8c8",U=A.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=U,this.setFontSize(T),f==null)w=v=Object.keys(d[0]),B=v.map(function(){return"left"});else if(Array.isArray(f)&&_s(f[0])==="object")for(v=f.map(function(K){return K.name}),w=f.map(function(K){return K.prompt||K.name||""}),B=f.map(function(K){return K.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(w=v=f,B=v.map(function(){return"left"}));if(F||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<v.length;m+=1){for(k[x=v[m]]=d.map(function(K){return K[x]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=k[x],this.setFont(void 0,"normal"),y=0;y<g.length;y+=1)I.push(this.getTextDimensions(g[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[x]=Math.max.apply(null,I)+P+P,I=[]}if(D){var ee={};for(m=0;m<v.length;m+=1)ee[v[m]]={},ee[v[m]].text=w[m],ee[v[m]].align=B[m];var q=l.call(this,ee,j);O=v.map(function(K){return new i(c,u,j[K],q,ee[K].text,void 0,ee[K].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var Z=f.reduce(function(K,H){return K[H.name]=H.align,K},{});for(m=0;m<d.length;m+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:m,data:d[m]},this);var G=l.call(this,d[m],j);for(y=0;y<v.length;y+=1){var ne=d[m][v[y]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:m,col:y,data:ne},this),a.call(this,new i(c,u,j[v[y]],G,ne,m+2,Z[v[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/A+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(g)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),n=!1}})(Rn.API);var fhe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hhe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j8=dhe(hhe),Ahe=[100,200,300,400,500,600,700,800,900],hmt=dhe(Ahe);function B6(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(i){return fhe[i=i||"normal"]?i:"normal"})(t.style),r=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),s=(function(i){return typeof j8[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function hY(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var Amt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},AY={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pY(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function mY(t){return t.trimLeft()}function pmt(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function mmt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Py,Bk,gY,yY,xY,j6=["times"];function bY(t,e,n,r,s){var i=4,a=wY;switch(s){case Rn.API.image_compression.FAST:i=1,a=vY;break;case Rn.API.image_compression.MEDIUM:i=6,a=SY;break;case Rn.API.image_compression.SLOW:i=9,a=CY}t=(function(c,u,d,f){for(var A,m=c.length/u,g=new Uint8Array(c.length+m),y=[gmt,vY,wY,SY,CY],x=0;x<m;x+=1){var v=x*u,w=c.subarray(v,v+u);if(f)g.set(f(w,d,A),v+x);else{for(var B=y.length,k=[],j=0;j<B;j+=1)k[j]=y[j](w,d,A);var I=xmt(k.concat());g.set(k[I],v+x)}A=w}return g})(t,e,Math.ceil(n*r/8),a);var l=b8(t,{level:i});return Rn.API.__addimage__.arrayBufferToBinaryString(l)}function gmt(t){var e=Array.apply([],t);return e.unshift(0),e}function vY(t,e){var n=t.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var i=t[s-e]||0;r[s+1]=t[s]-i+256&255}return r}function wY(t,e,n){var r=t.length,s=[];s[0]=2;for(var i=0;i<r;i+=1){var a=n&&n[i]||0;s[i+1]=t[i]-a+256&255}return s}function SY(t,e,n){var r=t.length,s=[];s[0]=3;for(var i=0;i<r;i+=1){var a=t[i-e]||0,l=n&&n[i]||0;s[i+1]=t[i]+256-(a+l>>>1)&255}return s}function CY(t,e,n){var r=t.length,s=[];s[0]=4;for(var i=0;i<r;i+=1){var a=ymt(t[i-e]||0,n&&n[i]||0,n&&n[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function ymt(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),s=Math.abs(t-n),i=Math.abs(t+e-n-n);return r<=s&&r<=i?t:s<=i?e:n}function xmt(t){var e=t.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function E6(t,e,n){var r=e*n,s=Math.floor(r/8),i=16-(r-8*s+n),a=(1<<n)-1;return phe(t,s)>>i&a}function kY(t,e,n,r){var s=n*r,i=Math.floor(s/8),a=16-(s-8*i+r),l=(1<<r)-1,c=(e&l)<<a;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,i,phe(t,i)&~(l<<a)&65535|c)}function phe(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function bmt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var l=null,c=null;i&&(l=e,c=a,e+=3*a);var u=!0,d=[],f=0,A=null,m=0,g=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,g=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&y||(A=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var x=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,k=t[e++],j=k>>6&1,I=1<<1+(7&k),O=l,F=c,D=!1;k>>7&&(D=!0,O=e,F=I,e+=3*I);var T=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}d.push({x,y:v,width:w,height:B,has_local_palette:D,palette_offset:O,palette_size:F,data_offset:T,data_length:e-T,transparent_index:A,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(P){if(P<0||P>=d.length)throw new Error("Frame index out of range.");return d[P]},this.decodeAndBlitFrameBGRA=function(P,z){var U=this.frameInfo(P),ee=U.width*U.height,q=new Uint8Array(ee);BY(t,U.data_offset,q,ee);var Z=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var ne=U.width,K=n-ne,H=ne,Q=4*(U.y*n+U.x),X=4*((U.y+U.height)*n+U.x),re=Q,le=4*K;U.interlaced===!0&&(le+=4*n*7);for(var Ae=8,xe=0,Be=q.length;xe<Be;++xe){var me=q[xe];if(H===0&&(H=ne,(re+=le)>=X&&(le=4*K+4*n*(Ae-1),re=Q+(ne+K)*(Ae<<1),Ae>>=1)),me===G)re+=4;else{var ve=t[Z+3*me],je=t[Z+3*me+1],ye=t[Z+3*me+2];z[re++]=ye,z[re++]=je,z[re++]=ve,z[re++]=255}--H}},this.decodeAndBlitFrameRGBA=function(P,z){var U=this.frameInfo(P),ee=U.width*U.height,q=new Uint8Array(ee);BY(t,U.data_offset,q,ee);var Z=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var ne=U.width,K=n-ne,H=ne,Q=4*(U.y*n+U.x),X=4*((U.y+U.height)*n+U.x),re=Q,le=4*K;U.interlaced===!0&&(le+=4*n*7);for(var Ae=8,xe=0,Be=q.length;xe<Be;++xe){var me=q[xe];if(H===0&&(H=ne,(re+=le)>=X&&(le=4*K+4*n*(Ae-1),re=Q+(ne+K)*(Ae<<1),Ae>>=1)),me===G)re+=4;else{var ve=t[Z+3*me],je=t[Z+3*me+1],ye=t[Z+3*me+2];z[re++]=ve,z[re++]=je,z[re++]=ye,z[re++]=255}--H}}}function BY(t,e,n,r){for(var s=t[e++],i=1<<s,a=i+1,l=a+1,c=s+1,u=(1<<c)-1,d=0,f=0,A=0,m=t[e++],g=new Int32Array(4096),y=null;;){for(;d<16&&m!==0;)f|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==i){if(x===a)break;for(var v=x<l?x:y,w=0,B=v;B>i;)B=g[B]>>8,++w;var k=B;if(A+w+(v!==x?1:0)>r)return void Zs.log("Warning, gif stream longer than expected.");n[A++]=k;var j=A+=w;for(v!==x&&(n[A++]=k),B=v;w--;)B=g[B],n[--j]=255&B,B>>=8;y!==null&&l<4096&&(g[l++]=y<<8|k,l>=u+1&&c<12&&(++c,u=u<<1|1)),y=x}else l=a+1,u=(1<<(c=s+1))-1,y=null}return A!==r&&Zs.log("Warning, gif stream shorter than expected."),n}function I6(t){var e,n,r,s,i,a=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),m=new Array(64),g=new Array(64),y=[],x=0,v=7,w=new Array(64),B=new Array(64),k=new Array(64),j=new Array(256),I=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(Q,X){for(var re=0,le=0,Ae=new Array,xe=1;xe<=16;xe++){for(var Be=1;Be<=Q[xe];Be++)Ae[X[le]]=[],Ae[X[le]][0]=re,Ae[X[le]][1]=xe,le++,re++;re*=2}return Ae}function Z(Q){for(var X=Q[0],re=Q[1]-1;re>=0;)X&1<<re&&(x|=1<<v),re--,--v<0&&(x==255?(G(255),G(0)):G(x),v=7,x=0)}function G(Q){y.push(Q)}function ne(Q){G(Q>>8&255),G(255&Q)}function K(Q,X,re,le,Ae){for(var xe,Be=Ae[0],me=Ae[240],ve=(function(_e,ht){var ot,$t,kt,Ht,Sn,Ut,en,fn,Qt,rn,Yt=0;for(Qt=0;Qt<8;++Qt){ot=_e[Yt],$t=_e[Yt+1],kt=_e[Yt+2],Ht=_e[Yt+3],Sn=_e[Yt+4],Ut=_e[Yt+5],en=_e[Yt+6];var sn=ot+(fn=_e[Yt+7]),Fn=ot-fn,Ft=$t+en,xn=$t-en,ke=kt+Ut,$e=kt-Ut,yt=Ht+Sn,Ct=Ht-Sn,_t=sn+yt,Lt=sn-yt,zt=Ft+ke,Jt=Ft-ke;_e[Yt]=_t+zt,_e[Yt+4]=_t-zt;var dt=.707106781*(Jt+Lt);_e[Yt+2]=Lt+dt,_e[Yt+6]=Lt-dt;var pr=.382683433*((_t=Ct+$e)-(Jt=xn+Fn)),Kr=.5411961*_t+pr,Hn=1.306562965*Jt+pr,Ls=.707106781*(zt=$e+xn),cn=Fn+Ls,Ji=Fn-Ls;_e[Yt+5]=Ji+Kr,_e[Yt+3]=Ji-Kr,_e[Yt+1]=cn+Hn,_e[Yt+7]=cn-Hn,Yt+=8}for(Yt=0,Qt=0;Qt<8;++Qt){ot=_e[Yt],$t=_e[Yt+8],kt=_e[Yt+16],Ht=_e[Yt+24],Sn=_e[Yt+32],Ut=_e[Yt+40],en=_e[Yt+48];var Bs=ot+(fn=_e[Yt+56]),$s=ot-fn,wr=$t+en,ts=$t-en,Er=kt+Ut,Bt=kt-Ut,Bi=Ht+Sn,ys=Ht-Sn,Jn=Bs+Bi,ns=Bs-Bi,ji=wr+Er,ft=wr-Er;_e[Yt]=Jn+ji,_e[Yt+32]=Jn-ji;var Cn=.707106781*(ft+ns);_e[Yt+16]=ns+Cn,_e[Yt+48]=ns-Cn;var Wn=.382683433*((Jn=ys+Bt)-(ft=ts+$s)),Xn=.5411961*Jn+Wn,sr=1.306562965*ft+Wn,da=.707106781*(ji=Bt+ts),Hr=$s+da,cs=$s-da;_e[Yt+40]=cs+Xn,_e[Yt+24]=cs-Xn,_e[Yt+8]=Hr+sr,_e[Yt+56]=Hr-sr,Yt++}for(Qt=0;Qt<64;++Qt)rn=_e[Qt]*ht[Qt],m[Qt]=rn>0?rn+.5|0:rn-.5|0;return m})(Q,X),je=0;je<64;++je)g[O[je]]=ve[je];var ye=g[0]-re;re=g[0],ye==0?Z(le[0]):(Z(le[A[xe=32767+ye]]),Z(f[xe]));for(var ze=63;ze>0&&g[ze]==0;)ze--;if(ze==0)return Z(Be),re;for(var at,ie=1;ie<=ze;){for(var Le=ie;g[ie]==0&&ie<=ze;)++ie;var nt=ie-Le;if(nt>=16){at=nt>>4;for(var Et=1;Et<=at;++Et)Z(me);nt&=15}xe=32767+g[ie],Z(Ae[(nt<<4)+A[xe]]),Z(f[xe]),ie++}return ze!=63&&Z(Be),re}function H(Q){Q=Math.min(Math.max(Q,1),100),i!=Q&&((function(X){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var Ae=a((re[le]*X+50)/100);Ae=Math.min(Math.max(Ae,1),255),l[O[le]]=Ae}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Be=0;Be<64;Be++){var me=a((xe[Be]*X+50)/100);me=Math.min(Math.max(me,1),255),c[O[Be]]=me}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,ye=0;ye<8;ye++)for(var ze=0;ze<8;ze++)u[je]=1/(l[O[je]]*ve[ye]*ve[ze]*8),d[je]=1/(c[O[je]]*ve[ye]*ve[ze]*8),je++})(Q<50?Math.floor(5e3/Q):Math.floor(200-2*Q)),i=Q)}this.encode=function(Q,X){X&&H(X),y=new Array,x=0,v=7,ne(65496),ne(65504),ne(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),ne(1),ne(1),G(0),G(0),(function(){ne(65499),ne(132),G(0);for(var $t=0;$t<64;$t++)G(l[$t]);G(1);for(var kt=0;kt<64;kt++)G(c[kt])})(),(function($t,kt){ne(65472),ne(17),G(8),ne(kt),ne($t),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(Q.width,Q.height),(function(){ne(65476),ne(418),G(0);for(var $t=0;$t<16;$t++)G(F[$t+1]);for(var kt=0;kt<=11;kt++)G(D[kt]);G(16);for(var Ht=0;Ht<16;Ht++)G(T[Ht+1]);for(var Sn=0;Sn<=161;Sn++)G(N[Sn]);G(1);for(var Ut=0;Ut<16;Ut++)G(P[Ut+1]);for(var en=0;en<=11;en++)G(z[en]);G(17);for(var fn=0;fn<16;fn++)G(U[fn+1]);for(var Qt=0;Qt<=161;Qt++)G(ee[Qt])})(),ne(65498),ne(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var re=0,le=0,Ae=0;x=0,v=7,this.encode.displayName="_encode_";for(var xe,Be,me,ve,je,ye,ze,at,ie,Le=Q.data,nt=Q.width,Et=Q.height,_e=4*nt,ht=0;ht<Et;){for(xe=0;xe<_e;){for(je=_e*ht+xe,ze=-1,at=0,ie=0;ie<64;ie++)ye=je+(at=ie>>3)*_e+(ze=4*(7&ie)),ht+at>=Et&&(ye-=_e*(ht+1+at-Et)),xe+ze>=_e&&(ye-=xe+ze-_e+4),Be=Le[ye++],me=Le[ye++],ve=Le[ye++],w[ie]=(I[Be]+I[me+256|0]+I[ve+512|0]>>16)-128,B[ie]=(I[Be+768|0]+I[me+1024|0]+I[ve+1280|0]>>16)-128,k[ie]=(I[Be+1280|0]+I[me+1536|0]+I[ve+1792|0]>>16)-128;re=K(w,u,re,e,r),le=K(B,d,le,n,s),Ae=K(k,d,Ae,n,s),xe+=32}ht+=8}if(v>=0){var ot=[];ot[1]=v+1,ot[0]=(1<<v+1)-1,Z(ot)}return ne(65497),new Uint8Array(y)},t=t||50,(function(){for(var Q=String.fromCharCode,X=0;X<256;X++)j[X]=Q(X)})(),e=q(F,D),n=q(P,z),r=q(T,N),s=q(U,ee),(function(){for(var Q=1,X=2,re=1;re<=15;re++){for(var le=Q;le<X;le++)A[32767+le]=re,f[32767+le]=[],f[32767+le][1]=re,f[32767+le][0]=le;for(var Ae=-(X-1);Ae<=-Q;Ae++)A[32767+Ae]=re,f[32767+Ae]=[],f[32767+Ae][1]=re,f[32767+Ae][0]=X-1+Ae;Q<<=1,X<<=1}})(),(function(){for(var Q=0;Q<256;Q++)I[Q]=19595*Q,I[Q+256|0]=38470*Q,I[Q+512|0]=7471*Q+32768,I[Q+768|0]=-11059*Q,I[Q+1024|0]=-21709*Q,I[Q+1280|0]=32768*Q+8421375,I[Q+1536|0]=-27439*Q,I[Q+1792|0]=-5329*Q})(),H(t)}function Wd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jY(t){function e(D){if(!D)throw Error("assert :P")}function n(D,T,N){for(var P=0;4>P;P++)if(D[T+P]!=N.charCodeAt(P))return!0;return!1}function r(D,T,N,P,z){for(var U=0;U<z;U++)D[T+U]=N[P+U]}function s(D,T,N,P){for(var z=0;z<P;z++)D[T+z]=N}function i(D){return new Int32Array(D)}function a(D,T){for(var N=[],P=0;P<D;P++)N.push(new T);return N}function l(D,T){var N=[];return(function P(z,U,ee){for(var q=ee[U],Z=0;Z<q&&(z.push(ee.length>U+1?[]:new T),!(ee.length<U+1));Z++)P(z[Z],U+1,ee)})(N,0,D),N}var c=function(){var D=this;function T(E,R){for(var W=1<<R-1>>>0;E&W;)W>>>=1;return W?(E&W-1)+W:E}function N(E,R,W,J,oe){e(!(J%W));do E[R+(J-=W)]=oe;while(0<J)}function P(E,R,W,J,oe){if(e(2328>=oe),512>=oe)var ue=i(512);else if((ue=i(oe))==null)return 0;return(function(de,ge,be,Ce,De,Ze){var we,Me,Ke=ge,mt=1<<be,Je=i(16),pt=i(16);for(e(De!=0),e(Ce!=null),e(de!=null),e(0<be),Me=0;Me<De;++Me){if(15<Ce[Me])return 0;++Je[Ce[Me]]}if(Je[0]==De)return 0;for(pt[1]=0,we=1;15>we;++we){if(Je[we]>1<<we)return 0;pt[we+1]=pt[we]+Je[we]}for(Me=0;Me<De;++Me)we=Ce[Me],0<Ce[Me]&&(Ze[pt[we]++]=Me);if(pt[15]==1)return(Ce=new z).g=0,Ce.value=Ze[0],N(de,Ke,1,mt,Ce),mt;var vt,Dt=-1,It=mt-1,bn=0,an=1,tr=1,hn=1<<be;for(Me=0,we=1,De=2;we<=be;++we,De<<=1){if(an+=tr<<=1,0>(tr-=Je[we]))return 0;for(;0<Je[we];--Je[we])(Ce=new z).g=we,Ce.value=Ze[Me++],N(de,Ke+bn,De,hn,Ce),bn=T(bn,we)}for(we=be+1,De=2;15>=we;++we,De<<=1){if(an+=tr<<=1,0>(tr-=Je[we]))return 0;for(;0<Je[we];--Je[we]){if(Ce=new z,(bn&It)!=Dt){for(Ke+=hn,vt=1<<(Dt=we)-be;15>Dt&&!(0>=(vt-=Je[Dt]));)++Dt,vt<<=1;mt+=hn=1<<(vt=Dt-be),de[ge+(Dt=bn&It)].g=vt+be,de[ge+Dt].value=Ke-ge-Dt}Ce.g=we-be,Ce.value=Ze[Me++],N(de,Ke+(bn>>be),De,hn,Ce),bn=T(bn,we)}}return an!=2*pt[15]-1?0:mt})(E,R,W,J,oe,ue)}function z(){this.value=this.g=0}function U(){this.value=this.g=0}function ee(){this.G=a(5,z),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Tf,U)}function q(E,R,W,J){e(E!=null),e(R!=null),e(2147483648>J),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=R,E.pa=W,E.Jd=R,E.Yc=W+J,E.Zc=4<=J?W+J-4+1:W,Be(E)}function Z(E,R){for(var W=0;0<R--;)W|=ve(E,128)<<R;return W}function G(E,R){var W=Z(E,R);return me(E)?-W:W}function ne(E,R,W,J){var oe,ue=0;for(e(E!=null),e(R!=null),e(4294967288>J),E.Sb=J,E.Ra=0,E.u=0,E.h=0,4<J&&(J=4),oe=0;oe<J;++oe)ue+=R[W+oe]<<8*oe;E.Ra=ue,E.bb=J,E.oa=R,E.pa=W}function K(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<Tu-8>>>0,++E.bb,E.u-=8;le(E)&&(E.h=1,E.u=0)}function H(E,R){if(e(0<=R),!E.h&&R<=tl){var W=re(E)&pl[R];return E.u+=R,K(E),W}return E.h=1,E.u=0}function Q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function X(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(E){return E.Ra>>>(E.u&Tu-1)>>>0}function le(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>Tu}function Ae(E,R){E.u=R,E.h=le(E)}function xe(E){E.u>=_u&&(e(E.u>=_u),K(E))}function Be(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function me(E){return Z(E,1)}function ve(E,R){var W=E.Ca;0>E.b&&Be(E);var J=E.b,oe=W*R>>>8,ue=(E.I>>>J>oe)+0;for(ue?(W-=oe,E.I-=oe+1<<J>>>0):W=oe+1,J=W,oe=0;256<=J;)oe+=8,J>>=8;return J=7^oe+Td[J],E.b-=J,E.Ca=(W<<J)-1,ue}function je(E,R,W){E[R+0]=W>>24&255,E[R+1]=W>>16&255,E[R+2]=W>>8&255,E[R+3]=255&W}function ye(E,R){return E[R+0]|E[R+1]<<8}function ze(E,R){return ye(E,R)|E[R+2]<<16}function at(E,R){return ye(E,R)|ye(E,R+2)<<16}function ie(E,R){var W=1<<R;return e(E!=null),e(0<R),E.X=i(W),E.X==null?0:(E.Mb=32-R,E.Xa=R,1)}function Le(E,R){e(E!=null),e(R!=null),e(E.Xa==R.Xa),r(R.X,0,E.X,0,1<<R.Xa)}function nt(){this.X=[],this.Xa=this.Mb=0}function Et(E,R,W,J){e(W!=null),e(J!=null);var oe=W[0],ue=J[0];return oe==0&&(oe=(E*ue+R/2)/R),ue==0&&(ue=(R*oe+E/2)/E),0>=oe||0>=ue?0:(W[0]=oe,J[0]=ue,1)}function _e(E,R){return E+(1<<R)-1>>>R}function ht(E,R){return((4278255360&E)+(4278255360&R)>>>0&4278255360)+((16711935&E)+(16711935&R)>>>0&16711935)>>>0}function ot(E,R){D[R]=function(W,J,oe,ue,de,ge,be){var Ce;for(Ce=0;Ce<de;++Ce){var De=D[E](ge[be+Ce-1],oe,ue+Ce);ge[be+Ce]=ht(W[J+Ce],De)}}}function $t(){this.ud=this.hd=this.jd=0}function kt(E,R){return((4278124286&(E^R))>>>1)+(E&R)>>>0}function Ht(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Sn(E,R){return Ht(E+(E-R+.5>>1))}function Ut(E,R,W){return Math.abs(R-W)-Math.abs(E-W)}function en(E,R,W,J,oe,ue,de){for(J=ue[de-1],W=0;W<oe;++W)ue[de+W]=J=ht(E[R+W],J)}function fn(E,R,W,J,oe){var ue;for(ue=0;ue<W;++ue){var de=E[R+ue],ge=de>>8&255,be=16711935&(be=(be=16711935&de)+((ge<<16)+ge));J[oe+ue]=(4278255360&de)+be>>>0}}function Qt(E,R){R.jd=255&E,R.hd=E>>8&255,R.ud=E>>16&255}function rn(E,R,W,J,oe,ue){var de;for(de=0;de<J;++de){var ge=R[W+de],be=ge>>>8,Ce=ge,De=255&(De=(De=ge>>>16)+((E.jd<<24>>24)*(be<<24>>24)>>>5));Ce=255&(Ce=(Ce+=(E.hd<<24>>24)*(be<<24>>24)>>>5)+((E.ud<<24>>24)*(De<<24>>24)>>>5)),oe[ue+de]=(4278255360&ge)+(De<<16)+Ce}}function Yt(E,R,W,J,oe){D[R]=function(ue,de,ge,be,Ce,De,Ze,we,Me){for(be=Ze;be<we;++be)for(Ze=0;Ze<Me;++Ze)Ce[De++]=oe(ge[J(ue[de++])])},D[E]=function(ue,de,ge,be,Ce,De,Ze){var we=8>>ue.b,Me=ue.Ea,Ke=ue.K[0],mt=ue.w;if(8>we)for(ue=(1<<ue.b)-1,mt=(1<<we)-1;de<ge;++de){var Je,pt=0;for(Je=0;Je<Me;++Je)Je&ue||(pt=J(be[Ce++])),De[Ze++]=oe(Ke[pt&mt]),pt>>=we}else D["VP8LMapColor"+W](be,Ce,Ke,mt,De,Ze,de,ge,Me)}}function sn(E,R,W,J,oe){for(W=R+W;R<W;){var ue=E[R++];J[oe++]=ue>>16&255,J[oe++]=ue>>8&255,J[oe++]=255&ue}}function Fn(E,R,W,J,oe){for(W=R+W;R<W;){var ue=E[R++];J[oe++]=ue>>16&255,J[oe++]=ue>>8&255,J[oe++]=255&ue,J[oe++]=ue>>24&255}}function Ft(E,R,W,J,oe){for(W=R+W;R<W;){var ue=(de=E[R++])>>16&240|de>>12&15,de=240&de|de>>28&15;J[oe++]=ue,J[oe++]=de}}function xn(E,R,W,J,oe){for(W=R+W;R<W;){var ue=(de=E[R++])>>16&248|de>>13&7,de=de>>5&224|de>>3&31;J[oe++]=ue,J[oe++]=de}}function ke(E,R,W,J,oe){for(W=R+W;R<W;){var ue=E[R++];J[oe++]=255&ue,J[oe++]=ue>>8&255,J[oe++]=ue>>16&255}}function $e(E,R,W,J,oe,ue){if(ue==0)for(W=R+W;R<W;)je(J,((ue=E[R++])[0]>>24|ue[1]>>8&65280|ue[2]<<8&16711680|ue[3]<<24)>>>0),oe+=32;else r(J,oe,E,R,W)}function yt(E,R){D[R][0]=D[E+"0"],D[R][1]=D[E+"1"],D[R][2]=D[E+"2"],D[R][3]=D[E+"3"],D[R][4]=D[E+"4"],D[R][5]=D[E+"5"],D[R][6]=D[E+"6"],D[R][7]=D[E+"7"],D[R][8]=D[E+"8"],D[R][9]=D[E+"9"],D[R][10]=D[E+"10"],D[R][11]=D[E+"11"],D[R][12]=D[E+"12"],D[R][13]=D[E+"13"],D[R][14]=D[E+"0"],D[R][15]=D[E+"0"]}function Ct(E){return E==eg||E==ny||E==pp||E==ry}function _t(){this.eb=[],this.size=this.A=this.fb=0}function Lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _t,this.f.kb=new Lt,this.sd=null}function Jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Kr(E,R){var W=E.T,J=R.ba.f.RGBA,oe=J.eb,ue=J.fb+E.ka*J.A,de=ao[R.ba.S],ge=E.y,be=E.O,Ce=E.f,De=E.N,Ze=E.ea,we=E.W,Me=R.cc,Ke=R.dc,mt=R.Mc,Je=R.Nc,pt=E.ka,vt=E.ka+E.T,Dt=E.U,It=Dt+1>>1;for(pt==0?de(ge,be,null,null,Ce,De,Ze,we,Ce,De,Ze,we,oe,ue,null,null,Dt):(de(R.ec,R.fc,ge,be,Me,Ke,mt,Je,Ce,De,Ze,we,oe,ue-J.A,oe,ue,Dt),++W);pt+2<vt;pt+=2)Me=Ce,Ke=De,mt=Ze,Je=we,De+=E.Rc,we+=E.Rc,ue+=2*J.A,de(ge,(be+=2*E.fa)-E.fa,ge,be,Me,Ke,mt,Je,Ce,De,Ze,we,oe,ue-J.A,oe,ue,Dt);return be+=E.fa,E.j+vt<E.o?(r(R.ec,R.fc,ge,be,Dt),r(R.cc,R.dc,Ce,De,It),r(R.Mc,R.Nc,Ze,we,It),W--):1&vt||de(ge,be,null,null,Ce,De,Ze,we,Ce,De,Ze,we,oe,ue+J.A,null,null,Dt),W}function Hn(E,R,W){var J=E.F,oe=[E.J];if(J!=null){var ue=E.U,de=R.ba.S,ge=de==Zm||de==pp;R=R.ba.f.RGBA;var be=[0],Ce=E.ka;be[0]=E.T,E.Kb&&(Ce==0?--be[0]:(--Ce,oe[0]-=E.width),E.j+E.ka+E.T==E.o&&(be[0]=E.o-E.j-Ce));var De=R.eb;Ce=R.fb+Ce*R.A,E=Km(J,oe[0],E.width,ue,be,De,Ce+(ge?0:3),R.A),e(W==be),E&&Ct(de)&&zh(De,Ce,ge,ue,be,R.A)}return 0}function Ls(E){var R=E.ma,W=R.ba.S,J=11>W,oe=W==Eo||W==Ac||W==Zm||W==Ap||W==12||Ct(W);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!Nd(R.Oa,E,oe?11:12))return 0;if(oe&&Ct(W)&&Nu(),E.da)alert("todo:use_scaling");else{if(J){if(R.Ib=pr,E.Kb){if(W=E.U+1>>1,R.memory=i(E.U+2*W),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+E.U,R.Mc=R.cc,R.Nc=R.dc+W,R.Ib=Kr,Nu()}}else alert("todo:EmitYUV");oe&&(R.Jb=Hn,J&&$l())}if(J&&!$f){for(E=0;256>E;++E)oo[E]=89858*(E-128)+yp>>bc,SN[E]=-22014*(E-128)+yp,HS[E]=-45773*(E-128),ly[E]=113618*(E-128)+yp>>bc;for(E=Hh;E<Lf;++E)R=76283*(E-16)+yp>>bc,CN[E-Hh]=ci(R,255),kN[E-Hh]=ci(R+8>>4,15);$f=1}return 1}function cn(E){var R=E.ma,W=E.U,J=E.T;return e(!(1&E.ka)),0>=W||0>=J?0:(W=R.Ib(E,R),R.Jb!=null&&R.Jb(E,R,W),R.Dc+=W,1)}function Ji(E){E.ma.memory=null}function Bs(E,R,W,J){return H(E,8)!=47?0:(R[0]=H(E,14)+1,W[0]=H(E,14)+1,J[0]=H(E,1),H(E,3)!=0?0:!E.h)}function $s(E,R){if(4>E)return E+1;var W=E-2>>1;return(2+(1&E)<<W)+H(R,W)+1}function wr(E,R){return 120<R?R-120:1<=(W=((W=mc[R-1])>>4)*E+(8-(15&W)))?W:1;var W}function ts(E,R,W){var J=re(W),oe=E[R+=255&J].g-8;return 0<oe&&(Ae(W,W.u+8),J=re(W),R+=E[R].value,R+=J&(1<<oe)-1),Ae(W,W.u+E[R].g),E[R].value}function Er(E,R,W){return W.g+=E.g,W.value+=E.value<<R>>>0,e(8>=W.g),E.g}function Bt(E,R,W){var J=E.xc;return e((R=J==0?0:E.vc[E.md*(W>>J)+(R>>J)])<E.Wb),E.Ya[R]}function Bi(E,R,W,J){var oe=E.ab,ue=E.c*R,de=E.C;R=de+R;var ge=W,be=J;for(J=E.Ta,W=E.Ua;0<oe--;){var Ce=E.gc[oe],De=de,Ze=R,we=ge,Me=be,Ke=(be=J,ge=W,Ce.Ea);switch(e(De<Ze),e(Ze<=Ce.nc),Ce.hc){case 2:sa(we,Me,(Ze-De)*Ke,be,ge);break;case 0:var mt=De,Je=Ze,pt=be,vt=ge,Dt=(hn=Ce).Ea;mt==0&&(up(we,Me,null,null,1,pt,vt),en(we,Me+1,0,0,Dt-1,pt,vt+1),Me+=Dt,vt+=Dt,++mt);for(var It=1<<hn.b,bn=It-1,an=_e(Dt,hn.b),tr=hn.K,hn=hn.w+(mt>>hn.b)*an;mt<Je;){var Cr=tr,Ys=hn,ir=1;for(dp(we,Me,pt,vt-Dt,1,pt,vt);ir<Dt;){var on=(ir&~bn)+It;on>Dt&&(on=Dt),(0,_d[Cr[Ys++]>>8&15])(we,Me+ +ir,pt,vt+ir-Dt,on-ir,pt,vt+ir),ir=on}Me+=Dt,vt+=Dt,++mt&bn||(hn+=an)}Ze!=Ce.nc&&r(be,ge-Ke,be,ge+(Ze-De-1)*Ke,Ke);break;case 1:for(Ke=we,Je=Me,Dt=(we=Ce.Ea)-(vt=we&~(pt=(Me=1<<Ce.b)-1)),mt=_e(we,Ce.b),It=Ce.K,Ce=Ce.w+(De>>Ce.b)*mt;De<Ze;){for(bn=It,an=Ce,tr=new $t,hn=Je+vt,Cr=Je+we;Je<hn;)Qt(bn[an++],tr),fp(tr,Ke,Je,Me,be,ge),Je+=Me,ge+=Me;Je<Cr&&(Qt(bn[an++],tr),fp(tr,Ke,Je,Dt,be,ge),Je+=Dt,ge+=Dt),++De&pt||(Ce+=mt)}break;case 3:if(we==be&&Me==ge&&0<Ce.b){for(Je=be,we=Ke=ge+(Ze-De)*Ke-(vt=(Ze-De)*_e(Ce.Ea,Ce.b)),Me=be,pt=ge,mt=[],vt=(Dt=vt)-1;0<=vt;--vt)mt[vt]=Me[pt+vt];for(vt=Dt-1;0<=vt;--vt)Je[we+vt]=mt[vt];Y0(Ce,De,Ze,be,Ke,be,ge)}else Y0(Ce,De,Ze,we,Me,be,ge)}ge=J,be=W}be!=W&&r(J,W,ge,be,ue)}function ys(E,R){var W=E.V,J=E.Ba+E.c*E.C,oe=R-E.C;if(e(R<=E.l.o),e(16>=oe),0<oe){var ue=E.l,de=E.Ta,ge=E.Ua,be=ue.width;if(Bi(E,oe,W,J),oe=ge=[ge],e((W=E.C)<(J=R)),e(ue.v<ue.va),J>ue.o&&(J=ue.o),W<ue.j){var Ce=ue.j-W;W=ue.j,oe[0]+=Ce*be}if(W>=J?W=0:(oe[0]+=4*ue.v,ue.ka=W-ue.j,ue.U=ue.va-ue.v,ue.T=J-W,W=1),W){if(ge=ge[0],11>(W=E.ca).S){var De=W.f.RGBA,Ze=(J=W.S,oe=ue.U,ue=ue.T,Ce=De.eb,De.A),we=ue;for(De=De.fb+E.Ma*De.A;0<we--;){var Me=de,Ke=ge,mt=oe,Je=Ce,pt=De;switch(J){case ey:hp(Me,Ke,mt,Je,pt);break;case Eo:Rd(Me,Ke,mt,Je,pt);break;case eg:Rd(Me,Ke,mt,Je,pt),zh(Je,pt,0,mt,1,0);break;case ty:$h(Me,Ke,mt,Je,pt);break;case Ac:$e(Me,Ke,mt,Je,pt,1);break;case ny:$e(Me,Ke,mt,Je,pt,1),zh(Je,pt,0,mt,1,0);break;case Zm:$e(Me,Ke,mt,Je,pt,0);break;case pp:$e(Me,Ke,mt,Je,pt,0),zh(Je,pt,1,mt,1,0);break;case Ap:Od(Me,Ke,mt,Je,pt);break;case ry:Od(Me,Ke,mt,Je,pt),hc(Je,pt,mt,1,0);break;case _f:Fu(Me,Ke,mt,Je,pt);break;default:e(0)}ge+=be,De+=Ze}E.Ma+=ue}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=W.height)}}E.C=R,e(E.C<=E.i)}function Jn(E){var R;if(0<E.ua)return 0;for(R=0;R<E.Wb;++R){var W=E.Ya[R].G,J=E.Ya[R].H;if(0<W[1][J[1]+0].g||0<W[2][J[2]+0].g||0<W[3][J[3]+0].g)return 0}return 1}function ns(E,R,W,J,oe,ue){if(E.Z!=0){var de=E.qd,ge=E.rd;for(e(Ld[E.Z]!=null);R<W;++R)Ld[E.Z](de,ge,J,oe,J,oe,ue),de=J,ge=oe,oe+=ue;E.qd=de,E.rd=ge}}function ji(E,R){var W=E.l.ma,J=W.Z==0||W.Z==1?E.l.j:E.C;if(J=E.C<J?J:E.C,e(R<=E.l.o),R>J){var oe=E.l.width,ue=W.ca,de=W.tb+oe*J,ge=E.V,be=E.Ba+E.c*J,Ce=E.gc;e(E.ab==1),e(Ce[0].hc==3),Ou(Ce[0],J,R,ge,be,ue,de),ns(W,J,R,ue,de,oe)}E.C=E.Ma=R}function ft(E,R,W,J,oe,ue,de){var ge=E.$/J,be=E.$%J,Ce=E.m,De=E.s,Ze=W+E.$,we=Ze;oe=W+J*oe;var Me=W+J*ue,Ke=280+De.ua,mt=E.Pb?ge:16777216,Je=0<De.ua?De.Wa:null,pt=De.wc,vt=Ze<Me?Bt(De,be,ge):null;e(E.C<ue),e(Me<=oe);var Dt=!1;e:for(;;){for(;Dt||Ze<Me;){var It=0;if(ge>=mt){var bn=Ze-W;e((mt=E).Pb),mt.wd=mt.m,mt.xd=bn,0<mt.s.ua&&Le(mt.s.Wa,mt.s.vb),mt=ge+Rf}if(be&pt||(vt=Bt(De,be,ge)),e(vt!=null),vt.Qb&&(R[Ze]=vt.qb,Dt=!0),!Dt)if(xe(Ce),vt.jc){It=Ce,bn=R;var an=Ze,tr=vt.pd[re(It)&Tf-1];e(vt.jc),256>tr.g?(Ae(It,It.u+tr.g),bn[an]=tr.value,It=0):(Ae(It,It.u+tr.g-256),e(256<=tr.value),It=tr.value),It==0&&(Dt=!0)}else It=ts(vt.G[0],vt.H[0],Ce);if(Ce.h)break;if(Dt||256>It){if(!Dt)if(vt.nd)R[Ze]=(vt.qb|It<<8)>>>0;else{if(xe(Ce),Dt=ts(vt.G[1],vt.H[1],Ce),xe(Ce),bn=ts(vt.G[2],vt.H[2],Ce),an=ts(vt.G[3],vt.H[3],Ce),Ce.h)break;R[Ze]=(an<<24|Dt<<16|It<<8|bn)>>>0}if(Dt=!1,++Ze,++be>=J&&(be=0,++ge,de!=null&&ge<=ue&&!(ge%16)&&de(E,ge),Je!=null))for(;we<Ze;)It=R[we++],Je.X[(506832829*It&4294967295)>>>Je.Mb]=It}else if(280>It){if(It=$s(It-256,Ce),bn=ts(vt.G[4],vt.H[4],Ce),xe(Ce),bn=wr(J,bn=$s(bn,Ce)),Ce.h)break;if(Ze-W<bn||oe-Ze<It)break e;for(an=0;an<It;++an)R[Ze+an]=R[Ze+an-bn];for(Ze+=It,be+=It;be>=J;)be-=J,++ge,de!=null&&ge<=ue&&!(ge%16)&&de(E,ge);if(e(Ze<=oe),be&pt&&(vt=Bt(De,be,ge)),Je!=null)for(;we<Ze;)It=R[we++],Je.X[(506832829*It&4294967295)>>>Je.Mb]=It}else{if(!(It<Ke))break e;for(Dt=It-280,e(Je!=null);we<Ze;)It=R[we++],Je.X[(506832829*It&4294967295)>>>Je.Mb]=It;It=Ze,e(!(Dt>>>(bn=Je).Xa)),R[It]=bn.X[Dt],Dt=!0}Dt||e(Ce.h==le(Ce))}if(E.Pb&&Ce.h&&Ze<oe)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&Le(E.s.vb,E.s.Wa);else{if(Ce.h)break e;de?.(E,ge>ue?ue:ge),E.a=0,E.$=Ze-W}return 1}return E.a=3,0}function Cn(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var R=E.Wa;R!=null&&(R.X=null),E.vb=null,e(E!=null)}function Wn(){var E=new Vn;return E==null?null:(E.a=0,E.xb=$b,yt("Predictor","VP8LPredictors"),yt("Predictor","VP8LPredictors_C"),yt("PredictorAdd","VP8LPredictorsAdd"),yt("PredictorAdd","VP8LPredictorsAdd_C"),sa=fn,fp=rn,hp=sn,Rd=Fn,Od=Ft,Fu=xn,$h=ke,D.VP8LMapColor32b=Ru,D.VP8LMapColor8b=ro,E)}function Xn(E,R,W,J,oe){var ue=1,de=[E],ge=[R],be=J.m,Ce=J.s,De=null,Ze=0;e:for(;;){if(W)for(;ue&&H(be,1);){var we=de,Me=ge,Ke=J,mt=1,Je=Ke.m,pt=Ke.gc[Ke.ab],vt=H(Je,2);if(Ke.Oc&1<<vt)ue=0;else{switch(Ke.Oc|=1<<vt,pt.hc=vt,pt.Ea=we[0],pt.nc=Me[0],pt.K=[null],++Ke.ab,e(4>=Ke.ab),vt){case 0:case 1:pt.b=H(Je,3)+2,mt=Xn(_e(pt.Ea,pt.b),_e(pt.nc,pt.b),0,Ke,pt.K),pt.K=pt.K[0];break;case 3:var Dt,It=H(Je,8)+1,bn=16<It?0:4<It?1:2<It?2:3;if(we[0]=_e(pt.Ea,bn),pt.b=bn,Dt=mt=Xn(It,1,0,Ke,pt.K)){var an,tr=It,hn=pt,Cr=1<<(8>>hn.b),Ys=i(Cr);if(Ys==null)Dt=0;else{var ir=hn.K[0],on=hn.w;for(Ys[0]=hn.K[0][0],an=1;an<1*tr;++an)Ys[an]=ht(ir[on+an],Ys[an-1]);for(;an<4*Cr;++an)Ys[an]=0;hn.K[0]=null,hn.K[0]=Ys,Dt=1}}mt=Dt;break;case 2:break;default:e(0)}ue=mt}}if(de=de[0],ge=ge[0],ue&&H(be,1)&&!(ue=1<=(Ze=H(be,4))&&11>=Ze)){J.a=3;break e}var Wt;if(Wt=ue)t:{var pi,qn,lr,hs=J,Ia=de,lo=ge,zs=Ze,ha=W,Io=hs.m,Aa=hs.s,gr=[null],Xr=1,mi=0,is=gc[zs];n:for(;;){if(ha&&H(Io,1)){var Na=H(Io,3)+2,gi=_e(Ia,Na),Yr=_e(lo,Na),oa=gi*Yr;if(!Xn(gi,Yr,0,hs,gr))break n;for(gr=gr[0],Aa.xc=Na,pi=0;pi<oa;++pi){var As=gr[pi]>>8&65535;gr[pi]=As,As>=Xr&&(Xr=As+1)}}if(Io.h)break n;for(qn=0;5>qn;++qn){var pa=Mh[qn];!qn&&0<zs&&(pa+=1<<zs),mi<pa&&(mi=pa)}var ma=a(Xr*is,z),js=Xr,Vr=a(js,ee);if(Vr==null)var No=null;else e(65536>=js),No=Vr;var Oi=i(mi);if(No==null||Oi==null||ma==null){hs.a=1;break n}var $n=ma;for(pi=lr=0;pi<Xr;++pi){var zn=No[pi],Jr=zn.G,ml=zn.H,vc=0,rl=1,ga=0;for(qn=0;5>qn;++qn){pa=Mh[qn],Jr[qn]=$n,ml[qn]=lr,!qn&&0<zs&&(pa+=1<<zs);s:{var Pf,zf=pa,uy=hs,Us=Oi,zb=$n,Ub=lr,dy=0,$d=uy.m,BN=H($d,1);if(s(Us,0,0,zf),BN){var Mb=H($d,1)+1,Qb=H($d,1),fy=H($d,Qb==0?1:8);Us[fy]=1,Mb==2&&(Us[fy=H($d,8)]=1);var Ua=1}else{var Fi=i(19),sg=H($d,4)+4;if(19<sg){uy.a=3;var Uf=0;break s}for(Pf=0;Pf<sg;++Pf)Fi[tg[Pf]]=H($d,3);var bp=void 0,Wh=void 0,$u=uy,hy=Fi,vp=zf,Ay=Us,py=0,Pd=$u.m,Hb=8,Wb=a(128,z);r:for(;P(Wb,0,7,hy,19);){if(H(Pd,1)){var WS=2+2*H(Pd,3);if((bp=2+H(Pd,WS))>vp)break r}else bp=vp;for(Wh=0;Wh<vp&&bp--;){xe(Pd);var Vb=Wb[0+(127&re(Pd))];Ae(Pd,Pd.u+Vb.g);var Mf=Vb.value;if(16>Mf)Ay[Wh++]=Mf,Mf!=0&&(Hb=Mf);else{var VS=Mf==16,qS=Mf-16,GS=mp[qS],qb=H(Pd,pc[qS])+GS;if(Wh+qb>vp)break r;for(var KS=VS?Hb:0;0<qb--;)Ay[Wh++]=KS}}py=1;break r}py||($u.a=3),Ua=py}(Ua=Ua&&!$d.h)&&(dy=P(zb,Ub,8,Us,zf)),Ua&&dy!=0?Uf=dy:(uy.a=3,Uf=0)}if(Uf==0)break n;if(rl&&sy[qn]==1&&(rl=$n[lr].g==0),vc+=$n[lr].g,lr+=Uf,3>=qn){var Vh,my=Oi[0];for(Vh=1;Vh<pa;++Vh)Oi[Vh]>my&&(my=Oi[Vh]);ga+=my}}if(zn.nd=rl,zn.Qb=0,rl&&(zn.qb=(Jr[3][ml[3]+0].value<<24|Jr[1][ml[1]+0].value<<16|Jr[2][ml[2]+0].value)>>>0,vc==0&&256>Jr[0][ml[0]+0].value&&(zn.Qb=1,zn.qb+=Jr[0][ml[0]+0].value<<8)),zn.jc=!zn.Qb&&6>ga,zn.jc){var ig,Pu=zn;for(ig=0;ig<Tf;++ig){var zd=ig,Ud=Pu.pd[zd],gy=Pu.G[0][Pu.H[0]+zd];256<=gy.value?(Ud.g=gy.g+256,Ud.value=gy.value):(Ud.g=0,Ud.value=0,zd>>=Er(gy,8,Ud),zd>>=Er(Pu.G[1][Pu.H[1]+zd],16,Ud),zd>>=Er(Pu.G[2][Pu.H[2]+zd],0,Ud),Er(Pu.G[3][Pu.H[3]+zd],24,Ud))}}}Aa.vc=gr,Aa.Wb=Xr,Aa.Ya=No,Aa.yc=ma,Wt=1;break t}Wt=0}if(!(ue=Wt)){J.a=3;break e}if(0<Ze){if(Ce.ua=1<<Ze,!ie(Ce.Wa,Ze)){J.a=1,ue=0;break e}}else Ce.ua=0;var yy=J,qh=de,XS=ge,wp=yy.s,Sp=wp.xc;if(yy.c=qh,yy.i=XS,wp.md=_e(qh,Sp),wp.wc=Sp==0?-1:(1<<Sp)-1,W){J.xb=Of;break e}if((De=i(de*ge))==null){J.a=1,ue=0;break e}ue=(ue=ft(J,De,0,de,ge,ge,null))&&!be.h;break e}return ue?(oe!=null?oe[0]=De:(e(De==null),e(W)),J.$=0,W||Cn(Ce)):Cn(Ce),ue}function sr(E,R){var W=E.c*E.i,J=W+R+16*R;return e(E.c<=R),E.V=i(J),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+W+R,1)}function da(E,R){var W=E.C,J=R-W,oe=E.V,ue=E.Ba+E.c*W;for(e(R<=E.l.o);0<J;){var de=16<J?16:J,ge=E.l.ma,be=E.l.width,Ce=be*de,De=ge.ca,Ze=ge.tb+be*W,we=E.Ta,Me=E.Ua;Bi(E,de,oe,ue),Ml(we,Me,De,Ze,Ce),ns(ge,W,W+de,De,Ze,be),J-=de,oe+=de*E.c,W+=de}e(W==R),E.C=E.Ma=R}function Hr(){this.ub=this.yd=this.td=this.Rb=0}function cs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Zi(){this.Yb=(function(){var E=[];return(function R(W,J,oe){for(var ue=oe[J],de=0;de<ue&&(W.push(oe.length>J+1?[]:0),!(oe.length<J+1));de++)R(W[de],J+1,oe)})(E,0,[3,11]),E})()}function Ir(){this.jb=i(3),this.Wc=l([4,8],Zi),this.Xc=l([4,17],Zi)}function si(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function rs(){this.ld=this.La=this.dd=this.tc=0}function st(){this.Na=this.la=0}function gt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pt(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gt(){this.uc=this.M=this.Nb=0,this.wa=Array(new rs),this.Y=0,this.ya=Array(new Pt),this.aa=0,this.l=new Co}function Tn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function mr(){this.cb=this.a=0,this.sc="",this.m=new Q,this.Od=new Hr,this.Kc=new cs,this.ed=new si,this.Qa=new zr,this.Ic=this.$c=this.Aa=0,this.D=new Gt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Q),this.ia=0,this.pb=a(4,gt),this.Pa=new Ir,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tn),this.Hd=0,this.rb=Array(new st),this.sb=0,this.wa=Array(new rs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pt),this.L=this.aa=0,this.gd=l([4,2],rs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ci(E,R){return 0>E?0:E>R?R:E}function Co(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ei(){var E=new mr;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Ql||(Ql=ea)),E}function jn(E,R,W){return E.a==0&&(E.a=R,E.sc=W,E.cb=0),0}function ko(E,R,W){return 3<=W&&E[R+0]==157&&E[R+1]==1&&E[R+2]==42}function ui(E,R){if(E==null)return 0;if(E.a=0,E.sc="OK",R==null)return jn(E,2,"null VP8Io passed to VP8GetHeaders()");var W=R.data,J=R.w,oe=R.ha;if(4>oe)return jn(E,7,"Truncated header.");var ue=W[J+0]|W[J+1]<<8|W[J+2]<<16,de=E.Od;if(de.Rb=!(1&ue),de.td=ue>>1&7,de.yd=ue>>4&1,de.ub=ue>>5,3<de.td)return jn(E,3,"Incorrect keyframe parameters.");if(!de.yd)return jn(E,4,"Frame not displayable.");J+=3,oe-=3;var ge=E.Kc;if(de.Rb){if(7>oe)return jn(E,7,"cannot parse picture header");if(!ko(W,J,oe))return jn(E,3,"Bad code word");ge.c=16383&(W[J+4]<<8|W[J+3]),ge.Td=W[J+4]>>6,ge.i=16383&(W[J+6]<<8|W[J+5]),ge.Ud=W[J+6]>>6,J+=7,oe-=7,E.za=ge.c+15>>4,E.Ub=ge.i+15>>4,R.width=ge.c,R.height=ge.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,s((ue=E.Pa).jb,0,255,ue.jb.length),e((ue=E.Qa)!=null),ue.Cb=0,ue.Bb=0,ue.Fb=1,s(ue.Zb,0,0,ue.Zb.length),s(ue.Lb,0,0,ue.Lb)}if(de.ub>oe)return jn(E,7,"bad partition length");q(ue=E.m,W,J,de.ub),J+=de.ub,oe-=de.ub,de.Rb&&(ge.Ld=me(ue),ge.Kd=me(ue)),ge=E.Qa;var be,Ce=E.Pa;if(e(ue!=null),e(ge!=null),ge.Cb=me(ue),ge.Cb){if(ge.Bb=me(ue),me(ue)){for(ge.Fb=me(ue),be=0;4>be;++be)ge.Zb[be]=me(ue)?G(ue,7):0;for(be=0;4>be;++be)ge.Lb[be]=me(ue)?G(ue,6):0}if(ge.Bb)for(be=0;3>be;++be)Ce.jb[be]=me(ue)?Z(ue,8):255}else ge.Bb=0;if(ue.Ka)return jn(E,3,"cannot parse segment header");if((ge=E.ed).zd=me(ue),ge.Tb=Z(ue,6),ge.wb=Z(ue,3),ge.Pc=me(ue),ge.Pc&&me(ue)){for(Ce=0;4>Ce;++Ce)me(ue)&&(ge.vd[Ce]=G(ue,6));for(Ce=0;4>Ce;++Ce)me(ue)&&(ge.od[Ce]=G(ue,6))}if(E.L=ge.Tb==0?0:ge.zd?1:2,ue.Ka)return jn(E,3,"cannot parse filter header");var De=oe;if(oe=be=J,J=be+De,ge=De,E.Xb=(1<<Z(E.m,2))-1,De<3*(Ce=E.Xb))W=7;else{for(be+=3*Ce,ge-=3*Ce,De=0;De<Ce;++De){var Ze=W[oe+0]|W[oe+1]<<8|W[oe+2]<<16;Ze>ge&&(Ze=ge),q(E.Jc[+De],W,be,Ze),be+=Ze,ge-=Ze,oe+=3}q(E.Jc[+Ce],W,be,ge),W=be<J?0:5}if(W!=0)return jn(E,W,"cannot parse partitions");for(W=Z(be=E.m,7),oe=me(be)?G(be,4):0,J=me(be)?G(be,4):0,ge=me(be)?G(be,4):0,Ce=me(be)?G(be,4):0,be=me(be)?G(be,4):0,De=E.Qa,Ze=0;4>Ze;++Ze){if(De.Cb){var we=De.Zb[Ze];De.Fb||(we+=W)}else{if(0<Ze){E.pb[Ze]=E.pb[0];continue}we=W}var Me=E.pb[Ze];Me.Sc[0]=yc[ci(we+oe,127)],Me.Sc[1]=xc[ci(we+0,127)],Me.Eb[0]=2*yc[ci(we+J,127)],Me.Eb[1]=101581*xc[ci(we+ge,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=yc[ci(we+Ce,117)],Me.Qc[1]=xc[ci(we+be,127)],Me.lc=we+be}if(!de.Rb)return jn(E,4,"Not a key frame.");for(me(ue),de=E.Pa,W=0;4>W;++W){for(oe=0;8>oe;++oe)for(J=0;3>J;++J)for(ge=0;11>ge;++ge)Ce=ve(ue,Xs[W][oe][J][ge])?Z(ue,8):QS[W][oe][J][ge],de.Wc[W][oe].Yb[J][ge]=Ce;for(oe=0;17>oe;++oe)de.Xc[W][oe]=de.Wc[W][_r[oe]]}return E.kc=me(ue),E.kc&&(E.Bd=Z(ue,8)),E.cb=1}function ea(E,R,W,J,oe,ue,de){var ge=R[oe].Yb[W];for(W=0;16>oe;++oe){if(!ve(E,ge[W+0]))return oe;for(;!ve(E,ge[W+1]);)if(ge=R[++oe].Yb[0],W=0,oe==16)return 16;var be=R[oe+1].Yb;if(ve(E,ge[W+2])){var Ce=E,De=0;if(ve(Ce,(we=ge)[(Ze=W)+3]))if(ve(Ce,we[Ze+6])){for(ge=0,Ze=2*(De=ve(Ce,we[Ze+8]))+(we=ve(Ce,we[Ze+9+De])),De=0,we=MS[Ze];we[ge];++ge)De+=De+ve(Ce,we[ge]);De+=3+(8<<Ze)}else ve(Ce,we[Ze+7])?(De=7+2*ve(Ce,165),De+=ve(Ce,145)):De=5+ve(Ce,159);else De=ve(Ce,we[Ze+4])?3+ve(Ce,we[Ze+5]):2;ge=be[2]}else De=1,ge=be[1];be=de+Lb[oe],0>(Ce=E).b&&Be(Ce);var Ze,we=Ce.b,Me=(Ze=Ce.Ca>>1)-(Ce.I>>we)>>31;--Ce.b,Ce.Ca+=Me,Ce.Ca|=1,Ce.I-=(Ze+1&Me)<<we,ue[be]=((De^Me)-Me)*J[(0<oe)+0]}return 16}function ju(E){var R=E.rb[E.sb-1];R.la=0,R.Na=0,s(E.zc,0,0,E.zc.length),E.ja=0}function ja(E,R,W,J,oe){oe=E[R+W+32*J]+(oe>>3),E[R+W+32*J]=-256&oe?0>oe?0:255:oe}function ta(E,R,W,J,oe,ue){ja(E,R,0,W,J+oe),ja(E,R,1,W,J+ue),ja(E,R,2,W,J-ue),ja(E,R,3,W,J-oe)}function Ii(E){return(20091*E>>16)+E}function cc(E,R,W,J){var oe,ue=0,de=i(16);for(oe=0;4>oe;++oe){var ge=E[R+0]+E[R+8],be=E[R+0]-E[R+8],Ce=(35468*E[R+4]>>16)-Ii(E[R+12]),De=Ii(E[R+4])+(35468*E[R+12]>>16);de[ue+0]=ge+De,de[ue+1]=be+Ce,de[ue+2]=be-Ce,de[ue+3]=ge-De,ue+=4,R++}for(oe=ue=0;4>oe;++oe)ge=(E=de[ue+0]+4)+de[ue+8],be=E-de[ue+8],Ce=(35468*de[ue+4]>>16)-Ii(de[ue+12]),ja(W,J,0,0,ge+(De=Ii(de[ue+4])+(35468*de[ue+12]>>16))),ja(W,J,1,0,be+Ce),ja(W,J,2,0,be-Ce),ja(W,J,3,0,ge-De),ue++,J+=32}function Oh(E,R,W,J){var oe=E[R+0]+4,ue=35468*E[R+4]>>16,de=Ii(E[R+4]),ge=35468*E[R+1]>>16;ta(W,J,0,oe+de,E=Ii(E[R+1]),ge),ta(W,J,1,oe+ue,E,ge),ta(W,J,2,oe-ue,E,ge),ta(W,J,3,oe-de,E,ge)}function Fh(E,R,W,J,oe){cc(E,R,W,J),oe&&cc(E,R+16,W,J+4)}function Ea(E,R,W,J){Fd(E,R+0,W,J,1),Fd(E,R+32,W,J+128,1)}function If(E,R,W,J){var oe;for(E=E[R+0]+4,oe=0;4>oe;++oe)for(R=0;4>R;++R)ja(W,J,R,oe,E)}function bd(E,R,W,J){E[R+0]&&ss(E,R+0,W,J),E[R+16]&&ss(E,R+16,W,J+4),E[R+32]&&ss(E,R+32,W,J+128),E[R+48]&&ss(E,R+48,W,J+128+4)}function el(E,R,W,J){var oe,ue=i(16);for(oe=0;4>oe;++oe){var de=E[R+0+oe]+E[R+12+oe],ge=E[R+4+oe]+E[R+8+oe],be=E[R+4+oe]-E[R+8+oe],Ce=E[R+0+oe]-E[R+12+oe];ue[0+oe]=de+ge,ue[8+oe]=de-ge,ue[4+oe]=Ce+be,ue[12+oe]=Ce-be}for(oe=0;4>oe;++oe)de=(E=ue[0+4*oe]+3)+ue[3+4*oe],ge=ue[1+4*oe]+ue[2+4*oe],be=ue[1+4*oe]-ue[2+4*oe],Ce=E-ue[3+4*oe],W[J+0]=de+ge>>3,W[J+16]=Ce+be>>3,W[J+32]=de-ge>>3,W[J+48]=Ce-be>>3,J+=64}function vd(E,R,W){var J,oe=R-32,ue=jo,de=255-E[oe-1];for(J=0;J<W;++J){var ge,be=ue,Ce=de+E[R-1];for(ge=0;ge<W;++ge)E[R+ge]=be[Ce+E[oe+ge]];R+=32}}function wd(E,R){vd(E,R,4)}function Sd(E,R){vd(E,R,8)}function Ll(E,R){vd(E,R,16)}function Cd(E,R){var W;for(W=0;16>W;++W)r(E,R+32*W,E,R-32,16)}function hl(E,R){var W;for(W=16;0<W;--W)s(E,R,E[R-1],16),R+=32}function di(E,R,W){var J;for(J=0;16>J;++J)s(R,W+32*J,E,16)}function no(E,R){var W,J=16;for(W=0;16>W;++W)J+=E[R-1+32*W]+E[R+W-32];di(J>>5,E,R)}function Vc(E,R){var W,J=8;for(W=0;16>W;++W)J+=E[R-1+32*W];di(J>>4,E,R)}function mn(E,R){var W,J=8;for(W=0;16>W;++W)J+=E[R+W-32];di(J>>4,E,R)}function uc(E,R){di(128,E,R)}function Ln(E,R,W){return E+2*R+W+2>>2}function Dh(E,R){var W,J=R-32;for(J=new Uint8Array([Ln(E[J-1],E[J+0],E[J+1]),Ln(E[J+0],E[J+1],E[J+2]),Ln(E[J+1],E[J+2],E[J+3]),Ln(E[J+2],E[J+3],E[J+4])]),W=0;4>W;++W)r(E,R+32*W,J,0,J.length)}function Nf(E,R){var W=E[R-1],J=E[R-1+32],oe=E[R-1+64],ue=E[R-1+96];je(E,R+0,16843009*Ln(E[R-1-32],W,J)),je(E,R+32,16843009*Ln(W,J,oe)),je(E,R+64,16843009*Ln(J,oe,ue)),je(E,R+96,16843009*Ln(oe,ue,ue))}function Eu(E,R){var W,J=4;for(W=0;4>W;++W)J+=E[R+W-32]+E[R-1+32*W];for(J>>=3,W=0;4>W;++W)s(E,R+32*W,J,4)}function Ni(E,R){var W=E[R-1+0],J=E[R-1+32],oe=E[R-1+64],ue=E[R-1-32],de=E[R+0-32],ge=E[R+1-32],be=E[R+2-32],Ce=E[R+3-32];E[R+0+96]=Ln(J,oe,E[R-1+96]),E[R+1+96]=E[R+0+64]=Ln(W,J,oe),E[R+2+96]=E[R+1+64]=E[R+0+32]=Ln(ue,W,J),E[R+3+96]=E[R+2+64]=E[R+1+32]=E[R+0+0]=Ln(de,ue,W),E[R+3+64]=E[R+2+32]=E[R+1+0]=Ln(ge,de,ue),E[R+3+32]=E[R+2+0]=Ln(be,ge,de),E[R+3+0]=Ln(Ce,be,ge)}function fi(E,R){var W=E[R+1-32],J=E[R+2-32],oe=E[R+3-32],ue=E[R+4-32],de=E[R+5-32],ge=E[R+6-32],be=E[R+7-32];E[R+0+0]=Ln(E[R+0-32],W,J),E[R+1+0]=E[R+0+32]=Ln(W,J,oe),E[R+2+0]=E[R+1+32]=E[R+0+64]=Ln(J,oe,ue),E[R+3+0]=E[R+2+32]=E[R+1+64]=E[R+0+96]=Ln(oe,ue,de),E[R+3+32]=E[R+2+64]=E[R+1+96]=Ln(ue,de,ge),E[R+3+64]=E[R+2+96]=Ln(de,ge,be),E[R+3+96]=Ln(ge,be,be)}function kd(E,R){var W=E[R-1+0],J=E[R-1+32],oe=E[R-1+64],ue=E[R-1-32],de=E[R+0-32],ge=E[R+1-32],be=E[R+2-32],Ce=E[R+3-32];E[R+0+0]=E[R+1+64]=ue+de+1>>1,E[R+1+0]=E[R+2+64]=de+ge+1>>1,E[R+2+0]=E[R+3+64]=ge+be+1>>1,E[R+3+0]=be+Ce+1>>1,E[R+0+96]=Ln(oe,J,W),E[R+0+64]=Ln(J,W,ue),E[R+0+32]=E[R+1+96]=Ln(W,ue,de),E[R+1+32]=E[R+2+96]=Ln(ue,de,ge),E[R+2+32]=E[R+3+96]=Ln(de,ge,be),E[R+3+32]=Ln(ge,be,Ce)}function L(E,R){var W=E[R+0-32],J=E[R+1-32],oe=E[R+2-32],ue=E[R+3-32],de=E[R+4-32],ge=E[R+5-32],be=E[R+6-32],Ce=E[R+7-32];E[R+0+0]=W+J+1>>1,E[R+1+0]=E[R+0+64]=J+oe+1>>1,E[R+2+0]=E[R+1+64]=oe+ue+1>>1,E[R+3+0]=E[R+2+64]=ue+de+1>>1,E[R+0+32]=Ln(W,J,oe),E[R+1+32]=E[R+0+96]=Ln(J,oe,ue),E[R+2+32]=E[R+1+96]=Ln(oe,ue,de),E[R+3+32]=E[R+2+96]=Ln(ue,de,ge),E[R+3+64]=Ln(de,ge,be),E[R+3+96]=Ln(ge,be,Ce)}function V(E,R){var W=E[R-1+0],J=E[R-1+32],oe=E[R-1+64],ue=E[R-1+96];E[R+0+0]=W+J+1>>1,E[R+2+0]=E[R+0+32]=J+oe+1>>1,E[R+2+32]=E[R+0+64]=oe+ue+1>>1,E[R+1+0]=Ln(W,J,oe),E[R+3+0]=E[R+1+32]=Ln(J,oe,ue),E[R+3+32]=E[R+1+64]=Ln(oe,ue,ue),E[R+3+64]=E[R+2+64]=E[R+0+96]=E[R+1+96]=E[R+2+96]=E[R+3+96]=ue}function se(E,R){var W=E[R-1+0],J=E[R-1+32],oe=E[R-1+64],ue=E[R-1+96],de=E[R-1-32],ge=E[R+0-32],be=E[R+1-32],Ce=E[R+2-32];E[R+0+0]=E[R+2+32]=W+de+1>>1,E[R+0+32]=E[R+2+64]=J+W+1>>1,E[R+0+64]=E[R+2+96]=oe+J+1>>1,E[R+0+96]=ue+oe+1>>1,E[R+3+0]=Ln(ge,be,Ce),E[R+2+0]=Ln(de,ge,be),E[R+1+0]=E[R+3+32]=Ln(W,de,ge),E[R+1+32]=E[R+3+64]=Ln(J,W,de),E[R+1+64]=E[R+3+96]=Ln(oe,J,W),E[R+1+96]=Ln(ue,oe,J)}function pe(E,R){var W;for(W=0;8>W;++W)r(E,R+32*W,E,R-32,8)}function Re(E,R){var W;for(W=0;8>W;++W)s(E,R,E[R-1],8),R+=32}function Ge(E,R,W){var J;for(J=0;8>J;++J)s(R,W+32*J,E,8)}function At(E,R){var W,J=8;for(W=0;8>W;++W)J+=E[R+W-32]+E[R-1+32*W];Ge(J>>4,E,R)}function kn(E,R){var W,J=4;for(W=0;8>W;++W)J+=E[R+W-32];Ge(J>>3,E,R)}function _n(E,R){var W,J=4;for(W=0;8>W;++W)J+=E[R-1+32*W];Ge(J>>3,E,R)}function Qn(E,R){Ge(128,E,R)}function Nr(E,R,W){var J=E[R-W],oe=E[R+0],ue=3*(oe-J)+Dd[1020+E[R-2*W]-E[R+W]],de=Jm[112+(ue+4>>3)];E[R-W]=jo[255+J+Jm[112+(ue+3>>3)]],E[R+0]=jo[255+oe-de]}function ii(E,R,W,J){var oe=E[R+0],ue=E[R+W];return so[255+E[R-2*W]-E[R-W]]>J||so[255+ue-oe]>J}function Bd(E,R,W,J){return 4*so[255+E[R-W]-E[R+0]]+so[255+E[R-2*W]-E[R+W]]<=J}function jd(E,R,W,J,oe){var ue=E[R-3*W],de=E[R-2*W],ge=E[R-W],be=E[R+0],Ce=E[R+W],De=E[R+2*W],Ze=E[R+3*W];return 4*so[255+ge-be]+so[255+de-Ce]>J?0:so[255+E[R-4*W]-ue]<=oe&&so[255+ue-de]<=oe&&so[255+de-ge]<=oe&&so[255+Ze-De]<=oe&&so[255+De-Ce]<=oe&&so[255+Ce-be]<=oe}function dc(E,R,W,J){var oe=2*J+1;for(J=0;16>J;++J)Bd(E,R+J,W,oe)&&Nr(E,R+J,W)}function qc(E,R,W,J){var oe=2*J+1;for(J=0;16>J;++J)Bd(E,R+J*W,1,oe)&&Nr(E,R+J*W,1)}function Iu(E,R,W,J){var oe;for(oe=3;0<oe;--oe)dc(E,R+=4*W,W,J)}function Lh(E,R,W,J){var oe;for(oe=3;0<oe;--oe)qc(E,R+=4,W,J)}function Gc(E,R,W,J,oe,ue,de,ge){for(ue=2*ue+1;0<oe--;){if(jd(E,R,W,ue,de))if(ii(E,R,W,ge))Nr(E,R,W);else{var be=E,Ce=R,De=W,Ze=be[Ce-2*De],we=be[Ce-De],Me=be[Ce+0],Ke=be[Ce+De],mt=be[Ce+2*De],Je=27*(vt=Dd[1020+3*(Me-we)+Dd[1020+Ze-Ke]])+63>>7,pt=18*vt+63>>7,vt=9*vt+63>>7;be[Ce-3*De]=jo[255+be[Ce-3*De]+vt],be[Ce-2*De]=jo[255+Ze+pt],be[Ce-De]=jo[255+we+Je],be[Ce+0]=jo[255+Me-Je],be[Ce+De]=jo[255+Ke-pt],be[Ce+2*De]=jo[255+mt-vt]}R+=J}}function Kc(E,R,W,J,oe,ue,de,ge){for(ue=2*ue+1;0<oe--;){if(jd(E,R,W,ue,de))if(ii(E,R,W,ge))Nr(E,R,W);else{var be=E,Ce=R,De=W,Ze=be[Ce-De],we=be[Ce+0],Me=be[Ce+De],Ke=Jm[112+(4+(mt=3*(we-Ze))>>3)],mt=Jm[112+(mt+3>>3)],Je=Ke+1>>1;be[Ce-2*De]=jo[255+be[Ce-2*De]+Je],be[Ce-De]=jo[255+Ze+mt],be[Ce+0]=jo[255+we-Ke],be[Ce+De]=jo[255+Me-Je]}R+=J}}function lp(E,R,W,J,oe,ue){Gc(E,R,W,1,16,J,oe,ue)}function Xc(E,R,W,J,oe,ue){Gc(E,R,1,W,16,J,oe,ue)}function cp(E,R,W,J,oe,ue){var de;for(de=3;0<de;--de)Kc(E,R+=4*W,W,1,16,J,oe,ue)}function M(E,R,W,J,oe,ue){var de;for(de=3;0<de;--de)Kc(E,R+=4,1,W,16,J,oe,ue)}function ae(E,R,W,J,oe,ue,de,ge){Gc(E,R,oe,1,8,ue,de,ge),Gc(W,J,oe,1,8,ue,de,ge)}function Se(E,R,W,J,oe,ue,de,ge){Gc(E,R,1,oe,8,ue,de,ge),Gc(W,J,1,oe,8,ue,de,ge)}function Oe(E,R,W,J,oe,ue,de,ge){Kc(E,R+4*oe,oe,1,8,ue,de,ge),Kc(W,J+4*oe,oe,1,8,ue,de,ge)}function Qe(E,R,W,J,oe,ue,de,ge){Kc(E,R+4,1,oe,8,ue,de,ge),Kc(W,J+4,1,oe,8,ue,de,ge)}function bt(){this.ba=new zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bn(){this.ua=0,this.Wa=new nt,this.vb=new nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new z}function Vn(){this.xb=this.a=0,this.l=new Co,this.ca=new zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new X,this.Pb=0,this.wd=new X,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bn,this.ab=0,this.gc=a(4,dn),this.Oc=0}function er(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Co,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Tr(E,R,W,J,oe,ue,de){for(E=E==null?0:E[R+0],R=0;R<de;++R)oe[ue+R]=E+W[J+R]&255,E=oe[ue+R]}function Ks(E,R,W,J,oe,ue,de){var ge;if(E==null)Tr(null,null,W,J,oe,ue,de);else for(ge=0;ge<de;++ge)oe[ue+ge]=E[R+ge]+W[J+ge]&255}function hi(E,R,W,J,oe,ue,de){if(E==null)Tr(null,null,W,J,oe,ue,de);else{var ge,be=E[R+0],Ce=be,De=be;for(ge=0;ge<de;++ge)Ce=De+(be=E[R+ge])-Ce,De=W[J+ge]+(-256&Ce?0>Ce?0:255:Ce)&255,Ce=be,oe[ue+ge]=De}}function xs(E,R,W,J){var oe=R.width,ue=R.o;if(e(E!=null&&R!=null),0>W||0>=J||W+J>ue)return null;if(!E.Cc){if(E.ga==null){var de;if(E.ga=new er,(de=E.ga==null)||(de=R.width*R.o,e(E.Gb.length==0),E.Gb=i(de),E.Uc=0,E.Gb==null?de=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,de=1),de=!de),!de){de=E.ga;var ge=E.Fa,be=E.P,Ce=E.qc,De=E.mb,Ze=E.nb,we=be+1,Me=Ce-1,Ke=de.l;if(e(ge!=null&&De!=null&&R!=null),Ld[0]=null,Ld[1]=Tr,Ld[2]=Ks,Ld[3]=hi,de.ca=De,de.tb=Ze,de.c=R.width,de.i=R.height,e(0<de.c&&0<de.i),1>=Ce)R=0;else if(de.$a=3&ge[be+0],de.Z=ge[be+0]>>2&3,de.Lc=ge[be+0]>>4&3,be=ge[be+0]>>6&3,0>de.$a||1<de.$a||4<=de.Z||1<de.Lc||be)R=0;else if(Ke.put=cn,Ke.ac=Ls,Ke.bc=Ji,Ke.ma=de,Ke.width=R.width,Ke.height=R.height,Ke.Da=R.Da,Ke.v=R.v,Ke.va=R.va,Ke.j=R.j,Ke.o=R.o,de.$a)e:{e(de.$a==1),R=Wn();t:for(;;){if(R==null){R=0;break e}if(e(de!=null),de.mc=R,R.c=de.c,R.i=de.i,R.l=de.l,R.l.ma=de,R.l.width=de.c,R.l.height=de.i,R.a=0,ne(R.m,ge,we,Me),!Xn(de.c,de.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&Jn(R.s)?(de.ic=1,ge=R.c*R.i,R.Ta=null,R.Ua=0,R.V=i(ge),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(de.ic=0,R=sr(R,de.c)),!R))break t;R=1;break e}de.mc=null,R=0}else R=Me>=de.c*de.i;de=!R}if(de)return null;E.ga.Lc!=1?E.Ga=0:J=ue-W}e(E.ga!=null),e(W+J<=ue);e:{if(R=(ge=E.ga).c,ue=ge.l.o,ge.$a==0){if(we=E.rc,Me=E.Vc,Ke=E.Fa,be=E.P+1+W*R,Ce=E.mb,De=E.nb+W*R,e(be<=E.P+E.qc),ge.Z!=0)for(e(Ld[ge.Z]!=null),de=0;de<J;++de)Ld[ge.Z](we,Me,Ke,be,Ce,De,R),we=Ce,Me=De,De+=R,be+=R;else for(de=0;de<J;++de)r(Ce,De,Ke,be,R),we=Ce,Me=De,De+=R,be+=R;E.rc=we,E.Vc=Me}else{if(e(ge.mc!=null),R=W+J,e((de=ge.mc)!=null),e(R<=de.i),de.C>=R)R=1;else if(ge.ic||$l(),ge.ic){ge=de.V,we=de.Ba,Me=de.c;var mt=de.i,Je=(Ke=1,be=de.$/Me,Ce=de.$%Me,De=de.m,Ze=de.s,de.$),pt=Me*mt,vt=Me*R,Dt=Ze.wc,It=Je<vt?Bt(Ze,Ce,be):null;e(Je<=pt),e(R<=mt),e(Jn(Ze));t:for(;;){for(;!De.h&&Je<vt;){if(Ce&Dt||(It=Bt(Ze,Ce,be)),e(It!=null),xe(De),256>(mt=ts(It.G[0],It.H[0],De)))ge[we+Je]=mt,++Je,++Ce>=Me&&(Ce=0,++be<=R&&!(be%16)&&ji(de,be));else{if(!(280>mt)){Ke=0;break t}mt=$s(mt-256,De);var bn,an=ts(It.G[4],It.H[4],De);if(xe(De),!(Je>=(an=wr(Me,an=$s(an,De)))&&pt-Je>=mt)){Ke=0;break t}for(bn=0;bn<mt;++bn)ge[we+Je+bn]=ge[we+Je+bn-an];for(Je+=mt,Ce+=mt;Ce>=Me;)Ce-=Me,++be<=R&&!(be%16)&&ji(de,be);Je<vt&&Ce&Dt&&(It=Bt(Ze,Ce,be))}e(De.h==le(De))}ji(de,be>R?R:be);break t}!Ke||De.h&&Je<pt?(Ke=0,de.a=De.h?5:3):de.$=Je,R=Ke}else R=ft(de,de.V,de.Ba,de.c,de.i,R,da);if(!R){J=0;break e}}W+J>=ue&&(E.Cc=1),J=1}if(!J)return null;if(E.Cc&&((J=E.ga)!=null&&(J.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+W*oe}function na(E,R,W,J,oe,ue){for(;0<oe--;){var de,ge=E,be=R+(W?1:0),Ce=E,De=R+(W?0:3);for(de=0;de<J;++de){var Ze=Ce[De+4*de];Ze!=255&&(Ze*=32897,ge[be+4*de+0]=ge[be+4*de+0]*Ze>>23,ge[be+4*de+1]=ge[be+4*de+1]*Ze>>23,ge[be+4*de+2]=ge[be+4*de+2]*Ze>>23)}R+=ue}}function Ti(E,R,W,J,oe){for(;0<J--;){var ue;for(ue=0;ue<W;++ue){var de=E[R+2*ue+0],ge=15&(Ce=E[R+2*ue+1]),be=4369*ge,Ce=(240&Ce|Ce>>4)*be>>16;E[R+2*ue+0]=(240&de|de>>4)*be>>16&240|(15&de|de<<4)*be>>16>>4&15,E[R+2*ue+1]=240&Ce|ge}R+=oe}}function fa(E,R,W,J,oe,ue,de,ge){var be,Ce,De=255;for(Ce=0;Ce<oe;++Ce){for(be=0;be<J;++be){var Ze=E[R+be];ue[de+4*be]=Ze,De&=Ze}R+=W,de+=ge}return De!=255}function Yc(E,R,W,J,oe){var ue;for(ue=0;ue<oe;++ue)W[J+ue]=E[R+ue]>>8}function $l(){zh=na,hc=Ti,Km=fa,Ml=Yc}function Jc(E,R,W){D[E]=function(J,oe,ue,de,ge,be,Ce,De,Ze,we,Me,Ke,mt,Je,pt,vt,Dt){var It,bn=Dt-1>>1,an=ge[be+0]|Ce[De+0]<<16,tr=Ze[we+0]|Me[Ke+0]<<16;e(J!=null);var hn=3*an+tr+131074>>2;for(R(J[oe+0],255&hn,hn>>16,mt,Je),ue!=null&&(hn=3*tr+an+131074>>2,R(ue[de+0],255&hn,hn>>16,pt,vt)),It=1;It<=bn;++It){var Cr=ge[be+It]|Ce[De+It]<<16,Ys=Ze[we+It]|Me[Ke+It]<<16,ir=an+Cr+tr+Ys+524296,on=ir+2*(Cr+tr)>>3;hn=on+an>>1,an=(ir=ir+2*(an+Ys)>>3)+Cr>>1,R(J[oe+2*It-1],255&hn,hn>>16,mt,Je+(2*It-1)*W),R(J[oe+2*It-0],255&an,an>>16,mt,Je+(2*It-0)*W),ue!=null&&(hn=ir+tr>>1,an=on+Ys>>1,R(ue[de+2*It-1],255&hn,hn>>16,pt,vt+(2*It-1)*W),R(ue[de+2*It+0],255&an,an>>16,pt,vt+(2*It+0)*W)),an=Cr,tr=Ys}1&Dt||(hn=3*an+tr+131074>>2,R(J[oe+Dt-1],255&hn,hn>>16,mt,Je+(Dt-1)*W),ue!=null&&(hn=3*tr+an+131074>>2,R(ue[de+Dt-1],255&hn,hn>>16,pt,vt+(Dt-1)*W)))}}function Nu(){ao[ey]=Qh,ao[Eo]=gp,ao[ty]=Pb,ao[Ac]=ay,ao[Zm]=Ff,ao[Ap]=Lu,ao[_f]=Df,ao[eg]=gp,ao[ny]=ay,ao[pp]=Ff,ao[ry]=Lu}function Ed(E){return E&-16384?0>E?0:255:E>>oy}function Pl(E,R){return Ed((19077*E>>8)+(26149*R>>8)-14234)}function Al(E,R,W){return Ed((19077*E>>8)-(6419*R>>8)-(13320*W>>8)+8708)}function qe(E,R){return Ed((19077*E>>8)+(33050*R>>8)-17685)}function St(E,R,W,J,oe){J[oe+0]=Pl(E,W),J[oe+1]=Al(E,R,W),J[oe+2]=qe(E,R)}function Vt(E,R,W,J,oe){J[oe+0]=qe(E,R),J[oe+1]=Al(E,R,W),J[oe+2]=Pl(E,W)}function En(E,R,W,J,oe){var ue=Al(E,R,W);R=ue<<3&224|qe(E,R)>>3,J[oe+0]=248&Pl(E,W)|ue>>5,J[oe+1]=R}function Mn(E,R,W,J,oe){var ue=240&qe(E,R)|15;J[oe+0]=240&Pl(E,W)|Al(E,R,W)>>4,J[oe+1]=ue}function Sr(E,R,W,J,oe){J[oe+0]=255,St(E,R,W,J,oe+1)}function _i(E,R,W,J,oe){Vt(E,R,W,J,oe),J[oe+3]=255}function bs(E,R,W,J,oe){St(E,R,W,J,oe),J[oe+3]=255}function Ai(E,R,W){D[E]=function(J,oe,ue,de,ge,be,Ce,De,Ze){for(var we=De+(-2&Ze)*W;De!=we;)R(J[oe+0],ue[de+0],ge[be+0],Ce,De),R(J[oe+1],ue[de+0],ge[be+0],Ce,De+W),oe+=2,++de,++be,De+=2*W;1&Ze&&R(J[oe+0],ue[de+0],ge[be+0],Ce,De)}}function za(E,R,W){return W==0?E==0?R==0?6:5:R==0?4:0:W}function Id(E,R,W,J,oe){switch(E>>>30){case 3:Fd(R,W,J,oe,0);break;case 2:Bo(R,W,J,oe);break;case 1:ss(R,W,J,oe)}}function ra(E,R){var W,J,oe=R.M,ue=R.Nb,de=E.oc,ge=E.pc+40,be=E.oc,Ce=E.pc+584,De=E.oc,Ze=E.pc+600;for(W=0;16>W;++W)de[ge+32*W-1]=129;for(W=0;8>W;++W)be[Ce+32*W-1]=129,De[Ze+32*W-1]=129;for(0<oe?de[ge-1-32]=be[Ce-1-32]=De[Ze-1-32]=129:(s(de,ge-32-1,127,21),s(be,Ce-32-1,127,9),s(De,Ze-32-1,127,9)),J=0;J<E.za;++J){var we=R.ya[R.aa+J];if(0<J){for(W=-1;16>W;++W)r(de,ge+32*W-4,de,ge+32*W+12,4);for(W=-1;8>W;++W)r(be,Ce+32*W-4,be,Ce+32*W+4,4),r(De,Ze+32*W-4,De,Ze+32*W+4,4)}var Me=E.Gd,Ke=E.Hd+J,mt=we.ad,Je=we.Hc;if(0<oe&&(r(de,ge-32,Me[Ke].y,0,16),r(be,Ce-32,Me[Ke].f,0,8),r(De,Ze-32,Me[Ke].ea,0,8)),we.Za){var pt=de,vt=ge-32+16;for(0<oe&&(J>=E.za-1?s(pt,vt,Me[Ke].y[15],4):r(pt,vt,Me[Ke+1].y,0,4)),W=0;4>W;W++)pt[vt+128+W]=pt[vt+256+W]=pt[vt+384+W]=pt[vt+0+W];for(W=0;16>W;++W,Je<<=2)pt=de,vt=ge+aa[W],Ri[we.Ob[W]](pt,vt),Id(Je,mt,16*+W,pt,vt)}else if(pt=za(J,oe,we.Ob[0]),nl[pt](de,ge),Je!=0)for(W=0;16>W;++W,Je<<=2)Id(Je,mt,16*+W,de,ge+aa[W]);for(W=we.Gc,pt=za(J,oe,we.Dd),tu[pt](be,Ce),tu[pt](De,Ze),Je=mt,pt=be,vt=Ce,255&(we=0|W)&&(170&we?fc(Je,256,pt,vt):Wr(Je,256,pt,vt)),we=De,Je=Ze,255&(W>>=8)&&(170&W?fc(mt,320,we,Je):Wr(mt,320,we,Je)),oe<E.Ub-1&&(r(Me[Ke].y,0,de,ge+480,16),r(Me[Ke].f,0,be,Ce+224,8),r(Me[Ke].ea,0,De,Ze+224,8)),W=8*ue*E.B,Me=E.sa,Ke=E.ta+16*J+16*ue*E.R,mt=E.qa,we=E.ra+8*J+W,Je=E.Ha,pt=E.Ia+8*J+W,W=0;16>W;++W)r(Me,Ke+W*E.R,de,ge+32*W,16);for(W=0;8>W;++W)r(mt,we+W*E.B,be,Ce+32*W,8),r(Je,pt+W*E.B,De,Ze+32*W,8)}}function zl(E,R,W,J,oe,ue,de,ge,be){var Ce=[0],De=[0],Ze=0,we=be!=null?be.kd:0,Me=be??new Tt;if(E==null||12>W)return 7;Me.data=E,Me.w=R,Me.ha=W,R=[R],W=[W],Me.gb=[Me.gb];e:{var Ke=R,mt=W,Je=Me.gb;if(e(E!=null),e(mt!=null),e(Je!=null),Je[0]=0,12<=mt[0]&&!n(E,Ke[0],"RIFF")){if(n(E,Ke[0]+8,"WEBP")){Je=3;break e}var pt=at(E,Ke[0]+4);if(12>pt||4294967286<pt){Je=3;break e}if(we&&pt>mt[0]-8){Je=7;break e}Je[0]=pt,Ke[0]+=12,mt[0]-=12}Je=0}if(Je!=0)return Je;for(pt=0<Me.gb[0],W=W[0];;){e:{var vt=E;mt=R,Je=W;var Dt=Ce,It=De,bn=Ke=[0];if((hn=Ze=[Ze])[0]=0,8>Je[0])Je=7;else{if(!n(vt,mt[0],"VP8X")){if(at(vt,mt[0]+4)!=10){Je=3;break e}if(18>Je[0]){Je=7;break e}var an=at(vt,mt[0]+8),tr=1+ze(vt,mt[0]+12);if(2147483648<=tr*(vt=1+ze(vt,mt[0]+15))){Je=3;break e}bn!=null&&(bn[0]=an),Dt!=null&&(Dt[0]=tr),It!=null&&(It[0]=vt),mt[0]+=18,Je[0]-=18,hn[0]=1}Je=0}}if(Ze=Ze[0],Ke=Ke[0],Je!=0)return Je;if(mt=!!(2&Ke),!pt&&Ze)return 3;if(ue!=null&&(ue[0]=!!(16&Ke)),de!=null&&(de[0]=mt),ge!=null&&(ge[0]=0),de=Ce[0],Ke=De[0],Ze&&mt&&be==null){Je=0;break}if(4>W){Je=7;break}if(pt&&Ze||!pt&&!Ze&&!n(E,R[0],"ALPH")){W=[W],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{an=E,Je=R,pt=W;var hn=Me.gb;Dt=Me.na,It=Me.P,bn=Me.Sa,tr=22,e(an!=null),e(pt!=null),vt=Je[0];var Cr=pt[0];for(e(Dt!=null),e(bn!=null),Dt[0]=null,It[0]=null,bn[0]=0;;){if(Je[0]=vt,pt[0]=Cr,8>Cr){Je=7;break e}var Ys=at(an,vt+4);if(4294967286<Ys){Je=3;break e}var ir=8+Ys+1&-2;if(tr+=ir,0<hn&&tr>hn){Je=3;break e}if(!n(an,vt,"VP8 ")||!n(an,vt,"VP8L")){Je=0;break e}if(Cr[0]<ir){Je=7;break e}n(an,vt,"ALPH")||(Dt[0]=an,It[0]=vt+8,bn[0]=Ys),vt+=ir,Cr-=ir}}if(W=W[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Je!=0)break}W=[W],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(hn=E,Je=R,pt=W,Dt=Me.gb[0],It=Me.Ja,bn=Me.xa,an=Je[0],vt=!n(hn,an,"VP8 "),tr=!n(hn,an,"VP8L"),e(hn!=null),e(pt!=null),e(It!=null),e(bn!=null),8>pt[0])Je=7;else{if(vt||tr){if(hn=at(hn,an+4),12<=Dt&&hn>Dt-12){Je=3;break e}if(we&&hn>pt[0]-8){Je=7;break e}It[0]=hn,Je[0]+=8,pt[0]-=8,bn[0]=tr}else bn[0]=5<=pt[0]&&hn[an+0]==47&&!(hn[an+4]>>5),It[0]=pt[0];Je=0}if(W=W[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],R=R[0],Je!=0)break;if(4294967286<Me.Ja)return 3;if(ge==null||mt||(ge[0]=Me.xa?2:1),de=[de],Ke=[Ke],Me.xa){if(5>W){Je=7;break}ge=de,we=Ke,mt=ue,E==null||5>W?E=0:5<=W&&E[R+0]==47&&!(E[R+4]>>5)?(pt=[0],hn=[0],Dt=[0],ne(It=new X,E,R,W),Bs(It,pt,hn,Dt)?(ge!=null&&(ge[0]=pt[0]),we!=null&&(we[0]=hn[0]),mt!=null&&(mt[0]=Dt[0]),E=1):E=0):E=0}else{if(10>W){Je=7;break}ge=Ke,E==null||10>W||!ko(E,R+3,W-3)?E=0:(we=E[R+0]|E[R+1]<<8|E[R+2]<<16,mt=16383&(E[R+7]<<8|E[R+6]),E=16383&(E[R+9]<<8|E[R+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=Me.Ja||!mt||!E?E=0:(de&&(de[0]=mt),ge&&(ge[0]=E),E=1))}if(!E||(de=de[0],Ke=Ke[0],Ze&&(Ce[0]!=de||De[0]!=Ke)))return 3;be!=null&&(be[0]=Me,be.offset=R-be.w,e(4294967286>R-be.w),e(be.offset==be.ha-W));break}return Je==0||Je==7&&Ze&&be==null?(ue!=null&&(ue[0]|=Me.na!=null&&0<Me.na.length),J!=null&&(J[0]=de),oe!=null&&(oe[0]=Ke),0):Je}function Nd(E,R,W){var J=R.width,oe=R.height,ue=0,de=0,ge=J,be=oe;if(R.Da=E!=null&&0<E.Da,R.Da&&(ge=E.cd,be=E.bd,ue=E.v,de=E.j,11>W||(ue&=-2,de&=-2),0>ue||0>de||0>=ge||0>=be||ue+ge>J||de+be>oe))return 0;if(R.v=ue,R.j=de,R.va=ue+ge,R.o=de+be,R.U=ge,R.T=be,R.da=E!=null&&0<E.da,R.da){if(!Et(ge,be,W=[E.ib],ue=[E.hb]))return 0;R.ib=W[0],R.hb=ue[0]}return R.ob=E!=null&&E.ob,R.Kb=E==null||!E.Sd,R.da&&(R.ob=R.ib<3*J/4&&R.hb<3*oe/4,R.Kb=0),1}function qm(E){if(E==null)return 2;if(11>E.S){var R=E.f.RGBA;R.fb+=(E.height-1)*R.A,R.A=-R.A}else R=E.f.kb,E=E.height,R.O+=(E-1)*R.fa,R.fa=-R.fa,R.N+=(E-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(E-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(E-1)*R.lb,R.lb=-R.lb);return 0}function Zc(E,R,W,J){if(J==null||0>=E||0>=R)return 2;if(W!=null){if(W.Da){var oe=W.cd,ue=W.bd,de=-2&W.v,ge=-2&W.j;if(0>de||0>ge||0>=oe||0>=ue||de+oe>E||ge+ue>R)return 2;E=oe,R=ue}if(W.da){if(!Et(E,R,oe=[W.ib],ue=[W.hb]))return 2;E=oe[0],R=ue[0]}}J.width=E,J.height=R;e:{var be=J.width,Ce=J.height;if(E=J.S,0>=be||0>=Ce||!(E>=ey&&13>E))E=2;else{if(0>=J.Rd&&J.sd==null){de=ue=oe=R=0;var De=(ge=be*cy[E])*Ce;if(11>E||(ue=(Ce+1)/2*(R=(be+1)/2),E==12&&(de=(oe=be)*Ce)),(Ce=i(De+2*ue+de))==null){E=1;break e}J.sd=Ce,11>E?((be=J.f.RGBA).eb=Ce,be.fb=0,be.A=ge,be.size=De):((be=J.f.kb).y=Ce,be.O=0,be.fa=ge,be.Fd=De,be.f=Ce,be.N=0+De,be.Ab=R,be.Cd=ue,be.ea=Ce,be.W=0+De+ue,be.Db=R,be.Ed=ue,E==12&&(be.F=Ce,be.J=0+De+2*ue),be.Tc=de,be.lb=oe)}if(R=1,oe=J.S,ue=J.width,de=J.height,oe>=ey&&13>oe)if(11>oe)E=J.f.RGBA,R&=(ge=Math.abs(E.A))*(de-1)+ue<=E.size,R&=ge>=ue*cy[oe],R&=E.eb!=null;else{E=J.f.kb,ge=(ue+1)/2,De=(de+1)/2,be=Math.abs(E.fa),Ce=Math.abs(E.Ab);var Ze=Math.abs(E.Db),we=Math.abs(E.lb),Me=we*(de-1)+ue;R&=be*(de-1)+ue<=E.Fd,R&=Ce*(De-1)+ge<=E.Cd,R=(R&=Ze*(De-1)+ge<=E.Ed)&be>=ue&Ce>=ge&Ze>=ge,R&=E.y!=null,R&=E.f!=null,R&=E.ea!=null,oe==12&&(R&=we>=ue,R&=Me<=E.Tc,R&=E.F!=null)}else R=0;E=R?0:2}}return E!=0||W!=null&&W.fd&&(E=qm(J)),E}var Tf=64,pl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tl=24,Tu=32,_u=8,Td=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(E){return E},D.Predictor2=function(E,R,W){return R[W+0]},D.Predictor3=function(E,R,W){return R[W+1]},D.Predictor4=function(E,R,W){return R[W-1]},D.Predictor5=function(E,R,W){return kt(kt(E,R[W+1]),R[W+0])},D.Predictor6=function(E,R,W){return kt(E,R[W-1])},D.Predictor7=function(E,R,W){return kt(E,R[W+0])},D.Predictor8=function(E,R,W){return kt(R[W-1],R[W+0])},D.Predictor9=function(E,R,W){return kt(R[W+0],R[W+1])},D.Predictor10=function(E,R,W){return kt(kt(E,R[W-1]),kt(R[W+0],R[W+1]))},D.Predictor11=function(E,R,W){var J=R[W+0];return 0>=Ut(J>>24&255,E>>24&255,(R=R[W-1])>>24&255)+Ut(J>>16&255,E>>16&255,R>>16&255)+Ut(J>>8&255,E>>8&255,R>>8&255)+Ut(255&J,255&E,255&R)?J:E},D.Predictor12=function(E,R,W){var J=R[W+0];return(Ht((E>>24&255)+(J>>24&255)-((R=R[W-1])>>24&255))<<24|Ht((E>>16&255)+(J>>16&255)-(R>>16&255))<<16|Ht((E>>8&255)+(J>>8&255)-(R>>8&255))<<8|Ht((255&E)+(255&J)-(255&R)))>>>0},D.Predictor13=function(E,R,W){var J=R[W-1];return(Sn((E=kt(E,R[W+0]))>>24&255,J>>24&255)<<24|Sn(E>>16&255,J>>16&255)<<16|Sn(E>>8&255,J>>8&255)<<8|Sn(255&E,255&J))>>>0};var up=D.PredictorAdd0;D.PredictorAdd1=en,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var dp=D.PredictorAdd2;Yt("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),Yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var sa,Y0=D.ColorIndexInverseTransform,Ru=D.MapARGB,Ou=D.VP8LColorIndexInverseTransformAlpha,ro=D.MapAlpha,_d=D.VP8LPredictorsAdd=[];_d.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var fp,hp,Rd,Od,Fu,$h,Ul,Fd,Bo,fc,ss,Wr,Ps,ia,Du,eu,Ph,Gm,Ob,PS,zS,US,Fb,Db,zh,hc,Km,Ml,Uh=i(511),J0=i(2041),Xm=i(225),Ym=i(767),Z0=0,Dd=J0,Jm=Xm,jo=Ym,so=Uh,ey=0,Eo=1,ty=2,Ac=3,Zm=4,Ap=5,_f=6,eg=7,ny=8,pp=9,ry=10,pc=[2,3,7],mp=[3,3,11],Mh=[280,256,256,256,40],sy=[0,1,1,1,0],tg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Rf=8,yc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ql=null,MS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],iy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],QS=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],io=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Xs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_r=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],nl=[],Ri=[],tu=[],Of=1,$b=2,Ld=[],ao=[];Jc("UpsampleRgbLinePair",St,3),Jc("UpsampleBgrLinePair",Vt,3),Jc("UpsampleRgbaLinePair",bs,4),Jc("UpsampleBgraLinePair",_i,4),Jc("UpsampleArgbLinePair",Sr,4),Jc("UpsampleRgba4444LinePair",Mn,2),Jc("UpsampleRgb565LinePair",En,2);var Qh=D.UpsampleRgbLinePair,Pb=D.UpsampleBgrLinePair,gp=D.UpsampleRgbaLinePair,ay=D.UpsampleBgraLinePair,Ff=D.UpsampleArgbLinePair,Lu=D.UpsampleRgba4444LinePair,Df=D.UpsampleRgb565LinePair,bc=16,yp=1<<bc-1,Hh=-227,Lf=482,oy=6,$f=0,oo=i(256),ly=i(256),HS=i(256),SN=i(256),CN=i(Lf-Hh),kN=i(Lf-Hh);Ai("YuvToRgbRow",St,3),Ai("YuvToBgrRow",Vt,3),Ai("YuvToRgbaRow",bs,4),Ai("YuvToBgraRow",_i,4),Ai("YuvToArgbRow",Sr,4),Ai("YuvToRgba4444Row",Mn,2),Ai("YuvToRgb565Row",En,2);var aa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xp=[0,2,8],ng=[8,7,6,4,4,2,2,2,1,1,1,1],rg=1;this.WebPDecodeRGBA=function(E,R,W,J,oe){var ue=Eo,de=new bt,ge=new zt;de.ba=ge,ge.S=ue,ge.width=[ge.width],ge.height=[ge.height];var be=ge.width,Ce=ge.height,De=new Jt;if(De==null||E==null)var Ze=2;else e(De!=null),Ze=zl(E,R,W,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Ze!=0?be=0:(be!=null&&(be[0]=De.width[0]),Ce!=null&&(Ce[0]=De.height[0]),be=1),be){ge.width=ge.width[0],ge.height=ge.height[0],J!=null&&(J[0]=ge.width),oe!=null&&(oe[0]=ge.height);e:{if(J=new Co,(oe=new Tt).data=E,oe.w=R,oe.ha=W,oe.kd=1,R=[0],e(oe!=null),((E=zl(oe.data,oe.w,oe.ha,null,null,null,R,null,oe))==0||E==7)&&R[0]&&(E=4),(R=E)==0){if(e(de!=null),J.data=oe.data,J.w=oe.w+oe.offset,J.ha=oe.ha-oe.offset,J.put=cn,J.ac=Ls,J.bc=Ji,J.ma=de,oe.xa){if((E=Wn())==null){de=1;break e}if((function(we,Me){var Ke=[0],mt=[0],Je=[0];t:for(;;){if(we==null)return 0;if(Me==null)return we.a=2,0;if(we.l=Me,we.a=0,ne(we.m,Me.data,Me.w,Me.ha),!Bs(we.m,Ke,mt,Je)){we.a=3;break t}if(we.xb=$b,Me.width=Ke[0],Me.height=mt[0],!Xn(Ke[0],mt[0],1,we,null))break t;return 1}return e(we.a!=0),0})(E,J)){if(J=(R=Zc(J.width,J.height,de.Oa,de.ba))==0){t:{J=E;n:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((W=J.l)!=null),e((oe=W.ma)!=null),J.xb!=0){if(J.ca=oe.ba,J.tb=oe.tb,e(J.ca!=null),!Nd(oe.Oa,W,Ac)){J.a=2;break n}if(!sr(J,W.width)||W.da)break n;if((W.da||Ct(J.ca.S))&&$l(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&$l()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!ie(J.s.vb,J.s.Wa.Xa)){J.a=1;break n}J.xb=0}if(!ft(J,J.V,J.Ba,J.c,J.i,W.o,ys))break n;oe.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(R=E.a)}else R=E.a}else{if((E=new Ei)==null){de=1;break e}if(E.Fa=oe.na,E.P=oe.P,E.qc=oe.Sa,ui(E,J)){if((R=Zc(J.width,J.height,de.Oa,de.ba))==0){if(E.Aa=0,W=de.Oa,e((oe=E)!=null),W!=null){if(0<(be=0>(be=W.Md)?0:100<be?255:255*be/100)){for(Ce=De=0;4>Ce;++Ce)12>(Ze=oe.pb[Ce]).lc&&(Ze.ia=be*ng[0>Ze.lc?0:Ze.lc]>>3),De|=Ze.ia;De&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=W.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}(function(we,Me){if(we==null)return 0;if(Me==null)return jn(we,2,"NULL VP8Io parameter in VP8Decode().");if(!we.cb&&!ui(we,Me))return 0;if(e(we.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(we.L=0);var Ke=xp[we.L];if(we.L==2?(we.yb=0,we.zb=0):(we.yb=Me.v-Ke>>4,we.zb=Me.j-Ke>>4,0>we.yb&&(we.yb=0),0>we.zb&&(we.zb=0)),we.Va=Me.o+15+Ke>>4,we.Hb=Me.va+15+Ke>>4,we.Hb>we.za&&(we.Hb=we.za),we.Va>we.Ub&&(we.Va=we.Ub),0<we.L){var mt=we.ed;for(Ke=0;4>Ke;++Ke){var Je;if(we.Qa.Cb){var pt=we.Qa.Lb[Ke];we.Qa.Fb||(pt+=mt.Tb)}else pt=mt.Tb;for(Je=0;1>=Je;++Je){var vt=we.gd[Ke][Je],Dt=pt;if(mt.Pc&&(Dt+=mt.vd[0],Je&&(Dt+=mt.od[0])),0<(Dt=0>Dt?0:63<Dt?63:Dt)){var It=Dt;0<mt.wb&&(It=4<mt.wb?It>>2:It>>1)>9-mt.wb&&(It=9-mt.wb),1>It&&(It=1),vt.dd=It,vt.tc=2*Dt+It,vt.ld=40<=Dt?2:15<=Dt?1:0}else vt.tc=0;vt.La=Je}}}Ke=0}else jn(we,6,"Frame setup failed"),Ke=we.a;if(Ke=Ke==0){if(Ke){we.$c=0,0<we.Aa||(we.Ic=rg);t:{Ke=we.Ic,mt=4*(It=we.za);var bn=32*It,an=It+1,tr=0<we.L?It*(0<we.Aa?2:1):0,hn=(we.Aa==2?2:1)*It;if((vt=mt+832+(Je=3*(16*Ke+xp[we.L])/2*bn)+(pt=we.Fa!=null&&0<we.Fa.length?we.Kc.c*we.Kc.i:0))!=vt)Ke=0;else{if(vt>we.Vb){if(we.Vb=0,we.Ec=i(vt),we.Fc=0,we.Ec==null){Ke=jn(we,1,"no memory during frame initialization.");break t}we.Vb=vt}vt=we.Ec,Dt=we.Fc,we.Ac=vt,we.Bc=Dt,Dt+=mt,we.Gd=a(bn,Tn),we.Hd=0,we.rb=a(an+1,st),we.sb=1,we.wa=tr?a(tr,rs):null,we.Y=0,we.D.Nb=0,we.D.wa=we.wa,we.D.Y=we.Y,0<we.Aa&&(we.D.Y+=It),e(!0),we.oc=vt,we.pc=Dt,Dt+=832,we.ya=a(hn,Pt),we.aa=0,we.D.ya=we.ya,we.D.aa=we.aa,we.Aa==2&&(we.D.aa+=It),we.R=16*It,we.B=8*It,It=(bn=xp[we.L])*we.R,bn=bn/2*we.B,we.sa=vt,we.ta=Dt+It,we.qa=we.sa,we.ra=we.ta+16*Ke*we.R+bn,we.Ha=we.qa,we.Ia=we.ra+8*Ke*we.B+bn,we.$c=0,Dt+=Je,we.mb=pt?vt:null,we.nb=pt?Dt:null,e(Dt+pt<=we.Fc+we.Vb),ju(we),s(we.Ac,we.Bc,0,mt),Ke=1}}if(Ke){if(Me.ka=0,Me.y=we.sa,Me.O=we.ta,Me.f=we.qa,Me.N=we.ra,Me.ea=we.Ha,Me.Vd=we.Ia,Me.fa=we.R,Me.Rc=we.B,Me.F=null,Me.J=0,!Z0){for(Ke=-255;255>=Ke;++Ke)Uh[255+Ke]=0>Ke?-Ke:Ke;for(Ke=-1020;1020>=Ke;++Ke)J0[1020+Ke]=-128>Ke?-128:127<Ke?127:Ke;for(Ke=-112;112>=Ke;++Ke)Xm[112+Ke]=-16>Ke?-16:15<Ke?15:Ke;for(Ke=-255;510>=Ke;++Ke)Ym[255+Ke]=0>Ke?0:255<Ke?255:Ke;Z0=1}Ul=el,Fd=Fh,fc=Ea,ss=If,Wr=bd,Bo=Oh,Ps=lp,ia=Xc,Du=ae,eu=Se,Ph=cp,Gm=M,Ob=Oe,PS=Qe,zS=dc,US=qc,Fb=Iu,Db=Lh,Ri[0]=Eu,Ri[1]=wd,Ri[2]=Dh,Ri[3]=Nf,Ri[4]=Ni,Ri[5]=kd,Ri[6]=fi,Ri[7]=L,Ri[8]=se,Ri[9]=V,nl[0]=no,nl[1]=Ll,nl[2]=Cd,nl[3]=hl,nl[4]=Vc,nl[5]=mn,nl[6]=uc,tu[0]=At,tu[1]=Sd,tu[2]=pe,tu[3]=Re,tu[4]=_n,tu[5]=kn,tu[6]=Qn,Ke=1}else Ke=0}Ke&&(Ke=(function(Cr,Ys){for(Cr.M=0;Cr.M<Cr.Va;++Cr.M){var ir,on=Cr.Jc[Cr.M&Cr.Xb],Wt=Cr.m,pi=Cr;for(ir=0;ir<pi.za;++ir){var qn=Wt,lr=pi,hs=lr.Ac,Ia=lr.Bc+4*ir,lo=lr.zc,zs=lr.ya[lr.aa+ir];if(lr.Qa.Bb?zs.$b=ve(qn,lr.Pa.jb[0])?2+ve(qn,lr.Pa.jb[2]):ve(qn,lr.Pa.jb[1]):zs.$b=0,lr.kc&&(zs.Ad=ve(qn,lr.Bd)),zs.Za=!ve(qn,145)+0,zs.Za){var ha=zs.Ob,Io=0;for(lr=0;4>lr;++lr){var Aa,gr=lo[0+lr];for(Aa=0;4>Aa;++Aa){gr=io[hs[Ia+Aa]][gr];for(var Xr=iy[ve(qn,gr[0])];0<Xr;)Xr=iy[2*Xr+ve(qn,gr[Xr])];gr=-Xr,hs[Ia+Aa]=gr}r(ha,Io,hs,Ia,4),Io+=4,lo[0+lr]=gr}}else gr=ve(qn,156)?ve(qn,128)?1:3:ve(qn,163)?2:0,zs.Ob[0]=gr,s(hs,Ia,gr,4),s(lo,0,gr,4);zs.Dd=ve(qn,142)?ve(qn,114)?ve(qn,183)?1:3:2:0}if(pi.m.Ka)return jn(Cr,7,"Premature end-of-partition0 encountered.");for(;Cr.ja<Cr.za;++Cr.ja){if(pi=on,qn=(Wt=Cr).rb[Wt.sb-1],hs=Wt.rb[Wt.sb+Wt.ja],ir=Wt.ya[Wt.aa+Wt.ja],Ia=Wt.kc?ir.Ad:0)qn.la=hs.la=0,ir.Za||(qn.Na=hs.Na=0),ir.Hc=0,ir.Gc=0,ir.ia=0;else{var mi,is;if(qn=hs,hs=pi,Ia=Wt.Pa.Xc,lo=Wt.ya[Wt.aa+Wt.ja],zs=Wt.pb[lo.$b],lr=lo.ad,ha=0,Io=Wt.rb[Wt.sb-1],gr=Aa=0,s(lr,ha,0,384),lo.Za)var Na=0,gi=Ia[3];else{Xr=i(16);var Yr=qn.Na+Io.Na;if(Yr=Ql(hs,Ia[1],Yr,zs.Eb,0,Xr,0),qn.Na=Io.Na=(0<Yr)+0,1<Yr)Ul(Xr,0,lr,ha);else{var oa=Xr[0]+3>>3;for(Xr=0;256>Xr;Xr+=16)lr[ha+Xr]=oa}Na=1,gi=Ia[0]}var As=15&qn.la,pa=15&Io.la;for(Xr=0;4>Xr;++Xr){var ma=1&pa;for(oa=is=0;4>oa;++oa)As=As>>1|(ma=(Yr=Ql(hs,gi,Yr=ma+(1&As),zs.Sc,Na,lr,ha))>Na)<<7,is=is<<2|(3<Yr?3:1<Yr?2:lr[ha+0]!=0),ha+=16;As>>=4,pa=pa>>1|ma<<7,Aa=(Aa<<8|is)>>>0}for(gi=As,Na=pa>>4,mi=0;4>mi;mi+=2){for(is=0,As=qn.la>>4+mi,pa=Io.la>>4+mi,Xr=0;2>Xr;++Xr){for(ma=1&pa,oa=0;2>oa;++oa)Yr=ma+(1&As),As=As>>1|(ma=0<(Yr=Ql(hs,Ia[2],Yr,zs.Qc,0,lr,ha)))<<3,is=is<<2|(3<Yr?3:1<Yr?2:lr[ha+0]!=0),ha+=16;As>>=2,pa=pa>>1|ma<<5}gr|=is<<4*mi,gi|=As<<4<<mi,Na|=(240&pa)<<mi}qn.la=gi,Io.la=Na,lo.Hc=Aa,lo.Gc=gr,lo.ia=43690&gr?0:zs.ia,Ia=!(Aa|gr)}if(0<Wt.L&&(Wt.wa[Wt.Y+Wt.ja]=Wt.gd[ir.$b][ir.Za],Wt.wa[Wt.Y+Wt.ja].La|=!Ia),pi.Ka)return jn(Cr,7,"Premature end-of-file encountered.")}if(ju(Cr),Wt=Ys,pi=1,ir=(on=Cr).D,qn=0<on.L&&on.M>=on.zb&&on.M<=on.Va,on.Aa==0)t:{if(ir.M=on.M,ir.uc=qn,ra(on,ir),pi=1,ir=(is=on.D).Nb,qn=(gr=xp[on.L])*on.R,hs=gr/2*on.B,Xr=16*ir*on.R,oa=8*ir*on.B,Ia=on.sa,lo=on.ta-qn+Xr,zs=on.qa,lr=on.ra-hs+oa,ha=on.Ha,Io=on.Ia-hs+oa,pa=(As=is.M)==0,Aa=As>=on.Va-1,on.Aa==2&&ra(on,is),is.uc)for(ma=(Yr=on).D.M,e(Yr.D.uc),is=Yr.yb;is<Yr.Hb;++is){Na=is,gi=ma;var js=(Vr=(ga=Yr).D).Nb;mi=ga.R;var Vr=Vr.wa[Vr.Y+Na],No=ga.sa,Oi=ga.ta+16*js*mi+16*Na,$n=Vr.dd,zn=Vr.tc;if(zn!=0)if(e(3<=zn),ga.L==1)0<Na&&US(No,Oi,mi,zn+4),Vr.La&&Db(No,Oi,mi,zn),0<gi&&zS(No,Oi,mi,zn+4),Vr.La&&Fb(No,Oi,mi,zn);else{var Jr=ga.B,ml=ga.qa,vc=ga.ra+8*js*Jr+8*Na,rl=ga.Ha,ga=ga.Ia+8*js*Jr+8*Na;js=Vr.ld,0<Na&&(ia(No,Oi,mi,zn+4,$n,js),eu(ml,vc,rl,ga,Jr,zn+4,$n,js)),Vr.La&&(Gm(No,Oi,mi,zn,$n,js),PS(ml,vc,rl,ga,Jr,zn,$n,js)),0<gi&&(Ps(No,Oi,mi,zn+4,$n,js),Du(ml,vc,rl,ga,Jr,zn+4,$n,js)),Vr.La&&(Ph(No,Oi,mi,zn,$n,js),Ob(ml,vc,rl,ga,Jr,zn,$n,js))}}if(on.ia&&alert("todo:DitherRow"),Wt.put!=null){if(is=16*As,As=16*(As+1),pa?(Wt.y=on.sa,Wt.O=on.ta+Xr,Wt.f=on.qa,Wt.N=on.ra+oa,Wt.ea=on.Ha,Wt.W=on.Ia+oa):(is-=gr,Wt.y=Ia,Wt.O=lo,Wt.f=zs,Wt.N=lr,Wt.ea=ha,Wt.W=Io),Aa||(As-=gr),As>Wt.o&&(As=Wt.o),Wt.F=null,Wt.J=null,on.Fa!=null&&0<on.Fa.length&&is<As&&(Wt.J=xs(on,Wt,is,As-is),Wt.F=on.mb,Wt.F==null&&Wt.F.length==0)){pi=jn(on,3,"Could not decode alpha data.");break t}is<Wt.j&&(gr=Wt.j-is,is=Wt.j,e(!(1&gr)),Wt.O+=on.R*gr,Wt.N+=on.B*(gr>>1),Wt.W+=on.B*(gr>>1),Wt.F!=null&&(Wt.J+=Wt.width*gr)),is<As&&(Wt.O+=Wt.v,Wt.N+=Wt.v>>1,Wt.W+=Wt.v>>1,Wt.F!=null&&(Wt.J+=Wt.v),Wt.ka=is-Wt.j,Wt.U=Wt.va-Wt.v,Wt.T=As-is,pi=Wt.put(Wt))}ir+1!=on.Ic||Aa||(r(on.sa,on.ta-qn,Ia,lo+16*on.R,qn),r(on.qa,on.ra-hs,zs,lr+8*on.B,hs),r(on.Ha,on.Ia-hs,ha,Io+8*on.B,hs))}if(!pi)return jn(Cr,6,"Output aborted.")}return 1})(we,Me)),Me.bc!=null&&Me.bc(Me),Ke&=1}return Ke?(we.cb=0,Ke):0})(E,J)||(R=E.a)}}else R=E.a}R==0&&de.Oa!=null&&de.Oa.fd&&(R=qm(de.ba))}de=R}ue=de!=0?null:11>ue?ge.f.RGBA.eb:ge.f.kb.y}else ue=null;return ue};var cy=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(D,T){for(var N="",P=0;P<4;P++)N+=String.fromCharCode(D[T++]);return N}function d(D,T){return D[T+0]|D[T+1]<<8}function f(D,T){return(D[T+0]|D[T+1]<<8|D[T+2]<<16)>>>0}function A(D,T){return(D[T+0]|D[T+1]<<8|D[T+2]<<16|D[T+3]<<24)>>>0}new c;var m=[0],g=[0],y=[],x=new c,v=t,w=(function(D,T){var N={},P=0,z=!1,U=0,ee=0;if(N.frames=[],!(function(Q,X){for(var re=0;re<4;re++)if(Q[X+re]!="RIFF".charCodeAt(re))return!0;return!1})(D,T)){for(A(D,T+=4),T+=8;T<D.length;){var q=u(D,T),Z=A(D,T+=4);T+=4;var G=Z+(1&Z);switch(q){case"VP8 ":case"VP8L":N.frames[P]===void 0&&(N.frames[P]={}),(H=N.frames[P]).src_off=z?ee:T-8,H.src_size=U+Z+8,P++,z&&(z=!1,U=0,ee=0);break;case"VP8X":(H=N.header={}).feature_flags=D[T];var ne=T+4;H.canvas_width=1+f(D,ne),ne+=3,H.canvas_height=1+f(D,ne),ne+=3;break;case"ALPH":z=!0,U=G+8,ee=T-8;break;case"ANIM":(H=N.header).bgcolor=A(D,T),ne=T+4,H.loop_count=d(D,ne),ne+=2;break;case"ANMF":var K,H;(H=N.frames[P]={}).offset_x=2*f(D,T),T+=3,H.offset_y=2*f(D,T),T+=3,H.width=1+f(D,T),T+=3,H.height=1+f(D,T),T+=3,H.duration=f(D,T),T+=3,K=D[T++],H.dispose=1&K,H.blend=K>>1&1}q!="ANMF"&&(T+=G)}return N}})(v,0);w.response=v,w.rgbaoutput=!0,w.dataurl=!1;var B=w.header?w.header:null,k=w.frames?w.frames:null;if(B){B.loop_counter=B.loop_count,m=[B.canvas_height],g=[B.canvas_width];for(var j=0;j<k.length&&k[j].blend!=0;j++);}var I=k[0],O=x.WebPDecodeRGBA(v,I.src_off,I.src_size,g,m);I.rgba=O,I.imgwidth=g[0],I.imgheight=m[0];for(var F=0;F<g[0]*m[0]*4;F++)y[F]=O[F];return this.width=g,this.height=m,this.data=y,this}function vmt(){var t,e=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function wmt(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,n,r,s,i,a,l,c,u,d=function(Q){return Q=Q||{},this.isStrokeTransparent=Q.isStrokeTransparent||!1,this.strokeOpacity=Q.strokeOpacity||1,this.strokeStyle=Q.strokeStyle||"#000000",this.fillStyle=Q.fillStyle||"#000000",this.isFillTransparent=Q.isFillTransparent||!1,this.fillOpacity=Q.fillOpacity||1,this.font=Q.font||"10px sans-serif",this.textBaseline=Q.textBaseline||"alphabetic",this.textAlign=Q.textAlign||"left",this.lineWidth=Q.lineWidth||1,this.lineJoin=Q.lineJoin||"miter",this.lineCap=Q.lineCap||"butt",this.path=Q.path||[],this.transform=Q.transform!==void 0?Q.transform.clone():new c,this.globalCompositeOperation=Q.globalCompositeOperation||"normal",this.globalAlpha=Q.globalAlpha||1,this.clip_path=Q.clip_path||[],this.currentPoint=Q.currentPoint||new a,this.miterLimit=Q.miterLimit||10,this.lastPoint=Q.lastPoint||new a,this.lineDashOffset=Q.lineDashOffset||0,this.lineDash=Q.lineDash||[],this.margin=Q.margin||[0,0,0,0],this.prevPageLastElemOffset=Q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Q.ignoreClearRect!="boolean"||Q.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(Q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=Q;Object.defineProperty(this,"pdf",{get:function(){return X}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ie){re=!!ie}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(ie){le=!!ie}});var Ae=0;Object.defineProperty(this,"posX",{get:function(){return Ae},set:function(ie){isNaN(ie)||(Ae=ie)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(ie){isNaN(ie)||(xe=ie)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ie){var Le;typeof ie=="number"?Le=[ie,ie,ie,ie]:((Le=new Array(4))[0]=ie[0],Le[1]=ie.length>=2?ie[1]:Le[0],Le[2]=ie.length>=3?ie[2]:Le[0],Le[3]=ie.length>=4?ie[3]:Le[1]),u.margin=Le}});var Be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Be},set:function(ie){Be=ie}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(ie){me=ie}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(ie){ve=ie}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ie){ie instanceof d&&(u=ie)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ie){u.path=ie}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(ie){je=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var Le;Le=A(ie),this.ctx.fillStyle=Le.style,this.ctx.isFillTransparent=Le.a===0,this.ctx.fillOpacity=Le.a,this.pdf.setFillColor(Le.r,Le.g,Le.b,{a:Le.a}),this.pdf.setTextColor(Le.r,Le.g,Le.b,{a:Le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var Le=A(ie);this.ctx.strokeStyle=Le.style,this.ctx.isStrokeTransparent=Le.a===0,this.ctx.strokeOpacity=Le.a,Le.a===0?this.pdf.setDrawColor(255,255,255):(Le.a,this.pdf.setDrawColor(Le.r,Le.g,Le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var ye=null,ze=null,at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(ie){ye=null,ze=null,at=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var Le;if(this.ctx.font=ie,(Le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ie))!==null){var nt=Le[1];Le[2];var Et=Le[3],_e=Le[4];Le[5];var ht=Le[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor(ot==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var $t=(function(Yt){var sn,Fn,Ft=[],xn=Yt.trim();if(xn==="")return j6;if(xn in AY)return[AY[xn]];for(;xn!=="";){switch(Fn=null,sn=(xn=mY(xn)).charAt(0)){case'"':case"'":Fn=pmt(xn.substring(1),sn);break;default:Fn=mmt(xn)}if(Fn===null||(Ft.push(Fn[0]),(xn=mY(Fn[1]))!==""&&xn.charAt(0)!==","))return j6;xn=xn.replace(/^,/,"")}return Ft})(ht);if(this.fontFaces){var kt=(function(Yt,sn){var Fn=Yt.getFontList(),Ft=JSON.stringify(Fn);if(ye===null||ze!==Ft){var xn=(function(ke){var $e=[];return Object.keys(ke).forEach(function(yt){ke[yt].forEach(function(Ct){var _t=null;switch(Ct){case"bold":_t={family:yt,weight:"bold"};break;case"italic":_t={family:yt,style:"italic"};break;case"bolditalic":_t={family:yt,weight:"bold",style:"italic"};break;case"":case"normal":_t={family:yt}}_t!==null&&(_t.ref={name:yt,style:Ct},$e.push(_t))})}),$e})(Fn);ye=(function(ke){for(var $e={},yt=0;yt<ke.length;++yt){var Ct=B6(ke[yt]),_t=Ct.family,Lt=Ct.stretch,zt=Ct.style,Jt=Ct.weight;$e[_t]=$e[_t]||{},$e[_t][Lt]=$e[_t][Lt]||{},$e[_t][Lt][zt]=$e[_t][Lt][zt]||{},$e[_t][Lt][zt][Jt]=Ct}return $e})(xn.concat(sn)),ze=Ft}return ye})(this.pdf,this.fontFaces),Ht=$t.map(function(Yt){return{family:Yt,stretch:"normal",weight:Et,style:nt}}),Sn=(function(Yt,sn,Fn){for(var Ft=(Fn=Fn||{}).defaultFontFamily||"times",xn=Object.assign({},Amt,Fn.genericFontFamilies||{}),ke=null,$e=null,yt=0;yt<sn.length;++yt)if(xn[(ke=B6(sn[yt])).family]&&(ke.family=xn[ke.family]),Yt.hasOwnProperty(ke.family)){$e=Yt[ke.family];break}if(!($e=$e||Yt[Ft]))throw new Error("Could not find a font-family for the rule '"+pY(ke)+"' and default family '"+Ft+"'.");if($e=(function(Ct,_t){if(_t[Ct])return _t[Ct];var Lt=j8[Ct],zt=Lt<=j8.normal?-1:1,Jt=hY(_t,hhe,Lt,zt);if(!Jt)throw new Error("Could not find a matching font-stretch value for "+Ct);return Jt})(ke.stretch,$e),$e=(function(Ct,_t){if(_t[Ct])return _t[Ct];for(var Lt=fhe[Ct],zt=0;zt<Lt.length;++zt)if(_t[Lt[zt]])return _t[Lt[zt]];throw new Error("Could not find a matching font-style for "+Ct)})(ke.style,$e),!($e=(function(Ct,_t){if(_t[Ct])return _t[Ct];if(Ct===400&&_t[500])return _t[500];if(Ct===500&&_t[400])return _t[400];var Lt=hmt[Ct],zt=hY(_t,Ahe,Lt,Ct<400?-1:1);if(!zt)throw new Error("Could not find a matching font-weight for value "+Ct);return zt})(ke.weight,$e)))throw new Error("Failed to resolve a font for the rule '"+pY(ke)+"'.");return $e})(kt,Ht);this.pdf.setFont(Sn.ref.name,Sn.ref.style)}else{var Ut="";(Et==="bold"||parseInt(Et,10)>=700||nt==="bold")&&(Ut="bold"),nt==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var en="",fn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qt=0;Qt<$t.length;Qt++){if(this.pdf.internal.getFont($t[Qt],Ut,{noFallback:!0,disableWarning:!0})!==void 0){en=$t[Qt];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont($t[Qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)en=$t[Qt],Ut="bold";else if(this.pdf.internal.getFont($t[Qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){en=$t[Qt],Ut="normal";break}}if(en===""){for(var rn=0;rn<$t.length;rn++)if(fn[$t[rn]]){en=fn[$t[rn]];break}}en=en===""?"Times":en,this.pdf.setFont(en,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};f.prototype.setLineDash=function(Q){this.lineDash=Q},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){k.call(this,"fill",!1)},f.prototype.stroke=function(){k.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(Q,X){if(isNaN(Q)||isNaN(X))throw Zs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new a(Q,X));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(Q,X)},f.prototype.closePath=function(){var Q=new a(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&_s(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){Q=new a(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(Q.x,Q.y)},f.prototype.lineTo=function(Q,X){if(isNaN(Q)||isNaN(X))throw Zs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new a(Q,X));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(re.x,re.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},f.prototype.quadraticCurveTo=function(Q,X,re,le){if(isNaN(re)||isNaN(le)||isNaN(Q)||isNaN(X))throw Zs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(re,le)),xe=this.ctx.transform.applyToPoint(new a(Q,X));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},f.prototype.bezierCurveTo=function(Q,X,re,le,Ae,xe){if(isNaN(Ae)||isNaN(xe)||isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le))throw Zs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Be=this.ctx.transform.applyToPoint(new a(Ae,xe)),me=this.ctx.transform.applyToPoint(new a(Q,X)),ve=this.ctx.transform.applyToPoint(new a(re,le));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:ve.x,y2:ve.y,x:Be.x,y:Be.y}),this.ctx.lastPoint=new a(Be.x,Be.y)},f.prototype.arc=function(Q,X,re,le,Ae,xe){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le)||isNaN(Ae))throw Zs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var Be=this.ctx.transform.applyToPoint(new a(Q,X));Q=Be.x,X=Be.y;var me=this.ctx.transform.applyToPoint(new a(0,re)),ve=this.ctx.transform.applyToPoint(new a(0,0));re=Math.sqrt(Math.pow(me.x-ve.x,2)+Math.pow(me.y-ve.y,2))}Math.abs(Ae-le)>=2*Math.PI&&(le=0,Ae=2*Math.PI),this.path.push({type:"arc",x:Q,y:X,radius:re,startAngle:le,endAngle:Ae,counterclockwise:xe})},f.prototype.arcTo=function(Q,X,re,le,Ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(Q,X,re,le){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le))throw Zs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Q,X),this.lineTo(Q+re,X),this.lineTo(Q+re,X+le),this.lineTo(Q,X+le),this.lineTo(Q,X),this.lineTo(Q+re,X),this.lineTo(Q,X)},f.prototype.fillRect=function(Q,X,re,le){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le))throw Zs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Ae={};this.lineCap!=="butt"&&(Ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Q,X,re,le),this.fill(),Ae.hasOwnProperty("lineCap")&&(this.lineCap=Ae.lineCap),Ae.hasOwnProperty("lineJoin")&&(this.lineJoin=Ae.lineJoin)}},f.prototype.strokeRect=function(Q,X,re,le){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le))throw Zs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(Q,X,re,le),this.stroke())},f.prototype.clearRect=function(Q,X,re,le){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le))throw Zs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Q,X,re,le))},f.prototype.save=function(Q){Q=typeof Q!="boolean"||Q;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),Q){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},f.prototype.restore=function(Q){Q=typeof Q!="boolean"||Q;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(X),Q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(Q){var X,re,le,Ae;if(Q.isCanvasGradient===!0&&(Q=Q.getColor()),!Q)return{r:0,g:0,b:0,a:0,style:Q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Q))X=0,re=0,le=0,Ae=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Q);if(xe!==null)X=parseInt(xe[1]),re=parseInt(xe[2]),le=parseInt(xe[3]),Ae=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Q))!==null)X=parseInt(xe[1]),re=parseInt(xe[2]),le=parseInt(xe[3]),Ae=parseFloat(xe[4]);else{if(Ae=1,typeof Q=="string"&&Q.charAt(0)!=="#"){var Be=new ihe(Q);Q=Be.ok?Be.toHex():"#000000"}Q.length===4?(X=Q.substring(1,2),X+=X,re=Q.substring(2,3),re+=re,le=Q.substring(3,4),le+=le):(X=Q.substring(1,3),re=Q.substring(3,5),le=Q.substring(5,7)),X=parseInt(X,16),re=parseInt(re,16),le=parseInt(le,16)}}return{r:X,g:re,b:le,a:Ae,style:Q}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(Q,X,re,le){if(isNaN(X)||isNaN(re)||typeof Q!="string")throw Zs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!m.call(this)){var Ae=G(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;P.call(this,{text:Q,x:X,y:re,scale:xe,angle:Ae,align:this.textAlign,maxWidth:le})}},f.prototype.strokeText=function(Q,X,re,le){if(isNaN(X)||isNaN(re)||typeof Q!="string")throw Zs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){le=isNaN(le)?void 0:le;var Ae=G(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;P.call(this,{text:Q,x:X,y:re,scale:xe,renderingMode:"stroke",angle:Ae,align:this.textAlign,maxWidth:le})}},f.prototype.measureText=function(Q){if(typeof Q!="string")throw Zs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,re=this.pdf.internal.scaleFactor,le=X.internal.getFontSize(),Ae=X.getStringUnitWidth(Q)*le/X.internal.scaleFactor;return new function(xe){var Be=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Be}}),this}({width:Ae*=Math.round(96*re/72*1e4)/1e4})},f.prototype.scale=function(Q,X){if(isNaN(Q)||isNaN(X))throw Zs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new c(Q,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.rotate=function(Q){if(isNaN(Q))throw Zs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new c(Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.translate=function(Q,X){if(isNaN(Q)||isNaN(X))throw Zs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new c(1,0,0,1,Q,X);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.transform=function(Q,X,re,le,Ae,xe){if(isNaN(Q)||isNaN(X)||isNaN(re)||isNaN(le)||isNaN(Ae)||isNaN(xe))throw Zs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Be=new c(Q,X,re,le,Ae,xe);this.ctx.transform=this.ctx.transform.multiply(Be)},f.prototype.setTransform=function(Q,X,re,le,Ae,xe){Q=isNaN(Q)?1:Q,X=isNaN(X)?0:X,re=isNaN(re)?0:re,le=isNaN(le)?1:le,Ae=isNaN(Ae)?0:Ae,xe=isNaN(xe)?0:xe,this.ctx.transform=new c(Q,X,re,le,Ae,xe)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(Q,X,re,le,Ae,xe,Be,me,ve){var je=this.pdf.getImageProperties(Q),ye=1,ze=1,at=1,ie=1;le!==void 0&&me!==void 0&&(at=me/le,ie=ve/Ae,ye=je.width/le*me/le,ze=je.height/Ae*ve/Ae),xe===void 0&&(xe=X,Be=re,X=0,re=0),le!==void 0&&me===void 0&&(me=le,ve=Ae),le===void 0&&me===void 0&&(me=je.width,ve=je.height);var Le=this.ctx.transform.decompose(),nt=G(Le.rotate.shx),Et=new c,_e=(Et=(Et=(Et=Et.multiply(Le.translate)).multiply(Le.skew)).multiply(Le.scale)).applyToRectangle(new l(xe-X*at,Be-re*ie,le*ye,Ae*ze));if(this.autoPaging){for(var ht,ot=x.call(this,_e),$t=[],kt=0;kt<ot.length;kt+=1)$t.indexOf(ot[kt])===-1&&$t.push(ot[kt]);B($t);for(var Ht=$t[0],Sn=$t[$t.length-1],Ut=Ht;Ut<Sn+1;Ut++){this.pdf.setPage(Ut);var en=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fn=Ut===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=Ut===1?0:Qt+(Ut-2)*rn;if(this.ctx.clip_path.length!==0){var sn=this.path;ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ht,this.posX+this.margin[3],-Yt+fn+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=sn}var Fn=JSON.parse(JSON.stringify(_e));Fn=w([Fn],this.posX+this.margin[3],-Yt+fn+this.ctx.prevPageLastElemOffset)[0];var Ft=(Ut>Ht||Ut<Sn)&&y.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],en,rn,null).clip().discardPath()),this.pdf.addImage(Q,"JPEG",Fn.x,Fn.y,Fn.w,Fn.h,null,null,nt),Ft&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Q,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,nt)};var x=function(Q,X,re){var le=[];X=X||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ae=this.posY+this.ctx.prevPageLastElemOffset;switch(Q.type){default:case"mt":case"lt":le.push(Math.floor((Q.y+Ae)/re)+1);break;case"arc":le.push(Math.floor((Q.y+Ae-Q.radius)/re)+1),le.push(Math.floor((Q.y+Ae+Q.radius)/re)+1);break;case"qct":var xe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x,Q.y);le.push(Math.floor((xe.y+Ae)/re)+1),le.push(Math.floor((xe.y+xe.h+Ae)/re)+1);break;case"bct":var Be=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y);le.push(Math.floor((Be.y+Ae)/re)+1),le.push(Math.floor((Be.y+Be.h+Ae)/re)+1);break;case"rect":le.push(Math.floor((Q.y+Ae)/re)+1),le.push(Math.floor((Q.y+Q.h+Ae)/re)+1)}for(var me=0;me<le.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<le[me];)v.call(this);return le},v=function(){var Q=this.fillStyle,X=this.strokeStyle,re=this.font,le=this.lineCap,Ae=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=Q,this.strokeStyle=X,this.font=re,this.lineCap=le,this.lineWidth=Ae,this.lineJoin=xe},w=function(Q,X,re){for(var le=0;le<Q.length;le++)switch(Q[le].type){case"bct":Q[le].x2+=X,Q[le].y2+=re;case"qct":Q[le].x1+=X,Q[le].y1+=re;default:Q[le].x+=X,Q[le].y+=re}return Q},B=function(Q){return Q.sort(function(X,re){return X-re})},k=function(Q,X){var re=this.fillStyle,le=this.strokeStyle,Ae=this.lineCap,xe=this.lineWidth,Be=Math.abs(xe*this.ctx.transform.scaleX),me=this.lineJoin;if(this.autoPaging){for(var ve,je,ye=JSON.parse(JSON.stringify(this.path)),ze=JSON.parse(JSON.stringify(this.path)),at=[],ie=0;ie<ze.length;ie++)if(ze[ie].x!==void 0)for(var Le=x.call(this,ze[ie]),nt=0;nt<Le.length;nt+=1)at.indexOf(Le[nt])===-1&&at.push(Le[nt]);for(var Et=0;Et<at.length;Et++)for(;this.pdf.internal.getNumberOfPages()<at[Et];)v.call(this);B(at);for(var _e=at[0],ht=at[at.length-1],ot=_e;ot<ht+1;ot++){this.pdf.setPage(ot),this.fillStyle=re,this.strokeStyle=le,this.lineCap=Ae,this.lineWidth=Be,this.lineJoin=me;var $t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=ot===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Sn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=ot===1?0:Ht+(ot-2)*Sn;if(this.ctx.clip_path.length!==0){var en=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ve,this.posX+this.margin[3],-Ut+kt+this.ctx.prevPageLastElemOffset),j.call(this,Q,!0),this.path=en}if(je=JSON.parse(JSON.stringify(ye)),this.path=w(je,this.posX+this.margin[3],-Ut+kt+this.ctx.prevPageLastElemOffset),X===!1||ot===0){var fn=(ot>_e||ot<ht)&&y.call(this);fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Sn,null).clip().discardPath()),j.call(this,Q,X),fn&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}this.path=ye}else this.lineWidth=Be,j.call(this,Q,X),this.lineWidth=xe},j=function(Q,X){if((Q!=="stroke"||X||!g.call(this))&&(Q==="stroke"||X||!m.call(this))){for(var re,le,Ae=[],xe=this.path,Be=0;Be<xe.length;Be++){var me=xe[Be];switch(me.type){case"begin":Ae.push({begin:!0});break;case"close":Ae.push({close:!0});break;case"mt":Ae.push({start:me,deltas:[],abs:[]});break;case"lt":var ve=Ae.length;if(xe[Be-1]&&!isNaN(xe[Be-1].x)&&(re=[me.x-xe[Be-1].x,me.y-xe[Be-1].y],ve>0)){for(;ve>=0;ve--)if(Ae[ve-1].close!==!0&&Ae[ve-1].begin!==!0){Ae[ve-1].deltas.push(re),Ae[ve-1].abs.push(me);break}}break;case"bct":re=[me.x1-xe[Be-1].x,me.y1-xe[Be-1].y,me.x2-xe[Be-1].x,me.y2-xe[Be-1].y,me.x-xe[Be-1].x,me.y-xe[Be-1].y],Ae[Ae.length-1].deltas.push(re);break;case"qct":var je=xe[Be-1].x+2/3*(me.x1-xe[Be-1].x),ye=xe[Be-1].y+2/3*(me.y1-xe[Be-1].y),ze=me.x+2/3*(me.x1-me.x),at=me.y+2/3*(me.y1-me.y),ie=me.x,Le=me.y;re=[je-xe[Be-1].x,ye-xe[Be-1].y,ze-xe[Be-1].x,at-xe[Be-1].y,ie-xe[Be-1].x,Le-xe[Be-1].y],Ae[Ae.length-1].deltas.push(re);break;case"arc":Ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ae[Ae.length-1].abs)&&Ae[Ae.length-1].abs.push(me)}}le=X?null:Q==="stroke"?"stroke":"fill";for(var nt=!1,Et=0;Et<Ae.length;Et++)if(Ae[Et].arc)for(var _e=Ae[Et].abs,ht=0;ht<_e.length;ht++){var ot=_e[ht];ot.type==="arc"?F.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,X,!nt):z.call(this,ot.x,ot.y),nt=!0}else if(Ae[Et].close===!0)this.pdf.internal.out("h"),nt=!1;else if(Ae[Et].begin!==!0){var $t=Ae[Et].start.x,kt=Ae[Et].start.y;U.call(this,Ae[Et].deltas,$t,kt),nt=!0}le&&D.call(this,le),X&&T.call(this)}},I=function(Q){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Q-re;case"top":return Q+X-re;case"hanging":return Q+X-2*re;case"middle":return Q+X/2-re;default:return Q}},O=function(Q){return Q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var Q=function(){};return Q.colorStops=[],Q.addColorStop=function(X,re){this.colorStops.push([X,re])},Q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Q.isCanvasGradient=!0,Q},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(Q,X,re,le,Ae,xe,Be,me,ve){for(var je=q.call(this,re,le,Ae,xe),ye=0;ye<je.length;ye++){var ze=je[ye];ye===0&&(ve?N.call(this,ze.x1+Q,ze.y1+X):z.call(this,ze.x1+Q,ze.y1+X)),ee.call(this,Q,X,ze.x2,ze.y2,ze.x3,ze.y3,ze.x4,ze.y4)}me?T.call(this):D.call(this,Be)},D=function(Q){switch(Q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(Q,X){this.pdf.internal.out(n(Q)+" "+r(X)+" m")},P=function(Q){var X;switch(Q.align){case"right":case"end":X="right";break;case"center":X="center";break;default:X="left"}var re,le,Ae,xe=this.pdf.getTextDimensions(Q.text),Be=I.call(this,Q.y),me=O.call(this,Be)-xe.h,ve=this.ctx.transform.applyToPoint(new a(Q.x,Be));if(this.autoPaging){var je=this.ctx.transform.decompose(),ye=new c;ye=(ye=(ye=ye.multiply(je.translate)).multiply(je.skew)).multiply(je.scale);for(var ze=this.ctx.transform.applyToRectangle(new l(Q.x,Be,xe.w,xe.h)),at=ye.applyToRectangle(new l(Q.x,me,xe.w,xe.h)),ie=x.call(this,at),Le=[],nt=0;nt<ie.length;nt+=1)Le.indexOf(ie[nt])===-1&&Le.push(ie[nt]);B(Le);for(var Et=Le[0],_e=Le[Le.length-1],ht=Et;ht<_e+1;ht++){this.pdf.setPage(ht);var ot=ht===1?this.posY+this.margin[0]:this.margin[0],$t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ht=kt-this.margin[0],Sn=this.pdf.internal.pageSize.width-this.margin[1],Ut=Sn-this.margin[3],en=ht===1?0:$t+(ht-2)*Ht;if(this.ctx.clip_path.length!==0){var fn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(re,this.posX+this.margin[3],-1*en+ot),j.call(this,"fill",!0),this.path=fn}var Qt=w([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-en+ot+this.ctx.prevPageLastElemOffset)[0];Q.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*Q.scale),Ae=this.lineWidth,this.lineWidth=Ae*Q.scale);var rn=this.autoPaging!=="text";if(rn||Qt.y+Qt.h<=kt){if(rn||Qt.y>=ot&&Qt.x<=Sn){var Yt=rn?Q.text:this.pdf.splitTextToSize(Q.text,Q.maxWidth||Sn-Qt.x)[0],sn=w([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-en+ot+this.ctx.prevPageLastElemOffset)[0],Fn=rn&&(ht>Et||ht<_e)&&y.call(this);Fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,Ht,null).clip().discardPath()),this.pdf.text(Yt,sn.x,sn.y,{angle:Q.angle,align:X,renderingMode:Q.renderingMode}),Fn&&this.pdf.restoreGraphicsState()}}else Qt.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-Qt.y);Q.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=Ae)}}else Q.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*Q.scale),Ae=this.lineWidth,this.lineWidth=Ae*Q.scale),this.pdf.text(Q.text,ve.x+this.posX,ve.y+this.posY,{angle:Q.angle,align:X,renderingMode:Q.renderingMode,maxWidth:Q.maxWidth}),Q.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=Ae)},z=function(Q,X,re,le){re=re||0,le=le||0,this.pdf.internal.out(n(Q+re)+" "+r(X+le)+" l")},U=function(Q,X,re){return this.pdf.lines(Q,X,re,null,null)},ee=function(Q,X,re,le,Ae,xe,Be,me){this.pdf.internal.out([e(s(re+Q)),e(i(le+X)),e(s(Ae+Q)),e(i(xe+X)),e(s(Be+Q)),e(i(me+X)),"c"].join(" "))},q=function(Q,X,re,le){for(var Ae=2*Math.PI,xe=Math.PI/2;X>re;)X-=Ae;var Be=Math.abs(re-X);Be<Ae&&le&&(Be=Ae-Be);for(var me=[],ve=le?-1:1,je=X;Be>1e-5;){var ye=je+ve*Math.min(Be,xe);me.push(Z.call(this,Q,je,ye)),Be-=Math.abs(ye-je),je=ye}return me},Z=function(Q,X,re){var le=(re-X)/2,Ae=Q*Math.cos(le),xe=Q*Math.sin(le),Be=Ae,me=-xe,ve=Be*Be+me*me,je=ve+Be*Ae+me*xe,ye=4/3*(Math.sqrt(2*ve*je)-je)/(Be*xe-me*Ae),ze=Be-ye*me,at=me+ye*Be,ie=ze,Le=-at,nt=le+X,Et=Math.cos(nt),_e=Math.sin(nt);return{x1:Q*Math.cos(X),y1:Q*Math.sin(X),x2:ze*Et-at*_e,y2:ze*_e+at*Et,x3:ie*Et-Le*_e,y3:ie*_e+Le*Et,x4:Q*Math.cos(re),y4:Q*Math.sin(re)}},G=function(Q){return 180*Q/Math.PI},ne=function(Q,X,re,le,Ae,xe){var Be=Q+.5*(re-Q),me=X+.5*(le-X),ve=Ae+.5*(re-Ae),je=xe+.5*(le-xe),ye=Math.min(Q,Ae,Be,ve),ze=Math.max(Q,Ae,Be,ve),at=Math.min(X,xe,me,je),ie=Math.max(X,xe,me,je);return new l(ye,at,ze-ye,ie-at)},K=function(Q,X,re,le,Ae,xe,Be,me){var ve,je,ye,ze,at,ie,Le,nt,Et,_e,ht,ot,$t,kt,Ht=re-Q,Sn=le-X,Ut=Ae-re,en=xe-le,fn=Be-Ae,Qt=me-xe;for(je=0;je<41;je++)Et=(Le=(ye=Q+(ve=je/40)*Ht)+ve*((at=re+ve*Ut)-ye))+ve*(at+ve*(Ae+ve*fn-at)-Le),_e=(nt=(ze=X+ve*Sn)+ve*((ie=le+ve*en)-ze))+ve*(ie+ve*(xe+ve*Qt-ie)-nt),je==0?(ht=Et,ot=_e,$t=Et,kt=_e):(ht=Math.min(ht,Et),ot=Math.min(ot,_e),$t=Math.max($t,Et),kt=Math.max(kt,_e));return new l(Math.round(ht),Math.round(ot),Math.round($t-ht),Math.round(kt-ot))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Q,X,re=(Q=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:Q,lineDashOffset:X}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Rn.API),(function(t){var e=function(a){var l,c,u,d,f,A,m,g,y,x;for(c=[],u=0,d=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;d>u;u+=4)(f=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(x=f%85))/85)-(y=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,c.push(A+33,m+33,g+33,y+33,x+33)):c.push(122);return(function(v,w){for(var B=w;B>0;B--)v.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(a){var l,c,u,d,f,A=String,m="length",g=255,y="charCodeAt",x="slice",v="replace";for(a[x](-2),a=a[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(a+=l="uuuuu"[x](a[m]%5||5))[m];f>d;d+=5)c=52200625*(a[y](d)-33)+614125*(a[y](d+1)-33)+7225*(a[y](d+2)-33)+85*(a[y](d+3)-33)+(a[y](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return(function(w,B){for(var k=B;k>0;k--)w.pop()})(u,l[m]),A.fromCharCode.apply(A,u)},r=function(a){return a.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var c="",u=0;u<a.length;u+=2)c+=String.fromCharCode("0x"+(a[u]+a[u+1]));return c},i=function(a){for(var l=new Uint8Array(a.length),c=a.length;c--;)l[c]=a.charCodeAt(c);return(l=b8(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,l){var c=0,u=a||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}})(Rn.API),(function(t){t.loadFile=function(e,n,r){return(function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=(function(c,u,d){var f=new XMLHttpRequest,A=0,m=function(g){var y=g.length,x=[],v=String.fromCharCode;for(A=0;A<y;A+=1)x.push(v(255&g.charCodeAt(A)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)})(s,i,a)}catch{}return l})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(Rn.API),(function(t){function e(){return(nr.html2canvas?Promise.resolve(nr.html2canvas):l6(()=>Promise.resolve().then(()=>lbt),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(nr.DOMPurify?Promise.resolve(nr.DOMPurify):l6(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=_s(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},a=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,c){return l.__proto__=c||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(n).then(function(u){return this.set({src:s("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var g=d[m],y=g.src.find(function(x){return x.format==="truetype"});y&&u.addFont(y.url,g.ref.name,g.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},a.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},a.prototype.get=function(l,c){return this.then(function(){var u=l in a.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},a.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},a.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:a.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return a.convert(A,d.__proto__)},a.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},a.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},a.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return a.convert(c,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Rn.getPageSize=function(l,c,u){if(_s(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,y=0,x=0;if(m.hasOwnProperty(A))y=m[A][1]/f,x=m[A][0]/f;else try{y=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>y&&(g=x,x=y,y=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",y>x&&(g=x,x=y,y=g)}return{width:x,height:y,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(B6):null;var u=new a(c);return c.worker?u:u.from(l).doCallback()}})(Rn.API),Rn.API.addJS=function(t){var e,n,r=t;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=n.internal.newObject();d.push(f);var A=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<d.length;i++)n.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])})(Rn.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,a,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=(function(f){for(var A,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,y={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(x+=m,e.indexOf(f.charCodeAt(x+1))!==-1){A=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),y={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:A,numcomponents:f.charCodeAt(x+9)};break}m=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return y})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:r,alias:s}}return d}})(Rn.API),Rn.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=Zpt(t,{checkCrc:!0}),a=i.width,l=i.height,c=i.channels,u=i.palette,d=i.depth;s=u&&c===1?(function(F){for(var D=F.width,T=F.height,N=F.data,P=F.palette,z=F.depth,U=!1,ee=[],q=[],Z=void 0,G=!1,ne=0,K=0;K<P.length;K++){var H=wX(P[K],4),Q=H[0],X=H[1],re=H[2],le=H[3];ee.push(Q,X,re),le!=null&&(le===0?(ne++,q.length<1&&q.push(K)):le<255&&(G=!0))}if(G||ne>1){U=!0,q=void 0;var Ae=D*T;Z=new Uint8Array(Ae);for(var xe=new DataView(N.buffer),Be=0;Be<Ae;Be++){var me=E6(xe,Be,z),ve=wX(P[me],4)[3];Z[Be]=ve}}else ne===0&&(q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:U?8:void 0,colorBytes:N,alphaBytes:Z,needSMask:U,palette:ee,mask:q}})(i):c===2||c===4?(function(F){for(var D=F.data,T=F.width,N=F.height,P=F.channels,z=F.depth,U=P===2?"DeviceGray":"DeviceRGB",ee=P-1,q=T*N,Z=ee,G=q*Z,ne=1*q,K=Math.ceil(G*z/8),H=Math.ceil(ne*z/8),Q=new Uint8Array(K),X=new Uint8Array(H),re=new DataView(D.buffer),le=new DataView(Q.buffer),Ae=new DataView(X.buffer),xe=!1,Be=0;Be<q;Be++){for(var me=Be*P,ve=0;ve<Z;ve++)kY(le,E6(re,me+ve,z),Be*Z+ve,z);var je=E6(re,me+Z,z);je<(1<<z)-1&&(xe=!0),kY(Ae,je,1*Be,z)}return{colorSpace:U,colorsPerPixel:ee,sMaskBitsPerComponent:xe?z:void 0,colorBytes:Q,alphaBytes:X,needSMask:xe}})(i):(function(F){var D=F.data,T=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?(function(N){for(var P=N.length,z=new Uint8Array(2*P),U=new DataView(z.buffer,z.byteOffset,z.byteLength),ee=0;ee<P;ee++)U.setUint16(2*ee,N[ee],!1);return z})(D):D,needSMask:!1}})(i);var f,A,m,g=s,y=g.colorSpace,x=g.colorsPerPixel,v=g.sMaskBitsPerComponent,w=g.colorBytes,B=g.alphaBytes,k=g.needSMask,j=g.palette,I=g.mask,O=null;return r!==Rn.API.image_compression.NONE&&typeof b8=="function"?(O=(function(F){var D;switch(F){case Rn.API.image_compression.FAST:D=11;break;case Rn.API.image_compression.MEDIUM:D=13;break;case Rn.API.image_compression.SLOW:D=14;break;default:D=12}return D})(r),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(O," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(a),t=bY(w,Math.ceil(a*x*d/8),x,d,r),k&&(m=bY(B,Math.ceil(a*v/8),1,v,r))):(f=void 0,A=void 0,t=w,k&&(m=B)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:t,index:e,filter:f,decodeParameters:A,transparency:I,palette:j,sMask:m,predictor:O,width:a,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:y}}},(function(t){t.processGIF89A=function(e,n,r,s){var i=new bmt(e),a=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:l},d=new I6(100).encode(u,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A})(Rn.API),Wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wd.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(n){Zs.log("bit decode error:"+n)}},Wd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Wd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Wd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Wd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,u=i>>15?255:0,d=r*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=u}this.pos+=t}},Wd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,c=(a>>5&n)/n*255|0,u=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Wd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Wd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=r,this.data[l+3]=a}},Wd.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,s){var i=new Wd(e,!1),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},u=new I6(100).encode(c,100);return t.processJPEG.call(this,u,n,r,s)}})(Rn.API),jY.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,s){var i=new jY(e),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},u=new I6(100).encode(c,100);return t.processJPEG.call(this,u,n,r,s)}})(Rn.API),Rn.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),l=0,c=0,u=0;u<s;u+=4){var d=r[u],f=r[u+1],A=r[u+2],m=r[u+3];i[l++]=d,i[l++]=f,i[l++]=A,a[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:g,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Rn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Py=Rn.API,Bk=Py.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,m=t.length,g=0,y=l[0]||c,x=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(A=f&&_s(u[r])==="object"&&!isNaN(parseInt(u[r][g],10))?u[r][g]/d:0,x.push((l[r]||y)/c+A)),g=r;return x},gY=Py.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Py.processArabic&&(t=Py.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:Bk.apply(this,arguments).reduce(function(i,a){return i+a},0)},yY=function(t,e,n,r){for(var s=[],i=0,a=t.length,l=0;i!==a&&l+e[i]<n;)l+=e[i],i++;s.push(t.slice(0,i));var c=i;for(l=0;i!==a;)l+e[i]>r&&(s.push(t.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&s.push(t.slice(c,i)),s},xY=function(t,e,n){n||(n={});var r,s,i,a,l,c,u,d=[],f=[d],A=n.textIndent||0,m=0,g=0,y=t.split(" "),x=Bk.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var v=Array(c).join(" "),w=[];y.map(function(k){(k=k.split(/\s*\n/)).length>1?w=w.concat(k.map(function(j,I){return(I&&j.length?`
`:"")+j})):w.push(k[0])}),y=w,c=gY.apply(this,[v,n])}for(i=0,a=y.length;i<a;i++){var B=0;if(r=y[i],c&&r[0]==`
`&&(r=r.substr(1),B=1),A+m+(g=(s=Bk.apply(this,[r,n])).reduce(function(k,j){return k+j},0))>e||B){if(g>e){for(l=yY.apply(this,[r,s,e-(A+m),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(k,j){return k+j},0)}else d=[r];f.push(d),A=g+c,m=x}else d.push(r),A+=m+g,m=x}return u=c?function(k,j){return(j?v:"")+k.join(" ")}:function(k){return k.join(" ")},f.map(u)},Py.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var l,c,u=[];for(l=0,c=r.length;l<c;l++)u=u.concat(xY.apply(this,[r[l],a,i]));return u},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},i=0;i<16;i++)r[n[i]]=e[i],s[e[i]]=n[i];var a=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var m,g,y,x,v=["{"];for(var w in A){if(m=A[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=a(w).slice(2)).slice(0,-1)+s[g.slice(-1)]),typeof m=="number")m<0?(y=a(m).slice(3),x="-"):(y=a(m).slice(2),x=""),y=x+y.slice(0,-1)+s[y.slice(-1)];else{if(_s(m)!=="object")throw new Error("Don't know what to do with value type "+_s(m)+".");y=l(m)}v.push(g+y)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,y,x,v={},w=1,B=v,k=[],j="",I="",O=A.length-1,F=1;F<O;F+=1)(x=A[F])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(k.push([B,y]),B={},y=void 0):x=="}"?((g=k.pop())[0][g[1]]=B,y=void 0,B=g[0]):x=="-"?w=-1:y===void 0?r.hasOwnProperty(x)?(j+=r[x],y=parseInt(j,16)*w,w=1,j=""):j+=x:r.hasOwnProperty(x)?(I+=r[x],B[y]=parseInt(I,16)*w,w=1,y=void 0,I=""):I+=x;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var m=A.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(Rn.API),(function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(NB(l)),a.metadata=t.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])})(Rn),Rn.API.addSvgAsImage=function(t,e,n,r,s,i,a,l){if(isNaN(e)||isNaN(n))throw Zs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Zs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(nr.canvg?Promise.resolve(nr.canvg):l6(()=>import("./index.es--GZpRxDT.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,n,r,s,a,l)})},Rn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},Rn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],u=0,d=0,f=0;function A(g,y){var x,v=!1;for(x=0;x<g.length;x+=1)g[x]===y&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=l.length;for(f=0;f<m;f+=1)n[l[f]].value=n[l[f]].defaultValue,n[l[f]].explicitSet=!1}if(_s(t)==="object"){for(s in t)if(i=t[s],A(l,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&A(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(r=!1);r===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,y=[];for(g in n)n[g].explicitSet===!0&&(n[g].type==="name"?y.push("/"+g+" /"+n[g].value):y.push("/"+g+" "+n[g].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},Rn.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",wmt),this.internal.events.subscribe("postPutResources",vmt)),this},(function(t){var e=t.API,n=e.pdfEscape16=function(i,a){for(var l,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=i.length;f<A;++f){if(l=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},r=function(i){var a,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<A;f++)a=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(u=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,u=a.newObject,d=a.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<A.length;g++)m+=String.fromCharCode(A[g]);var y=u();d({data:m,addLength1:!0,objectId:y}),c("endobj");var x=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+e1(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+e1(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+e1(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,u=a.newObject,d=a.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",m=0;m<f.length;m++)A+=String.fromCharCode(f[m]);var g=u();d({data:A,addLength1:!0,objectId:g}),c("endobj");var y=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+e1(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+e1(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},A=f.pdfEscape,m=f.activeFontKey,g=f.fonts,y=m,x="",v=0,w="",B=g[y].encoding;if(g[y].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,y=m,Array.isArray(l)&&(w=l[0]),v=0;v<w.length;v+=1)g[y].metadata.hasOwnProperty("cmap")&&(a=g[y].metadata.cmap.unicode.codeMap[w[v].charCodeAt(0)]),a||w[v].charCodeAt(0)<256&&g[y].metadata.hasOwnProperty("Unicode")?x+=w[v]:x+="";var k="";return parseInt(y.slice(1))<14||B==="WinAnsiEncoding"?k=A(x,y).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(k=n(x,g[y])),f.isHex=!0,{text:k,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",l=[],c={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?l.push([s(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):l.push(s(Object.assign({},c,{text:a[u]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:a})).text}])})(Rn),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Rn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,a,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,B=0;this.__bidiEngine__={};var k=function(N){var P=N.charCodeAt(),z=P>>8,U=y[z];return U!==void 0?f[256*U+(255&P)]:z===252||z===253?"AL":v.test(z)?"L":z===8?"R":"N"},j=function(N){for(var P,z=0;z<N.length;z++){if((P=k(N.charAt(z)))==="L")return!1;if(P==="R")return!0}return!1},I=function(N,P,z,U){var ee,q,Z,G,ne=P[U];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(ne="AN");break;case"AL":w=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":U<1||U+1>=P.length||(ee=z[U-1])!=="EN"&&ee!=="AN"||(q=P[U+1])!=="EN"&&q!=="AN"?ne="N":w&&(q="AN"),ne=q===ee?q:"N";break;case"ES":ne=(ee=U>0?z[U-1]:"B")==="EN"&&U+1<P.length&&P[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&z[U-1]==="EN"){ne="EN";break}if(w){ne="N";break}for(Z=U+1,G=P.length;Z<G&&P[Z]==="ET";)Z++;ne=Z<G&&P[Z]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(G=P.length,Z=U+1;Z<G&&P[Z]==="NSM";)Z++;if(Z<G){var K=N[U],H=K>=1425&&K<=2303||K===64286;if(ee=P[Z],H&&(ee==="R"||ee==="AL")){ne="R";break}}}ne=U<1||(ee=P[U-1])==="B"?"N":z[U-1];break;case"B":w=!1,s=!0,ne=B;break;case"S":i=!0,ne="N"}return ne},O=function(N,P,z){var U=N.split("");return z&&F(U,z,{hiLevel:B}),U.reverse(),P&&P.reverse(),U.join("")},F=function(N,P,z){var U,ee,q,Z,G,ne=-1,K=N.length,H=0,Q=[],X=B?m:A,re=[];for(w=!1,s=!1,i=!1,ee=0;ee<K;ee++)re[ee]=k(N[ee]);for(q=0;q<K;q++){if(G=H,Q[q]=I(N,re,Q,q),U=240&(H=X[G][g[Q[q]]]),H&=15,P[q]=Z=X[H][5],U>0)if(U===16){for(ee=ne;ee<q;ee++)P[ee]=1;ne=-1}else ne=-1;if(X[H][6])ne===-1&&(ne=q);else if(ne>-1){for(ee=ne;ee<q;ee++)P[ee]=Z;ne=-1}re[q]==="B"&&(P[q]=0),z.hiLevel|=Z}i&&(function(le,Ae,xe){for(var Be=0;Be<xe;Be++)if(le[Be]==="S"){Ae[Be]=B;for(var me=Be-1;me>=0&&le[me]==="WS";me--)Ae[me]=B}})(re,P,K)},D=function(N,P,z,U,ee){if(!(ee.hiLevel<N)){if(N===1&&B===1&&!s)return P.reverse(),void(z&&z.reverse());for(var q,Z,G,ne,K=P.length,H=0;H<K;){if(U[H]>=N){for(G=H+1;G<K&&U[G]>=N;)G++;for(ne=H,Z=G-1;ne<Z;ne++,Z--)q=P[ne],P[ne]=P[Z],P[Z]=q,z&&(q=z[ne],z[ne]=z[Z],z[Z]=q);H=G}H++}}},T=function(N,P,z){var U=N.split(""),ee={hiLevel:B};return z||(z=[]),F(U,z,ee),(function(q,Z,G){if(G.hiLevel!==0&&d)for(var ne,K=0;K<q.length;K++)Z[K]===1&&(ne=x.indexOf(q[K]))>=0&&(q[K]=x[ne+1])})(U,z,ee),D(2,U,P,z,ee),D(1,U,P,z,ee),U.join("")};return this.__bidiEngine__.doBidiReorder=function(N,P,z){if((function(ee,q){if(q)for(var Z=0;Z<ee.length;Z++)q[Z]=Z;l===void 0&&(l=j(ee)),u===void 0&&(u=j(ee))})(N,P),a||!c||u)if(a&&c&&l^u)B=l?1:0,N=O(N,P,z);else if(!a&&c&&u)B=l?1:0,N=T(N,P,z),N=O(N,P);else if(!a||l||c||u){if(a&&!c&&l^u)N=O(N,P),l?(B=0,N=T(N,P,z)):(B=1,N=T(N,P,z),N=O(N,P));else if(a&&l&&!c&&u)B=1,N=T(N,P,z),N=O(N,P);else if(!a&&!c&&l^u){var U=d;l?(B=1,N=T(N,P,z),B=0,d=!1,N=T(N,P,z),d=U):(B=0,N=T(N,P,z),N=O(N,P),B=1,d=!1,N=T(N,P,z),d=U,N=O(N,P))}}else B=0,N=T(N,P,z);else B=l?1:0,N=T(N,P,z);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,c=N.isOutputVisual,l=N.isInputRtl,u=N.isOutputRtl,d=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(a=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?a.push([n.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):a.push([n.doBidiReorder(s[l])]);r.text=a}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])})(Rn),Rn.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new _m(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Lmt(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Smt(this.contents),this.head=new kmt(this),this.name=new Nmt(this),this.cmap=new mhe(this),this.toUnicode={},this.hhea=new Bmt(this),this.maxp=new Tmt(this),this.hmtx=new _mt(this),this.post=new Emt(this),this.os2=new jmt(this),this.loca=new Dmt(this),this.glyf=new Rmt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,u;for(u=[],a=0,l=(c=this.bbox).length;a<l;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,a,l;for(a=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var jf,_m=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,a,l,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*a+256*l+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t})(),Smt=(function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,a,l,c,u,d,f,A,m,g,y;for(y in m=Object.keys(n).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),a=Math.floor(f/c),d=16*m-f,(s=new _m).writeInt(this.scalarType),s.writeShort(m),s.writeShort(f),s.writeShort(a),s.writeShort(d),i=16*m,u=s.pos+i,l=null,g=[],n)for(A=n[y],s.writeString(y),s.writeInt(t(A)),s.writeInt(u),s.writeInt(A.length),g=g.concat(A),y==="head"&&(l=u),u+=A.length;u%4;)g.push(0),u++;return s.write(g),r=2981146554-t(s.data),s.pos=l+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,a;for(n=ghe.call(n);n.length%4;)n.push(0);for(i=new _m(n),s=0,r=0,a=n.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e})(),Cmt={}.hasOwnProperty,Th=function(t,e){for(var n in e)Cmt.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};jf=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var kmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new _m).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),EY=(function(){function t(e,n){var r,s,i,a,l,c,u,d,f,A,m,g,y,x,v,w,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),A=m/2,e.pos+=6,i=(function(){var k,j;for(j=[],c=k=0;0<=A?k<A:k>A;c=0<=A?++k:--k)j.push(e.readUInt16());return j})(),e.pos+=2,y=(function(){var k,j;for(j=[],c=k=0;0<=A?k<A:k>A;c=0<=A?++k:--k)j.push(e.readUInt16());return j})(),u=(function(){var k,j;for(j=[],c=k=0;0<=A?k<A:k>A;c=0<=A?++k:--k)j.push(e.readUInt16());return j})(),d=(function(){var k,j;for(j=[],c=k=0;0<=A?k<A:k>A;c=0<=A?++k:--k)j.push(e.readUInt16());return j})(),s=(this.length-e.pos+this.offset)/2,l=(function(){var k,j;for(j=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)j.push(e.readUInt16());return j})(),c=v=0,B=i.length;v<B;c=++v)for(x=i[c],r=w=g=y[c];g<=x?w<=x:w>=x;r=g<=x?++w:--w)d[c]===0?a=r+u[c]:(a=l[d[c]/2+(r-g)-(A-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=f}return t.encode=function(e,n){var r,s,i,a,l,c,u,d,f,A,m,g,y,x,v,w,B,k,j,I,O,F,D,T,N,P,z,U,ee,q,Z,G,ne,K,H,Q,X,re,le,Ae,xe,Be,me,ve,je,ye;switch(U=new _m,a=Object.keys(e).sort(function(ze,at){return ze-at}),n){case"macroman":for(y=0,x=(function(){var ze=[];for(g=0;g<256;++g)ze.push(0);return ze})(),w={0:0},i={},ee=0,ne=a.length;ee<ne;ee++)w[me=e[s=a[ee]]]==null&&(w[me]=++y),i[s]={old:e[s],new:w[e[s]]},x[s]=w[e[s]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(x),{charMap:i,subtable:U.data,maxGlyphID:y+1};case"unicode":for(P=[],f=[],B=0,w={},r={},v=u=null,q=0,K=a.length;q<K;q++)w[j=e[s=a[q]]]==null&&(w[j]=++B),r[s]={old:j,new:w[j]},l=w[j]-s,v!=null&&l===u||(v&&f.push(v),P.push(s),u=l),v=s;for(v&&f.push(v),f.push(65535),P.push(65535),T=2*(D=P.length),F=2*Math.pow(Math.log(D)/Math.LN2,2),A=Math.log(F/2)/Math.LN2,O=2*D-F,c=[],I=[],m=[],g=Z=0,H=P.length;Z<H;g=++Z){if(N=P[g],d=f[g],N===65535){c.push(0),I.push(0);break}if(N-(z=r[N].new)>=32768)for(c.push(0),I.push(2*(m.length+D-g)),s=G=N;N<=d?G<=d:G>=d;s=N<=d?++G:--G)m.push(r[s].new);else c.push(z-N),I.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*D+2*m.length),U.writeUInt16(0),U.writeUInt16(T),U.writeUInt16(F),U.writeUInt16(A),U.writeUInt16(O),xe=0,Q=f.length;xe<Q;xe++)s=f[xe],U.writeUInt16(s);for(U.writeUInt16(0),Be=0,X=P.length;Be<X;Be++)s=P[Be],U.writeUInt16(s);for(ve=0,re=c.length;ve<re;ve++)l=c[ve],U.writeUInt16(l);for(je=0,le=I.length;je<le;je++)k=I[je],U.writeUInt16(k);for(ye=0,Ae=m.length;ye<Ae;ye++)y=m[ye],U.writeUInt16(y);return{charMap:r,subtable:U.data,maxGlyphID:B+1}}},t})(),mhe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new EY(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,s;return n==null&&(n="macroman"),r=EY.encode(e,n),(s=new _m).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},t})(),Bmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),jmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Emt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)n=e.readByte(),s.push(this.names.push(e.readString(n)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var a,l,c;for(c=[],i=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;i=0<=l?++a:--a)c.push(e.readUInt32());return c}).call(this)}},t})(),Imt=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Nmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,s,i,a,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),n=e.readShort(),l=e.readShort(),r=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},i=d=0,f=r.length;d<f;i=++d)s=r[i],e.pos=s.offset,u=e.readString(s.length),a=new Imt(u,s),c[A=s.nameID]==null&&(c[A]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),Tmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),_mt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,s,i,a,l,c;for(e.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,d;for(d=[],n=u=0;0<=s?u<s:u>s;n=0<=s?++u:--u)d.push(e.readInt16());return d})(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],A.push(i.advance);return A}).call(this),r=this.widths[this.widths.length-1],c=[],n=a=0;0<=s?a<s:a>s;n=0<=s?++a:--a)c.push(this.widths.push(r));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),ghe=[].slice,Rmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,s,i,a,l,c,u,d,f;return e in this.cache?this.cache[e]:(i=this.file.loca,n=this.file.contents,r=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,a=(l=new _m(n.read(s))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=a===-1?new Fmt(l,u,f,c,d):new Omt(l,a,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var s,i,a,l,c;for(a=[],i=[],l=0,c=n.length;l<c;l++)s=e[n[l]],i.push(a.length),s&&(a=a.concat(s.encode(r)));return i.push(a.length),{table:a,offsets:i}},t})(),Omt=(function(){function t(e,n,r,s,i,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),Fmt=(function(){function t(e,n,r,s,i){var a,l;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new _m(ghe.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),Dmt=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Th(t,jf),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<r.length;++a)if(r[a]=s,i<n.length&&n[i]==a){++i,r[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t})(),Lmt=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,a,l,c;for(s={},a=0,l=e.length;a<l;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))r=c[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,a,l,c,u,d,f,A,m,g,y,x,v;for(s in r=mhe.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},v=r.charMap)m[(c=v[s]).old]=c.new;for(g in A=r.maxGlyphID,a)g in m||(m[g]=A++);return d=(function(w){var B,k;for(B in k={},w)k[w[B]]=B;return k})(m),f=Object.keys(d).sort(function(w,B){return w-B}),y=(function(){var w,B,k;for(k=[],w=0,B=f.length;w<B;w++)l=f[w],k.push(d[l]);return k})(),i=this.font.glyf.encode(a,y,m),u=this.font.loca.encode(i.offsets,y),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t})();Rn.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,a;if(Array.isArray(n))return"["+(function(){var l,c,u;for(u=[],l=0,c=n.length;l<c;l++)r=n[l],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)a=n[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+n},e})();var E8=function(t,e){return E8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},E8(t,e)};function Ef(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E8(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var I8=function(){return I8=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I8.apply(this,arguments)};function Hl(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,[])).next())})}function wl(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function jk(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var HA=(function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t})(),hN=function(t,e){return HA.fromClientRect(t,e.getBoundingClientRect())},$mt=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new HA(0,0,r,s)},AN=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},_a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},IY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pmt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ek=0;Ek<IY.length;Ek++)Pmt[IY.charCodeAt(Ek)]=Ek;var NY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ik=0;Ik<NY.length;Ik++)a2[NY.charCodeAt(Ik)]=Ik;var zmt=function(t){var e=t.length*.75,n=t.length,r,s=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)i=a2[t.charCodeAt(r)],a=a2[t.charCodeAt(r+1)],l=a2[t.charCodeAt(r+2)],c=a2[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},Umt=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Mmt=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Kg=5,NU=11,N6=2,Qmt=NU-Kg,yhe=65536>>Kg,Hmt=1<<Kg,T6=Hmt-1,Wmt=1024>>Kg,Vmt=yhe+Wmt,qmt=Vmt,Gmt=32,Kmt=qmt+Gmt,Xmt=65536>>NU,Ymt=1<<Qmt,Jmt=Ymt-1,TY=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Zmt=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},egt=function(t,e){var n=zmt(t),r=Array.isArray(n)?Mmt(n):new Uint32Array(n),s=Array.isArray(n)?Umt(n):new Uint16Array(n),i=24,a=TY(s,i/2,r[4]/2),l=r[5]===2?TY(s,(i+r[4])/2):Zmt(r,Math.ceil((i+r[4])/4));return new tgt(r[0],r[1],r[2],r[3],a,l)},tgt=(function(){function t(e,n,r,s,i,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Kg],n=(n<<N6)+(e&T6),this.data[n];if(e<=65535)return n=this.index[yhe+(e-55296>>Kg)],n=(n<<N6)+(e&T6),this.data[n];if(e<this.highStart)return n=Kmt-Xmt+(e>>NU),n=this.index[n],n+=e>>Kg&Jmt,n=this.index[n],n=(n<<N6)+(e&T6),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t})(),_Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ngt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nk=0;Nk<_Y.length;Nk++)ngt[_Y.charCodeAt(Nk)]=Nk;var rgt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",RY=50,sgt=1,xhe=2,bhe=3,igt=4,agt=5,OY=7,vhe=8,FY=9,Zp=10,N8=11,DY=12,T8=13,ogt=14,o2=15,_8=16,Tk=17,$v=18,lgt=19,LY=20,R8=21,Pv=22,_6=23,zy=24,ou=25,l2=26,c2=27,Uy=28,cgt=29,jg=30,ugt=31,_k=32,Rk=33,O8=34,F8=35,D8=36,Aw=37,L8=38,FB=39,DB=40,R6=41,whe=42,dgt=43,fgt=[9001,65288],She="!",Qr="",Ok="",$8=egt(rgt),iA=[jg,D8],P8=[sgt,xhe,bhe,agt],Che=[Zp,vhe],$Y=[c2,l2],hgt=P8.concat(Che),PY=[L8,FB,DB,O8,F8],Agt=[o2,T8],pgt=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,a){var l=$8.get(i);if(l>RY?(s.push(!0),l-=RY):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(a),n.push(_8);if(l===igt||l===N8){if(a===0)return r.push(a),n.push(jg);var c=n[a-1];return hgt.indexOf(c)===-1?(r.push(r[a-1]),n.push(c)):(r.push(a),n.push(jg))}if(r.push(a),l===ugt)return n.push(e==="strict"?R8:Aw);if(l===whe||l===cgt)return n.push(jg);if(l===dgt)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(Aw):n.push(jg);n.push(l)}),[r,n,s]},O6=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var a=r[i];if(a===e)return!0;if(a!==Zp)break}if(s===Zp)for(var i=n;i>0;){i--;var l=r[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=n;c<=r.length;){c++;var a=r[c];if(a===e)return!0;if(a!==Zp)break}if(l!==Zp)break}return!1},zY=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Zp)n--;else return r}return 0},mgt=function(t,e,n,r,s){if(n[r]===0)return Qr;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return Qr;var a=i-1,l=i+1,c=e[i],u=a>=0?e[a]:0,d=e[l];if(c===xhe&&d===bhe)return Qr;if(P8.indexOf(c)!==-1)return She;if(P8.indexOf(d)!==-1||Che.indexOf(d)!==-1)return Qr;if(zY(i,e)===vhe)return Ok;if($8.get(t[i])===N8||(c===_k||c===Rk)&&$8.get(t[l])===N8||c===OY||d===OY||c===FY||[Zp,T8,o2].indexOf(c)===-1&&d===FY||[Tk,$v,lgt,zy,Uy].indexOf(d)!==-1||zY(i,e)===Pv||O6(_6,Pv,i,e)||O6([Tk,$v],R8,i,e)||O6(DY,DY,i,e))return Qr;if(c===Zp)return Ok;if(c===_6||d===_6)return Qr;if(d===_8||c===_8)return Ok;if([T8,o2,R8].indexOf(d)!==-1||c===ogt||u===D8&&Agt.indexOf(c)!==-1||c===Uy&&d===D8||d===LY||iA.indexOf(d)!==-1&&c===ou||iA.indexOf(c)!==-1&&d===ou||c===c2&&[Aw,_k,Rk].indexOf(d)!==-1||[Aw,_k,Rk].indexOf(c)!==-1&&d===l2||iA.indexOf(c)!==-1&&$Y.indexOf(d)!==-1||$Y.indexOf(c)!==-1&&iA.indexOf(d)!==-1||[c2,l2].indexOf(c)!==-1&&(d===ou||[Pv,o2].indexOf(d)!==-1&&e[l+1]===ou)||[Pv,o2].indexOf(c)!==-1&&d===ou||c===ou&&[ou,Uy,zy].indexOf(d)!==-1)return Qr;if([ou,Uy,zy,Tk,$v].indexOf(d)!==-1)for(var f=i;f>=0;){var A=e[f];if(A===ou)return Qr;if([Uy,zy].indexOf(A)!==-1)f--;else break}if([c2,l2].indexOf(d)!==-1)for(var f=[Tk,$v].indexOf(c)!==-1?a:i;f>=0;){var A=e[f];if(A===ou)return Qr;if([Uy,zy].indexOf(A)!==-1)f--;else break}if(L8===c&&[L8,FB,O8,F8].indexOf(d)!==-1||[FB,O8].indexOf(c)!==-1&&[FB,DB].indexOf(d)!==-1||[DB,F8].indexOf(c)!==-1&&d===DB||PY.indexOf(c)!==-1&&[LY,l2].indexOf(d)!==-1||PY.indexOf(d)!==-1&&c===c2||iA.indexOf(c)!==-1&&iA.indexOf(d)!==-1||c===zy&&iA.indexOf(d)!==-1||iA.concat(ou).indexOf(c)!==-1&&d===Pv&&fgt.indexOf(t[l])===-1||iA.concat(ou).indexOf(d)!==-1&&c===$v)return Qr;if(c===R6&&d===R6){for(var m=n[i],g=1;m>0&&(m--,e[m]===R6);)g++;if(g%2!==0)return Qr}return c===_k&&d===Rk?Qr:Ok},ggt=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=pgt(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[ou,jg,whe].indexOf(l)!==-1?Aw:l}));var a=e.wordBreak==="keep-all"?i.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[r,s,a]},ygt=(function(){function t(e,n,r,s){this.codePoints=e,this.required=n===She,this.start=r,this.end=s}return t.prototype.slice=function(){return _a.apply(void 0,this.codePoints.slice(this.start,this.end))},t})(),xgt=function(t,e){var n=AN(t),r=ggt(n,e),s=r[0],i=r[1],a=r[2],l=n.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Qr;u<l&&(d=mgt(n,i,s,++u,a))===Qr;);if(d!==Qr||u===l){var f=new ygt(n,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},bgt=1,vgt=2,LS=4,UY=8,kj=10,MY=47,b2=92,wgt=9,Sgt=32,Fk=34,zv=61,Cgt=35,kgt=36,Bgt=37,Dk=39,Lk=40,Uv=41,jgt=95,Nc=45,Egt=33,Igt=60,Ngt=62,Tgt=64,_gt=91,Rgt=93,Ogt=61,Fgt=123,$k=63,Dgt=125,QY=124,Lgt=126,$gt=128,HY=65533,F6=42,Fg=43,Pgt=44,zgt=58,Ugt=59,pw=46,Mgt=0,Qgt=8,Hgt=11,Wgt=14,Vgt=31,qgt=127,Gf=-1,khe=48,Bhe=97,jhe=101,Ggt=102,Kgt=117,Xgt=122,Ehe=65,Ihe=69,Nhe=70,Ygt=85,Jgt=90,Bl=function(t){return t>=khe&&t<=57},Zgt=function(t){return t>=55296&&t<=57343},My=function(t){return Bl(t)||t>=Ehe&&t<=Nhe||t>=Bhe&&t<=Ggt},e0t=function(t){return t>=Bhe&&t<=Xgt},t0t=function(t){return t>=Ehe&&t<=Jgt},n0t=function(t){return e0t(t)||t0t(t)},r0t=function(t){return t>=$gt},Pk=function(t){return t===kj||t===wgt||t===Sgt},Bj=function(t){return n0t(t)||r0t(t)||t===jgt},WY=function(t){return Bj(t)||Bl(t)||t===Nc},s0t=function(t){return t>=Mgt&&t<=Qgt||t===Hgt||t>=Wgt&&t<=Vgt||t===qgt},Wp=function(t,e){return t!==b2?!1:e!==kj},zk=function(t,e,n){return t===Nc?Bj(e)||Wp(e,n):Bj(t)?!0:!!(t===b2&&Wp(t,e))},D6=function(t,e,n){return t===Fg||t===Nc?Bl(e)?!0:e===pw&&Bl(n):Bl(t===pw?e:t)},i0t=function(t){var e=0,n=1;(t[e]===Fg||t[e]===Nc)&&(t[e]===Nc&&(n=-1),e++);for(var r=[];Bl(t[e]);)r.push(t[e++]);var s=r.length?parseInt(_a.apply(void 0,r),10):0;t[e]===pw&&e++;for(var i=[];Bl(t[e]);)i.push(t[e++]);var a=i.length,l=a?parseInt(_a.apply(void 0,i),10):0;(t[e]===Ihe||t[e]===jhe)&&e++;var c=1;(t[e]===Fg||t[e]===Nc)&&(t[e]===Nc&&(c=-1),e++);for(var u=[];Bl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(_a.apply(void 0,u),10):0;return n*(s+l*Math.pow(10,-a))*Math.pow(10,c*d)},a0t={type:2},o0t={type:3},l0t={type:4},c0t={type:13},u0t={type:8},d0t={type:21},f0t={type:9},h0t={type:10},A0t={type:11},p0t={type:12},m0t={type:14},Uk={type:23},g0t={type:1},y0t={type:25},x0t={type:24},b0t={type:26},v0t={type:27},w0t={type:28},S0t={type:29},C0t={type:31},z8={type:32},The=(function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(AN(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==z8;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Fk:return this.consumeStringToken(Fk);case Cgt:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(WY(n)||Wp(r,s)){var i=zk(n,r,s)?vgt:bgt,a=this.consumeName();return{type:5,value:a,flags:i}}break;case kgt:if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),c0t;break;case Dk:return this.consumeStringToken(Dk);case Lk:return a0t;case Uv:return o0t;case F6:if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),m0t;break;case Fg:if(D6(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Pgt:return l0t;case Nc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(D6(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(zk(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Nc&&u===Ngt)return this.consumeCodePoint(),this.consumeCodePoint(),x0t;break;case pw:if(D6(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case MY:if(this.peekCodePoint(0)===F6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===F6&&(d=this.consumeCodePoint(),d===MY))return this.consumeToken();if(d===Gf)return this.consumeToken()}break;case zgt:return b0t;case Ugt:return v0t;case Igt:if(this.peekCodePoint(0)===Egt&&this.peekCodePoint(1)===Nc&&this.peekCodePoint(2)===Nc)return this.consumeCodePoint(),this.consumeCodePoint(),y0t;break;case Tgt:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),m=this.peekCodePoint(2);if(zk(f,A,m)){var a=this.consumeName();return{type:7,value:a}}break;case _gt:return w0t;case b2:if(Wp(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Rgt:return S0t;case Ogt:if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),u0t;break;case Fgt:return A0t;case Dgt:return p0t;case Kgt:case Ygt:var g=this.peekCodePoint(0),y=this.peekCodePoint(1);return g===Fg&&(My(y)||y===$k)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case QY:if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),f0t;if(this.peekCodePoint(0)===QY)return this.consumeCodePoint(),d0t;break;case Lgt:if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),h0t;break;case Gf:return z8}return Pk(e)?(this.consumeWhiteSpace(),C0t):Bl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Bj(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:_a(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();My(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===$k&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(_a.apply(void 0,e.map(function(c){return c===$k?khe:c})),16),i=parseInt(_a.apply(void 0,e.map(function(c){return c===$k?Nhe:c})),16);return{type:30,start:s,end:i}}var a=parseInt(_a.apply(void 0,e),16);if(this.peekCodePoint(0)===Nc&&My(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];My(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var i=parseInt(_a.apply(void 0,l),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Lk?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Lk?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gf)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Dk||n===Fk){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gf||this.peekCodePoint(0)===Uv)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Uk)}for(;;){var s=this.consumeCodePoint();if(s===Gf||s===Uv)return{type:22,value:_a.apply(void 0,e)};if(Pk(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Gf||this.peekCodePoint(0)===Uv?(this.consumeCodePoint(),{type:22,value:_a.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Uk);if(s===Fk||s===Dk||s===Lk||s0t(s))return this.consumeBadUrlRemnants(),Uk;if(s===b2)if(Wp(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Uk;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Pk(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Uv||e===Gf)return;Wp(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=_a.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Gf||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===kj)return this._value.splice(0,r),g0t;if(s===b2){var i=this._value[r+1];i!==Gf&&i!==void 0&&(i===kj?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Wp(s,i)&&(n+=this.consumeStringSlice(r),n+=_a(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=LS,r=this.peekCodePoint(0);for((r===Fg||r===Nc)&&e.push(this.consumeCodePoint());Bl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===pw&&Bl(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=UY;Bl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===Ihe||r===jhe)&&((s===Fg||s===Nc)&&Bl(i)||Bl(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=UY;Bl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[i0t(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(zk(s,i,a)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return s===Bgt?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(My(e)){for(var n=_a(e);My(this.peekCodePoint(0))&&n.length<6;)n+=_a(this.consumeCodePoint());Pk(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||Zgt(r)||r>1114111?HY:r}return e===Gf?HY:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(WY(n))e+=_a(n);else if(Wp(n,this.peekCodePoint(0)))e+=_a(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t})(),_he=(function(){function t(e){this._tokens=e}return t.create=function(e){var n=new The;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||B0t(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?z8:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t})(),$S=function(t){return t.type===15},_b=function(t){return t.type===17},Ws=function(t){return t.type===20},k0t=function(t){return t.type===0},U8=function(t,e){return Ws(t)&&t.value===e},Rhe=function(t){return t.type!==31},K1=function(t){return t.type!==31&&t.type!==4},_h=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},B0t=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Rm=function(t){return t.type===17||t.type===15},Ha=function(t){return t.type===16||Rm(t)},Ohe=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},cl={type:17,number:0,flags:LS},TU={type:16,number:50,flags:LS},em={type:16,number:100,flags:LS},u2=function(t,e,n){var r=t[0],s=t[1];return[oi(r,e),oi(typeof s<"u"?s:r,n)]},oi=function(t,e){if(t.type===16)return t.number/100*e;if($S(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},Fhe="deg",Dhe="grad",Lhe="rad",$he="turn",pN={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Fhe:return Math.PI*e.number/180;case Dhe:return Math.PI/200*e.number;case Lhe:return e.number;case $he:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Phe=function(t){return t.type===15&&(t.unit===Fhe||t.unit===Dhe||t.unit===Lhe||t.unit===$he)},zhe=function(t){var e=t.filter(Ws).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[cl,cl];case"to top":case"bottom":return sd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[cl,em];case"to right":case"left":return sd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[em,em];case"to bottom":case"top":return sd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[em,cl];case"to left":case"right":return sd(270)}return 0},sd=function(t){return Math.PI*t/180},dm={name:"color",parse:function(t,e){if(e.type===18){var n=j0t[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return tm(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return tm(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return tm(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return tm(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var l=kA[e.value.toUpperCase()];if(typeof l<"u")return l}return kA.TRANSPARENT}},fm=function(t){return(255&t)===0},_o=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},tm=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},VY=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},qY=function(t,e){var n=e.filter(K1);if(n.length===3){var r=n.map(VY),s=r[0],i=r[1],a=r[2];return tm(s,i,a,1)}if(n.length===4){var l=n.map(VY),s=l[0],i=l[1],a=l[2],c=l[3];return tm(s,i,a,c)}return 0};function L6(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var GY=function(t,e){var n=e.filter(K1),r=n[0],s=n[1],i=n[2],a=n[3],l=(r.type===17?sd(r.number):pN.parse(t,r))/(Math.PI*2),c=Ha(s)?s.number/100:0,u=Ha(i)?i.number/100:0,d=typeof a<"u"&&Ha(a)?oi(a,1):1;if(c===0)return tm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,m=L6(A,f,l+1/3),g=L6(A,f,l),y=L6(A,f,l-1/3);return tm(m*255,g*255,y*255,d)},j0t={hsl:GY,hsla:GY,rgb:qY,rgba:qY},v2=function(t,e){return dm.parse(t,_he.create(e).parseComponentValue())},kA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},E0t={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Ws(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},I0t={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mN=function(t,e){var n=dm.parse(t,e[0]),r=e[1];return r&&Ha(r)?{color:n,stop:r}:{color:n,stop:null}},KY=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=cl),r.stop===null&&(r.stop=em);for(var s=[],i=0,a=0;a<t.length;a++){var l=t[a].stop;if(l!==null){var c=oi(l,e);c>i?s.push(c):s.push(i),i=c}else s.push(null)}for(var u=null,a=0;a<s.length;a++){var d=s[a];if(d===null)u===null&&(u=a);else if(u!==null){for(var f=a-u,A=s[u-1],m=(d-A)/(f+1),g=1;g<=f;g++)s[u+g-1]=m*g;u=null}}return t.map(function(y,x){var v=y.color;return{color:v,stop:Math.max(Math.min(1,s[x]/e),0)}})},N0t=function(t,e,n){var r=e/2,s=n/2,i=oi(t[0],e)-r,a=s-oi(t[1],n);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},T0t=function(t,e,n){var r=typeof t=="number"?t:N0t(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,a=n/2,l=s/2,c=Math.sin(r-Math.PI/2)*l,u=Math.cos(r-Math.PI/2)*l;return[s,i-u,i+u,a-c,a+c]},qd=function(t,e){return Math.sqrt(t*t+e*e)},XY=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,l){var c=l[0],u=l[1],d=qd(n-c,r-u);return(s?d<a.optimumDistance:d>a.optimumDistance)?{optimumCorner:l,optimumDistance:d}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},_0t=function(t,e,n,r,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=a=Math.min(qd(e,n),qd(e,n-s),qd(e-r,n),qd(e-r,n-s));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),c=XY(r,s,e,n,!0),u=c[0],d=c[1];i=qd(u-e,(d-n)/l),a=l*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=a=Math.max(qd(e,n),qd(e,n-s),qd(e-r,n),qd(e-r,n-s));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),f=XY(r,s,e,n,!1),u=f[0],d=f[1];i=qd(u-e,(d-n)/l),a=l*i}break}return Array.isArray(t.size)&&(i=oi(t.size[0],r),a=t.size.length===2?oi(t.size[1],s):i),[i,a]},R0t=function(t,e){var n=sd(180),r=[];return _h(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){n=zhe(s);return}else if(Phe(a)){n=pN.parse(t,a);return}}var l=mN(t,s);r.push(l)}),{angle:n,stops:r,type:1}},Mk=function(t,e){var n=sd(180),r=[];return _h(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){n=zhe(s);return}else if(Phe(a)){n=(pN.parse(t,a)+sd(270))%sd(360);return}}var l=mN(t,s);r.push(l)}),{angle:n,stops:r,type:1}},O0t=function(t,e){var n=sd(180),r=[],s=1,i=0,a=3,l=[];return _h(e).forEach(function(c,u){var d=c[0];if(u===0){if(Ws(d)&&d.value==="linear"){s=1;return}else if(Ws(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var f=dm.parse(t,d.values[0]);r.push({stop:cl,color:f})}else if(d.name==="to"){var f=dm.parse(t,d.values[0]);r.push({stop:em,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(K1);if(A.length===2){var f=dm.parse(t,A[1]),m=A[0];_b(m)&&r.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),s===1?{angle:(n+sd(180))%sd(360),stops:r,type:s}:{size:a,shape:i,stops:r,position:l,type:s}},Uhe="closest-side",Mhe="farthest-side",Qhe="closest-corner",Hhe="farthest-corner",Whe="circle",Vhe="ellipse",qhe="cover",Ghe="contain",F0t=function(t,e){var n=0,r=3,s=[],i=[];return _h(e).forEach(function(a,l){var c=!0;if(l===0){var u=!1;c=a.reduce(function(f,A){if(u)if(Ws(A))switch(A.value){case"center":return i.push(TU),f;case"top":case"left":return i.push(cl),f;case"right":case"bottom":return i.push(em),f}else(Ha(A)||Rm(A))&&i.push(A);else if(Ws(A))switch(A.value){case Whe:return n=0,!1;case Vhe:return n=1,!1;case"at":return u=!0,!1;case Uhe:return r=0,!1;case qhe:case Mhe:return r=1,!1;case Ghe:case Qhe:return r=2,!1;case Hhe:return r=3,!1}else if(Rm(A)||Ha(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return f},c)}if(c){var d=mN(t,a);s.push(d)}}),{size:r,shape:n,stops:s,position:i,type:2}},Qk=function(t,e){var n=0,r=3,s=[],i=[];return _h(e).forEach(function(a,l){var c=!0;if(l===0?c=a.reduce(function(d,f){if(Ws(f))switch(f.value){case"center":return i.push(TU),!1;case"top":case"left":return i.push(cl),!1;case"right":case"bottom":return i.push(em),!1}else if(Ha(f)||Rm(f))return i.push(f),!1;return d},c):l===1&&(c=a.reduce(function(d,f){if(Ws(f))switch(f.value){case Whe:return n=0,!1;case Vhe:return n=1,!1;case Ghe:case Uhe:return r=0,!1;case Mhe:return r=1,!1;case Qhe:return r=2,!1;case qhe:case Hhe:return r=3,!1}else if(Rm(f)||Ha(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return d},c)),c){var u=mN(t,a);s.push(u)}}),{size:r,shape:n,stops:s,position:i,type:2}},D0t=function(t){return t.type===1},L0t=function(t){return t.type===2},_U={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=Khe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function $0t(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Khe[t.name])}var Khe={"linear-gradient":R0t,"-moz-linear-gradient":Mk,"-ms-linear-gradient":Mk,"-o-linear-gradient":Mk,"-webkit-linear-gradient":Mk,"radial-gradient":F0t,"-moz-radial-gradient":Qk,"-ms-radial-gradient":Qk,"-o-radial-gradient":Qk,"-webkit-radial-gradient":Qk,"-webkit-gradient":O0t},P0t={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return K1(r)&&$0t(r)}).map(function(r){return _U.parse(t,r)})}},z0t={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Ws(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},U0t={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return _h(e).map(function(n){return n.filter(Ha)}).map(Ohe)}},M0t={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return _h(e).map(function(n){return n.filter(Ws).map(function(r){return r.value}).join(" ")}).map(Q0t)}},Q0t=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},S1;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(S1||(S1={}));var H0t={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return _h(e).map(function(n){return n.filter(W0t)})}},W0t=function(t){return Ws(t)||Ha(t)},gN=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},V0t=gN("top"),q0t=gN("right"),G0t=gN("bottom"),K0t=gN("left"),yN=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return Ohe(n.filter(Ha))}}},X0t=yN("top-left"),Y0t=yN("top-right"),J0t=yN("bottom-right"),Z0t=yN("bottom-left"),xN=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},eyt=xN("top"),tyt=xN("right"),nyt=xN("bottom"),ryt=xN("left"),bN=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return $S(n)?n.number:0}}},syt=bN("top"),iyt=bN("right"),ayt=bN("bottom"),oyt=bN("left"),lyt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cyt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return e==="rtl"?1:0}},uyt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ws).reduce(function(n,r){return n|dyt(r.value)},0)}},dyt=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fyt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},hyt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},jj;(function(t){t.NORMAL="normal",t.STRICT="strict"})(jj||(jj={}));var Ayt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return e==="strict"?jj.STRICT:jj.NORMAL}},pyt={name:"line-height",initialValue:"normal",prefix:!1,type:4},YY=function(t,e){return Ws(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ha(t)?oi(t,e):e},myt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:_U.parse(t,e)}},gyt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return e==="inside"?0:1}},M8={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},vN=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},yyt=vN("top"),xyt=vN("right"),byt=vN("bottom"),vyt=vN("left"),wyt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ws).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Syt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return e==="break-word"?"break-word":"normal"}},wN=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Cyt=wN("top"),kyt=wN("right"),Byt=wN("bottom"),jyt=wN("left"),Eyt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Iyt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Nyt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&U8(e[0],"none")?[]:_h(e).map(function(n){for(var r={color:kA.TRANSPARENT,offsetX:cl,offsetY:cl,blur:cl},s=0,i=0;i<n.length;i++){var a=n[i];Rm(a)?(s===0?r.offsetX=a:s===1?r.offsetY=a:r.blur=a,s++):r.color=dm.parse(t,a)}return r})}},Tyt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_yt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=Fyt[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},Ryt=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},Oyt=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,s,i,a,l]:null},Fyt={matrix:Ryt,matrix3d:Oyt},JY={type:16,number:50,flags:LS},Dyt=[JY,JY],Lyt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Ha);return n.length!==2?Dyt:[n[0],n[1]]}},$yt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},w2;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(w2||(w2={}));var Pyt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return w2.BREAK_ALL;case"keep-all":return w2.KEEP_ALL;default:return w2.NORMAL}}},zyt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(_b(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Xhe={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Uyt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return _b(e)?e.number:1}},Myt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qyt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ws).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Hyt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},Wyt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Vyt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return _b(e)?e.number:Ws(e)&&e.value==="bold"?700:400}},qyt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ws).map(function(n){return n.value})}},Gyt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Ao=function(t,e){return(t&e)!==0},Kyt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},Xyt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(Rhe),i=0;i<s.length;i++){var a=s[i],l=s[i+1];if(a.type===20){var c=l&&_b(l)?l.number:1;r.push({counter:a.value,increment:c})}}return r}},Yyt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(Rhe),s=0;s<r.length;s++){var i=r[s],a=r[s+1];if(Ws(i)&&i.value!=="none"){var l=a&&_b(a)?a.number:0;n.push({counter:i.value,reset:l})}}return n}},Jyt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter($S).map(function(n){return Xhe.parse(t,n)})}},Zyt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(k0t);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,l=s[i+1].value;r.push({open:a,close:l})}return r}},ZY=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},e1t={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&U8(e[0],"none")?[]:_h(e).map(function(n){for(var r={color:255,offsetX:cl,offsetY:cl,blur:cl,spread:cl,inset:!1},s=0,i=0;i<n.length;i++){var a=n[i];U8(a,"inset")?r.inset=!0:Rm(a)?(s===0?r.offsetX=a:s===1?r.offsetY=a:s===2?r.blur=a:r.spread=a,s++):r.color=dm.parse(t,a)}return r})}},t1t={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Ws).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},n1t={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},r1t={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return $S(e)?e.number:0}},s1t=(function(){function t(e,n){var r,s;this.animationDuration=ln(e,Jyt,n.animationDuration),this.backgroundClip=ln(e,E0t,n.backgroundClip),this.backgroundColor=ln(e,I0t,n.backgroundColor),this.backgroundImage=ln(e,P0t,n.backgroundImage),this.backgroundOrigin=ln(e,z0t,n.backgroundOrigin),this.backgroundPosition=ln(e,U0t,n.backgroundPosition),this.backgroundRepeat=ln(e,M0t,n.backgroundRepeat),this.backgroundSize=ln(e,H0t,n.backgroundSize),this.borderTopColor=ln(e,V0t,n.borderTopColor),this.borderRightColor=ln(e,q0t,n.borderRightColor),this.borderBottomColor=ln(e,G0t,n.borderBottomColor),this.borderLeftColor=ln(e,K0t,n.borderLeftColor),this.borderTopLeftRadius=ln(e,X0t,n.borderTopLeftRadius),this.borderTopRightRadius=ln(e,Y0t,n.borderTopRightRadius),this.borderBottomRightRadius=ln(e,J0t,n.borderBottomRightRadius),this.borderBottomLeftRadius=ln(e,Z0t,n.borderBottomLeftRadius),this.borderTopStyle=ln(e,eyt,n.borderTopStyle),this.borderRightStyle=ln(e,tyt,n.borderRightStyle),this.borderBottomStyle=ln(e,nyt,n.borderBottomStyle),this.borderLeftStyle=ln(e,ryt,n.borderLeftStyle),this.borderTopWidth=ln(e,syt,n.borderTopWidth),this.borderRightWidth=ln(e,iyt,n.borderRightWidth),this.borderBottomWidth=ln(e,ayt,n.borderBottomWidth),this.borderLeftWidth=ln(e,oyt,n.borderLeftWidth),this.boxShadow=ln(e,e1t,n.boxShadow),this.color=ln(e,lyt,n.color),this.direction=ln(e,cyt,n.direction),this.display=ln(e,uyt,n.display),this.float=ln(e,fyt,n.cssFloat),this.fontFamily=ln(e,Hyt,n.fontFamily),this.fontSize=ln(e,Wyt,n.fontSize),this.fontStyle=ln(e,Gyt,n.fontStyle),this.fontVariant=ln(e,qyt,n.fontVariant),this.fontWeight=ln(e,Vyt,n.fontWeight),this.letterSpacing=ln(e,hyt,n.letterSpacing),this.lineBreak=ln(e,Ayt,n.lineBreak),this.lineHeight=ln(e,pyt,n.lineHeight),this.listStyleImage=ln(e,myt,n.listStyleImage),this.listStylePosition=ln(e,gyt,n.listStylePosition),this.listStyleType=ln(e,M8,n.listStyleType),this.marginTop=ln(e,yyt,n.marginTop),this.marginRight=ln(e,xyt,n.marginRight),this.marginBottom=ln(e,byt,n.marginBottom),this.marginLeft=ln(e,vyt,n.marginLeft),this.opacity=ln(e,Uyt,n.opacity);var i=ln(e,wyt,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=ln(e,Syt,n.overflowWrap),this.paddingTop=ln(e,Cyt,n.paddingTop),this.paddingRight=ln(e,kyt,n.paddingRight),this.paddingBottom=ln(e,Byt,n.paddingBottom),this.paddingLeft=ln(e,jyt,n.paddingLeft),this.paintOrder=ln(e,t1t,n.paintOrder),this.position=ln(e,Iyt,n.position),this.textAlign=ln(e,Eyt,n.textAlign),this.textDecorationColor=ln(e,Myt,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=ln(e,Qyt,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=ln(e,Nyt,n.textShadow),this.textTransform=ln(e,Tyt,n.textTransform),this.transform=ln(e,_yt,n.transform),this.transformOrigin=ln(e,Lyt,n.transformOrigin),this.visibility=ln(e,$yt,n.visibility),this.webkitTextStrokeColor=ln(e,n1t,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=ln(e,r1t,n.webkitTextStrokeWidth),this.wordBreak=ln(e,Pyt,n.wordBreak),this.zIndex=ln(e,zyt,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return fm(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ao(this.display,4)||Ao(this.display,33554432)||Ao(this.display,268435456)||Ao(this.display,536870912)||Ao(this.display,67108864)||Ao(this.display,134217728)},t})(),i1t=(function(){function t(e,n){this.content=ln(e,Kyt,n.content),this.quotes=ln(e,Zyt,n.quotes)}return t})(),eJ=(function(){function t(e,n){this.counterIncrement=ln(e,Xyt,n.counterIncrement),this.counterReset=ln(e,Yyt,n.counterReset)}return t})(),ln=function(t,e,n){var r=new The,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new _he(r.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Ws(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return pN.parse(t,i.parseComponentValue());case"color":return dm.parse(t,i.parseComponentValue());case"image":return _U.parse(t,i.parseComponentValue());case"length":var l=i.parseComponentValue();return Rm(l)?l:cl;case"length-percentage":var c=i.parseComponentValue();return Ha(c)?c:cl;case"time":return Xhe.parse(t,i.parseComponentValue())}break}},a1t="data-html2canvas-debug",o1t=function(t){var e=t.getAttribute(a1t);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Q8=function(t,e){var n=o1t(t);return n===1||e===n},Rh=(function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Q8(n,3))debugger;this.styles=new s1t(e,window.getComputedStyle(n,null)),V8(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=hN(this.context,n),Q8(n,4)&&(this.flags|=16)}return t})(),l1t="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hk=0;Hk<tJ.length;Hk++)d2[tJ.charCodeAt(Hk)]=Hk;var c1t=function(t){var e=t.length*.75,n=t.length,r,s=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)i=d2[t.charCodeAt(r)],a=d2[t.charCodeAt(r+1)],l=d2[t.charCodeAt(r+2)],c=d2[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},u1t=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},d1t=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Xg=5,RU=11,$6=2,f1t=RU-Xg,Yhe=65536>>Xg,h1t=1<<Xg,P6=h1t-1,A1t=1024>>Xg,p1t=Yhe+A1t,m1t=p1t,g1t=32,y1t=m1t+g1t,x1t=65536>>RU,b1t=1<<f1t,v1t=b1t-1,nJ=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},w1t=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},S1t=function(t,e){var n=c1t(t),r=Array.isArray(n)?d1t(n):new Uint32Array(n),s=Array.isArray(n)?u1t(n):new Uint16Array(n),i=24,a=nJ(s,i/2,r[4]/2),l=r[5]===2?nJ(s,(i+r[4])/2):w1t(r,Math.ceil((i+r[4])/4));return new C1t(r[0],r[1],r[2],r[3],a,l)},C1t=(function(){function t(e,n,r,s,i,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Xg],n=(n<<$6)+(e&P6),this.data[n];if(e<=65535)return n=this.index[Yhe+(e-55296>>Xg)],n=(n<<$6)+(e&P6),this.data[n];if(e<this.highStart)return n=y1t-x1t+(e>>RU),n=this.index[n],n+=e>>Xg&v1t,n=this.index[n],n=(n<<$6)+(e&P6),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t})(),rJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k1t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wk=0;Wk<rJ.length;Wk++)k1t[rJ.charCodeAt(Wk)]=Wk;var B1t=1,z6=2,U6=3,sJ=4,iJ=5,j1t=7,aJ=8,M6=9,Q6=10,oJ=11,lJ=12,cJ=13,uJ=14,H6=15,E1t=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},I1t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},N1t=S1t(l1t),Xu="",W6="",T1t=function(t){return N1t.get(t)},_1t=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],a=e[n];if(i===z6&&a===U6)return Xu;if(i===z6||i===U6||i===sJ||a===z6||a===U6||a===sJ)return W6;if(i===aJ&&[aJ,M6,oJ,lJ].indexOf(a)!==-1||(i===oJ||i===M6)&&(a===M6||a===Q6)||(i===lJ||i===Q6)&&a===Q6||a===cJ||a===iJ||a===j1t||i===B1t)return Xu;if(i===cJ&&a===uJ){for(;s===iJ;)s=e[--r];if(s===uJ)return Xu}if(i===H6&&a===H6){for(var l=0;s===H6;)l++,s=e[--r];if(l%2===0)return Xu}return W6},R1t=function(t){var e=E1t(t),n=e.length,r=0,s=0,i=e.map(T1t);return{next:function(){if(r>=n)return{done:!0,value:null};for(var a=Xu;r<n&&(a=_1t(e,i,++r))===Xu;);if(a!==Xu||r===n){var l=I1t.apply(null,e.slice(s,r));return s=r,{value:l,done:!1}}return{done:!0,value:null}}}},O1t=function(t){for(var e=R1t(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},F1t=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},D1t=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=AN(r.data).map(function(c){return _a(c)}),i=0,a={},l=s.every(function(c,u){n.setStart(r,i),n.setEnd(r,i+c.length);var d=n.getBoundingClientRect();i+=c.length;var f=d.x>a.x||d.y>a.y;return a=d,u===0?!0:f});return t.body.removeChild(e),l},L1t=function(){return typeof new Image().crossOrigin<"u"},$1t=function(){return typeof new XMLHttpRequest().responseType=="string"},P1t=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},dJ=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},z1t=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var a=H8(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),fJ(a).then(function(l){r.drawImage(l,0,0);var c=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=t.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=n+"px",dJ(c)?fJ(H8(n,n,0,0,u)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),dJ(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},H8=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(l),l.appendChild(s),a},fJ=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ll={get SUPPORT_RANGE_BOUNDS(){var t=F1t(document);return Object.defineProperty(ll,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ll.SUPPORT_RANGE_BOUNDS&&D1t(document);return Object.defineProperty(ll,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=P1t(document);return Object.defineProperty(ll,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?z1t(document):Promise.resolve(!1);return Object.defineProperty(ll,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=L1t();return Object.defineProperty(ll,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=$1t();return Object.defineProperty(ll,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ll,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ll,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},S2=(function(){function t(e,n){this.text=e,this.bounds=n}return t})(),U1t=function(t,e,n,r){var s=H1t(e,n),i=[],a=0;return s.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(ll.SUPPORT_RANGE_BOUNDS){var c=hJ(r,a,l.length).getClientRects();if(c.length>1){var u=OU(l),d=0;u.forEach(function(A){i.push(new S2(A,HA.fromDOMRectList(t,hJ(r,d+a,A.length).getClientRects()))),d+=A.length})}else i.push(new S2(l,HA.fromDOMRectList(t,c)))}else{var f=r.splitText(l.length);i.push(new S2(l,M1t(t,r))),r=f}else ll.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));a+=l.length}),i},M1t=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=hN(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return HA.EMPTY},hJ=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},OU=function(t){if(ll.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return O1t(t)},Q1t=function(t,e){if(ll.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return V1t(t,e)},H1t=function(t,e){return e.letterSpacing!==0?OU(t):Q1t(t,e)},W1t=[32,160,4961,65792,65793,4153,4241],V1t=function(t,e){for(var n=xgt(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var a=s.value.slice(),l=AN(a),c="";l.forEach(function(u){W1t.indexOf(u)===-1?c+=_a(u):(c.length&&r.push(c),r.push(_a(u)),c="")}),c.length&&r.push(c)}};!(s=n.next()).done;)i();return r},q1t=(function(){function t(e,n,r){this.text=G1t(n.data,r.textTransform),this.textBounds=U1t(e,this.text,r,n)}return t})(),G1t=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(K1t,X1t);case 2:return t.toUpperCase();default:return t}},K1t=/(^|\s|:|-|\(|\))([a-z])/g,X1t=function(t,e,n){return t.length>0?e+n.toUpperCase():t},Jhe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e})(Rh),Zhe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e})(Rh),eAe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,a=hN(n,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e})(Rh),tAe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e})(Rh),W8=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e})(Rh),Y1t=[{type:15,flags:0,unit:"px",number:3}],J1t=[{type:16,flags:0,number:50}],Z1t=function(t){return t.width>t.height?new HA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new HA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},ext=function(t){var e=t.type===txt?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Ej="checkbox",Ij="radio",txt="password",AJ=707406591,FU=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=ext(r),(s.type===Ej||s.type===Ij)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Z1t(s.bounds)),s.type){case Ej:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Y1t;break;case Ij:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=J1t;break}return s}return e})(Rh),nAe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e})(Rh),rAe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e})(Rh),sAe=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=aAe(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?v2(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):kA.TRANSPARENT,a=r.contentWindow.document.body?v2(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):kA.TRANSPARENT;s.backgroundColor=fm(i)?fm(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e})(Rh),nxt=["OL","UL","MENU"],LB=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,oAe(s)&&s.data.trim().length>0)n.textNodes.push(new q1t(t,s,n.styles));else if(u1(s))if(dAe(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return LB(t,l,n,r)});else{var a=iAe(t,s);a.styles.isVisible()&&(rxt(s,a,r)?a.flags|=4:sxt(a.styles)&&(a.flags|=2),nxt.indexOf(s.tagName)!==-1&&(a.flags|=8),n.elements.push(a),s.slot,s.shadowRoot?LB(t,s.shadowRoot,a,r):!Nj(s)&&!lAe(s)&&!Tj(s)&&LB(t,s,a,r))}},iAe=function(t,e){return q8(e)?new Jhe(t,e):cAe(e)?new Zhe(t,e):lAe(e)?new eAe(t,e):ixt(e)?new tAe(t,e):axt(e)?new W8(t,e):oxt(e)?new FU(t,e):Tj(e)?new nAe(t,e):Nj(e)?new rAe(t,e):uAe(e)?new sAe(t,e):new Rh(t,e)},aAe=function(t,e){var n=iAe(t,e);return n.flags|=4,LB(t,e,n,n),n},rxt=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||DU(t)&&n.styles.isTransparent()},sxt=function(t){return t.isPositioned()||t.isFloating()},oAe=function(t){return t.nodeType===Node.TEXT_NODE},u1=function(t){return t.nodeType===Node.ELEMENT_NODE},V8=function(t){return u1(t)&&typeof t.style<"u"&&!$B(t)},$B=function(t){return typeof t.className=="object"},ixt=function(t){return t.tagName==="LI"},axt=function(t){return t.tagName==="OL"},oxt=function(t){return t.tagName==="INPUT"},lxt=function(t){return t.tagName==="HTML"},lAe=function(t){return t.tagName==="svg"},DU=function(t){return t.tagName==="BODY"},cAe=function(t){return t.tagName==="CANVAS"},pJ=function(t){return t.tagName==="VIDEO"},q8=function(t){return t.tagName==="IMG"},uAe=function(t){return t.tagName==="IFRAME"},mJ=function(t){return t.tagName==="STYLE"},cxt=function(t){return t.tagName==="SCRIPT"},Nj=function(t){return t.tagName==="TEXTAREA"},Tj=function(t){return t.tagName==="SELECT"},dAe=function(t){return t.tagName==="SLOT"},gJ=function(t){return t.tagName.indexOf("-")>0},uxt=(function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(l){var c=n.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var a=[];return i&&s.forEach(function(l){var c=n.counters[l.counter];a.push(l.counter),c||(c=n.counters[l.counter]=[]),c.push(l.reset)}),a},t})(),yJ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xJ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dxt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fxt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Qy=function(t,e,n,r,s,i){return t<e||t>n?mw(t,s,i.length>0):r.integers.reduce(function(a,l,c){for(;t>=l;)t-=l,a+=r.values[c];return a},"")+i},fAe=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Ta=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(fAe(Math.abs(t),i,r,function(a){return _a(Math.floor(a%i)+e)})+s)},hg=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return fAe(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},t1=1,zp=2,Up=4,f2=8,aA=function(t,e,n,r,s,i){if(t<-9999||t>9999)return mw(t,4,s.length>0);var a=Math.abs(t),l=s;if(a===0)return e[0]+l;for(var c=0;a>0&&c<=4;c++){var u=a%10;u===0&&Ao(i,t1)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Ao(i,zp)||u===1&&c===1&&Ao(i,Up)&&t>100||u===1&&c>1&&Ao(i,f2)?l=e[u]+(c>0?n[c-1]:"")+l:u===1&&c>0&&(l=n[c-1]+l),a=Math.floor(a/10)}return(t<0?r:"")+l},bJ="",vJ="",wJ="",V6="",mw=function(t,e,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",a=n?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var l=Ta(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return hg(t,"",s);case 6:return Qy(t,1,3999,yJ,3,r).toLowerCase();case 7:return Qy(t,1,3999,yJ,3,r);case 8:return Ta(t,945,969,!1,r);case 9:return Ta(t,97,122,!1,r);case 10:return Ta(t,65,90,!1,r);case 11:return Ta(t,1632,1641,!0,r);case 12:case 49:return Qy(t,1,9999,xJ,3,r);case 35:return Qy(t,1,9999,xJ,3,r).toLowerCase();case 13:return Ta(t,2534,2543,!0,r);case 14:case 30:return Ta(t,6112,6121,!0,r);case 15:return hg(t,"",s);case 16:return hg(t,"",s);case 17:case 48:return aA(t,"",bJ,"",s,zp|Up|f2);case 47:return aA(t,"",vJ,"",s,t1|zp|Up|f2);case 42:return aA(t,"",bJ,"",s,zp|Up|f2);case 41:return aA(t,"",vJ,"",s,t1|zp|Up|f2);case 26:return aA(t,"","",wJ,s,0);case 25:return aA(t,"","",wJ,s,t1|zp|Up);case 31:return aA(t,"","",V6,i,t1|zp|Up);case 33:return aA(t,"","",V6,i,0);case 32:return aA(t,"","",V6,i,t1|zp|Up);case 18:return Ta(t,2406,2415,!0,r);case 20:return Qy(t,1,19999,fxt,3,r);case 21:return Ta(t,2790,2799,!0,r);case 22:return Ta(t,2662,2671,!0,r);case 22:return Qy(t,1,10999,dxt,3,r);case 23:return hg(t,"");case 24:return hg(t,"");case 27:return Ta(t,3302,3311,!0,r);case 28:return hg(t,"",s);case 29:return hg(t,"",s);case 34:return Ta(t,3792,3801,!0,r);case 37:return Ta(t,6160,6169,!0,r);case 38:return Ta(t,4160,4169,!0,r);case 39:return Ta(t,2918,2927,!0,r);case 40:return Ta(t,1776,1785,!0,r);case 43:return Ta(t,3046,3055,!0,r);case 44:return Ta(t,3174,3183,!0,r);case 45:return Ta(t,3664,3673,!0,r);case 46:return Ta(t,3872,3881,!0,r);default:return Ta(t,48,57,!0,r)}},hAe="data-html2canvas-ignore",SJ=(function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new uxt,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=hxt(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,l=s.contentWindow,c=l.document,u=mxt(s).then(function(){return Hl(r,void 0,void 0,function(){var d,f;return wl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(bxt),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,pxt(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return s})]:[2,s]}})})});return c.open(),c.write(yxt(document.doctype)+"<html></html>"),xxt(this.referenceElement.ownerDocument,i,a),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(Q8(e,2))debugger;if(cAe(e))return this.createCanvasClone(e);if(pJ(e))return this.createVideoClone(e);if(mJ(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return q8(n)&&(q8(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),gJ(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return q6(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var c=l.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!u1(n)||!cxt(n)&&!n.hasAttribute(hAe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!u1(n)||!mJ(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(u1(i)&&dAe(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(l){return s.appendChildNode(n,l,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(oAe(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&u1(e)&&(V8(e)||$B(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&V8(s)&&(this.clonedReferenceElement=s),DU(s)&&Sxt(s);var c=this.counters.parse(new eJ(this.context,i)),u=this.resolvePseudoContent(e,s,a,C2.BEFORE);gJ(e)&&(n=!0),pJ(e)||this.cloneChildNodes(e,s,n),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,l,C2.AFTER);return d&&s.appendChild(d),this.counters.pop(c),(i&&(this.options.copyStyles||$B(e))&&!uAe(e)||n)&&q6(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Nj(e)||Tj(e))&&(Nj(s)||Tj(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var a=r.content,l=n.ownerDocument;if(!(!l||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new eJ(this.context,r));var c=new i1t(this.context,r),u=l.createElement("html2canvaspseudoelement");q6(r,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(Ws);m.length&&u.appendChild(l.createTextNode(e.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(K1),y=g[0],x=g[1];if(y&&Ws(y)){var v=i.counters.getCounterValue(y.value),w=x&&Ws(x)?M8.parse(i.context,x.value):3;u.appendChild(l.createTextNode(mw(v,w,!1)))}}else if(f.name==="counters"){var B=f.values.filter(K1),y=B[0],k=B[1],x=B[2];if(y&&Ws(y)){var j=i.counters.getCounterValues(y.value),I=x&&Ws(x)?M8.parse(i.context,x.value):3,O=k&&k.type===0?k.value:"",F=j.map(function(N){return mw(N,I,!1)}).join(O);u.appendChild(l.createTextNode(F))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(ZY(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(ZY(c.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=G8+" "+K8;var d=s===C2.BEFORE?" "+G8:" "+K8;return $B(n)?n.className.baseValue+=d:n.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t})(),C2;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(C2||(C2={}));var hxt=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(hAe,"true"),t.body.appendChild(n),n},Axt=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},pxt=function(t){return Promise.all([].slice.call(t.images,0).map(Axt))},mxt=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},gxt=["all","d","content"],q6=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);gxt.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},yxt=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},xxt=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},bxt=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},vxt=":before",wxt=":after",G8="___html2canvas___pseudoelement_before",K8="___html2canvas___pseudoelement_after",CJ=`{
    content: "" !important;
    display: none !important;
}`,Sxt=function(t){Cxt(t,"."+G8+vxt+CJ+`
         .`+K8+wxt+CJ)},Cxt=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},AAe=(function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t})(),kxt=(function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(K6(e)||Ixt(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Hl(this,void 0,void 0,function(){var n,r,s,i,a=this;return wl(this,function(l){switch(l.label){case 0:return n=AAe.isSameOrigin(e),r=!G6(e)&&this._options.useCORS===!0&&ll.SUPPORT_CORS_IMAGES&&!n,s=!G6(e)&&!n&&!K6(e)&&typeof this._options.proxy=="string"&&ll.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!G6(e)&&!K6(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Nxt(i)||r)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return c(d)},500),a._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var l=ll.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(A){return a(A)},!1),f.readAsDataURL(c.response)}else a("Failed to proxy resource "+s+" with status code "+c.status)},c.onerror=a;var u=r.indexOf("?")>-1?"&":"?";if(c.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),n._options.imageTimeout){var d=n._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return a("Timed out ("+d+"ms) proxying "+s)}}c.send()})},t})(),Bxt=/^data:image\/svg\+xml/i,jxt=/^data:image\/.*;base64,/i,Ext=/^data:image\/.*/i,Ixt=function(t){return ll.SUPPORT_SVG_DRAWING||!Txt(t)},G6=function(t){return Ext.test(t)},Nxt=function(t){return jxt.test(t)},K6=function(t){return t.substr(0,4)==="blob"},Txt=function(t){return t.substr(-3).toLowerCase()==="svg"||Bxt.test(t)},tn=(function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t})(),Hy=function(t,e,n){return new tn(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Vk=(function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Hy(this.start,this.startControl,e),s=Hy(this.startControl,this.endControl,e),i=Hy(this.endControl,this.end,e),a=Hy(r,s,e),l=Hy(s,i,e),c=Hy(a,l,e);return n?new t(this.start,r,a,c):new t(c,l,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t})(),Zu=function(t){return t.type===1},_xt=(function(){function t(e){var n=e.styles,r=e.bounds,s=u2(n.borderTopLeftRadius,r.width,r.height),i=s[0],a=s[1],l=u2(n.borderTopRightRadius,r.width,r.height),c=l[0],u=l[1],d=u2(n.borderBottomRightRadius,r.width,r.height),f=d[0],A=d[1],m=u2(n.borderBottomLeftRadius,r.width,r.height),g=m[0],y=m[1],x=[];x.push((i+c)/r.width),x.push((g+f)/r.width),x.push((a+y)/r.height),x.push((u+A)/r.height);var v=Math.max.apply(Math,x);v>1&&(i/=v,a/=v,c/=v,u/=v,f/=v,A/=v,g/=v,y/=v);var w=r.width-c,B=r.height-A,k=r.width-f,j=r.height-y,I=n.borderTopWidth,O=n.borderRightWidth,F=n.borderBottomWidth,D=n.borderLeftWidth,T=oi(n.paddingTop,e.bounds.width),N=oi(n.paddingRight,e.bounds.width),P=oi(n.paddingBottom,e.bounds.width),z=oi(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?$i(r.left+D/3,r.top+I/3,i-D/3,a-I/3,vs.TOP_LEFT):new tn(r.left+D/3,r.top+I/3),this.topRightBorderDoubleOuterBox=i>0||a>0?$i(r.left+w,r.top+I/3,c-O/3,u-I/3,vs.TOP_RIGHT):new tn(r.left+r.width-O/3,r.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?$i(r.left+k,r.top+B,f-O/3,A-F/3,vs.BOTTOM_RIGHT):new tn(r.left+r.width-O/3,r.top+r.height-F/3),this.bottomLeftBorderDoubleOuterBox=g>0||y>0?$i(r.left+D/3,r.top+j,g-D/3,y-F/3,vs.BOTTOM_LEFT):new tn(r.left+D/3,r.top+r.height-F/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?$i(r.left+D*2/3,r.top+I*2/3,i-D*2/3,a-I*2/3,vs.TOP_LEFT):new tn(r.left+D*2/3,r.top+I*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?$i(r.left+w,r.top+I*2/3,c-O*2/3,u-I*2/3,vs.TOP_RIGHT):new tn(r.left+r.width-O*2/3,r.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?$i(r.left+k,r.top+B,f-O*2/3,A-F*2/3,vs.BOTTOM_RIGHT):new tn(r.left+r.width-O*2/3,r.top+r.height-F*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||y>0?$i(r.left+D*2/3,r.top+j,g-D*2/3,y-F*2/3,vs.BOTTOM_LEFT):new tn(r.left+D*2/3,r.top+r.height-F*2/3),this.topLeftBorderStroke=i>0||a>0?$i(r.left+D/2,r.top+I/2,i-D/2,a-I/2,vs.TOP_LEFT):new tn(r.left+D/2,r.top+I/2),this.topRightBorderStroke=i>0||a>0?$i(r.left+w,r.top+I/2,c-O/2,u-I/2,vs.TOP_RIGHT):new tn(r.left+r.width-O/2,r.top+I/2),this.bottomRightBorderStroke=f>0||A>0?$i(r.left+k,r.top+B,f-O/2,A-F/2,vs.BOTTOM_RIGHT):new tn(r.left+r.width-O/2,r.top+r.height-F/2),this.bottomLeftBorderStroke=g>0||y>0?$i(r.left+D/2,r.top+j,g-D/2,y-F/2,vs.BOTTOM_LEFT):new tn(r.left+D/2,r.top+r.height-F/2),this.topLeftBorderBox=i>0||a>0?$i(r.left,r.top,i,a,vs.TOP_LEFT):new tn(r.left,r.top),this.topRightBorderBox=c>0||u>0?$i(r.left+w,r.top,c,u,vs.TOP_RIGHT):new tn(r.left+r.width,r.top),this.bottomRightBorderBox=f>0||A>0?$i(r.left+k,r.top+B,f,A,vs.BOTTOM_RIGHT):new tn(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=g>0||y>0?$i(r.left,r.top+j,g,y,vs.BOTTOM_LEFT):new tn(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||a>0?$i(r.left+D,r.top+I,Math.max(0,i-D),Math.max(0,a-I),vs.TOP_LEFT):new tn(r.left+D,r.top+I),this.topRightPaddingBox=c>0||u>0?$i(r.left+Math.min(w,r.width-O),r.top+I,w>r.width+O?0:Math.max(0,c-O),Math.max(0,u-I),vs.TOP_RIGHT):new tn(r.left+r.width-O,r.top+I),this.bottomRightPaddingBox=f>0||A>0?$i(r.left+Math.min(k,r.width-D),r.top+Math.min(B,r.height-F),Math.max(0,f-O),Math.max(0,A-F),vs.BOTTOM_RIGHT):new tn(r.left+r.width-O,r.top+r.height-F),this.bottomLeftPaddingBox=g>0||y>0?$i(r.left+D,r.top+Math.min(j,r.height-F),Math.max(0,g-D),Math.max(0,y-F),vs.BOTTOM_LEFT):new tn(r.left+D,r.top+r.height-F),this.topLeftContentBox=i>0||a>0?$i(r.left+D+z,r.top+I+T,Math.max(0,i-(D+z)),Math.max(0,a-(I+T)),vs.TOP_LEFT):new tn(r.left+D+z,r.top+I+T),this.topRightContentBox=c>0||u>0?$i(r.left+Math.min(w,r.width+D+z),r.top+I+T,w>r.width+D+z?0:c-D+z,u-(I+T),vs.TOP_RIGHT):new tn(r.left+r.width-(O+N),r.top+I+T),this.bottomRightContentBox=f>0||A>0?$i(r.left+Math.min(k,r.width-(D+z)),r.top+Math.min(B,r.height+I+T),Math.max(0,f-(O+N)),A-(F+P),vs.BOTTOM_RIGHT):new tn(r.left+r.width-(O+N),r.top+r.height-(F+P)),this.bottomLeftContentBox=g>0||y>0?$i(r.left+D+z,r.top+j,Math.max(0,g-(D+z)),y-(F+P),vs.BOTTOM_LEFT):new tn(r.left+D+z,r.top+r.height-(F+P))}return t})(),vs;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vs||(vs={}));var $i=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),a=n*i,l=r*i,c=t+n,u=e+r;switch(s){case vs.TOP_LEFT:return new Vk(new tn(t,u),new tn(t,u-l),new tn(c-a,e),new tn(c,e));case vs.TOP_RIGHT:return new Vk(new tn(t,e),new tn(t+a,e),new tn(c,u-l),new tn(c,u));case vs.BOTTOM_RIGHT:return new Vk(new tn(c,e),new tn(c,e+l),new tn(t+a,u),new tn(t,u));case vs.BOTTOM_LEFT:default:return new Vk(new tn(c,u),new tn(c-a,u),new tn(t,e+l),new tn(t,e))}},_j=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Rxt=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Rj=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Oxt=(function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t})(),qk=(function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t})(),Fxt=(function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t})(),Dxt=function(t){return t.type===0},pAe=function(t){return t.type===1},Lxt=function(t){return t.type===2},kJ=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},$xt=function(t,e,n,r,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},mAe=(function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t})(),gAe=(function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new _xt(this.container),this.container.styles.opacity<1&&this.effects.push(new Fxt(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Oxt(r,s,i))}if(this.container.styles.overflowX!==0){var a=_j(this.curves),l=Rj(this.curves);kJ(a,l)?this.effects.push(new qk(a,6)):(this.effects.push(new qk(a,2)),this.effects.push(new qk(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(c){return!pAe(c)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=_j(r.curves),l=Rj(r.curves);kJ(a,l)||s.unshift(new qk(l,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(c){return Ao(c.target,e)})},t})(),X8=function(t,e,n,r){t.container.elements.forEach(function(s){var i=Ao(s.flags,4),a=Ao(s.flags,2),l=new gAe(s,t);Ao(s.styles.display,2048)&&r.push(l);var c=Ao(s.flags,8)?[]:r;if(i||a){var u=i||s.styles.isPositioned()?n:e,d=new mAe(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(g,y){return f>g.element.container.styles.zIndex.order?(A=y,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,y){return f>=g.element.container.styles.zIndex.order?(m=y+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);X8(l,d,i?d:n,c)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),X8(l,e,n,c);Ao(s.flags,8)&&yAe(s,c)})},yAe=function(t,e){for(var n=t instanceof W8?t.start:1,r=t instanceof W8?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof tAe&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=mw(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},Pxt=function(t){var e=new gAe(t,null),n=new mAe(e),r=[];return X8(e,n,n,r),yAe(e.container,r),n},BJ=function(t,e){switch(e){case 0:return id(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return id(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return id(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return id(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},zxt=function(t,e){switch(e){case 0:return id(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return id(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return id(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return id(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Uxt=function(t,e){switch(e){case 0:return id(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return id(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return id(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return id(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Mxt=function(t,e){switch(e){case 0:return Gk(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Gk(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Gk(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return Gk(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Gk=function(t,e){var n=[];return Zu(t)?n.push(t.subdivide(.5,!1)):n.push(t),Zu(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},id=function(t,e,n,r){var s=[];return Zu(t)?s.push(t.subdivide(.5,!1)):s.push(t),Zu(n)?s.push(n.subdivide(.5,!0)):s.push(n),Zu(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Zu(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},xAe=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Oj=function(t){var e=t.styles,n=t.bounds,r=oi(e.paddingLeft,n.width),s=oi(e.paddingRight,n.width),i=oi(e.paddingTop,n.width),a=oi(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},Qxt=function(t,e){return t===0?e.bounds:t===2?Oj(e):xAe(e)},Hxt=function(t,e){return t===0?e.bounds:t===2?Oj(e):xAe(e)},X6=function(t,e,n){var r=Qxt(n1(t.styles.backgroundOrigin,e),t),s=Hxt(n1(t.styles.backgroundClip,e),t),i=Wxt(n1(t.styles.backgroundSize,e),n,r),a=i[0],l=i[1],c=u2(n1(t.styles.backgroundPosition,e),r.width-a,r.height-l),u=Vxt(n1(t.styles.backgroundRepeat,e),c,i,r,s),d=Math.round(r.left+c[0]),f=Math.round(r.top+c[1]);return[u,d,f,a,l]},Wy=function(t){return Ws(t)&&t.value===S1.AUTO},Kk=function(t){return typeof t=="number"},Wxt=function(t,e,n){var r=e[0],s=e[1],i=e[2],a=t[0],l=t[1];if(!a)return[0,0];if(Ha(a)&&l&&Ha(l))return[oi(a,n.width),oi(l,n.height)];var c=Kk(i);if(Ws(a)&&(a.value===S1.CONTAIN||a.value===S1.COVER)){if(Kk(i)){var u=n.width/n.height;return u<i!=(a.value===S1.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var d=Kk(r),f=Kk(s),A=d||f;if(Wy(a)&&(!l||Wy(l))){if(d&&f)return[r,s];if(!c&&!A)return[n.width,n.height];if(A&&c){var m=d?r:s*i,g=f?s:r/i;return[m,g]}var y=d?r:n.width,x=f?s:n.height;return[y,x]}if(c){var v=0,w=0;return Ha(a)?v=oi(a,n.width):Ha(l)&&(w=oi(l,n.height)),Wy(a)?v=w*i:(!l||Wy(l))&&(w=v/i),[v,w]}var B=null,k=null;if(Ha(a)?B=oi(a,n.width):l&&Ha(l)&&(k=oi(l,n.height)),B!==null&&(!l||Wy(l))&&(k=d&&f?B/r*s:n.height),k!==null&&Wy(a)&&(B=d&&f?k/s*r:n.width),B!==null&&k!==null)return[B,k];throw new Error("Unable to calculate background-size for element")},n1=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},Vxt=function(t,e,n,r,s){var i=e[0],a=e[1],l=n[0],c=n[1];switch(t){case 2:return[new tn(Math.round(r.left),Math.round(r.top+a)),new tn(Math.round(r.left+r.width),Math.round(r.top+a)),new tn(Math.round(r.left+r.width),Math.round(c+r.top+a)),new tn(Math.round(r.left),Math.round(c+r.top+a))];case 3:return[new tn(Math.round(r.left+i),Math.round(r.top)),new tn(Math.round(r.left+i+l),Math.round(r.top)),new tn(Math.round(r.left+i+l),Math.round(r.height+r.top)),new tn(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new tn(Math.round(r.left+i),Math.round(r.top+a)),new tn(Math.round(r.left+i+l),Math.round(r.top+a)),new tn(Math.round(r.left+i+l),Math.round(r.top+a+c)),new tn(Math.round(r.left+i),Math.round(r.top+a+c))];default:return[new tn(Math.round(s.left),Math.round(s.top)),new tn(Math.round(s.left+s.width),Math.round(s.top)),new tn(Math.round(s.left+s.width),Math.round(s.height+s.top)),new tn(Math.round(s.left),Math.round(s.height+s.top))]}},qxt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jJ="Hidden Text",Gxt=(function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),s.src=qxt,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(jJ)),r.appendChild(i),r.appendChild(s);var l=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(jJ)),r.style.lineHeight="normal",s.style.verticalAlign="super";var c=s.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t})(),bAe=(function(){function t(e,n){this.context=e,this.options=n}return t})(),Kxt=1e4,Xxt=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Gxt(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),Lxt(n)&&(this.ctx.globalAlpha=n.opacity),Dxt(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),pAe(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Hl(this,void 0,void 0,function(){var r;return wl(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Hl(this,void 0,void 0,function(){return wl(this,function(r){switch(r.label){case 0:if(Ao(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var a=OU(n.text);a.reduce(function(l,c){return i.ctx.fillText(c,l,n.bounds.top+s),l+i.ctx.measureText(c).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=tbt(n.fontFamily).join(", "),i=$S(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return Hl(this,void 0,void 0,function(){var s,i,a,l,c,u,d,f,A=this;return wl(this,function(m){return s=this.createFontStyle(r),i=s[0],a=s[1],l=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(a,l),u=c.baseline,d=c.middle,f=r.paintOrder,n.textBounds.forEach(function(g){f.forEach(function(y){switch(y){case 0:A.ctx.fillStyle=_o(r.color),A.renderTextWithLetterSpacing(g,r.letterSpacing,u);var x=r.textShadow;x.length&&g.text.trim().length&&(x.slice(0).reverse().forEach(function(v){A.ctx.shadowColor=_o(v.color),A.ctx.shadowOffsetX=v.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=v.offsetY.number*A.options.scale,A.ctx.shadowBlur=v.blur.number,A.renderTextWithLetterSpacing(g,r.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),r.textDecorationLine.length&&(A.ctx.fillStyle=_o(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(v){switch(v){case 1:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:A.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&g.text.trim().length&&(A.ctx.strokeStyle=_o(r.webkitTextStrokeColor),A.ctx.lineWidth=r.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=Oj(n),a=Rj(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Hl(this,void 0,void 0,function(){var r,s,i,a,l,c,w,w,u,d,f,A,k,m,g,j,y,x,v,w,B,k,j;return wl(this,function(I){switch(I.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,a=0,l=r.textNodes,I.label=1;case 1:return a<l.length?(c=l[a],[4,this.renderTextNode(c,i)]):[3,4];case 2:I.sent(),I.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof Jhe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return w=I.sent(),this.renderReplacedElement(r,s,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Zhe&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof eAe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return w=I.sent(),this.renderReplacedElement(r,s,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof sAe&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:d=I.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),I.label=14;case 14:if(r instanceof FU&&(f=Math.min(r.bounds.width,r.bounds.height),r.type===Ej?r.checked&&(this.ctx.save(),this.path([new tn(r.bounds.left+f*.39363,r.bounds.top+f*.79),new tn(r.bounds.left+f*.16,r.bounds.top+f*.5549),new tn(r.bounds.left+f*.27347,r.bounds.top+f*.44071),new tn(r.bounds.left+f*.39694,r.bounds.top+f*.5649),new tn(r.bounds.left+f*.72983,r.bounds.top+f*.23),new tn(r.bounds.left+f*.84,r.bounds.top+f*.34085),new tn(r.bounds.left+f*.39363,r.bounds.top+f*.79)]),this.ctx.fillStyle=_o(AJ),this.ctx.fill(),this.ctx.restore()):r.type===Ij&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+f/2,r.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=_o(AJ),this.ctx.fill(),this.ctx.restore())),Yxt(r)&&r.value.length){switch(A=this.createFontStyle(i),k=A[0],m=A[1],g=this.fontMetrics.getMetrics(k,m).baseline,this.ctx.font=k,this.ctx.fillStyle=_o(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Zxt(r.styles.textAlign),j=Oj(r),y=0,r.styles.textAlign){case 1:y+=j.width/2;break;case 2:y+=j.width;break}x=j.add(y,0,0,-j.height/2+1),this.ctx.save(),this.path([new tn(j.left,j.top),new tn(j.left+j.width,j.top),new tn(j.left+j.width,j.top+j.height),new tn(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new S2(r.value,x),i.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ao(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(v=r.styles.listStyleImage,v.type!==0)return[3,18];w=void 0,B=v.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(B)];case 16:return w=I.sent(),this.ctx.drawImage(w,r.bounds.left-(w.width+10),r.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+B),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(k=this.createFontStyle(i)[0],this.ctx.font=k,this.ctx.fillStyle=_o(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new HA(r.bounds.left,r.bounds.top+oi(r.styles.paddingTop,r.bounds.width),r.bounds.width,YY(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new S2(n.listValue,j),i.letterSpacing,YY(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Hl(this,void 0,void 0,function(){var r,s,v,i,a,v,l,c,v,u,d,v,f,A,v,m,g,v,y,x,v;return wl(this,function(w){switch(w.label){case 0:if(Ao(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:w.sent(),r=0,s=n.negativeZIndex,w.label=2;case 2:return r<s.length?(v=s[r],[4,this.renderStack(v)]):[3,5];case 3:w.sent(),w.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:w.sent(),i=0,a=n.nonInlineLevel,w.label=7;case 7:return i<a.length?(v=a[i],[4,this.renderNode(v)]):[3,10];case 8:w.sent(),w.label=9;case 9:return i++,[3,7];case 10:l=0,c=n.nonPositionedFloats,w.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=n.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(v=d[u],[4,this.renderStack(v)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,A=n.inlineLevel,w.label=19;case 19:return f<A.length?(v=A[f],[4,this.renderNode(v)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=n.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(v=g[m],[4,this.renderStack(v)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:y=0,x=n.positiveZIndex,w.label=27;case 27:return y<x.length?(v=x[y],[4,this.renderStack(v)]):[3,30];case 28:w.sent(),w.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var a=Zu(s)?s.start:s;i===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),Zu(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=a.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,s);var c=l.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,r,s),l},e.prototype.renderBackgroundImage=function(n){return Hl(this,void 0,void 0,function(){var r,s,i,a,l,c;return wl(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var f,A,m,T,q,Z,z,U,F,g,T,q,Z,z,U,y,x,v,w,B,k,j,I,O,F,D,T,N,P,z,U,ee,q,Z,G,ne,K,H,Q,X,re,le;return wl(this,function(Ae){switch(Ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,i.context.cache.match(A)];case 2:return f=Ae.sent(),[3,4];case 3:return Ae.sent(),i.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(m=X6(n,r,[f.width,f.height,f.width/f.height]),T=m[0],q=m[1],Z=m[2],z=m[3],U=m[4],F=i.ctx.createPattern(i.resizeImage(f,z,U),"repeat"),i.renderRepeat(T,F,q,Z)),[3,6];case 5:D0t(d)?(g=X6(n,r,[null,null,null]),T=g[0],q=g[1],Z=g[2],z=g[3],U=g[4],y=T0t(d.angle,z,U),x=y[0],v=y[1],w=y[2],B=y[3],k=y[4],j=document.createElement("canvas"),j.width=z,j.height=U,I=j.getContext("2d"),O=I.createLinearGradient(v,B,w,k),KY(d.stops,x).forEach(function(xe){return O.addColorStop(xe.stop,_o(xe.color))}),I.fillStyle=O,I.fillRect(0,0,z,U),z>0&&U>0&&(F=i.ctx.createPattern(j,"repeat"),i.renderRepeat(T,F,q,Z))):L0t(d)&&(D=X6(n,r,[null,null,null]),T=D[0],N=D[1],P=D[2],z=D[3],U=D[4],ee=d.position.length===0?[TU]:d.position,q=oi(ee[0],z),Z=oi(ee[ee.length-1],U),G=_0t(d,q,Z,z,U),ne=G[0],K=G[1],ne>0&&K>0&&(H=i.ctx.createRadialGradient(N+q,P+Z,0,N+q,P+Z,ne),KY(d.stops,ne*2).forEach(function(xe){return H.addColorStop(xe.stop,_o(xe.color))}),i.path(T),i.ctx.fillStyle=H,ne!==K?(Q=n.bounds.left+.5*n.bounds.width,X=n.bounds.top+.5*n.bounds.height,re=K/ne,le=1/re,i.ctx.save(),i.ctx.translate(Q,X),i.ctx.transform(1,0,0,re,0,0),i.ctx.translate(-Q,-X),i.ctx.fillRect(N,le*(P-X)+X,z,U*le),i.ctx.restore()):i.ctx.fill())),Ae.label=6;case 6:return r--,[2]}})},i=this,a=0,l=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return a<l.length?(c=l[a],[5,s(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Hl(this,void 0,void 0,function(){return wl(this,function(i){return this.path(BJ(s,r)),this.ctx.fillStyle=_o(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return Hl(this,void 0,void 0,function(){var a,l;return wl(this,function(c){switch(c.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return c.sent(),[2];case 2:return a=zxt(i,s),this.path(a),this.ctx.fillStyle=_o(n),this.ctx.fill(),l=Uxt(i,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Hl(this,void 0,void 0,function(){var r,s,i,a,l,c,u,d,f=this;return wl(this,function(A){switch(A.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!fm(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=Jxt(n1(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),fm(r.backgroundColor)||(this.ctx.fillStyle=_o(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=_j(n.curves),y=m.inset?0:Kxt,x=$xt(g,-y+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(x)):(f.mask(g),f.ctx.clip(),f.path(x)),f.ctx.shadowOffsetX=m.offsetX.number+y,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=_o(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?_o(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=i,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!fm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,n.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,n.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,n.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,a){return Hl(this,void 0,void 0,function(){var l,c,u,d,f,A,m,g,y,x,v,w,B,k,j,I,j,I;return wl(this,function(O){return this.ctx.save(),l=Mxt(i,s),c=BJ(i,s),a===2&&(this.path(c),this.ctx.clip()),Zu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Zu(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),s===0||s===2?m=Math.abs(u-f):m=Math.abs(d-A),this.ctx.beginPath(),a===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=r<3?r*3:r*2,y=r<3?r*2:r,a===3&&(g=r,y=r),x=!0,m<=g*2?x=!1:m<=g*2+y?(v=m/(2*g+y),g*=v,y*=v):(w=Math.floor((m+y)/(g+y)),B=(m-w*g)/(w-1),k=(m-(w+1)*g)/w,y=k<=0||Math.abs(y-B)<Math.abs(y-k)?B:k),x&&(a===3?this.ctx.setLineDash([0,g+y]):this.ctx.setLineDash([g,y])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=_o(n),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Zu(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new tn(j.end.x,j.end.y),new tn(I.start.x,I.start.y)]),this.ctx.stroke()),Zu(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new tn(j.end.x,j.end.y),new tn(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Hl(this,void 0,void 0,function(){var r;return wl(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=_o(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Pxt(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(bAe),Yxt=function(t){return t instanceof rAe||t instanceof nAe?!0:t instanceof FU&&t.type!==Ij&&t.type!==Ej},Jxt=function(t,e){switch(t){case 0:return _j(e);case 2:return Rxt(e);default:return Rj(e)}},Zxt=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},ebt=["-apple-system","system-ui"],tbt=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return ebt.indexOf(e)===-1}):t},nbt=(function(t){Ef(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Hl(this,void 0,void 0,function(){var r,s;return wl(this,function(i){switch(i.label){case 0:return r=H8(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,rbt(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=_o(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(bAe),rbt=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},sbt=(function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,jk([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,jk([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,jk([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,jk([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t})(),ibt=(function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new sbt({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new kxt(this,e)}return t.instanceCount=1,t})(),LU=function(t,e){return e===void 0&&(e={}),abt(t,e)};typeof window<"u"&&AAe.setContext(window);var abt=function(t,e){return Hl(void 0,void 0,void 0,function(){var n,r,s,i,a,l,c,u,d,f,A,m,g,y,x,v,w,B,k,j,O,I,O,F,D,T,N,P,z,U,ee,q,Z,G,ne,K,H,Q,X,re;return wl(this,function(le){switch(le.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(F=e.allowTaint)!==null&&F!==void 0?F:!1,imageTimeout:(D=e.imageTimeout)!==null&&D!==void 0?D:15e3,proxy:e.proxy,useCORS:(T=e.useCORS)!==null&&T!==void 0?T:!1},i=I8({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},s),a={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:r.innerWidth,windowHeight:(z=e.windowHeight)!==null&&z!==void 0?z:r.innerHeight,scrollX:(U=e.scrollX)!==null&&U!==void 0?U:r.pageXOffset,scrollY:(ee=e.scrollY)!==null&&ee!==void 0?ee:r.pageYOffset},l=new HA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),c=new ibt(i,l),u=(q=e.foreignObjectRendering)!==null&&q!==void 0?q:!1,d={allowTaint:(Z=e.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new SJ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=le.sent(),g=DU(A)||lxt(A)?$mt(A.ownerDocument):hN(c,A),y=g.width,x=g.height,v=g.left,w=g.top,B=obt(c,A,e.backgroundColor),k={canvas:e.canvas,backgroundColor:B,scale:(ne=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((K=e.x)!==null&&K!==void 0?K:0)+v,y:((H=e.y)!==null&&H!==void 0?H:0)+w,width:(Q=e.width)!==null&&Q!==void 0?Q:Math.ceil(y),height:(X=e.height)!==null&&X!==void 0?X:Math.ceil(x)},u?(c.logger.debug("Document cloned, using foreign object rendering"),O=new nbt(c,k),[4,O.render(A)]):[3,3];case 2:return j=le.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+w+" with size "+y+"x"+x+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=aAe(c,A),B===I.styles.backgroundColor&&(I.styles.backgroundColor=kA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),O=new Xxt(c,k),[4,O.render(I)];case 4:j=le.sent(),le.label=5;case 5:return(!((re=e.removeContainer)!==null&&re!==void 0)||re)&&(SJ.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},obt=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?v2(t,getComputedStyle(r.documentElement).backgroundColor):kA.TRANSPARENT,i=r.body?v2(t,getComputedStyle(r.body).backgroundColor):kA.TRANSPARENT,a=typeof n=="string"?v2(t,n):n===null?kA.TRANSPARENT:4294967295;return e===r.documentElement?fm(s)?fm(i)?a:i:s:a};const lbt=Object.freeze(Object.defineProperty({__proto__:null,default:LU},Symbol.toStringTag,{value:"Module"})),cbt="http://localhost:8000/api";function $U({submissionId:t,onClose:e,isStudentView:n=!1}){const[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState({aptitude:!0,verbal:!1,logical:!1,coding:!1,sql:!1});if(C.useEffect(()=>{t&&(s(!0),Xe.get(`${cbt}/global-test-submissions/${t}/report`).then(y=>{a(y.data),s(!1)}).catch(y=>{console.error("Failed to load global test report:",y),c("Failed to load report details"),s(!1)}))},[t]),!t)return null;const f=y=>{d(x=>({...x,[y]:!x[y]}))},A=async()=>{const y={...u};d({aptitude:!0,verbal:!0,logical:!0,coding:!0,sql:!0}),setTimeout(async()=>{const v=document.getElementById("report-content");if(!v)return;const w=await LU(v,{scale:2,backgroundColor:"#0f172a",useCORS:!0,logging:!1}),B=w.toDataURL("image/png",1),k=new Rn("p","mm","a4"),j=210,I=297,O=w.height*j/w.width;let F=O,D=0;for(k.addImage(B,"PNG",0,D,j,O),F-=I;F>=0;)D=F-O,k.addPage(),k.addImage(B,"PNG",0,D,j,O),F-=I;k.save(`${i.studentInfo.name}_Assessment_Report.pdf`),d(y)},1e3)},m=y=>y>=80?"#10b981":y>=60?"#f59e0b":"#ef4444",g=y=>{switch(y){case"aptitude":return o.jsx(Zr,{size:20});case"verbal":return o.jsx(vu,{size:20});case"logical":return o.jsx(uf,{size:20});case"coding":return o.jsx(Lr,{size:20});case"sql":return o.jsx(wi,{size:20});default:return o.jsx(Br,{size:20})}};return o.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e5,backdropFilter:"blur(8px)"},children:o.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),style:{width:"95%",maxWidth:"1100px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden",background:"#0f172a",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:[o.jsxs("div",{className:"modal-header",style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.05))"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"14px",background:"linear-gradient(135deg, #8b5cf6, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 16px rgba(139, 92, 246, 0.2)"},children:o.jsx(ex,{size:26,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Global Assessment Report"}),o.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.9rem"},children:r?"Loading...":i?.testInfo.title})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsxs("button",{onClick:A,disabled:r||!i,style:{background:"rgba(139, 92, 246, 0.15)",color:"#a78bfa",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",padding:"0.6rem 1.2rem",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},onMouseOver:y=>{y.currentTarget.style.background="#8b5cf6",y.currentTarget.style.color="white"},onMouseOut:y=>{y.currentTarget.style.background="rgba(139, 92, 246, 0.15)",y.currentTarget.style.color="#a78bfa"},children:[o.jsx(ad,{size:18})," Download PDF"]}),o.jsx("button",{onClick:e,style:{background:"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"12px",padding:"0.6rem",cursor:"pointer",color:"#94a3b8",transition:"all 0.2s"},onMouseOver:y=>y.currentTarget.style.color="white",onMouseOut:y=>y.currentTarget.style.color="#94a3b8",children:o.jsx(Os,{size:24})})]})]}),o.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"2rem"},children:r?o.jsxs("div",{style:{textAlign:"center",padding:"5rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",border:"3px solid rgba(139, 92, 246, 0.2)",borderTopColor:"#8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),o.jsx("p",{style:{color:"#94a3b8",marginTop:"1.5rem",fontWeight:500},children:"Analyzing performance data..."})]}):l?o.jsxs("div",{style:{textAlign:"center",padding:"5rem"},children:[o.jsx(Pn,{size:64,color:"#ef4444",style:{marginBottom:"1.5rem",opacity:.8}}),o.jsx("h3",{style:{color:"white"},children:"Oops! Something went wrong"}),o.jsx("p",{style:{color:"#94a3b8"},children:l}),o.jsx("button",{onClick:e,style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"10px",fontWeight:600,cursor:"pointer"},children:"Close Modal"})]}):o.jsxs("div",{id:"report-content",children:[i.personalizedAnalysis?.summary&&o.jsxs("div",{style:{padding:"2rem",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.1))",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.2)",marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[o.jsx(Qo,{style:{position:"absolute",right:"2rem",top:"1.5rem",opacity:.2},size:48,color:"#8b5cf6"}),o.jsxs("h3",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#a78bfa",fontSize:"1.4rem"},children:[o.jsx(Zr,{size:24})," Executive Summary"]}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",fontSize:"1.1rem",lineHeight:1.6,maxWidth:"90%"},children:i.personalizedAnalysis.summary})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{padding:"1.5rem",background:"rgba(30, 41, 59, 0.5)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",gap:"1.25rem"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.75rem",fontWeight:800,color:"white"},children:i.studentInfo.name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.25rem"},children:i.studentInfo.name}),o.jsx("p",{style:{margin:"0.25rem 0 0",color:"#94a3b8"},children:i.studentInfo.email})]})]}),o.jsxs("div",{style:{padding:"1.5rem",background:i.overallPerformance.status==="passed"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"16px",border:`1px solid ${i.overallPerformance.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:900,color:m(i.overallPerformance.percentage),lineHeight:1},children:[i.overallPerformance.percentage,"%"]}),o.jsx("div",{style:{color:"#94a3b8",fontSize:"0.9rem",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600},children:"Overall Score"})]}),o.jsx("div",{style:{padding:"0.75rem 1.5rem",borderRadius:"12px",background:i.overallPerformance.status==="passed"?"#10b981":"#ef4444",color:"white",fontWeight:800,fontSize:"1.1rem",boxShadow:`0 8px 20px ${i.overallPerformance.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:i.overallPerformance.status.toUpperCase()})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:Object.entries(i.sectionWisePerformance).map(([y,x])=>o.jsxs("div",{style:{padding:"1.25rem",background:"rgba(30, 41, 59, 0.5)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.05)",textAlign:"center"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:m(x.percentage)},children:g(y)}),o.jsx("div",{style:{color:"#94a3b8",fontSize:"0.75rem",textTransform:"uppercase",fontWeight:700,marginBottom:"0.25rem"},children:y}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"white"},children:[x.percentage,"%"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:[x.correctCount,"/",x.totalQuestions," Correct"]})]},y))}),o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[o.jsx("h4",{style:{margin:"0 0 1rem",color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Section Performance Summary"}),o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(G1,{data:Object.entries(i.sectionWisePerformance).map(([y,x])=>({name:y.charAt(0).toUpperCase()+y.slice(1),score:x.percentage})),margin:{top:5,right:30,left:0,bottom:5},children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)",vertical:!1}),o.jsx(fh,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),o.jsx(hh,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:y=>`${y}%`}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px"},itemStyle:{color:"white"},cursor:{fill:"rgba(255,255,255,0.05)"}}),o.jsx(cm,{dataKey:"score",radius:[8,8,0,0],children:Object.entries(i.sectionWisePerformance).map((y,x)=>o.jsx(gf,{fill:m(y[1].percentage)},`cell-${x}`))})]})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[o.jsxs("div",{style:{padding:"2rem",background:"rgba(16, 185, 129, 0.03)",borderRadius:"24px",border:"1px solid rgba(16, 185, 129, 0.1)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#10b981",fontSize:"1.2rem"},children:[o.jsx(_l,{size:24})," Key Strengths"]}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none",display:"flex",flexDirection:"column",gap:"1rem"},children:i.strengths.map((y,x)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",color:"#e2e8f0",fontSize:"1rem"},children:[o.jsx("div",{style:{marginTop:"0.25rem",padding:"0.2rem",background:"#10b981",borderRadius:"50%"},children:o.jsx(Nn,{size:12,color:"white"})}),y]},x))})]}),o.jsxs("div",{style:{padding:"2rem",background:"rgba(239, 68, 68, 0.03)",borderRadius:"24px",border:"1px solid rgba(239, 68, 68, 0.1)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#f87171",fontSize:"1.2rem"},children:[o.jsx(uf,{size:24})," Areas for Growth"]}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none",display:"flex",flexDirection:"column",gap:"1rem"},children:i.weaknesses.map((y,x)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",color:"#e2e8f0",fontSize:"1rem"},children:[o.jsx("div",{style:{marginTop:"0.25rem",padding:"0.2rem",background:"#f87171",borderRadius:"50%"},children:o.jsx(Dg,{size:12,color:"white"})}),y]},x))})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[o.jsxs("div",{style:{padding:"2rem",background:"rgba(59, 130, 246, 0.03)",borderRadius:"24px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#60a5fa",fontSize:"1.2rem"},children:[o.jsx(aZ,{size:24})," Personalized Action Plan"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:i.recommendations.map((y,x)=>o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[o.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:800,fontSize:"0.8rem",flexShrink:0},children:x+1}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",lineHeight:1.5},children:y})]},x))})]}),o.jsxs("div",{style:{padding:"2rem",background:"rgba(245, 158, 11, 0.03)",borderRadius:"24px",border:"1px solid rgba(245, 158, 11, 0.1)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#f59e0b",fontSize:"1.2rem"},children:[o.jsx(NA,{size:24})," Critical Focus Areas"]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem"},children:i.personalizedAnalysis?.focusAreas?.map((y,x)=>o.jsxs("div",{style:{padding:"0.75rem 1.25rem",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"12px",color:"#f59e0b",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:16})," ",y]},x))})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("h3",{style:{color:"white",display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx(fu,{size:24,color:"#8b5cf6"}),"Detailed Question Analysis"]}),(()=>{let y=0;return Object.entries(i.questionResultsBySection).map(([v,w])=>{const B=y;return y+=w.length,{section:v,questions:w,sectionStartIdx:B}})})().map(({section:y,questions:x,sectionStartIdx:v})=>o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.3)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.05)",overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>f(y),style:{width:"100%",padding:"1.25rem 1.5rem",background:"transparent",border:"none",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",color:"white"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{color:m(i.sectionWisePerformance[y]?.percentage)},children:g(y)}),o.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:700,textTransform:"capitalize"},children:[y," Analysis"]}),o.jsxs("span",{style:{fontSize:"0.85rem",padding:"0.2rem 0.6rem",background:"rgba(255,255,255,0.05)",borderRadius:"6px",color:"#94a3b8"},children:[i.sectionWisePerformance[y]?.percentage,"% Accuraccy"]})]}),u[y]?o.jsx(Am,{size:20,color:"#64748b"}):o.jsx(EA,{size:20,color:"#64748b"})]}),u[y]&&i.personalizedAnalysis?.sectionAnalysis?.[y]&&o.jsxs("div",{style:{margin:"0 1.5rem 1.5rem",padding:"1.25rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)",color:"#e2e8f0",fontSize:"0.95rem",lineHeight:1.6},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#a78bfa",fontWeight:700,textTransform:"uppercase",fontSize:"0.75rem",letterSpacing:"1px"},children:[o.jsx(Zr,{size:16})," AI Performance Insight"]}),i.personalizedAnalysis.sectionAnalysis[y]]}),u[y]&&o.jsx("div",{style:{padding:"0 1.5rem 1.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:x.length>0?x.map((w,B)=>o.jsx("div",{style:{padding:"1.25rem",background:w.is_correct?"rgba(16, 185, 129, 0.03)":"rgba(239, 68, 68, 0.03)",border:`1px solid ${w.is_correct?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)"}`,borderRadius:"12px"},children:o.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:w.is_correct?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:800,flexShrink:0},children:w.is_correct?"":""}),o.jsxs("div",{style:{flex:1},children:[o.jsx("p",{style:{margin:"0 0 1rem",color:"#e2e8f0",fontWeight:500,lineHeight:1.5},children:w.question}),y==="coding"||y==="sql"?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{style:{background:"#020617",padding:"1.25rem",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",overflowX:"auto"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase"},children:"Your Code Submission"}),o.jsx("pre",{style:{margin:0,color:"#e2e8f0",fontSize:"0.85rem",fontFamily:'"Fira Code", monospace'},children:w.user_answer})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 1rem",background:w.is_correct?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px"},children:[o.jsx(Vs,{size:16,color:w.is_correct?"#10b981":"#ef4444"}),o.jsx("span",{style:{fontSize:"0.85rem",color:"#94a3b8"},children:"Evaluation:"}),o.jsx("span",{style:{fontWeight:600,color:w.is_correct?"#10b981":"#f87171"},children:w.correct_answer}),w.points_earned!==void 0&&o.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.8rem",color:"#94a3b8"},children:["Score: ",o.jsx("span",{style:{color:"white",fontWeight:600},children:w.points_earned})]})]})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 1rem",background:w.is_correct?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"#94a3b8",minWidth:"100px"},children:"Your Answer:"}),o.jsx("span",{style:{fontWeight:600,color:w.is_correct?"#10b981":"#f87171"},children:w.user_answer||"(No answer)"})]}),!w.is_correct&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"#94a3b8",minWidth:"100px"},children:"Correct Answer:"}),o.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:w.correct_answer})]})]}),w.explanation&&o.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",borderLeft:"4px solid #8b5cf6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx(Vs,{size:14,color:"#8b5cf6"}),o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:700,color:"#a78bfa",textTransform:"uppercase"},children:"Conceptual Explanation"})]}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#94a3b8"},children:w.explanation})]}),i.personalizedAnalysis?.questionInsights?.[`Q${v+B+1}`]&&o.jsxs("div",{style:{marginTop:"1rem",padding:"1.25rem",background:"linear-gradient(135deg, rgba(6, 182, 212, 0.08), rgba(139, 92, 246, 0.08))",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)",position:"relative"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",marginBottom:"0.75rem",color:"#06b6d4"},children:[o.jsx(NA,{size:18}),o.jsx("span",{style:{fontSize:"0.85rem",fontWeight:800,textTransform:"uppercase",letterSpacing:"1px"},children:"Mentor Insight"}),o.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.7rem",color:"#64748b",background:"rgba(255,255,255,0.05)",padding:"2px 8px",borderRadius:"4px"},children:["Q",v+B+1]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,display:"block",marginBottom:"2px"},children:"DIAGNOSIS"}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",fontSize:"0.9rem"},children:i.personalizedAnalysis.questionInsights[`Q${v+B+1}`].diagnosis})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,display:"block",marginBottom:"2px"},children:"THE MISSTEP"}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",fontSize:"0.9rem"},children:i.personalizedAnalysis.questionInsights[`Q${v+B+1}`].misstep})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",borderLeft:"3px solid #10b981"},children:[o.jsx("span",{style:{color:"#10b981",fontSize:"0.75rem",fontWeight:800,display:"block",marginBottom:"2px"},children:"HOW TO EXCEL"}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",fontSize:"0.9rem",fontWeight:500},children:i.personalizedAnalysis.questionInsights[`Q${v+B+1}`].recommendation})]})]})]})]})]})},B)):o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"No questions found in this section."})})]},y))]})]})})]})})}const Mi="http://localhost:8000/api",Mv={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function ubt(){const{user:t}=Rb(),{t:e}=E0(),n=xf(),[r,s]=C.useState(""),[i,a]=C.useState(""),[l,c]=C.useState(null);C.useEffect(()=>{t?.id&&Xe.get(`${Mi}/analytics/student/${t.id}`).then(d=>{d.data.mentorInfo&&c(d.data.mentorInfo)}).catch(d=>console.error("Error fetching mentor info:",d))},[t?.id]),C.useEffect(()=>{switch(n.pathname.split("/").pop()){case"assignments":s(e("coding_problems")),a(e("solve_coding_subtitle"));break;case"aptitude":s(e("aptitude_tests")),a(e("aptitude_subtitle"));break;case"global-tests":s(e("global_complete_tests")),a(e("global_tests_student_subtitle"));break;case"submissions":s(e("my_submissions")),a(e("submissions_subtitle"));break;case"analytics":s(e("my_analytics")),a(e("analytics_subtitle"));break;case"skill-tests":s("Skill Tests"),a("AI-powered skill assessments");break;case"skill-submissions":s("Skill Test Submissions"),a("View your skill test results & reports");break;default:s(e("dashboard")),a(e("welcome_back_name",{name:t?.name||""}))}},[n,t,e]);const u=[{path:"/student",label:e("dashboard"),icon:o.jsx(fD,{size:20})},{label:"Learning",icon:o.jsx(Zd,{size:20}),defaultExpanded:!1,children:[{path:"/student/assignments",label:e("coding_problems"),icon:o.jsx(Lr,{size:20})},{path:"/student/aptitude",label:e("aptitude_tests"),icon:o.jsx(Zr,{size:20})},{path:"/student/global-tests",label:e("global_complete_tests"),icon:o.jsx(Gl,{size:20})},{path:"/student/skill-tests",label:"Skill Tests",icon:o.jsx(Br,{size:20})}]},{label:"Progress",icon:o.jsx(uf,{size:20}),defaultExpanded:!1,children:[{path:"/student/submissions",label:e("my_submissions"),icon:o.jsx($c,{size:20})},{path:"/student/skill-submissions",label:"Skill Submissions",icon:o.jsx(Br,{size:20})},{path:"/student/analytics",label:e("my_analytics"),icon:o.jsx(uf,{size:20})}]}];return o.jsx(AD,{navItems:u,title:r,subtitle:i,mentorInfo:l,children:o.jsxs($j,{children:[o.jsx(os,{path:"/",element:o.jsx(dbt,{user:t})}),o.jsx(os,{path:"/assignments",element:o.jsx(fbt,{user:t})}),o.jsx(os,{path:"/aptitude",element:o.jsx(gbt,{user:t})}),o.jsx(os,{path:"/global-tests",element:o.jsx(mbt,{user:t})}),o.jsx(os,{path:"/skill-tests",element:o.jsx(Wht,{user:t})}),o.jsx(os,{path:"/skill-submissions",element:o.jsx(Bfe,{user:t})}),o.jsx(os,{path:"/submissions",element:o.jsx(Abt,{user:t})}),o.jsx(os,{path:"/analytics",element:o.jsx(ybt,{user:t})})]})})}function dbt({user:t}){const[e,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{Xe.get(`${Mi}/analytics/student/${t.id}`).then(a=>{n(a.data),s(!1)}).catch(a=>{console.error(a),s(!1)})},[t.id]);const i=a=>{const l=new Date(a),u=new Date-l,d=Math.floor(u/6e4),f=Math.floor(u/36e5),A=Math.floor(u/864e5);return d<1?"Just now":d<60?`${d} min ago`:f<24?`${f} hour${f>1?"s":""} ago`:A<7?`${A} day${A>1?"s":""} ago`:l.toLocaleDateString()};return r?o.jsx("div",{className:"loading-spinner"}):e?o.jsxs("div",{className:"dashboard-container animate-fadeIn",children:[o.jsxs("div",{className:"dashboard-stats-grid",children:[o.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:o.jsx(Zd,{size:24,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.completedTasks}),o.jsx("div",{className:"stat-label-text",children:"Tasks Completed"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-green",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:o.jsx(Lr,{size:24,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.completedProblems}),o.jsx("div",{className:"stat-label-text",children:"Problems Solved"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-pink",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #be185d, #ec4899)"},children:o.jsx(_l,{size:24,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsxs("div",{className:"stat-number",children:[e.avgTaskScore,"%"]}),o.jsx("div",{className:"stat-label-text",children:"Avg Task Score"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-emerald",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #059669, #34d399)"},children:o.jsx(Br,{size:24,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsxs("div",{className:"stat-number",children:[e.avgProblemScore,"%"]}),o.jsx("div",{className:"stat-label-text",children:"Avg Problem Score"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:o.jsx(Zr,{size:24,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.completedAptitude}),o.jsx("div",{className:"stat-label-text",children:"Aptitude Taken"})]})]})})]}),o.jsxs("div",{className:"dashboard-main-grid",children:[o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Jg,{size:18,color:"#8b5cf6"})," My Skill Profile"]}),o.jsxs("div",{className:"skill-progress-container",children:[o.jsxs("div",{className:"skill-item",children:[o.jsxs("div",{className:"skill-header",children:[o.jsx("span",{className:"skill-name",children:"Coding Problems"}),o.jsxs("span",{className:"skill-count",style:{color:"#10b981"},children:[e.completedProblems,"/",e.totalProblems]})]}),o.jsx("div",{className:"skill-bar",style:{background:"rgba(16, 185, 129, 0.15)"},children:o.jsx("div",{className:"skill-fill",style:{width:`${e.totalProblems>0?e.completedProblems/e.totalProblems*100:0}%`,background:"linear-gradient(90deg, #059669, #10b981)"}})})]}),o.jsxs("div",{className:"skill-item",children:[o.jsxs("div",{className:"skill-header",children:[o.jsx("span",{className:"skill-name",children:"Aptitude Tests"}),o.jsxs("span",{className:"skill-count",style:{color:"#8b5cf6"},children:[e.completedAptitude,"/",e.totalAptitude]})]}),o.jsx("div",{className:"skill-bar",style:{background:"rgba(139, 92, 246, 0.15)"},children:o.jsx("div",{className:"skill-fill",style:{width:`${e.totalAptitude>0?e.completedAptitude/e.totalAptitude*100:0}%`,background:"linear-gradient(90deg, #7c3aed, #8b5cf6)"}})})]})]})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsxs("h3",{className:"panel-title",style:{margin:0},children:[o.jsx(ls,{size:18,color:"#3b82f6"})," Recent Submissions"]}),o.jsx("button",{onClick:()=>window.location.href="/student/submissions",className:"view-all-btn",children:"View All "})]}),o.jsx("div",{className:"submissions-list",children:e.recentSubmissions&&e.recentSubmissions.length>0?e.recentSubmissions.map((a,l)=>o.jsxs("div",{className:"submission-item",children:[o.jsx("div",{className:"submission-icon",children:o.jsx(Lr,{size:20,color:"#3b82f6"})}),o.jsxs("div",{className:"submission-info",children:[o.jsx("div",{className:"submission-title",children:a.title}),o.jsxs("div",{className:"submission-meta",children:[i(a.time),"  Score: ",a.score,"/100"]})]}),o.jsx("span",{className:`submission-status ${a.status}`,children:a.status})]},l)):o.jsxs("div",{className:"empty-state-small",children:[o.jsx(Lr,{size:32,color:"var(--text-muted)"}),"No submissions yet"]})})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(ul,{size:18,color:"#fbbf24"})," Leaderboard"]}),o.jsx("div",{className:"leaderboard-list",children:e.leaderboard&&e.leaderboard.length>0?e.leaderboard.slice(0,5).map((a,l)=>o.jsxs("div",{className:`leaderboard-item ${a.studentId===t.id?"current-user":""}`,children:[o.jsx("div",{className:`rank-badge rank-${l+1}`,children:a.rank}),o.jsxs("div",{className:"leaderboard-info",children:[o.jsx("div",{className:"leaderboard-name",children:a.name}),o.jsxs("div",{className:"leaderboard-stats",children:[a.taskCount," tasks  ",a.codeCount," code  ",a.aptitudeCount," aptitude"]})]}),o.jsxs("div",{className:`leaderboard-score rank-${l+1}-score`,children:[a.avgScore,"%",o.jsx("span",{className:"score-label",children:"Avg Score"})]})]},l)):o.jsxs("div",{className:"empty-state-small",children:[o.jsx(ul,{size:32,color:"var(--text-muted)"}),"No leaderboard data"]})})]})]})]}):o.jsx("div",{children:"Error loading stats"})}function fbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState("coding");C.useEffect(()=>{Xe.get(`${Mi}/students/${t.id}/problems`).then(x=>{n(x.data),s(!1)}).catch(x=>s(!1))},[t.id]);const f=x=>{a(x),c(x.proctoring?.enabled===!0)},A=()=>{a(null),c(!1)},m=e.filter(x=>x.language!=="SQL"&&x.type!=="SQL"),g=e.filter(x=>x.language==="SQL"||x.type==="SQL");if(r)return o.jsx("div",{className:"loading-spinner"});const y=x=>o.jsxs("div",{className:"item-card glass",children:[o.jsxs("div",{className:"item-card-header",children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"var(--primary-alpha)",color:"var(--primary)",fontWeight:700},children:x.type?.toUpperCase()}),o.jsx("span",{className:`status-badge ${x.status||"live"}`,style:{fontSize:"0.65rem"},children:x.status||"Active"}),x.proctoring?.enabled&&o.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Vs,{size:10})," PROCTORED"]})]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-dark)",padding:"2px 8px",borderRadius:"4px"},children:x.language})]}),o.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:x.title}),o.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:x.description}),x.proctoring?.enabled&&o.jsx("div",{style:{padding:"0.5rem 0.75rem",background:"rgba(239, 68, 68, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:o.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"#f87171",display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[o.jsx(gs,{size:12})," Proctoring Enabled:",x.proctoring.videoAudio&&o.jsx("span",{style:{marginLeft:"4px"},children:" Video"}),x.proctoring.disableCopyPaste&&o.jsx("span",{style:{marginLeft:"4px"},children:" No Copy"}),x.proctoring.trackTabSwitches&&o.jsx("span",{style:{marginLeft:"4px"},children:" Tab Track"}),x.proctoring.enableFaceDetection&&o.jsx("span",{style:{marginLeft:"4px"},children:" Face"}),x.proctoring.detectMultipleFaces&&o.jsx("span",{style:{marginLeft:"4px"},children:" Multi-Face"}),x.proctoring.trackFaceLookaway&&o.jsx("span",{style:{marginLeft:"4px"},children:" Lookaway"})]})}),o.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[o.jsx("span",{className:`difficulty-badge ${x.difficulty?.toLowerCase()}`,children:x.difficulty}),o.jsxs("button",{onClick:()=>f(x),className:"btn-create-new",style:{padding:"0.5rem 1rem",fontSize:"0.85rem"},children:[o.jsx(dd,{size:16})," Solve"]})]})]},x.id);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[o.jsxs("button",{onClick:()=>d("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:u==="coding"?"var(--primary)":"transparent",color:u==="coding"?"white":"var(--text-muted)"},children:[o.jsx(Lr,{size:18}),"Coding Problems",o.jsx("span",{style:{background:u==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:m.length})]}),o.jsxs("button",{onClick:()=>d("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:u==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:u==="sql"?"white":"var(--text-muted)"},children:[o.jsx(qi,{size:18}),"SQL Problems",o.jsx("span",{style:{background:u==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:g.length})]})]}),u==="coding"&&o.jsx("div",{className:"cards-grid animate-slideUp",children:m.length===0?o.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[o.jsx("div",{className:"empty-state-icon",children:o.jsx(Lr,{size:40})}),o.jsx("h3",{children:"No Coding Problems"}),o.jsx("p",{children:"Your mentor hasn't assigned any coding problems yet."})]}):m.map(x=>y(x))}),u==="sql"&&o.jsx("div",{className:"cards-grid animate-slideUp",children:g.length===0?o.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[o.jsx("div",{className:"empty-state-icon",children:o.jsx(qi,{size:40})}),o.jsx("h3",{children:"No SQL Problems"}),o.jsx("p",{children:"Your mentor hasn't assigned any SQL problems yet."})]}):g.map(x=>y(x))}),i&&l&&o.jsx(BVe,{problem:i,user:t,onClose:A,onSubmitSuccess:()=>{Xe.get(`${Mi}/students/${t.id}/problems`).then(x=>n(x.data))}}),i&&!l&&o.jsx(hbt,{problem:i,user:t,onClose:A})]})}function hbt({problem:t,user:e,onClose:n}){const r=Mv[t.language]||Mv.Python,[s,i]=C.useState(r.defaultCode),[a,l]=C.useState(t.language||"Python"),[c,u]=C.useState("validator"),[d,f]=C.useState(""),[A,m]=C.useState("idle"),[g,y]=C.useState(null),[x,v]=C.useState(0),[w,B]=C.useState(!1),[k,j]=C.useState(!1),[I,O]=C.useState(""),[F,D]=C.useState(!1),[T,N]=C.useState(null),[P,z]=C.useState(t.sampleInput||t.testInput||""),[U,ee]=C.useState("input"),q=C.useRef(null);C.useEffect(()=>{const je=setTimeout(async()=>{try{q.current&&document.fullscreenEnabled&&(await q.current.requestFullscreen(),B(!0))}catch(ye){console.warn("Could not enter fullscreen:",ye)}},100);return()=>clearTimeout(je)},[]),C.useEffect(()=>{const ve=()=>{const je=!!document.fullscreenElement;B(je),!je&&!g&&(O(" You exited fullscreen mode! This action has been recorded."),j(!0),v(ye=>ye+1),setTimeout(async()=>{if(q.current&&document.fullscreenEnabled)try{await q.current.requestFullscreen()}catch{}},500))};return document.addEventListener("fullscreenchange",ve),()=>document.removeEventListener("fullscreenchange",ve)},[g]);const[Z,G]=C.useState(!1);C.useEffect(()=>{const ve=()=>{document.hidden&&!g&&!Z&&v(je=>{const ye=je+1;return ye>=3?(O(` DISQUALIFIED! You have exceeded the maximum allowed tab switches (${ye}/3). Session terminated.`),j(!0),G(!0),setTimeout(async()=>{try{await Xe.post(`${Mi}/submissions`,{studentId:e.id,problemId:t.id,language:a,code:s,submissionType:"editor",tabSwitches:ye})}catch(ze){console.error("Auto-submit failed:",ze)}document.fullscreenElement&&document.exitFullscreen(),n()},3e3)):(O(` Tab switch detected! (${ye}/3 violations) ${3-ye} more will disqualify you!`),j(!0)),ye})};return document.addEventListener("visibilitychange",ve),()=>document.removeEventListener("visibilitychange",ve)},[g,Z,e.id,t.id,a,s,n]),C.useEffect(()=>{if(k){const ve=setTimeout(()=>j(!1),3e3);return()=>clearTimeout(ve)}},[k]);const ne=ve=>{l(ve),i(Mv[ve]?.defaultCode||"")},K=async()=>{m("running"),f(`Running code...
`),ee("output");try{const ve=await Xe.post(`${Mi}/run`,{code:s,language:a,problemId:t.id,sqlSchema:t.sqlSchema,stdin:P||""});f(ve.data.output),m(ve.data.status==="error"?"error":"success");try{const je=await Xe.post(`${Mi}/run-with-tests`,{problemId:t.id,code:s,language:a});je.data?.testResults&&N({passed:je.data.testResults.filter(ye=>ye.passed).length,total:je.data.testResults.length,results:je.data.testResults})}catch(je){console.log("No test cases or test run failed:",je)}}catch(ve){f(`Error: ${ve.response?.data?.details||"Failed to execute code."}`),m("error")}},[H,Q]=C.useState(null),[X,re]=C.useState(!1),[le,Ae]=C.useState(!1),xe=async()=>{re(!0),Ae(!0);try{const ve=await Xe.post(`${Mi}/hints`,{code:s,language:a,problemId:t.id});Q(ve.data)}catch{Q({hints:["Think about the problem step by step.","Consider what data structure would be most efficient."],encouragement:"Don't give up! Every expert was once a beginner.",error:!0})}finally{re(!1)}},Be=async()=>{m("submitting");try{const ve=await Xe.post(`${Mi}/submissions`,{studentId:e.id,problemId:t.id,language:a,code:s,submissionType:"editor",tabSwitches:x});y(ve.data),m("done"),document.fullscreenElement&&document.exitFullscreen()}catch{y({status:"rejected",score:0,feedback:"Submission failed."}),m("error")}},me=()=>{!g&&!window.confirm("Exiting early will be recorded. Are you sure?")||(document.fullscreenElement&&document.exitFullscreen(),n())};return o.jsxs("div",{ref:q,className:"proctored-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[k&&o.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(Pn,{size:24}),o.jsx("span",{style:{fontWeight:600},children:I})]}),o.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:o.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[o.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,o.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}})," PROCTORED MODE"]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"coding"}),o.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),x>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",x," violations"]})]})]})}),o.jsx("button",{onClick:me,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),o.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[o.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),o.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?o.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"#06b6d4"},children:""}),o.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),o.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"#10b981"},children:""}),o.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),o.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&o.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):o.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[o.jsx("div",{style:{marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),o.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||t.testInput||"N/A"}),o.jsx("div",{style:{marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),o.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),o.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(NA,{size:16})," Need Help?"]}),le?o.jsx("div",{children:X?o.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[o.jsx("div",{style:{color:"#fbbf24",marginBottom:"0.5rem"},children:""}),o.jsx("p",{style:{color:"#94a3b8",fontSize:"0.85rem",margin:0},children:"Analyzing your code..."})]}):H&&o.jsxs("div",{children:[H.encouragement&&o.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:o.jsxs("p",{style:{color:"#4ade80",fontSize:"0.8rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:14})," ",H.encouragement]})}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem"},children:" Hints:"}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#cbd5e1",fontSize:"0.8rem",lineHeight:1.8},children:H.hints?.map((ve,je)=>o.jsx("li",{style:{marginBottom:"0.5rem"},children:ve},je))})]}),H.conceptsToReview&&H.conceptsToReview.length>0&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(j2,{size:14})," Concepts to Review:"]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:H.conceptsToReview.map((ve,je)=>o.jsx("span",{style:{background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.25rem 0.75rem",borderRadius:"2rem",fontSize:"0.7rem",border:"1px solid rgba(59, 130, 246, 0.3)"},children:ve},je))})]}),H.commonMistakes&&o.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:o.jsxs("p",{style:{color:"#f87171",fontSize:"0.8rem",margin:0},children:[o.jsx("strong",{children:" Common Mistake:"})," ",H.commonMistakes]})}),o.jsx("button",{onClick:()=>{Ae(!1),Q(null)},style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",marginTop:"1rem",width:"100%"},children:"Hide Hints"})]})}):o.jsxs("div",{children:[o.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),o.jsxs("button",{onClick:xe,disabled:X,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[o.jsx(Qo,{size:16})," ",X?"Getting Hints...":"Get AI Hints"]})]})]}),o.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:16})," Proctoring Rules"]}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[o.jsx("li",{children:"Do not switch tabs or windows"}),o.jsx("li",{children:"Do not exit fullscreen mode"}),o.jsx("li",{children:"All violations are recorded"}),o.jsx("li",{children:"3+ violations may result in disqualification"})]})]})]}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b"},children:[o.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[o.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),o.jsx("select",{value:a,onChange:ve=>ne(ve.target.value),disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",opacity:t.type==="SQL"||t.language==="SQL"?.7:1,cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer"},children:Object.keys(Mv).map(ve=>o.jsx("option",{value:ve,children:ve},ve))})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[a!=="SQL"&&o.jsxs("button",{onClick:K,disabled:A==="running"||A==="submitting",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[o.jsx(dd,{size:16})," ",A==="running"?"Running...":"Run Code"]}),o.jsxs("button",{onClick:Be,disabled:A==="running"||A==="submitting"||g,style:{background:g?"#334155":"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[o.jsx($c,{size:16})," ",A==="submitting"?"Submitting...":"Submit"]})]})]}),o.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:o.jsx(kw,{height:"100%",language:Mv[a]?.monacoLang||"python",theme:"vs-dark",value:s,onChange:ve=>i(ve),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),g&&o.jsxs("div",{style:{padding:"1.5rem",background:g.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderTop:`2px solid ${g.status==="accepted"?"#10b981":"#ef4444"}`,display:"flex",alignItems:"center",gap:"1.5rem"},children:[g.status==="accepted"?o.jsx(Nn,{size:40,color:"#10b981"}):o.jsx(kr,{size:40,color:"#ef4444"}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,color:g.status==="accepted"?"#10b981":"#ef4444"},children:g.status==="accepted"?"Accepted!":"Rejected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"#e2e8f0"},children:["Score: ",o.jsxs("strong",{children:[g.score,"/100"]}),"  ",g.feedback,x>0&&o.jsxs("span",{style:{color:"#f59e0b"},children:["  Tab violations: ",x]})]})]}),o.jsx("button",{onClick:me,style:{marginLeft:"auto",background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontWeight:600},children:"Close Session"})]}),!g&&a!=="SQL"&&o.jsxs("div",{style:{maxHeight:"350px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",overflowY:"auto"},children:[o.jsx("div",{style:{display:"flex",borderBottom:"1px solid #1e293b",background:"#0f172a"},children:["input","output","tests"].map(ve=>o.jsxs("button",{onClick:()=>ee(ve),style:{padding:"0.75rem 1.25rem",background:U===ve?"#1e293b":"transparent",border:"none",borderBottom:U===ve?`2px solid ${ve==="input"?"#f59e0b":ve==="output"?"#3b82f6":"#10b981"}`:"2px solid transparent",color:U===ve?ve==="input"?"#fbbf24":ve==="output"?"#60a5fa":"#4ade80":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[ve==="input"&&o.jsxs(o.Fragment,{children:[o.jsx(qi,{size:14})," Custom Input"]}),ve==="output"&&o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:14})," Output ",d&&o.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:A==="success"?"#10b981":A==="error"?"#ef4444":"#3b82f6"}})]}),ve==="tests"&&o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:14})," Test Cases",T&&o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"0.7rem",fontWeight:600,background:T.passed===T.total?"rgba(16, 185, 129, 0.2)":"rgba(249, 115, 22, 0.2)",color:T.passed===T.total?"#10b981":"#f97316"},children:[T.passed,"/",T.total]})]})]},ve))}),U==="input"&&o.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[o.jsx("textarea",{value:P,onChange:ve=>z(ve.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",minHeight:"120px",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical",outline:"none"}}),o.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:' This input will be passed as stdin when you click "Run Code"'})]}),U==="output"&&o.jsx("div",{style:{padding:"1rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflowY:"auto"},children:d||"No output yet. Run your code to see results."}),U==="tests"&&o.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:o.jsx(Vae,{problemId:t.id,code:s,language:a,showRunButton:!0,onRunComplete:ve=>{ve?.testResults&&N({passed:ve.testResults.filter(je=>je.passed).length,total:ve.testResults.length})}})})]}),(t.type==="SQL"||t.language==="SQL")&&!g&&o.jsxs("div",{style:{borderTop:"1px solid #334155",padding:"1.25rem",background:"#0f172a"},children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",padding:"4px",background:"#020617",borderRadius:"10px",width:"fit-content"},children:[o.jsxs("button",{onClick:()=>u("validator"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:c==="validator"?"rgba(59, 130, 246, 0.15)":"transparent",color:c==="validator"?"#60a5fa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vs,{size:16})," Validator"]}),o.jsxs("button",{onClick:()=>u("visualizer"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:c==="visualizer"?"rgba(139, 92, 246, 0.15)":"transparent",color:c==="visualizer"?"#a78bfa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wi,{size:16})," ER Diagram"]}),o.jsxs("button",{onClick:()=>u("debugger"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:c==="debugger"?"rgba(16, 185, 129, 0.15)":"transparent",color:c==="debugger"?"#4ade80":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gl,{size:16})," Debugger"]})]}),o.jsxs("div",{className:"sql-tool-container animate-fadeIn",children:[c==="validator"&&o.jsx(Gae,{query:s,onQueryChange:i,schemaContext:t.sqlSchema}),c==="visualizer"&&o.jsx(Kae,{schema:t.sqlSchema}),c==="debugger"&&o.jsx(Xae,{query:s,schema:t.sqlSchema})]})]})]})]}),o.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function Abt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[f,A]=C.useState("all"),[m,g]=C.useState(null),[y,x]=C.useState(null),[v,w]=C.useState(""),B=()=>{c(!0),Promise.all([Xe.get(`${Mi}/submissions?studentId=${t.id}`),Xe.get(`${Mi}/aptitude-submissions?studentId=${t.id}`),Xe.get(`${Mi}/global-test-submissions?studentId=${t.id}`)]).then(([F,D,T])=>{const P=(Array.isArray(F.data)?F.data:F.data?.data||[]).map(z=>({...z,subType:"code"}));n(P),s((D.data||[]).map(z=>({...z,subType:"aptitude",itemTitle:z.testTitle}))),a((T.data||[]).map(z=>({...z,subType:"global",itemTitle:z.testTitle,score:z.overallPercentage}))),c(!1)}).catch(F=>{console.error("Fetch submissions error:",F),c(!1)})};C.useEffect(()=>{B()},[t.id]);const k=async F=>{if(window.confirm("Are you sure you want to delete this submission?"))try{const D=F.subType==="global"?`${Mi}/global-test-submissions/${F.id}`:`${Mi}/submissions/${F.id}`;await Xe.delete(D),B()}catch{alert("Error deleting submission")}},j=[...e,...r,...i].sort((F,D)=>new Date(D.submittedAt)-new Date(F.submittedAt)),O=(f==="all"?j:f==="code"?e:f==="aptitude"?r:i).filter(D=>(D.itemTitle||D.testTitle||"").toLowerCase().includes(v.toLowerCase())||D.status.toLowerCase().includes(v.toLowerCase()));return l?o.jsx("div",{className:"loading-spinner"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>A("all"),style:{padding:"0.6rem 1.2rem",background:f==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:f==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",j.length,")"]}),o.jsxs("button",{onClick:()=>A("code"),style:{padding:"0.6rem 1.2rem",background:f==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:f==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Code (",e.length,")"]}),o.jsxs("button",{onClick:()=>A("aptitude"),style:{padding:"0.6rem 1.2rem",background:f==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:f==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Aptitude (",r.length,")"]}),o.jsxs("button",{onClick:()=>A("global"),style:{padding:"0.6rem 1.2rem",background:f==="global"?"#3b82f6":"rgba(59, 130, 246, 0.1)",border:f==="global"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="global"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Global (",i.length,")"]})]}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(j0,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{type:"text",placeholder:"Search problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"250px"},value:v,onChange:F=>w(F.target.value)})]})]}),o.jsx("div",{className:"table-container animate-slideUp card glass",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Problem / Test"}),o.jsx("th",{children:"Language"}),o.jsx("th",{children:"Score"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Submitted At"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):O.map(F=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:F.subType==="ml-task"?"rgba(6, 182, 212, 0.1)":F.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"var(--primary-alpha)",color:F.subType==="ml-task"?"#06b6d4":F.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:F.subType==="aptitude"?" Aptitude":F.subType==="global"?" Global":" Code"})}),o.jsx("td",{children:o.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:F.itemTitle||F.testTitle})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:F.subType==="aptitude"?"N/A":F.subType==="global"?"Mixed":F.language?.toUpperCase()||"N/A"})}),o.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[F.score,"%"]}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[o.jsx("span",{className:`status-badge ${F.status}`,children:F.status}),F.plagiarism?.detected&&o.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:11})," Plag"]}),(F.integrity?.integrityViolation||F.tabSwitches>0)&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:10})," ",F.integrity?.tabSwitches||F.tabSwitches||0," Tab"]}),F.cameraBlockedCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",F.cameraBlockedCount," Cam"]}),F.phoneDetectionCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",F.phoneDetectionCount," Phone"]})]})}),o.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(F.submittedAt).toLocaleString()}),o.jsx("td",{children:o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:F.subType==="aptitude"?o.jsxs("button",{onClick:()=>g(F),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Results"]}):F.subType==="global"?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>x(F.id),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Full Report"]}),o.jsx("button",{onClick:()=>k(F),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:o.jsx(po,{size:14})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>d(F),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Report"]}),o.jsx("button",{onClick:()=>k(F),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:o.jsx(po,{size:14})})]})})})]},F.id))})]})}),u&&o.jsx(pbt,{submission:u,user:t,onClose:()=>d(null)}),m&&o.jsx(mP,{submission:m,onClose:()=>g(null),isStudentView:!0}),y&&o.jsx($U,{submissionId:y,onClose:()=>x(null),isStudentView:!0})]})}function pbt({submission:t,user:e,onClose:n}){const r=l=>{if(!l)return{score:0,max:0,comment:""};const c=l.match(/(\d+)\/(\d+)/);return c?{score:parseInt(c[1]),max:parseInt(c[2]),comment:l.replace(/\d+\/\d+\s*[-]?\s*/,"").trim()}:{score:0,max:0,comment:l}},s=t.analysis||{},i={correctness:r(s.correctness),efficiency:r(s.efficiency),codeStyle:r(s.codeStyle),bestPractices:r(s.bestPractices)},a=({label:l,icon:c,score:u,max:d,comment:f,color:A})=>o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c,o.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem"},children:l})]}),o.jsxs("span",{style:{fontWeight:700,color:A},children:[u,"/",d]})]}),o.jsx("div",{style:{background:"var(--bg-dark)",borderRadius:"0.5rem",height:"8px",overflow:"hidden"},children:o.jsx("div",{style:{width:d>0?`${u/d*100}%`:"0%",height:"100%",background:`linear-gradient(90deg, ${A}, ${A}88)`,borderRadius:"0.5rem",transition:"width 0.5s ease"}})}),f&&o.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:f})]});return o.jsx("div",{className:"modal-overlay",onClick:n,children:o.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),style:{maxWidth:"900px"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, var(--success), #06b6d4)":"linear-gradient(135deg, var(--danger), var(--warning))",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(qi,{size:20,color:"white"})}),o.jsx("h2",{children:"Submission Report"})]}),o.jsx("button",{onClick:n,className:"modal-close",children:o.jsx(kr,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{maxHeight:"75vh",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:e?.name})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"var(--success)":"var(--danger)"}`},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"var(--success)":"var(--danger)"},children:t.score}),o.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),o.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",color:t.status==="accepted"?"var(--success)":"var(--danger)",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?o.jsx(Nn,{size:24}):o.jsx(kr,{size:24}),t.status?.toUpperCase()]})]}),(s.correctness||s.efficiency||s.codeStyle||s.bestPractices)&&o.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:18,color:"var(--primary)"})," Detailed Score Breakdown"]}),o.jsx(a,{label:"Correctness",icon:o.jsx(Nn,{size:16,color:"#10b981"}),score:i.correctness.score,max:i.correctness.max||40,comment:i.correctness.comment,color:"#10b981"}),o.jsx(a,{label:"Efficiency",icon:o.jsx(vu,{size:16,color:"#3b82f6"}),score:i.efficiency.score,max:i.efficiency.max||25,comment:i.efficiency.comment,color:"#3b82f6"}),o.jsx(a,{label:"Code Style",icon:o.jsx(gs,{size:16,color:"#8b5cf6"}),score:i.codeStyle.score,max:i.codeStyle.max||20,comment:i.codeStyle.comment,color:"#8b5cf6"}),o.jsx(a,{label:"Best Practices",icon:o.jsx(ul,{size:16,color:"#f59e0b"}),score:i.bestPractices.score,max:i.bestPractices.max||15,comment:i.bestPractices.comment,color:"#f59e0b"})]}),t.plagiarism?.detected&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"var(--danger-alpha)",borderRadius:"0.75rem",border:"1px solid var(--danger)",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(Pn,{size:24,color:"var(--danger)"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"var(--danger)"},children:"Plagiarism Detected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),t.integrity?.integrityViolation&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.75rem",border:"1px solid #f59e0b",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(Pn,{size:24,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#f59e0b"},children:"Integrity Violation"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["Tab switches detected: ",t.integrity.tabSwitches,". Score was capped due to academic integrity concerns."]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[o.jsx(Pn,{size:18})," Proctoring Violations"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(gs,{size:18,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:18,color:"var(--primary)"})," AI Feedback"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.5rem"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gs,{size:18,color:"var(--secondary)"})," Why this score?"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--secondary-alpha)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--secondary)"},children:t.aiExplanation})]}),t.suggestions&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(NA,{size:18,color:"#fbbf24"})," Improvement Suggestion"]}),o.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(251, 191, 36, 0.3)"},children:o.jsx("p",{style:{color:"#fbbf24",margin:0,fontSize:"0.95rem"},children:t.suggestions})})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),o.jsx("pre",{style:{background:"var(--code-bg)",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"var(--code-text)",border:"1px solid var(--border-color)"},children:t.code})]})]})]})})}function mbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState([]),[f,A]=C.useState(null);C.useEffect(()=>{const B=async()=>{try{const j=await Xe.get(`${Mi}/global-tests?status=live`);n(Array.isArray(j.data)?j.data:[])}catch(j){j.response?.status===503?n([]):console.error(j)}finally{s(!1)}},k=async()=>{try{const j=await Xe.get(`${Mi}/global-test-submissions?studentId=${t.id}`);d(Array.isArray(j.data)?j.data:[])}catch{d([])}};B(),k()},[t.id]);const m=B=>u.filter(k=>k.testId===B).length,g=B=>u.find(k=>k.testId===B),y=(B,k)=>{const j=u.some(F=>F.testId===B&&F.status==="passed"),I=m(B),O=k?.maxAttempts??1;return j||O!==-1&&I>=O},x=async B=>{if(B.startTime&&new Date(B.startTime)>new Date){alert("This test is not yet available.");return}if(B.deadline&&new Date(B.deadline)<new Date){alert("This test has expired.");return}const k=u.filter(I=>I.testId===B.id).length,j=B.maxAttempts??1;if(j!==-1&&k>=j){alert(`Max attempts (${j}) reached for this test.`);return}try{const I=await Xe.get(`${Mi}/global-tests/${B.id}`);a(I.data),c(!0)}catch(I){alert(I.response?.data?.error||"Failed to load test")}},v=B=>{c(!1),a(null),B&&A(B),Xe.get(`${Mi}/global-test-submissions?studentId=${t.id}`).then(k=>d(Array.isArray(k.data)?k.data:[])).catch(()=>{})};if(r)return o.jsx("div",{className:"loading-spinner"});if(l&&i)return o.jsx(pVe,{test:i,user:t,onClose:()=>{c(!1),a(null)},onComplete:v});u.filter(B=>B.status==="passed").length;const w=()=>{if(!f)return null;const B=f.sectionScores||{},k=f.status==="passed";return o.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(8px)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[o.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                `}),o.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${k?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${k?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[o.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:k?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${k?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:k?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${k?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:k?"pulse 2s ease-in-out infinite":"none"},children:k?o.jsx(_l,{size:40,color:"white"}):o.jsx(kr,{size:40,color:"white"})}),o.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:k?" Congratulations!":"Test Completed"}),o.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:k?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),o.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[o.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:k?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${k?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[o.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:k?"#10b981":"#ef4444",lineHeight:1},children:[f.score??f.overallPercentage,"%"]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),o.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[f.correctCount||0,"/",f.totalQuestions||0]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),o.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gl,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(B).map(([j,I])=>{const O=I>=70?"#10b981":I>=50?"#f59e0b":"#ef4444";return o.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:O},children:[I,"%"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:j})]},j)})})]}),o.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:o.jsx("button",{type:"button",onClick:()=>A(null),style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:j=>j.target.style.transform="translateY(-2px)",onMouseOut:j=>j.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})};return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Gl,{size:28,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Global Complete Tests"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Aptitude, Verbal, Logical, Coding, SQL  all in one test"})]})]})}),e.length===0?o.jsx("div",{style:{textAlign:"center",padding:"3rem",background:"var(--bg-card)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:o.jsx("p",{style:{color:"var(--text-muted)"},children:"No global tests available. Check back later."})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4"},children:o.jsx(Gl,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Available"}),o.jsx("span",{className:"stat-value",children:e.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:o.jsx(Nn,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Submitted"}),o.jsx("span",{className:"stat-value",children:u.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:o.jsx(_l,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Passed"}),o.jsx("span",{className:"stat-value",children:u.filter(B=>B.status==="passed").length})]})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(B=>{const k=y(B.id,B),j=g(B.id),I=m(B.id),O=j?.status==="passed",F=B.maxAttempts===-1||I<(B.maxAttempts||1),D=!O&&F&&I>0;return o.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[I>0&&o.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:O?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:O?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:O?o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:14})," Passed"]}):o.jsxs(o.Fragment,{children:[o.jsx(kr,{size:14})," Failed"]})}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Gl,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:B.title}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[o.jsx("span",{className:`difficulty-badge ${B.difficulty?.toLowerCase()}`,children:B.difficulty}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[o.jsx(ls,{size:14})," ",B.duration," min"]})]})]})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:16,color:"#06b6d4"}),o.jsxs("span",{children:[B.totalQuestions," Questions"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(_l,{size:16,color:"#f59e0b"}),o.jsxs("span",{children:["Pass: ",B.passingScore,"%"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:16,color:"#ef4444"}),o.jsxs("span",{children:["Tab Limit: ",B.maxTabSwitches||3]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vu,{size:16,color:"#3b82f6"}),o.jsxs("span",{children:["Attempts: ",I,"/",B.maxAttempts===-1?"":B.maxAttempts||1]})]}),B.deadline&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:B.startTime&&new Date(B.startTime)>new Date?"#f59e42":B.deadline&&new Date(B.deadline)<new Date?"#ef4444":"var(--text-muted)"},children:[o.jsx(ls,{size:16,color:B.startTime&&new Date(B.startTime)>new Date?"#f59e42":B.deadline&&new Date(B.deadline)<new Date?"#ef4444":"#10b981"}),o.jsx("span",{children:B.startTime&&new Date(B.startTime)>new Date?"Not Yet Started":B.deadline&&new Date(B.deadline)<new Date?"Expired":B.deadline?`Due: ${new Date(B.deadline).toLocaleDateString()}`:""})]})]}),I>0&&j&&o.jsx("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),o.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:O?"#10b981":"#ef4444"},children:[j.overallPercentage,"%"]})]})}),o.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:k?o.jsxs("button",{disabled:!0,style:{flex:1,padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",color:"#10b981",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",cursor:"not-allowed"},children:[o.jsx(Nn,{size:18})," Completed"]}):D?o.jsxs("button",{onClick:()=>x(B),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Retry Test ",o.jsx(_c,{size:18})]}):B.startTime&&new Date(B.startTime)>new Date?o.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(kr,{size:18})," Not Yet Started"]}):B.deadline&&new Date(B.deadline)<new Date?o.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(kr,{size:18})," Test Expired"]}):o.jsxs("button",{onClick:()=>x(B),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Start Test ",o.jsx(hm,{size:18})]})})]},B.id)})})]}),o.jsx(w,{})]})}function gbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,a]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState([]),[f,A]=C.useState(null);C.useEffect(()=>{m(),g()},[t.id]);const m=async()=>{try{const T=await Xe.get(`${Mi}/aptitude?status=live`);n(T.data),s(!1)}catch(T){console.error("Error fetching tests:",T),s(!1)}},g=async()=>{try{const T=await Xe.get(`${Mi}/aptitude-submissions?studentId=${t.id}`);d(T.data)}catch(T){console.error("Error fetching submissions:",T)}},y=T=>{if(!T.startTime)return!0;const N=new Date(T.startTime),P=new Date,z=Date.UTC(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate(),N.getUTCHours(),N.getUTCMinutes());return Date.UTC(P.getUTCFullYear(),P.getUTCMonth(),P.getUTCDate(),P.getUTCHours(),P.getUTCMinutes())>=z},x=T=>{if(!T.deadline)return!1;const N=new Date(T.deadline),P=new Date,z=Date.UTC(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate(),N.getUTCHours(),N.getUTCMinutes());return Date.UTC(P.getUTCFullYear(),P.getUTCMonth(),P.getUTCDate(),P.getUTCHours(),P.getUTCMinutes())>z},v=async T=>{if(!y(T)){alert("This test is not yet available. Please check the start time.");return}if(x(T)){alert("This test has expired. The deadline has passed.");return}if(!I(T)&&j(T.id)>0){alert(`You have reached the maximum number of attempts (${T.maxAttempts}) for this test.`);return}try{const N=await Xe.get(`${Mi}/aptitude/${T.id}`);a(N.data),c(!0)}catch{alert("Error loading test")}},w=T=>{g(),c(!1),a(null)},B=T=>u.some(N=>N.testId===T),k=T=>{const N=u.filter(P=>P.testId===T);return N.length>0?N[0]:null},j=T=>u.filter(N=>N.testId===T).length,I=T=>{const N=j(T.id),P=T.maxAttempts;return P===-1?!0:N<(P||1)},O=T=>{const N=j(T.id),P=T.maxAttempts;return P===-1?"":Math.max(0,(P||1)-N)},D=(()=>{const T={};return u.forEach(N=>{T[N.testId]||(T[N.testId]=N)}),Object.values(T)})();return r?o.jsx("div",{className:"loading-spinner"}):l&&i?o.jsx(Rxe,{test:i,user:t,onClose:()=>{c(!1),a(null)},onComplete:w}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Zr,{size:28,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Test your reasoning, analytical, and problem-solving skills"})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:o.jsx(Zr,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Available Tests"}),o.jsx("span",{className:"stat-value",children:e.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:o.jsx(Nn,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Completed"}),o.jsx("span",{className:"stat-value",children:D.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:o.jsx(Br,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Avg Score"}),o.jsxs("span",{className:"stat-value",children:[D.length>0?Math.round(D.reduce((T,N)=>T+N.score,0)/D.length):0,"%"]})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:o.jsx(_l,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Passed"}),o.jsx("span",{className:"stat-value",children:D.filter(T=>T.status==="passed").length})]})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(T=>{const N=B(T.id),P=k(T.id);return o.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[N&&o.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:P?.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:P?.status==="passed"?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:P?.status==="passed"?o.jsxs(o.Fragment,{children:[o.jsx(Nn,{size:14})," Passed"]}):o.jsxs(o.Fragment,{children:[o.jsx(kr,{size:14})," Failed"]})}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Zr,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:T.title}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[o.jsx("span",{className:`difficulty-badge ${T.difficulty?.toLowerCase()}`,children:T.difficulty}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[o.jsx(ls,{size:14})," ",T.duration," min"]})]})]})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:16,color:"#8b5cf6"}),o.jsxs("span",{children:[T.questionCount||T.totalQuestions," Questions"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(_l,{size:16,color:"#f59e0b"}),o.jsxs("span",{children:["Pass: ",T.passingScore,"%"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Pn,{size:16,color:"#ef4444"}),o.jsxs("span",{children:["Tab Limit: ",T.maxTabSwitches||3]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vu,{size:16,color:"#06b6d4"}),o.jsxs("span",{children:["Attempts: ",j(T.id),"/",T.maxAttempts===-1?"":T.maxAttempts||1]})]}),T.startTime&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:y(T)?"#10b981":"#f59e42"},children:[o.jsx(ls,{size:16,color:y(T)?"#10b981":"#f59e42"}),o.jsx("span",{children:y(T)?`Started: ${new Date(T.startTime).toLocaleDateString()}`:`Starts: ${new Date(T.startTime).toLocaleString()}`})]}),T.deadline&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:x(T)?"#ef4444":"var(--text-muted)"},children:[o.jsx(ls,{size:16,color:x(T)?"#ef4444":"#10b981"}),o.jsx("span",{children:x(T)?"Expired":`Due: ${new Date(T.deadline).toLocaleString()}`})]})]}),N&&P&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),o.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:P.status==="passed"?"#10b981":"#ef4444"},children:[P.score,"%"]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:o.jsxs("span",{children:[P.correctCount,"/",P.totalQuestions," Correct"]})})]}),o.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:N?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>A(P),style:{flex:1,padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(gs,{size:18})," View Results"]}),I(T)?o.jsxs("button",{onClick:()=>v(T),style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"10px",color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vu,{size:18})," Retry (",O(T)," left)"]}):o.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(kr,{size:18})," No retries left"]})]}):y(T)?x(T)?o.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",border:"none",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(kr,{size:18})," Test Expired"]}):o.jsxs("button",{onClick:()=>v(T),style:{flex:1,padding:"0.75rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"10px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(dd,{size:18})," Start Test"]}):o.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",border:"none",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(kr,{size:18})," Not Yet Started"]})})]},T.id)})}),e.length===0&&o.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-muted)"},children:[o.jsx(Zr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No aptitude tests available at the moment."})]}),f&&o.jsx("div",{className:"modal-overlay",onClick:()=>A(null),children:o.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),style:{maxWidth:"600px"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:f.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.status==="passed"?o.jsx(_l,{size:20,color:"white"}):o.jsx(Br,{size:20,color:"white"})}),o.jsx("h2",{children:f.testTitle})]}),o.jsx("button",{onClick:()=>A(null),className:"modal-close",children:o.jsx(kr,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:[f.score,"%"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Score"})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:f.correctCount}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:f.totalQuestions-f.correctCount}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Wrong"})]})]}),o.jsx("h4",{style:{marginBottom:"1rem"},children:"Question Breakdown"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:f.questionResults?.map((T,N)=>o.jsx("div",{style:{background:T.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${T.isCorrect?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[T.isCorrect?o.jsx(Nn,{size:20,color:"#10b981",style:{flexShrink:0,marginTop:"2px"}}):o.jsx(kr,{size:20,color:"#ef4444",style:{flexShrink:0,marginTop:"2px"}}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,fontSize:"0.9rem"},children:["Q",N+1,": ",T.question]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem"},children:[o.jsxs("span",{children:["Your: ",o.jsx("strong",{style:{color:T.isCorrect?"#10b981":"#ef4444"},children:T.userAnswer})]}),!T.isCorrect&&o.jsxs("span",{children:["Correct: ",o.jsx("strong",{style:{color:"#10b981"},children:T.correctAnswer})]})]}),T.explanation&&o.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)",fontStyle:"italic"},children:[" ",T.explanation]})]})]})},N))})]})]})})]})}function ybt({user:t}){const{t:e}=E0(),[n,r]=C.useState("learning-path"),[s,i]=C.useState(null),[a,l]=C.useState(null),[c,u]=C.useState(null),[d,f]=C.useState(!0);if(C.useEffect(()=>{f(!0),(async()=>{try{const[g,y,x]=await Promise.all([Xe.get(`${Mi}/analytics/learning-path/${t.id}`),Xe.get(`${Mi}/analytics/peer-comparison/${t.id}`),Xe.get(`${Mi}/analytics/topics?studentId=${t.id}`)]);i(g.data),l(y.data),u(x.data)}catch(g){console.error(g)}f(!1)})()},[t.id]),d)return o.jsx("div",{className:"loading-spinner"});const A=[{id:"learning-path",label:e("learning_path"),icon:o.jsx(rye,{size:16})},{id:"peer-comparison",label:e("peer_comparison"),icon:o.jsx(od,{size:16})},{id:"topic-analysis",label:e("topic_analysis"),icon:o.jsx(Qge,{size:16})}];return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:A.map(m=>o.jsxs("button",{onClick:()=>r(m.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:n===m.id?"var(--primary)":"var(--card-bg)",color:n===m.id?"#fff":"var(--text-secondary)",boxShadow:n===m.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[m.icon," ",m.label]},m.id))}),n==="learning-path"&&s&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:o.jsx(Br,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsxs("div",{className:"stat-number",children:[s.overallPassRate,"%"]}),o.jsx("div",{className:"stat-label-text",children:e("overall_pass_rate")})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-green",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:o.jsx(Nn,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:s.totalPassed}),o.jsx("div",{className:"stat-label-text",children:e("problems_passed")})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:o.jsx(x7,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:s.totalAttempts}),o.jsx("div",{className:"stat-label-text",children:e("total_attempts")})]})]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[o.jsx(Pn,{size:18})," ",e("weak_areas")]}),s.weakAreas.length>0?s.weakAreas.map((m,g)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.06)",marginBottom:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:m.category}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[m.attempts," ",e("attempts_made")]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("span",{style:{fontWeight:700,color:"#ef4444",fontSize:"1.1rem"},children:[m.avgScore,"%"]}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"#ef4444"},children:[m.passRate,"% ",e("pass_rate")]})]})]},g)):o.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:e("no_weak_areas")})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",style:{color:"#10b981"},children:[o.jsx(Nn,{size:18})," ",e("strengths")]}),s.strengths.length>0?s.strengths.map((m,g)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(16,185,129,0.06)",marginBottom:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:m.category}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[m.attempts," ",e("attempts_made")]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("span",{style:{fontWeight:700,color:"#10b981",fontSize:"1.1rem"},children:[m.avgScore,"%"]}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"#10b981"},children:[m.passRate,"% ",e("pass_rate")]})]})]},g)):o.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:e("no_data")})]})]}),s.languageProficiency.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Lr,{size:18,color:"#3b82f6"})," ",e("language_proficiency")]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:s.languageProficiency.map((m,g)=>o.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",textAlign:"center"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:m.language}),o.jsx("div",{style:{display:"inline-block",padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:m.level==="Advanced"?"rgba(16,185,129,0.15)":m.level==="Intermediate"?"rgba(251,191,36,0.15)":"rgba(239,68,68,0.15)",color:m.level==="Advanced"?"#10b981":m.level==="Intermediate"?"#f59e0b":"#ef4444"},children:m.level}),o.jsxs("div",{style:{marginTop:"0.5rem"},children:[o.jsx("div",{style:{height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${m.avgScore}%`,borderRadius:"3px",background:m.level==="Advanced"?"#10b981":m.level==="Intermediate"?"#f59e0b":"#ef4444",transition:"width 0.5s"}})}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[m.avgScore,"% avg  ",m.attempts," solved"]})]})]},g))})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Qo,{size:18,color:"#f59e0b"})," ",e("recommended_problems")]}),s.recommendations.length>0?o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:s.recommendations.map((m,g)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",background:m.priority>=5?"rgba(239,68,68,0.12)":m.priority>=3?"rgba(251,191,36,0.12)":"rgba(59,130,246,0.12)",color:m.priority>=5?"#ef4444":m.priority>=3?"#f59e0b":"#3b82f6"},children:g+1}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:m.title}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:m.reason})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:m.difficulty==="easy"?"rgba(16,185,129,0.12)":m.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:m.difficulty==="easy"?"#10b981":m.difficulty==="medium"?"#f59e0b":"#ef4444"},children:m.difficulty}),m.language&&o.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",background:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:m.language})]})]},g))}):o.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:e("complete_more_problems")})]})]}),n==="peer-comparison"&&a&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:e("your_rank")}),o.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:["#",a.you.rank]}),o.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[e("out_of")," ",a.you.totalStudents," ",e("students")]})]}),o.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:e("percentile")}),o.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:[a.you.percentile,"th"]}),o.jsx("div",{style:{fontSize:"0.8rem",opacity:.8},children:e("top_performer_msg")})]})]}),o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Jg,{size:18,color:"#8b5cf6"})," ",e("your_score_vs_class")]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[{label:e("avg_score"),yours:a.you.avgScore,classVal:a.classAverage.avgScore,suffix:"%"},{label:e("pass_rate"),yours:a.you.passRate,classVal:a.classAverage.avgPassRate,suffix:"%"},{label:e("total_submissions"),yours:a.you.totalSubmissions,classVal:a.classAverage.avgSubmissions,suffix:""},{label:e("problems_solved_label"),yours:a.you.problemsSolved,classVal:a.classAverage.avgProblemsSolved,suffix:""},{label:e("tasks_completed"),yours:a.you.tasksDone,classVal:a.classAverage.avgTasksDone,suffix:""}].map((m,g)=>{const y=m.yours-m.classVal,x=y>0,v=y===0;return o.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase"},children:m.label}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--text-primary)"},children:[m.yours,m.suffix]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("you")})]}),o.jsxs("div",{style:{textAlign:"center",padding:"0.25rem 0.5rem",borderRadius:"8px",background:x?"rgba(16,185,129,0.1)":v?"rgba(156,163,175,0.1)":"rgba(239,68,68,0.1)"},children:[x?o.jsx(Rge,{size:14,color:"#10b981"}):v?o.jsx(q0e,{size:14,color:"#9ca3af"}):o.jsx(jge,{size:14,color:"#ef4444"}),o.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:700,color:x?"#10b981":v?"#9ca3af":"#ef4444"},children:[x?"+":"",y,m.suffix]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:600,color:"var(--text-secondary)"},children:[Math.round(m.classVal),m.suffix]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("class_avg")})]})]})]},g)})})]}),a.scoreDistribution&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Jg,{size:18,color:"#3b82f6"})," ",e("score_distribution")]}),o.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"4px",height:"120px",padding:"0 1rem"},children:a.scoreDistribution.map((m,g)=>{const y=Math.max(...a.scoreDistribution.map(v=>v.count)),x=y>0?m.count/y*100:0;return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[o.jsx("span",{style:{fontSize:"0.6rem",fontWeight:600},children:m.count}),o.jsx("div",{style:{width:"100%",height:`${x}%`,minHeight:"4px",borderRadius:"4px 4px 0 0",background:m.isYou?"linear-gradient(180deg, #3b82f6, #1e40af)":"rgba(59,130,246,0.15)",border:m.isYou?"2px solid #1e40af":"none",transition:"height 0.3s"}}),o.jsx("span",{style:{fontSize:"0.55rem",color:m.isYou?"#3b82f6":"var(--text-muted)",fontWeight:m.isYou?700:400},children:m.range})]},g)})}),o.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:e("highlighted_your_position")})]}),a.languageComparison.length>0&&o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Lr,{size:18,color:"#8b5cf6"})," ",e("language_vs_class")]}),o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:a.languageComparison.map((m,g)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[o.jsx("div",{style:{width:"80px",fontWeight:700,fontSize:"0.9rem"},children:m.language}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"4px"},children:[o.jsxs("span",{style:{fontSize:"0.7rem",color:"#3b82f6",width:"50px"},children:[e("you"),": ",m.yourScore,"%"]}),o.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${m.yourScore}%`,borderRadius:"4px",background:"linear-gradient(90deg, #3b82f6, #60a5fa)"}})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsxs("span",{style:{fontSize:"0.7rem",color:"#9ca3af",width:"50px"},children:[e("class"),": ",m.classAvg,"%"]}),o.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${m.classAvg}%`,borderRadius:"4px",background:"rgba(156,163,175,0.4)"}})})]})]}),o.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",padding:"0.25rem 0.5rem",borderRadius:"6px",color:m.difference>0?"#10b981":m.difference<0?"#ef4444":"#9ca3af",background:m.difference>0?"rgba(16,185,129,0.1)":m.difference<0?"rgba(239,68,68,0.1)":"rgba(156,163,175,0.1)"},children:[m.difference>0?"+":"",m.difference,"%"]})]},g))})]})]}),n==="topic-analysis"&&c&&o.jsxs("div",{children:[c.byType.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(j2,{size:18,color:"#3b82f6"})," ",e("performance_by_type")]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:c.byType.map((m,g)=>o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",textTransform:"capitalize"},children:m.type}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("submissions")}),o.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:m.submissions})]}),o.jsxs("div",{children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("avg_score")}),o.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",color:m.avgScore>=70?"#10b981":m.avgScore>=40?"#f59e0b":"#ef4444"},children:[m.avgScore,"%"]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("pass_rate")}),o.jsxs("div",{style:{fontWeight:700,color:"#10b981"},children:[m.passRate,"%"]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:e("fail_rate")}),o.jsxs("div",{style:{fontWeight:700,color:"#ef4444"},children:[m.failRate,"%"]})]})]}),o.jsx("div",{style:{marginTop:"0.75rem",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${m.passRate}%`,borderRadius:"3px",background:"linear-gradient(90deg, #10b981, #34d399)",transition:"width 0.5s"}})})]},g))})]}),c.byDifficulty.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Br,{size:18,color:"#f59e0b"})," ",e("performance_by_difficulty")]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:c.byDifficulty.map((m,g)=>{const x={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"}[m.difficulty]||"#3b82f6";return o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",borderLeft:`4px solid ${x}`},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1rem",textTransform:"capitalize",color:x,marginBottom:"0.75rem"},children:m.difficulty}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:800},children:[m.avgScore,"%"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[m.submissions," ",e("submissions"),"  ",m.passRate,"% ",e("pass_rate")]})]},g)})})]}),c.byLanguage.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Lr,{size:18,color:"#8b5cf6"})," ",e("performance_by_language")]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:e("language")}),o.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:e("submissions")}),o.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:e("avg_score")}),o.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:e("pass_rate")})]})}),o.jsx("tbody",{children:c.byLanguage.map((m,g)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.75rem",fontWeight:600},children:m.language}),o.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:m.submissions}),o.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:700,color:m.avgScore>=70?"#10b981":m.avgScore>=40?"#f59e0b":"#ef4444"},children:[m.avgScore,"%"]}),o.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx("div",{style:{width:"60px",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${m.passRate}%`,borderRadius:"3px",background:"#10b981"}})}),o.jsxs("span",{children:[m.passRate,"%"]})]})})]},g))})]})})]}),c.topProblems.length>0&&o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(x7,{size:18,color:"#ef4444"})," ",e("most_attempted_problems")]}),o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:c.topProblems.map((m,g)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",borderRadius:"8px",background:"var(--bg-secondary)"},children:[o.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem",color:"#3b82f6"},children:g+1}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:m.title}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[m.type,"  ",m.difficulty]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem"},children:[m.avgScore,"%"]}),o.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:[m.attempts," attempts  ",m.passRate,"% pass"]})]})]},g))})]})]})]})}const EJ="http://localhost:8000/api";function vAe({context:t="problem",onGenerate:e,isOpen:n,onClose:r}){const[s,i]=C.useState([{role:"assistant",content:t==="task"?` Hi! I'm your AI assistant for creating ML/AI tasks. I can help you:

 **Brainstorm** task ideas based on topics
 **Generate** complete task specifications
 **Suggest** improvements to your descriptions

Try asking: "Create a beginner-friendly sentiment analysis task" or "I need an image classification project"`:` Hi! I'm your AI assistant for creating coding problems. I can help you:

 **Brainstorm** problem ideas by topic or difficulty
 **Generate** complete problem specifications (including **SQL queries**!)
 **Suggest** test cases and edge cases

Try asking:
 "Create an easy array problem about finding duplicates"
 "Generate a SQL problem about employee salaries"
 "I need a hard dynamic programming challenge"`}]),[a,l]=C.useState(""),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[A,m]=C.useState(!1),g=C.useRef(null),y=()=>{g.current?.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{y()},[s]);const x=async()=>{if(!a.trim()||c)return;const j={role:"user",content:a};i(O=>[...O,j]),l(""),u(!0);const I=a.toLowerCase().includes("sql")||a.toLowerCase().includes("query")||a.toLowerCase().includes("database");try{if(a.toLowerCase().includes("create")||a.toLowerCase().includes("generate")||a.toLowerCase().includes("make")){const D=await Xe.post(`${EJ}/ai/generate-problem`,{prompt:a,type:t==="task"?"task":"problem",language:I?"SQL":"Python"});if(D.data.success&&D.data.generated){const T=D.data.generated,N=T.type==="SQL"||T.language==="SQL";let P;t==="task"?P=` I've generated an ML task for you!

**${T.title}**

 **Type:** ${T.type}
 **Difficulty:** ${T.difficulty}

 **Description:**
${T.description}

 **Requirements:**
${T.requirements}

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`:N?P=` I've generated a SQL problem for you!

**${T.title}**

 **Type:** SQL Query
 **Difficulty:** ${T.difficulty}

 **Description:**
${T.description}

 **Database Schema:**
\`\`\`sql
${T.sqlSchema||"Schema will be provided"}
\`\`\`

 **Expected Result:**
\`\`\`
${T.expectedQueryResult||T.expectedResult||"Result preview"}
\`\`\`

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`:P=` I've generated a coding problem for you!

**${T.title}**

 **Language:** ${T.language}
 **Difficulty:** ${T.difficulty}

 **Description:**
${T.description}

 **Sample Input:** \`${T.sampleInput}\`
 **Expected Output:** \`${T.expectedOutput}\`

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`,i(z=>[...z,{role:"assistant",content:P,generatedContent:T}]),u(!1);return}}const O=await Xe.post(`${EJ}/ai/chat`,{messages:[...s.slice(1),j].map(D=>({role:D.role,content:D.content})),context:t}),F={role:"assistant",content:O.data.response,generatedContent:O.data.generatedContent};i(D=>[...D,F])}catch(O){console.error("Chat error:",O),i(F=>[...F,{role:"assistant",content:` Sorry, I encountered an error: ${O.response?.data?.details||O.message}. Please try again!`}])}finally{u(!1)}},v=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),x())},w=j=>{e&&j&&e(j)},B=j=>{navigator.clipboard.writeText(JSON.stringify(j,null,2)),m(!0),setTimeout(()=>m(!1),2e3)},k=t==="task"?["Create a sentiment analysis task","Generate an image classification project","Build a regression task for housing prices","Create an NLP task for text classification"]:["Create an easy array problem","Generate a medium string manipulation problem","Make a hard dynamic programming challenge","Create a beginner-friendly recursion problem"];return n?o.jsxs("div",{style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",width:d?"320px":"420px",height:d?"auto":"600px",background:"linear-gradient(145deg, #1e293b, #0f172a)",borderRadius:"1.5rem",border:"1px solid rgba(59, 130, 246, 0.3)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 40px rgba(59, 130, 246, 0.15)",display:"flex",flexDirection:"column",overflow:"hidden",zIndex:9999,animation:"slideIn 0.3s ease-out"},children:[o.jsxs("div",{style:{padding:"1rem 1.25rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1))",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)"},children:o.jsx(Qo,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700,color:"#f8fafc"},children:["AI ",t==="task"?"Task":"Problem"," Generator"]}),o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"#94a3b8"},children:"Powered by Groq AI"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>f(!d),style:{background:"rgba(255,255,255,0.05)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center"},children:d?o.jsx(Am,{size:18}):o.jsx(EA,{size:18})}),o.jsx("button",{onClick:r,style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Os,{size:18})})]})]}),!d&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[s.map((j,I)=>o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexDirection:j.role==="user"?"row-reverse":"row"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:j.role==="user"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:j.role==="user"?o.jsx(MB,{size:16,color:"white"}):o.jsx(zB,{size:16,color:"white"})}),o.jsxs("div",{style:{maxWidth:"85%",padding:"0.75rem 1rem",borderRadius:j.role==="user"?"1rem 1rem 0 1rem":"1rem 1rem 1rem 0",background:j.role==="user"?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.15))":"rgba(30, 41, 59, 0.8)",border:`1px solid ${j.role==="user"?"rgba(16, 185, 129, 0.2)":"rgba(255,255,255,0.05)"}`,color:"#e2e8f0",fontSize:"0.9rem",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:[j.content,j.generatedContent&&o.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>w(j.generatedContent),style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.4rem"},children:[o.jsx(lO,{size:14})," Use This"]}),o.jsxs("button",{onClick:()=>B(j.generatedContent),style:{background:"rgba(255,255,255,0.1)",border:"none",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[A?o.jsx(rZ,{size:14,color:"#10b981"}):o.jsx(iZ,{size:14}),A?"Copied!":"Copy JSON"]})]})]})]},I)),c&&o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(zB,{size:16,color:"white"})}),o.jsxs("div",{style:{padding:"0.75rem 1rem",borderRadius:"1rem 1rem 1rem 0",background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",gap:"0.5rem",color:"#94a3b8"},children:[o.jsx(T0e,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"Thinking..."]})]}),o.jsx("div",{ref:g})]}),s.length<=1&&o.jsx("div",{style:{padding:"0 1rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((j,I)=>o.jsxs("button",{onClick:()=>l(j),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.4rem 0.75rem",borderRadius:"2rem",fontSize:"0.75rem",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.3rem"},children:[o.jsx(NA,{size:12})," ",j]},I))}),o.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(15, 23, 42, 0.5)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end"},children:[o.jsx("textarea",{value:a,onChange:j=>l(j.target.value),onKeyPress:v,placeholder:`Describe the ${t==="task"?"ML task":"coding problem"} you want...`,style:{flex:1,background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"0.75rem 1rem",color:"#f8fafc",fontSize:"0.9rem",resize:"none",minHeight:"44px",maxHeight:"120px",outline:"none"},rows:1}),o.jsx("button",{onClick:x,disabled:!a.trim()||c,style:{width:"44px",height:"44px",borderRadius:"12px",background:a.trim()&&!c?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(255,255,255,0.1)",border:"none",color:a.trim()&&!c?"white":"#64748b",cursor:a.trim()&&!c?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:o.jsx($c,{size:18})})]})})]}),o.jsx("style",{children:`
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]}):null}const xbt="http://localhost:8000/api",IJ=["#8b5cf6","#3b82f6","#10b981","#f59e0b","#ef4444","#06b6d4"];function wAe({studentId:t,studentName:e,onClose:n,requestedBy:r,requestedByRole:s}){const[i,a]=C.useState(!0),[l,c]=C.useState(null),[u,d]=C.useState(null),[f,A]=C.useState("overview"),[m,g]=C.useState({aptitude:!0,code:!1,tasks:!1}),y=C.useRef(null);C.useEffect(()=>{t&&(a(!0),Xe.post(`${xbt}/reports/student/${t}`,{requestedBy:r,requestedByRole:s}).then(j=>{console.log("Report data:",j.data),c(j.data),a(!1)}).catch(j=>{console.error("Failed to generate report:",j),d("Failed to generate report"),a(!1)}))},[t]);const x=async()=>{if(!l||!y.current)return;const j={...m};g({aptitude:!0,code:!0,tasks:!0}),setTimeout(async()=>{try{const I=await LU(y.current,{scale:2,backgroundColor:"#0f172a",useCORS:!0,logging:!1}),O=I.toDataURL("image/png",1),F=new Rn("p","mm","a4"),D=210,T=297,N=I.height*D/I.width;let P=N,z=0;for(F.addImage(O,"PNG",0,z,D,N),P-=T;P>=0;)z=P-N,F.addPage(),F.addImage(O,"PNG",0,z,D,N),P-=T;F.save(`${l.student.name}_Performance_Report.pdf`)}catch(I){console.error("PDF generation failed:",I)}g(j)},500)},v=j=>j>=80?"#10b981":j>=60?"#f59e0b":"#ef4444",w=j=>j>=90?{label:"Excellent",color:"#10b981"}:j>=80?{label:"Very Good",color:"#22c55e"}:j>=70?{label:"Good",color:"#84cc16"}:j>=60?{label:"Average",color:"#f59e0b"}:j>=50?{label:"Below Average",color:"#f97316"}:{label:"Needs Improvement",color:"#ef4444"};if(!t)return null;const B=()=>l?[{name:"Code",score:l.summary?.avgCodeScore||0,fullMark:100},{name:"Tasks",score:l.summary?.avgTaskScore||0,fullMark:100},{name:"Aptitude",score:l.summary?.avgAptitudeScore||0,fullMark:100}]:[],k=()=>l?.languageBreakdown?l.languageBreakdown.map((j,I)=>({name:j.language,value:j.count,avgScore:j.avgScore,color:IJ[I%IJ.length]})):[];return yge.createPortal(o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e5,backdropFilter:"blur(8px)"},onClick:n,children:o.jsxs("div",{style:{width:"95%",maxWidth:"1200px",maxHeight:"95vh",display:"flex",flexDirection:"column",overflow:"hidden",background:"#0f172a",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.08))"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(139, 92, 246, 0.3)"},children:o.jsx(ex,{size:28,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Comprehensive Performance Report"}),o.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.95rem"},children:e||"Loading..."})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l&&o.jsxs("button",{onClick:x,style:{background:"linear-gradient(135deg, #10b981, #06b6d4)",color:"white",border:"none",borderRadius:"12px",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s"},children:[o.jsx(ad,{size:18})," Download PDF"]}),o.jsx("button",{onClick:n,style:{background:"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"12px",padding:"0.75rem",cursor:"pointer",color:"#94a3b8",transition:"all 0.2s"},children:o.jsx(Os,{size:24})})]})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},ref:y,children:i?o.jsxs("div",{style:{textAlign:"center",padding:"5rem"},children:[o.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(139, 92, 246, 0.2)",borderTopColor:"#8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),o.jsx("p",{style:{color:"#94a3b8",marginTop:"1.5rem",fontWeight:500,fontSize:"1.1rem"},children:"Analyzing performance data..."})]}):u?o.jsxs("div",{style:{textAlign:"center",padding:"5rem"},children:[o.jsx(Pn,{size:64,color:"#ef4444",style:{marginBottom:"1.5rem",opacity:.8}}),o.jsx("h3",{style:{color:"white"},children:"Oops! Something went wrong"}),o.jsx("p",{style:{color:"#94a3b8"},children:u}),o.jsx("button",{onClick:n,style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"10px",fontWeight:600,cursor:"pointer"},children:"Close Modal"})]}):l?o.jsxs(o.Fragment,{children:[l.aiInsights?.overallAssessment&&o.jsxs("div",{style:{padding:"2rem",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.1))",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.2)",marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[o.jsx(Qo,{style:{position:"absolute",right:"2rem",top:"1.5rem",opacity:.2},size:48,color:"#8b5cf6"}),o.jsxs("h3",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#a78bfa",fontSize:"1.3rem"},children:[o.jsx(Zr,{size:24})," Executive Summary"]}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",fontSize:"1.05rem",lineHeight:1.7,maxWidth:"90%"},children:l.aiInsights.overallAssessment})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{padding:"1.75rem",background:"rgba(30, 41, 59, 0.5)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",gap:"1.5rem"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",fontWeight:800,color:"white",boxShadow:"0 8px 24px rgba(139, 92, 246, 0.3)"},children:l.student.name?.charAt(0).toUpperCase()}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.4rem",fontWeight:700},children:l.student.name}),o.jsx("p",{style:{margin:"0.3rem 0",color:"#94a3b8",fontSize:"0.95rem"},children:l.student.email}),l.mentor&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},children:[o.jsx(MB,{size:14,color:"#8b5cf6"}),o.jsxs("span",{style:{color:"#a78bfa",fontSize:"0.85rem"},children:["Mentor: ",l.mentor.name]})]})]})]}),o.jsxs("div",{style:{padding:"1.75rem",background:`linear-gradient(135deg, ${v(l.summary.overallAvgScore)}15, ${v(l.summary.overallAvgScore)}08)`,borderRadius:"20px",border:`1px solid ${v(l.summary.overallAvgScore)}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:v(l.summary.overallAvgScore),lineHeight:1},children:[l.summary.overallAvgScore,"%"]}),o.jsx("div",{style:{color:"#94a3b8",fontSize:"0.9rem",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600},children:"Overall Score"})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("div",{style:{padding:"0.75rem 1.5rem",borderRadius:"14px",background:v(l.summary.overallAvgScore),color:"white",fontWeight:800,fontSize:"1rem",boxShadow:`0 8px 20px ${v(l.summary.overallAvgScore)}40`},children:w(l.summary.overallAvgScore).label}),o.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"flex-end"},children:[o.jsx(ul,{size:16,color:"#f59e0b"}),o.jsxs("span",{style:{color:"#f59e0b",fontWeight:700,fontSize:"1.1rem"},children:["Rank #",l.summary.leaderboardRank]}),o.jsxs("span",{style:{color:"#64748b",fontSize:"0.85rem"},children:["of ",l.summary.totalStudents]})]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsx(Xk,{icon:Lr,label:"Code Submissions",value:l.summary.codeSubmissions,subLabel:`${l.summary.avgCodeScore}% avg score`,color:"#3b82f6"}),o.jsx(Xk,{icon:Br,label:"Tasks Completed",value:l.summary.completedTasks,subLabel:`${l.summary.avgTaskScore}% avg score`,color:"#10b981"}),o.jsx(Xk,{icon:Zr,label:"Aptitude Tests",value:l.summary.aptitudeTests,subLabel:`${l.summary.avgAptitudeScore}% avg score`,color:"#8b5cf6"}),o.jsx(Xk,{icon:ua,label:"Total Activities",value:l.summary.totalSubmissions,subLabel:`${l.summary.completedProblems} problems solved`,color:"#06b6d4"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",padding:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.1em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(uf,{size:18,color:"#8b5cf6"})," Performance Overview"]}),o.jsx(Xl,{width:"100%",height:280,children:o.jsxs(Cfe,{data:B(),children:[o.jsx(sU,{stroke:"rgba(255,255,255,0.1)"}),o.jsx(oU,{dataKey:"name",tick:{fill:"#94a3b8",fontSize:13}}),o.jsx(aU,{angle:30,domain:[0,100],tick:{fill:"#64748b",fontSize:11},tickFormatter:j=>`${j}%`}),o.jsx(mU,{name:"Score",dataKey:"score",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.4,strokeWidth:2}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px"},itemStyle:{color:"white"}})]})})]}),o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",padding:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.1em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Jg,{size:18,color:"#3b82f6"})," Score Breakdown"]}),o.jsx(Xl,{width:"100%",height:280,children:o.jsxs(G1,{data:B(),margin:{top:20,right:30,left:0,bottom:5},children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)",vertical:!1}),o.jsx(fh,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),o.jsx(hh,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:j=>`${j}%`}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px"},itemStyle:{color:"white"},cursor:{fill:"rgba(255,255,255,0.05)"}}),o.jsx(cm,{dataKey:"score",radius:[8,8,0,0],children:B().map((j,I)=>o.jsx(gf,{fill:v(j.score)},`cell-${I}`))})]})})]})]}),(l.languageBreakdown?.length>0||l.categoryAnalysis?.length>0)&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:l.languageBreakdown?.length>0&&l.categoryAnalysis?.length>0?"1fr 1fr":"1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[l.languageBreakdown?.length>0&&o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",padding:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.1em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lr,{size:18,color:"#06b6d4"})," Language Distribution"]}),o.jsx(Xl,{width:"100%",height:200,children:o.jsxs(uN,{children:[o.jsx(OS,{data:k(),cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:4,dataKey:"value",children:k().map((j,I)=>o.jsx(gf,{fill:j.color},`cell-${I}`))}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px"},itemStyle:{color:"white"}})]})}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginTop:"1rem",justifyContent:"center"},children:k().map((j,I)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:[o.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"3px",background:j.color}}),o.jsx("span",{style:{color:"white",fontWeight:600,fontSize:"0.85rem"},children:j.name}),o.jsxs("span",{style:{color:"#64748b",fontSize:"0.8rem"},children:[j.value," (",j.avgScore,"%)"]})]},I))})]}),l.categoryAnalysis?.length>0&&o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",padding:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",color:"#94a3b8",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.1em",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Br,{size:18,color:"#f59e0b"})," Category Performance"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.categoryAnalysis.map((j,I)=>o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{color:"white",fontWeight:600,fontSize:"0.95rem"},children:j.category}),o.jsxs("span",{style:{color:v(j.accuracy),fontWeight:700},children:[j.correct,"/",j.total," (",j.accuracy,"%)"]})]}),o.jsx("div",{style:{height:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"5px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${j.accuracy}%`,height:"100%",background:`linear-gradient(90deg, ${v(j.accuracy)}, ${v(j.accuracy)}cc)`,borderRadius:"5px",transition:"width 0.5s ease"}})})]},I))})]})]}),l.aiInsights&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2.5rem"},children:[o.jsxs("div",{style:{padding:"2rem",background:"rgba(16, 185, 129, 0.03)",borderRadius:"24px",border:"1px solid rgba(16, 185, 129, 0.15)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#10b981",fontSize:"1.2rem"},children:[o.jsx(_l,{size:24})," Key Strengths"]}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none",display:"flex",flexDirection:"column",gap:"1rem"},children:l.aiInsights.strengths?.map((j,I)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",color:"#e2e8f0",fontSize:"0.95rem"},children:[o.jsx("div",{style:{marginTop:"0.25rem",padding:"0.2rem",background:"#10b981",borderRadius:"50%"},children:o.jsx(Nn,{size:12,color:"white"})}),j]},I))})]}),o.jsxs("div",{style:{padding:"2rem",background:"rgba(245, 158, 11, 0.03)",borderRadius:"24px",border:"1px solid rgba(245, 158, 11, 0.15)"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#f59e0b",fontSize:"1.2rem"},children:[o.jsx(uf,{size:24})," Areas for Growth"]}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none",display:"flex",flexDirection:"column",gap:"1rem"},children:l.aiInsights.areasForImprovement?.map((j,I)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",color:"#e2e8f0",fontSize:"0.95rem"},children:[o.jsx("div",{style:{marginTop:"0.25rem",padding:"0.2rem",background:"#f59e0b",borderRadius:"50%"},children:o.jsx(Dg,{size:12,color:"white"})}),j]},I))})]})]}),l.aiInsights?.recommendations?.length>0&&o.jsxs("div",{style:{padding:"2rem",background:"rgba(59, 130, 246, 0.03)",borderRadius:"24px",border:"1px solid rgba(59, 130, 246, 0.15)",marginBottom:"2.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#60a5fa",fontSize:"1.2rem"},children:[o.jsx(aZ,{size:24})," Personalized Action Plan"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.aiInsights.recommendations.map((j,I)=>o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:800,fontSize:"0.85rem",flexShrink:0},children:I+1}),o.jsx("p",{style:{margin:0,color:"#e2e8f0",lineHeight:1.6,fontSize:"0.95rem"},children:j})]},I))})]}),l.integrity&&o.jsxs("div",{style:{padding:"2rem",background:"rgba(30, 41, 59, 0.4)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.05)",marginBottom:"2.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"white",fontSize:"1.2rem"},children:[o.jsx(Vs,{size:24,color:"#3b82f6"})," Proctoring & Integrity Summary"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[o.jsx(Yk,{label:"Tab Switches",value:l.integrity.tabSwitches||0,severity:l.integrity.tabSwitches>5?"high":l.integrity.tabSwitches>2?"medium":"low"}),o.jsx(Yk,{label:"Copy/Paste",value:l.integrity.copyPasteAttempts||0,severity:l.integrity.copyPasteAttempts>3?"high":l.integrity.copyPasteAttempts>1?"medium":"low"}),o.jsx(Yk,{label:"Camera Issues",value:l.integrity.cameraBlocked||0,severity:l.integrity.cameraBlocked>2?"high":l.integrity.cameraBlocked>0?"medium":"low"}),o.jsx(Yk,{label:"Plagiarism Flags",value:l.integrity.plagiarismCount||0,severity:l.integrity.plagiarismCount>0?"high":"low"})]})]}),l.recentSubmissions?.length>0&&o.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.05)",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(ls,{size:20,color:"#8b5cf6"}),o.jsx("h4",{style:{margin:0,color:"white",fontSize:"1.1rem"},children:"Recent Submissions"})]}),o.jsx("div",{style:{padding:"1rem"},children:l.recentSubmissions.slice(0,8).map((j,I)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:I%2===0?"rgba(255,255,255,0.02)":"transparent",borderRadius:"12px"},children:[o.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:j.status==="accepted"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:j.status==="accepted"?o.jsx(Nn,{size:22,color:"#10b981"}):o.jsx(kr,{size:22,color:"#ef4444"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:600,color:"white",fontSize:"0.95rem"},children:j.title}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"#64748b",marginTop:"0.25rem"},children:[j.language,"  ",j.type]})]}),o.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:v(j.score),padding:"0.4rem 1rem",background:`${v(j.score)}15`,borderRadius:"8px"},children:[j.score,"%"]})]},I))})]})]}):null}),l&&o.jsxs("div",{style:{padding:"1rem 2rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(30, 41, 59, 0.5)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem",color:"#64748b"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(k1,{size:14}),o.jsxs("span",{children:["Generated: ",new Date(l.generatedAt).toLocaleString()]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(MB,{size:14}),o.jsxs("span",{children:["Requested by: ",l.requestedBy||"System"]})]})]})]})}),document.body)}function Xk({icon:t,label:e,value:n,subLabel:r,color:s}){return o.jsxs("div",{style:{padding:"1.5rem",background:`linear-gradient(135deg, ${s}10, ${s}05)`,borderRadius:"16px",border:`1px solid ${s}20`,textAlign:"center",transition:"all 0.3s ease"},children:[o.jsx(t,{size:28,color:s,style:{marginBottom:"0.75rem"}}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"white"},children:n}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"0.25rem"},children:e}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:r})]})}function Yk({label:t,value:e,severity:n}){const s={low:"#10b981",medium:"#f59e0b",high:"#ef4444"}[n];return o.jsxs("div",{style:{padding:"1.25rem",background:`${s}10`,borderRadius:"14px",border:`1px solid ${s}20`,textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2.25rem",fontWeight:800,color:s},children:e}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"0.5rem"},children:t})]})}const Jk="http://localhost:8000/api";function SAe({problemId:t,problemTitle:e,isReadOnly:n=!1,onClose:r}){const[s,i]=C.useState([]),[a,l]=C.useState(!0),[c,u]=C.useState({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),[d,f]=C.useState(!1),[A,m]=C.useState(null),[g,y]=C.useState({});C.useEffect(()=>{x()},[t]);const x=async()=>{try{const j=await Xe.get(`${Jk}/problems/${t}/test-cases?role=mentor`);i(j.data),l(!1)}catch(j){console.error("Error fetching test cases:",j),l(!1)}},v=async()=>{try{await Xe.post(`${Jk}/problems/${t}/test-cases`,c),u({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),f(!1),x()}catch{alert("Error adding test case")}},w=async j=>{try{await Xe.put(`${Jk}/test-cases/${j}`,g),m(null),x()}catch{alert("Error updating test case")}},B=async j=>{if(window.confirm("Delete this test case?"))try{await Xe.delete(`${Jk}/test-cases/${j}`),x()}catch{alert("Error deleting test case")}},k=j=>{m(j.id),y({input:j.input,expectedOutput:j.expectedOutput,isHidden:j.isHidden,points:j.points,description:j.description})};return a?o.jsx("div",{className:"loading-spinner"}):o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:j=>j.stopPropagation(),style:{maxWidth:"900px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Nn,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0},children:"Test Cases Manager"}),e&&o.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"var(--text-muted)"},children:e})]})]}),o.jsx("button",{onClick:r,className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{flex:1,overflow:"auto",padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#3b82f6"},children:s.length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Test Cases"})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#10b981"},children:s.filter(j=>!j.isHidden).length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Visible"})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ef4444"},children:s.filter(j=>j.isHidden).length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Hidden"})]})]}),!n&&!d&&o.jsxs("button",{onClick:()=>f(!0),style:{width:"100%",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",border:"2px dashed rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:600,marginBottom:"1.5rem"},children:[o.jsx(zo,{size:18})," Add Test Case"]}),d&&o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:16})," New Test Case"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Input"}),o.jsx("textarea",{rows:"3",placeholder:"Enter test input...",value:c.input,onChange:j=>u({...c,input:j.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Expected Output"}),o.jsx("textarea",{rows:"3",placeholder:"Enter expected output...",value:c.expectedOutput,onChange:j=>u({...c,expectedOutput:j.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description (optional)"}),o.jsx("input",{type:"text",placeholder:"e.g., Edge case with empty array",value:c.description,onChange:j=>u({...c,description:j.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Points"}),o.jsx("input",{type:"number",min:"1",max:"100",value:c.points,onChange:j=>u({...c,points:parseInt(j.target.value)||10})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Visibility"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[o.jsx("input",{type:"checkbox",id:"isHidden",checked:c.isHidden,onChange:j=>u({...c,isHidden:j.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),o.jsxs("label",{htmlFor:"isHidden",style:{cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.isHidden?o.jsx(Zg,{size:16,color:"#ef4444"}):o.jsx(gs,{size:16,color:"#10b981"}),c.isHidden?"Hidden":"Visible"]})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>f(!1),style:{padding:"0.5rem 1rem",background:"var(--bg-dark)",border:"none",borderRadius:"6px",color:"var(--text-muted)",cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:v,style:{padding:"0.5rem 1rem",background:"var(--primary)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:16})," Add Test Case"]})]})]}),s.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[o.jsx(Pn,{size:48,style:{marginBottom:"1rem",opacity:.5}}),o.jsx("h3",{children:"No Test Cases"}),o.jsx("p",{children:"Add test cases to enable automated grading"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.map((j,I)=>o.jsx("div",{style:{background:"var(--bg-card)",border:`1px solid ${j.isHidden?"rgba(239, 68, 68, 0.3)":"var(--border-color)"}`,borderRadius:"10px",padding:"1rem",position:"relative"},children:A===j.id?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Input"}),o.jsx("textarea",{rows:"3",value:g.input,onChange:O=>y({...g,input:O.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Expected Output"}),o.jsx("textarea",{rows:"3",value:g.expectedOutput,onChange:O=>y({...g,expectedOutput:O.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>m(null),style:{padding:"0.4rem 0.75rem",background:"var(--bg-dark)",border:"none",borderRadius:"6px",color:"var(--text-muted)",cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:()=>w(j.id),style:{padding:"0.4rem 0.75rem",background:"var(--primary)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(tx,{size:14})," Save"]})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{width:"24px",height:"24px",background:"var(--primary)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:700},children:I+1}),o.jsx("span",{style:{fontWeight:600},children:j.description||`Test Case ${I+1}`}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:j.isHidden?"rgba(239, 68, 68, 0.15)":"rgba(16, 185, 129, 0.15)",color:j.isHidden?"#ef4444":"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[j.isHidden?o.jsx(Zg,{size:10}):o.jsx(gs,{size:10}),j.isHidden?"Hidden":"Visible"]}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:"rgba(251, 191, 36, 0.15)",color:"#fbbf24"},children:[j.points," pts"]})]}),!n&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>k(j),style:{padding:"0.4rem",background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",color:"#3b82f6",cursor:"pointer"},children:o.jsx(Lr,{size:14})}),o.jsx("button",{onClick:()=>B(j.id),style:{padding:"0.4rem",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:o.jsx(po,{size:14})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input:"}),o.jsx("code",{style:{display:"block",padding:"0.5rem",background:"var(--bg-dark)",borderRadius:"6px",fontSize:"0.8rem",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:j.input||"(empty)"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output:"}),o.jsx("code",{style:{display:"block",padding:"0.5rem",background:"var(--bg-dark)",borderRadius:"6px",fontSize:"0.8rem",color:"#4ade80",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:j.expectedOutput})]})]})]})},j.id))})]})]})})}function bbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState(!1),[l,c]=C.useState(new Set),[u,d]=C.useState(0);C.useEffect(()=>(as.joinMonitoring(t.id,"mentor"),a(!0),as.onMonitoringConnected(g=>{console.log(" Joined live monitoring:",g)}),as.onLiveUpdate(g=>{n(y=>[g,...y.slice(0,49)]),c(y=>{const x=new Set(y);return g.type==="submission_started"?(x.add(g.studentId),console.log(` Student ${g.studentName} started - Total working: ${x.size}`)):g.type==="submission_completed"&&(x.delete(g.studentId),console.log(` Student ${g.studentName} completed - Total working: ${x.size}`)),x})}),as.onLiveAlert(g=>{s(y=>[g,...y.slice(0,29)]),d(y=>y+1)}),()=>{as.disconnect(),a(!1)}),[t.id]);const f=g=>{s(y=>y.filter((x,v)=>v!==g))},A=g=>{switch(g){case"submission_started":return o.jsx(ua,{className:"w-4 h-4 text-blue-500"});case"submission_completed":return o.jsx(Nn,{className:"w-4 h-4 text-green-500"});case"progress_update":return o.jsx(ls,{className:"w-4 h-4 text-yellow-500"});case"test_failed":return o.jsx(Pn,{className:"w-4 h-4 text-orange-500"});default:return o.jsx(ua,{className:"w-4 h-4 text-gray-500"})}},m=g=>new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"live-monitoring-container",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Live Student Monitoring"}),o.jsxs("div",{className:"status-bar",children:[o.jsxs("div",{className:`status-item ${i?"active":"inactive"}`,children:[o.jsx("div",{className:"status-dot"}),o.jsx("span",{children:i?"Live Monitoring Active":"Not Monitoring"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"font-semibold text-blue-600",children:l.size}),o.jsx("span",{className:"ml-2",children:"Students Working"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"font-semibold text-red-600",children:u}),o.jsx("span",{className:"ml-2",children:"Alerts"})]})]}),o.jsxs("div",{className:"flex gap-6 mt-6",children:[o.jsxs("div",{className:"flex-1 max-w-md",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(Pn,{size:20,className:"text-red-500"}),"Proctoring Alerts"]}),o.jsx("div",{className:"alerts-list",children:r.length===0?o.jsx("div",{className:"empty-state",children:"No alerts"}):r.map((g,y)=>o.jsxs("div",{className:`alert-item severity-${g.severity}`,children:[o.jsxs("div",{className:"alert-header",children:[o.jsx("span",{className:"font-semibold",children:g.studentName||`Student ${g.studentId}`}),o.jsx("button",{className:"dismiss-btn",onClick:()=>f(y),title:"Dismiss",children:o.jsx(Os,{size:16})})]}),o.jsxs("div",{className:"alert-body",children:[o.jsx("div",{className:"violation-type",children:g.violationType.replace(/_/g," ").toUpperCase()}),o.jsx("div",{className:"severity-badge",children:g.severity.toUpperCase()})]}),o.jsx("div",{className:"alert-time",children:m(g.timestamp)}),g.requiresAction&&o.jsx("div",{className:"requires-action",children:" Requires immediate action"})]},y))})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(ua,{size:20,className:"text-blue-500"}),"Live Activity Feed"]}),o.jsx("div",{className:"updates-list",children:e.length===0?o.jsx("div",{className:"empty-state",children:"Waiting for activity..."}):e.map((g,y)=>o.jsxs("div",{className:`update-item type-${g.type}`,children:[o.jsx("div",{className:"update-icon",children:A(g.type)}),o.jsx("div",{className:"update-content",children:o.jsxs("div",{className:"update-title",children:[g.type==="submission_started"&&o.jsxs("span",{children:[o.jsx("strong",{children:g.studentName||`Student ${g.studentId}`})," started ",g.problemTitle,g.isProctored&&o.jsx("span",{className:"badge-proctored",children:"Proctored"})]}),g.type==="submission_completed"&&o.jsxs("span",{children:[o.jsx("strong",{children:g.studentName||`Student ${g.studentId}`})," completed ",g.problemTitle,o.jsx("span",{className:`badge-status status-${g.status}`,children:g.status.toUpperCase()}),g.score!==void 0&&o.jsxs("span",{className:"badge-score",children:["Score: ",g.score,"%"]})]}),g.type==="progress_update"&&o.jsxs("span",{children:[o.jsx("strong",{children:g.studentName||`Student ${g.studentId}`})," - ",g.problemId,o.jsxs("span",{className:"badge-progress",children:[g.progress,"% complete"]})]}),g.type==="test_failed"&&o.jsxs("span",{children:[o.jsx("strong",{children:g.studentName||`Student ${g.studentId}`})," - Test failed: ",g.testname]})]})}),o.jsx("div",{className:"update-time",children:m(g.timestamp)})]},y))})]})]})]})}const Zk="http://localhost:8000/api",vbt={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},NJ={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none",boxSizing:"border-box"},Y8={padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.4rem"},TJ={...Y8,background:"rgba(59,130,246,0.1)",color:"#3b82f6",border:"1px solid rgba(59,130,246,0.3)"},Qv={suggestion:{color:"#3b82f6",icon:dD,label:"Suggestion"},issue:{color:"#ef4444",icon:nO,label:"Issue"},praise:{color:"#10b981",icon:Nn,label:"Praise"},question:{color:"#f59e0b",icon:lZ,label:"Question"}};function wbt({submissionId:t,code:e,mentorId:n,studentId:r,readOnly:s=!1}){const[i,a]=C.useState([]),[l,c]=C.useState(null),[u,d]=C.useState({comment:"",feedbackType:"suggestion"}),[f,A]=C.useState(null),[m,g]=C.useState(new Set),[y,x]=C.useState(""),[v,w]=C.useState(!1),B=C.useCallback(async()=>{if(t){w(!0);try{const z=await Xe.get(`${Zk}/feedback/submission/${t}`);a(z.data.data||[]);const U=new Set;(z.data.data||[]).forEach(ee=>U.add(ee.line_number)),g(U)}catch(z){console.error(z)}w(!1)}},[t]);C.useEffect(()=>{B()},[B]);const k=async z=>{if(u.comment.trim())try{await Xe.post(`${Zk}/feedback`,{submissionId:t,mentorId:n,studentId:r,lineNumber:z,comment:u.comment,feedbackType:u.feedbackType}),c(null),d({comment:"",feedbackType:"suggestion"}),B()}catch(U){console.error(U)}},j=async z=>{try{await Xe.put(`${Zk}/feedback/${z}`,{comment:u.comment,feedbackType:u.feedbackType}),A(null),d({comment:"",feedbackType:"suggestion"}),B()}catch(U){console.error(U)}},I=async z=>{try{await Xe.delete(`${Zk}/feedback/${z}`),B()}catch(U){console.error(U)}},O=z=>{A(z.id),d({comment:z.comment,feedbackType:z.feedback_type})},F=(e||"").split(`
`),D={};i.filter(z=>!y||z.feedback_type===y).forEach(z=>{D[z.line_number]||(D[z.line_number]=[]),D[z.line_number].push(z)});const T=z=>{g(U=>{const ee=new Set(U);return ee.has(z)?ee.delete(z):ee.add(z),ee})},N=i.length,P=i.reduce((z,U)=>(z[U.feedback_type]=(z[U.feedback_type]||0)+1,z),{});return v&&i.length===0?o.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:o.jsx("div",{className:"loading-spinner"})}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:Object.entries(Qv).map(([z,U])=>{const ee=U.icon,q=P[z]||0;return o.jsxs("button",{onClick:()=>x(y===z?"":z),style:{padding:"0.3rem 0.7rem",borderRadius:"20px",border:`1px solid ${y===z?U.color:"var(--border-color)"}`,background:y===z?`${U.color}15`:"transparent",color:y===z?U.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.7rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.3rem"},children:[o.jsx(ee,{size:12})," ",U.label," (",q,")"]},z)})}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginLeft:"auto"},children:[N," total comments"]})]}),o.jsx("div",{style:{...vbt,padding:0,overflow:"hidden",fontFamily:"'Fira Code', 'Cascadia Code', 'Consolas', monospace",fontSize:"0.8rem"},children:F.map((z,U)=>{const ee=U+1,q=D[ee]||[],Z=q.length>0,G=m.has(ee);return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.03)",background:Z?"rgba(59,130,246,0.04)":"transparent",position:"relative"},onMouseEnter:ne=>{Z||(ne.currentTarget.style.background="rgba(255,255,255,0.02)")},onMouseLeave:ne=>{Z||(ne.currentTarget.style.background="transparent")},children:[o.jsx("div",{style:{width:"50px",padding:"0.2rem 0.5rem",textAlign:"right",color:"var(--text-muted)",userSelect:"none",borderRight:`2px solid ${Z?"#3b82f6":"transparent"}`,fontSize:"0.7rem",lineHeight:"1.6",flexShrink:0},children:ee}),o.jsx("pre",{style:{margin:0,padding:"0.2rem 0.75rem",flex:1,lineHeight:"1.6",overflow:"hidden",whiteSpace:"pre",color:"var(--text)"},children:z||" "}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",paddingRight:"0.5rem",flexShrink:0},children:[Z&&o.jsxs("button",{onClick:()=>T(ee),style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",padding:"0.15rem",display:"flex",alignItems:"center",gap:"0.2rem",fontSize:"0.65rem"},children:[o.jsx(lZ,{size:12})," ",q.length,G?o.jsx(Am,{size:10}):o.jsx(EA,{size:10})]}),!s&&o.jsx("button",{onClick:()=>{c(l===ee?null:ee),d({comment:"",feedbackType:"suggestion"})},style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"0.15rem",opacity:.5},onMouseEnter:ne=>ne.currentTarget.style.opacity=1,onMouseLeave:ne=>ne.currentTarget.style.opacity=.5,children:o.jsx("span",{style:{fontSize:"1rem",lineHeight:1},children:"+"})})]})]}),Z&&G&&q.map(ne=>{const K=Qv[ne.feedback_type]||Qv.suggestion,H=K.icon,Q=f===ne.id;return o.jsx("div",{style:{marginLeft:"52px",padding:"0.6rem 1rem",borderLeft:`3px solid ${K.color}`,background:`${K.color}08`,borderBottom:"1px solid var(--border-color)"},children:Q?o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:Object.entries(Qv).map(([X,re])=>o.jsx("button",{onClick:()=>d(le=>({...le,feedbackType:X})),style:{padding:"0.2rem 0.5rem",borderRadius:"12px",border:`1px solid ${u.feedbackType===X?re.color:"var(--border-color)"}`,background:u.feedbackType===X?`${re.color}20`:"transparent",color:u.feedbackType===X?re.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.65rem",fontWeight:600},children:re.label},X))}),o.jsx("textarea",{value:u.comment,onChange:X=>d(re=>({...re,comment:X.target.value})),style:{...NJ,fontSize:"0.8rem",minHeight:"60px",resize:"vertical"}}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{A(null),d({comment:"",feedbackType:"suggestion"})},style:{...TJ,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:"Cancel"}),o.jsxs("button",{onClick:()=>j(ne.id),style:{...Y8,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:[o.jsx(tx,{size:12})," Save"]})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.3rem"},children:[o.jsx(H,{size:12,color:K.color}),o.jsx("span",{style:{fontSize:"0.65rem",fontWeight:600,color:K.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:K.label}),o.jsxs("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)",marginLeft:"auto"},children:[ne.mentor_name||ne.mentor_id,"  ",new Date(ne.created_at).toLocaleDateString()]})]}),o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text)",lineHeight:1.5,fontFamily:"inherit",whiteSpace:"pre-wrap"},children:ne.comment}),!s&&o.jsxs("div",{style:{display:"flex",gap:"0.4rem",marginTop:"0.4rem"},children:[o.jsxs("button",{onClick:()=>O(ne),style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.2rem"},children:[o.jsx(dZ,{size:10})," Edit"]}),o.jsxs("button",{onClick:()=>I(ne.id),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.2rem"},children:[o.jsx(po,{size:10})," Delete"]})]})]})},ne.id)}),l===ee&&o.jsxs("div",{style:{marginLeft:"52px",padding:"0.75rem 1rem",background:"rgba(59,130,246,0.06)",borderLeft:"3px solid #3b82f6",borderBottom:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:Object.entries(Qv).map(([ne,K])=>o.jsx("button",{onClick:()=>d(H=>({...H,feedbackType:ne})),style:{padding:"0.2rem 0.5rem",borderRadius:"12px",border:`1px solid ${u.feedbackType===ne?K.color:"var(--border-color)"}`,background:u.feedbackType===ne?`${K.color}20`:"transparent",color:u.feedbackType===ne?K.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.65rem",fontWeight:600},children:K.label},ne))}),o.jsx("textarea",{value:u.comment,onChange:ne=>d(K=>({...K,comment:ne.target.value})),placeholder:`Add feedback for line ${ee}...`,style:{...NJ,fontSize:"0.8rem",minHeight:"60px",resize:"vertical"},autoFocus:!0}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>c(null),style:{...TJ,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:"Cancel"}),o.jsxs("button",{onClick:()=>k(ee),style:{...Y8,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:[o.jsx($c,{size:12})," Add"]})]})]})]},ee)})})]})}const ql="http://localhost:8000/api",Y6=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"];function Sbt(){const{user:t}=Rb(),{t:e}=E0(),n=xf(),[r,s]=C.useState(""),[i,a]=C.useState("");C.useEffect(()=>{switch(n.pathname.split("/").pop()){case"upload-problems":s(e("upload_problems")),a(e("create_problems_subtitle"));break;case"leaderboard":s(e("leaderboard")),a(e("student_rankings"));break;case"all-submissions":s(e("all_submissions")),a(e("review_student_work"));break;case"live-monitoring":s(e("live_student_monitoring")),a(e("realtime_activity_subtitle"));break;case"analytics":s(e("analytics")),a(e("analytics_dashboard_subtitle"));break;case"messaging":s("Direct Messaging"),a("Chat with your students");break;default:s(e("dashboard")),a(e("welcome_back_name",{name:t?.name||""}))}},[n,t,e]);const l=[{path:"/mentor",label:e("dashboard"),icon:o.jsx(fD,{size:20})},{label:"Content Management",icon:o.jsx(IA,{size:20}),defaultExpanded:!1,children:[{path:"/mentor/upload-problems",label:e("upload_problems"),icon:o.jsx(IA,{size:20})}]},{label:"Monitoring",icon:o.jsx(ua,{size:20}),defaultExpanded:!1,children:[{path:"/mentor/leaderboard",label:e("leaderboard"),icon:o.jsx(ul,{size:20})},{path:"/mentor/all-submissions",label:e("all_submissions"),icon:o.jsx(oZ,{size:20})},{path:"/mentor/analytics",label:e("analytics"),icon:o.jsx(uf,{size:20})},{path:"/mentor/live-monitoring",label:e("live_monitoring"),icon:o.jsx(ua,{size:20})}]}];return o.jsx(AD,{navItems:l,title:r,subtitle:i,children:o.jsxs($j,{children:[o.jsx(os,{path:"/",element:o.jsx(Cbt,{user:t})}),o.jsx(os,{path:"/upload-problems",element:o.jsx(kbt,{user:t})}),o.jsx(os,{path:"/leaderboard",element:o.jsx(Bbt,{user:t})}),o.jsx(os,{path:"/all-submissions",element:o.jsx(jbt,{user:t})}),o.jsx(os,{path:"/analytics",element:o.jsx(Ibt,{user:t})}),o.jsx(os,{path:"/live-monitoring",element:o.jsx(bbt,{user:t})})]})})}function Cbt({user:t}){const[e,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{Xe.get(`${ql}/analytics/mentor/${t.id}`).then(a=>{n(a.data),s(!1)}).catch(a=>s(!1))},[t.id]);const i=a=>{if(!a)return"Never";const l=new Date(a),u=new Date-l,d=Math.floor(u/6e4),f=Math.floor(d/60),A=Math.floor(f/24);return d<1?"Just now":d<60?`${d}m ago`:f<24?`${f}h ago`:A<7?`${A}d ago`:l.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return r?o.jsx("div",{className:"loading-spinner"}):e?o.jsxs("div",{className:"dashboard-container animate-fadeIn",children:[o.jsxs("div",{className:"dashboard-stats-grid",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:[o.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:o.jsx(od,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.totalStudents}),o.jsx("div",{className:"stat-label-text",children:"Students"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:o.jsx(qi,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.taskSubmissions||0}),o.jsx("div",{className:"stat-label-text",children:"Task Subs"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-emerald",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #059669, #10b981)"},children:o.jsx(Lr,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.codeSubmissions||0}),o.jsx("div",{className:"stat-label-text",children:"Code Subs"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-pink",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #be185d, #ec4899)"},children:o.jsx(Zr,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.aptitudeSubmissions||0}),o.jsx("div",{className:"stat-label-text",children:"Aptitude"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-green",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:o.jsx(Nn,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsxs("div",{className:"stat-number",children:[e.avgScore,"%"]}),o.jsx("div",{className:"stat-label-text",children:"Avg Score"})]})]})}),o.jsx("div",{className:"dashboard-stat-card stat-card-orange",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #c2410c, #f97316)"},children:o.jsx(uf,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:e.totalTasks+e.totalProblems}),o.jsx("div",{className:"stat-label-text",children:"Content"})]})]})})]}),o.jsxs("div",{className:"mentor-charts-grid",children:[o.jsxs("div",{className:"dashboard-panel mentor-chart-large",children:[o.jsx("div",{className:"chart-header",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[o.jsx(fu,{size:18,color:"#8b5cf6"})," Group Submission Trends"]}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Last 7 days mentee activity"})]})}),o.jsx("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:o.jsx(Xl,{children:o.jsxs(CU,{data:e.submissionTrends,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorCountMentor",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.4}),o.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),o.jsx(fh,{dataKey:"date",stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),o.jsx(hh,{stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),o.jsx(Jl,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},itemStyle:{color:"#8b5cf6"},labelStyle:{color:"var(--text)"}}),o.jsx(cN,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountMentor)"})]})})})]}),o.jsxs("div",{className:"dashboard-panel mentor-chart-small",children:[o.jsx("div",{className:"chart-header",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[o.jsx(Lr,{size:18,color:"#3b82f6"})," Language Usage"]}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Mentee preference"})]})}),o.jsxs("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:[o.jsx(Xl,{children:o.jsxs(uN,{children:[o.jsx(OS,{data:e.languageStats,cx:"50%",cy:"50%",innerRadius:65,outerRadius:90,paddingAngle:4,dataKey:"value",stroke:"none",children:e.languageStats.map((a,l)=>o.jsx(gf,{fill:Y6[l%Y6.length]},`cell-${l}`))}),o.jsx(Jl,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px"},itemStyle:{color:"var(--text)"}})]})}),o.jsx("div",{className:"language-legend",children:e.languageStats.slice(0,4).map((a,l)=>o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot",style:{background:Y6[l]}}),o.jsx("span",{className:"legend-text",children:a.name})]},a.name))})]})]})]}),o.jsx("div",{className:"mentor-bottom-grid",style:{gridTemplateColumns:"1fr"},children:o.jsxs("div",{className:"dashboard-panel",children:[o.jsx("div",{className:"panel-header",children:o.jsxs("h3",{className:"panel-title",style:{margin:0},children:[o.jsx(ua,{size:18,color:"#8b5cf6"})," Recent Activity"]})}),o.jsx("div",{className:"submissions-list",children:e.recentActivity&&e.recentActivity.length>0?e.recentActivity.map((a,l)=>o.jsxs("div",{className:"submission-item",children:[o.jsx("div",{className:`activity-status-dot ${a.status}`}),o.jsxs("div",{className:"submission-info",children:[o.jsx("div",{className:"submission-title",children:a.studentName}),o.jsxs("div",{className:"submission-meta",children:[o.jsx(ls,{size:12})," ",i(a.time)]})]}),o.jsxs("span",{className:`submission-status ${a.status}`,children:[a.score,"%"]})]},a.id)):o.jsxs("div",{className:"empty-state-small",children:[o.jsx(ua,{size:32,color:"var(--text-muted)"}),"No recent activity"]})})]})})]}):o.jsx("div",{children:"Error loading stats"})}function kbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState(!0),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[f,A]=C.useState("coding"),[m,g]=C.useState(!1),y=C.useRef(null),[x,v]=C.useState(null),[w,B]=C.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),k=w.type==="SQL"||w.language==="SQL",j=U=>{const ee=U.type==="SQL"||U.language==="SQL";B({title:U.title||"",type:U.type||"Coding",language:U.language||"Python",difficulty:U.difficulty||"Medium",description:U.description||"",testInput:ee?"":U.sampleInput||"",expectedOutput:ee?"":U.expectedOutput||"",sqlSchema:ee&&(U.sqlSchema||U.schema)||"",expectedQueryResult:ee&&(U.expectedQueryResult||U.expectedResult)||"",deadline:w.deadline,status:U.status||"live",enableProctoring:w.enableProctoring,enableVideoAudio:w.enableVideoAudio,disableCopyPaste:w.disableCopyPaste,trackTabSwitches:w.trackTabSwitches,maxTabSwitches:w.maxTabSwitches,enableFaceDetection:w.enableFaceDetection,detectMultipleFaces:w.detectMultipleFaces,trackFaceLookaway:w.trackFaceLookaway}),d(!1),c(!0)},I=async()=>{try{const[U,ee]=await Promise.all([Xe.get(`${ql}/problems?mentorId=${t.id}`),Xe.get(`${ql}/mentors/${t.id}/students`)]);n(Array.isArray(U.data)?U.data:U.data?.data||[]),s(ee.data),a(!1)}catch{a(!1)}};C.useEffect(()=>{I()},[t.id]);const O=async U=>{const ee=U.target.files[0];if(ee){g(!0);try{const Z=(await ee.text()).split(`
`).filter(H=>H.trim()).map(H=>H.trim());if(Z.length<2){alert("CSV must have header + at least one row");return}const G=H=>{const Q=[];let X="",re=!1;for(let le=0;le<H.length;le++){const Ae=H[le];Ae==='"'?re=!re:Ae===","&&!re?(Q.push(X.trim()),X=""):X+=Ae}return Q.push(X.trim()),Q},ne=G(Z[0]).map(H=>H.toLowerCase());let K=0;for(let H=1;H<Z.length;H++){if(!Z[H].trim())continue;const Q=G(Z[H]),X={};if(ne.forEach((me,ve)=>X[me]=Q[ve]||""),!X.title||!X.description)continue;const re=(X.type||"").toUpperCase()==="SQL"||(X.language||"").toUpperCase()==="SQL",le=()=>X.testinput||X.test_input||X.testinput||X.sample_input||X.sampleinput||X["sample input"]||X["test input"]||"",Ae=()=>X.expectedoutput||X.expected_output||X.expectedresult||X.expected_result||X["expected output"]||X["expected result"]||"",xe=()=>X.sqlschema||X.sql_schema||X.schema||X["sql schema"]||"",Be=()=>X.expectedqueryresult||X.expected_query_result||X.expectedresult||X.expected_result||X["expected query result"]||"";await Xe.post(`${ql}/problems`,{title:X.title,type:re?"SQL":X.type||"Coding",language:re?"SQL":X.language||"Python",difficulty:(X.difficulty||"Medium").charAt(0).toUpperCase()+(X.difficulty||"Medium").slice(1).toLowerCase(),description:X.description||"",testInput:le(),expectedOutput:Ae(),sqlSchema:re?xe():"",expectedQueryResult:re?Be():"",deadline:X.deadline||"",status:X.status||"live",mentorId:t.id}),K++}alert(`Created ${K} problems from CSV!`),I()}catch(q){alert("CSV upload failed: "+(q.response?.data?.error||q.message))}finally{g(!1),U.target.value=""}}},F=async U=>{U.preventDefault();try{await Xe.post(`${ql}/problems`,{...w,mentorId:t.id}),c(!1),B({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),I()}catch{alert("Error creating problem")}},D=async U=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await Xe.delete(`${ql}/problems/${U}`),I()}catch{alert("Error deleting problem")}},T=U=>{const ee=U.completedBy?.length||0;return ee===0||ee>=r.length&&r.length>0};if(i)return o.jsx("div",{className:"loading-spinner"});const N=e.filter(U=>U.language!=="SQL"&&U.type!=="SQL"),P=e.filter(U=>U.language==="SQL"||U.type==="SQL"),z=f==="coding"?N:P;return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Coding Problems"}),o.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Manage your problem library (C, C++, Python, Java, SQL)"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"file",accept:".csv",ref:y,style:{display:"none"},onChange:O}),o.jsxs("button",{onClick:()=>y.current?.click(),disabled:m,style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mj,{size:18})," ",m?"Uploading...":"CSV Upload"]}),o.jsxs("button",{onClick:()=>d(!0),style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:18})," AI Generate"]}),o.jsxs("button",{onClick:()=>c(!0),className:"btn-create-new",style:{padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:20})," Create Manually"]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[o.jsxs("button",{onClick:()=>A("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:f==="coding"?"var(--primary)":"transparent",color:f==="coding"?"white":"var(--text-muted)"},children:[o.jsx(Lr,{size:18}),"Coding Problems",o.jsx("span",{style:{background:f==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:N.length})]}),o.jsxs("button",{onClick:()=>A("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:f==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:f==="sql"?"white":"var(--text-muted)"},children:[o.jsx(qi,{size:18}),"SQL Problems",o.jsx("span",{style:{background:f==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:P.length})]})]}),o.jsxs("div",{className:"card glass",children:[o.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[o.jsx(ul,{size:20,style:{color:"#f59e0b"}})," Problem Leaderboard"]}),o.jsx("div",{className:"table-container",style:{border:"none"},children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Problem Title"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Language"}),o.jsx("th",{children:"Difficulty"}),o.jsx("th",{children:"Created"}),o.jsx("th",{children:"Completion"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:z.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:"7",style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:["No ",f==="sql"?"SQL":"coding"," problems found. Create one to get started!"]})}):z.map(U=>o.jsxs("tr",{children:[o.jsx("td",{style:{fontWeight:600},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[U.title,U.proctoring?.enabled&&o.jsxs("span",{style:{fontSize:"0.6rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(gs,{size:10})," Proctored"]})]})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:U.type?.toUpperCase()})}),o.jsx("td",{children:o.jsx("span",{style:{fontWeight:500},children:U.language})}),o.jsx("td",{children:o.jsx("span",{className:`difficulty-badge ${U.difficulty?.toLowerCase()}`,children:U.difficulty})}),o.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(U.createdAt).toLocaleDateString()}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{style:{width:"80px",height:"6px",background:"var(--border-color)",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${r.length>0?(U.completedBy?.length||0)/r.length*100:0}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #8b5cf6)"}})}),o.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[U.completedBy?.length||0,"/",r.length]})]})}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${U.status}`,children:U.status})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>v(U),disabled:U.language==="SQL"||U.type==="SQL",style:{background:U.language==="SQL"||U.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:U.language==="SQL"||U.type==="SQL"?"#64748b":"#10b981",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:U.language==="SQL"||U.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:U.language==="SQL"||U.type==="SQL"?.5:1},title:U.language==="SQL"||U.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[o.jsx(Zd,{size:14})," Tests"]}),o.jsx("button",{onClick:()=>D(U.id),disabled:!T(U),style:{background:T(U)?"rgba(239, 68, 68, 0.1)":"rgba(148, 163, 184, 0.1)",border:"none",color:T(U)?"#ef4444":"#64748b",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:T(U)?"pointer":"not-allowed",fontSize:"0.8rem"},title:T(U)?"Delete problem":"Cannot delete while students are in progress",children:o.jsx(po,{size:14})})]})})]},U.id))})]})})]}),l&&o.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:o.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(IA,{size:20,color:"white"})}),o.jsx("h2",{children:"Create New Problem"})]}),o.jsx("button",{onClick:()=>c(!1),className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsx("div",{className:"modal-body premium-form",children:o.jsxs("form",{onSubmit:F,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Problem Title"}),o.jsx("input",{type:"text",placeholder:"Enter problem title",value:w.title,onChange:U=>B({...w,title:U.target.value}),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Problem Type"}),o.jsxs("select",{value:w.type,onChange:U=>{const ee=U.target.value;B({...w,type:ee,language:ee==="SQL"?"SQL":w.language==="SQL"?"Python":w.language})},children:[o.jsx("option",{value:"Coding",children:"Coding"}),o.jsx("option",{value:"SQL",children:"SQL"}),o.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Language"}),o.jsxs("select",{value:w.language,onChange:U=>{const ee=U.target.value;B({...w,language:ee,type:ee==="SQL"?"SQL":w.type==="SQL"?"Coding":w.type})},children:[o.jsx("option",{value:"Python",children:"Python"}),o.jsx("option",{value:"JavaScript",children:"JavaScript"}),o.jsx("option",{value:"Java",children:"Java"}),o.jsx("option",{value:"C",children:"C"}),o.jsx("option",{value:"C++",children:"C++"}),o.jsx("option",{value:"SQL",children:"SQL"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Difficulty"}),o.jsxs("select",{value:w.difficulty,onChange:U=>B({...w,difficulty:U.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Status"}),o.jsxs("select",{value:w.status,onChange:U=>B({...w,status:U.target.value}),children:[o.jsx("option",{value:"live",children:"Live"}),o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"closed",children:"Closed"})]})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsx("label",{className:"form-label",children:"Problem Description"}),o.jsx("textarea",{rows:"5",placeholder:"Describe the problem...",value:w.description,onChange:U=>B({...w,description:U.target.value}),required:!0})]}),k?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lr,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),o.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:w.sqlSchema,onChange:U=>B({...w,sqlSchema:U.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Nn,{size:14,color:"#10b981"})," Expected Query Result"]}),o.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:w.expectedQueryResult,onChange:U=>B({...w,expectedQueryResult:U.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Sample Input"}),o.jsx("input",{type:"text",placeholder:"e.g., [1, 2, 3]",value:w.testInput,onChange:U=>B({...w,testInput:U.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Expected Output"}),o.jsx("input",{type:"text",placeholder:"e.g., 6",value:w.expectedOutput,onChange:U=>B({...w,expectedOutput:U.target.value})})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),o.jsx("input",{type:"date",value:w.deadline,onChange:U=>B({...w,deadline:U.target.value})})]}),o.jsxs("div",{style:{padding:"1.25rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx(gs,{size:18,color:"#8b5cf6"}),o.jsx("span",{style:{fontWeight:600,color:"#8b5cf6"},children:"Proctoring Settings"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"enableProctoring",checked:w.enableProctoring,onChange:U=>B({...w,enableProctoring:U.target.checked}),style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),o.jsx("label",{htmlFor:"enableProctoring",style:{cursor:"pointer",fontSize:"0.9rem"},children:"Enable Proctoring Mode"})]}),w.enableProctoring&&o.jsxs("div",{style:{marginLeft:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"enableVideoAudio",checked:w.enableVideoAudio,onChange:U=>B({...w,enableVideoAudio:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),o.jsx("label",{htmlFor:"enableVideoAudio",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Enable Video & Audio Monitoring"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"disableCopyPaste",checked:w.disableCopyPaste,onChange:U=>B({...w,disableCopyPaste:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),o.jsx("label",{htmlFor:"disableCopyPaste",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Disable Copy/Paste"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"trackTabSwitches",checked:w.trackTabSwitches,onChange:U=>B({...w,trackTabSwitches:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),o.jsx("label",{htmlFor:"trackTabSwitches",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Track Tab Switches"})]}),w.trackTabSwitches&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginLeft:"1.5rem"},children:[o.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:w.maxTabSwitches,onChange:U=>B({...w,maxTabSwitches:parseInt(U.target.value)||3}),style:{width:"60px",padding:"0.25rem 0.5rem",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"white",textAlign:"center"}})]}),o.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"enableFaceDetection",checked:w.enableFaceDetection,onChange:U=>B({...w,enableFaceDetection:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#ec4899"}}),o.jsx("label",{htmlFor:"enableFaceDetection",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Enable Face Detection"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"detectMultipleFaces",checked:w.detectMultipleFaces,onChange:U=>B({...w,detectMultipleFaces:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#ef4444"}}),o.jsx("label",{htmlFor:"detectMultipleFaces",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Detect Multiple Faces (Cheating)"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",id:"trackFaceLookaway",checked:w.trackFaceLookaway,onChange:U=>B({...w,trackFaceLookaway:U.target.checked}),style:{width:"16px",height:"16px",accentColor:"#3b82f6"}}),o.jsx("label",{htmlFor:"trackFaceLookaway",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Track Face Lookaway"})]})]})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-reset",onClick:()=>c(!1),children:"Cancel"}),o.jsxs("button",{type:"submit",className:"btn-create-new",children:[o.jsx(zo,{size:16})," Create Problem"]})]})]})})]})}),o.jsx(vAe,{context:"problem",isOpen:u,onClose:()=>d(!1),onGenerate:j}),x&&o.jsx(SAe,{problemId:x.id,problemTitle:x.title,onClose:()=>v(null)})]})}function Bbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,a]=C.useState(null);if(C.useEffect(()=>{Xe.get(`${ql}/leaderboard?mentorId=${t.id}`).then(d=>{n(d.data),s(!1)}).catch(d=>s(!1))},[t.id]),r)return o.jsx("div",{className:"loading-spinner"});const l=d=>d===1?{color:"#fbbf24",transform:"scale(1.2)"}:d===2?{color:"#94a3b8",transform:"scale(1.1)"}:d===3?{color:"#b45309",transform:"scale(1.1)"}:{color:"var(--text-muted)"},c=d=>d===1?o.jsx(ul,{size:24,fill:"#fbbf24",color:"#d97706"}):d===2?o.jsx(b7,{size:24,fill:"#e2e8f0",color:"#64748b"}):d===3?o.jsx(b7,{size:24,fill:"#fbbf24",color:"#b45309"}):o.jsxs("span",{style:{fontWeight:600,fontSize:"1.1rem",width:"24px",textAlign:"center",display:"inline-block"},children:["#",d]}),u=d=>d.violations?(d.violations.tabSwitches||0)+(d.violations.copyPaste||0)+(d.violations.cameraBlocked||0)+(d.violations.phoneDetection||0)+(d.violations.integrityViolations||0)+(d.violations.plagiarism||0):0;return o.jsxs("div",{className:"card animate-slideUp glass",style:{padding:"0 0 1rem 0",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"2rem 2rem 1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(ul,{size:28,className:"text-primary"}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.5rem"},children:"Student Leaderboard"}),o.jsx("p",{style:{margin:"4px 0 0",color:"var(--text-muted)",fontSize:"0.9rem"},children:"Rankings based on scores"})]})]}),o.jsx("div",{className:"table-container",style:{border:"none",borderRadius:0},children:o.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:"0 8px",padding:"0 1rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{paddingLeft:"2rem"},children:"Rank"}),o.jsx("th",{children:"Student"}),o.jsx("th",{children:"Total Score"}),o.jsx("th",{children:"Submissions"}),o.jsx("th",{children:"Violations"}),o.jsx("th",{style:{textAlign:"center"},children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:e.map((d,f)=>{const m=u(d)>0||d.violations?.plagiarism>0;return o.jsxs("tr",{className:"leaderboard-row",style:{backgroundColor:f<3?"var(--bg-dark)":"transparent",transition:"transform 0.2s"},children:[o.jsx("td",{style:{paddingLeft:"2rem"},children:o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",...l(f+1)},children:c(f+1)})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{className:"avatar-circle",children:d.name.charAt(0).toUpperCase()}),o.jsx("div",{children:o.jsx("div",{style:{fontWeight:600,fontSize:"1rem"},children:d.name})})]})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:700,fontSize:"1.1rem",color:"var(--primary)"},children:[d.avgScore," ",o.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",fontWeight:400},children:"pts"})]})}),o.jsx("td",{children:o.jsxs("div",{className:"status-badge live",style:{width:"fit-content"},children:[d.acceptedSubmissions||d.totalSubmissions," Submitted"]})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[d.violations?.tabSwitches>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Tab Switches",children:[o.jsx(gs,{size:10})," ",d.violations.tabSwitches]}),d.violations?.cameraBlocked>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Camera Blocked",children:[" ",d.violations.cameraBlocked]}),d.violations?.phoneDetection>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Phone Detected",children:[" ",d.violations.phoneDetection]}),d.violations?.copyPaste>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Copy/Paste",children:[" ",d.violations.copyPaste]}),d.violations?.plagiarism>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Plagiarism",children:[o.jsx(Pn,{size:10})," ",d.violations.plagiarism]}),!m&&o.jsx("span",{style:{color:"#10b981"},children:o.jsx(Nn,{size:14})})]})}),o.jsx("td",{style:{textAlign:"center"},children:o.jsx("div",{style:{width:"100px",height:"6px",backgroundColor:"var(--border-color)",borderRadius:"10px",margin:"0 auto",overflow:"hidden"},children:o.jsx("div",{style:{width:`${Math.min(d.avgScore,100)}%`,height:"100%",backgroundColor:m?"#f59e0b":f===0?"#fbbf24":"var(--primary)"}})})}),o.jsx("td",{children:o.jsxs("button",{onClick:()=>a({id:d.studentId,name:d.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[o.jsx(qi,{size:14}),"Report"]})})]},d.studentId)})})]})}),i&&o.jsx(wAe,{studentId:i.id,studentName:i.name,onClose:()=>a(null),requestedBy:t?.name||"Mentor",requestedByRole:"mentor"})]})}function jbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[f,A]=C.useState("all"),[m,g]=C.useState(null),[y,x]=C.useState(null),[v,w]=C.useState(""),B=()=>{Promise.all([Xe.get(`${ql}/submissions?mentorId=${t.id}`),Xe.get(`${ql}/aptitude-submissions?mentorId=${t.id}`),Xe.get(`${ql}/global-test-submissions?mentorId=${t.id}`)]).then(([O,F,D])=>{const T=Array.isArray(O.data)?O.data:O.data?.data||[];n(T.map(N=>({...N,subType:"code"}))),s((F.data||[]).map(N=>({...N,subType:"aptitude",itemTitle:N.testTitle}))),a((D.data||[]).map(N=>({...N,subType:"global",itemTitle:N.testTitle,score:N.overallPercentage}))),c(!1)}).catch(O=>c(!1))};C.useEffect(()=>{B()},[t.id]);const k=[...e,...r,...i].sort((O,F)=>new Date(F.submittedAt)-new Date(O.submittedAt)),I=(f==="all"?k:f==="code"?e:f==="aptitude"?r:i).filter(F=>(F.studentName||"").toLowerCase().includes(v.toLowerCase())||(F.itemTitle||F.testTitle||"").toLowerCase().includes(v.toLowerCase())||F.status.toLowerCase().includes(v.toLowerCase()));return l?o.jsx("div",{className:"loading-spinner"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>A("all"),style:{padding:"0.6rem 1.2rem",background:f==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:f==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",k.length,")"]}),o.jsxs("button",{onClick:()=>A("code"),style:{padding:"0.6rem 1.2rem",background:f==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:f==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Code (",e.length,")"]}),o.jsxs("button",{onClick:()=>A("aptitude"),style:{padding:"0.6rem 1.2rem",background:f==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:f==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Aptitude (",r.length,")"]}),o.jsxs("button",{onClick:()=>A("global"),style:{padding:"0.6rem 1.2rem",background:f==="global"?"#3b82f6":"rgba(59, 130, 246, 0.1)",border:f==="global"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:f==="global"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Global (",i.length,")"]})]}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(j0,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"280px"},value:v,onChange:O=>w(O.target.value)})]})]}),o.jsx("div",{className:"table-container card glass",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Student"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Problem / Test"}),o.jsx("th",{children:"Language"}),o.jsx("th",{children:"Score"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Submitted At"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:I.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):I.map(O=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("div",{style:{fontWeight:600},children:O.studentName})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:O.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:O.subType==="aptitude"?"#8b5cf6":"#3b82f6"},children:O.subType==="aptitude"?" Aptitude":O.subType==="global"?" Global":" Code"})}),o.jsx("td",{children:o.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:O.itemTitle||O.testTitle})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:O.subType==="aptitude"?"N/A":O.subType==="global"?"Mixed":O.language?.toUpperCase()||"N/A"})}),o.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[O.score,"%"]}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[o.jsx("span",{className:`status-badge ${O.status}`,children:O.status}),O.plagiarism?.detected&&o.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:11})," Plag"]}),(O.integrity?.integrityViolation||O.tabSwitches>0)&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:10})," ",O.integrity?.tabSwitches||O.tabSwitches||0," Tab"]}),O.cameraBlockedCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",O.cameraBlockedCount," Cam"]}),O.phoneDetectionCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",O.phoneDetectionCount," Phone"]})]})}),o.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(O.submittedAt).toLocaleString()}),o.jsx("td",{children:O.subType==="aptitude"?o.jsxs("button",{onClick:()=>g(O),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Results"]}):O.subType==="global"?o.jsxs("button",{onClick:()=>x(O.id),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Full Report"]}):o.jsxs("button",{onClick:()=>d(O),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Report"]})})]},O.id))})]})}),u&&o.jsx(Ebt,{submission:u,onClose:()=>d(null)}),m&&o.jsx(mP,{submission:m,onClose:()=>g(null)}),y&&o.jsx($U,{submissionId:y,onClose:()=>x(null),isStudentView:!1})]})}function Ebt({submission:t,onClose:e}){return o.jsx("div",{className:"modal-overlay",onClick:e,children:o.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"900px"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(qi,{size:20,color:"white"})}),o.jsx("h2",{children:"Detailed Submission Report"})]}),o.jsx("button",{onClick:e,className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:t.studentName})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.submissionType==="file"?"File Upload":"Code Editor"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"#10b981":"#ef4444"},children:t.score}),o.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),o.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?o.jsx(Nn,{size:24}):o.jsx(Os,{size:24}),t.status?.toUpperCase()]})]}),t.plagiarism?.detected&&o.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[o.jsx(Pn,{size:24,color:"#ef4444"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[o.jsx(Pn,{size:18})," Proctoring Violations"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(gs,{size:18,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]}),t.proctoringVideo&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1rem"},children:""}),o.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",t.proctoringVideo]})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Nn,{size:18,color:"#3b82f6"})," AI Feedback"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(ua,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:t.aiExplanation})]}),t.analysis&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(fu,{size:18,color:"var(--primary)"}),"Detailed Analysis"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.analysis.correctness!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Nn,{size:22,color:"#3b82f6"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:t.analysis.correctness})]})]}),t.analysis.efficiency!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(vu,{size:22,color:"#10b981"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:t.analysis.efficiency})]})]}),t.analysis.codeStyle!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Lr,{size:22,color:"#8b5cf6"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:t.analysis.codeStyle})]})]}),t.analysis.bestPractices!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(_l,{size:22,color:"#f59e0b"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:t.analysis.bestPractices})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),o.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:t.code})]}),o.jsxs("div",{style:{marginTop:"1.5rem"},children:[o.jsx("h4",{style:{margin:"0 0 0.75rem"},children:" Code Feedback"}),o.jsx(wbt,{submissionId:t.id,code:t.code,mentorId:t.mentorId,studentId:t.studentId})]})]})]})})}function Ibt({user:t}){const{t:e}=E0(),[n,r]=C.useState("plagiarism"),[s,i]=C.useState(null),[a,l]=C.useState(null),[c,u]=C.useState(null),[d,f]=C.useState(!0),[A,m]=C.useState(!1);C.useEffect(()=>{f(!0),Promise.all([Xe.get(`${ql}/analytics/plagiarism?mentorId=${t.id}`),Xe.get(`${ql}/analytics/time-to-solve?mentorId=${t.id}`),Xe.get(`${ql}/analytics/topics?mentorId=${t.id}`)]).then(([x,v,w])=>{i(x.data),l(v.data),u(w.data),f(!1)}).catch(x=>{console.error(x),f(!1)})},[t.id]);const g=async x=>{m(!0);try{if(x==="csv"){const v=await Xe.get(`${ql}/analytics/export/csv?mentorId=${t.id}`,{responseType:"blob"}),w=window.URL.createObjectURL(new Blob([v.data])),B=document.createElement("a");B.href=w,B.download=`analytics_${new Date().toISOString().split("T")[0]}.csv`,B.click()}else{const v=await Xe.get(`${ql}/analytics/export/json?mentorId=${t.id}`),w=new Blob([JSON.stringify(v.data,null,2)],{type:"application/json"}),B=window.URL.createObjectURL(w),k=document.createElement("a");k.href=B,k.download=`analytics_${new Date().toISOString().split("T")[0]}.json`,k.click()}}catch(v){console.error(v)}m(!1)};if(d)return o.jsx("div",{className:"loading-spinner"});const y=[{id:"plagiarism",label:e("plagiarism_detection"),icon:o.jsx(Vs,{size:16})},{id:"time-to-solve",label:e("time_to_solve"),icon:o.jsx(ls,{size:16})},{id:"topics",label:e("topic_analysis"),icon:o.jsx(j2,{size:16})},{id:"export",label:e("export_report"),icon:o.jsx(ad,{size:16})}];return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:y.map(x=>o.jsxs("button",{onClick:()=>r(x.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:n===x.id?"var(--primary)":"var(--card-bg)",color:n===x.id?"#fff":"var(--text-secondary)",boxShadow:n===x.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[x.icon," ",x.label]},x.id))}),n==="plagiarism"&&s&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:o.jsx(Zd,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",children:s.stats.totalSubmissions}),o.jsx("div",{className:"stat-label-text",children:e("total_submissions")})]})]})}),o.jsx("div",{className:"dashboard-stat-card",style:{borderLeft:"4px solid #ef4444"},children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #b91c1c, #ef4444)"},children:o.jsx(Pn,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("div",{className:"stat-number",style:{color:"#ef4444"},children:s.stats.plagiarismCount}),o.jsx("div",{className:"stat-label-text",children:e("flagged")})]})]})}),o.jsx("div",{className:"dashboard-stat-card",style:{borderLeft:"4px solid #f59e0b"},children:o.jsxs("div",{className:"stat-card-inner",children:[o.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #b45309, #f59e0b)"},children:o.jsx(Br,{size:22,color:"#fff"})}),o.jsxs("div",{className:"stat-content",children:[o.jsxs("div",{className:"stat-number",style:{color:"#f59e0b"},children:[s.stats.plagiarismRate,"%"]}),o.jsx("div",{className:"stat-label-text",children:e("plagiarism_rate")})]})]})})]}),s.repeatOffenders.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[o.jsx(Pn,{size:18})," ",e("repeat_offenders")]}),o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:s.repeatOffenders.map((x,v)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"10px",background:"rgba(239,68,68,0.05)",border:"1px solid rgba(239,68,68,0.15)"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:x.name}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[e("copied_from"),": ",x.copiedFrom.join(", ")||"Unknown"]})]}),o.jsxs("span",{style:{background:"#ef4444",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"20px",fontWeight:700,fontSize:"0.8rem"},children:[x.count,"x"]})]},v))})]}),s.byProblem.length>0&&o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(IA,{size:18,color:"#f59e0b"})," ",e("most_copied_problems")]}),o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:s.byProblem.map((x,v)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"var(--bg-secondary)"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:x.title}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"capitalize"},children:x.difficulty})]}),o.jsxs("span",{style:{fontWeight:700,color:"#ef4444"},children:[x.flaggedCount," ",e("flags")]})]},v))})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Vs,{size:18,color:"#ef4444"})," ",e("flagged_submissions")]}),s.flaggedSubmissions.length>0?o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:e("student")}),o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:e("problem")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("score")}),o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:e("copied_from")}),o.jsx("th",{style:{textAlign:"right",padding:"0.6rem"},children:e("date")})]})}),o.jsx("tbody",{children:s.flaggedSubmissions.slice(0,20).map((x,v)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:x.studentName}),o.jsx("td",{style:{padding:"0.6rem"},children:x.problemTitle}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[x.score,"/100"]}),o.jsx("td",{style:{padding:"0.6rem",color:"#ef4444"},children:x.copiedFromName||x.copiedFrom}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:new Date(x.submittedAt).toLocaleDateString()})]},v))})]})}):o.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:e("no_plagiarism_detected")})]})]}),n==="time-to-solve"&&a&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:a.difficultySummary.map((x,v)=>{const B={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"}[x.difficulty]||"#3b82f6";return o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",borderLeft:`4px solid ${B}`,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1rem",textTransform:"capitalize",color:B,marginBottom:"0.75rem"},children:x.difficulty}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:e("avg_time")}),o.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:800},children:[x.avgTimeMinutes,"m"]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:e("avg_attempts")}),o.jsx("div",{style:{fontSize:"1.3rem",fontWeight:800},children:x.avgAttempts})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:e("solve_rate")}),o.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:800,color:B},children:[x.avgSolveRate,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:e("problems")}),o.jsx("div",{style:{fontSize:"1.3rem",fontWeight:800},children:x.problems})]})]})]},v)})}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(ls,{size:18,color:"#3b82f6"})," ",e("problem_difficulty_metrics")]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:e("problem")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("difficulty")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("students")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("avg_attempts")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("avg_time")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:e("solve_rate")})]})}),o.jsx("tbody",{children:a.problems.slice(0,30).map((x,v)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:x.title}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:o.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:x.difficulty==="easy"?"rgba(16,185,129,0.12)":x.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:x.difficulty==="easy"?"#10b981":x.difficulty==="medium"?"#f59e0b":"#ef4444"},children:x.difficulty})}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:x.studentCount}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:x.avgAttempts}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:x.avgTimeMinutes?`${x.avgTimeMinutes}m`:"-"}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:o.jsxs("span",{style:{fontWeight:700,color:x.solveRate>=70?"#10b981":x.solveRate>=40?"#f59e0b":"#ef4444"},children:[x.solveRate,"%"]})})]},v))})]})})]})]}),n==="topics"&&c&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(j2,{size:18,color:"#3b82f6"})," ",e("by_problem_type")]}),c.byType.map((x,v)=>o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[o.jsx("span",{style:{fontWeight:600,textTransform:"capitalize"},children:x.type}),o.jsxs("span",{style:{fontWeight:700,color:x.avgScore>=70?"#10b981":"#f59e0b"},children:[x.avgScore,"% avg"]})]}),o.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.passRate}%`,borderRadius:"4px",background:"linear-gradient(90deg, #3b82f6, #60a5fa)",transition:"width 0.5s"}})}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:[x.submissions," submissions  ",x.passRate,"% pass  ",x.uniqueStudents," students"]})]},v))]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Br,{size:18,color:"#f59e0b"})," ",e("by_difficulty")]}),c.byDifficulty.map((x,v)=>{const w={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[o.jsx("span",{style:{fontWeight:600,textTransform:"capitalize",color:w[x.difficulty]},children:x.difficulty}),o.jsxs("span",{style:{fontWeight:700},children:[x.avgScore,"%"]})]}),o.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.passRate}%`,borderRadius:"4px",background:w[x.difficulty],transition:"width 0.5s"}})}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:[x.submissions," submissions  ",x.passRate,"% pass"]})]},v)})]})]}),o.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Lr,{size:18,color:"#8b5cf6"})," ",e("performance_by_language")]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:c.byLanguage.map((x,v)=>o.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",textAlign:"center",border:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem"},children:x.language}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:x.avgScore>=70?"#10b981":x.avgScore>=40?"#f59e0b":"#ef4444"},children:[x.avgScore,"%"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[x.submissions," subs  ",x.passRate,"% pass"]})]},v))})]}),c.heatmap.length>0&&o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(fu,{size:18,color:"#06b6d4"})," ",e("type_difficulty_heatmap")]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{padding:"0.6rem",textAlign:"left"},children:e("type")}),o.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:e("difficulty")}),o.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:e("submissions")}),o.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:e("avg_score")}),o.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:e("pass_rate")})]})}),o.jsx("tbody",{children:c.heatmap.map((x,v)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:600,textTransform:"capitalize"},children:x.type}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:x.difficulty}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:x.submissions}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:x.avgScore>=70?"#10b981":x.avgScore>=40?"#f59e0b":"#ef4444"},children:[x.avgScore,"%"]}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[x.passRate,"%"]})]},v))})]})})]})]}),n==="export"&&o.jsx("div",{children:o.jsxs("div",{className:"dashboard-panel",style:{textAlign:"center",padding:"3rem 2rem"},children:[o.jsx(ad,{size:48,color:"var(--primary)",style:{marginBottom:"1rem"}}),o.jsx("h3",{style:{margin:"0 0 0.5rem",fontSize:"1.3rem"},children:e("export_analytics")}),o.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"2rem",maxWidth:"500px",margin:"0 auto 2rem"},children:e("export_description")}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>g("csv"),disabled:A,style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",fontWeight:700,fontSize:"0.9rem",opacity:A?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qi,{size:18})," ",e("download_csv")]}),o.jsxs("button",{onClick:()=>g("json"),disabled:A,style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",fontWeight:700,fontSize:"0.9rem",opacity:A?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lr,{size:18})," ",e("download_json")]})]})]})})]})}function Nbt({initialTestCases:t=[],onUpdate:e,onClose:n,title:r="Coding Problem",inputLabel:s="Sample Input",outputLabel:i="Sample Output"}){const[a,l]=C.useState([]),[c,u]=C.useState({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),[d,f]=C.useState(!1),[A,m]=C.useState(null),[g,y]=C.useState({});C.useEffect(()=>{const j=t.map((I,O)=>({...I,_id:I._id||I.id||`temp-${Date.now()}-${O}`}));l(j)},[t]);const x=j=>{l(j),e(j)},v=()=>{if(!c.input&&!c.expectedOutput)return;const j={...c,_id:`temp-${Date.now()}`},I=[...a,j];x(I),u({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),f(!1)},w=j=>{const I=a.map(O=>O._id===j?{...O,...g}:O);x(I),m(null)},B=j=>{if(window.confirm("Delete this test case?")){const I=a.filter(O=>O._id!==j);x(I)}},k=j=>{m(j._id),y({input:j.input||"",expectedOutput:j.expectedOutput||"",isHidden:j.isHidden||!1,points:j.points||10,description:j.description||""})};return o.jsx("div",{className:"modal-overlay",onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:o.jsxs("div",{className:"modal-content",onClick:j=>j.stopPropagation(),style:{width:"900px",maxWidth:"95vw",maxHeight:"85vh",background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(139,92,246,0.2)",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[o.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",background:"rgba(15, 23, 42, 0.95)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Nn,{size:20,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.2rem",color:"white"},children:"Test Cases Manager"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.5)"},children:r})]})]}),o.jsx("button",{onClick:n,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o.jsx(Os,{size:24})})]}),o.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"1.5rem",color:"white"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#3b82f6"},children:a.length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Total Test Cases"})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#10b981"},children:a.filter(j=>!j.isHidden).length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Visible"})]}),o.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ef4444"},children:a.filter(j=>j.isHidden).length}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Hidden"})]})]}),!d&&o.jsxs("button",{onClick:()=>f(!0),style:{width:"100%",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",border:"2px dashed rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:600,marginBottom:"1.5rem"},children:[o.jsx(zo,{size:18})," Add Test Case"]}),d&&o.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[o.jsx(zo,{size:16})," New Test Case"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:s}),o.jsx("textarea",{rows:"3",placeholder:"Enter test input...",value:c.input,onChange:j=>u({...c,input:j.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:i}),o.jsx("textarea",{rows:"3",placeholder:"Enter expected output...",value:c.expectedOutput,onChange:j=>u({...c,expectedOutput:j.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Description (optional)"}),o.jsx("input",{type:"text",placeholder:"e.g., Edge case with empty array",value:c.description,onChange:j=>u({...c,description:j.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Points"}),o.jsx("input",{type:"number",min:"1",max:"100",value:c.points,onChange:j=>u({...c,points:parseInt(j.target.value)||10}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Visibility"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[o.jsx("input",{type:"checkbox",id:"isHidden",checked:c.isHidden,onChange:j=>u({...c,isHidden:j.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),o.jsxs("label",{htmlFor:"isHidden",style:{cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[c.isHidden?o.jsx(Zg,{size:16,color:"#ef4444"}):o.jsx(gs,{size:16,color:"#10b981"}),c.isHidden?"Hidden":"Visible"]})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>f(!1),style:{padding:"0.5rem 1rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:v,style:{padding:"0.5rem 1rem",background:"#8b5cf6",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:16})," Add Test Case"]})]})]}),a.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"rgba(255,255,255,0.4)"},children:[o.jsx(Pn,{size:48,style:{marginBottom:"1rem",opacity:.5}}),o.jsx("h3",{children:"No Test Cases"}),o.jsx("p",{children:"Add test cases to enable automated grading"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.map((j,I)=>o.jsx("div",{style:{background:"rgba(0,0,0,0.2)",border:`1px solid ${j.isHidden?"rgba(239, 68, 68, 0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:"10px",padding:"1rem",position:"relative"},children:A===j._id?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:s}),o.jsx("textarea",{rows:"3",value:g.input,onChange:O=>y({...g,input:O.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:i}),o.jsx("textarea",{rows:"3",value:g.expectedOutput,onChange:O=>y({...g,expectedOutput:O.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>m(null),style:{padding:"0.4rem 0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:()=>w(j._id),style:{padding:"0.4rem 0.75rem",background:"#10b981",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(tx,{size:14})," Save"]})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{width:"24px",height:"24px",background:"rgba(139,92,246,0.2)",color:"#a78bfa",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:700},children:I+1}),o.jsx("span",{style:{fontWeight:600,color:"white"},children:j.description||`Test Case ${I+1}`}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:j.isHidden?"rgba(239, 68, 68, 0.15)":"rgba(16, 185, 129, 0.15)",color:j.isHidden?"#ef4444":"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[j.isHidden?o.jsx(Zg,{size:10}):o.jsx(gs,{size:10}),j.isHidden?"Hidden":"Visible"]}),o.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:"rgba(251, 191, 36, 0.15)",color:"#fbbf24"},children:[j.points," pts"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>k(j),style:{padding:"0.4rem",background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",color:"#3b82f6",cursor:"pointer"},children:o.jsx(Lr,{size:14})}),o.jsx("button",{onClick:()=>B(j._id),style:{padding:"0.4rem",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:o.jsx(po,{size:14})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem"},children:[s,":"]}),o.jsx("code",{style:{display:"block",padding:"0.5rem",background:"#0f172a",borderRadius:"6px",fontSize:"0.8rem",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto",color:"rgba(255,255,255,0.9)"},children:j.input||"(empty)"})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem"},children:[i,":"]}),o.jsx("code",{style:{display:"block",padding:"0.5rem",background:"#0f172a",borderRadius:"6px",fontSize:"0.8rem",color:"#4ade80",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:j.expectedOutput})]})]})]})},j._id))})]})]})})}function Tbt({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState({totalStudentsActive:[],totalMentorsActive:[],activeSubmissions:[],totalAlerts:0,criticalAlerts:0}),[l,c]=C.useState(!1);C.useEffect(()=>(as.joinMonitoring(t.id,"admin"),c(!0),as.onMonitoringConnected(f=>{console.log(" Admin joined global monitoring:",f)}),as.onLiveUpdate(f=>{n(A=>[f,...A.slice(0,99)]),a(A=>{const m=A.totalStudentsActive.includes(f.studentId)?A.totalStudentsActive:[...A.totalStudentsActive,f.studentId],g=f.mentorId&&!A.totalMentorsActive.includes(f.mentorId)?[...A.totalMentorsActive,f.mentorId]:A.totalMentorsActive;let y=A.activeSubmissions;return f.type==="submission_started"&&!A.activeSubmissions.includes(f.studentId)?y=[...A.activeSubmissions,f.studentId]:f.type==="submission_completed"&&(y=A.activeSubmissions.filter(x=>x!==f.studentId)),{...A,totalStudentsActive:m,totalMentorsActive:g,activeSubmissions:y}})}),as.onLiveAlert(f=>{s(A=>[f,...A.slice(0,49)]),a(A=>({...A,totalAlerts:A.totalAlerts+1,criticalAlerts:A.criticalAlerts+(f.severity==="critical"?1:0)}))}),()=>{as.disconnect(),c(!1)}),[t.id]);const u=f=>{switch(f){case"submission_started":return o.jsx(ua,{className:"w-4 h-4 text-blue-500"});case"submission_completed":return"";case"progress_update":return"";case"test_failed":return"";default:return""}},d=f=>new Date(f).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"live-monitoring-container",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Global Live Monitoring Dashboard"}),o.jsxs("div",{className:"status-bar",children:[o.jsxs("div",{className:`status-item ${l?"active":"inactive"}`,children:[o.jsx("div",{className:"status-dot"}),o.jsx("span",{children:l?"Global Monitoring Active":"Not Monitoring"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx(vu,{size:16,className:"text-blue-500"}),o.jsx("span",{className:"font-semibold text-blue-600",children:i.activeSubmissions.length}),o.jsx("span",{className:"ml-1",children:"Students Working"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx(Jg,{size:16,className:"text-cyan-500"}),o.jsx("span",{className:"font-semibold text-cyan-600",children:i.totalStudentsActive.length}),o.jsx("span",{className:"ml-1",children:"Total Visited"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx(Jg,{size:16,className:"text-purple-500"}),o.jsx("span",{className:"font-semibold text-purple-600",children:i.totalMentorsActive.length}),o.jsx("span",{className:"ml-1",children:"Active Mentors"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx(Pn,{size:16,className:"text-red-500"}),o.jsx("span",{className:"font-semibold text-red-600",children:i.totalAlerts}),o.jsx("span",{className:"ml-1",children:"Total Alerts"})]}),o.jsxs("div",{className:"status-item",children:[o.jsx(Pn,{size:16,className:"text-orange-600"}),o.jsx("span",{className:"font-semibold text-orange-600",children:i.criticalAlerts}),o.jsx("span",{className:"ml-1",children:"Critical"})]})]}),o.jsxs("div",{className:"flex gap-6 mt-6",children:[o.jsxs("div",{className:"flex-1 max-w-lg",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(Pn,{size:20,className:"text-red-500"}),"Critical Alerts (",i.criticalAlerts,")"]}),o.jsx("div",{className:"alerts-list admin-alerts",children:r.filter(f=>f.severity==="critical").length===0?o.jsx("div",{className:"empty-state",children:"No critical alerts"}):r.filter(f=>f.severity==="critical").map((f,A)=>o.jsxs("div",{className:"alert-item severity-critical",children:[o.jsx("div",{className:"alert-header",children:o.jsxs("span",{className:"font-semibold text-red-900",children:[" ",f.studentName||`Student ${f.studentId}`," - ",(f.violationType||"unknown").replace(/_/g," ")]})}),o.jsx("div",{className:"alert-time",children:d(f.timestamp)})]},A))})]}),o.jsxs("div",{className:"flex-1 max-w-lg",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(Pn,{size:20,className:"text-orange-500"}),"All Alerts (",r.length,")"]}),o.jsx("div",{className:"alerts-list admin-alerts",children:r.length===0?o.jsx("div",{className:"empty-state",children:"No alerts"}):r.map((f,A)=>o.jsxs("div",{className:`alert-item severity-${f.severity}`,children:[o.jsxs("div",{className:"alert-header",children:[o.jsxs("span",{className:"font-semibold",children:[f.studentName||`Student ${f.studentId}`," - ",(f.violationType||"unknown").replace(/_/g," ")]}),o.jsx("span",{className:`severity-badge severity-${f.severity}`,children:f.severity})]}),o.jsx("div",{className:"alert-time",children:d(f.timestamp)})]},A))})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(ua,{size:20,className:"text-blue-500"}),"Global Activity Feed (",e.length,")"]}),o.jsx("div",{className:"updates-list admin-updates",children:e.length===0?o.jsx("div",{className:"empty-state",children:"Waiting for activity..."}):e.map((f,A)=>o.jsxs("div",{className:`update-item type-${f.type}`,children:[o.jsx("div",{className:"update-icon",children:u(f.type)}),o.jsx("div",{className:"update-content",children:o.jsxs("div",{className:"update-title",children:[f.type==="submission_started"&&o.jsxs("span",{children:[o.jsx("strong",{children:f.studentName||`Student ${f.studentId}`})," started",o.jsxs("strong",{children:[" ",f.problemTitle]}),f.isProctored&&o.jsx("span",{className:"badge-proctored",children:"Proctored"})]}),f.type==="submission_completed"&&o.jsxs("span",{children:[o.jsx("strong",{children:f.studentName||`Student ${f.studentId}`})," completed",o.jsxs("strong",{children:[" ",f.problemTitle]}),o.jsx("span",{className:`badge-status status-${f.status}`,children:f.status})]}),f.type==="progress_update"&&o.jsxs("span",{children:[o.jsx("strong",{children:f.studentName||`Student ${f.studentId}`})," -",o.jsxs("strong",{children:[" ",f.problemId]}),o.jsxs("span",{className:"badge-progress",children:[f.progress,"%"]})]}),f.type==="test_failed"&&o.jsxs("span",{children:[o.jsx("strong",{children:f.studentName||`Student ${f.studentId}`})," - Test failed:",o.jsxs("strong",{children:[" ",f.testname]})]})]})}),o.jsx("div",{className:"update-time",children:d(f.timestamp)})]},A))})]}),o.jsx("style",{children:`
                .admin-alerts {
                    max-height: 400px;
                }
                
                .admin-updates {
                    max-height: 500px;
                }

                .severity-badge.severity-critical {
                    background: #dc2626;
                    color: white;
                    font-size: 0.75rem;
                    padding: 0.25rem 0.75rem;
                    border-radius: 9999px;
                }

                .severity-badge.severity-warning {
                    background: #f59e0b;
                    color: white;
                    font-size: 0.75rem;
                    padding: 0.25rem 0.75rem;
                    border-radius: 9999px;
                }
            `})]})}const Wa="http://localhost:8000/api",_J=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899","#14b8a6"],Ss={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},BA={padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},WA={...BA,background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)"},PU={...BA,background:"linear-gradient(135deg, #ef4444, #dc2626)"},C1={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none"},Fj={...C1,cursor:"pointer"},J8=t=>({padding:"0.7rem 1.5rem",borderRadius:"10px",border:t?"none":"1px solid var(--border-color)",background:t?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"transparent",color:t?"white":"var(--text-muted)",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"}),Zf=t=>({padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${t}20`,color:t,display:"inline-flex",alignItems:"center",gap:"0.3rem"}),X0={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},Z8={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},eD={background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"700px",width:"95%",maxHeight:"85vh",overflowY:"auto",border:"1px solid var(--border-color)",boxShadow:"0 25px 50px rgba(0,0,0,0.3)"};function Dj({status:t}){const n={healthy:"#10b981",warning:"#f59e0b",degraded:"#f59e0b",error:"#ef4444",down:"#ef4444",completed:"#10b981",running:"#3b82f6",failed:"#ef4444",pending:"#f59e0b",passed:"#10b981"}[t]||"#6b7280",r={healthy:o.jsx(Nn,{size:12}),completed:o.jsx(Nn,{size:12}),passed:o.jsx(Nn,{size:12}),warning:o.jsx(Pn,{size:12}),degraded:o.jsx(Pn,{size:12}),error:o.jsx(kr,{size:12}),down:o.jsx(kr,{size:12}),failed:o.jsx(kr,{size:12}),running:o.jsx(ua,{size:12}),pending:o.jsx(ls,{size:12})};return o.jsxs("span",{style:Zf(n),children:[r[t],t]})}function _bt(){const[t,e]=C.useState("health"),n=[{id:"health",label:"System Health",icon:o.jsx(ua,{size:16})},{id:"bulk",label:"Bulk Operations",icon:o.jsx(od,{size:16})},{id:"audit",label:"Audit Logs",icon:o.jsx(Vs,{size:16})},{id:"templates",label:"Templates",icon:o.jsx(Gl,{size:16})},{id:"backups",label:"Backups",icon:o.jsx(wi,{size:16})},{id:"export",label:"Data Export",icon:o.jsx(ad,{size:16})},{id:"analytics",label:"Analytics",icon:o.jsx(fu,{size:16})}];return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.05) 100%)",borderRadius:"20px",padding:"2rem 2.5rem",marginBottom:"1.5rem",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),o.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"14px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:o.jsx(UB,{size:26,color:"white"})}),o.jsxs("div",{children:[o.jsx("h1",{style:{margin:0,fontSize:"1.6rem",fontWeight:800,background:"linear-gradient(135deg, #fff, #94a3b8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Operations Center"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.85rem"},children:"System health, bulk operations, audit logs, backups & analytics"})]})]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"14px",border:"1px solid var(--border-color)"},children:n.map(r=>o.jsxs("button",{onClick:()=>e(r.id),style:J8(t===r.id),children:[r.icon," ",r.label]},r.id))}),t==="health"&&o.jsx(Rbt,{}),t==="bulk"&&o.jsx(Obt,{}),t==="audit"&&o.jsx(Fbt,{}),t==="templates"&&o.jsx(Dbt,{}),t==="backups"&&o.jsx(Lbt,{}),t==="export"&&o.jsx($bt,{}),t==="analytics"&&o.jsx(Pbt,{})]})}function Rbt(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[s,i]=C.useState(!1),a=C.useCallback(async()=>{try{const c=await Xe.get(`${Wa}/admin/system-health`);e(c.data)}catch(c){console.error("Health check failed:",c)}finally{r(!1)}},[]);if(C.useEffect(()=>{if(a(),s){const c=setInterval(a,1e4);return()=>clearInterval(c)}},[a,s]),n)return o.jsx("div",{className:"loading-spinner"});if(!t)return o.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"3rem"},children:"Failed to load system health"});const l=t.status==="healthy"?"#10b981":t.status==="warning"?"#f59e0b":"#ef4444";return o.jsxs("div",{children:[o.jsxs("div",{style:X0,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem"},children:"System Health Monitor"}),o.jsx(Dj,{status:t.status})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:s,onChange:c=>i(c.target.checked)}),"Auto-refresh (10s)"]}),o.jsxs("button",{onClick:a,style:WA,children:[o.jsx(_c,{size:14})," Refresh"]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{...Ss,borderLeft:`4px solid ${l}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:`${l}20`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ua,{size:20,color:l})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"System Status"}),o.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:l,textTransform:"capitalize"},children:t.status})]})]}),o.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:["API Latency: ",t.apiLatency,"ms"]})]}),o.jsxs("div",{style:{...Ss,borderLeft:"4px solid #3b82f6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(wi,{size:20,color:"#3b82f6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Database"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Dj,{status:t.database.status}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[t.database.latency,"ms"]})]})]})]}),o.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:[t.database.tableCount," tables  ",t.database.totalSizeMB," MB"]})]}),o.jsxs("div",{style:{...Ss,borderLeft:"4px solid #8b5cf6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(139, 92, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(rO,{size:20,color:"#8b5cf6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Memory Usage"}),o.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--text)"},children:[t.memory.heapUsed," MB"]})]})]}),o.jsxs("div",{style:{marginTop:"0.5rem"},children:[o.jsx("div",{style:{height:"6px",background:"rgba(139, 92, 246, 0.15)",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${t.memory.heapPercent}%`,background:t.memory.heapPercent>80?"#ef4444":"#8b5cf6",borderRadius:"3px",transition:"width 0.5s"}})}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[t.memory.heapPercent,"% of ",t.memory.heapTotal," MB heap"]})]})]}),o.jsxs("div",{style:{...Ss,borderLeft:"4px solid #06b6d4"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ls,{size:20,color:"#06b6d4"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Uptime"}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:700,color:"var(--text)"},children:t.uptime.formatted})]})]}),o.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:["WebSockets: ",t.websockets.total," connected  Node ",t.nodeVersion]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wi,{size:16,color:"#3b82f6"})," Database Tables"]}),o.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.5rem",color:"var(--text-muted)"},children:"Table"}),o.jsx("th",{style:{textAlign:"right",padding:"0.5rem",color:"var(--text-muted)"},children:"Rows"}),o.jsx("th",{style:{textAlign:"right",padding:"0.5rem",color:"var(--text-muted)"},children:"Size"})]})}),o.jsx("tbody",{children:(t.database.tables||[]).map((c,u)=>o.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("td",{style:{padding:"0.5rem",color:"var(--text)",fontFamily:"monospace",fontSize:"0.75rem"},children:c.tableName}),o.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"var(--text)"},children:(c.rowCount||0).toLocaleString()}),o.jsxs("td",{style:{padding:"0.5rem",textAlign:"right",color:"var(--text-muted)"},children:[c.sizeMB," MB"]})]},u))})]})})]}),o.jsxs("div",{style:Ss,children:[o.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(v7,{size:16,color:"#8b5cf6"})," System Details"]}),o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:[{label:"Node.js Version",value:t.nodeVersion,icon:o.jsx(ex,{size:14})},{label:"Platform",value:t.platform,icon:o.jsx(v7,{size:14})},{label:"RSS Memory",value:`${t.memory.rss} MB`,icon:o.jsx(rO,{size:14})},{label:"External Memory",value:`${t.memory.external} MB`,icon:o.jsx(y0e,{size:14})},{label:"Upload Storage",value:`${t.storage.uploadsSizeMB} MB`,icon:o.jsx(nZ,{size:14})},{label:"Cache Items",value:t.cache.totalItems,icon:o.jsx(vu,{size:14})},{label:"WS Mentors Online",value:t.websockets.mentors,icon:o.jsx(fZ,{size:14})},{label:"WS Students Online",value:t.websockets.students,icon:o.jsx(od,{size:14})},{label:"WS Admins Online",value:t.websockets.admins,icon:o.jsx(Vs,{size:14})},{label:"Recent Errors (24h)",value:t.recentErrors,icon:o.jsx(Pn,{size:14})}].map((c,u)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem"},children:[c.icon," ",c.label]}),o.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:c.value})]},u))})]})]})]})}function Obt(){const[t,e]=C.useState("reassign"),[n,r]=C.useState([]),[s,i]=C.useState([]),[a,l]=C.useState([]),[c,u]=C.useState([]),[d,f]=C.useState([]),[A,m]=C.useState(""),[g,y]=C.useState("mark_passed"),[x,v]=C.useState(!0),[w,B]=C.useState(!1),[k,j]=C.useState(null),[I,O]=C.useState("");C.useEffect(()=>{Promise.all([Xe.get(`${Wa}/users`),Xe.get(`${Wa}/submissions`)]).then(([P,z])=>{const U=Array.isArray(P.data)?P.data:P.data.users||[];r(U.filter(ee=>ee.role==="student")),i(U.filter(ee=>ee.role==="mentor")),l(Array.isArray(z.data)?z.data:z.data.submissions||[]),v(!1)}).catch(()=>v(!1))},[]);const F=async()=>{if(!(c.length===0||!A)){B(!0);try{const P=await Xe.post(`${Wa}/admin/bulk/reassign-students`,{studentIds:c,newMentorId:A,adminId:"admin-001",adminName:"Admin"});j({type:"success",message:P.data.message}),u([])}catch(P){j({type:"error",message:P.response?.data?.error||P.message})}B(!1)}},D=async()=>{if(d.length!==0){B(!0);try{const P=await Xe.post(`${Wa}/admin/bulk/regrade-submissions`,{submissionIds:d,action:g,adminId:"admin-001",adminName:"Admin"});j({type:"success",message:P.data.message}),f([])}catch(P){j({type:"error",message:P.response?.data?.error||P.message})}B(!1)}},T=async()=>{if(d.length!==0&&window.confirm(`Delete ${d.length} submissions? This cannot be undone.`)){B(!0);try{const P=await Xe.post(`${Wa}/admin/bulk/delete-submissions`,{submissionIds:d,adminId:"admin-001",adminName:"Admin"});j({type:"success",message:P.data.message}),f([]),l(z=>z.filter(U=>!d.includes(U.id)))}catch(P){j({type:"error",message:P.response?.data?.error||P.message})}B(!1)}};if(x)return o.jsx("div",{className:"loading-spinner"});const N=n.filter(P=>P.name?.toLowerCase().includes(I.toLowerCase())||P.email?.toLowerCase().includes(I.toLowerCase()));return o.jsxs("div",{children:[o.jsx("div",{style:X0,children:o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(od,{size:20,color:"#3b82f6"})," Bulk Operations"]})}),k&&o.jsxs("div",{style:{padding:"1rem 1.5rem",borderRadius:"12px",marginBottom:"1rem",background:k.type==="success"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${k.type==="success"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,color:k.type==="success"?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.type==="success"?o.jsx(Nn,{size:16}):o.jsx(kr,{size:16}),k.message]}),o.jsx("button",{onClick:()=>j(null),style:{background:"none",border:"none",color:"inherit",cursor:"pointer"},children:o.jsx(Os,{size:16})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>e("reassign"),style:J8(t==="reassign"),children:[o.jsx(od,{size:14})," Reassign Students"]}),o.jsxs("button",{onClick:()=>e("regrade"),style:J8(t==="regrade"),children:[o.jsx(_c,{size:14})," Regrade Submissions"]})]}),t==="reassign"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"1.5rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{position:"relative",flex:1},children:[o.jsx(j0,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{placeholder:"Search students...",value:I,onChange:P=>O(P.target.value),style:{...C1,paddingLeft:"2.2rem"}})]}),o.jsx("button",{onClick:()=>u(c.length===N.length?[]:N.map(P=>P.id)),style:WA,children:c.length===N.length?"Deselect All":"Select All"})]}),o.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:N.map(P=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem 0.75rem",borderRadius:"8px",cursor:"pointer",background:c.includes(P.id)?"rgba(59, 130, 246, 0.08)":"transparent",border:`1px solid ${c.includes(P.id)?"rgba(59, 130, 246, 0.3)":"transparent"}`,marginBottom:"0.25rem",transition:"all 0.15s ease"},children:[o.jsx("input",{type:"checkbox",checked:c.includes(P.id),onChange:z=>{u(U=>z.target.checked?[...U,P.id]:U.filter(ee=>ee!==P.id))},style:{accentColor:"#3b82f6"}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:P.name}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[P.email,"  ",P.batch||"No batch"]})]}),o.jsx("span",{style:Zf("#6b7280"),children:P.mentor_id||"Unassigned"})]},P.id))})]}),o.jsx("div",{children:o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Reassignment"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#3b82f6",marginBottom:"0.5rem"},children:c.length}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginBottom:"1.5rem"},children:"students selected"}),o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Assign to Mentor"}),o.jsxs("select",{value:A,onChange:P=>m(P.target.value),style:{...Fj,marginBottom:"1.5rem"},children:[o.jsx("option",{value:"",children:"Select mentor..."}),s.map(P=>o.jsxs("option",{value:P.id,children:[P.name," (",P.email,")"]},P.id))]}),o.jsxs("button",{onClick:F,disabled:c.length===0||!A||w,style:{...BA,width:"100%",justifyContent:"center",opacity:c.length===0||!A?.5:1},children:[w?o.jsx(_c,{size:16,className:"spin"}):o.jsx(od,{size:16}),"Reassign ",c.length," Students"]})]})})]}),t==="regrade"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"1.5rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:[a.length," submissions"]}),o.jsx("button",{onClick:()=>f(d.length===a.length?[]:a.map(P=>P.id)),style:WA,children:d.length===a.length?"Deselect All":"Select All"})]}),o.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:a.slice(0,100).map(P=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem 0.75rem",borderRadius:"8px",cursor:"pointer",background:d.includes(P.id)?"rgba(59, 130, 246, 0.08)":"transparent",border:`1px solid ${d.includes(P.id)?"rgba(59, 130, 246, 0.3)":"transparent"}`,marginBottom:"0.25rem"},children:[o.jsx("input",{type:"checkbox",checked:d.includes(P.id),onChange:z=>{f(U=>z.target.checked?[...U,P.id]:U.filter(ee=>ee!==P.id))},style:{accentColor:"#3b82f6"}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:P.studentName||P.student_name||"Unknown"}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:P.problemTitle||P.problem_title||P.problem_id})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",color:(P.score||0)>=60?"#10b981":"#ef4444"},children:[P.score||0,"%"]}),o.jsx(Dj,{status:P.status||"pending"})]})]},P.id))})]}),o.jsx("div",{children:o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Bulk Actions"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#8b5cf6",marginBottom:"0.5rem"},children:d.length}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginBottom:"1.5rem"},children:"submissions selected"}),o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Action"}),o.jsxs("select",{value:g,onChange:P=>y(P.target.value),style:{...Fj,marginBottom:"1rem"},children:[o.jsx("option",{value:"mark_passed",children:"Mark as Passed (score  60)"}),o.jsx("option",{value:"mark_failed",children:"Mark as Failed (score = 0)"}),o.jsx("option",{value:"reset_scores",children:"Reset Scores (score = 0, pending)"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsxs("button",{onClick:D,disabled:d.length===0||w,style:{...BA,width:"100%",justifyContent:"center",opacity:d.length===0?.5:1},children:[w?o.jsx(_c,{size:16,className:"spin"}):o.jsx(_c,{size:16}),"Apply to ",d.length," Submissions"]}),o.jsxs("button",{onClick:T,disabled:d.length===0||w,style:{...PU,width:"100%",justifyContent:"center",opacity:d.length===0?.5:1},children:[o.jsx(po,{size:16})," Delete ",d.length," Submissions"]})]})]})})]})]})}function Fbt(){const[t,e]=C.useState([]),[n,r]=C.useState(null),[s,i]=C.useState(!0),[a,l]=C.useState(1),[c,u]=C.useState(0),[d,f]=C.useState(0),[A,m]=C.useState({action:"",resourceType:""}),[g,y]=C.useState(null);C.useEffect(()=>{(async()=>{i(!0);try{const w=new URLSearchParams({page:a,limit:30});A.action&&w.append("action",A.action),A.resourceType&&w.append("resourceType",A.resourceType);const[B,k]=await Promise.all([Xe.get(`${Wa}/admin/audit-logs?${w}`),Xe.get(`${Wa}/admin/audit-logs/stats`)]);e(B.data.logs),u(B.data.pagination.total),f(B.data.pagination.totalPages),r(k.data)}catch(w){console.error("Audit logs error:",w)}i(!1)})()},[a,A]);const x={bulk_reassign_students:"#3b82f6",bulk_regrade:"#8b5cf6",bulk_delete_submissions:"#ef4444",create_backup:"#10b981",create_template:"#06b6d4",delete_template:"#ef4444",apply_template:"#f59e0b",data_export:"#ec4899"};return o.jsxs("div",{children:[o.jsxs("div",{style:X0,children:[o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vs,{size:20,color:"#8b5cf6"})," Audit Trail"]}),o.jsxs("span",{style:Zf("#8b5cf6"),children:[c," total logs"]})]}),n&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#8b5cf6"},children:n.totalLogs}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Total Logs"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#3b82f6"},children:n.actionBreakdown?.length||0}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Unique Actions"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#10b981"},children:n.userActivity?.length||0}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Active Users"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#06b6d4"},children:n.recentActivity?.reduce((v,w)=>v+w.count,0)||0}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Last 7 Days"})]})]}),n?.recentActivity?.length>0&&o.jsxs("div",{style:{...Ss,marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Activity Trend (7 Days)"}),o.jsx(Xl,{width:"100%",height:200,children:o.jsxs(G1,{data:n.recentActivity,children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),o.jsx(fh,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:11}}),o.jsx(hh,{tick:{fill:"#94a3b8",fontSize:11}}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),o.jsx(cm,{dataKey:"count",fill:"#8b5cf6",radius:[4,4,0,0]})]})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("input",{placeholder:"Filter by action...",value:A.action,onChange:v=>{m(w=>({...w,action:v.target.value})),l(1)},style:{...C1,maxWidth:"250px"}}),o.jsxs("select",{value:A.resourceType,onChange:v=>{m(w=>({...w,resourceType:v.target.value})),l(1)},style:{...Fj,maxWidth:"200px"},children:[o.jsx("option",{value:"",children:"All Resources"}),o.jsx("option",{value:"allocation",children:"Allocation"}),o.jsx("option",{value:"submission",children:"Submission"}),o.jsx("option",{value:"template",children:"Template"}),o.jsx("option",{value:"backup",children:"Backup"})]})]}),s?o.jsx("div",{className:"loading-spinner"}):o.jsx("div",{style:Ss,children:t.length===0?o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No audit logs found. Actions will be logged as you use admin features."}):o.jsxs(o.Fragment,{children:[t.map(v=>o.jsxs("div",{onClick:()=>y(v),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.04)",transition:"background 0.15s"},onMouseOver:w=>w.currentTarget.style.background="rgba(255,255,255,0.03)",onMouseOut:w=>w.currentTarget.style.background="transparent",children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:x[v.action]||"#6b7280",flexShrink:0}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:v.action?.replace(/_/g," ")}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[v.user_name||"System","  ",v.resource_type||""]})]}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem",textAlign:"right"},children:new Date(v.timestamp).toLocaleString()}),o.jsx(gs,{size:14,color:"var(--text-muted)"})]},v.id)),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"1rem"},children:[o.jsxs("button",{disabled:a<=1,onClick:()=>l(v=>v-1),style:{...WA,opacity:a<=1?.4:1},children:[o.jsx(B1,{size:14})," Prev"]}),o.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:["Page ",a," of ",d]}),o.jsxs("button",{disabled:a>=d,onClick:()=>l(v=>v+1),style:{...WA,opacity:a>=d?.4:1},children:["Next ",o.jsx(hm,{size:14})]})]})]})}),g&&o.jsx("div",{style:Z8,onClick:()=>y(null),children:o.jsxs("div",{style:eD,onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Audit Log Detail"}),o.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:o.jsx(Os,{size:20})})]}),o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:[{label:"Action",value:g.action?.replace(/_/g," ")},{label:"User",value:`${g.user_name} (${g.user_role})`},{label:"Resource",value:`${g.resource_type||"-"} / ${g.resource_id||"-"}`},{label:"IP Address",value:g.ip_address||"-"},{label:"Timestamp",value:new Date(g.timestamp).toLocaleString()}].map((v,w)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:v.label}),o.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:v.value})]},w))}),g.details&&o.jsxs("div",{style:{marginTop:"1rem"},children:[o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginBottom:"0.5rem",fontWeight:600},children:"Details (JSON)"}),o.jsx("pre",{style:{background:"rgba(0,0,0,0.2)",padding:"1rem",borderRadius:"10px",fontSize:"0.75rem",color:"#06b6d4",overflowX:"auto",maxHeight:"250px"},children:JSON.stringify(g.details,null,2)})]})]})})]})}function Dbt(){const[t,e]=C.useState([]),[n,r]=C.useState([]),[s,i]=C.useState(!0),[a,l]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState({name:"",description:"",difficulty:"Mixed",tags:"",problemIds:[]});C.useEffect(()=>{Promise.all([Xe.get(`${Wa}/admin/templates`),Xe.get(`${Wa}/problems`)]).then(([x,v])=>{e(x.data);const w=Array.isArray(v.data)?v.data:v.data.problems||[];r(w),i(!1)}).catch(()=>i(!1))},[]);const A=async()=>{try{const x=await Xe.post(`${Wa}/admin/templates`,{...d,tags:d.tags.split(",").map(v=>v.trim()).filter(Boolean),createdBy:"admin-001",adminName:"Admin"});e(v=>[{...d,id:x.data.id,problemCount:d.problemIds.length,created_at:new Date},...v]),l(!1),f({name:"",description:"",difficulty:"Mixed",tags:"",problemIds:[]})}catch(x){alert(x.response?.data?.error||x.message)}},m=async x=>{if(window.confirm("Delete this template?"))try{await Xe.delete(`${Wa}/admin/templates/${x}?adminId=admin-001&adminName=Admin`),e(v=>v.filter(w=>w.id!==x))}catch(v){alert(v.response?.data?.error||v.message)}},g=async x=>{try{const v=await Xe.post(`${Wa}/admin/templates/${x}/apply`,{adminId:"admin-001",adminName:"Admin"});alert(v.data.message)}catch(v){alert(v.response?.data?.error||v.message)}},y=async x=>{try{const v=await Xe.get(`${Wa}/admin/templates/${x}`);u(v.data)}catch{alert("Failed to load template details")}};return s?o.jsx("div",{className:"loading-spinner"}):o.jsxs("div",{children:[o.jsxs("div",{style:X0,children:[o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gl,{size:20,color:"#06b6d4"})," Problem Set Templates"]}),o.jsxs("button",{onClick:()=>l(!0),style:BA,children:[o.jsx(zo,{size:16})," New Template"]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:[t.map(x=>o.jsxs("div",{style:{...Ss,position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:"radial-gradient(circle at top right, rgba(6, 182, 212, 0.1), transparent 70%)"}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,color:"var(--text)",fontSize:"1rem"},children:x.name}),o.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.8rem"},children:x.description||"No description"})]}),o.jsx("span",{style:Zf("#06b6d4"),children:x.difficulty})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[o.jsxs("span",{style:Zf("#3b82f6"),children:[o.jsx(qi,{size:10})," ",x.problemCount||0," problems"]}),(Array.isArray(x.tags)?x.tags:[]).map((v,w)=>o.jsx("span",{style:Zf("#8b5cf6"),children:v},w))]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>y(x.id),style:{...WA,flex:1,justifyContent:"center",padding:"0.5rem"},children:[o.jsx(gs,{size:14})," View"]}),o.jsxs("button",{onClick:()=>g(x.id),style:{...BA,flex:1,justifyContent:"center",padding:"0.5rem"},children:[o.jsx(dd,{size:14})," Apply"]}),o.jsx("button",{onClick:()=>m(x.id),style:{...PU,padding:"0.5rem"},children:o.jsx(po,{size:14})})]})]})]},x.id)),t.length===0&&o.jsxs("div",{style:{...Ss,gridColumn:"1 / -1",textAlign:"center",padding:"3rem"},children:[o.jsx(Gl,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem",opacity:.3}}),o.jsx("p",{style:{color:"var(--text-muted)"},children:"No templates yet. Create your first problem set template!"})]})]}),a&&o.jsx("div",{style:Z8,onClick:()=>l(!1),children:o.jsxs("div",{style:eD,onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Create Problem Set Template"}),o.jsx("button",{onClick:()=>l(!1),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Template Name"}),o.jsx("input",{value:d.name,onChange:x=>f(v=>({...v,name:x.target.value})),placeholder:"e.g., Beginner Python Set",style:C1})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Description"}),o.jsx("textarea",{value:d.description,onChange:x=>f(v=>({...v,description:x.target.value})),placeholder:"Describe this template...",style:{...C1,minHeight:"70px",resize:"vertical"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Difficulty"}),o.jsxs("select",{value:d.difficulty,onChange:x=>f(v=>({...v,difficulty:x.target.value})),style:Fj,children:[o.jsx("option",{value:"Mixed",children:"Mixed"}),o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Tags (comma-separated)"}),o.jsx("input",{value:d.tags,onChange:x=>f(v=>({...v,tags:x.target.value})),placeholder:"python, loops, basics",style:C1})]})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:["Select Problems (",d.problemIds.length," selected)"]}),o.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"10px",padding:"0.5rem"},children:n.map(x=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.5rem",borderRadius:"6px",cursor:"pointer",background:d.problemIds.includes(x.id)?"rgba(6, 182, 212, 0.08)":"transparent"},children:[o.jsx("input",{type:"checkbox",checked:d.problemIds.includes(x.id),onChange:v=>{f(w=>({...w,problemIds:v.target.checked?[...w.problemIds,x.id]:w.problemIds.filter(B=>B!==x.id)}))},style:{accentColor:"#06b6d4"}}),o.jsx("span",{style:{color:"var(--text)",fontSize:"0.82rem"},children:x.title}),o.jsx("span",{style:{marginLeft:"auto",...Zf("#6b7280")},children:x.difficulty})]},x.id))})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>l(!1),style:WA,children:"Cancel"}),o.jsxs("button",{onClick:A,disabled:!d.name,style:{...BA,opacity:d.name?1:.5},children:[o.jsx(tx,{size:16})," Create Template"]})]})]})}),c&&o.jsx("div",{style:Z8,onClick:()=>u(null),children:o.jsxs("div",{style:eD,onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,color:"var(--text)"},children:c.name}),o.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.85rem"},children:c.description})]}),o.jsx("button",{onClick:()=>u(null),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx("span",{style:Zf("#06b6d4"),children:c.difficulty}),(c.tags||[]).map((x,v)=>o.jsx("span",{style:Zf("#8b5cf6"),children:x},v))]}),o.jsxs("h4",{style:{color:"var(--text)",marginBottom:"0.75rem"},children:["Problems (",c.problems?.length||0,")"]}),(c.problems||[]).map((x,v)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"10px",marginBottom:"0.5rem",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:[o.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.75rem",color:"#06b6d4"},children:v+1}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:x.title}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[x.language,"  ",x.difficulty]})]})]},x.id))]})})]})}function Lbt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1);C.useEffect(()=>{Xe.get(`${Wa}/admin/backups`).then(u=>{e(u.data),r(!1)}).catch(()=>r(!1))},[]);const a=async()=>{i(!0);try{const u=await Xe.post(`${Wa}/admin/backups`,{adminId:"admin-001",adminName:"Admin"});e(d=>[{id:u.data.backupId,status:"completed",backup_type:"full",fileSizeFormatted:u.data.fileSize,tables_backed_up:u.data.tables,created_at:new Date},...d])}catch(u){alert("Backup failed: "+(u.response?.data?.error||u.message))}i(!1)},l=async u=>{if(window.confirm("Delete this backup?"))try{await Xe.delete(`${Wa}/admin/backups/${u}`),e(d=>d.filter(f=>f.id!==u))}catch(d){alert("Error: "+d.message)}},c=u=>{window.open(`${Wa}/admin/backups/${u}/download`,"_blank")};return n?o.jsx("div",{className:"loading-spinner"}):o.jsxs("div",{children:[o.jsxs("div",{style:X0,children:[o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wi,{size:20,color:"#10b981"})," Database Backups"]}),o.jsxs("button",{onClick:a,disabled:s,style:BA,children:[s?o.jsx(_c,{size:16,className:"spin"}):o.jsx(nZ,{size:16}),s?"Creating Backup...":"Create Backup Now"]})]}),o.jsx("div",{style:{...Ss,marginBottom:"1.5rem",background:"rgba(16, 185, 129, 0.05)",borderLeft:"4px solid #10b981"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(dD,{size:18,color:"#10b981"}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:"Full Database Backup"}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Creates a complete JSON export of all database tables. Download to keep a secure copy."})]})]})}),o.jsx("div",{style:Ss,children:t.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx(wi,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem",opacity:.3}}),o.jsx("p",{style:{color:"var(--text-muted)"},children:"No backups yet. Create your first backup!"})]}):t.map(u=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"12px",borderBottom:"1px solid rgba(255,255,255,0.04)",transition:"background 0.15s"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:u.status==="completed"?"rgba(16, 185, 129, 0.1)":"rgba(245, 158, 11, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.status==="completed"?o.jsx(Nn,{size:20,color:"#10b981"}):o.jsx(ls,{size:20,color:"#f59e0b"})}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:u.backup_type==="full"?"Full Backup":"Partial Backup"}),o.jsx(Dj,{status:u.status})]}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem",marginTop:"0.2rem"},children:[new Date(u.created_at).toLocaleString(),"  ",u.fileSizeFormatted||"N/A",u.tables_backed_up&&`  ${Array.isArray(u.tables_backed_up)?u.tables_backed_up.length:0} tables`]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>c(u.id),style:WA,title:"Download",children:o.jsx(ad,{size:14})}),o.jsx("button",{onClick:()=>l(u.id),style:{...PU,padding:"0.5rem 0.75rem"},title:"Delete",children:o.jsx(po,{size:14})})]})]},u.id))})]})}function $bt(){const[t,e]=C.useState(null),n=[{id:"students",label:"Students",description:"All student profiles with batch and mentor info",icon:o.jsx(od,{size:24}),color:"#3b82f6"},{id:"submissions",label:"Code Submissions",description:"All coding submissions with scores and statuses",icon:o.jsx(qi,{size:24}),color:"#8b5cf6"},{id:"problems",label:"Problems",description:"All coding problems with difficulty and language",icon:o.jsx(ex,{size:24}),color:"#06b6d4"},{id:"allocations",label:"Allocations",description:"Mentor-student allocation mappings",icon:o.jsx(od,{size:24}),color:"#10b981"},{id:"aptitude-submissions",label:"Aptitude Submissions",description:"All aptitude test submissions and scores",icon:o.jsx(fu,{size:24}),color:"#f59e0b"},{id:"audit-logs",label:"Audit Logs",description:"System audit trail (last 5000 entries)",icon:o.jsx(Vs,{size:24}),color:"#ef4444"}],r=async(s,i)=>{e(s);try{const a=`${Wa}/admin/export/${s}?format=${i}&adminId=admin-001&adminName=Admin`;if(i==="json"){const l=await Xe.get(a),c=new Blob([JSON.stringify(l.data,null,2)],{type:"application/json"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=`${s}_export.json`,d.click(),URL.revokeObjectURL(u)}else{const l=await Xe.get(a,{responseType:"blob"}),c=URL.createObjectURL(l.data),u=document.createElement("a");u.href=c,u.download=`${s}_export.csv`,u.click(),URL.revokeObjectURL(c)}}catch(a){alert("Export failed: "+(a.response?.data?.error||a.message))}e(null)};return o.jsxs("div",{children:[o.jsx("div",{style:X0,children:o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(ad,{size:20,color:"#f59e0b"})," Data Export Tools"]})}),o.jsx("div",{style:{...Ss,marginBottom:"1.5rem",background:"rgba(245, 158, 11, 0.05)",borderLeft:"4px solid #f59e0b"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(dD,{size:18,color:"#f59e0b"}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Export data in CSV (spreadsheet-compatible) or JSON format. CSV files can be opened in Excel, Google Sheets, etc."})]})}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:n.map(s=>o.jsxs("div",{style:{...Ss,position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",bottom:"-20px",right:"-20px",width:"100px",height:"100px",background:`radial-gradient(circle, ${s.color}15, transparent 70%)`}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`${s.color}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:xA.cloneElement(s.icon,{color:s.color})}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"0.95rem"},children:s.label}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:s.description})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>r(s.id,"csv"),disabled:t===s.id,style:{...WA,flex:1,justifyContent:"center",padding:"0.5rem"},children:[t===s.id?o.jsx(_c,{size:14,className:"spin"}):o.jsx(ad,{size:14})," CSV"]}),o.jsxs("button",{onClick:()=>r(s.id,"json"),disabled:t===s.id,style:{...BA,flex:1,justifyContent:"center",padding:"0.5rem"},children:[t===s.id?o.jsx(_c,{size:14,className:"spin"}):o.jsx(ad,{size:14})," JSON"]})]})]})]},s.id))})]})}function Pbt(){const[t,e]=C.useState(null),[n,r]=C.useState(!0);if(C.useEffect(()=>{Xe.get(`${Wa}/admin/analytics/comprehensive`).then(i=>{e(i.data),r(!1)}).catch(()=>r(!1))},[]),n)return o.jsx("div",{className:"loading-spinner"});if(!t)return o.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"3rem"},children:"Failed to load analytics"});const s=t.weeklyGrowth>=0?o.jsx(uf,{size:14,color:"#10b981"}):o.jsx(Nye,{size:14,color:"#ef4444"});return o.jsxs("div",{children:[o.jsxs("div",{style:X0,children:[o.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(fu,{size:20,color:"#ec4899"})," Comprehensive Analytics"]}),o.jsxs("span",{style:Zf(t.weeklyGrowth>=0?"#10b981":"#ef4444"),children:[s," ",t.weeklyGrowth>=0?"+":"",t.weeklyGrowth,"% weekly"]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[{label:"Students",value:t.userStats?.student||0,color:"#3b82f6"},{label:"Mentors",value:t.userStats?.mentor||0,color:"#8b5cf6"},{label:"Admins",value:t.userStats?.admin||0,color:"#06b6d4"},{label:"This Week",value:t.thisWeekSubmissions,color:"#10b981"},{label:"Last Week",value:t.lastWeekSubmissions,color:"#f59e0b"}].map((i,a)=>o.jsxs("div",{style:{...Ss,borderTop:`3px solid ${i.color}`},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:i.color},children:i.value}),o.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:i.label})]},a))}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Submissions (30 Days)"}),t.dailySubmissions?.length>0?o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(CU,{data:t.dailySubmissions,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorSubs",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),o.jsx(fh,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:10}}),o.jsx(hh,{tick:{fill:"#94a3b8",fontSize:10}}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",fontSize:"0.8rem"}}),o.jsx(cN,{type:"monotone",dataKey:"count",stroke:"#3b82f6",fill:"url(#colorSubs)",strokeWidth:2})]})}):o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Language Distribution"}),t.languageDistribution?.length>0?o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(uN,{children:[o.jsx(OS,{data:t.languageDistribution,cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,dataKey:"count",nameKey:"name",label:({name:i,percent:a})=>`${i} ${(a*100).toFixed(0)}%`,children:t.languageDistribution.map((i,a)=>o.jsx(gf,{fill:_J[a%_J.length]},a))}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}})]})}):o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Activity by Hour (7 Days)"}),t.hourlyActivity?.length>0?o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(G1,{data:t.hourlyActivity,children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),o.jsx(fh,{dataKey:"hour",tick:{fill:"#94a3b8",fontSize:10}}),o.jsx(hh,{tick:{fill:"#94a3b8",fontSize:10}}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),o.jsx(cm,{dataKey:"count",fill:"#8b5cf6",radius:[4,4,0,0]})]})}):o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Difficulty Analysis"}),t.difficultyStats?.length>0?o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:t.difficultyStats.map((i,a)=>o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"10px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:i.difficulty}),o.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:[i.submissions," submissions"]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem"},children:[o.jsxs("span",{style:{color:"#3b82f6"},children:["Avg: ",i.avgScore,"%"]}),o.jsxs("span",{style:{color:"#10b981"},children:["Pass: ",i.passRate,"%"]})]}),o.jsx("div",{style:{height:"4px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"2px",marginTop:"0.5rem"},children:o.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,background:i.passRate>60?"#10b981":i.passRate>30?"#f59e0b":"#ef4444",borderRadius:"2px"}})})]},a))}):o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Top Performing Students"}),(t.topStudents||[]).map((i,a)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem",borderRadius:"8px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[o.jsxs("span",{style:{width:"28px",height:"28px",borderRadius:"8px",background:a<3?"linear-gradient(135deg, #f59e0b, #ef4444)":"rgba(107, 114, 128, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.75rem",color:a<3?"white":"var(--text-muted)"},children:["#",a+1]}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:i.name}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[i.batch||"No batch","  ",i.totalSubmissions," submissions"]})]}),o.jsxs("div",{style:{fontWeight:700,fontSize:"0.9rem",color:i.avgScore>=70?"#10b981":"#f59e0b"},children:[i.avgScore,"%"]})]},a)),(!t.topStudents||t.topStudents.length===0)&&o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Mentor Effectiveness"}),(t.mentorStats||[]).map((i,a)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem",borderRadius:"8px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[o.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.7rem",color:"white"},children:i.name?.[0]||"?"}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:i.name}),o.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[i.studentCount," students  ",i.totalStudentSubmissions," submissions"]})]}),o.jsxs("div",{style:{fontWeight:700,fontSize:"0.9rem",color:i.avgStudentScore>=60?"#10b981":"#f59e0b"},children:[i.avgStudentScore,"%"]})]},a)),(!t.mentorStats||t.mentorStats.length===0)&&o.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]})]}),t.batchPerformance?.length>0&&o.jsxs("div",{style:Ss,children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Batch Performance"}),o.jsx(Xl,{width:"100%",height:250,children:o.jsxs(G1,{data:t.batchPerformance,children:[o.jsx(CA,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),o.jsx(fh,{dataKey:"batch",tick:{fill:"#94a3b8",fontSize:11}}),o.jsx(hh,{tick:{fill:"#94a3b8",fontSize:11}}),o.jsx(Jl,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),o.jsx(VP,{}),o.jsx(cm,{dataKey:"avgScore",name:"Avg Score",fill:"#3b82f6",radius:[4,4,0,0]}),o.jsx(cm,{dataKey:"submissions",name:"Submissions",fill:"#8b5cf6",radius:[4,4,0,0]})]})})]})]})}const Ag="http://localhost:8000/api",Hv={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},oA={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none",boxSizing:"border-box"},eB={...oA,cursor:"pointer"},k2={padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},zbt={...k2,background:"linear-gradient(135deg, #ef4444, #dc2626)"},Vy={...k2,background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)"},RJ={active:"#10b981",inactive:"#f59e0b",suspended:"#ef4444"},OJ={admin:"#8b5cf6",mentor:"#3b82f6",student:"#10b981"};function Ubt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState([]),[a,l]=C.useState({role:"",status:"",search:"",batch:""}),[c,u]=C.useState({page:1,limit:15,total:0,pages:0}),[d,f]=C.useState(!1),[A,m]=C.useState(null),[g,y]=C.useState(null),[x,v]=C.useState(""),[w,B]=C.useState(!1),[k,j]=C.useState(null),[I,O]=C.useState({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),[F,D]=C.useState(null),T=C.useCallback(async(K=1)=>{r(!0);try{const H=new URLSearchParams({page:K,limit:c.limit});a.role&&H.set("role",a.role),a.status&&H.set("status",a.status),a.search&&H.set("search",a.search),a.batch&&H.set("batch",a.batch);const Q=await Xe.get(`${Ag}/admin/users?${H}`);e(Q.data.data),u(X=>({...X,page:K,total:Q.data.pagination.total,pages:Q.data.pagination.pages}))}catch(H){console.error(H)}r(!1)},[a,c.limit]),N=async()=>{try{const K=await Xe.get(`${Ag}/users?role=mentor`);i(Array.isArray(K.data)?K.data:K.data.data||[])}catch(K){console.error(K)}};C.useEffect(()=>{T(),N()},[]),C.useEffect(()=>{const K=setTimeout(()=>T(1),300);return()=>clearTimeout(K)},[a]);const P=(K,H="success")=>{D({text:K,type:H}),setTimeout(()=>D(null),3e3)},z=async()=>{if(!I.name||!I.email||!I.password)return P("Name, email, and password are required","error");try{await Xe.post(`${Ag}/admin/users`,I),P(`User ${I.name} created successfully`),f(!1),O({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),T(c.page)}catch(K){P(K.response?.data?.error||"Failed to create user","error")}},U=async()=>{try{await Xe.put(`${Ag}/admin/users/${A.id}`,I),P(`User ${A.id} updated successfully`),m(null),f(!1),T(c.page)}catch(K){P(K.response?.data?.error||"Failed to update user","error")}},ee=async K=>{try{await Xe.delete(`${Ag}/admin/users/${K}`),P(`User ${K} deleted`),j(null),T(c.page)}catch(H){P(H.response?.data?.error||"Failed to delete user","error")}},q=async K=>{if(!x)return P("Password cannot be empty","error");try{await Xe.post(`${Ag}/admin/users/${K}/reset-password`,{newPassword:x}),P("Password reset successfully"),y(null),v("")}catch{P("Failed to reset password","error")}},Z=async(K,H)=>{const Q=H==="active"?"suspended":"active";try{await Xe.patch(`${Ag}/admin/users/${K}/status`,{status:Q}),P(`User status changed to ${Q}`),T(c.page)}catch{P("Failed to change status","error")}},G=K=>{m(K),O({name:K.name,email:K.email,password:"",role:K.role,mentorId:K.mentor_id||K.mentorId||"",batch:K.batch||"",phone:K.phone||""}),f(!0)},ne=()=>{m(null),O({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),f(!0)};return o.jsxs("div",{className:"animate-fadeIn",children:[F&&o.jsxs("div",{style:{position:"fixed",top:"1rem",right:"1rem",zIndex:9999,padding:"1rem 1.5rem",borderRadius:"12px",background:F.type==="error"?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #10b981, #059669)",color:"white",fontWeight:600,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[F.type==="error"?o.jsx(kr,{size:18}):o.jsx(Nn,{size:18})," ",F.text]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"var(--text)"},children:"User Management"}),o.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.85rem"},children:[c.total," total users"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsxs("button",{onClick:()=>T(c.page),style:Vy,children:[o.jsx(_c,{size:16})," Refresh"]}),o.jsxs("button",{onClick:ne,style:k2,children:[o.jsx($ye,{size:16})," Add User"]})]})]}),o.jsxs("div",{style:{...Hv,marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:"2",minWidth:"200px",position:"relative"},children:[o.jsx(j0,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{placeholder:"Search name, email, or ID...",value:a.search,onChange:K=>l(H=>({...H,search:K.target.value})),style:{...oA,paddingLeft:"36px"}})]}),o.jsxs("select",{value:a.role,onChange:K=>l(H=>({...H,role:K.target.value})),style:{...eB,flex:"1",minWidth:"130px"},children:[o.jsx("option",{value:"",children:"All Roles"}),o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"mentor",children:"Mentor"}),o.jsx("option",{value:"admin",children:"Admin"})]}),o.jsxs("select",{value:a.status,onChange:K=>l(H=>({...H,status:K.target.value})),style:{...eB,flex:"1",minWidth:"130px"},children:[o.jsx("option",{value:"",children:"All Status"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"}),o.jsx("option",{value:"suspended",children:"Suspended"})]}),o.jsx("input",{placeholder:"Filter batch...",value:a.batch,onChange:K=>l(H=>({...H,batch:K.target.value})),style:{...oA,flex:"1",minWidth:"120px"}})]}),o.jsxs("div",{style:{...Hv,padding:0,overflow:"hidden"},children:[n?o.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:o.jsx("div",{className:"loading-spinner"})}):o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsx("tr",{style:{borderBottom:"1px solid var(--border-color)",background:"rgba(59,130,246,0.05)"},children:["ID","Name","Email","Role","Mentor","Batch","Status","Actions"].map(K=>o.jsx("th",{style:{padding:"0.8rem 1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:K},K))})}),o.jsx("tbody",{children:t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:"No users found"})}):t.map(K=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)",transition:"background 0.2s"},onMouseEnter:H=>H.currentTarget.style.background="rgba(59,130,246,0.03)",onMouseLeave:H=>H.currentTarget.style.background="transparent",children:[o.jsx("td",{style:{padding:"0.75rem 1rem",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-muted)"},children:K.id}),o.jsx("td",{style:{padding:"0.75rem 1rem",fontWeight:600,color:"var(--text)"},children:K.name}),o.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:K.email}),o.jsx("td",{style:{padding:"0.75rem 1rem"},children:o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${OJ[K.role]}20`,color:OJ[K.role]},children:K.role})}),o.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:K.mentor_id||K.mentorId||""}),o.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:K.batch||""}),o.jsx("td",{style:{padding:"0.75rem 1rem"},children:o.jsx("span",{onClick:()=>Z(K.id,K.status||"active"),style:{padding:"0.2rem 0.6rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${RJ[K.status||"active"]}20`,color:RJ[K.status||"active"],cursor:"pointer"},children:K.status||"active"})}),o.jsx("td",{style:{padding:"0.75rem 1rem"},children:o.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[o.jsx("button",{onClick:()=>G(K),title:"Edit",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#3b82f6",cursor:"pointer"},children:o.jsx(dZ,{size:14})}),o.jsx("button",{onClick:()=>y(K.id),title:"Reset Password",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#f59e0b",cursor:"pointer"},children:o.jsx(iO,{size:14})}),o.jsx("button",{onClick:()=>j(K.id),title:"Delete",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#ef4444",cursor:"pointer"},children:o.jsx(po,{size:14})})]})})]},K.id))})]})}),c.pages>1&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderTop:"1px solid var(--border-color)"},children:[o.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:["Page ",c.page," of ",c.pages," (",c.total," users)"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{disabled:c.page<=1,onClick:()=>T(c.page-1),style:{...Vy,opacity:c.page<=1?.5:1},children:o.jsx(B1,{size:16})}),o.jsx("button",{disabled:c.page>=c.pages,onClick:()=>T(c.page+1),style:{...Vy,opacity:c.page>=c.pages?.5:1},children:o.jsx(hm,{size:16})})]})]})]}),d&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>f(!1),children:o.jsxs("div",{style:{...Hv,width:"500px",maxHeight:"85vh",overflowY:"auto",position:"relative"},onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:700},children:A?"Edit User":"Create New User"}),o.jsx("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Name *"}),o.jsx("input",{value:I.name,onChange:K=>O(H=>({...H,name:K.target.value})),placeholder:"Full Name",style:oA})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Email *"}),o.jsx("input",{type:"email",value:I.email,onChange:K=>O(H=>({...H,email:K.target.value})),placeholder:"email@example.com",style:oA})]}),!A&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Password *"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:w?"text":"password",value:I.password,onChange:K=>O(H=>({...H,password:K.target.value})),placeholder:"Password",style:{...oA,paddingRight:"40px"}}),o.jsx("button",{onClick:()=>B(!w),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:w?o.jsx(Zg,{size:16}):o.jsx(gs,{size:16})})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Role *"}),o.jsxs("select",{value:I.role,onChange:K=>O(H=>({...H,role:K.target.value})),style:eB,children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"mentor",children:"Mentor"}),o.jsx("option",{value:"admin",children:"Admin"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Batch"}),o.jsx("input",{value:I.batch,onChange:K=>O(H=>({...H,batch:K.target.value})),placeholder:"e.g. 2025-A",style:oA})]})]}),I.role==="student"&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Assign Mentor"}),o.jsxs("select",{value:I.mentorId,onChange:K=>O(H=>({...H,mentorId:K.target.value})),style:eB,children:[o.jsx("option",{value:"",children:"No Mentor"}),s.map(K=>o.jsxs("option",{value:K.id,children:[K.name," (",K.id,")"]},K.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Phone"}),o.jsx("input",{value:I.phone,onChange:K=>O(H=>({...H,phone:K.target.value})),placeholder:"+91 9876543210",style:oA})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>f(!1),style:Vy,children:"Cancel"}),o.jsxs("button",{onClick:A?U:z,style:k2,children:[o.jsx(tx,{size:16})," ",A?"Update":"Create"]})]})]})}),g&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>y(null),children:o.jsxs("div",{style:{...Hv,width:"400px"},onClick:K=>K.stopPropagation(),children:[o.jsx("h3",{style:{margin:"0 0 1rem",fontWeight:700},children:"Reset Password"}),o.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.85rem"},children:["User: ",o.jsx("strong",{children:g})]}),o.jsx("input",{type:"password",value:x,onChange:K=>v(K.target.value),placeholder:"Enter new password",style:oA}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.25rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>y(null),style:Vy,children:"Cancel"}),o.jsxs("button",{onClick:()=>q(g),style:k2,children:[o.jsx(iO,{size:16})," Reset"]})]})]})}),k&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>j(null),children:o.jsxs("div",{style:{...Hv,width:"400px",textAlign:"center"},onClick:K=>K.stopPropagation(),children:[o.jsx(Pn,{size:48,color:"#ef4444",style:{marginBottom:"1rem"}}),o.jsx("h3",{style:{margin:"0 0 0.5rem",fontWeight:700},children:"Delete User?"}),o.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",fontSize:"0.85rem"},children:["This will permanently delete ",o.jsx("strong",{children:k})," and all their data. This cannot be undone."]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>j(null),style:Vy,children:"Cancel"}),o.jsxs("button",{onClick:()=>ee(k),style:zbt,children:[o.jsx(po,{size:16})," Delete"]})]})]})})]})}const Wv="http://localhost:8000",tD={Languages:["Python","JavaScript","Java","C++","C#","Go","Rust","TypeScript"],Frontend:["React","Angular","Vue.js","HTML","CSS"],Backend:["Node.js","Express.js","Django","Flask","Spring Boot"],Databases:["SQL","MySQL","PostgreSQL","MongoDB","Redis"],"CS Fundamentals":["Data Structures","Algorithms","System Design","OOP","Design Patterns"],"DevOps & Cloud":["Docker","Kubernetes","AWS","Azure","GCP","Git","Linux"],"API & Web":["REST API","GraphQL","Networking","Security","Testing"],"AI / ML":["Machine Learning","Deep Learning","NLP","Computer Vision"]},Mbt=Object.values(tD).flat(),qy=({icon:t,title:e,subtitle:n,color:r,children:s})=>o.jsxs("div",{style:{background:"#1e293b",borderRadius:"14px",border:"1px solid #334155",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{padding:"14px 18px",display:"flex",alignItems:"center",gap:"10px",borderBottom:"1px solid #334155",background:`linear-gradient(135deg, ${r}18, ${r}08)`},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",background:`${r}25`,color:r},children:t}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:"#f1f5f9"},children:e}),n&&o.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:n})]})]}),o.jsx("div",{style:{padding:"16px 18px"},children:s})]}),au=({label:t,value:e,onChange:n,min:r,max:s,icon:i,color:a,suffix:l})=>o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[o.jsxs("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[i," ",t]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:"10px",border:"1px solid #475569",overflow:"hidden",background:"#0f172a"},children:[o.jsx("button",{onClick:()=>n(Math.max(r,e-1)),style:{width:"36px",height:"40px",border:"none",background:"#1e293b",cursor:"pointer",fontSize:"18px",color:"#94a3b8",fontWeight:600,borderRight:"1px solid #475569"},children:""}),o.jsx("input",{type:"number",value:e,min:r,max:s,onChange:c=>n(Math.min(s,Math.max(r,parseInt(c.target.value)||r))),style:{flex:1,textAlign:"center",border:"none",outline:"none",fontSize:"16px",fontWeight:700,color:a||"#f1f5f9",padding:"8px 4px",width:"100%",boxSizing:"border-box",background:"transparent"}}),o.jsx("button",{onClick:()=>n(Math.min(s,e+1)),style:{width:"36px",height:"40px",border:"none",background:"#1e293b",cursor:"pointer",fontSize:"18px",color:"#94a3b8",fontWeight:600,borderLeft:"1px solid #475569"},children:"+"})]}),l&&o.jsx("span",{style:{fontSize:"10px",color:"#64748b",textAlign:"center"},children:l})]});function Qbt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1),[a,l]=C.useState(null),[c,u]=C.useState([]),[d,f]=C.useState(!1),[A,m]=C.useState({title:"",description:"",skills:[],difficulty_level:"mixed",mcq_count:10,coding_count:3,sql_count:3,interview_count:5,attempt_limit:1,mcq_duration_minutes:30,coding_duration_minutes:45,sql_duration_minutes:45,interview_duration_minutes:30,mcq_passing_score:60,coding_passing_score:50,sql_passing_score:50,interview_passing_score:6,proctoring_enabled:!0,proctoring_config:{camera:!0,mic:!0,fullscreen:!0,paste_disabled:!0,face_detection:!0,camera_block_detect:!0,phone_detect:!0}}),[g,y]=C.useState(""),[x,v]=C.useState(null),[w,B]=C.useState("");C.useEffect(()=>{k()},[]);const k=async()=>{try{r(!0);const{data:z}=await Xe.get(`${Wv}/api/skill-tests/all`);e(z)}catch(z){B(z.response?.data?.error||z.message)}finally{r(!1)}},j=async()=>{if(!A.title.trim())return B("Title is required");if(A.skills.length===0)return B("Select at least one skill");B(""),f(!0);try{await Xe.post(`${Wv}/api/skill-tests/create`,A),i(!1),m({title:"",description:"",skills:[],difficulty_level:"mixed",mcq_count:10,coding_count:3,sql_count:3,interview_count:5,attempt_limit:1,mcq_duration_minutes:30,coding_duration_minutes:45,sql_duration_minutes:45,interview_duration_minutes:30,mcq_passing_score:60,coding_passing_score:50,sql_passing_score:50,interview_passing_score:6,proctoring_enabled:!0,proctoring_config:{camera:!0,mic:!0,fullscreen:!0,paste_disabled:!0,face_detection:!0,camera_block_detect:!0,phone_detect:!0}}),k()}catch(z){B(z.response?.data?.error||z.message)}finally{f(!1)}},I=async z=>{try{await Xe.put(`${Wv}/api/skill-tests/${z}/toggle`),k()}catch(U){B(U.message)}},O=async z=>{if(window.confirm("Delete this test and all its attempts?"))try{await Xe.delete(`${Wv}/api/skill-tests/${z}`),k()}catch(U){B(U.message)}},F=async z=>{try{const{data:U}=await Xe.get(`${Wv}/api/skill-tests/${z}/attempts`);u(U),l(z)}catch(U){B(U.message)}},D=z=>{m(U=>({...U,skills:U.skills.includes(z)?U.skills.filter(ee=>ee!==z):[...U.skills,z]}))},T=z=>{const U=tD[z]||[],ee=U.every(q=>A.skills.includes(q));m(q=>({...q,skills:ee?q.skills.filter(Z=>!U.includes(Z)):[...new Set([...q.skills,...U])]}))},N=g?Mbt.filter(z=>z.toLowerCase().includes(g.toLowerCase())):[],P={passed:"#22c55e",failed:"#ef4444",in_progress:"#f59e0b",pending:"#6b7280"};return o.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:o.jsx(Zr,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:800,color:"#f1f5f9"},children:"Skill Test Management"}),o.jsx("p",{style:{margin:0,fontSize:"13px",color:"#9ca3af"},children:"Create & manage AI-powered assessments"})]})]}),o.jsxs("button",{onClick:()=>{i(!s),B("")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"11px 22px",background:s?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",boxShadow:"0 2px 8px rgba(139,92,246,0.3)",transition:"all 0.2s"},children:[s?o.jsx(Os,{size:18}):o.jsx(zo,{size:18}),s?"Cancel":"Create Test"]})]}),w&&o.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"10px",padding:"12px 16px",marginBottom:"16px",color:"#fca5a5",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[o.jsxs("span",{children:[o.jsx(kr,{size:14,style:{verticalAlign:"middle",marginRight:"6px"}}),w]}),o.jsx("button",{onClick:()=>B(""),style:{background:"none",border:"none",cursor:"pointer",color:"#fca5a5",padding:"4px"},children:o.jsx(Os,{size:16})})]}),s&&o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.08), rgba(109,40,217,0.05))",borderRadius:"16px",padding:"24px",marginBottom:"28px",border:"1px solid rgba(139,92,246,0.2)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[o.jsx(Qo,{size:20,color:"#8b5cf6"}),o.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:800,color:"#c4b5fd"},children:"Create New Assessment"})]}),o.jsx(qy,{icon:o.jsx(qi,{size:16}),title:"Basic Information",subtitle:"Name your assessment",color:"#3b82f6",children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"14px"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{fontWeight:600,fontSize:"12px",display:"block",marginBottom:"6px",color:"#cbd5e1"},children:["Test Title ",o.jsx("span",{style:{color:"#f87171"},children:"*"})]}),o.jsx("input",{value:A.title,onChange:z=>m({...A,title:z.target.value}),placeholder:"e.g., Full Stack Developer Assessment",style:{width:"100%",padding:"11px 14px",borderRadius:"10px",border:"2px solid "+(A.title?"#8b5cf6":"#475569"),fontSize:"14px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontWeight:600,fontSize:"12px",display:"block",marginBottom:"6px",color:"#cbd5e1"},children:"Description"}),o.jsx("input",{value:A.description,onChange:z=>m({...A,description:z.target.value}),placeholder:"Brief description of this test",style:{width:"100%",padding:"11px 14px",borderRadius:"10px",border:"2px solid #475569",fontSize:"14px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]})]})}),o.jsx("div",{style:{height:"14px"}}),o.jsxs(qy,{icon:o.jsx(Sye,{size:16}),title:"Skills Selection",subtitle:`${A.skills.length} skill${A.skills.length!==1?"s":""} selected`,color:"#8b5cf6",children:[A.skills.length>0&&o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"14px",padding:"10px",background:"rgba(139,92,246,0.1)",borderRadius:"10px",border:"1px dashed rgba(139,92,246,0.4)"},children:A.skills.map(z=>o.jsxs("span",{onClick:()=>D(z),style:{padding:"5px 12px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",borderRadius:"20px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:600,boxShadow:"0 1px 3px rgba(139,92,246,0.3)",transition:"transform 0.15s"},children:[z," ",o.jsx(Os,{size:12})]},z))}),o.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[o.jsx(j0,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),o.jsx("input",{value:g,onChange:z=>y(z.target.value),placeholder:"Search skills...",style:{width:"100%",padding:"10px 12px 10px 36px",borderRadius:"10px",border:"2px solid #475569",fontSize:"13px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]}),g&&o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",padding:"10px",background:"rgba(245,158,11,0.08)",borderRadius:"8px"},children:N.length===0?o.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af"},children:['No skills found for "',g,'"']}):N.map(z=>o.jsxs("span",{onClick:()=>D(z),style:{padding:"5px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",fontWeight:500,transition:"all 0.15s",background:A.skills.includes(z)?"#8b5cf6":"#0f172a",color:A.skills.includes(z)?"white":"#cbd5e1",border:"1px solid "+(A.skills.includes(z)?"#7c3aed":"#475569"),boxShadow:A.skills.includes(z)?"0 1px 3px rgba(139,92,246,0.3)":"none"},children:[A.skills.includes(z)?" ":"",z]},z))}),!g&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:Object.entries(tD).map(([z,U])=>{const ee=U.filter(Z=>A.skills.includes(Z)).length,q=x===z;return o.jsxs("div",{style:{border:"1px solid "+(ee>0?"rgba(139,92,246,0.4)":"#475569"),borderRadius:"10px",overflow:"hidden",background:ee>0?"rgba(139,92,246,0.08)":"#0f172a",transition:"all 0.2s"},children:[o.jsxs("div",{onClick:()=>v(q?null:z),style:{padding:"10px 14px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontWeight:600,fontSize:"13px",color:"#e2e8f0"},children:z}),ee>0&&o.jsxs("span",{style:{padding:"1px 8px",borderRadius:"10px",fontSize:"11px",background:"#8b5cf6",color:"white",fontWeight:700},children:[ee,"/",U.length]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:Z=>{Z.stopPropagation(),T(z)},style:{padding:"3px 8px",borderRadius:"6px",border:"1px solid #475569",background:ee===U.length?"#8b5cf6":"#1e293b",color:ee===U.length?"white":"#94a3b8",fontSize:"10px",fontWeight:600,cursor:"pointer"},children:ee===U.length?"Deselect All":"Select All"}),q?o.jsx(Am,{size:16,color:"#9ca3af"}):o.jsx(EA,{size:16,color:"#9ca3af"})]})]}),q&&o.jsx("div",{style:{padding:"8px 14px 12px",borderTop:"1px solid #334155",display:"flex",flexWrap:"wrap",gap:"6px"},children:U.map(Z=>o.jsxs("span",{onClick:()=>D(Z),style:{padding:"5px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",fontWeight:500,transition:"all 0.15s",background:A.skills.includes(Z)?"#8b5cf6":"#1e293b",color:A.skills.includes(Z)?"white":"#cbd5e1",border:"1px solid "+(A.skills.includes(Z)?"#7c3aed":"#475569"),boxShadow:A.skills.includes(Z)?"0 1px 3px rgba(139,92,246,0.3)":"none"},children:[A.skills.includes(Z)?" ":"",Z]},Z))})]},z)})})]}),o.jsx("div",{style:{height:"14px"}}),o.jsx(qy,{icon:o.jsx(Br,{size:16}),title:"Difficulty Level",subtitle:"Set overall difficulty",color:"#f59e0b",children:o.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[{value:"easy",label:"Easy",desc:"Beginner friendly",color:"#22c55e"},{value:"medium",label:"Medium",desc:"Intermediate level",color:"#f59e0b"},{value:"hard",label:"Hard",desc:"Advanced concepts",color:"#ef4444"},{value:"mixed",label:"Mixed",desc:"30% easy, 50% medium, 20% hard",color:"#8b5cf6"}].map(z=>o.jsxs("button",{onClick:()=>m({...A,difficulty_level:z.value}),style:{flex:"1 1 140px",padding:"14px 16px",borderRadius:"12px",cursor:"pointer",background:A.difficulty_level===z.value?`${z.color}18`:"#0f172a",border:`2px solid ${A.difficulty_level===z.value?z.color:"#475569"}`,textAlign:"center",transition:"all 0.2s"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:A.difficulty_level===z.value?z.color:"#e2e8f0",marginBottom:"4px"},children:z.label}),o.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:z.desc})]},z.value))})}),o.jsx("div",{style:{height:"14px"}}),o.jsxs(qy,{icon:o.jsx(Vs,{size:16}),title:"Proctoring Mode",subtitle:A.proctoring_enabled?"Enabled  configure options":"Disabled",color:"#ef4444",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:A.proctoring_enabled?"16px":"0",padding:"10px 14px",background:"#0f172a",borderRadius:"10px",border:"1px solid #334155"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:"#f1f5f9"},children:"Enable Proctoring"}),o.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:"Monitor students during test"})]}),o.jsx("button",{onClick:()=>m({...A,proctoring_enabled:!A.proctoring_enabled}),style:{background:"none",border:"none",cursor:"pointer",padding:0},children:A.proctoring_enabled?o.jsx(S7,{size:36,color:"#22c55e"}):o.jsx(oO,{size:36,color:"#475569"})})]}),A.proctoring_enabled&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"10px"},children:[{key:"camera",label:"Camera",desc:"Webcam monitoring",icon:o.jsx(rB,{size:16}),color:"#3b82f6"},{key:"mic",label:"Microphone",desc:"Audio monitoring",icon:o.jsx(Uj,{size:16}),color:"#8b5cf6"},{key:"fullscreen",label:"Fullscreen",desc:"Force fullscreen mode",icon:o.jsx(qv,{size:16}),color:"#06b6d4"},{key:"paste_disabled",label:"Paste Disabled",desc:"Block copy-paste",icon:o.jsx(r0e,{size:16}),color:"#f59e0b"},{key:"face_detection",label:"Face Movement",desc:"Detect face away/moving",icon:o.jsx(lye,{size:16}),color:"#10b981"},{key:"camera_block_detect",label:"Camera Block",desc:"Detect covered camera",icon:o.jsx(h2,{size:16}),color:"#ef4444"},{key:"phone_detect",label:"Phone Detection",desc:"Detect mobile phone",icon:o.jsx(aO,{size:16}),color:"#ec4899"}].map(z=>{const U=A.proctoring_config[z.key];return o.jsxs("button",{onClick:()=>m({...A,proctoring_config:{...A.proctoring_config,[z.key]:!U}}),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 14px",borderRadius:"10px",cursor:"pointer",textAlign:"left",background:U?`${z.color}12`:"#0f172a",border:`1.5px solid ${U?z.color:"#475569"}`,transition:"all 0.2s"},children:[o.jsx("div",{style:{width:"34px",height:"34px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,background:U?`${z.color}25`:"#1e293b",color:U?z.color:"#64748b"},children:z.icon}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:U?"#f1f5f9":"#94a3b8"},children:z.label}),o.jsx("div",{style:{fontSize:"10px",color:"#64748b"},children:z.desc})]}),o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:U?z.color:"#475569",flexShrink:0}})]},z.key)})})]}),o.jsx("div",{style:{height:"14px"}}),o.jsx(qy,{icon:o.jsx(sO,{size:16}),title:"Question Configuration",subtitle:"Set number of questions per section",color:"#10b981",children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[o.jsx(au,{label:"MCQ Questions",value:A.mcq_count,onChange:z=>m({...A,mcq_count:z}),min:5,max:50,icon:o.jsx(Zr,{size:12}),color:"#8b5cf6",suffix:"550 questions"}),o.jsx(au,{label:"Coding Problems",value:A.coding_count,onChange:z=>m({...A,coding_count:z}),min:1,max:10,icon:o.jsx(Lr,{size:12}),color:"#3b82f6",suffix:"110 problems"}),o.jsx(au,{label:"SQL Problems",value:A.sql_count,onChange:z=>m({...A,sql_count:z}),min:1,max:10,icon:o.jsx(wi,{size:12}),color:"#10b981",suffix:"110 problems"}),o.jsx(au,{label:"Interview Qs",value:A.interview_count,onChange:z=>m({...A,interview_count:z}),min:3,max:15,icon:o.jsx(qp,{size:12}),color:"#f59e0b",suffix:"315 questions"})]})}),o.jsx("div",{style:{height:"14px"}}),o.jsxs(qy,{icon:o.jsx(Br,{size:16}),title:"Passing Criteria & Settings",subtitle:"Configure passing scores and limits",color:"#ef4444",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"14px"},children:[o.jsx(au,{label:"MCQ Pass %",value:A.mcq_passing_score,onChange:z=>m({...A,mcq_passing_score:z}),min:30,max:100,icon:o.jsx(fu,{size:12}),color:"#8b5cf6",suffix:"min 30%"}),o.jsx(au,{label:"Coding Pass %",value:A.coding_passing_score,onChange:z=>m({...A,coding_passing_score:z}),min:30,max:100,icon:o.jsx(fu,{size:12}),color:"#3b82f6",suffix:"min 30%"}),o.jsx(au,{label:"SQL Pass %",value:A.sql_passing_score,onChange:z=>m({...A,sql_passing_score:z}),min:30,max:100,icon:o.jsx(fu,{size:12}),color:"#10b981",suffix:"min 30%"}),o.jsx(au,{label:"Interview Pass (/10)",value:A.interview_passing_score,onChange:z=>m({...A,interview_passing_score:z}),min:3,max:10,icon:o.jsx(fu,{size:12}),color:"#f59e0b",suffix:"out of 10"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"14px"},children:[o.jsx(au,{label:"MCQ Time (m)",value:A.mcq_duration_minutes,onChange:z=>m({...A,mcq_duration_minutes:z}),min:5,max:120,icon:o.jsx(ls,{size:12}),color:"#8b5cf6",suffix:"minutes"}),o.jsx(au,{label:"Coding Time (m)",value:A.coding_duration_minutes,onChange:z=>m({...A,coding_duration_minutes:z}),min:5,max:120,icon:o.jsx(ls,{size:12}),color:"#3b82f6",suffix:"minutes"}),o.jsx(au,{label:"SQL Time (m)",value:A.sql_duration_minutes,onChange:z=>m({...A,sql_duration_minutes:z}),min:5,max:120,icon:o.jsx(ls,{size:12}),color:"#10b981",suffix:"minutes"}),o.jsx(au,{label:"Interview Time (m)",value:A.interview_duration_minutes,onChange:z=>m({...A,interview_duration_minutes:z}),min:5,max:120,icon:o.jsx(ls,{size:12}),color:"#f59e0b",suffix:"minutes"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:o.jsx(au,{label:"Max Attempts",value:A.attempt_limit,onChange:z=>m({...A,attempt_limit:z}),min:1,max:5,icon:o.jsx(Vs,{size:12}),color:"#6366f1",suffix:"per student"})})]}),o.jsx("div",{style:{height:"18px"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 18px",background:"#1e293b",borderRadius:"12px",border:"1px solid #334155",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#94a3b8",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("span",{children:[o.jsx(Zr,{size:13,style:{verticalAlign:"middle"}})," ",A.mcq_count," MCQ"]}),o.jsxs("span",{children:[o.jsx(Lr,{size:13,style:{verticalAlign:"middle"}})," ",A.coding_count," Coding"]}),o.jsxs("span",{children:[o.jsx(wi,{size:13,style:{verticalAlign:"middle"}})," ",A.sql_count," SQL"]}),o.jsxs("span",{children:[o.jsx(qp,{size:13,style:{verticalAlign:"middle"}})," ",A.interview_count," Interview"]}),o.jsxs("span",{children:[o.jsx(qp,{size:13,style:{verticalAlign:"middle"}})," ",A.interview_count," Interview"]}),o.jsxs("span",{children:[o.jsx(ls,{size:13,style:{verticalAlign:"middle"}})," ",A.mcq_duration_minutes,"m+",A.coding_duration_minutes,"m+",A.sql_duration_minutes,"m+",A.interview_duration_minutes,"m"]}),o.jsxs("span",{style:{color:{easy:"#22c55e",medium:"#f59e0b",hard:"#ef4444",mixed:"#8b5cf6"}[A.difficulty_level]},children:[o.jsx(Br,{size:13,style:{verticalAlign:"middle"}})," ",A.difficulty_level]}),o.jsxs("span",{style:{color:A.proctoring_enabled?"#22c55e":"#ef4444"},children:[o.jsx(Vs,{size:13,style:{verticalAlign:"middle"}})," ",A.proctoring_enabled?"Proctored":"No Proctor"]})]}),o.jsx("button",{onClick:j,disabled:d,style:{padding:"12px 32px",background:d?"#a78bfa":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:d?"not-allowed":"pointer",fontWeight:800,fontSize:"15px",boxShadow:"0 2px 10px rgba(139,92,246,0.35)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:d?o.jsxs(o.Fragment,{children:[o.jsx(vu,{size:16})," Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Qo,{size:16})," Create Assessment"]})})]})]}),n?o.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#9ca3af"},children:[o.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"}}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),o.jsx("p",{style:{fontSize:"14px",fontWeight:500},children:"Loading assessments..."})]}):t.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8",background:"#1e293b",borderRadius:"16px",border:"2px dashed #334155"},children:[o.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",margin:"0 auto 16px",background:"rgba(139,92,246,0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Zr,{size:32,color:"#8b5cf6"})}),o.jsx("p",{style:{fontSize:"16px",fontWeight:700,color:"#e2e8f0",margin:"0 0 6px"},children:"No assessments yet"}),o.jsx("p",{style:{fontSize:"13px",margin:0},children:'Click "Create Test" above to build your first skill assessment'})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:[o.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8",fontWeight:600,padding:"0 4px"},children:[t.length," assessment",t.length!==1?"s":""]}),t.map(z=>o.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"14px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",borderLeft:`4px solid ${z.is_active?"#8b5cf6":"#475569"}`,transition:"box-shadow 0.2s"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"17px",fontWeight:800,color:"#f1f5f9"},children:z.title}),o.jsx("span",{style:{padding:"3px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:700,background:z.is_active?"#dcfce7":"#fee2e2",color:z.is_active?"#16a34a":"#dc2626"},children:z.is_active?"Active":"Inactive"})]}),z.description&&o.jsx("p",{style:{margin:"0 0 12px",color:"#94a3b8",fontSize:"13px",lineHeight:"1.5"},children:z.description}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"12px"},children:z.skills.map(U=>o.jsx("span",{style:{padding:"3px 10px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",borderRadius:"20px",fontSize:"11px",fontWeight:600,border:"1px solid rgba(139,92,246,0.25)"},children:U},U))}),o.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",fontSize:"11px",padding:"8px 12px",background:"#0f172a",borderRadius:"8px"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#8b5cf6",fontWeight:600},children:[o.jsx(Zr,{size:12})," ",z.mcq_count," MCQ"]}),o.jsx("span",{style:{color:"#475569"},children:"|"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#3b82f6",fontWeight:600},children:[o.jsx(Lr,{size:12})," ",z.coding_count," Coding"]}),o.jsx("span",{style:{color:"#475569"},children:"|"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#10b981",fontWeight:600},children:[o.jsx(wi,{size:12})," ",z.sql_count," SQL"]}),o.jsx("span",{style:{color:"#475569"},children:"|"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#f59e0b",fontWeight:600},children:[o.jsx(qp,{size:12})," ",z.interview_count," Interview"]}),o.jsx("span",{style:{color:"#475569"},children:"|"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#94a3b8"},children:[o.jsx(ls,{size:12})," ",z.mcq_duration_minutes,"m"]}),o.jsx("span",{style:{color:"#475569"},children:"|"}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#94a3b8"},children:[o.jsx(Vs,{size:12})," ",z.attempt_limit," attempt",z.attempt_limit>1?"s":""]})]}),z.attempt_stats&&o.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"10px",fontSize:"12px"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#94a3b8"},children:[o.jsx(od,{size:14})," ",z.attempt_stats.total||0," attempts"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#22c55e"},children:[o.jsx(Nn,{size:14})," ",z.attempt_stats.completed||0," passed"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ef4444"},children:[o.jsx(kr,{size:14})," ",z.attempt_stats.failed||0," failed"]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"16px"},children:[o.jsx("button",{onClick:()=>F(z.id),title:"View Attempts",style:{padding:"8px",background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:o.jsx(gs,{size:16,color:"#34d399"})}),o.jsx("button",{onClick:()=>I(z.id),title:z.is_active?"Deactivate":"Activate",style:{padding:"8px",background:z.is_active?"rgba(245,158,11,0.1)":"rgba(16,185,129,0.1)",border:"1px solid "+(z.is_active?"rgba(245,158,11,0.3)":"rgba(16,185,129,0.3)"),borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:z.is_active?o.jsx(S7,{size:16,color:"#fbbf24"}):o.jsx(oO,{size:16,color:"#34d399"})}),o.jsx("button",{onClick:()=>O(z.id),title:"Delete",style:{padding:"8px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:o.jsx(po,{size:16,color:"#f87171"})})]})]}),a===z.id&&o.jsxs("div",{style:{marginTop:"16px",borderTop:"1px solid #334155",paddingTop:"16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsxs("h4",{style:{margin:0,fontSize:"14px",fontWeight:700,color:"#e2e8f0",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(od,{size:15})," Student Attempts"]}),o.jsxs("button",{onClick:()=>l(null),style:{background:"#334155",border:"none",cursor:"pointer",color:"#94a3b8",borderRadius:"6px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:600},children:["Close ",o.jsx(Am,{size:14})]})]}),c.length===0?o.jsx("p",{style:{color:"#9ca3af",fontSize:"13px"},children:"No attempts yet"}):o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"#0f172a"},children:[o.jsx("th",{style:{padding:"8px",textAlign:"left",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Student"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Attempt"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Stage"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"MCQ"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Coding"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"SQL"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Interview"}),o.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Status"})]})}),o.jsx("tbody",{children:c.map(U=>o.jsxs("tr",{style:{borderBottom:"1px solid #1e293b"},children:[o.jsx("td",{style:{padding:"8px",color:"#e2e8f0"},children:U.student_name||U.student_id}),o.jsxs("td",{style:{padding:"8px",textAlign:"center",color:"#cbd5e1"},children:["#",U.attempt_number]}),o.jsx("td",{style:{padding:"8px",textAlign:"center"},children:o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",background:"rgba(99,102,241,0.15)",color:"#a5b4fc"},children:U.current_stage})}),o.jsx("td",{style:{padding:"8px",textAlign:"center",color:P[U.mcq_status]},children:U.mcq_status!=="pending"?`${Math.round(U.mcq_score)}%`:"-"}),o.jsx("td",{style:{padding:"8px",textAlign:"center",color:P[U.coding_status]},children:U.coding_status!=="pending"?`${Math.round(U.coding_score)}%`:"-"}),o.jsx("td",{style:{padding:"8px",textAlign:"center",color:P[U.sql_status]},children:U.sql_status!=="pending"?`${Math.round(U.sql_score)}%`:"-"}),o.jsx("td",{style:{padding:"8px",textAlign:"center",color:P[U.interview_status]},children:U.interview_status!=="pending"?`${(U.interview_score||0).toFixed(1)}/10`:"-"}),o.jsx("td",{style:{padding:"8px",textAlign:"center"},children:o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:U.overall_status==="completed"?"rgba(16,185,129,0.15)":U.overall_status==="failed"?"rgba(239,68,68,0.15)":"rgba(245,158,11,0.15)",color:U.overall_status==="completed"?"#6ee7b7":U.overall_status==="failed"?"#fca5a5":"#fcd34d"},children:U.overall_status})})]},U.id))})]})})]})]},z.id))]})]})}const Fr="http://localhost:8000/api",d1=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"],Yg="admin-001";function Hbt(){const{user:t}=Rb(),{t:e}=E0(),n=xf(),[r,s]=C.useState(""),[i,a]=C.useState("");C.useEffect(()=>{switch(n.pathname.split("/").pop()){case"allocations":s(e("allocations")),a(e("mentor_student_assignments"));break;case"student-leaderboard":s(e("student_leaderboard")),a(e("top_performers"));break;case"mentor-leaderboard":s(e("mentor_leaderboard")),a(e("mentor_activity"));break;case"all-submissions":s(e("all_submissions")),a(e("platform_wide_submissions"));break;case"global-problems":s(e("global_problems")),a(e("coding_challenges_all"));break;case"aptitude-tests":s(e("aptitude_tests")),a(e("manage_aptitude_tests"));break;case"global-tests":s(e("global_complete_tests")),a(e("global_tests_subtitle"));break;case"live-monitoring":s(e("global_live_monitoring")),a(e("monitor_all_subtitle"));break;case"operations":s(e("admin_operations")),a(e("admin_ops_subtitle"));break;case"user-management":s("User Management"),a("Create, edit, and manage platform users");break;case"analytics":s(e("analytics")),a(e("advanced_analytics_subtitle"));break;case"skill-tests":s("Skill Tests"),a("Create and manage AI skill assessments");break;case"skill-submissions":s("Skill Test Submissions"),a("View all student skill test results");break;default:s(e("dashboard")),a(e("system_administration"))}},[n,e]);const l=[{path:"/admin",label:e("dashboard"),icon:o.jsx(fD,{size:20})},{label:"Content Management",icon:o.jsx(IA,{size:20}),defaultExpanded:!1,children:[{path:"/admin/global-problems",label:e("global_problems"),icon:o.jsx(IA,{size:20})},{path:"/admin/aptitude-tests",label:e("aptitude_tests"),icon:o.jsx(Br,{size:20})},{path:"/admin/global-tests",label:e("global_complete_tests"),icon:o.jsx(Zd,{size:20})},{path:"/admin/skill-tests",label:"Skill Tests",icon:o.jsx(Zr,{size:20})}]},{label:"Rankings",icon:o.jsx(ul,{size:20}),defaultExpanded:!1,children:[{path:"/admin/student-leaderboard",label:e("student_ranks"),icon:o.jsx(ul,{size:20})}]},{label:"Monitoring",icon:o.jsx(ua,{size:20}),defaultExpanded:!1,children:[{path:"/admin/all-submissions",label:e("all_submissions"),icon:o.jsx(oZ,{size:20})},{path:"/admin/skill-submissions",label:"Skill Submissions",icon:o.jsx(Zr,{size:20})},{path:"/admin/live-monitoring",label:e("live_monitoring"),icon:o.jsx(ua,{size:20})},{path:"/admin/analytics",label:e("analytics"),icon:o.jsx(uf,{size:20})}]},{label:"System",icon:o.jsx(UB,{size:20}),defaultExpanded:!1,children:[{path:"/admin/operations",label:e("admin_operations"),icon:o.jsx(UB,{size:20})},{path:"/admin/user-management",label:"User Management",icon:o.jsx(Vs,{size:20})}]}];return o.jsx(AD,{navItems:l,title:r,subtitle:i,children:o.jsxs($j,{children:[o.jsx(os,{path:"/",element:o.jsx(Wbt,{})}),o.jsx(os,{path:"/global-problems",element:o.jsx(Kbt,{})}),o.jsx(os,{path:"/aptitude-tests",element:o.jsx(Ybt,{})}),o.jsx(os,{path:"/global-tests",element:o.jsx(Xbt,{})}),o.jsx(os,{path:"/skill-tests",element:o.jsx(Qbt,{})}),o.jsx(os,{path:"/skill-submissions",element:o.jsx(Bfe,{user:t,isAdmin:!0})}),o.jsx(os,{path:"/student-leaderboard",element:o.jsx(Vbt,{})}),o.jsx(os,{path:"/all-submissions",element:o.jsx(qbt,{})}),o.jsx(os,{path:"/live-monitoring",element:o.jsx(Tbt,{user:t})}),o.jsx(os,{path:"/analytics",element:o.jsx(Jbt,{})}),o.jsx(os,{path:"/operations",element:o.jsx(_bt,{})}),o.jsx(os,{path:"/user-management",element:o.jsx(Ubt,{})})]})})}function Wbt(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[s,i]=C.useState("7d");if(C.useEffect(()=>{Xe.get(`${Fr}/analytics/admin`).then(u=>{e(u.data),r(!1)}).catch(u=>r(!1))},[]),n)return o.jsx("div",{className:"loading-spinner"});if(!t)return o.jsx("div",{children:"Error loading stats"});const a=t.totalStudents>0?Math.round(t.totalSubmissions/t.totalStudents*10)/10:0,l=t.mentorCount||Math.ceil(t.totalStudents/15),c=t.recentSubmissions?.length||0;return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.05) 100%)",borderRadius:"20px",padding:"2rem 2.5rem",marginBottom:"2rem",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),o.jsx("div",{style:{position:"relative",zIndex:1},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:o.jsx(Vs,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h1",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,background:"linear-gradient(135deg, #fff, #94a3b8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Control Center"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:"Monitor performance, manage content, and track platform health"})]})]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(59, 130, 246, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:o.jsx(od,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalStudents}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Students"})]})]}),o.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#10b981"},children:[o.jsx(uf,{size:12})," +12% this month"]})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6d28d9, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:o.jsx(_l,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:l}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Mentors"})]})]}),o.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:["~",Math.round(t.totalStudents/l)," students/mentor"]})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(6, 182, 212, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #0891b2, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)"},children:o.jsx($c,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalSubmissions}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Submissions"})]})]}),o.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[a," avg per student"]})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(16, 185, 129, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #047857, #10b981)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:o.jsx(Nn,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:[t.successRate,"%"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Success Rate"})]})]}),o.jsx("div",{style:{marginTop:"1rem",height:"6px",background:"rgba(16, 185, 129, 0.15)",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${t.successRate}%`,background:"linear-gradient(90deg, #10b981, #06b6d4)",borderRadius:"3px",transition:"width 1s ease"}})})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(245, 158, 11, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #d97706, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:o.jsx(IA,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalContent}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Content"})]})]}),o.jsx("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Tasks, Problems & Tests"})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(236, 72, 153, 0.15), transparent 70%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #be185d, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)"},children:o.jsx(vu,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:c}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Today"})]})]}),o.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(236, 72, 153, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#ec4899"},children:[o.jsx(ua,{size:12})," Live"]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",position:"relative"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Submission Trends"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Platform activity over time"})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["7d","30d","90d"].map(u=>o.jsx("button",{onClick:()=>i(u),style:{padding:"0.4rem 0.8rem",fontSize:"0.75rem",fontWeight:600,border:"none",borderRadius:"8px",cursor:"pointer",background:s===u?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"var(--bg-tertiary)",color:s===u?"white":"var(--text-muted)",transition:"all 0.2s ease"},children:u},u))})]}),o.jsx("div",{style:{width:"100%",height:"280px"},children:o.jsx(Xl,{children:o.jsxs(CU,{data:t.submissionTrends,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorCountAdmin",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.4}),o.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),o.jsx(CA,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),o.jsx(fh,{dataKey:"date",stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),o.jsx(hh,{stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),o.jsx(Jl,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},labelStyle:{color:"var(--text)",fontWeight:600},itemStyle:{color:"#3b82f6"}}),o.jsx(cN,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountAdmin)"})]})})})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Language Distribution"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Code submissions by language"})]}),o.jsx("div",{style:{width:"100%",height:"200px"},children:o.jsx(Xl,{children:o.jsxs(uN,{children:[o.jsx(OS,{data:t.languageStats,cx:"50%",cy:"50%",innerRadius:55,outerRadius:80,paddingAngle:4,dataKey:"value",children:t.languageStats.map((u,d)=>o.jsx(gf,{fill:d1[d%d1.length]},`cell-${d}`))}),o.jsx(Jl,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px"}})]})})}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginTop:"1rem"},children:t.languageStats.map((u,d)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[o.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"3px",background:d1[d%d1.length]}}),o.jsx("span",{style:{color:"var(--text-muted)"},children:u.name}),o.jsx("span",{style:{marginLeft:"auto",fontWeight:600},children:u.value})]},u.name))})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem"},children:[o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",maxHeight:"420px",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #6366f1, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ua,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Recent Activity"}),o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Live platform submissions"})]})]}),o.jsxs("button",{style:{padding:"0.5rem 1rem",fontSize:"0.75rem",fontWeight:600,background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.4rem"},children:[o.jsx(_c,{size:12})," Refresh"]})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.recentSubmissions.map((u,d)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--bg-tertiary)",borderRadius:"12px",border:"1px solid var(--border-color)",transition:"all 0.2s ease"},children:[o.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:u.status==="accepted"?"#10b981":"#ef4444",boxShadow:`0 0 12px ${u.status==="accepted"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}`}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:u.studentName}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[o.jsx(ls,{size:11}),new Date(u.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),o.jsx("span",{style:{opacity:.5},children:""}),o.jsx("span",{children:"submitted a solution"})]})]}),o.jsxs("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.85rem",fontWeight:700,background:u.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:u.status==="accepted"?"#10b981":"#ef4444"},children:[u.score,"%"]})]},u.id))})]}),o.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.25rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #f59e0b, #fbbf24)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ul,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Top Performers"}),o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Leading students"})]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.studentPerformance.slice(0,5).map((u,d)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:d===0?"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))":"var(--bg-tertiary)",borderRadius:"12px",border:`1px solid ${d===0?"rgba(251, 191, 36, 0.3)":"var(--border-color)"}`},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:d===0?"linear-gradient(135deg, #fbbf24, #f59e0b)":d===1?"linear-gradient(135deg, #94a3b8, #64748b)":d===2?"linear-gradient(135deg, #d97706, #b45309)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,color:d<3?"white":"var(--text-muted)"},children:d<3?o.jsx(ul,{size:14}):`#${d+1}`}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:u.name}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[u.count," submissions"]})]}),o.jsxs("div",{style:{fontSize:"1rem",fontWeight:700,color:u.score>=80?"#10b981":u.score>=60?"#f59e0b":"#ef4444"},children:[u.score,"%"]})]},u.name))})]})]})]})}function Vbt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(null),[a,l]=C.useState("");if(C.useEffect(()=>{Xe.get(`${Fr}/leaderboard`).then(d=>{e(d.data),r(!1)}).catch(d=>r(!1))},[]),n)return o.jsx("div",{className:"loading-spinner"});const c=d=>d===1?o.jsx(ul,{size:24,style:{color:"#fbbf24"}}):d===2?o.jsx(_l,{size:24,style:{color:"#94a3b8"}}):d===3?o.jsx(_l,{size:24,style:{color:"#b45309"}}):o.jsxs("span",{style:{fontWeight:600,color:"var(--text-muted)"},children:["#",d]}),u=d=>d.violations?(d.violations.tabSwitches||0)+(d.violations.copyPaste||0)+(d.violations.cameraBlocked||0)+(d.violations.phoneDetection||0)+(d.violations.integrityViolations||0)+(d.violations.plagiarism||0):0;return o.jsxs("div",{className:"card animate-fadeIn",style:{padding:"0",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(ul,{size:32,className:"text-primary"}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0},children:"Global Performance Ranking"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Real-time ranking of students across all mentors"})]})]}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(j0,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{type:"text",placeholder:"Search students...",value:a,onChange:d=>l(d.target.value),style:{padding:"0.75rem 1rem 0.75rem 2.75rem",borderRadius:"12px",border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",outline:"none",width:"300px",fontSize:"0.9rem"}})]})]}),o.jsx("div",{className:"table-container",style:{maxHeight:"600px",overflowY:"auto"},children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Student Name"}),o.jsx("th",{children:"Submissions"}),o.jsx("th",{children:"Avg. Score"}),o.jsx("th",{children:"Violations"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:t.filter(d=>d.name.toLowerCase().includes(a.toLowerCase())).map((d,f)=>{const m=u(d)>0||d.violations?.plagiarism>0;return o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:c(f+1)})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{className:"avatar-circle",children:d.name.charAt(0)}),o.jsx("span",{children:d.name})]})}),o.jsx("td",{children:d.totalSubmissions}),o.jsx("td",{children:o.jsxs("span",{style:{fontWeight:700,color:"var(--primary)"},children:[d.avgScore,"%"]})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[d.violations?.tabSwitches>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Tab Switches",children:[o.jsx(gs,{size:10})," ",d.violations.tabSwitches]}),d.violations?.cameraBlocked>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Camera Blocked",children:[" ",d.violations.cameraBlocked]}),d.violations?.phoneDetection>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Phone Detected",children:[" ",d.violations.phoneDetection]}),d.violations?.copyPaste>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Copy/Paste Attempts",children:[" ",d.violations.copyPaste]}),d.violations?.plagiarism>0&&o.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Plagiarism",children:[o.jsx(Pn,{size:10})," ",d.violations.plagiarism]}),!m&&o.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981"},children:o.jsx(Nn,{size:14})})]})}),o.jsx("td",{children:o.jsx("div",{style:{width:"100px",height:"8px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"10px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${d.avgScore}%`,height:"100%",background:m?"var(--warning)":"var(--primary)"}})})}),o.jsx("td",{children:o.jsxs("button",{onClick:()=>i({id:d.studentId,name:d.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[o.jsx(qi,{size:14}),"Report"]})})]},d.studentId)})})]})})]}),s&&o.jsx(wAe,{studentId:s.id,studentName:s.name,onClose:()=>i(null),requestedBy:"Administrator",requestedByRole:"admin"})]})}function qbt(){const[t,e]=C.useState([]),[n,r]=C.useState([]),[s,i]=C.useState([]),[a,l]=C.useState(!0),[c,u]=C.useState(""),[d,f]=C.useState("all"),[A,m]=C.useState(null),[g,y]=C.useState(null),[x,v]=C.useState(null),[w,B]=C.useState(!1),k=()=>{l(!0),Promise.all([Xe.get(`${Fr}/submissions`),Xe.get(`${Fr}/aptitude-submissions`),Xe.get(`${Fr}/global-test-submissions`)]).then(([T,N,P])=>{const U=(Array.isArray(T.data)?T.data:T.data?.data||[]).map(Z=>({...Z,subType:"code"})),ee=(N.data||[]).map(Z=>({...Z,subType:"aptitude",itemTitle:Z.testTitle,language:"Aptitude"})),q=(P.data||[]).map(Z=>({...Z,subType:"global",itemTitle:Z.testTitle,language:"Mixed",score:Z.overallPercentage}));e(U),r(ee),i(q),l(!1)}).catch(T=>{console.error("Fetch error:",T),l(!1)})};C.useEffect(()=>{k()},[]);const j=()=>{const T=F();if(T.length===0){alert("No submissions to download");return}const N=["Student Name","Student Email","Type","Problem/Test Title","Language","Score","Status","Tab Switches","Camera Blocked","Phone Detected","Plagiarism Detected","Submitted At"],P=T.map(Z=>[Z.studentName||"",Z.studentEmail||"",Z.subType==="aptitude"?"Aptitude":Z.subType==="global"?"Global":"Code",Z.itemTitle||Z.testTitle||"",Z.subType==="aptitude"?"N/A":Z.subType==="global"?"Mixed":Z.language||"N/A",Z.score||0,Z.status||"",Z.integrity?.tabSwitches||Z.tabSwitches||0,Z.cameraBlockedCount||0,Z.phoneDetectionCount||0,Z.plagiarism?.detected?"Yes":"No",Z.submittedAt?new Date(Z.submittedAt).toLocaleString():""]),z=[N.join(","),...P.map(Z=>Z.map(G=>{const ne=String(G);return ne.includes(",")||ne.includes('"')||ne.includes(`
`)?`"${ne.replace(/"/g,'""')}"`:ne}).join(","))].join(`
`),U=new Blob([z],{type:"text/csv;charset=utf-8;"}),ee=document.createElement("a"),q=URL.createObjectURL(U);ee.setAttribute("href",q),ee.setAttribute("download",`submissions_${d}_${new Date().toISOString().split("T")[0]}.csv`),ee.style.visibility="hidden",document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)},I=async()=>{if(!(!window.confirm(` WARNING: This will permanently delete ALL submissions from ALL students!

This includes:
 All code submissions
 All aptitude test submissions
 All problem completions
 All task completions

This action CANNOT be undone. Are you sure?`)||!window.confirm(` FINAL CONFIRMATION 

You are about to delete ALL submissions permanently.

Type OK to proceed.`))){B(!0);try{const P=await Xe.delete(`${Fr}/submissions`);alert(` Reset Complete!

 Code submissions deleted: ${P.data.deletedCodeSubmissions}
 Aptitude submissions deleted: ${P.data.deletedAptitudeSubmissions}
 Global test submissions deleted: ${P.data.deletedGlobalSubmissions||0}`),k()}catch(P){alert(" Failed to reset submissions: "+(P.response?.data?.error||P.message))}finally{B(!1)}}},O=[...t,...n,...s].sort((T,N)=>new Date(N.submittedAt)-new Date(T.submittedAt)),F=()=>(d==="all"?O:d==="code"?t:d==="aptitude"?n:s).filter(N=>(N.studentName||"").toLowerCase().includes(c.toLowerCase())||(N.itemTitle||N.testTitle||"").toLowerCase().includes(c.toLowerCase())||N.status.toLowerCase().includes(c.toLowerCase())),D=F();return a?o.jsx("div",{className:"loading-spinner"}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"2rem"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Submission Archives"}),o.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Global audit trail of all submissions"})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[o.jsxs("button",{onClick:()=>f("all"),style:{padding:"0.5rem 1rem",background:d==="all"?"var(--primary)":"transparent",border:"none",color:d==="all"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["All (",O.length,")"]}),o.jsxs("button",{onClick:()=>f("code"),style:{padding:"0.5rem 1rem",background:d==="code"?"var(--primary)":"transparent",border:"none",color:d==="code"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:[" Code (",t.length,")"]}),o.jsxs("button",{onClick:()=>f("aptitude"),style:{padding:"0.5rem 1rem",background:d==="aptitude"?"#8b5cf6":"transparent",border:"none",color:d==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:[" Aptitude (",n.length,")"]}),o.jsxs("button",{onClick:()=>f("global"),style:{padding:"0.5rem 1rem",background:d==="global"?"#3b82f6":"transparent",border:"none",color:d==="global"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:[" Global (",s.length,")"]})]}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(j0,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),o.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"300px"},value:c,onChange:T=>u(T.target.value)})]}),o.jsxs("button",{onClick:j,disabled:D.length===0,style:{padding:"0.6rem 1rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",color:"#10b981",cursor:D.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:D.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:T=>{D.length>0&&(T.target.style.background="rgba(16, 185, 129, 0.2)")},onMouseLeave:T=>{T.target.style.background="rgba(16, 185, 129, 0.1)"},children:[o.jsx(ad,{size:16}),"Download CSV"]}),o.jsxs("button",{onClick:I,disabled:w||O.length===0,style:{padding:"0.6rem 1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",cursor:w||O.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:w||O.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:T=>{!w&&O.length>0&&(T.target.style.background="rgba(239, 68, 68, 0.2)")},onMouseLeave:T=>{T.target.style.background="rgba(239, 68, 68, 0.1)"},children:[o.jsx(po,{size:16}),w?"Resetting...":"Reset All"]})]})]}),o.jsx("div",{className:"table-container card glass",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Student"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Problem / Test"}),o.jsx("th",{children:"Language"}),o.jsx("th",{children:"Score"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Submitted At"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:D.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):D.map(T=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("div",{style:{fontWeight:600},children:T.studentName})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:T.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:T.subType==="ml-task"?"#06b6d4":T.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:T.subType==="aptitude"?" Aptitude":T.subType==="global"?" Global":" Code"})}),o.jsx("td",{children:o.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:T.itemTitle||T.testTitle})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:T.subType==="aptitude"?"N/A":T.subType==="global"?"Mixed":T.language?.toUpperCase()||"N/A"})}),o.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[T.score,"%"]}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[o.jsx("span",{className:`status-badge ${T.status}`,children:T.status}),T.plagiarism?.detected&&o.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:11})," Plag"]}),(T.integrity?.integrityViolation||T.tabSwitches>0)&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[o.jsx(Pn,{size:10})," ",T.integrity?.tabSwitches||T.tabSwitches||0," Tab"]}),T.cameraBlockedCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",T.cameraBlockedCount," Cam"]}),T.phoneDetectionCount>0&&o.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",T.phoneDetectionCount," Phone"]})]})}),o.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(T.submittedAt).toLocaleString()}),o.jsx("td",{children:T.subType==="aptitude"?o.jsxs("button",{onClick:()=>y(T),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Results"]}):T.subType==="global"?o.jsxs("button",{onClick:()=>v(T.id),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Full Report"]}):o.jsxs("button",{onClick:()=>m(T),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," Report"]})})]},T.id))})]})}),g&&o.jsx(mP,{submission:g,onClose:()=>y(null)}),x&&o.jsx($U,{submissionId:x,onClose:()=>v(null),isStudentView:!1}),A&&o.jsx(Gbt,{submission:A,onClose:()=>m(null)})]})}function Gbt({submission:t,onClose:e}){return o.jsx("div",{className:"modal-overlay",onClick:e,children:o.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"900px"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(qi,{size:20,color:"white"})}),o.jsx("h2",{children:"Detailed Submission Report"})]}),o.jsx("button",{onClick:e,className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:t.studentName})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.submissionType==="file"?"File Upload":"Code Editor"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"#10b981":"#ef4444"},children:t.score}),o.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),o.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?o.jsx(Nn,{size:24}):o.jsx(Os,{size:24}),t.status?.toUpperCase()]})]}),t.plagiarism?.detected&&o.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[o.jsx(Pn,{size:24,color:"#ef4444"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),o.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[o.jsx(Pn,{size:18})," Proctoring Violations"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx(gs,{size:18,color:"#f59e0b"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:""}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]}),t.proctoringVideo&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1rem"},children:""}),o.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",t.proctoringVideo]})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Nn,{size:18,color:"#3b82f6"})," AI Feedback"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(ua,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),o.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:t.aiExplanation})]}),t.analysis&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(fu,{size:18,color:"var(--primary)"})," Detailed Analysis"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.analysis.correctness!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Nn,{size:22,color:"#3b82f6"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:t.analysis.correctness})]})]}),t.analysis.efficiency!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(vu,{size:22,color:"#10b981"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:t.analysis.efficiency})]})]}),t.analysis.codeStyle!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Lr,{size:22,color:"#8b5cf6"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:t.analysis.codeStyle})]})]}),t.analysis.bestPractices!==void 0&&o.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[o.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(_l,{size:22,color:"#f59e0b"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),o.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:t.analysis.bestPractices})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),o.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:t.code})]})]})]})})}function Kbt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1),[a,l]=C.useState(!1),[c,u]=C.useState(!1),d=C.useRef(null),[f,A]=C.useState("coding"),[m,g]=C.useState(null),[y,x]=C.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),v=y.type==="SQL"||y.language==="SQL",w=T=>{const N=T.type==="SQL"||T.language==="SQL";x({title:T.title||"",type:T.type||"Coding",language:T.language||"Python",difficulty:T.difficulty||"Medium",description:T.description||"",sampleInput:N?"":T.sampleInput||"",expectedOutput:N?"":T.expectedOutput||"",sqlSchema:N&&(T.sqlSchema||T.schema)||"",expectedQueryResult:N&&(T.expectedQueryResult||T.expectedResult)||"",deadline:y.deadline,status:T.status||"live",enableProctoring:y.enableProctoring,enableVideoAudio:y.enableVideoAudio,disableCopyPaste:y.disableCopyPaste,trackTabSwitches:y.trackTabSwitches,maxTabSwitches:y.maxTabSwitches,enableFaceDetection:y.enableFaceDetection,detectMultipleFaces:y.detectMultipleFaces,trackFaceLookaway:y.trackFaceLookaway}),l(!1),i(!0)},B=()=>{Xe.get(`${Fr}/problems?mentorId=${Yg}`).then(T=>{e(Array.isArray(T.data)?T.data:T.data?.data||[]),r(!1)}).catch(T=>r(!1))};C.useEffect(()=>{B()},[]);const k=async T=>{T.preventDefault();try{await Xe.post(`${Fr}/problems`,{...y,mentorId:Yg}),i(!1),x({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),B()}catch{alert("Error creating global problem")}},j=async T=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await Xe.delete(`${Fr}/problems/${T}`),B()}catch{alert("Error deleting problem")}},I=async T=>{const N=T.target.files[0];if(N){T.target.value="",u(!0);try{const z=(await N.text()).split(`
`).filter(G=>G.trim()).map(G=>G.trim());if(z.length<2){alert("CSV must have a header row and at least one data row"),u(!1);return}const U=G=>{const ne=[];let K="",H=!1;for(let Q=0;Q<G.length;Q++){const X=G[Q];X==='"'?H=!H:X===","&&!H?(ne.push(K.trim()),K=""):K+=X}return ne.push(K.trim()),ne},ee=U(z[0]).map(G=>G.toLowerCase()),q=z.slice(1);let Z=0;for(const G of q){if(!G.trim())continue;const ne=U(G),K={};ee.forEach((xe,Be)=>{K[xe]=ne[Be]||""});const H=(K.type||"").toUpperCase()==="SQL"||(K.language||"").toUpperCase()==="SQL",Q=()=>K.sample_input||K.sampleinput||K.testinput||K.test_input||K["sample input"]||K["test input"]||"",X=()=>K.expected_output||K.expectedoutput||K.expectedresult||K.expected_result||K["expected output"]||K["expected result"]||"",re=()=>K.sql_schema||K.sqlschema||K.schema||K["sql schema"]||"",le=()=>K.expected_query_result||K.expectedqueryresult||K.expected_result||K.expectedresult||K["expected query result"]||"",Ae={title:K.title||K.name||"",type:H?"SQL":K.type||"Coding",language:H?"SQL":K.language||"Python",difficulty:(K.difficulty||"Medium").charAt(0).toUpperCase()+(K.difficulty||"Medium").slice(1).toLowerCase(),description:K.description||"",sampleInput:Q(),expectedOutput:X(),sqlSchema:H?re():"",expectedQueryResult:H?le():"",status:K.status||"live",mentorId:Yg};!Ae.title||!Ae.description||(await Xe.post(`${Fr}/problems`,Ae),Z++)}alert(`Successfully created ${Z} problems from CSV!`),B()}catch(P){alert("Error parsing CSV: "+P.message)}u(!1)}};if(n)return o.jsx("div",{className:"loading-spinner"});const O=t.filter(T=>T.language!=="SQL"&&T.type!=="SQL"),F=t.filter(T=>T.language==="SQL"||T.type==="SQL"),D=f==="coding"?O:F;return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[o.jsx("div",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:o.jsx(Lr,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Problems Management"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Create coding challenges visible to all students platform-wide"})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"file",accept:".csv",ref:d,style:{display:"none"},onChange:I}),o.jsxs("button",{onClick:()=>d.current?.click(),disabled:c,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mj,{size:18})," ",c?"Uploading...":"CSV Upload"]}),o.jsxs("button",{onClick:()=>l(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:20})," AI Generate"]}),o.jsxs("button",{onClick:()=>i(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease"},children:[o.jsx(zo,{size:20})," Create Manually"]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:o.jsx(IA,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Total Problems"}),o.jsx("span",{className:"stat-value",children:t.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:o.jsx(Nn,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Active Problems"}),o.jsx("span",{className:"stat-value",children:t.filter(T=>T.status==="live").length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:o.jsx(ul,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Total Solutions"}),o.jsx("span",{className:"stat-value",children:t.reduce((T,N)=>T+(N.completedBy?.length||0),0)})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[o.jsxs("button",{onClick:()=>A("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:f==="coding"?"var(--primary)":"transparent",color:f==="coding"?"white":"var(--text-muted)"},children:[o.jsx(Lr,{size:18}),"Coding Problems",o.jsx("span",{style:{background:f==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:O.length})]}),o.jsxs("button",{onClick:()=>A("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:f==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:f==="sql"?"white":"var(--text-muted)"},children:[o.jsx(qi,{size:18}),"SQL Problems",o.jsx("span",{style:{background:f==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:F.length})]})]}),o.jsx("div",{className:"problem-list-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:D.length===0?o.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem",opacity:.5},children:[o.jsx(Lr,{size:64,style:{marginBottom:"1rem",opacity:.3}}),o.jsxs("h3",{children:["No ",f==="sql"?"SQL":"Coding"," Problems Yet"]}),o.jsxs("p",{children:["Create your first ",f==="sql"?"SQL":"coding"," problem!"]})]}):D.map(T=>o.jsxs("div",{className:"problem-card card glass",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))",color:"#10b981",fontWeight:700},children:"GLOBAL"}),o.jsx("span",{className:"problem-badge",children:T.type?.toUpperCase()}),o.jsx("span",{className:`status-badge ${T.status||"live"}`,style:{fontSize:"0.65rem"},children:T.status||"Active"}),T.proctoring?.enabled&&o.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Vs,{size:10})," PROCTORED"]})]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"rgba(59, 130, 246, 0.1)",padding:"2px 8px",borderRadius:"4px"},children:T.language})]}),o.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:T.title}),o.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:T.description}),T.deadline&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",color:"#f87171",marginBottom:"1rem",background:"rgba(248, 113, 113, 0.05)",padding:"4px 8px",borderRadius:"4px",width:"fit-content"},children:[o.jsx(ls,{size:12})," Deadline: ",new Date(T.deadline).toLocaleDateString()]}),o.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:T.difficulty==="Easy"?"#10b981":T.difficulty==="Medium"?"#f59e0b":"#ef4444",fontWeight:700},children:T.difficulty}),o.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[" ",T.completedBy?.length||0," solved"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>g(T),disabled:T.language==="SQL"||T.type==="SQL",style:{background:T.language==="SQL"||T.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:T.language==="SQL"||T.type==="SQL"?"#64748b":"#10b981",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",cursor:T.language==="SQL"||T.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:T.language==="SQL"||T.type==="SQL"?.5:1},title:T.language==="SQL"||T.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[o.jsx(Zd,{size:14})," Tests"]}),o.jsx("button",{onClick:()=>j(T.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]})]},T.id))}),s&&o.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:o.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),style:{maxWidth:"750px"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Lr,{size:20,color:"white"})}),o.jsx("h2",{children:"Create Global Coding Problem"})]}),o.jsx("button",{onClick:()=>i(!1),className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsx("div",{className:"modal-body premium-form",children:o.jsxs("form",{onSubmit:k,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Problem Title"}),o.jsx("input",{type:"text",placeholder:"e.g., Two Sum Problem",value:y.title,onChange:T=>x({...y,title:T.target.value}),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Problem Type"}),o.jsxs("select",{value:y.type,onChange:T=>{const N=T.target.value;x({...y,type:N,language:N==="SQL"?"SQL":y.language==="SQL"?"Python":y.language})},children:[o.jsx("option",{value:"Coding",children:"Coding"}),o.jsx("option",{value:"SQL",children:"SQL"}),o.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Language"}),o.jsxs("select",{value:y.language,onChange:T=>{const N=T.target.value;x({...y,language:N,type:N==="SQL"?"SQL":y.type==="SQL"?"Coding":y.type})},children:[o.jsx("option",{value:"Python",children:"Python"}),o.jsx("option",{value:"JavaScript",children:"JavaScript"}),o.jsx("option",{value:"Java",children:"Java"}),o.jsx("option",{value:"C++",children:"C++"}),o.jsx("option",{value:"SQL",children:"SQL"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Difficulty"}),o.jsxs("select",{value:y.difficulty,onChange:T=>x({...y,difficulty:T.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Status"}),o.jsxs("select",{value:y.status,onChange:T=>x({...y,status:T.target.value}),children:[o.jsx("option",{value:"live",children:"Live"}),o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"closed",children:"Closed"})]})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsx("label",{className:"form-label",children:"Problem Description"}),o.jsx("textarea",{rows:"5",placeholder:"Describe the problem in detail...",value:y.description,onChange:T=>x({...y,description:T.target.value}),required:!0})]}),v?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lr,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),o.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:y.sqlSchema,onChange:T=>x({...y,sqlSchema:T.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Nn,{size:14,color:"#10b981"})," Expected Query Result"]}),o.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:y.expectedQueryResult,onChange:T=>x({...y,expectedQueryResult:T.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Sample Input"}),o.jsx("input",{type:"text",placeholder:"e.g., [2, 7, 11, 15], target = 9",value:y.sampleInput,onChange:T=>x({...y,sampleInput:T.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Expected Output"}),o.jsx("input",{type:"text",placeholder:"e.g., [0, 1]",value:y.expectedOutput,onChange:T=>x({...y,expectedOutput:T.target.value})})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),o.jsx("input",{type:"date",value:y.deadline,onChange:T=>x({...y,deadline:T.target.value})})]}),o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx(gs,{size:20,color:"#ef4444"}),o.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:600,color:"#ef4444"},children:"Proctoring Settings"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem",background:y.enableProctoring?"rgba(239, 68, 68, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.enableProctoring,onChange:T=>x({...y,enableProctoring:T.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:"Enable Proctoring"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.enableVideoAudio?"rgba(139, 92, 246, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.enableVideoAudio,onChange:T=>x({...y,enableVideoAudio:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Video/Audio Monitoring"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.disableCopyPaste?"rgba(245, 158, 11, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.disableCopyPaste,onChange:T=>x({...y,disableCopyPaste:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#f59e0b"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Disable Copy/Paste"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.trackTabSwitches?"rgba(16, 185, 129, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.trackTabSwitches,onChange:T=>x({...y,trackTabSwitches:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Track Tab Switches"})]}),o.jsx("hr",{style:{margin:"0.5rem 0",borderColor:"var(--border-color)",opacity:.3}}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.enableFaceDetection?"rgba(236, 72, 153, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.enableFaceDetection,onChange:T=>x({...y,enableFaceDetection:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#ec4899"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Enable Face Detection"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.detectMultipleFaces?"rgba(239, 68, 68, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.detectMultipleFaces,onChange:T=>x({...y,detectMultipleFaces:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Detect Multiple Faces (Cheating)"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:y.enableProctoring?"pointer":"not-allowed",opacity:y.enableProctoring?1:.5,padding:"0.75rem",background:y.trackFaceLookaway?"rgba(59, 130, 246, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[o.jsx("input",{type:"checkbox",checked:y.trackFaceLookaway,onChange:T=>x({...y,trackFaceLookaway:T.target.checked}),disabled:!y.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#3b82f6"}}),o.jsx("span",{style:{fontSize:"0.9rem"},children:" Track Face Lookaway"})]})]}),y.enableProctoring&&y.trackTabSwitches&&o.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("label",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:y.maxTabSwitches,onChange:T=>x({...y,maxTabSwitches:parseInt(T.target.value)||3}),style:{width:"80px",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)",background:"var(--bg-dark)",color:"var(--text-main)"}})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-reset",onClick:()=>i(!1),children:"Cancel"}),o.jsxs("button",{type:"submit",className:"btn-create-new",style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:[o.jsx(zo,{size:18})," Create Global Problem"]})]})]})})]})}),o.jsx(vAe,{context:"problem",isOpen:a,onClose:()=>l(!1),onGenerate:w}),m&&o.jsx(SAe,{problemId:m.id,problemTitle:m.title,onClose:()=>g(null)})]})}const Vv=[{id:"aptitude",label:"Aptitude",icon:""},{id:"verbal",label:"Verbal",icon:""},{id:"logical",label:"Logical",icon:""},{id:"coding",label:"Coding",icon:""},{id:"sql",label:"SQL",icon:""}];function Xbt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1),[a,l]=C.useState(1),[c,u]=C.useState(null),[d,f]=C.useState("aptitude"),[A,m]=C.useState(null),[g,y]=C.useState({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"live",sectionConfig:{sections:[{id:"aptitude",enabled:!0,order:1,questionsCount:20,timeMinutes:30},{id:"verbal",enabled:!0,order:2,questionsCount:25,timeMinutes:25},{id:"logical",enabled:!0,order:3,questionsCount:20,timeMinutes:20},{id:"coding",enabled:!0,order:4,questionsCount:2,timeMinutes:50},{id:"sql",enabled:!0,order:5,questionsCount:1,timeMinutes:25}],totalDurationMinutes:180,sectionTimeMode:"fixed"}}),[x,v]=C.useState({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),[w,B]=C.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}),[k,j]=C.useState({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]}),[I,O]=C.useState({question:"",schema:"",expectedOutput:""}),[F,D]=C.useState([]),[T,N]=C.useState({topic:"",difficulty:"Medium",count:5}),[P,z]=C.useState([]),[U,ee]=C.useState(!1),[q,Z]=C.useState({enabled:!0,trackTabSwitches:!0,maxTabSwitches:3,enableVideoAudio:!0,disableCopyPaste:!0,detectCameraBlocking:!0,detectPhoneUsage:!0,enforceFullscreen:!0,autoSubmitOnViolation:!1}),[G,ne]=C.useState({topic:"",difficulty:"Medium",language:"Python"}),[K,H]=C.useState({topic:"",difficulty:"Medium"}),[Q,X]=C.useState([]),[re,le]=C.useState([]),[Ae,xe]=C.useState(!1),[Be,me]=C.useState(!1),[ve,je]=C.useState(!0),[ye,ze]=C.useState(!1),at=C.useRef(null),ie=async ke=>{const $e=ke.target.files[0];if($e){ze(!0);try{const Ct=(await $e.text()).split(`
`).map(pr=>pr.trim()).filter(Boolean);if(Ct.length<2){alert("CSV must have header + at least one row");return}const _t=Ct[0].split(",").map(pr=>pr.trim().toLowerCase().replace(/['"]/g,"")),Lt=[];for(let pr=1;pr<Ct.length;pr++){const Kr=Ct[pr].match(/(".*?"|[^,]+)/g)?.map(cn=>cn.trim().replace(/^"|"$/g,""))||[],Hn={};_t.forEach((cn,Ji)=>Hn[cn]=Kr[Ji]||"");const Ls=(Hn.section||"aptitude").toLowerCase();["aptitude","verbal","logical"].includes(Ls)&&Lt.push({section:Ls,question:Hn.question||"",options:[Hn.option1||Hn.option_1||"",Hn.option2||Hn.option_2||"",Hn.option3||Hn.option_3||"",Hn.option4||Hn.option_4||""],correctAnswer:parseInt(Hn.correctanswer||Hn.correct_answer||Hn.answer||"0"),category:Hn.category||"general",explanation:Hn.explanation||""})}if(Lt.length===0){alert("No valid MCQ rows found. CSV needs: section,question,option1,option2,option3,option4,correctAnswer"),ze(!1);return}const zt={title:$e.name.replace(".csv","")+" - CSV Import",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,status:"draft",createdBy:Yg,sectionConfig:{sections:[{id:"aptitude",enabled:!0,order:1,questionsCount:Lt.filter(pr=>pr.section==="aptitude").length,timeMinutes:30},{id:"verbal",enabled:!0,order:2,questionsCount:Lt.filter(pr=>pr.section==="verbal").length,timeMinutes:25},{id:"logical",enabled:!0,order:3,questionsCount:Lt.filter(pr=>pr.section==="logical").length,timeMinutes:20},{id:"coding",enabled:!1,order:4,questionsCount:0,timeMinutes:0},{id:"sql",enabled:!1,order:5,questionsCount:0,timeMinutes:0}],totalDurationMinutes:75,sectionTimeMode:"fixed"}},dt=(await Xe.post(`${Fr}/global-tests`,zt)).data.id;for(const pr of["aptitude","verbal","logical"]){const Kr=Lt.filter(Hn=>Hn.section===pr);Kr.length!==0&&await Xe.post(`${Fr}/global-tests/${dt}/questions`,{section:pr,questions:Kr})}alert(`Created test with ${Lt.length} questions from CSV!`),Le()}catch(yt){alert("CSV upload failed: "+(yt.response?.data?.error||yt.message))}finally{ze(!1),ke.target.value=""}}},Le=async()=>{try{const ke=await Xe.get(`${Fr}/global-tests`);e(Array.isArray(ke.data)?ke.data:[])}catch(ke){ke.response?.status===503?e([]):console.error(ke)}finally{r(!1)}},nt=async()=>{try{const ke=await Xe.get(`${Fr}/global-test-submissions`);D(Array.isArray(ke.data)?ke.data:[])}catch{D([])}};C.useEffect(()=>{Le(),nt()},[]);const Et=(ke,$e,yt)=>{y(Ct=>({...Ct,sectionConfig:{...Ct.sectionConfig,sections:Ct.sectionConfig.sections.map(_t=>_t.id===ke?{..._t,[$e]:yt}:_t)}}))},_e=(ke,$e)=>{Et(ke,"enabled",$e)},ht=(ke,$e)=>{v(yt=>({...yt,[ke]:(yt[ke]||[]).filter((Ct,_t)=>_t!==$e)}))},ot=(ke,$e)=>ke==="coding"?$e.map(yt=>({questionType:"coding",question:yt.question,starterCode:yt.starterCode||"",testCases:yt.testCases||{language:"Python",cases:[]},points:yt.points??10})):ke==="sql"?$e.map(yt=>({questionType:"sql",question:yt.question,starterCode:yt.starterCode||"",testCases:yt.testCases||{expectedOutput:""},points:yt.points??10})):$e.map(yt=>({questionType:"mcq",question:yt.question,options:yt.options||[yt.option_1,yt.option_2,yt.option_3,yt.option_4].filter(Boolean),correctAnswer:yt.correctAnswer??yt.options?.[yt.correctAnswer],category:yt.category||"general",explanation:yt.explanation||""})),$t=async()=>{if(!G.topic.trim()){alert("Please enter a topic for the coding problem");return}xe(!0);try{const ke=await Xe.post(`${Fr}/ai/generate-coding-problem`,{topic:G.topic,difficulty:G.difficulty,language:G.language});ke.data.problem&&X([ke.data.problem])}catch(ke){console.error("AI Generation error:",ke),X([{question:`Write a ${G.language} program to solve: ${G.topic}`,starterCode:G.language==="Python"?`# Write your solution here
def solution():
    pass

# Test your code
solution()`:"// Write your solution here",testCases:[{input:"",expected_output:""}],language:G.language,difficulty:G.difficulty}])}finally{xe(!1)}},kt=()=>{if(Q.length===0)return;const ke=Q.map($e=>({questionType:"coding",question:$e.question,starterCode:$e.starterCode||"",solutionCode:$e.solutionCode||"",language:$e.language||G.language,testCases:{language:$e.language||G.language,cases:Array.isArray($e.testCases)?$e.testCases:$e.testCases?.cases||[]},hints:$e.hints||[],explanation:$e.explanation||"",points:10}));v($e=>({...$e,coding:[...$e.coding||[],...ke]})),X([]),ne({topic:"",difficulty:"Medium",language:"Python"})},Ht=async()=>{if(!K.topic.trim()){alert("Please enter a topic for the SQL problem");return}me(!0);try{const ke=await Xe.post(`${Fr}/ai/generate-sql-problem`,{topic:K.topic,difficulty:K.difficulty});ke.data.problem&&le([ke.data.problem])}catch(ke){console.error("AI Generation error:",ke),le([{question:`Write a SQL query to: ${K.topic}`,schema:`-- Sample schema
CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    name TEXT,
    department TEXT,
    salary INTEGER
);

INSERT INTO employees VALUES (1, 'John', 'Engineering', 50000);`,expectedOutput:`id|name|department|salary
1|John|Engineering|50000`,difficulty:K.difficulty}])}finally{me(!1)}},Sn=()=>{if(re.length===0)return;const ke=re.map($e=>({questionType:"sql",question:$e.question,starterCode:`${$e.schema||""}

-- Your query here:`,testCases:{expectedOutput:$e.expectedOutput||""},solutionQuery:$e.solutionQuery||"",hints:$e.hints||[],explanation:$e.explanation||"",points:10}));v($e=>({...$e,sql:[...$e.sql||[],...ke]})),le([]),H({topic:"",difficulty:"Medium"})},Ut=async()=>{if(!g.title.trim()){alert("Enter test title");return}if(Object.values(x).reduce(($e,yt)=>$e+yt.length,0)===0){alert("Add questions in sections");return}try{let $e=null;if(g.startTime){const Lt=new Date(g.startTime);isNaN(Lt.getTime())||($e=Lt.toISOString())}let yt=null;if(g.deadline){const Lt=new Date(g.deadline);isNaN(Lt.getTime())||(yt=Lt.toISOString())}const Ct={...g,startTime:$e,deadline:yt,createdBy:c?void 0:Yg,proctoring:q.enabled?{enabled:!0,trackTabSwitches:q.trackTabSwitches,maxTabSwitches:q.maxTabSwitches,enableVideoAudio:q.enableVideoAudio,disableCopyPaste:q.disableCopyPaste,detectCameraBlocking:q.detectCameraBlocking,detectPhoneUsage:q.detectPhoneUsage,enforceFullscreen:q.enforceFullscreen,autoSubmitOnViolation:q.autoSubmitOnViolation}:{enabled:!1},maxTabSwitches:q.enabled&&q.trackTabSwitches?q.maxTabSwitches:0};let _t=c;c?(await Xe.put(`${Fr}/global-tests/${c}`,{...Ct,createdBy:void 0}),await Xe.delete(`${Fr}/global-tests/${c}/questions`)):_t=(await Xe.post(`${Fr}/global-tests`,Ct)).data.id;for(const Lt of Vv){const zt=x[Lt.id]||[];if(zt.length===0)continue;const Jt=ot(Lt.id,zt);await Xe.post(`${Fr}/global-tests/${_t}/questions`,{section:Lt.id,questions:Jt})}i(!1),l(1),u(null),v({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),y({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"live",sectionConfig:g.sectionConfig}),Le()}catch($e){alert($e.response?.data?.error||"Failed to save test")}},en=async ke=>{if(window.confirm("Delete this global test? This cannot be undone."))try{await Xe.delete(`${Fr}/global-tests/${ke}`),Le()}catch($e){alert($e.response?.data?.error||"Delete failed")}},fn=async(ke,$e)=>{try{await Xe.put(`${Fr}/global-tests/${ke}`,{status:$e}),Le()}catch(yt){alert(yt.response?.data?.error||"Status update failed")}},Qt=async ke=>{try{const[$e,yt]=await Promise.all([Xe.get(`${Fr}/global-tests/${ke.id}`),Xe.get(`${Fr}/global-tests/${ke.id}/questions`)]),Ct=$e.data,_t=Array.isArray(yt.data)?yt.data:[],Lt={aptitude:[],verbal:[],logical:[],coding:[],sql:[]};_t.forEach(zt=>{const Jt=zt.options||[];let dt=zt.correctAnswer;if(zt.questionType!=="coding"&&zt.questionType!=="sql")if(typeof dt=="number"&&dt>=0&&dt<4)dt=dt;else if(typeof dt=="string"&&Jt.length){const Kr=Jt.indexOf(dt);dt=Kr>=0?Kr:/^[0-3]$/.test(dt)?parseInt(dt,10):0}else dt=0;const pr={id:zt.id,question:zt.question,options:Jt.length?Jt:["","","",""],correctAnswer:dt,category:zt.category,explanation:zt.explanation,questionType:zt.questionType||"mcq",starterCode:zt.starterCode,solutionCode:zt.solutionCode,testCases:zt.testCases,points:zt.points};Lt[zt.section]&&Lt[zt.section].push(pr)}),je((Ct.maxTabSwitches??0)>0),y({title:Ct.title,type:Ct.type||"comprehensive",difficulty:Ct.difficulty||"Medium",duration:Ct.duration??180,passingScore:Ct.passingScore??60,description:Ct.description||"",startTime:Ct.startTime?Ct.startTime.slice(0,16):"",deadline:Ct.deadline?Ct.deadline.slice(0,16):"",maxAttempts:Ct.maxAttempts??1,maxTabSwitches:Ct.maxTabSwitches??3,status:Ct.status||"draft",sectionConfig:Ct.sectionConfig||g.sectionConfig}),v(Lt),u(Ct.id),l(1),i(!0)}catch($e){alert($e.response?.data?.error||"Failed to load test")}},rn=async()=>{ee(!0);try{const ke=await Xe.post(`${Fr}/ai/generate-aptitude`,T);ke.data.questions&&z(ke.data.questions)}catch{alert("Error generating questions")}finally{ee(!1)}},Yt=()=>{P.length!==0&&(v(ke=>({...ke,[d]:[...ke[d]||[],...P.map($e=>({question:$e.question,options:$e.options||["","","",""],correctAnswer:$e.correctAnswer??0,category:$e.category||"general",explanation:$e.explanation||""}))]})),z([]))},sn=(ke,$e,yt,Ct)=>{v(_t=>{const Lt=[..._t[ke]||[]];return Lt[$e]?(yt==="options"?Lt[$e]={...Lt[$e],options:Ct}:yt==="correctAnswer"?Lt[$e]={...Lt[$e],correctAnswer:Ct}:Lt[$e]={...Lt[$e],[yt]:Ct},{..._t,[ke]:Lt}):_t})},Fn=()=>{v(ke=>({...ke,[d]:[...ke[d]||[],{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},Ft=()=>{if(!k.question.trim()){alert("Enter problem description");return}const ke=k.testCases.filter($e=>$e.input!==void 0||$e.expected_output);if(ke.length===0||!ke.some($e=>($e.expected_output||"").trim())){alert("Add at least one test case with expected output");return}v($e=>({...$e,coding:[...$e.coding||[],{questionType:"coding",question:k.question,starterCode:k.starterCode,testCases:{language:k.language,cases:k.testCases.map(yt=>({input:yt.input||"",expected_output:yt.expected_output||""}))},points:10}]})),j({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]})},xn=()=>{if(!I.question.trim()){alert("Enter question text");return}if(!I.schema.trim()){alert("Enter database schema");return}if(!I.expectedOutput.trim()){alert("Enter expected query result");return}v(ke=>({...ke,sql:[...ke.sql||[],{questionType:"sql",question:I.question,starterCode:I.schema,testCases:{expectedOutput:I.expectedOutput},points:10}]})),O({question:"",schema:"",expectedOutput:""})};return n?o.jsx("div",{className:"loading-spinner"}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[o.jsx("div",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:o.jsx(Zd,{size:24,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Complete Tests"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Aptitude, Verbal, Logical, Coding, SQL  create and manage"})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"file",accept:".csv",ref:at,style:{display:"none"},onChange:ie}),o.jsxs("button",{onClick:()=>at.current?.click(),disabled:ye,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mj,{size:18})," ",ye?"Uploading...":"CSV Upload"]}),o.jsxs("button",{type:"button",onClick:()=>{i(!0),l(1),u(null),v({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),z([]),N({topic:"",difficulty:"Medium",count:5})},className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:20})," Create Global Test"]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:o.jsx(Zd,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Total Tests"}),o.jsx("span",{className:"stat-value",children:t.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:o.jsx(Nn,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Live"}),o.jsx("span",{className:"stat-value",children:t.filter(ke=>ke.status==="live").length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:o.jsx(Br,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Submissions"}),o.jsx("span",{className:"stat-value",children:F.length})]})]})]}),t.length===0&&!n?o.jsxs("div",{style:{textAlign:"center",padding:"4rem",opacity:.7},children:[o.jsx(Zd,{size:64,style:{marginBottom:"1rem",opacity:.3}}),o.jsx("h3",{children:"No global tests yet"}),o.jsx("p",{style:{color:"var(--text-muted)"},children:"Create one to add Aptitude, Verbal, Logical, Coding, and SQL sections."}),o.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["If you see 503, run: ",o.jsx("code",{children:"node migrate_global_tests.js"})]})]}):o.jsx("div",{className:"problem-list-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:t.map(ke=>o.jsxs("div",{className:"problem-card card glass",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))",color:"#10b981",fontWeight:700},children:"GLOBAL TEST"}),o.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",textTransform:"uppercase",fontWeight:700,background:ke.status==="live"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:ke.status==="live"?"#10b981":"#ef4444",border:ke.status==="live"?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(239, 68, 68, 0.2)"},children:ke.status==="live"?"LIVE":"ENDED"})]}),o.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:ke.title}),o.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:ke.description||"Aptitude, Verbal, Logical, Coding, SQL"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"1rem"},children:[ke.duration," min  ",ke.totalQuestions??0," questions  Pass ",ke.passingScore,"%"]}),o.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:ke.type}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{type:"button",onClick:()=>Qt(ke),style:{background:"#1e3a8a",border:"1px solid #1d4ed8",color:"#93c5fd",padding:"0.4rem 0.8rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(gs,{size:14})," View"]}),ke.status==="live"?o.jsxs("button",{type:"button",onClick:()=>fn(ke.id,"draft"),style:{background:"#451a03",border:"1px solid #b45309",color:"#fbbf24",padding:"0.4rem 0.8rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(kr,{size:14})," End"]}):o.jsxs("button",{type:"button",onClick:()=>fn(ke.id,"live"),style:{background:"#064e3b",border:"1px solid #059669",color:"#6ee7b7",padding:"0.4rem 0.8rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(Nn,{size:14})," Activate"]}),o.jsxs("button",{type:"button",onClick:()=>en(ke.id),style:{background:"#450a0a",border:"1px solid #991b1b",color:"#f87171",padding:"0.4rem 0.8rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(po,{size:14})," Delete"]})]})]})]},ke.id))}),s&&o.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1500,backdropFilter:"blur(5px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:o.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:a===1?"min(800px, calc(100vw - 2rem))":"min(900px, calc(100vw - 2rem))",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"16px",background:"#1e293b",backgroundImage:"linear-gradient(145deg, rgba(30,41,59,1), rgba(15,23,42,1))",border:"1px solid rgba(139,92,246,0.2)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(139,92,246,0.15)",background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(10px)",flexShrink:0,zIndex:10},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, rgba(139,92,246,0.2), rgba(6,182,212,0.2))",borderRadius:"10px"},children:o.jsx(ex,{size:22,color:"#a78bfa"})}),o.jsxs("div",{children:[o.jsxs("h2",{style:{margin:0,fontSize:"1.25rem"},children:[c?"Edit":"Create"," Global Test"]}),o.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:a===1?"Step 1: Basic Settings & Sections":"Step 2: Add Questions to Sections"})]})]}),o.jsx("button",{type:"button",onClick:()=>{i(!1),l(1),u(null)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"10px",padding:"0.5rem",cursor:"pointer",color:"white",transition:"all 0.2s"},children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[a===1&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Test Title"}),o.jsx("input",{type:"text",placeholder:"e.g. Global Complete Assessment - Feb 2026",value:g.title,onChange:ke=>y({...g,title:ke.target.value}),style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Duration (min)  default 180 for Coding+SQL"}),o.jsx("input",{type:"number",min:"30",max:"300",value:g.duration,onChange:ke=>y({...g,duration:parseInt(ke.target.value)||180})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Passing Score (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:g.passingScore,onChange:ke=>y({...g,passingScore:parseInt(ke.target.value)||60})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Status"}),o.jsxs("select",{value:g.status,onChange:ke=>y({...g,status:ke.target.value}),children:[o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"live",children:"Live"})]})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Max Attempts"}),o.jsx("input",{type:"number",min:"1",max:"10",value:g.maxAttempts,onChange:ke=>y({...g,maxAttempts:parseInt(ke.target.value)||1})})]}),o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"linear-gradient(135deg, rgba(239,68,68,0.05), rgba(251,191,36,0.05))",borderRadius:"16px",border:"1px solid rgba(239,68,68,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{padding:"0.5rem",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:o.jsx(Vs,{size:20,color:"#ef4444"})}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,fontSize:"1rem",color:"#ef4444"},children:"Proctoring Settings"}),o.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Configure security measures for exam integrity"})]}),o.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("input",{type:"checkbox",checked:q.enabled,onChange:ke=>Z({...q,enabled:ke.target.checked})}),o.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600},children:"Enable Proctoring"})]})]}),q.enabled&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.trackTabSwitches,onChange:ke=>Z({...q,trackTabSwitches:ke.target.checked})}),o.jsx(gs,{size:16,color:"#f59e0b"}),"Track Tab Switches"]}),q.trackTabSwitches&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"1.5rem"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Max:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:q.maxTabSwitches,onChange:ke=>Z({...q,maxTabSwitches:parseInt(ke.target.value)||3}),style:{width:50,padding:"0.25rem 0.5rem",fontSize:"0.85rem"}})]})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.enableVideoAudio,onChange:ke=>Z({...q,enableVideoAudio:ke.target.checked})}),o.jsx("span",{style:{fontSize:"1rem"},children:""}),"Video/Audio Recording"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Record student during test"})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.detectCameraBlocking,onChange:ke=>Z({...q,detectCameraBlocking:ke.target.checked})}),o.jsx("span",{style:{fontSize:"1rem"},children:""}),"Detect Camera Blocking"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Flag covered/blocked camera"})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.detectPhoneUsage,onChange:ke=>Z({...q,detectPhoneUsage:ke.target.checked})}),o.jsx("span",{style:{fontSize:"1rem"},children:""}),"AI Phone Detection"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Detect mobile phones in view"})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.disableCopyPaste,onChange:ke=>Z({...q,disableCopyPaste:ke.target.checked})}),o.jsx("span",{style:{fontSize:"1rem"},children:""}),"Disable Copy/Paste"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Block clipboard actions"})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.enforceFullscreen,onChange:ke=>Z({...q,enforceFullscreen:ke.target.checked})}),o.jsx("span",{style:{fontSize:"1rem"},children:""}),"Enforce Fullscreen"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Required during test"})]}),o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239,68,68,0.1)",borderRadius:"10px",border:"1px solid rgba(239,68,68,0.2)"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:q.autoSubmitOnViolation,onChange:ke=>Z({...q,autoSubmitOnViolation:ke.target.checked})}),o.jsx(Pn,{size:16,color:"#ef4444"}),"Auto-Submit on Max Violations"]}),o.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(239,68,68,0.7)"},children:"Submit test when violations exceed limit"})]})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Description (optional)"}),o.jsx("textarea",{placeholder:"Instructions for students",value:g.description,onChange:ke=>y({...g,description:ke.target.value}),rows:2,style:{width:"100%",resize:"vertical"}})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Sections  Coding min 2, SQL min 1 (max set by you)"}),(g.sectionConfig?.sections||[]).map(ke=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:120},children:[o.jsx("input",{type:"checkbox",checked:!!ke.enabled,onChange:$e=>_e(ke.id,$e.target.checked)}),Vv.find($e=>$e.id===ke.id)?.icon," ",Vv.find($e=>$e.id===ke.id)?.label,ke.id==="coding"&&o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 2)"}),ke.id==="sql"&&o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 1)"})]}),o.jsx("input",{type:"number",min:ke.id==="coding"?2:ke.id==="sql"?1:0,placeholder:"Count",value:ke.questionsCount??"",onChange:$e=>Et(ke.id,"questionsCount",parseInt($e.target.value)||0),style:{width:70}}),o.jsx("input",{type:"number",min:"0",placeholder:"Min",value:ke.timeMinutes??"",onChange:$e=>Et(ke.id,"timeMinutes",parseInt($e.target.value)||0),style:{width:70}})]},ke.id))]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",className:"btn-reset",onClick:()=>i(!1),children:"Cancel"}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:()=>l(2),children:"Next: Add Questions"})]})]}),a===2&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap",padding:"0.5rem",background:"rgba(0,0,0,0.2)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)"},children:Vv.map(ke=>{const $e=d===ke.id,yt=(x[ke.id]||[]).length,Ct={aptitude:{bg:"rgba(139,92,246,0.15)",border:"rgba(139,92,246,0.4)",color:"#a78bfa"},verbal:{bg:"rgba(59,130,246,0.15)",border:"rgba(59,130,246,0.4)",color:"#60a5fa"},logical:{bg:"rgba(245,158,11,0.15)",border:"rgba(245,158,11,0.4)",color:"#fbbf24"},coding:{bg:"rgba(16,185,129,0.15)",border:"rgba(16,185,129,0.4)",color:"#34d399"},sql:{bg:"rgba(6,182,212,0.15)",border:"rgba(6,182,212,0.4)",color:"#22d3ee"}},_t=Ct[ke.id]||Ct.aptitude;return o.jsxs("button",{type:"button",onClick:()=>f(ke.id),style:{padding:"0.75rem 1.25rem",borderRadius:"10px",border:$e?`2px solid ${_t.border}`:"2px solid transparent",background:$e?_t.bg:"transparent",color:$e?_t.color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:$e?600:400,transition:"all 0.2s ease",flex:"1 1 auto",justifyContent:"center",minWidth:"120px"},children:[o.jsx("span",{style:{fontSize:"1.1rem"},children:ke.icon}),o.jsx("span",{children:ke.label}),o.jsx("span",{style:{background:yt>0?$e?_t.color:"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)",color:yt>0?$e?"#0f172a":"rgba(255,255,255,0.8)":"rgba(255,255,255,0.4)",padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:700,minWidth:"24px",textAlign:"center"},children:yt})]},ke.id)})}),d==="coding"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.1), rgba(6,182,212,0.05))",border:"1px solid rgba(16,185,129,0.3)",borderRadius:"16px"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#10b981"},children:[o.jsx(zB,{size:20})," AI Coding Problem Generator"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),o.jsx("input",{type:"text",placeholder:"e.g., Two Sum, Binary Search, Linked Lists",value:G.topic,onChange:ke=>ne({...G,topic:ke.target.value}),style:{width:"100%"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),o.jsxs("select",{value:G.difficulty,onChange:ke=>ne({...G,difficulty:ke.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"LANGUAGE"}),o.jsxs("select",{value:G.language,onChange:ke=>ne({...G,language:ke.target.value}),children:[o.jsx("option",{value:"Python",children:"Python"}),o.jsx("option",{value:"JavaScript",children:"JavaScript"}),o.jsx("option",{value:"Java",children:"Java"}),o.jsx("option",{value:"C++",children:"C++"})]})]}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:$t,disabled:Ae,style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:Ae?o.jsxs(o.Fragment,{children:[o.jsx(_c,{size:16,className:"spin"})," Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(lO,{size:16})," Generate"]})})]}),Q.length>0&&o.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",borderRadius:"12px",border:"1px solid rgba(16,185,129,0.2)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{fontWeight:600,color:"#10b981"},children:[" Generated ",Q.length," Problem(s)"]}),o.jsxs("button",{type:"button",className:"btn-create-new",onClick:kt,style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[o.jsx(zo,{size:16})," Add to Section"]})]}),Q.map((ke,$e)=>o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[o.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[ke.question?.substring(0,150),"..."]}),o.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:[ke.testCases?.length||0," test cases"]})]},$e))]})]}),o.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[o.jsx(Lr,{size:18})," Manual Entry"]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Problem description"}),o.jsx("textarea",{value:k.question,onChange:ke=>j({...k,question:ke.target.value}),placeholder:"Describe the coding problem...",rows:3,style:{width:"100%",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Starter code (optional)"}),o.jsx("textarea",{value:k.starterCode,onChange:ke=>j({...k,starterCode:ke.target.value}),placeholder:"def solution():\\n    pass",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Language"}),o.jsxs("select",{value:k.language,onChange:ke=>j({...k,language:ke.target.value}),children:[o.jsx("option",{value:"Python",children:"Python"}),o.jsx("option",{value:"JavaScript",children:"JavaScript"}),o.jsx("option",{value:"Java",children:"Java"}),o.jsx("option",{value:"C++",children:"C++"})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Test cases (input  expected output)"}),k.testCases.map((ke,$e)=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[o.jsx("input",{type:"text",placeholder:"Sample Input",value:ke.input||"",onChange:yt=>{const Ct=[...k.testCases];Ct[$e]={...Ct[$e],input:yt.target.value},j({...k,testCases:Ct})}}),o.jsx("input",{type:"text",placeholder:"Sample Output",value:ke.expected_output||"",onChange:yt=>{const Ct=[...k.testCases];Ct[$e]={...Ct[$e],expected_output:yt.target.value},j({...k,testCases:Ct})}}),o.jsx("button",{type:"button",onClick:()=>j({...k,testCases:k.testCases.filter((yt,Ct)=>Ct!==$e)}),className:"btn-reset",style:{color:"var(--danger)"},children:o.jsx(Os,{size:18})})]},$e)),o.jsx("button",{type:"button",className:"btn-reset",style:{fontSize:"0.85rem",marginTop:"0.25rem"},onClick:()=>j({...k,testCases:[...k.testCases,{input:"",expected_output:""}]}),children:"+ Add test case"})]}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:Ft,children:"Add this coding problem"})]}),o.jsxs("div",{style:{marginTop:"2rem"},children:[x.coding?.length>0&&o.jsxs("h4",{style:{color:"white",marginBottom:"1rem",fontSize:"1rem"},children:["Added Coding Problems (",x.coding.length,")"]}),x.coding?.map((ke,$e)=>o.jsx("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsxs("h5",{style:{margin:"0 0 0.5rem",color:"#60a5fa",fontSize:"1rem"},children:[ke.question?.substring(0,100),"..."]}),o.jsxs("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:[ke.testCases?.language||(ke.testCases?.cases||Array.isArray(ke.testCases)?"Coding":"Python"),"  ",(Array.isArray(ke.testCases)?ke.testCases:ke.testCases?.cases||[]).length," test cases"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{type:"button",onClick:()=>m({index:$e,section:"coding"}),style:{padding:"0.5rem 0.75rem",background:"#3b82f6",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx(Zd,{size:16})," Manage Test Cases"]}),o.jsx("button",{type:"button",onClick:()=>{v(yt=>({...yt,coding:yt.coding.filter((Ct,_t)=>_t!==$e)}))},style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.2)",border:"none",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},children:o.jsx(po,{size:16})})]})]})},$e))]}),A&&x[A.section]?.[A.index]&&o.jsx(Nbt,{title:x[A.section][A.index].question?.substring(0,50),inputLabel:A.section==="sql"?"Database Schema (SQL)":"Sample Input",outputLabel:A.section==="sql"?"Expected Result (Table/Text)":"Sample Output",initialTestCases:(()=>{const ke=x[A.section][A.index];if(Array.isArray(ke.testCases))return ke.testCases.map($e=>({...$e,expectedOutput:$e.expected_output||$e.expectedOutput,isHidden:$e.isHidden||!1,points:$e.points||10,description:$e.description||""}));if(A.section==="sql"){const $e=ke.schema||ke.starterCode||"",yt=ke.expectedOutput||ke.testCases?.expectedOutput||"";if($e||yt)return[{input:$e,expectedOutput:yt,isHidden:!1,points:ke.points||10,description:"Default Case"}]}return ke.testCases?.cases?ke.testCases.cases.map($e=>({...$e,expectedOutput:$e.expected_output||$e.expectedOutput,isHidden:$e.isHidden||!1,points:$e.points||10,description:$e.description||""})):[]})(),onClose:()=>m(null),onUpdate:ke=>{const $e=ke.map(yt=>({input:yt.input,expected_output:yt.expectedOutput,isHidden:yt.isHidden,points:yt.points,description:yt.description}));v(yt=>{const Ct=A.section,_t=[...yt[Ct]||[]];if(_t[A.index]){const Lt=_t[A.index];if(Ct==="sql"){const zt=ke[0]||{input:"",expectedOutput:""};_t[A.index]={...Lt,schema:zt.input,starterCode:zt.input,expectedOutput:zt.expectedOutput,testCases:$e}}else{const zt=Lt.testCases?.language||"Python";Lt.testCases?.language||!Array.isArray(Lt.testCases)?_t[A.index]={...Lt,testCases:{language:zt,cases:$e}}:_t[A.index]={...Lt,testCases:$e}}}return{...yt,[Ct]:_t}})}})]}),d==="sql"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(6,182,212,0.1), rgba(139,92,246,0.05))",border:"1px solid rgba(6,182,212,0.3)",borderRadius:"16px"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#06b6d4"},children:[o.jsx(zB,{size:20})," AI SQL Problem Generator"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),o.jsx("input",{type:"text",placeholder:"e.g., JOINs, Aggregate Functions, Subqueries",value:K.topic,onChange:ke=>H({...K,topic:ke.target.value}),style:{width:"100%"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),o.jsxs("select",{value:K.difficulty,onChange:ke=>H({...K,difficulty:ke.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:Ht,disabled:Be,style:{background:"linear-gradient(135deg, #06b6d4, #8b5cf6)"},children:Be?o.jsxs(o.Fragment,{children:[o.jsx(_c,{size:16,className:"spin"})," Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(lO,{size:16})," Generate"]})})]}),re.length>0&&o.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(6,182,212,0.1)",borderRadius:"12px",border:"1px solid rgba(6,182,212,0.2)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{fontWeight:600,color:"#06b6d4"},children:[" Generated ",re.length," Problem(s)"]}),o.jsxs("button",{type:"button",className:"btn-create-new",onClick:Sn,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)"},children:[o.jsx(zo,{size:16})," Add to Section"]})]}),re.map((ke,$e)=>o.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[o.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[ke.question?.substring(0,150),"..."]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Schema included"})]},$e))]})]}),o.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[o.jsx(wi,{size:18})," Manual Entry"]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Question / instruction"}),o.jsx("textarea",{value:I.question,onChange:ke=>O({...I,question:ke.target.value}),placeholder:"e.g. Write a query to return the top 5 employees by salary",rows:2,style:{width:"100%",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Database schema (CREATE TABLE + INSERT)"}),o.jsx("textarea",{value:I.schema,onChange:ke=>O({...I,schema:ke.target.value}),placeholder:`CREATE TABLE employees (id INT, name TEXT, salary INT);
INSERT INTO employees VALUES (1,'A',100);`,rows:6,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"Expected query result (exact output to match)"}),o.jsx("textarea",{value:I.expectedOutput,onChange:ke=>O({...I,expectedOutput:ke.target.value}),placeholder:"Paste the expected result as shown by SQLite",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:xn,children:"Add this SQL question"})]}),o.jsxs("div",{style:{marginTop:"2rem"},children:[x.sql?.length>0&&o.jsxs("h4",{style:{color:"white",marginBottom:"1rem",fontSize:"1rem"},children:["Added SQL Problems (",x.sql.length,")"]}),x.sql?.map((ke,$e)=>o.jsx("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1rem",background:"rgba(6, 182, 212, 0.05)",border:"1px solid rgba(6, 182, 212, 0.2)",borderRadius:"12px"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsxs("h5",{style:{margin:"0 0 0.5rem",color:"#60a5fa",fontSize:"1rem"},children:[ke.question?.substring(0,100),"..."]}),o.jsxs("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:["SQL Problem  ",Array.isArray(ke.testCases)?ke.testCases:ke.schema?1:0," test case(s)"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{type:"button",onClick:()=>m({index:$e,section:"sql"}),style:{padding:"0.5rem 0.75rem",background:"#06b6d4",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx(Zd,{size:16})," Manage Data"]}),o.jsx("button",{type:"button",onClick:()=>{v(yt=>({...yt,sql:yt.sql.filter((Ct,_t)=>_t!==$e)}))},style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.2)",border:"none",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},children:o.jsx(po,{size:16})})]})]})},$e))]})]}),d!=="coding"&&d!=="sql"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.25rem",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem"},children:[o.jsx(Qo,{size:18,style:{color:"var(--primary)"}})," AI Question Generator"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto auto",gap:"0.75rem",alignItems:"end",flexWrap:"wrap"},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",children:"TOPIC"}),o.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning",value:T.topic,onChange:ke=>N({...T,topic:ke.target.value}),style:{width:"100%"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",children:"DIFFICULTY"}),o.jsxs("select",{value:T.difficulty,onChange:ke=>N({...T,difficulty:ke.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{className:"form-label",children:"COUNT"}),o.jsx("input",{type:"number",min:"1",max:"20",value:T.count,onChange:ke=>N({...T,count:parseInt(ke.target.value)||1}),style:{width:70}})]}),o.jsxs("button",{type:"button",className:"btn-create-new",onClick:rn,disabled:U,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:16})," ",U?"Generating":"Generate"]})]}),P.length>0&&o.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[P.length," question(s) generated."]}),o.jsx("button",{type:"button",className:"btn-create-new",onClick:Yt,style:{fontSize:"0.9rem"},children:"Add All to Test"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,fontSize:"1rem"},children:[o.jsx(sZ,{size:18,style:{color:"var(--text-muted)"}})," Questions"]}),o.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[(x[d]||[]).length," questions"]})]}),o.jsxs("div",{style:{maxHeight:"50vh",overflowY:"auto",marginBottom:"1rem"},children:[(x[d]||[]).map((ke,$e)=>o.jsxs("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1.25rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{background:"var(--primary)",color:"white",padding:"0.25rem 0.6rem",borderRadius:"8px",fontWeight:600,fontSize:"0.85rem"},children:["Q",$e+1]}),o.jsx("button",{type:"button",onClick:()=>ht(d,$e),className:"btn-reset",style:{color:"var(--danger)",padding:"0.25rem"},title:"Delete question",children:o.jsx(po,{size:18})})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{className:"form-label",children:"QUESTION TEXT"}),o.jsx("textarea",{value:ke.question||"",onChange:yt=>sn(d,$e,"question",yt.target.value),placeholder:"Enter question text...",rows:2,style:{width:"100%",resize:"vertical"}})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[o.jsx("label",{className:"form-label",children:"ANSWER OPTIONS"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[0,1,2,3].map(yt=>{const Ct=ke.options||["","","",""],_t=(ke.correctAnswer??0)===yt;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("button",{type:"button",onClick:()=>sn(d,$e,"correctAnswer",yt),style:{minWidth:36,height:36,borderRadius:"8px",border:"2px solid "+(_t?"var(--success)":"var(--border-color)"),background:_t?"var(--success-alpha)":"var(--bg-secondary)",color:_t?"var(--success)":"var(--text-muted)",fontWeight:700,cursor:"pointer",flexShrink:0},children:String.fromCharCode(65+yt)}),o.jsx("input",{type:"text",value:Ct[yt]||"",onChange:Lt=>{const zt=[...Ct];zt[yt]=Lt.target.value,sn(d,$e,"options",zt)},placeholder:`Option ${String.fromCharCode(65+yt)}`,style:{flex:1}})]},yt)})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"var(--success-alpha)",borderRadius:"8px",border:"1px solid var(--success)"},children:[o.jsx(rZ,{size:18,style:{color:"var(--success)",flexShrink:0}}),o.jsx("span",{style:{fontSize:"0.9rem",color:"var(--success)",fontWeight:500},children:"Correct Answer:"}),o.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.85rem"},children:["Option ",String.fromCharCode(65+(ke.correctAnswer??0))]}),o.jsx("span",{style:{marginLeft:"auto",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},$e)),o.jsxs("button",{type:"button",onClick:Fn,style:{width:"100%",padding:"1.25rem",border:"2px dashed var(--border-color)",borderRadius:"12px",background:"transparent",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"1rem"},children:[o.jsx(zo,{size:20})," Add New Question"]})]})]}),(d==="coding"||d==="sql")&&o.jsxs("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:[o.jsxs("strong",{children:["Added in ",Vv.find(ke=>ke.id===d)?.label,":"]}),o.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem",maxHeight:200,overflow:"auto"},children:(x[d]||[]).map((ke,$e)=>o.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:400},children:ke.question}),o.jsx("button",{type:"button",onClick:()=>ht(d,$e),className:"btn-reset",style:{color:"var(--danger)"},children:o.jsx(Os,{size:16})})]},$e))})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"space-between"},children:[o.jsx("button",{type:"button",className:"btn-reset",onClick:()=>l(1),children:"Back"}),o.jsxs("button",{type:"button",className:"btn-create-new",onClick:Ut,children:[c?"Update":"Create"," Test"]})]})]})]})," "]})})]})}function Ybt(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1),[a,l]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState(!1),[A,m]=C.useState([]),[g,y]=C.useState({topic:"",difficulty:"Medium",count:5}),[x,v]=C.useState([]),[w,B]=C.useState(!1),k=C.useRef(null),[j,I]=C.useState({title:"",difficulty:"Medium",duration:30,passingScore:60,maxTabSwitches:3,maxAttempts:1,startTime:"",deadline:"",description:"",status:"live",questions:[]}),[O,F]=C.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""});C.useEffect(()=>{D(),T()},[]);const D=async()=>{try{const G=await Xe.get(`${Fr}/aptitude`);e(G.data),r(!1)}catch(G){console.error("Error fetching tests:",G),r(!1)}},T=async()=>{try{const G=await Xe.get(`${Fr}/aptitude-submissions`);v(G.data)}catch(G){console.error("Error fetching submissions:",G)}},N=async()=>{f(!0);try{const G=await Xe.post(`${Fr}/ai/generate-aptitude`,g);G.data.questions&&m(G.data.questions)}catch{alert("Error generating questions")}finally{f(!1)}},P=()=>{I(G=>({...G,questions:[...G.questions,...A]})),m([])},z=async G=>{if(G&&G.preventDefault(),j.questions.length===0){alert("Please add at least one question");return}if(j.questions.filter(K=>!K.question.trim()||K.options.some(H=>!H.trim())).length>0){alert("Please fill in all questions and options");return}try{const K={...j,createdBy:Yg};if(K.startTime){const H=new Date(K.startTime);isNaN(H.getTime())||(K.startTime=H.toISOString())}if(K.deadline){const H=new Date(K.deadline);isNaN(H.getTime())||(K.deadline=H.toISOString())}await Xe.post(`${Fr}/aptitude`,K),i(!1),I({title:"",difficulty:"Medium",duration:30,passingScore:60,maxTabSwitches:3,maxAttempts:1,startTime:"",deadline:"",description:"",status:"live",questions:[]}),D()}catch(K){console.error(K),alert(K.response?.data?.error||"Error creating test")}},U=async G=>{const ne=G.target.files[0];if(ne){B(!0);try{const H=(await ne.text()).split(`
`).map(le=>le.trim()).filter(Boolean);if(H.length<2){alert("CSV must have header + at least one row");return}const Q=H[0].split(",").map(le=>le.trim().toLowerCase().replace(/['"]/g,"")),X=[];for(let le=1;le<H.length;le++){const Ae=H[le].match(/(".*?"|[^,]+)/g)?.map(Be=>Be.trim().replace(/^"|"$/g,""))||[],xe={};Q.forEach((Be,me)=>xe[Be]=Ae[me]||""),xe.question&&X.push({question:xe.question,options:[xe.option1||xe.option_1||"",xe.option2||xe.option_2||"",xe.option3||xe.option_3||"",xe.option4||xe.option_4||""],correctAnswer:parseInt(xe.correctanswer||xe.correct_answer||xe.answer||"0"),category:xe.category||"general",explanation:xe.explanation||""})}if(X.length===0){alert("No valid rows. CSV needs: question,option1,option2,option3,option4,correctAnswer"),B(!1);return}const re={title:ne.name.replace(".csv","")+" - CSV Import",difficulty:"Medium",duration:Math.max(30,X.length*2),passingScore:60,maxTabSwitches:3,maxAttempts:1,status:"draft",createdBy:Yg,questions:X};await Xe.post(`${Fr}/aptitude`,re),alert(`Created aptitude test with ${X.length} questions from CSV!`),D()}catch(K){alert("CSV upload failed: "+(K.response?.data?.error||K.message))}finally{B(!1),G.target.value=""}}},ee=async G=>{const ne=G.status==="live"?"ended":"live",K=ne==="live"?"make this test visible to students":"hide this test from students";if(window.confirm(`Are you sure you want to ${K}?`))try{await Xe.patch(`${Fr}/aptitude/${G.id}/status`,{status:ne}),D()}catch{alert("Error updating test status")}},q=async G=>{if(window.confirm("Delete this aptitude test?"))try{await Xe.delete(`${Fr}/aptitude/${G}`),D()}catch(ne){console.error(ne),alert("Error deleting test")}},Z=G=>{I(ne=>({...ne,questions:ne.questions.filter((K,H)=>H!==G)}))};return n?o.jsx("div",{className:"loading-spinner"}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Br,{size:28,color:"white"})}),o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),o.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Create and manage aptitude tests for students"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"file",accept:".csv",ref:k,style:{display:"none"},onChange:U}),o.jsxs("button",{onClick:()=>k.current?.click(),disabled:w,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mj,{size:18})," ",w?"Uploading...":"CSV Upload"]}),o.jsxs("button",{onClick:()=>i(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(zo,{size:20})," Create New Test"]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:o.jsx(Br,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Total Tests"}),o.jsx("span",{className:"stat-value",children:t.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:o.jsx(Nn,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Live Tests"}),o.jsx("span",{className:"stat-value",children:t.filter(G=>G.status==="live").length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:o.jsx($c,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Submissions"}),o.jsx("span",{className:"stat-value",children:x.length})]})]}),o.jsxs("div",{className:"stat-card glass",children:[o.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:o.jsx(ul,{size:24})}),o.jsxs("div",{className:"stat-info",children:[o.jsx("span",{className:"stat-label",children:"Pass Rate"}),o.jsxs("span",{className:"stat-value",children:[x.length>0?Math.round(x.filter(G=>G.status==="passed").length/x.length*100):0,"%"]})]})]})]}),o.jsxs("div",{className:"card glass",children:[o.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[o.jsx(Br,{size:20,style:{color:"#8b5cf6"}})," All Aptitude Tests"]}),o.jsx("div",{className:"table-container",style:{border:"none"},children:o.jsxs("table",{className:"modern-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Test Title"}),o.jsx("th",{children:"Difficulty"}),o.jsx("th",{children:"Questions"}),o.jsx("th",{children:"Duration"}),o.jsx("th",{children:"Pass %"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:t.map(G=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Br,{size:16,color:"white"})}),o.jsx("span",{style:{fontWeight:500},children:G.title})]})}),o.jsx("td",{children:o.jsx("span",{className:`difficulty-badge ${G.difficulty?.toLowerCase()}`,children:G.difficulty})}),o.jsx("td",{children:G.questionCount||G.totalQuestions}),o.jsxs("td",{children:[G.duration," min"]}),o.jsxs("td",{children:[G.passingScore,"%"]}),o.jsx("td",{children:o.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:G.status==="live"?"rgba(16, 185, 129, 0.15)":G.status==="ended"?"rgba(239, 68, 68, 0.15)":"rgba(107, 114, 128, 0.15)",color:G.status==="live"?"#10b981":G.status==="ended"?"#ef4444":"#6b7280",fontSize:"0.8rem",fontWeight:500},children:G.status})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>{u(G),l(!0)},style:{padding:"0.4rem 0.8rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",color:"#3b82f6",cursor:"pointer",fontSize:"0.8rem"},children:"View"}),o.jsx("button",{onClick:()=>ee(G),style:{padding:"0.4rem 0.8rem",background:G.status==="live"?"rgba(245, 158, 11, 0.1)":"rgba(16, 185, 129, 0.1)",border:G.status==="live"?"1px solid rgba(245, 158, 11, 0.3)":"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"6px",color:G.status==="live"?"#f59e0b":"#10b981",cursor:"pointer",fontSize:"0.8rem"},title:G.status==="live"?"End test (hide from students)":"Make test live (show to students)",children:G.status==="live"?"End":"Activate"}),o.jsx("button",{onClick:()=>q(G.id),style:{padding:"0.4rem 0.8rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})})]},G.id))})]})})]}),s&&o.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:o.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Br,{size:20,color:"white"})}),o.jsx("h2",{children:"Create Aptitude Test"})]}),o.jsx("button",{onClick:()=>i(!1),className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsxs("form",{onSubmit:z,className:"modal-body",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(qi,{size:14,style:{marginRight:"0.5rem"}})," Test Title"]}),o.jsx("input",{type:"text",placeholder:"Enter test title...",value:j.title,onChange:G=>I({...j,title:G.target.value}),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(ls,{size:14,style:{marginRight:"0.5rem"}})," Duration (mins)"]}),o.jsx("input",{type:"number",min:"5",max:"180",value:j.duration,onChange:G=>I({...j,duration:parseInt(G.target.value)})})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(_c,{size:14,style:{marginRight:"0.5rem"}})," Attempts"]}),o.jsxs("select",{value:j.maxAttempts,onChange:G=>I({...j,maxAttempts:parseInt(G.target.value)}),children:[o.jsx("option",{value:1,children:"1 Attempt"}),o.jsx("option",{value:2,children:"2 Attempts"}),o.jsx("option",{value:3,children:"3 Attempts"}),o.jsx("option",{value:5,children:"5 Attempts"}),o.jsx("option",{value:-1,children:"Unlimited"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(Pn,{size:14,style:{marginRight:"0.5rem"}})," Max Tab Switches (Violations)"]}),o.jsx("input",{type:"number",min:"0",max:"20",value:j.maxTabSwitches,onChange:G=>I({...j,maxTabSwitches:parseInt(G.target.value)})}),o.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Test auto-submits if exceeded"})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(k1,{size:14,style:{marginRight:"0.5rem"}})," Start Time"]}),o.jsx("input",{type:"datetime-local",value:j.startTime,onChange:G=>I({...j,startTime:G.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(k1,{size:14,style:{marginRight:"0.5rem"}})," End Time (Deadline)"]}),o.jsx("input",{type:"datetime-local",value:j.deadline,onChange:G=>I({...j,deadline:G.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Difficulty"}),o.jsxs("select",{value:j.difficulty,onChange:G=>I({...j,difficulty:G.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Passing Score (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:j.passingScore,onChange:G=>I({...j,passingScore:parseInt(G.target.value)})})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:[o.jsx(UB,{size:14,style:{marginRight:"0.5rem"}})," Test Status"]}),o.jsxs("select",{value:j.status,onChange:G=>I({...j,status:G.target.value}),children:[o.jsx("option",{value:"live",children:"Live - Visible to students"}),o.jsx("option",{value:"ended",children:"Ended - Hidden from students"})]})]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{className:"form-label",children:[o.jsx(qi,{size:14,style:{marginRight:"0.5rem"}})," Description (Optional)"]}),o.jsx("textarea",{placeholder:"Brief description of the test...",value:j.description,onChange:G=>I({...j,description:G.target.value}),rows:3,style:{width:"100%",resize:"vertical"}})]}),o.jsxs("div",{style:{background:"var(--secondary-alpha)",border:"1px solid var(--secondary)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",color:"var(--text-primary)"},children:[o.jsx(Qo,{size:18,color:"var(--secondary)"})," AI Question Generator"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"1rem",alignItems:"end"},children:[o.jsxs("div",{className:"form-group",style:{margin:0},children:[o.jsx("label",{className:"form-label",children:"TOPIC"}),o.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning...",value:g.topic,onChange:G=>y({...g,topic:G.target.value})})]}),o.jsxs("div",{className:"form-group",style:{margin:0},children:[o.jsx("label",{className:"form-label",children:"DIFFICULTY"}),o.jsxs("select",{value:g.difficulty,onChange:G=>y({...g,difficulty:G.target.value}),children:[o.jsx("option",{value:"Easy",children:"Easy"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Hard",children:"Hard"})]})]}),o.jsxs("div",{className:"form-group",style:{margin:0},children:[o.jsx("label",{className:"form-label",children:"COUNT"}),o.jsx("input",{type:"number",min:"1",max:"20",value:g.count,onChange:G=>y({...g,count:parseInt(G.target.value)})})]}),o.jsxs("button",{type:"button",onClick:N,disabled:d,style:{padding:"0.75rem 1.5rem",background:"var(--primary)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qo,{size:16}),d?"Generating...":"Generate"]})]}),A.length>0&&o.jsxs("div",{style:{marginTop:"1rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--secondary)",fontWeight:600},children:[" Generated ",A.length," questions"]}),o.jsx("button",{type:"button",onClick:P,style:{padding:"0.5rem 1rem",background:"var(--success-alpha)",border:"1px solid var(--success)",borderRadius:"6px",color:"var(--success)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer"},children:"Add All to Test"})]}),o.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"0.75rem"},children:A.map((G,ne)=>o.jsxs("div",{style:{padding:"0.5rem",borderBottom:ne<A.length-1?"1px solid var(--border-color)":"none",fontSize:"0.85rem",color:"var(--text-primary)"},children:["Q",ne+1,": ",G.question.substring(0,80),"..."]},ne))})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color)"},children:[o.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,color:"var(--text-primary)",fontSize:"1rem",fontWeight:600},children:[o.jsx(sZ,{size:18,style:{color:"var(--primary)"}})," Questions"]}),o.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--primary)",background:"var(--primary-alpha)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontWeight:500},children:[j.questions.length," question",j.questions.length!==1?"s":""]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[j.questions.map((G,ne)=>o.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-color)",boxShadow:"var(--card-shadow)",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:o.jsxs("span",{style:{background:"linear-gradient(135deg, var(--primary), var(--secondary))",color:"white",padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase"},children:["Q",ne+1]})}),o.jsx("button",{type:"button",onClick:()=>Z(ne),style:{background:"var(--danger-alpha)",border:"1px solid var(--danger)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"var(--danger)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseOver:K=>{K.currentTarget.style.background="var(--danger)",K.currentTarget.style.color="white"},onMouseOut:K=>{K.currentTarget.style.background="var(--danger-alpha)",K.currentTarget.style.color="var(--danger)"},children:o.jsx(po,{size:16})})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.5rem",display:"block"},children:"Question Text"}),o.jsx("input",{type:"text",value:G.question,onChange:K=>{const H=[...j.questions];H[ne]={...H[ne],question:K.target.value},I({...j,questions:H})},placeholder:"Enter your question here...",style:{width:"100%",padding:"0.875rem 1rem",fontSize:"0.95rem",borderRadius:"10px",border:"2px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",transition:"border-color 0.2s"}})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"block"},children:"Answer Options"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.875rem"},children:["A","B","C","D"].map((K,H)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:G.correctAnswer===H?"var(--success-alpha)":"var(--bg-primary)",padding:"0.5rem",borderRadius:"10px",border:G.correctAnswer===H?"2px solid var(--success)":"2px solid var(--border-color)",transition:"all 0.2s"},children:[o.jsx("span",{onClick:()=>{const Q=[...j.questions];Q[ne]={...Q[ne],correctAnswer:H},I({...j,questions:Q})},style:{width:"32px",height:"32px",borderRadius:"8px",background:G.correctAnswer===H?"var(--success)":"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",color:G.correctAnswer===H?"white":"var(--text-muted)",flexShrink:0,cursor:"pointer",transition:"all 0.2s",border:G.correctAnswer===H?"none":"1px solid var(--border-color)"},title:"Click to set as correct answer",children:K}),o.jsx("input",{type:"text",value:G.options[H]||"",onChange:Q=>{const X=[...j.questions],re=[...X[ne].options];re[H]=Q.target.value,X[ne]={...X[ne],options:re},I({...j,questions:X})},placeholder:`Option ${K}`,style:{flex:1,padding:"0.625rem 0.875rem",borderRadius:"8px",border:"none",background:"transparent",color:"var(--text-primary)",fontSize:"0.9rem"}})]},H))})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1rem",background:"var(--success-alpha)",borderRadius:"10px",border:"1px solid var(--success)"},children:[o.jsx(Nn,{size:18,color:"var(--success)"}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Correct Answer:"}),o.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.375rem 0.875rem",borderRadius:"6px",fontWeight:600,fontSize:"0.85rem"},children:["Option ",["A","B","C","D"][G.correctAnswer]]}),o.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},ne)),o.jsxs("button",{type:"button",onClick:()=>{I(G=>({...G,questions:[...G.questions,{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},style:{padding:"1.25rem",background:"var(--bg-card)",border:"2px dashed var(--border-color)",borderRadius:"16px",color:"var(--text-muted)",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",transition:"all 0.2s",fontSize:"0.95rem"},onMouseOver:G=>{G.currentTarget.style.borderColor="var(--primary)",G.currentTarget.style.color="var(--primary)",G.currentTarget.style.background="var(--primary-alpha)"},onMouseOut:G=>{G.currentTarget.style.borderColor="var(--border-color)",G.currentTarget.style.color="var(--text-muted)",G.currentTarget.style.background="var(--bg-card)"},children:[o.jsx(zo,{size:20})," Add New Question"]})]})]}),o.jsxs("div",{className:"form-actions",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1.5rem",marginTop:"0.5rem"},children:[o.jsxs("button",{type:"button",className:"btn-reset",onClick:()=>i(!1),children:[o.jsx(Os,{size:16})," Cancel"]}),o.jsxs("button",{type:"submit",className:"btn-create-new",disabled:j.questions.length===0,children:[o.jsx(tx,{size:16})," Create Test"]})]})]})]})}),a&&c&&o.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:o.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflowY:"auto"},children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-with-icon",children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Br,{size:20,color:"white"})}),o.jsx("h2",{children:c.title})]}),o.jsx("button",{onClick:()=>l(!1),className:"modal-close",children:o.jsx(Os,{size:20})})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:[c.questionCount||c.totalQuestions," Questions  ",c.duration," minutes  Pass: ",c.passingScore,"%"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.questions?.map((G,ne)=>o.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1.25rem",border:"1px solid var(--border-color)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.8rem",fontWeight:600},children:["Q",ne+1]}),o.jsx("span",{style:{fontWeight:500},children:G.question})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginLeft:"2.5rem"},children:G.options?.map((K,H)=>o.jsxs("div",{style:{padding:"0.5rem 0.75rem",background:K===G.correctAnswer?"rgba(16, 185, 129, 0.2)":"rgba(71, 85, 105, 0.3)",borderRadius:"8px",fontSize:"0.85rem",border:K===G.correctAnswer?"1px solid #10b981":"1px solid transparent"},children:[["A","B","C","D"][H],". ",K]},H))})]},ne))})]})]})})]})}function Jbt(){const{t}=E0(),[e,n]=C.useState("overview"),[r,s]=C.useState(null),[i,a]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!0),[f,A]=C.useState(!1);C.useEffect(()=>{d(!0),Promise.all([Xe.get(`${Fr}/analytics/plagiarism`),Xe.get(`${Fr}/analytics/time-to-solve`),Xe.get(`${Fr}/analytics/topics`)]).then(([y,x,v])=>{s(y.data),a(x.data),c(v.data),d(!1)}).catch(y=>{console.error(y),d(!1)})},[]);const m=async y=>{A(!0);try{if(y==="csv"){const x=await Xe.get(`${Fr}/analytics/export/csv`,{responseType:"blob"}),v=window.URL.createObjectURL(new Blob([x.data])),w=document.createElement("a");w.href=v,w.download=`platform_analytics_${new Date().toISOString().split("T")[0]}.csv`,w.click()}else{const x=await Xe.get(`${Fr}/analytics/export/json`),v=new Blob([JSON.stringify(x.data,null,2)],{type:"application/json"}),w=window.URL.createObjectURL(v),B=document.createElement("a");B.href=w,B.download=`platform_analytics_${new Date().toISOString().split("T")[0]}.json`,B.click()}}catch(x){console.error(x)}A(!1)};if(u)return o.jsx("div",{className:"loading-spinner"});const g=[{id:"overview",label:t("topic_analysis"),icon:o.jsx(fu,{size:16})},{id:"plagiarism",label:t("plagiarism_detection"),icon:o.jsx(Vs,{size:16})},{id:"time-to-solve",label:t("time_to_solve"),icon:o.jsx(ls,{size:16})},{id:"export",label:t("export_report"),icon:o.jsx(ad,{size:16})}];return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:g.map(y=>o.jsxs("button",{onClick:()=>n(y.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:e===y.id?"var(--primary)":"var(--card-bg)",color:e===y.id?"#fff":"var(--text-secondary)",boxShadow:e===y.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[y.icon," ",y.label]},y.id))}),e==="overview"&&l&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:l.byType.map((y,x)=>o.jsxs("div",{style:{padding:"1.5rem",borderRadius:"16px",background:"var(--card-bg)",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",border:"1px solid var(--border-color)"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"1rem",textTransform:"capitalize"},children:y.type}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem",textAlign:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:y.submissions}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("submissions")})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:y.avgScore>=70?"#10b981":"#f59e0b"},children:[y.avgScore,"%"]}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("avg_score")})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#3b82f6"},children:y.uniqueStudents}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("students")})]})]}),o.jsx("div",{style:{marginTop:"1rem",height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${y.passRate}%`,borderRadius:"4px",background:"linear-gradient(90deg, #10b981, #34d399)",transition:"width 0.5s"}})}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.7rem",color:"var(--text-muted)"},children:[o.jsxs("span",{children:[y.passRate,"% ",t("pass_rate")]}),o.jsxs("span",{children:[y.failRate,"% ",t("fail_rate")]})]})]},x))}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Br,{size:18,color:"#f59e0b"})," ",t("by_difficulty")]}),l.byDifficulty.map((y,x)=>{const v={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{fontWeight:700,width:"70px",textTransform:"capitalize",color:v[y.difficulty]||"#3b82f6"},children:y.difficulty}),o.jsx("div",{style:{flex:1},children:o.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${y.passRate}%`,borderRadius:"4px",background:v[y.difficulty]||"#3b82f6"}})})}),o.jsxs("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"45px",textAlign:"right"},children:[y.avgScore,"%"]}),o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",width:"40px"},children:y.submissions})]},x)})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Lr,{size:18,color:"#8b5cf6"})," ",t("by_language")]}),l.byLanguage.map((y,x)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{fontWeight:700,width:"90px"},children:y.language}),o.jsx("div",{style:{flex:1},children:o.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${y.passRate}%`,borderRadius:"4px",background:d1[x%d1.length]}})})}),o.jsxs("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"45px",textAlign:"right"},children:[y.avgScore,"%"]}),o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",width:"40px"},children:y.submissions})]},x))]})]}),l.topProblems.length>0&&o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(vu,{size:18,color:"#ef4444"})," ",t("most_attempted_problems")]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:"#"}),o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("type")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("difficulty")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("attempts")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_score")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("pass_rate")})]})}),o.jsx("tbody",{children:l.topProblems.map((y,x)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:700,color:"#3b82f6"},children:x+1}),o.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:y.title}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:y.type}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:o.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:y.difficulty==="easy"?"rgba(16,185,129,0.12)":y.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:y.difficulty==="easy"?"#10b981":y.difficulty==="medium"?"#f59e0b":"#ef4444"},children:y.difficulty})}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:y.attempts}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:y.avgScore>=70?"#10b981":"#f59e0b"},children:[y.avgScore,"%"]}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[y.passRate,"%"]})]},x))})]})})]})]}),e==="plagiarism"&&r&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #3b82f6"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("total_submissions")}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800},children:r.stats.totalSubmissions})]}),o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #ef4444"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("plagiarism_flags")}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#ef4444"},children:r.stats.plagiarismCount})]}),o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #f59e0b"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("plagiarism_rate")}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#f59e0b"},children:[r.stats.plagiarismRate,"%"]})]}),o.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #8b5cf6"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("repeat_offenders")}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#8b5cf6"},children:r.repeatOffenders.length})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[o.jsx(Pn,{size:18})," ",t("repeat_offenders")]}),r.repeatOffenders.length>0?r.repeatOffenders.map((y,x)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.05)",marginBottom:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:y.name}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:y.copiedFrom.slice(0,3).join(", ")})]}),o.jsxs("span",{style:{background:"#ef4444",color:"#fff",padding:"0.2rem 0.6rem",borderRadius:"20px",fontWeight:700,fontSize:"0.8rem"},children:[y.count,"x"]})]},x)):o.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:t("no_offenders")})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(IA,{size:18,color:"#f59e0b"})," ",t("most_copied_problems")]}),r.byProblem.length>0?r.byProblem.map((y,x)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600},children:y.title}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"capitalize"},children:y.difficulty})]}),o.jsxs("span",{style:{fontWeight:700,color:"#f59e0b"},children:[y.flaggedCount," flags"]})]},x)):o.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:t("no_data")})]})]}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(Vs,{size:18,color:"#ef4444"})," ",t("all_flagged_submissions")]}),r.flaggedSubmissions.length>0?o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("student")}),o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("language")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("score")}),o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("copied_from")}),o.jsx("th",{style:{textAlign:"right",padding:"0.6rem"},children:t("date")})]})}),o.jsx("tbody",{children:r.flaggedSubmissions.slice(0,30).map((y,x)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:y.studentName}),o.jsx("td",{style:{padding:"0.6rem"},children:y.problemTitle}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:y.language}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:y.score}),o.jsx("td",{style:{padding:"0.6rem",color:"#ef4444"},children:y.copiedFromName||y.copiedFrom}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:new Date(y.submittedAt).toLocaleDateString()})]},x))})]})}):o.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:t("no_plagiarism_detected")})]})]}),e==="time-to-solve"&&i&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:i.difficultySummary.map((y,x)=>{const w={easy:{bg:"rgba(16,185,129,0.08)",border:"#10b981"},medium:{bg:"rgba(251,191,36,0.08)",border:"#f59e0b"},hard:{bg:"rgba(239,68,68,0.08)",border:"#ef4444"}}[y.difficulty]||{bg:"rgba(59,130,246,0.08)",border:"#3b82f6"};return o.jsxs("div",{style:{padding:"1.5rem",borderRadius:"16px",background:w.bg,border:`2px solid ${w.border}`},children:[o.jsx("div",{style:{fontWeight:800,fontSize:"1.2rem",textTransform:"capitalize",color:w.border,marginBottom:"1rem"},children:y.difficulty}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("problems")}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:y.problems})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("avg_time")}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800},children:[y.avgTimeMinutes,"m"]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("avg_attempts")}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:y.avgAttempts})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("solve_rate")}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:w.border},children:[y.avgSolveRate,"%"]})]})]})]},x)})}),o.jsxs("div",{className:"dashboard-panel",children:[o.jsxs("h3",{className:"panel-title",children:[o.jsx(ls,{size:18,color:"#3b82f6"})," ",t("all_problems_metrics")]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("type")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("difficulty")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("students")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("total_attempts")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_attempts")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_time")}),o.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("solve_rate")})]})}),o.jsx("tbody",{children:i.problems.map((y,x)=>o.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[o.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:y.title}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:y.type}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:o.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:y.difficulty==="easy"?"rgba(16,185,129,0.12)":y.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:y.difficulty==="easy"?"#10b981":y.difficulty==="medium"?"#f59e0b":"#ef4444"},children:y.difficulty})}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:y.studentCount}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:y.totalAttempts}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:y.avgAttempts}),o.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:y.avgTimeMinutes?`${y.avgTimeMinutes}m`:"-"}),o.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:y.solveRate>=70?"#10b981":y.solveRate>=40?"#f59e0b":"#ef4444"},children:[y.solveRate,"%"]})]},x))})]})})]})]}),e==="export"&&o.jsx("div",{children:o.jsxs("div",{className:"dashboard-panel",style:{textAlign:"center",padding:"3rem 2rem"},children:[o.jsx(ad,{size:56,color:"var(--primary)",style:{marginBottom:"1rem"}}),o.jsx("h3",{style:{margin:"0 0 0.5rem",fontSize:"1.5rem"},children:t("export_platform_analytics")}),o.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:t("export_platform_description")}),o.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>m("csv"),disabled:f,style:{padding:"1rem 2.5rem",borderRadius:"14px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",fontWeight:700,fontSize:"1rem",opacity:f?.6:1,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(16,185,129,0.3)"},children:[o.jsx(qi,{size:20})," ",t("download_csv")]}),o.jsxs("button",{onClick:()=>m("json"),disabled:f,style:{padding:"1rem 2.5rem",borderRadius:"14px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",fontWeight:700,fontSize:"1rem",opacity:f?.6:1,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(59,130,246,0.3)"},children:[o.jsx(Lr,{size:20})," ",t("download_json")]})]})]})})]})}const CAe=C.createContext(null),kAe=C.createContext(null),Rb=()=>C.useContext(CAe),Zbt=()=>C.useContext(kAe);function J6({children:t,allowedRoles:e}){const{user:n}=Rb();return n?e&&!e.includes(n.role)?o.jsx(r1,{to:`/${n.role}`,replace:!0}):t:o.jsx(r1,{to:"/login",replace:!0})}const evt="http://localhost:8000/api";function tvt(){const[t,e]=C.useState(null),[n,r]=C.useState(()=>{const d=localStorage.getItem("theme");return d||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),[s,i]=C.useState(!0),a=aD();C.useEffect(()=>{try{const d=localStorage.getItem("currentUser");d&&d!=="undefined"&&e(JSON.parse(d))}catch(d){console.error("Failed to parse saved user:",d),localStorage.removeItem("currentUser")}i(!1)},[]),C.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n)},[n]);const l=async(d,f)=>{try{const A=await fetch(`${evt}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:f})}),m=await A.json();if(!A.ok)throw new Error(m.error||"Login failed");return e(m.user),localStorage.setItem("currentUser",JSON.stringify(m.user)),a(`/${m.user.role}`),{success:!0}}catch(A){return{success:!1,error:A.message}}},c=()=>{e(null),localStorage.removeItem("currentUser"),a("/login")},u=()=>{r(d=>d==="light"?"dark":"light")};return s?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"var(--bg-secondary)"},children:o.jsx("div",{className:"loading-spinner"})}):o.jsx(CAe.Provider,{value:{user:t,login:l,logout:c},children:o.jsx(kAe.Provider,{value:{theme:n,toggleTheme:u},children:o.jsxs($j,{children:[o.jsx(os,{path:"/login",element:t?o.jsx(r1,{to:`/${t.role}`,replace:!0}):o.jsx(Zye,{})}),o.jsx(os,{path:"/student/*",element:o.jsx(J6,{allowedRoles:["student"],children:o.jsx(ubt,{})})}),o.jsx(os,{path:"/mentor/*",element:o.jsx(J6,{allowedRoles:["mentor"],children:o.jsx(Sbt,{})})}),o.jsx(os,{path:"/admin/*",element:o.jsx(J6,{allowedRoles:["admin"],children:o.jsx(Hbt,{})})}),o.jsx(os,{path:"/",element:t?o.jsx(r1,{to:`/${t.role}`,replace:!0}):o.jsx(r1,{to:"/login",replace:!0})}),o.jsx(os,{path:"*",element:o.jsx(r1,{to:"/",replace:!0})})]})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>console.log("[PWA] Service Worker registered:",t.scope)).catch(t=>console.warn("[PWA] SW registration failed:",t))});if(!localStorage.getItem("theme")){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",t?"dark":"light")}Qpe.createRoot(document.getElementById("root")).render(o.jsx(xA.StrictMode,{children:o.jsx(cge,{children:o.jsx(e1e,{children:o.jsx(tvt,{})})})}));export{_s as _,nvt as c,oc as g};
